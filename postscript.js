(function(){var na='<svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg>',ta='<svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true"><path fill-rule="evenodd" fill="rgb(63, 185, 80)" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg>';document.addEventListener("nav",()=>{let dn=document.getElementsByTagName("pre");for(let hi=0;hi<dn.length;hi++){let oi=dn[hi].getElementsByTagName("code")[0];if(oi){let aa=function(){navigator.clipboard.writeText(Sn).then(()=>{Ke.blur(),Ke.innerHTML=ta,setTimeout(()=>{Ke.innerHTML=na,Ke.style.borderColor=""},2e3)},Ca=>console.error(Ca))};var D=aa;let Sn=(oi.dataset.clipboard?oi.dataset.clipboard:oi.innerText).replace(/\n\n/g,`
`),Ke=document.createElement("button");Ke.className="clipboard-button",Ke.type="button",Ke.innerHTML=na,Ke.ariaLabel="Copy source",Ke.tabIndex="-1",Ke.addEventListener("click",aa),window.addCleanup(()=>Ke.removeEventListener("click",aa)),dn[hi].prepend(Ke)}}});var Ua=(dn,D)=>function(){navigator.clipboard.writeText(D).then(()=>{dn.blur(),dn.classList.add("check"),setTimeout(()=>{dn.style.borderColor="",dn.classList.remove("check")},2e3)},hi=>console.error(hi))};document.addEventListener("nav",()=>{let dn=document.getElementsByClassName("tikz");if(dn.length!=0)for(let D=0;D<dn.length;D++){let hi=dn[D],oi=hi.querySelector("figcaption > button.source-code-button");if(!oi)continue;let aa=hi.querySelector(".tikz-mathml");if(!aa)continue;let Sn=JSON.parse(aa.querySelector("annotation").textContent??""),Ke=Ua(oi,Sn);oi.addEventListener("click",Ke),window.addCleanup(()=>oi.removeEventListener("click",Ke))}}),document.addEventListener("nav",()=>{let dn=document.getElementsByClassName("ps-root");if(dn.length!=0)for(let D=0;D<dn.length;D++){let hi=dn[D],oi=hi.getElementsByClassName("ps-clipboard")[0],aa=JSON.parse(hi.dataset.settings??"{}"),Sn;hi.dataset.inlineMacros&&hi.dataset.inlineMacros!==""&&(Sn=JSON.parse(hi.dataset.inlineMacros));let Ke=hi.querySelector(".ps-mathml");if(!Ke)continue;let Ca=JSON.parse(Ke.querySelector("annotation").textContent??""),ba=`\\documentclass{article}
`+Fa(aa,Sn)+`
\\begin{document}
`+On(aa,Ca)+`
\\end{document}`,Kr=Ua(oi,ba);oi.addEventListener("click",Kr),window.addCleanup(()=>oi.removeEventListener("click",Kr)),hi.prepend(oi)}});var Fa=(dn,D)=>{let hi=dn.renderer.noEnd,oi=dn.renderer.scopeLines,aa=D!==void 0?D.split(`
`).map(Sn=>Sn.trim()):"";return`
\\usepackage{algorithm}
\\usepackage[noEnd=${hi},indLines=${oi}]{algpseudocodex}

\\newcommand{\\And}{\\textbf{and~}}
\\newcommand{\\Or}{\\textbf{or~}}
\\newcommand{\\Xor}{\\textbf{xor~}}
\\newcommand{\\Not}{\\textbf{not~}}
\\newcommand{\\To}{\\textbf{to~}}
\\newcommand{\\DownTo}{\\textbf{downto~}}
\\newcommand{\\True}{\\textbf{true~}}
\\newcommand{\\False}{\\textbf{false~}}
\\newcommand{\\Input}{\\item[\\textbf{Input:}]}
\\renewcommand{\\Output}{\\item[\\textbf{Output:}]}
\\newcommand{\\Print}{\\State \\textbf{print~}}
\\renewcommand{\\Return}{\\State \\textbf{return~}}

\\usepackage{amsmath}
${aa}
`},On=(dn,D)=>(dn.renderer.lineNumber&&(D=D.replace("\\begin{algorithmic}","\\begin{algorithmic}[1]")),D)})(),function(){var na=Object.create,ta=Object.defineProperty,Ua=Object.getOwnPropertyDescriptor,Fa=Object.getOwnPropertyNames,On=Object.getPrototypeOf,dn=Object.prototype.hasOwnProperty,D=(jr,Ir)=>()=>(Ir||jr((Ir={exports:{}}).exports,Ir),Ir.exports),hi=(jr,Ir,gr,Zr)=>{if(Ir&&typeof Ir=="object"||typeof Ir=="function")for(let vr of Fa(Ir))!dn.call(jr,vr)&&vr!==gr&&ta(jr,vr,{get:()=>Ir[vr],enumerable:!(Zr=Ua(Ir,vr))||Zr.enumerable});return jr},oi=(jr,Ir,gr)=>(gr=jr!=null?na(On(jr)):{},hi(Ir||!jr||!jr.__esModule?ta(gr,"default",{value:jr,enumerable:!0}):gr,jr)),aa=D((jr,Ir)=>{"use strict";Ir.exports=Zr;function gr(Vr){return Vr instanceof Buffer?Buffer.from(Vr):new Vr.constructor(Vr.buffer.slice(),Vr.byteOffset,Vr.length)}function Zr(Vr){if(Vr=Vr||{},Vr.circles)return vr(Vr);let Ht=new Map;if(Ht.set(Date,Zt=>new Date(Zt)),Ht.set(Map,(Zt,dr)=>new Map(or(Array.from(Zt),dr))),Ht.set(Set,(Zt,dr)=>new Set(or(Array.from(Zt),dr))),Vr.constructorHandlers)for(let Zt of Vr.constructorHandlers)Ht.set(Zt[0],Zt[1]);let xi=null;return Vr.proto?xr:Wr;function or(Zt,dr){let nr=Object.keys(Zt),qt=new Array(nr.length);for(let Yr=0;Yr<nr.length;Yr++){let ii=nr[Yr],ki=Zt[ii];typeof ki!="object"||ki===null?qt[ii]=ki:ki.constructor!==Object&&(xi=Ht.get(ki.constructor))?qt[ii]=xi(ki,dr):ArrayBuffer.isView(ki)?qt[ii]=gr(ki):qt[ii]=dr(ki)}return qt}function Wr(Zt){if(typeof Zt!="object"||Zt===null)return Zt;if(Array.isArray(Zt))return or(Zt,Wr);if(Zt.constructor!==Object&&(xi=Ht.get(Zt.constructor)))return xi(Zt,Wr);let dr={};for(let nr in Zt){if(Object.hasOwnProperty.call(Zt,nr)===!1)continue;let qt=Zt[nr];typeof qt!="object"||qt===null?dr[nr]=qt:qt.constructor!==Object&&(xi=Ht.get(qt.constructor))?dr[nr]=xi(qt,Wr):ArrayBuffer.isView(qt)?dr[nr]=gr(qt):dr[nr]=Wr(qt)}return dr}function xr(Zt){if(typeof Zt!="object"||Zt===null)return Zt;if(Array.isArray(Zt))return or(Zt,xr);if(Zt.constructor!==Object&&(xi=Ht.get(Zt.constructor)))return xi(Zt,xr);let dr={};for(let nr in Zt){let qt=Zt[nr];typeof qt!="object"||qt===null?dr[nr]=qt:qt.constructor!==Object&&(xi=Ht.get(qt.constructor))?dr[nr]=xi(qt,xr):ArrayBuffer.isView(qt)?dr[nr]=gr(qt):dr[nr]=xr(qt)}return dr}}function vr(Vr){let Ht=[],xi=[],or=new Map;if(or.set(Date,nr=>new Date(nr)),or.set(Map,(nr,qt)=>new Map(xr(Array.from(nr),qt))),or.set(Set,(nr,qt)=>new Set(xr(Array.from(nr),qt))),Vr.constructorHandlers)for(let nr of Vr.constructorHandlers)or.set(nr[0],nr[1]);let Wr=null;return Vr.proto?dr:Zt;function xr(nr,qt){let Yr=Object.keys(nr),ii=new Array(Yr.length);for(let ki=0;ki<Yr.length;ki++){let zn=Yr[ki],sa=nr[zn];if(typeof sa!="object"||sa===null)ii[zn]=sa;else if(sa.constructor!==Object&&(Wr=or.get(sa.constructor)))ii[zn]=Wr(sa,qt);else if(ArrayBuffer.isView(sa))ii[zn]=gr(sa);else{let un=Ht.indexOf(sa);un!==-1?ii[zn]=xi[un]:ii[zn]=qt(sa)}}return ii}function Zt(nr){if(typeof nr!="object"||nr===null)return nr;if(Array.isArray(nr))return xr(nr,Zt);if(nr.constructor!==Object&&(Wr=or.get(nr.constructor)))return Wr(nr,Zt);let qt={};Ht.push(nr),xi.push(qt);for(let Yr in nr){if(Object.hasOwnProperty.call(nr,Yr)===!1)continue;let ii=nr[Yr];if(typeof ii!="object"||ii===null)qt[Yr]=ii;else if(ii.constructor!==Object&&(Wr=or.get(ii.constructor)))qt[Yr]=Wr(ii,Zt);else if(ArrayBuffer.isView(ii))qt[Yr]=gr(ii);else{let ki=Ht.indexOf(ii);ki!==-1?qt[Yr]=xi[ki]:qt[Yr]=Zt(ii)}}return Ht.pop(),xi.pop(),qt}function dr(nr){if(typeof nr!="object"||nr===null)return nr;if(Array.isArray(nr))return xr(nr,dr);if(nr.constructor!==Object&&(Wr=or.get(nr.constructor)))return Wr(nr,dr);let qt={};Ht.push(nr),xi.push(qt);for(let Yr in nr){let ii=nr[Yr];if(typeof ii!="object"||ii===null)qt[Yr]=ii;else if(ii.constructor!==Object&&(Wr=or.get(ii.constructor)))qt[Yr]=Wr(ii,dr);else if(ArrayBuffer.isView(ii))qt[Yr]=gr(ii);else{let ki=Ht.indexOf(ii);ki!==-1?qt[Yr]=xi[ki]:qt[Yr]=dr(ii)}}return Ht.pop(),xi.pop(),qt}}}),Sn=Object.hasOwnProperty,Ke=oi(aa(),1),Ca=(0,Ke.default)();function ba(jr,Ir){if(!jr)return;function gr(vr){vr.target===this&&(vr.preventDefault(),vr.stopPropagation(),Ir())}function Zr(vr){vr.key.startsWith("Esc")&&(vr.preventDefault(),Ir())}jr?.addEventListener("click",gr),window.addCleanup(()=>jr?.removeEventListener("click",gr)),document.addEventListener("keydown",Zr),window.addCleanup(()=>document.removeEventListener("keydown",Zr))}var Kr=()=>{let jr=window.navigator.userAgent.toLowerCase();return jr.includes("safari")&&!jr.includes("chrome")?"Safari":jr.includes("edg")?"Edge":jr.includes("firefox")?"Firefox":jr.includes("opr")||jr.includes("opera")?"Opera":jr.includes("chrome")?"Chrome":"Other"},Ot=()=>window.navigator.userAgent.toLowerCase().includes("mac");document.addEventListener("nav",async()=>{let jr=document.getElementsByClassName("keybind")[0];if(!jr)return;let Ir=jr.querySelector("#shortcut-container"),gr=jr.querySelector("#shortcut-key"),Zr=document.querySelector(".center"),vr=document.querySelector(".right.sidebar"),Vr=document.querySelector(".left.sidebar"),Ht=()=>{Zr&&(Zr.style.zIndex="-1"),vr&&(vr.style.zIndex="-1"),Vr&&(Vr.style.zIndex="-1"),Ir?.classList.add("active")},xi=()=>{Zr&&(Zr.style.zIndex=""),vr&&(vr.style.zIndex=""),Vr&&(Vr.style.zIndex=""),Ir?.classList.remove("active")};async function or(Wr){if(gr)for(let xr of JSON.parse(gr.dataset.mapping)){let[,Zt]=xr.split("--");if(Wr.key===Zt&&(Wr.ctrlKey||Wr.metaKey)){Wr.preventDefault(),Ir?.classList.contains("active")?xi():Ht();break}}}document.addEventListener("keydown",or),window.addCleanup(()=>document.removeEventListener("keydown",or)),ba(jr,xi)});var Vi=new Map([["\\","/"],["j","/curius"]]),Li={recherche:{mac:"/",def:"k"},graphique:{mac:";",def:"g"}};document.addEventListener("nav",()=>{let jr=document.getElementById("shortcut-container");if(!jr)return;let Ir=jr.querySelectorAll('ul[id="shortcut-list"] > li > div[id="shortcuts"]');for(let Zr of Ir){let vr=Zr.dataset.key,Vr=Zr.dataset.value,[Ht,xi]=vr.split("--"),or=Li[Vr];Ht=Ot()?"\u2318":"\u2303";let Wr=Kr();if(or){let{mac:xr,def:Zt}=or;xi=Wr==="Safari"?xr:Zt}Zr.innerHTML=`
<kbd id="clickable-kbd">${Ht} ${xi}</kbd>
<span>${Vr}</span>
`}function gr(Zr){if(Vi.get(Zr.key)!==void 0&&(Zr.ctrlKey||Zr.metaKey)){Zr.preventDefault();let vr=Vi.get(Zr.key);if(jr?.classList.toggle("active",!1),window.location.pathname===vr)return;window.spaNavigate(new URL(vr,window.location.toString()))}}document.addEventListener("keydown",gr),window.addCleanup(()=>document.removeEventListener("keydown",gr))})}(),function(){var na=Object.create,ta=Object.defineProperty,Ua=Object.getOwnPropertyDescriptor,Fa=Object.getOwnPropertyNames,On=Object.getPrototypeOf,dn=Object.prototype.hasOwnProperty,D=(te,ye)=>()=>(ye||te((ye={exports:{}}).exports,ye),ye.exports),hi=(te,ye,Se,Re)=>{if(ye&&typeof ye=="object"||typeof ye=="function")for(let $e of Fa(ye))!dn.call(te,$e)&&$e!==Se&&ta(te,$e,{get:()=>ye[$e],enumerable:!(Re=Ua(ye,$e))||Re.enumerable});return te},oi=(te,ye,Se)=>(Se=te!=null?na(On(te)):{},hi(ye||!te||!te.__esModule?ta(Se,"default",{value:te,enumerable:!0}):Se,te)),aa=D(()=>{}),Sn=D((te,ye)=>{"use strict";ye.exports=Re;function Se(tt){return tt instanceof Buffer?Buffer.from(tt):new tt.constructor(tt.buffer.slice(),tt.byteOffset,tt.length)}function Re(tt){if(tt=tt||{},tt.circles)return $e(tt);let Ct=new Map;if(Ct.set(Date,ht=>new Date(ht)),Ct.set(Map,(ht,vt)=>new Map(De(Array.from(ht),vt))),Ct.set(Set,(ht,vt)=>new Set(De(Array.from(ht),vt))),tt.constructorHandlers)for(let ht of tt.constructorHandlers)Ct.set(ht[0],ht[1]);let ge=null;return tt.proto?lt:Ve;function De(ht,vt){let ut=Object.keys(ht),xt=new Array(ut.length);for(let jt=0;jt<ut.length;jt++){let ur=ut[jt],ei=ht[ur];typeof ei!="object"||ei===null?xt[ur]=ei:ei.constructor!==Object&&(ge=Ct.get(ei.constructor))?xt[ur]=ge(ei,vt):ArrayBuffer.isView(ei)?xt[ur]=Se(ei):xt[ur]=vt(ei)}return xt}function Ve(ht){if(typeof ht!="object"||ht===null)return ht;if(Array.isArray(ht))return De(ht,Ve);if(ht.constructor!==Object&&(ge=Ct.get(ht.constructor)))return ge(ht,Ve);let vt={};for(let ut in ht){if(Object.hasOwnProperty.call(ht,ut)===!1)continue;let xt=ht[ut];typeof xt!="object"||xt===null?vt[ut]=xt:xt.constructor!==Object&&(ge=Ct.get(xt.constructor))?vt[ut]=ge(xt,Ve):ArrayBuffer.isView(xt)?vt[ut]=Se(xt):vt[ut]=Ve(xt)}return vt}function lt(ht){if(typeof ht!="object"||ht===null)return ht;if(Array.isArray(ht))return De(ht,lt);if(ht.constructor!==Object&&(ge=Ct.get(ht.constructor)))return ge(ht,lt);let vt={};for(let ut in ht){let xt=ht[ut];typeof xt!="object"||xt===null?vt[ut]=xt:xt.constructor!==Object&&(ge=Ct.get(xt.constructor))?vt[ut]=ge(xt,lt):ArrayBuffer.isView(xt)?vt[ut]=Se(xt):vt[ut]=lt(xt)}return vt}}function $e(tt){let Ct=[],ge=[],De=new Map;if(De.set(Date,ut=>new Date(ut)),De.set(Map,(ut,xt)=>new Map(lt(Array.from(ut),xt))),De.set(Set,(ut,xt)=>new Set(lt(Array.from(ut),xt))),tt.constructorHandlers)for(let ut of tt.constructorHandlers)De.set(ut[0],ut[1]);let Ve=null;return tt.proto?vt:ht;function lt(ut,xt){let jt=Object.keys(ut),ur=new Array(jt.length);for(let ei=0;ei<jt.length;ei++){let pr=jt[ei],Er=ut[pr];if(typeof Er!="object"||Er===null)ur[pr]=Er;else if(Er.constructor!==Object&&(Ve=De.get(Er.constructor)))ur[pr]=Ve(Er,xt);else if(ArrayBuffer.isView(Er))ur[pr]=Se(Er);else{let Gt=Ct.indexOf(Er);Gt!==-1?ur[pr]=ge[Gt]:ur[pr]=xt(Er)}}return ur}function ht(ut){if(typeof ut!="object"||ut===null)return ut;if(Array.isArray(ut))return lt(ut,ht);if(ut.constructor!==Object&&(Ve=De.get(ut.constructor)))return Ve(ut,ht);let xt={};Ct.push(ut),ge.push(xt);for(let jt in ut){if(Object.hasOwnProperty.call(ut,jt)===!1)continue;let ur=ut[jt];if(typeof ur!="object"||ur===null)xt[jt]=ur;else if(ur.constructor!==Object&&(Ve=De.get(ur.constructor)))xt[jt]=Ve(ur,ht);else if(ArrayBuffer.isView(ur))xt[jt]=Se(ur);else{let ei=Ct.indexOf(ur);ei!==-1?xt[jt]=ge[ei]:xt[jt]=ht(ur)}}return Ct.pop(),ge.pop(),xt}function vt(ut){if(typeof ut!="object"||ut===null)return ut;if(Array.isArray(ut))return lt(ut,vt);if(ut.constructor!==Object&&(Ve=De.get(ut.constructor)))return Ve(ut,vt);let xt={};Ct.push(ut),ge.push(xt);for(let jt in ut){let ur=ut[jt];if(typeof ur!="object"||ur===null)xt[jt]=ur;else if(ur.constructor!==Object&&(Ve=De.get(ur.constructor)))xt[jt]=Ve(ur,vt);else if(ArrayBuffer.isView(ur))xt[jt]=Se(ur);else{let ei=Ct.indexOf(ur);ei!==-1?xt[jt]=ge[ei]:xt[jt]=vt(ur)}}return Ct.pop(),ge.pop(),xt}}}),Ke;function Ca(te){return typeof te<"u"?te:!0}function ba(te){let ye=Array(te);for(let Se=0;Se<te;Se++)ye[Se]=Kr();return ye}function Kr(){return Object.create(null)}function Ot(te,ye){return ye.length-te.length}function Vi(te){return typeof te=="string"}function Li(te){return typeof te=="object"}function jr(te){return typeof te=="function"}function Ir(te,ye){var Se=gr;if(te&&(ye&&(te=Vr(te,ye)),this.H&&(te=Vr(te,this.H)),this.J&&1<te.length&&(te=Vr(te,this.J)),Se||Se==="")){if(ye=te.split(Se),this.filter){te=this.filter,Se=ye.length;let Re=[];for(let $e=0,tt=0;$e<Se;$e++){let Ct=ye[$e];Ct&&!te[Ct]&&(Re[tt++]=Ct)}te=Re}else te=ye;return te}return te}var gr=/[\p{Z}\p{S}\p{P}\p{C}]+/u,Zr=/[\u0300-\u036f]/g;function vr(te,ye){let Se=Object.keys(te),Re=Se.length,$e=[],tt="",Ct=0;for(let ge=0,De,Ve;ge<Re;ge++)De=Se[ge],(Ve=te[De])?($e[Ct++]=Ht(ye?"(?!\\b)"+De+"(\\b|_)":De),$e[Ct++]=Ve):tt+=(tt?"|":"")+De;return tt&&($e[Ct++]=Ht(ye?"(?!\\b)("+tt+")(\\b|_)":"("+tt+")"),$e[Ct]=""),$e}function Vr(te,ye){for(let Se=0,Re=ye.length;Se<Re&&(te=te.replace(ye[Se],ye[Se+1]),te);Se+=2);return te}function Ht(te){return new RegExp(te,"g")}function xi(te){let ye="",Se="";for(let Re=0,$e=te.length,tt;Re<$e;Re++)(tt=te[Re])!==Se&&(ye+=Se=tt);return ye}var or={encode:Wr,F:!1,G:""};function Wr(te){return Ir.call(this,(""+te).toLowerCase(),!1)}var xr={},Zt={};function dr(te){nr(te,"add"),nr(te,"append"),nr(te,"search"),nr(te,"update"),nr(te,"remove")}function nr(te,ye){te[ye+"Async"]=function(){let Se=this,Re=arguments;var $e=Re[Re.length-1];let tt;return jr($e)&&(tt=$e,delete Re[Re.length-1]),$e=new Promise(function(Ct){setTimeout(function(){Se.async=!0;let ge=Se[ye].apply(Se,Re);Se.async=!1,Ct(ge)})}),tt?($e.then(tt),this):$e}}function qt(te,ye,Se,Re){let $e=te.length,tt=[],Ct,ge,De=0;Re&&(Re=[]);for(let Ve=$e-1;0<=Ve;Ve--){let lt=te[Ve],ht=lt.length,vt=Kr(),ut=!Ct;for(let xt=0;xt<ht;xt++){let jt=lt[xt],ur=jt.length;if(ur)for(let ei=0,pr,Er;ei<ur;ei++)if(Er=jt[ei],Ct){if(Ct[Er]){if(!Ve){if(Se)Se--;else if(tt[De++]=Er,De===ye)return tt}(Ve||Re)&&(vt[Er]=1),ut=!0}if(Re&&(pr=(ge[Er]||0)+1,ge[Er]=pr,pr<$e)){let Gt=Re[pr-2]||(Re[pr-2]=[]);Gt[Gt.length]=Er}}else vt[Er]=1}if(Re)Ct||(ge=vt);else if(!ut)return[];Ct=vt}if(Re)for(let Ve=Re.length-1,lt,ht;0<=Ve;Ve--){lt=Re[Ve],ht=lt.length;for(let vt=0,ut;vt<ht;vt++)if(ut=lt[vt],!Ct[ut]){if(Se)Se--;else if(tt[De++]=ut,De===ye)return tt;Ct[ut]=1}}return tt}function Yr(te,ye){let Se=Kr(),Re=Kr(),$e=[];for(let tt=0;tt<te.length;tt++)Se[te[tt]]=1;for(let tt=0,Ct;tt<ye.length;tt++){Ct=ye[tt];for(let ge=0,De;ge<Ct.length;ge++)De=Ct[ge],Se[De]&&!Re[De]&&(Re[De]=1,$e[$e.length]=De)}return $e}function ii(te){this.l=te!==!0&&te,this.cache=Kr(),this.h=[]}function ki(te,ye,Se){Li(te)&&(te=te.query);let Re=this.cache.get(te);return Re||(Re=this.search(te,ye,Se),this.cache.set(te,Re)),Re}ii.prototype.set=function(te,ye){if(!this.cache[te]){var Se=this.h.length;for(Se===this.l?delete this.cache[this.h[Se-1]]:Se++,--Se;0<Se;Se--)this.h[Se]=this.h[Se-1];this.h[0]=te}this.cache[te]=ye},ii.prototype.get=function(te){let ye=this.cache[te];if(this.l&&ye&&(te=this.h.indexOf(te))){let Se=this.h[te-1];this.h[te-1]=this.h[te],this.h[te]=Se}return ye};var zn={memory:{charset:"latin:extra",D:3,B:4,m:!1},performance:{D:3,B:3,s:!1,context:{depth:2,D:1}},match:{charset:"latin:extra",G:"reverse"},score:{charset:"latin:advanced",D:20,B:3,context:{depth:3,D:9}},default:{}};function sa(te,ye,Se,Re,$e,tt,Ct,ge){setTimeout(function(){let De=te(Se?Se+"."+Re:Re,JSON.stringify(Ct));De&&De.then?De.then(function(){ye.export(te,ye,Se,$e,tt+1,ge)}):ye.export(te,ye,Se,$e,tt+1,ge)})}function un(te,ye){if(!(this instanceof un))return new un(te);var Se;if(te){Vi(te)?te=zn[te]:(Se=te.preset)&&(te=Object.assign({},Se[Se],te)),Se=te.charset;var Re=te.lang;Vi(Se)&&(Se.indexOf(":")===-1&&(Se+=":default"),Se=Zt[Se]),Vi(Re)&&(Re=xr[Re])}else te={};let $e,tt,Ct=te.context||{};if(this.encode=te.encode||Se&&Se.encode||Wr,this.register=ye||Kr(),this.D=$e=te.resolution||9,this.G=ye=Se&&Se.G||te.tokenize||"strict",this.depth=ye==="strict"&&Ct.depth,this.l=Ca(Ct.bidirectional),this.s=tt=Ca(te.optimize),this.m=Ca(te.fastupdate),this.B=te.minlength||1,this.C=te.boost,this.map=tt?ba($e):Kr(),this.A=$e=Ct.resolution||1,this.h=tt?ba($e):Kr(),this.F=Se&&Se.F||te.rtl,this.H=(ye=te.matcher||Re&&Re.H)&&vr(ye,!1),this.J=(ye=te.stemmer||Re&&Re.J)&&vr(ye,!0),Se=ye=te.filter||Re&&Re.filter){Se=ye,Re=Kr();for(let ge=0,De=Se.length;ge<De;ge++)Re[Se[ge]]=1;Se=Re}this.filter=Se,this.cache=(ye=te.cache)&&new ii(ye)}Ke=un.prototype,Ke.append=function(te,ye){return this.add(te,ye,!0)},Ke.add=function(te,ye,Se,Re){if(ye&&(te||te===0)){if(!Re&&!Se&&this.register[te])return this.update(te,ye);if(ye=this.encode(ye),Re=ye.length){let Ve=Kr(),lt=Kr(),ht=this.depth,vt=this.D;for(let ut=0;ut<Re;ut++){let xt=ye[this.F?Re-1-ut:ut];var $e=xt.length;if(xt&&$e>=this.B&&(ht||!lt[xt])){var tt=ja(vt,Re,ut),Ct="";switch(this.G){case"full":if(2<$e){for(tt=0;tt<$e;tt++)for(var ge=$e;ge>tt;ge--)if(ge-tt>=this.B){var De=ja(vt,Re,ut,$e,tt);Ct=xt.substring(tt,ge),fs(this,lt,Ct,De,te,Se)}break}case"reverse":if(1<$e){for(ge=$e-1;0<ge;ge--)Ct=xt[ge]+Ct,Ct.length>=this.B&&fs(this,lt,Ct,ja(vt,Re,ut,$e,ge),te,Se);Ct=""}case"forward":if(1<$e){for(ge=0;ge<$e;ge++)Ct+=xt[ge],Ct.length>=this.B&&fs(this,lt,Ct,tt,te,Se);break}default:if(this.C&&(tt=Math.min(tt/this.C(ye,xt,ut)|0,vt-1)),fs(this,lt,xt,tt,te,Se),ht&&1<Re&&ut<Re-1){for($e=Kr(),Ct=this.A,tt=xt,ge=Math.min(ht+1,Re-ut),$e[tt]=1,De=1;De<ge;De++)if((xt=ye[this.F?Re-1-ut-De:ut+De])&&xt.length>=this.B&&!$e[xt]){$e[xt]=1;let jt=this.l&&xt>tt;fs(this,Ve,jt?tt:xt,ja(Ct+(Re/2>Ct?0:1),Re,ut,ge-1,De-1),te,Se,jt?xt:tt)}}}}}this.m||(this.register[te]=1)}}return this};function ja(te,ye,Se,Re,$e){return Se&&1<te?ye+(Re||0)<=te?Se+($e||0):(te-1)/(ye+(Re||0))*(Se+($e||0))+1|0:0}function fs(te,ye,Se,Re,$e,tt,Ct){let ge=Ct?te.h:te.map;(!ye[Se]||Ct&&!ye[Se][Ct])&&(te.s&&(ge=ge[Re]),Ct?(ye=ye[Se]||(ye[Se]=Kr()),ye[Ct]=1,ge=ge[Ct]||(ge[Ct]=Kr())):ye[Se]=1,ge=ge[Se]||(ge[Se]=[]),te.s||(ge=ge[Re]||(ge[Re]=[])),tt&&ge.includes($e)||(ge[ge.length]=$e,te.m&&(te=te.register[$e]||(te.register[$e]=[]),te[te.length]=ge)))}Ke.search=function(te,ye,Se){Se||(!ye&&Li(te)?(Se=te,te=Se.query):Li(ye)&&(Se=ye));let Re=[],$e,tt,Ct=0;if(Se){te=Se.query||te,ye=Se.limit,Ct=Se.offset||0;var ge=Se.context;tt=Se.suggest}if(te&&(te=this.encode(""+te),$e=te.length,1<$e)){Se=Kr();var De=[];for(let lt=0,ht=0,vt;lt<$e;lt++)if((vt=te[lt])&&vt.length>=this.B&&!Se[vt])if(this.s||tt||this.map[vt])De[ht++]=vt,Se[vt]=1;else return Re;te=De,$e=te.length}if(!$e)return Re;ye||(ye=100),ge=this.depth&&1<$e&&ge!==!1,Se=0;let Ve;ge?(Ve=te[0],Se=1):1<$e&&te.sort(Ot);for(let lt,ht;Se<$e;Se++){if(ht=te[Se],ge?(lt=Vn(this,Re,tt,ye,Ct,$e===2,ht,Ve),tt&&lt===!1&&Re.length||(Ve=ht)):lt=Vn(this,Re,tt,ye,Ct,$e===1,ht),lt)return lt;if(tt&&Se===$e-1){if(De=Re.length,!De){if(ge){ge=0,Se=-1;continue}return Re}if(De===1)return Wt(Re[0],ye,Ct)}}return qt(Re,ye,Ct,tt)};function Vn(te,ye,Se,Re,$e,tt,Ct,ge){let De=[],Ve=ge?te.h:te.map;if(te.s||(Ve=ir(Ve,Ct,ge,te.l)),Ve){let lt=0,ht=Math.min(Ve.length,ge?te.A:te.D);for(let vt=0,ut=0,xt,jt;vt<ht&&!((xt=Ve[vt])&&(te.s&&(xt=ir(xt,Ct,ge,te.l)),$e&&xt&&tt&&(jt=xt.length,jt<=$e?($e-=jt,xt=null):(xt=xt.slice($e),$e=0)),xt&&(De[lt++]=xt,tt&&(ut+=xt.length,ut>=Re))));vt++);if(lt){if(tt)return Wt(De,Re,0);ye[ye.length]=De;return}}return!Se&&De}function Wt(te,ye,Se){return te=te.length===1?te[0]:[].concat.apply([],te),Se||te.length>ye?te.slice(Se,Se+ye):te}function ir(te,ye,Se,Re){return Se?(Re=Re&&ye>Se,te=(te=te[Re?ye:Se])&&te[Re?Se:ye]):te=te[ye],te}Ke.contain=function(te){return!!this.register[te]},Ke.update=function(te,ye){return this.remove(te).add(te,ye)},Ke.remove=function(te,ye){let Se=this.register[te];if(Se){if(this.m)for(let Re=0,$e;Re<Se.length;Re++)$e=Se[Re],$e.splice($e.indexOf(te),1);else Rr(this.map,te,this.D,this.s),this.depth&&Rr(this.h,te,this.A,this.s);if(ye||delete this.register[te],this.cache){ye=this.cache;for(let Re=0,$e,tt;Re<ye.h.length;Re++)tt=ye.h[Re],$e=ye.cache[tt],$e.includes(te)&&(ye.h.splice(Re--,1),delete ye.cache[tt])}}return this};function Rr(te,ye,Se,Re,$e){let tt=0;if(te.constructor===Array)if($e)ye=te.indexOf(ye),ye!==-1?1<te.length&&(te.splice(ye,1),tt++):tt++;else{$e=Math.min(te.length,Se);for(let Ct=0,ge;Ct<$e;Ct++)(ge=te[Ct])&&(tt=Rr(ge,ye,Se,Re,$e),Re||tt||delete te[Ct])}else for(let Ct in te)(tt=Rr(te[Ct],ye,Se,Re,$e))||delete te[Ct];return tt}Ke.searchCache=ki,Ke.export=function(te,ye,Se,Re,$e,tt){let Ct=!0;typeof tt>"u"&&(Ct=new Promise(Ve=>{tt=Ve}));let ge,De;switch($e||($e=0)){case 0:if(ge="reg",this.m){De=Kr();for(let Ve in this.register)De[Ve]=1}else De=this.register;break;case 1:ge="cfg",De={doc:0,opt:this.s?1:0};break;case 2:ge="map",De=this.map;break;case 3:ge="ctx",De=this.h;break;default:typeof Se>"u"&&tt&&tt();return}return sa(te,ye||this,Se,ge,Re,$e,De,tt),Ct},Ke.import=function(te,ye){if(ye)switch(Vi(ye)&&(ye=JSON.parse(ye)),te){case"cfg":this.s=!!ye.opt;break;case"reg":this.m=!1,this.register=ye;break;case"map":this.map=ye;break;case"ctx":this.h=ye}},dr(un.prototype);function Ii(te){te=te.data;var ye=self._index;let Se=te.args;var Re=te.task;switch(Re){case"init":Re=te.options||{},te=te.factory,ye=Re.encode,Re.cache=!1,ye&&ye.indexOf("function")===0&&(Re.encode=Function("return "+ye)()),te?(Function("return "+te)()(self),self._index=new self.FlexSearch.Index(Re),delete self.FlexSearch):self._index=new un(Re);break;default:te=te.id,ye=ye[Re].apply(ye,Se),postMessage(Re==="search"?{id:te,msg:ye}:{id:te})}}var Ni=0;function mi(te){if(!(this instanceof mi))return new mi(te);var ye;te?jr(ye=te.encode)&&(te.encode=ye.toString()):te={},(ye=(self||window)._factory)&&(ye=ye.toString());let Se=typeof window>"u"&&self.exports,Re=this;this.o=Gn(ye,Se,te.worker),this.h=Kr(),this.o&&(Se?this.o.on("message",function($e){Re.h[$e.id]($e.msg),delete Re.h[$e.id]}):this.o.onmessage=function($e){$e=$e.data,Re.h[$e.id]($e.msg),delete Re.h[$e.id]},this.o.postMessage({task:"init",factory:ye,options:te}))}Qi("add"),Qi("append"),Qi("search"),Qi("update"),Qi("remove");function Qi(te){mi.prototype[te]=mi.prototype[te+"Async"]=function(){let ye=this,Se=[].slice.call(arguments);var Re=Se[Se.length-1];let $e;return jr(Re)&&($e=Re,Se.splice(Se.length-1,1)),Re=new Promise(function(tt){setTimeout(function(){ye.h[++Ni]=tt,ye.o.postMessage({task:te,id:Ni,args:Se})})}),$e?(Re.then($e),this):Re}}function Gn(te,ye,Se){let Re;try{Re=ye?new(aa()).Worker(__dirname+"/node/node.js"):te?new Worker(URL.createObjectURL(new Blob(["onmessage="+Ii.toString()],{type:"text/javascript"}))):new Worker(Vi(Se)?Se:"worker/worker.js",{type:"module"})}catch{}return Re}function Kn(te){if(!(this instanceof Kn))return new Kn(te);var ye=te.document||te.doc||te,Se;this.K=[],this.h=[],this.A=[],this.register=Kr(),this.key=(Se=ye.key||ye.id)&&Zi(Se,this.A)||"id",this.m=Ca(te.fastupdate),this.C=(Se=ye.store)&&Se!==!0&&[],this.store=Se&&Kr(),this.I=(Se=ye.tag)&&Zi(Se,this.A),this.l=Se&&Kr(),this.cache=(Se=te.cache)&&new ii(Se),te.cache=!1,this.o=te.worker,this.async=!1,Se=Kr();let Re=ye.index||ye.field||ye;Vi(Re)&&(Re=[Re]);for(let $e=0,tt,Ct;$e<Re.length;$e++)tt=Re[$e],Vi(tt)||(Ct=tt,tt=tt.field),Ct=Li(Ct)?Object.assign({},te,Ct):te,this.o&&(Se[tt]=new mi(Ct),Se[tt].o||(this.o=!1)),this.o||(Se[tt]=new un(Ct,this.register)),this.K[$e]=Zi(tt,this.A),this.h[$e]=tt;if(this.C)for(te=ye.store,Vi(te)&&(te=[te]),ye=0;ye<te.length;ye++)this.C[ye]=Zi(te[ye],this.A);this.index=Se}function Zi(te,ye){let Se=te.split(":"),Re=0;for(let $e=0;$e<Se.length;$e++)te=Se[$e],0<=te.indexOf("[]")&&(te=te.substring(0,te.length-2))&&(ye[Re]=!0),te&&(Se[Re++]=te);return Re<Se.length&&(Se.length=Re),1<Re?Se:Se[0]}function oa(te,ye){if(Vi(ye))te=te[ye];else for(let Se=0;te&&Se<ye.length;Se++)te=te[ye[Se]];return te}function li(te,ye,Se,Re,$e){if(te=te[$e],Re===Se.length-1)ye[$e]=te;else if(te)if(te.constructor===Array)for(ye=ye[$e]=Array(te.length),$e=0;$e<te.length;$e++)li(te,ye,Se,Re,$e);else ye=ye[$e]||(ye[$e]=Kr()),$e=Se[++Re],li(te,ye,Se,Re,$e)}function nn(te,ye,Se,Re,$e,tt,Ct,ge){if(te=te[Ct])if(Re===ye.length-1){if(te.constructor===Array){if(Se[Re]){for(ye=0;ye<te.length;ye++)$e.add(tt,te[ye],!0,!0);return}te=te.join(" ")}$e.add(tt,te,ge,!0)}else if(te.constructor===Array)for(Ct=0;Ct<te.length;Ct++)nn(te,ye,Se,Re,$e,tt,Ct,ge);else Ct=ye[++Re],nn(te,ye,Se,Re,$e,tt,Ct,ge)}Ke=Kn.prototype,Ke.add=function(te,ye,Se){if(Li(te)&&(ye=te,te=oa(ye,this.key)),ye&&(te||te===0)){if(!Se&&this.register[te])return this.update(te,ye);for(let Re=0,$e,tt;Re<this.h.length;Re++)tt=this.h[Re],$e=this.K[Re],Vi($e)&&($e=[$e]),nn(ye,$e,this.A,0,this.index[tt],te,$e[0],Se);if(this.I){let Re=oa(ye,this.I),$e=Kr();Vi(Re)&&(Re=[Re]);for(let tt=0,Ct,ge;tt<Re.length;tt++)if(Ct=Re[tt],!$e[Ct]&&($e[Ct]=1,ge=this.l[Ct]||(this.l[Ct]=[]),!Se||!ge.includes(te))&&(ge[ge.length]=te,this.m)){let De=this.register[te]||(this.register[te]=[]);De[De.length]=ge}}if(this.store&&(!Se||!this.store[te])){let Re;if(this.C){Re=Kr();for(let $e=0,tt;$e<this.C.length;$e++)tt=this.C[$e],Vi(tt)?Re[tt]=ye[tt]:li(ye,Re,tt,0,tt[0])}this.store[te]=Re||ye}}return this},Ke.append=function(te,ye){return this.add(te,ye,!0)},Ke.update=function(te,ye){return this.remove(te).add(te,ye)},Ke.remove=function(te){if(Li(te)&&(te=oa(te,this.key)),this.register[te]){for(var ye=0;ye<this.h.length&&(this.index[this.h[ye]].remove(te,!this.o),!this.m);ye++);if(this.I&&!this.m)for(let Se in this.l){ye=this.l[Se];let Re=ye.indexOf(te);Re!==-1&&(1<ye.length?ye.splice(Re,1):delete this.l[Se])}this.store&&delete this.store[te],delete this.register[te]}return this},Ke.search=function(te,ye,Se,Re){Se||(!ye&&Li(te)?(Se=te,te=""):Li(ye)&&(Se=ye,ye=0));let $e=[],tt=[],Ct,ge,De,Ve,lt,ht,vt=0;if(Se)if(Se.constructor===Array)De=Se,Se=null;else{if(te=Se.query||te,De=(Ct=Se.pluck)||Se.index||Se.field,Ve=Se.tag,ge=this.store&&Se.enrich,lt=Se.bool==="and",ye=Se.limit||ye||100,ht=Se.offset||0,Ve&&(Vi(Ve)&&(Ve=[Ve]),!te)){for(let xt=0,jt;xt<Ve.length;xt++)(jt=Pi.call(this,Ve[xt],ye,ht,ge))&&($e[$e.length]=jt,vt++);return vt?$e:[]}Vi(De)&&(De=[De])}De||(De=this.h),lt=lt&&(1<De.length||Ve&&1<Ve.length);let ut=!Re&&(this.o||this.async)&&[];for(let xt=0,jt,ur,ei;xt<De.length;xt++){let pr;if(ur=De[xt],Vi(ur)||(pr=ur,ur=pr.field,te=pr.query||te,ye=pr.limit||ye,ge=pr.enrich||ge),ut)ut[xt]=this.index[ur].searchAsync(te,ye,pr||Se);else{if(Re?jt=Re[xt]:jt=this.index[ur].search(te,ye,pr||Se),ei=jt&&jt.length,Ve&&ei){let Er=[],Gt=0;lt&&(Er[0]=[jt]);for(let Dr=0,$i,Ar;Dr<Ve.length;Dr++)$i=Ve[Dr],(ei=(Ar=this.l[$i])&&Ar.length)&&(Gt++,Er[Er.length]=lt?[Ar]:Ar);Gt&&(jt=lt?qt(Er,ye||100,ht||0):Yr(jt,Er),ei=jt.length)}if(ei)tt[vt]=ur,$e[vt++]=jt;else if(lt)return[]}}if(ut){let xt=this;return new Promise(function(jt){Promise.all(ut).then(function(ur){jt(xt.search(te,ye,Se,ur))})})}if(!vt)return[];if(Ct&&(!ge||!this.store))return $e[0];for(let xt=0,jt;xt<tt.length;xt++){if(jt=$e[xt],jt.length&&ge&&(jt=_i.call(this,jt)),Ct)return jt;$e[xt]={field:tt[xt],result:jt}}return $e};function Pi(te,ye,Se,Re){let $e=this.l[te],tt=$e&&$e.length-Se;if(tt&&0<tt)return(tt>ye||Se)&&($e=$e.slice(Se,Se+ye)),Re&&($e=_i.call(this,$e)),{tag:te,result:$e}}function _i(te){let ye=Array(te.length);for(let Se=0,Re;Se<te.length;Se++)Re=te[Se],ye[Se]={id:Re,doc:this.store[Re]};return ye}Ke.contain=function(te){return!!this.register[te]},Ke.get=function(te){return this.store[te]},Ke.set=function(te,ye){return this.store[te]=ye,this},Ke.searchCache=ki,Ke.export=function(te,ye,Se,Re,$e,tt){let Ct;if(typeof tt>"u"&&(Ct=new Promise(ge=>{tt=ge})),$e||($e=0),Re||(Re=0),Re<this.h.length){let ge=this.h[Re],De=this.index[ge];ye=this,setTimeout(function(){De.export(te,ye,$e?ge:"",Re,$e++,tt)||(Re++,$e=1,ye.export(te,ye,ge,Re,$e,tt))})}else{let ge,De;switch($e){case 1:ge="tag",De=this.l,Se=null;break;case 2:ge="store",De=this.store,Se=null;break;default:tt();return}sa(te,this,Se,ge,Re,$e,De,tt)}return Ct},Ke.import=function(te,ye){if(ye)switch(Vi(ye)&&(ye=JSON.parse(ye)),te){case"tag":this.l=ye;break;case"reg":this.m=!1,this.register=ye;for(let Re=0,$e;Re<this.h.length;Re++)$e=this.index[this.h[Re]],$e.register=ye,$e.m=!1;break;case"store":this.store=ye;break;default:te=te.split(".");let Se=te[0];te=te[1],Se&&te&&this.index[Se].import(te,ye)}},dr(Kn.prototype);var Nn={encode:ma,F:!1,G:""},an=[Ht("[\xE0\xE1\xE2\xE3\xE4\xE5]"),"a",Ht("[\xE8\xE9\xEA\xEB]"),"e",Ht("[\xEC\xED\xEE\xEF]"),"i",Ht("[\xF2\xF3\xF4\xF5\xF6\u0151]"),"o",Ht("[\xF9\xFA\xFB\xFC\u0171]"),"u",Ht("[\xFD\u0177\xFF]"),"y",Ht("\xF1"),"n",Ht("[\xE7c]"),"k",Ht("\xDF"),"s",Ht(" & ")," and "];function ma(te){var ye=te=""+te;return ye.normalize&&(ye=ye.normalize("NFD").replace(Zr,"")),Ir.call(this,ye.toLowerCase(),!te.normalize&&an)}var Ls={encode:Gs,F:!1,G:"strict"},Mn=/[^a-z0-9]+/,oo={b:"p",v:"f",w:"f",z:"s",x:"s",\u00DF:"s",d:"t",n:"m",c:"k",g:"k",j:"k",q:"k",i:"e",y:"e",u:"o"};function Gs(te){te=ma.call(this,te).join(" ");let ye=[];if(te){let Se=te.split(Mn),Re=Se.length;for(let $e=0,tt,Ct=0;$e<Re;$e++)if((te=Se[$e])&&(!this.filter||!this.filter[te])){tt=te[0];let ge=oo[tt]||tt,De=ge;for(let Ve=1;Ve<te.length;Ve++){tt=te[Ve];let lt=oo[tt]||tt;lt&&lt!==De&&(ge+=lt,De=lt)}ye[Ct++]=ge}}return ye}var ji={encode:dl,F:!1,G:""},Ao=[Ht("ae"),"a",Ht("oe"),"o",Ht("sh"),"s",Ht("th"),"t",Ht("ph"),"f",Ht("pf"),"f",Ht("(?![aeo])h(?![aeo])"),"",Ht("(?!^[aeo])h(?!^[aeo])"),""];function dl(te,ye){return te&&(te=Gs.call(this,te).join(" "),2<te.length&&(te=Vr(te,Ao)),ye||(1<te.length&&(te=xi(te)),te&&(te=te.split(" ")))),te||[]}var Un={encode:Rs,F:!1,G:""},Qa=Ht("(?!\\b)[aeo]");function Rs(te){return te&&(te=dl.call(this,te,!0),1<te.length&&(te=te.replace(Qa,"")),1<te.length&&(te=xi(te)),te&&(te=te.split(" "))),te||[]}Zt["latin:default"]=or,Zt["latin:simple"]=Nn,Zt["latin:balance"]=Ls,Zt["latin:advanced"]=ji,Zt["latin:extra"]=Un;var Ma={Index:un,Document:Kn,Worker:mi,registerCharset:function(te,ye){Zt[te]=ye},registerLanguage:function(te,ye){xr[te]=ye}},Pl=Object.hasOwnProperty,hs=oi(Sn(),1),Wn=(0,hs.default)();function el(te){let ye=Ts(pt(te,"index"),!0);return ye.length===0?"/":ye}var Cr=(te,ye,Se)=>{let Re=new URL(te.getAttribute(ye),Se);te.setAttribute(ye,Re.pathname+Re.hash)};function kh(te,ye){te.querySelectorAll('[href^="./"], [href^="../"]').forEach(Se=>Cr(Se,"href",ye)),te.querySelectorAll('[src^="./"], [src^="../"]').forEach(Se=>Cr(Se,"src",ye))}function Sa(te){let ye=te.split("/").filter(Se=>Se!=="").slice(0,-1).map(Se=>"..").join("/");return ye.length===0&&(ye="."),ye}function Fi(te,ye){return Th(Sa(te),el(ye))}function Th(...te){return te.filter(ye=>ye!=="").join("/").replace(/\/\/+/g,"/")}function mu(te,ye){return te===ye||te.endsWith("/"+ye)}function pt(te,ye){return mu(te,ye)&&(te=te.slice(0,-ye.length)),te}function Ts(te,ye){return te.startsWith("/")&&(te=te.substring(1)),!ye&&te.endsWith("/")&&(te=te.slice(0,-1)),te}function yu(te,ye){if(!te)return;function Se($e){$e.target===this&&($e.preventDefault(),$e.stopPropagation(),ye())}function Re($e){$e.key.startsWith("Esc")&&($e.preventDefault(),ye())}te?.addEventListener("click",Se),window.addCleanup(()=>te?.removeEventListener("click",Se)),document.addEventListener("keydown",Re),window.addCleanup(()=>document.removeEventListener("keydown",Re))}function vu(te){for(;te.firstChild;)te.removeChild(te.firstChild)}var vo="basic",Es="",ui=te=>te.toLowerCase().split(/([^a-z]|[^\x00-\x7F])/),de=new Ma.Document({charset:"latin:extra",encode:ui,document:{id:"id",tag:"tags",index:[{field:"title",tokenize:"forward"},{field:"content",tokenize:"forward"},{field:"tags",tokenize:"forward"}]}}),Pe=new DOMParser,Ge=new Map,nt=50,gt=15,dt=15,Jt=te=>{let ye=te.split(/\s+/).filter(Re=>Re.trim()!==""),Se=ye.length;if(Se>1)for(let Re=1;Re<Se;Re++)ye.push(ye.slice(0,Re+1).join(" "));return ye.sort((Re,$e)=>$e.length-Re.length)};function Vt(te,ye,Se){let Re=Jt(te),$e=ye.split(/\s+/).filter(De=>De!=="");$e=$e.map(De=>De.includes("\\(")||De.includes("\\)")||De.includes("\\[")||De.includes("\\]")||De.includes("$")||De.includes("$$")?"":De).filter(De=>De!=="");let tt=0,Ct=$e.length-1;if(Se){let De=vt=>Re.some(ut=>vt.toLowerCase().startsWith(ut.toLowerCase())),Ve=$e.map(De),lt=0,ht=0;for(let vt=0;vt<Math.max($e.length-nt,0);vt++){let ut=Ve.slice(vt,vt+nt).reduce((xt,jt)=>xt+(jt?1:0),0);ut>=lt&&(lt=ut,ht=vt)}tt=Math.max(ht-nt,0),Ct=Math.min(tt+2*nt,$e.length-1),$e=$e.slice(tt,Ct)}let ge=$e.map(De=>{for(let Ve of Re)if(De.toLowerCase().includes(Ve.toLowerCase())){let lt=new RegExp(Ve.toLowerCase(),"gi");return De.replace(lt,'<span class="highlight">$&</span>')}return De}).join(" ");return`${tt===0?"":"..."}${ge}${Ct===$e.length-1?"":"..."}`}function br(te,ye){let Se=new DOMParser,Re=Jt(te),$e=Se.parseFromString(ye.innerHTML,"text/html"),tt=ge=>{let De=document.createElement("span");return De.className="highlight",De.textContent=ge,De},Ct=(ge,De)=>{if(!Ai(ge)){if(ge.nodeType===Node.TEXT_NODE){let Ve=ge.nodeValue??"",lt=new RegExp(De.toLowerCase(),"gi"),ht=Ve.match(lt);if(!ht||ht.length===0)return;let vt=document.createElement("span"),ut=0;for(let xt of ht){let jt=Ve.indexOf(xt,ut);vt.appendChild(document.createTextNode(Ve.slice(ut,jt))),vt.appendChild(tt(xt)),ut=jt+xt.length}vt.appendChild(document.createTextNode(Ve.slice(ut))),ge.parentNode?.replaceChild(vt,ge)}else if(ge.nodeType===Node.ELEMENT_NODE){if(ge.classList.contains("highlight"))return;Array.from(ge.childNodes).forEach(Ve=>Ct(Ve,De))}}};for(let ge of Re)Ct($e.body,ge);return $e.body}function Ai(te){let ye=te;for(;ye;){if(ye instanceof HTMLElement&&(ye.classList.contains("katex")||ye.classList.contains("katex-display")||ye.classList.contains("katex-html")||ye.classList.contains("katex-mathml")||ye.classList.contains("math")||ye.classList.contains("math-display")))return!0;ye=ye.parentNode}return!1}document.addEventListener("nav",async te=>{let ye=te.detail.url,Se=await fetchData,Re=document.getElementById("search-container"),$e=Re?.closest(".sidebar"),tt=document.getElementById("search-button"),Ct=document.getElementById("search-bar"),ge=document.getElementById("search-layout"),De=Object.keys(Se),Ve=Qr=>{ge?.querySelector(`#${Qr.id}`)===null&&ge?.appendChild(Qr)},lt=ge?.dataset?.preview==="true",ht,vt,ut=document.createElement("div");ut.id="results-container",Ve(ut),lt&&(ht=document.createElement("div"),ht.id="preview-container",Ve(ht));function xt(){Re?.classList.remove("active"),Ct&&(Ct.value=""),$e&&($e.style.zIndex=""),ut&&vu(ut),ht&&vu(ht),ge&&ge.classList.remove("display-results"),vo="basic",tt?.focus()}function jt(Qr){vo=Qr,$e&&($e.style.zIndex="1"),Re?.classList.add("active"),Ct?.focus()}let ur=null;async function ei(Qr){if((Qr.key==="/"||Qr.key==="k")&&(Qr.ctrlKey||Qr.metaKey)&&!Qr.shiftKey){Qr.preventDefault(),Re?.classList.contains("active")?xt():jt("basic");return}else if(Qr.shiftKey&&(Qr.ctrlKey||Qr.metaKey)&&Qr.key.toLowerCase()==="k"){Qr.preventDefault(),Re?.classList.contains("active")?xt():jt("tags"),Ct&&(Ct.value="#");return}if(ur&&ur.classList.remove("focus"),!!Re?.classList.contains("active")){if(Qr.key==="Enter")if(ut?.contains(document.activeElement)){let Hi=document.activeElement;if(Hi.classList.contains("no-match"))return;await pn(Hi),Hi.click()}else{let Hi=document.getElementsByClassName("result-card")[0];if(!Hi||Hi?.classList.contains("no-match"))return;await pn(Hi),Hi.click()}else if(Qr.key==="ArrowUp"||Qr.shiftKey&&Qr.key==="Tab"||Qr.ctrlKey&&Qr.key==="p"){if(Qr.preventDefault(),ut?.contains(document.activeElement)){let Hi=ur||document.activeElement,Ln=Hi?.previousElementSibling;Hi?.classList.remove("focus"),Ln?.focus(),Ln&&(ur=Ln),await pn(Ln)}}else if((Qr.key==="ArrowDown"||Qr.key==="Tab"||Qr.ctrlKey&&Qr.key==="n")&&(Qr.preventDefault(),document.activeElement===Ct||ur!==null)){let Hi=ur||document.getElementsByClassName("result-card")[0],Ln=Hi?.nextElementSibling;Hi?.classList.remove("focus"),Ln?.focus(),Ln&&(ur=Ln),await pn(Ln)}}}let pr=(Qr,Hi)=>{let Ln=De[Hi];return{id:Hi,slug:Ln,title:vo==="tags"?Se[Ln].title:Vt(Qr,Se[Ln].title??""),content:Vt(Qr,Se[Ln].content??"",!0),tags:Er(Qr.substring(1),Se[Ln].tags)}};function Er(Qr,Hi){return!Hi||vo!=="tags"?[]:Hi.map(Ln=>Ln.toLowerCase().includes(Qr.toLowerCase())?`<li><p class="match-tag">#${Ln}</p></li>`:`<li><p>#${Ln}</p></li>`).slice(0,dt)}function Gt(Qr){return new URL(Fi(ye,Qr),location.toString())}let Dr=({slug:Qr,title:Hi,content:Ln,tags:ss})=>{let _a=ss.length>0?`<ul class="tags">${ss.join("")}</ul>`:"",la=document.createElement("a");la.classList.add("result-card"),la.id=Qr,la.href=Gt(Qr).toString(),la.innerHTML=`<h3>${Hi}</h3>${_a}${lt&&window.innerWidth>600?"":`<p>${Ln}</p>`}`,la.addEventListener("click",_e=>{_e.altKey||_e.ctrlKey||_e.metaKey||_e.shiftKey||xt()});let Us=_e=>{_e.altKey||_e.ctrlKey||_e.metaKey||_e.shiftKey||xt()};async function Y(_e){if(!_e.target)return;let Fe=_e.target;await pn(Fe)}return la.addEventListener("mouseenter",Y),window.addCleanup(()=>la.removeEventListener("mouseenter",Y)),la.addEventListener("click",Us),window.addCleanup(()=>la.removeEventListener("click",Us)),la};async function $i(Qr){if(ut)if(vu(ut),Qr.length===0?ut.innerHTML=`<a class="result-card no-match">
          <h3>No results.</h3>
          <p>Try another search term?</p>
      </a>`:ut.append(...Qr.map(Dr)),Qr.length===0&&ht)vu(ht);else{let Hi=ut.firstElementChild;Hi.classList.add("focus"),ur=Hi,await pn(Hi)}}async function Ar(Qr){if(Ge.has(Qr))return Ge.get(Qr);let Hi=Gt(Qr).toString(),Ln=await fetch(Hi).then(ss=>ss.text()).then(ss=>{if(ss===void 0)throw new Error(`Could not fetch ${Hi}`);let _a=Pe.parseFromString(ss??"","text/html");return kh(_a,Hi),[..._a.getElementsByClassName("popover-hint")]});return Ge.set(Qr,Ln),Ln}async function pn(Qr){if(!ge||!lt||!Qr||!ht)return;let Hi=Qr.id,Ln=await Ar(Hi).then(_a=>_a.flatMap(la=>[...br(Es,la).children]));vt=document.createElement("div"),vt.classList.add("preview-inner"),vt.append(...Ln),ht.replaceChildren(vt);let ss=[...ht.querySelectorAll(".highlight")].sort((_a,la)=>la.innerHTML.length-_a.innerHTML.length);if(ss.length>0){let _a=ss[0],la=ht;if(la&&_a){let Us=la.getBoundingClientRect(),Y=_a.getBoundingClientRect().top-Us.top+la.scrollTop-20;la.scrollTo({top:Y,behavior:"smooth"})}}}async function ra(Qr){if(!ge||!de)return;Es=Qr.target.value,ge.classList.toggle("display-results",Es!==""),vo=Es.startsWith("#")?"tags":"basic";let Hi;if(vo==="tags"){Es=Es.substring(1).trim();let _a=Es.indexOf(" ");if(_a!=-1){let la=Es.substring(0,_a),Us=Es.substring(_a+1).trim();Hi=await de.searchAsync({query:Us,limit:Math.max(gt,1e4),index:["title","content"],tag:la});for(let Y of Hi)Y.result=Y.result.slice(0,gt);vo="basic",Es=Us}else Hi=await de.searchAsync({query:Es,limit:gt,index:["tags"]})}else vo==="basic"&&(Hi=await de.searchAsync({query:Es,limit:gt,index:["title","content"]}));let Ln=_a=>{let la=Hi.filter(Us=>Us.field===_a);return la.length===0?[]:[...la[0].result]},ss=[...new Set([...Ln("title"),...Ln("content"),...Ln("tags")])].map(_a=>pr(Es,_a));await $i(ss)}document.addEventListener("keydown",ei),window.addCleanup(()=>document.removeEventListener("keydown",ei)),tt?.addEventListener("click",()=>jt("basic")),window.addCleanup(()=>tt?.removeEventListener("click",()=>jt("basic"))),Ct?.addEventListener("input",ra),window.addCleanup(()=>Ct?.removeEventListener("input",ra)),yu(Re,xt),await Wi(Se)});async function Wi(te){let ye=0,Se=[];for(let[Re,$e]of Object.entries(te))Se.push(de.addAsync(ye++,{id:ye,slug:Re,title:$e.title,content:$e.content,tags:$e.tags}));return await Promise.all(Se)}}(),function(){var na=new IntersectionObserver(On=>{for(let dn of On){let D=dn.target.id,hi=document.querySelector(`button[data-for="${D}"]`),oi=document.querySelector(".toc");if(!oi)continue;let aa=oi.dataset.layout,Sn=dn.rootBounds?.height;if(Sn&&hi)if(aa==="minimal")dn.boundingClientRect.y<Sn?hi.classList.add("in-view"):hi.classList.remove("in-view");else{let Ke=hi.parentElement;dn.boundingClientRect.y<Sn?(hi.classList.add("in-view"),Ke.classList.add("in-view")):(hi.classList.remove("in-view"),Ke.classList.remove("in-view"))}}});function ta(On){let dn=On.target.parentElement.dataset.href;if(!dn?.startsWith("#"))return;let D=document.getElementById("quartz-body"),hi=document.getElementById("toc"),oi=()=>{D?.classList.contains("toc-hover")&&D.classList.remove("toc-hover"),(hi?.querySelectorAll("button[data-for]")).forEach(aa=>{let Sn=aa.querySelector(".fill");Sn&&(Sn.style.transform="scaleX(1)",Sn.style.opacity="")})};On.preventDefault(),Ua(dn),oi(),window.location.hash&&setTimeout(()=>{Ua(window.location.hash),oi()},10)}function Ua(On){let dn=On.slice(1),D=document.getElementById(dn);if(!D)return;let hi=D.closest(".collapsible-header-content");if(hi){let Sn=hi.closest(".collapsible-header");if(Sn){let Ke=Sn.querySelector(".toggle-button");Ke&&Ke.getAttribute("aria-expanded")==="false"&&Ke.click()}}let oi=D.getBoundingClientRect(),aa=window.scrollY+oi.top;window.scrollTo({top:aa-100,behavior:"smooth"}),history.pushState(null,"",On)}function Fa(){let On=document.getElementById("toc"),dn=document.getElementById("quartz-body");if(!(!On||!dn)&&On.dataset.layout==="minimal"){let D=On.querySelector("#toc-vertical");if(!D)return;let hi=On?.querySelectorAll("button[data-for]");for(let Ke of hi)Ke.addEventListener("click",ta),window.addCleanup(()=>{Ke.removeEventListener("click",ta)});let oi=()=>{dn.classList.add("toc-hover")},aa=()=>{dn.classList.remove("toc-hover"),hi.forEach(Ke=>{let Ca=Ke.querySelector(".fill");Ca&&(Ca.style.transform="scaleX(1)",Ca.style.opacity="")})},Sn=Ke=>{let Ca=D.getBoundingClientRect(),ba=Ke.clientY-Ca.top;hi.forEach(Kr=>{let Ot=Kr.getBoundingClientRect(),Vi=Ot.top+Ot.height/2-Ca.top,Li=getComputedStyle(Kr),jr=ba-Vi,Ir=42,gr=parseFloat(Li.getPropertyValue("--indicator-position")),Zr=Math.abs(jr)<Ot.height/2,vr=Kr.querySelector(".fill"),Vr=parseInt(Li.getPropertyValue("--fill-width"));vr.style.animation="unset !important",vr.style.opacity=Zr?"1":"0.35",vr.style.transform=`scaleX(${Zr?gr:Vr+(gr-Vr)*Math.exp(-Math.pow(jr,2)/(2*Math.pow(Ir,2)))})`})};On.addEventListener("mouseenter",oi),On.addEventListener("mouseleave",aa),D.addEventListener("mousemove",Sn),window.addCleanup(()=>{On.removeEventListener("mouseenter",oi),On.removeEventListener("mouseleave",aa),D.removeEventListener("mousemove",Sn)})}}window.addEventListener("resize",Fa),document.addEventListener("nav",()=>{Fa(),na.disconnect(),document.querySelectorAll("h1[id], h2[id], h3[id], h4[id], h5[id], h6[id]").forEach(On=>na.observe(On))})}(),function(){var na=Object.create,ta=Object.defineProperty,Ua=Object.getOwnPropertyDescriptor,Fa=Object.getOwnPropertyNames,On=Object.getPrototypeOf,dn=Object.prototype.hasOwnProperty,D=(Ir,gr)=>()=>(gr||Ir((gr={exports:{}}).exports,gr),gr.exports),hi=(Ir,gr,Zr,vr)=>{if(gr&&typeof gr=="object"||typeof gr=="function")for(let Vr of Fa(gr))!dn.call(Ir,Vr)&&Vr!==Zr&&ta(Ir,Vr,{get:()=>gr[Vr],enumerable:!(vr=Ua(gr,Vr))||vr.enumerable});return Ir},oi=(Ir,gr,Zr)=>(Zr=Ir!=null?na(On(Ir)):{},hi(gr||!Ir||!Ir.__esModule?ta(Zr,"default",{value:Ir,enumerable:!0}):Zr,Ir)),aa=D((Ir,gr)=>{"use strict";gr.exports=vr;function Zr(Ht){return Ht instanceof Buffer?Buffer.from(Ht):new Ht.constructor(Ht.buffer.slice(),Ht.byteOffset,Ht.length)}function vr(Ht){if(Ht=Ht||{},Ht.circles)return Vr(Ht);let xi=new Map;if(xi.set(Date,dr=>new Date(dr)),xi.set(Map,(dr,nr)=>new Map(Wr(Array.from(dr),nr))),xi.set(Set,(dr,nr)=>new Set(Wr(Array.from(dr),nr))),Ht.constructorHandlers)for(let dr of Ht.constructorHandlers)xi.set(dr[0],dr[1]);let or=null;return Ht.proto?Zt:xr;function Wr(dr,nr){let qt=Object.keys(dr),Yr=new Array(qt.length);for(let ii=0;ii<qt.length;ii++){let ki=qt[ii],zn=dr[ki];typeof zn!="object"||zn===null?Yr[ki]=zn:zn.constructor!==Object&&(or=xi.get(zn.constructor))?Yr[ki]=or(zn,nr):ArrayBuffer.isView(zn)?Yr[ki]=Zr(zn):Yr[ki]=nr(zn)}return Yr}function xr(dr){if(typeof dr!="object"||dr===null)return dr;if(Array.isArray(dr))return Wr(dr,xr);if(dr.constructor!==Object&&(or=xi.get(dr.constructor)))return or(dr,xr);let nr={};for(let qt in dr){if(Object.hasOwnProperty.call(dr,qt)===!1)continue;let Yr=dr[qt];typeof Yr!="object"||Yr===null?nr[qt]=Yr:Yr.constructor!==Object&&(or=xi.get(Yr.constructor))?nr[qt]=or(Yr,xr):ArrayBuffer.isView(Yr)?nr[qt]=Zr(Yr):nr[qt]=xr(Yr)}return nr}function Zt(dr){if(typeof dr!="object"||dr===null)return dr;if(Array.isArray(dr))return Wr(dr,Zt);if(dr.constructor!==Object&&(or=xi.get(dr.constructor)))return or(dr,Zt);let nr={};for(let qt in dr){let Yr=dr[qt];typeof Yr!="object"||Yr===null?nr[qt]=Yr:Yr.constructor!==Object&&(or=xi.get(Yr.constructor))?nr[qt]=or(Yr,Zt):ArrayBuffer.isView(Yr)?nr[qt]=Zr(Yr):nr[qt]=Zt(Yr)}return nr}}function Vr(Ht){let xi=[],or=[],Wr=new Map;if(Wr.set(Date,qt=>new Date(qt)),Wr.set(Map,(qt,Yr)=>new Map(Zt(Array.from(qt),Yr))),Wr.set(Set,(qt,Yr)=>new Set(Zt(Array.from(qt),Yr))),Ht.constructorHandlers)for(let qt of Ht.constructorHandlers)Wr.set(qt[0],qt[1]);let xr=null;return Ht.proto?nr:dr;function Zt(qt,Yr){let ii=Object.keys(qt),ki=new Array(ii.length);for(let zn=0;zn<ii.length;zn++){let sa=ii[zn],un=qt[sa];if(typeof un!="object"||un===null)ki[sa]=un;else if(un.constructor!==Object&&(xr=Wr.get(un.constructor)))ki[sa]=xr(un,Yr);else if(ArrayBuffer.isView(un))ki[sa]=Zr(un);else{let ja=xi.indexOf(un);ja!==-1?ki[sa]=or[ja]:ki[sa]=Yr(un)}}return ki}function dr(qt){if(typeof qt!="object"||qt===null)return qt;if(Array.isArray(qt))return Zt(qt,dr);if(qt.constructor!==Object&&(xr=Wr.get(qt.constructor)))return xr(qt,dr);let Yr={};xi.push(qt),or.push(Yr);for(let ii in qt){if(Object.hasOwnProperty.call(qt,ii)===!1)continue;let ki=qt[ii];if(typeof ki!="object"||ki===null)Yr[ii]=ki;else if(ki.constructor!==Object&&(xr=Wr.get(ki.constructor)))Yr[ii]=xr(ki,dr);else if(ArrayBuffer.isView(ki))Yr[ii]=Zr(ki);else{let zn=xi.indexOf(ki);zn!==-1?Yr[ii]=or[zn]:Yr[ii]=dr(ki)}}return xi.pop(),or.pop(),Yr}function nr(qt){if(typeof qt!="object"||qt===null)return qt;if(Array.isArray(qt))return Zt(qt,nr);if(qt.constructor!==Object&&(xr=Wr.get(qt.constructor)))return xr(qt,nr);let Yr={};xi.push(qt),or.push(Yr);for(let ii in qt){let ki=qt[ii];if(typeof ki!="object"||ki===null)Yr[ii]=ki;else if(ki.constructor!==Object&&(xr=Wr.get(ki.constructor)))Yr[ii]=xr(ki,nr);else if(ArrayBuffer.isView(ki))Yr[ii]=Zr(ki);else{let zn=xi.indexOf(ki);zn!==-1?Yr[ii]=or[zn]:Yr[ii]=nr(ki)}}return xi.pop(),or.pop(),Yr}}}),Sn=Object.hasOwnProperty,Ke=oi(aa(),1),Ca=(0,Ke.default)();function ba(Ir){return Ir.document.body.dataset.slug}function Kr(Ir){if(!Ir)return;Ir.classList.remove("active");let gr=document.querySelector(".toolbar"),Zr=document.querySelectorAll("hr"),vr=document.getElementById("quartz-root");!gr||!Zr||!vr||(gr.querySelector("#reader-button")?.setAttribute("data-active","false"),Zr.forEach(Vr=>Vr.style.visibility="show"),vr.style.overflow="",vr.style.maxHeight="")}async function Ot(){try{window.print()}catch(Ir){console.error("Failed to  PDF:",Ir);let gr=document.createElement("div");gr.className="pdf-toast",gr.textContent="Failed to export PDF. Please try again.",document.body.appendChild(gr),setTimeout(()=>gr.remove(),3e3)}}function Vi(Ir){let gr=Ir.getAttribute("data-active")==="true",Zr=document.querySelector(".reader");if(!Zr)return;let vr=document.getElementById("quartz-root");gr?Kr(Zr):(Zr.classList.add("active"),Ir.setAttribute("data-active","true"),vr.style.overflow="hidden",vr.style.maxHeight="0px")}var Li=()=>`${ba(window)}-skew-angle`;function jr(){let Ir=document.querySelector(".toolbar"),gr=document.querySelector(".center");if(!Ir)return;let Zr=Ir.querySelector(".toolbar-content");if(!Zr)return;let vr=Zr.querySelector("#reader-button");if(vr){let xi=()=>Vi(vr);vr.addEventListener("click",xi),window.addCleanup(()=>vr.removeEventListener("click",xi))}let Vr=Zr.querySelector("#pdf-button");Vr&&(Vr.addEventListener("click",Ot),window.addCleanup(()=>Vr.removeEventListener("click",Ot)));let Ht=document.getElementById("skew-button");if(Ht){let xi=function(xr){xr.stopPropagation();let Zt=gr.classList.toggle("skewed");Ht.setAttribute("data-active",Zt.toString()),localStorage.setItem(or,Zt.toString())},or=Li();localStorage.getItem(or)==="true"&&(gr.classList.add("skewed"),Ht.setAttribute("data-active","true"));async function Wr(xr){if(xr.key==="u"&&(xr.ctrlKey||xr.metaKey)&&!xr.shiftKey){xr.preventDefault();let Zt=gr.classList.toggle("skewed");Ht.setAttribute("data-active",Zt.toString()),localStorage.setItem(or,Zt.toString())}}Ht.addEventListener("click",xi),document.addEventListener("keydown",Wr),window.addCleanup(()=>{Ht.removeEventListener("click",xi),document.removeEventListener("keydown",Wr)})}}window.addEventListener("resize",jr),document.addEventListener("nav",jr)}(),function(){var na=Object.create,ta=Object.defineProperty,Ua=Object.getOwnPropertyDescriptor,Fa=Object.getOwnPropertyNames,On=Object.getPrototypeOf,dn=Object.prototype.hasOwnProperty,D=(o,l)=>()=>(o&&(l=o(o=0)),l),hi=(o,l)=>()=>(l||o((l={exports:{}}).exports,l),l.exports),oi=(o,l)=>{for(var f in l)ta(o,f,{get:l[f],enumerable:!0})},aa=(o,l,f,v)=>{if(l&&typeof l=="object"||typeof l=="function")for(let b of Fa(l))!dn.call(o,b)&&b!==f&&ta(o,b,{get:()=>l[b],enumerable:!(v=Ua(l,b))||v.enumerable});return o},Sn=(o,l,f)=>(f=o!=null?na(On(o)):{},aa(l||!o||!o.__esModule?ta(f,"default",{value:o,enumerable:!0}):f,o)),Ke,Ca,ba,Kr,Ot=D(()=>{"use strict";Ke=(o=>(o.Application="application",o.WebGLPipes="webgl-pipes",o.WebGLPipesAdaptor="webgl-pipes-adaptor",o.WebGLSystem="webgl-system",o.WebGPUPipes="webgpu-pipes",o.WebGPUPipesAdaptor="webgpu-pipes-adaptor",o.WebGPUSystem="webgpu-system",o.CanvasSystem="canvas-system",o.CanvasPipesAdaptor="canvas-pipes-adaptor",o.CanvasPipes="canvas-pipes",o.Asset="asset",o.LoadParser="load-parser",o.ResolveParser="resolve-parser",o.CacheParser="cache-parser",o.DetectionParser="detection-parser",o.MaskEffect="mask-effect",o.BlendMode="blend-mode",o.TextureSource="texture-source",o.Environment="environment",o.ShapeBuilder="shape-builder",o.Batcher="batcher",o))(Ke||{}),Ca=o=>{if(typeof o=="function"||typeof o=="object"&&o.extension){if(!o.extension)throw new Error("Extension class must have an extension object");o={...typeof o.extension!="object"?{type:o.extension}:o.extension,ref:o}}if(typeof o=="object")o={...o};else throw new Error("Invalid extension type");return typeof o.type=="string"&&(o.type=[o.type]),o},ba=(o,l)=>Ca(o).priority??l,Kr={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...o){return o.map(Ca).forEach(l=>{l.type.forEach(f=>this._removeHandlers[f]?.(l))}),this},add(...o){return o.map(Ca).forEach(l=>{l.type.forEach(f=>{let v=this._addHandlers,b=this._queue;v[f]?v[f]?.(l):(b[f]=b[f]||[],b[f]?.push(l))})}),this},handle(o,l,f){let v=this._addHandlers,b=this._removeHandlers;if(v[o]||b[o])throw new Error(`Extension type ${o} already has a handler`);v[o]=l,b[o]=f;let T=this._queue;return T[o]&&(T[o]?.forEach(S=>l(S)),delete T[o]),this},handleByMap(o,l){return this.handle(o,f=>{f.name&&(l[f.name]=f.ref)},f=>{f.name&&delete l[f.name]})},handleByNamedList(o,l,f=-1){return this.handle(o,v=>{l.findIndex(b=>b.name===v.name)>=0||(l.push({name:v.name,value:v.ref}),l.sort((b,T)=>ba(T.value,f)-ba(b.value,f)))},v=>{let b=l.findIndex(T=>T.name===v.name);b!==-1&&l.splice(b,1)})},handleByList(o,l,f=-1){return this.handle(o,v=>{l.includes(v.ref)||(l.push(v.ref),l.sort((b,T)=>ba(T,f)-ba(b,f)))},v=>{let b=l.indexOf(v.ref);b!==-1&&l.splice(b,1)})}}}),Vi=hi((o,l)=>{"use strict";var f=Object.prototype.hasOwnProperty,v="~";function b(){}Object.create&&(b.prototype=Object.create(null),new b().__proto__||(v=!1));function T(W,K,ee){this.fn=W,this.context=K,this.once=ee||!1}function S(W,K,ee,se,re){if(typeof ee!="function")throw new TypeError("The listener must be a function");var Me=new T(ee,se||W,re),Ie=v?v+K:K;return W._events[Ie]?W._events[Ie].fn?W._events[Ie]=[W._events[Ie],Me]:W._events[Ie].push(Me):(W._events[Ie]=Me,W._eventsCount++),W}function R(W,K){--W._eventsCount===0?W._events=new b:delete W._events[K]}function U(){this._events=new b,this._eventsCount=0}U.prototype.eventNames=function(){var W=[],K,ee;if(this._eventsCount===0)return W;for(ee in K=this._events)f.call(K,ee)&&W.push(v?ee.slice(1):ee);return Object.getOwnPropertySymbols?W.concat(Object.getOwnPropertySymbols(K)):W},U.prototype.listeners=function(W){var K=v?v+W:W,ee=this._events[K];if(!ee)return[];if(ee.fn)return[ee.fn];for(var se=0,re=ee.length,Me=new Array(re);se<re;se++)Me[se]=ee[se].fn;return Me},U.prototype.listenerCount=function(W){var K=v?v+W:W,ee=this._events[K];return ee?ee.fn?1:ee.length:0},U.prototype.emit=function(W,K,ee,se,re,Me){var Ie=v?v+W:W;if(!this._events[Ie])return!1;var Ee=this._events[Ie],Oe=arguments.length,et,kt;if(Ee.fn){switch(Ee.once&&this.removeListener(W,Ee.fn,void 0,!0),Oe){case 1:return Ee.fn.call(Ee.context),!0;case 2:return Ee.fn.call(Ee.context,K),!0;case 3:return Ee.fn.call(Ee.context,K,ee),!0;case 4:return Ee.fn.call(Ee.context,K,ee,se),!0;case 5:return Ee.fn.call(Ee.context,K,ee,se,re),!0;case 6:return Ee.fn.call(Ee.context,K,ee,se,re,Me),!0}for(kt=1,et=new Array(Oe-1);kt<Oe;kt++)et[kt-1]=arguments[kt];Ee.fn.apply(Ee.context,et)}else{var it=Ee.length,Lt;for(kt=0;kt<it;kt++)switch(Ee[kt].once&&this.removeListener(W,Ee[kt].fn,void 0,!0),Oe){case 1:Ee[kt].fn.call(Ee[kt].context);break;case 2:Ee[kt].fn.call(Ee[kt].context,K);break;case 3:Ee[kt].fn.call(Ee[kt].context,K,ee);break;case 4:Ee[kt].fn.call(Ee[kt].context,K,ee,se);break;default:if(!et)for(Lt=1,et=new Array(Oe-1);Lt<Oe;Lt++)et[Lt-1]=arguments[Lt];Ee[kt].fn.apply(Ee[kt].context,et)}}return!0},U.prototype.on=function(W,K,ee){return S(this,W,K,ee,!1)},U.prototype.once=function(W,K,ee){return S(this,W,K,ee,!0)},U.prototype.removeListener=function(W,K,ee,se){var re=v?v+W:W;if(!this._events[re])return this;if(!K)return R(this,re),this;var Me=this._events[re];if(Me.fn)Me.fn===K&&(!se||Me.once)&&(!ee||Me.context===ee)&&R(this,re);else{for(var Ie=0,Ee=[],Oe=Me.length;Ie<Oe;Ie++)(Me[Ie].fn!==K||se&&!Me[Ie].once||ee&&Me[Ie].context!==ee)&&Ee.push(Me[Ie]);Ee.length?this._events[re]=Ee.length===1?Ee[0]:Ee:R(this,re)}return this},U.prototype.removeAllListeners=function(W){var K;return W?(K=v?v+W:W,this._events[K]&&R(this,K)):(this._events=new b,this._eventsCount=0),this},U.prototype.off=U.prototype.removeListener,U.prototype.addListener=U.prototype.on,U.prefixed=v,U.EventEmitter=U,typeof l<"u"&&(l.exports=U)}),Li,jr,Ir=D(()=>{Li=Sn(Vi(),1),jr=Li.default}),gr,Zr,vr,Vr,Ht,xi,or,Wr,xr,Zt,dr,nr,qt,Yr,ii,ki,zn,sa,un,ja,fs,Vn,Wt,ir,Rr,Ii,Ni,mi,Qi,Gn=D(()=>{gr={grad:.9,turn:360,rad:360/(2*Math.PI)},Zr=function(o){return typeof o=="string"?o.length>0:typeof o=="number"},vr=function(o,l,f){return l===void 0&&(l=0),f===void 0&&(f=Math.pow(10,l)),Math.round(f*o)/f+0},Vr=function(o,l,f){return l===void 0&&(l=0),f===void 0&&(f=1),o>f?f:o>l?o:l},Ht=function(o){return(o=isFinite(o)?o%360:0)>0?o:o+360},xi=function(o){return{r:Vr(o.r,0,255),g:Vr(o.g,0,255),b:Vr(o.b,0,255),a:Vr(o.a)}},or=function(o){return{r:vr(o.r),g:vr(o.g),b:vr(o.b),a:vr(o.a,3)}},Wr=/^#([0-9a-f]{3,8})$/i,xr=function(o){var l=o.toString(16);return l.length<2?"0"+l:l},Zt=function(o){var l=o.r,f=o.g,v=o.b,b=o.a,T=Math.max(l,f,v),S=T-Math.min(l,f,v),R=S?T===l?(f-v)/S:T===f?2+(v-l)/S:4+(l-f)/S:0;return{h:60*(R<0?R+6:R),s:T?S/T*100:0,v:T/255*100,a:b}},dr=function(o){var l=o.h,f=o.s,v=o.v,b=o.a;l=l/360*6,f/=100,v/=100;var T=Math.floor(l),S=v*(1-f),R=v*(1-(l-T)*f),U=v*(1-(1-l+T)*f),W=T%6;return{r:255*[v,R,S,S,U,v][W],g:255*[U,v,v,R,S,S][W],b:255*[S,S,U,v,v,R][W],a:b}},nr=function(o){return{h:Ht(o.h),s:Vr(o.s,0,100),l:Vr(o.l,0,100),a:Vr(o.a)}},qt=function(o){return{h:vr(o.h),s:vr(o.s),l:vr(o.l),a:vr(o.a,3)}},Yr=function(o){return dr((f=(l=o).s,{h:l.h,s:(f*=((v=l.l)<50?v:100-v)/100)>0?2*f/(v+f)*100:0,v:v+f,a:l.a}));var l,f,v},ii=function(o){return{h:(l=Zt(o)).h,s:(b=(200-(f=l.s))*(v=l.v)/100)>0&&b<200?f*v/100/(b<=100?b:200-b)*100:0,l:b/2,a:l.a};var l,f,v,b},ki=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,zn=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,sa=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,un=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,ja={string:[[function(o){var l=Wr.exec(o);return l?(o=l[1]).length<=4?{r:parseInt(o[0]+o[0],16),g:parseInt(o[1]+o[1],16),b:parseInt(o[2]+o[2],16),a:o.length===4?vr(parseInt(o[3]+o[3],16)/255,2):1}:o.length===6||o.length===8?{r:parseInt(o.substr(0,2),16),g:parseInt(o.substr(2,2),16),b:parseInt(o.substr(4,2),16),a:o.length===8?vr(parseInt(o.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(o){var l=sa.exec(o)||un.exec(o);return l?l[2]!==l[4]||l[4]!==l[6]?null:xi({r:Number(l[1])/(l[2]?100/255:1),g:Number(l[3])/(l[4]?100/255:1),b:Number(l[5])/(l[6]?100/255:1),a:l[7]===void 0?1:Number(l[7])/(l[8]?100:1)}):null},"rgb"],[function(o){var l=ki.exec(o)||zn.exec(o);if(!l)return null;var f,v,b=nr({h:(f=l[1],v=l[2],v===void 0&&(v="deg"),Number(f)*(gr[v]||1)),s:Number(l[3]),l:Number(l[4]),a:l[5]===void 0?1:Number(l[5])/(l[6]?100:1)});return Yr(b)},"hsl"]],object:[[function(o){var l=o.r,f=o.g,v=o.b,b=o.a,T=b===void 0?1:b;return Zr(l)&&Zr(f)&&Zr(v)?xi({r:Number(l),g:Number(f),b:Number(v),a:Number(T)}):null},"rgb"],[function(o){var l=o.h,f=o.s,v=o.l,b=o.a,T=b===void 0?1:b;if(!Zr(l)||!Zr(f)||!Zr(v))return null;var S=nr({h:Number(l),s:Number(f),l:Number(v),a:Number(T)});return Yr(S)},"hsl"],[function(o){var l=o.h,f=o.s,v=o.v,b=o.a,T=b===void 0?1:b;if(!Zr(l)||!Zr(f)||!Zr(v))return null;var S=function(R){return{h:Ht(R.h),s:Vr(R.s,0,100),v:Vr(R.v,0,100),a:Vr(R.a)}}({h:Number(l),s:Number(f),v:Number(v),a:Number(T)});return dr(S)},"hsv"]]},fs=function(o,l){for(var f=0;f<l.length;f++){var v=l[f][0](o);if(v)return[v,l[f][1]]}return[null,void 0]},Vn=function(o){return typeof o=="string"?fs(o.trim(),ja.string):typeof o=="object"&&o!==null?fs(o,ja.object):[null,void 0]},Wt=function(o,l){var f=ii(o);return{h:f.h,s:Vr(f.s+100*l,0,100),l:f.l,a:f.a}},ir=function(o){return(299*o.r+587*o.g+114*o.b)/1e3/255},Rr=function(o,l){var f=ii(o);return{h:f.h,s:f.s,l:Vr(f.l+100*l,0,100),a:f.a}},Ii=function(){function o(l){this.parsed=Vn(l)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return o.prototype.isValid=function(){return this.parsed!==null},o.prototype.brightness=function(){return vr(ir(this.rgba),2)},o.prototype.isDark=function(){return ir(this.rgba)<.5},o.prototype.isLight=function(){return ir(this.rgba)>=.5},o.prototype.toHex=function(){return l=or(this.rgba),f=l.r,v=l.g,b=l.b,S=(T=l.a)<1?xr(vr(255*T)):"","#"+xr(f)+xr(v)+xr(b)+S;var l,f,v,b,T,S},o.prototype.toRgb=function(){return or(this.rgba)},o.prototype.toRgbString=function(){return l=or(this.rgba),f=l.r,v=l.g,b=l.b,(T=l.a)<1?"rgba("+f+", "+v+", "+b+", "+T+")":"rgb("+f+", "+v+", "+b+")";var l,f,v,b,T},o.prototype.toHsl=function(){return qt(ii(this.rgba))},o.prototype.toHslString=function(){return l=qt(ii(this.rgba)),f=l.h,v=l.s,b=l.l,(T=l.a)<1?"hsla("+f+", "+v+"%, "+b+"%, "+T+")":"hsl("+f+", "+v+"%, "+b+"%)";var l,f,v,b,T},o.prototype.toHsv=function(){return l=Zt(this.rgba),{h:vr(l.h),s:vr(l.s),v:vr(l.v),a:vr(l.a,3)};var l},o.prototype.invert=function(){return Ni({r:255-(l=this.rgba).r,g:255-l.g,b:255-l.b,a:l.a});var l},o.prototype.saturate=function(l){return l===void 0&&(l=.1),Ni(Wt(this.rgba,l))},o.prototype.desaturate=function(l){return l===void 0&&(l=.1),Ni(Wt(this.rgba,-l))},o.prototype.grayscale=function(){return Ni(Wt(this.rgba,-1))},o.prototype.lighten=function(l){return l===void 0&&(l=.1),Ni(Rr(this.rgba,l))},o.prototype.darken=function(l){return l===void 0&&(l=.1),Ni(Rr(this.rgba,-l))},o.prototype.rotate=function(l){return l===void 0&&(l=15),this.hue(this.hue()+l)},o.prototype.alpha=function(l){return typeof l=="number"?Ni({r:(f=this.rgba).r,g:f.g,b:f.b,a:l}):vr(this.rgba.a,3);var f},o.prototype.hue=function(l){var f=ii(this.rgba);return typeof l=="number"?Ni({h:l,s:f.s,l:f.l,a:f.a}):vr(f.h)},o.prototype.isEqual=function(l){return this.toHex()===Ni(l).toHex()},o}(),Ni=function(o){return o instanceof Ii?o:new Ii(o)},mi=[],Qi=function(o){o.forEach(function(l){mi.indexOf(l)<0&&(l(Ii,ja),mi.push(l))})}});function Kn(o,l){var f={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},v={};for(var b in f)v[f[b]]=b;var T={};o.prototype.toName=function(S){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var R,U,W=v[this.toHex()];if(W)return W;if(S?.closest){var K=this.toRgb(),ee=1/0,se="black";if(!T.length)for(var re in f)T[re]=new o(f[re]).toRgb();for(var Me in f){var Ie=(R=K,U=T[Me],Math.pow(R.r-U.r,2)+Math.pow(R.g-U.g,2)+Math.pow(R.b-U.b,2));Ie<ee&&(ee=Ie,se=Me)}return se}},l.string.push([function(S){var R=S.toLowerCase(),U=R==="transparent"?"#0000":f[R];return U?new o(U).toRgb():null},"name"])}var Zi=D(()=>{}),oa,li,nn=D(()=>{Gn(),Zi(),Qi([Kn]),oa=class W8{constructor(l=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=l}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(l){return this.value=l,this}set value(l){if(l instanceof W8)this._value=this._cloneSource(l._value),this._int=l._int,this._components.set(l._components);else{if(l===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,l))&&(this._value=this._cloneSource(l),this._normalize(this._value))}}get value(){return this._value}_cloneSource(l){return typeof l=="string"||typeof l=="number"||l instanceof Number||l===null?l:Array.isArray(l)||ArrayBuffer.isView(l)?l.slice(0):typeof l=="object"&&l!==null?{...l}:l}_isSourceEqual(l,f){let v=typeof l;if(v!==typeof f)return!1;if(v==="number"||v==="string"||l instanceof Number)return l===f;if(Array.isArray(l)&&Array.isArray(f)||ArrayBuffer.isView(l)&&ArrayBuffer.isView(f))return l.length!==f.length?!1:l.every((b,T)=>b===f[T]);if(l!==null&&f!==null){let b=Object.keys(l),T=Object.keys(f);return b.length!==T.length?!1:b.every(S=>l[S]===f[S])}return l===f}toRgba(){let[l,f,v,b]=this._components;return{r:l,g:f,b:v,a:b}}toRgb(){let[l,f,v]=this._components;return{r:l,g:f,b:v}}toRgbaString(){let[l,f,v]=this.toUint8RgbArray();return`rgba(${l},${f},${v},${this.alpha})`}toUint8RgbArray(l){let[f,v,b]=this._components;return this._arrayRgb||(this._arrayRgb=[]),l=l||this._arrayRgb,l[0]=Math.round(f*255),l[1]=Math.round(v*255),l[2]=Math.round(b*255),l}toArray(l){this._arrayRgba||(this._arrayRgba=[]),l=l||this._arrayRgba;let[f,v,b,T]=this._components;return l[0]=f,l[1]=v,l[2]=b,l[3]=T,l}toRgbArray(l){this._arrayRgb||(this._arrayRgb=[]),l=l||this._arrayRgb;let[f,v,b]=this._components;return l[0]=f,l[1]=v,l[2]=b,l}toNumber(){return this._int}toBgrNumber(){let[l,f,v]=this.toUint8RgbArray();return(v<<16)+(f<<8)+l}toLittleEndianNumber(){let l=this._int;return(l>>16)+(l&65280)+((l&255)<<16)}multiply(l){let[f,v,b,T]=W8._temp.setValue(l)._components;return this._components[0]*=f,this._components[1]*=v,this._components[2]*=b,this._components[3]*=T,this._refreshInt(),this._value=null,this}premultiply(l,f=!0){return f&&(this._components[0]*=l,this._components[1]*=l,this._components[2]*=l),this._components[3]=l,this._refreshInt(),this._value=null,this}toPremultiplied(l,f=!0){if(l===1)return(255<<24)+this._int;if(l===0)return f?0:this._int;let v=this._int>>16&255,b=this._int>>8&255,T=this._int&255;return f&&(v=v*l+.5|0,b=b*l+.5|0,T=T*l+.5|0),(l*255<<24)+(v<<16)+(b<<8)+T}toHex(){let l=this._int.toString(16);return`#${"000000".substring(0,6-l.length)+l}`}toHexa(){let l=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-l.length)+l}setAlpha(l){return this._components[3]=this._clamp(l),this}_normalize(l){let f,v,b,T;if((typeof l=="number"||l instanceof Number)&&l>=0&&l<=16777215){let S=l;f=(S>>16&255)/255,v=(S>>8&255)/255,b=(S&255)/255,T=1}else if((Array.isArray(l)||l instanceof Float32Array)&&l.length>=3&&l.length<=4)l=this._clamp(l),[f,v,b,T=1]=l;else if((l instanceof Uint8Array||l instanceof Uint8ClampedArray)&&l.length>=3&&l.length<=4)l=this._clamp(l,0,255),[f,v,b,T=255]=l,f/=255,v/=255,b/=255,T/=255;else if(typeof l=="string"||typeof l=="object"){if(typeof l=="string"){let R=W8.HEX_PATTERN.exec(l);R&&(l=`#${R[2]}`)}let S=Ni(l);S.isValid()&&({r:f,g:v,b,a:T}=S.rgba,f/=255,v/=255,b/=255)}if(f!==void 0)this._components[0]=f,this._components[1]=v,this._components[2]=b,this._components[3]=T,this._refreshInt();else throw new Error(`Unable to convert color ${l}`)}_refreshInt(){this._clamp(this._components);let[l,f,v]=this._components;this._int=(l*255<<16)+(f*255<<8)+(v*255|0)}_clamp(l,f=0,v=1){return typeof l=="number"?Math.min(Math.max(l,f),v):(l.forEach((b,T)=>{l[T]=Math.min(Math.max(b,f),v)}),l)}static isColorLike(l){return typeof l=="number"||typeof l=="string"||l instanceof Number||l instanceof W8||Array.isArray(l)||l instanceof Uint8Array||l instanceof Uint8ClampedArray||l instanceof Float32Array||l.r!==void 0&&l.g!==void 0&&l.b!==void 0||l.r!==void 0&&l.g!==void 0&&l.b!==void 0&&l.a!==void 0||l.h!==void 0&&l.s!==void 0&&l.l!==void 0||l.h!==void 0&&l.s!==void 0&&l.l!==void 0&&l.a!==void 0||l.h!==void 0&&l.s!==void 0&&l.v!==void 0||l.h!==void 0&&l.s!==void 0&&l.v!==void 0&&l.a!==void 0}},oa.shared=new oa,oa._temp=new oa,oa.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i,li=oa}),Pi,_i=D(()=>{"use strict";Pi={cullArea:null,cullable:!1,cullableChildren:!0}}),Nn,an,ma,Ls=D(()=>{"use strict";Nn=Math.PI*2,an=180/Math.PI,ma=Math.PI/180}),Mn,oo,Gs=D(()=>{"use strict";Mn=class bNe{constructor(l=0,f=0){this.x=0,this.y=0,this.x=l,this.y=f}clone(){return new bNe(this.x,this.y)}copyFrom(l){return this.set(l.x,l.y),this}copyTo(l){return l.set(this.x,this.y),l}equals(l){return l.x===this.x&&l.y===this.y}set(l=0,f=l){return this.x=l,this.y=f,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return oo.x=0,oo.y=0,oo}},oo=new Mn}),ji,Ao,dl,Un=D(()=>{Ls(),Gs(),ji=class _Ne{constructor(l=1,f=0,v=0,b=1,T=0,S=0){this.array=null,this.a=l,this.b=f,this.c=v,this.d=b,this.tx=T,this.ty=S}fromArray(l){this.a=l[0],this.b=l[1],this.c=l[3],this.d=l[4],this.tx=l[2],this.ty=l[5]}set(l,f,v,b,T,S){return this.a=l,this.b=f,this.c=v,this.d=b,this.tx=T,this.ty=S,this}toArray(l,f){this.array||(this.array=new Float32Array(9));let v=f||this.array;return l?(v[0]=this.a,v[1]=this.b,v[2]=0,v[3]=this.c,v[4]=this.d,v[5]=0,v[6]=this.tx,v[7]=this.ty,v[8]=1):(v[0]=this.a,v[1]=this.c,v[2]=this.tx,v[3]=this.b,v[4]=this.d,v[5]=this.ty,v[6]=0,v[7]=0,v[8]=1),v}apply(l,f){f=f||new Mn;let v=l.x,b=l.y;return f.x=this.a*v+this.c*b+this.tx,f.y=this.b*v+this.d*b+this.ty,f}applyInverse(l,f){f=f||new Mn;let v=this.a,b=this.b,T=this.c,S=this.d,R=this.tx,U=this.ty,W=1/(v*S+T*-b),K=l.x,ee=l.y;return f.x=S*W*K+-T*W*ee+(U*T-R*S)*W,f.y=v*W*ee+-b*W*K+(-U*v+R*b)*W,f}translate(l,f){return this.tx+=l,this.ty+=f,this}scale(l,f){return this.a*=l,this.d*=f,this.c*=l,this.b*=f,this.tx*=l,this.ty*=f,this}rotate(l){let f=Math.cos(l),v=Math.sin(l),b=this.a,T=this.c,S=this.tx;return this.a=b*f-this.b*v,this.b=b*v+this.b*f,this.c=T*f-this.d*v,this.d=T*v+this.d*f,this.tx=S*f-this.ty*v,this.ty=S*v+this.ty*f,this}append(l){let f=this.a,v=this.b,b=this.c,T=this.d;return this.a=l.a*f+l.b*b,this.b=l.a*v+l.b*T,this.c=l.c*f+l.d*b,this.d=l.c*v+l.d*T,this.tx=l.tx*f+l.ty*b+this.tx,this.ty=l.tx*v+l.ty*T+this.ty,this}appendFrom(l,f){let v=l.a,b=l.b,T=l.c,S=l.d,R=l.tx,U=l.ty,W=f.a,K=f.b,ee=f.c,se=f.d;return this.a=v*W+b*ee,this.b=v*K+b*se,this.c=T*W+S*ee,this.d=T*K+S*se,this.tx=R*W+U*ee+f.tx,this.ty=R*K+U*se+f.ty,this}setTransform(l,f,v,b,T,S,R,U,W){return this.a=Math.cos(R+W)*T,this.b=Math.sin(R+W)*T,this.c=-Math.sin(R-U)*S,this.d=Math.cos(R-U)*S,this.tx=l-(v*this.a+b*this.c),this.ty=f-(v*this.b+b*this.d),this}prepend(l){let f=this.tx;if(l.a!==1||l.b!==0||l.c!==0||l.d!==1){let v=this.a,b=this.c;this.a=v*l.a+this.b*l.c,this.b=v*l.b+this.b*l.d,this.c=b*l.a+this.d*l.c,this.d=b*l.b+this.d*l.d}return this.tx=f*l.a+this.ty*l.c+l.tx,this.ty=f*l.b+this.ty*l.d+l.ty,this}decompose(l){let f=this.a,v=this.b,b=this.c,T=this.d,S=l.pivot,R=-Math.atan2(-b,T),U=Math.atan2(v,f),W=Math.abs(R+U);return W<1e-5||Math.abs(Nn-W)<1e-5?(l.rotation=U,l.skew.x=l.skew.y=0):(l.rotation=0,l.skew.x=R,l.skew.y=U),l.scale.x=Math.sqrt(f*f+v*v),l.scale.y=Math.sqrt(b*b+T*T),l.position.x=this.tx+(S.x*f+S.y*b),l.position.y=this.ty+(S.x*v+S.y*T),l}invert(){let l=this.a,f=this.b,v=this.c,b=this.d,T=this.tx,S=l*b-f*v;return this.a=b/S,this.b=-f/S,this.c=-v/S,this.d=l/S,this.tx=(v*this.ty-b*T)/S,this.ty=-(l*this.ty-f*T)/S,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){let l=new _Ne;return l.a=this.a,l.b=this.b,l.c=this.c,l.d=this.d,l.tx=this.tx,l.ty=this.ty,l}copyTo(l){return l.a=this.a,l.b=this.b,l.c=this.c,l.d=this.d,l.tx=this.tx,l.ty=this.ty,l}copyFrom(l){return this.a=l.a,this.b=l.b,this.c=l.c,this.d=l.d,this.tx=l.tx,this.ty=l.ty,this}equals(l){return l.a===this.a&&l.b===this.b&&l.c===this.c&&l.d===this.d&&l.tx===this.tx&&l.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return dl.identity()}static get shared(){return Ao.identity()}},Ao=new ji,dl=new ji}),Qa,Rs=D(()=>{"use strict";Qa=class wNe{constructor(l,f,v){this._x=f||0,this._y=v||0,this._observer=l}clone(l){return new wNe(l??this._observer,this._x,this._y)}set(l=0,f=l){return(this._x!==l||this._y!==f)&&(this._x=l,this._y=f,this._observer._onUpdate(this)),this}copyFrom(l){return(this._x!==l.x||this._y!==l.y)&&(this._x=l.x,this._y=l.y,this._observer._onUpdate(this)),this}copyTo(l){return l.set(this._x,this._y),l}equals(l){return l.x===this._x&&l.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=0 y=0 scope=${this._observer}]`}get x(){return this._x}set x(l){this._x!==l&&(this._x=l,this._observer._onUpdate(this))}get y(){return this._y}set y(l){this._y!==l&&(this._y=l,this._observer._onUpdate(this))}}});function Ma(o="default"){return Pl[o]===void 0&&(Pl[o]=-1),++Pl[o]}var Pl,hs=D(()=>{"use strict";Pl={default:-1}});function Wn(o,l,f=3){if(el[l])return;let v=new Error().stack;typeof v>"u"?console.warn("PixiJS Deprecation Warning: ",`${l}
Deprecated since v${o}`):(v=v.split(`
`).splice(f).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${l}
Deprecated since v${o}`),console.warn(v),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${l}
Deprecated since v${o}`),console.warn(v))),el[l]=!0}var el,Cr,kh,Sa=D(()=>{"use strict";el={},Cr="8.0.0",kh="8.3.4"}),Fi,Th=D(()=>{"use strict";Fi=class{constructor(o,l){this._pool=[],this._count=0,this._index=0,this._classType=o,l&&this.prepopulate(l)}prepopulate(o){for(let l=0;l<o;l++)this._pool[this._index++]=new this._classType;this._count+=o}get(o){let l;return this._index>0?l=this._pool[--this._index]:l=new this._classType,l.init?.(o),l}return(o){o.reset?.(),this._pool[this._index++]=o}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){this._pool.length=0,this._index=0}}}),mu,pt,Ts=D(()=>{Th(),mu=class{constructor(){this._poolsByClass=new Map}prepopulate(o,l){this.getPool(o).prepopulate(l)}get(o,l){return this.getPool(o).get(l)}return(o){this.getPool(o.constructor).return(o)}getPool(o){return this._poolsByClass.has(o)||this._poolsByClass.set(o,new Fi(o)),this._poolsByClass.get(o)}stats(){let o={};return this._poolsByClass.forEach(l=>{let f=o[l._classType.name]?l._classType.name+l._classType.ID:l._classType.name;o[f]={free:l.totalFree,used:l.totalUsed,size:l.totalSize}}),o}},pt=new mu}),yu,vu=D(()=>{Sa(),yu={get isCachedAsTexture(){return!!this.renderGroup?.isCachedAsTexture},cacheAsTexture(o){typeof o=="boolean"&&o===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(o===!0?{}:o))},updateCacheTexture(){this.renderGroup?.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(o){Wn("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(o)}}});function vo(o,l,f){let v=o.length,b;if(l>=v||f===0)return;f=l+f>v?v-l:f;let T=v-f;for(b=l;b<T;++b)o[b]=o[b+f];o.length=T}var Es=D(()=>{"use strict"}),ui,de=D(()=>{Es(),Sa(),ui={allowChildren:!0,removeChildren(o=0,l){let f=l??this.children.length,v=f-o,b=[];if(v>0&&v<=f){for(let S=f-1;S>=o;S--){let R=this.children[S];R&&(b.push(R),R.parent=null)}vo(this.children,o,f);let T=this.renderGroup||this.parentRenderGroup;T&&T.removeChildren(b);for(let S=0;S<b.length;++S)this.emit("childRemoved",b[S],this,S),b[S].emit("removed",this);return b}else if(v===0&&this.children.length===0)return b;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(o){let l=this.getChildAt(o);return this.removeChild(l)},getChildAt(o){if(o<0||o>=this.children.length)throw new Error(`getChildAt: Index (${o}) does not exist.`);return this.children[o]},setChildIndex(o,l){if(l<0||l>=this.children.length)throw new Error(`The index ${l} supplied is out of bounds ${this.children.length}`);this.getChildIndex(o),this.addChildAt(o,l)},getChildIndex(o){let l=this.children.indexOf(o);if(l===-1)throw new Error("The supplied Container must be a child of the caller");return l},addChildAt(o,l){this.allowChildren||Wn(Cr,"addChildAt: Only Containers will be allowed to add children in v8.0.0");let{children:f}=this;if(l<0||l>f.length)throw new Error(`${o}addChildAt: The index ${l} supplied is out of bounds ${f.length}`);if(o.parent){let b=o.parent.children.indexOf(o);if(o.parent===this&&b===l)return o;b!==-1&&o.parent.children.splice(b,1)}l===f.length?f.push(o):f.splice(l,0,o),o.parent=this,o.didChange=!0,o._updateFlags=15;let v=this.renderGroup||this.parentRenderGroup;return v&&v.addChild(o),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",o,this,l),o.emit("added",this),o},swapChildren(o,l){if(o===l)return;let f=this.getChildIndex(o),v=this.getChildIndex(l);this.children[f]=l,this.children[v]=o;let b=this.renderGroup||this.parentRenderGroup;b&&(b.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){this.parent?.removeChild(this)},reparentChild(...o){return o.length===1?this.reparentChildAt(o[0],this.children.length):(o.forEach(l=>this.reparentChildAt(l,this.children.length)),o[0])},reparentChildAt(o,l){if(o.parent===this)return this.setChildIndex(o,l),o;let f=o.worldTransform.clone();o.removeFromParent(),this.addChildAt(o,l);let v=this.worldTransform.clone();return v.invert(),f.prepend(v),o.setFromMatrix(f),o}}}),Pe,Ge=D(()=>{"use strict";Pe=class{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let o=0;o<this.filters.length;o++)this.filters[o].destroy();this.filters=null,this.filterArea=null}}}),nt,gt,dt=D(()=>{Ot(),Ts(),nt=class{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(o=>{this.add({test:o.test,maskClass:o})}))}add(o){this._tests.push(o)}getMaskEffect(o){this._initialized||this.init();for(let l=0;l<this._tests.length;l++){let f=this._tests[l];if(f.test(o))return pt.get(f.maskClass,o)}return o}returnMaskEffect(o){pt.return(o)}},gt=new nt,Kr.handleByList(Ke.MaskEffect,gt._effectClasses)}),Jt,Vt=D(()=>{Ge(),dt(),Jt={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){let o=this.renderGroup||this.parentRenderGroup;o&&(o.structureDidChange=!0)},addEffect(o){this.effects.indexOf(o)===-1&&(this.effects.push(o),this.effects.sort((l,f)=>l.priority-f.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(o){let l=this.effects.indexOf(o);l!==-1&&(this.effects.splice(l,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(o){let l=this._maskEffect;l?.mask!==o&&(l&&(this.removeEffect(l),gt.returnMaskEffect(l),this._maskEffect=null),o!=null&&(this._maskEffect=gt.getMaskEffect(o),this.addEffect(this._maskEffect)))},setMask(o){this._maskOptions={...this._maskOptions,...o},o.mask&&(this.mask=o.mask),this._markStructureAsChanged()},get mask(){return this._maskEffect?.mask},set filters(o){!Array.isArray(o)&&o&&(o=[o]);let l=this._filterEffect||(this._filterEffect=new Pe);o=o;let f=o?.length>0,v=l.filters?.length>0,b=f!==v;o=Array.isArray(o)?o.slice(0):o,l.filters=Object.freeze(o),b&&(f?this.addEffect(l):(this.removeEffect(l),l.filters=o??null))},get filters(){return this._filterEffect?.filters},set filterArea(o){this._filterEffect||(this._filterEffect=new Pe),this._filterEffect.filterArea=o},get filterArea(){return this._filterEffect?.filterArea}}}),br,Ai=D(()=>{Sa(),br={label:null,get name(){return Wn(Cr,"Container.name property has been removed, use Container.label instead"),this.label},set name(o){Wn(Cr,"Container.name property has been removed, use Container.label instead"),this.label=o},getChildByName(o,l=!1){return this.getChildByLabel(o,l)},getChildByLabel(o,l=!1){let f=this.children;for(let v=0;v<f.length;v++){let b=f[v];if(b.label===o||o instanceof RegExp&&o.test(b.label))return b}if(l)for(let v=0;v<f.length;v++){let b=f[v].getChildByLabel(o,!0);if(b)return b}return null},getChildrenByLabel(o,l=!1,f=[]){let v=this.children;for(let b=0;b<v.length;b++){let T=v[b];(T.label===o||o instanceof RegExp&&o.test(T.label))&&f.push(T)}if(l)for(let b=0;b<v.length;b++)v[b].getChildrenByLabel(o,!0,f);return f}}}),Wi,te,ye=D(()=>{Gs(),Wi=[new Mn,new Mn,new Mn,new Mn],te=class iF{constructor(l=0,f=0,v=0,b=0){this.type="rectangle",this.x=Number(l),this.y=Number(f),this.width=Number(v),this.height=Number(b)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new iF(0,0,0,0)}clone(){return new iF(this.x,this.y,this.width,this.height)}copyFromBounds(l){return this.x=l.minX,this.y=l.minY,this.width=l.maxX-l.minX,this.height=l.maxY-l.minY,this}copyFrom(l){return this.x=l.x,this.y=l.y,this.width=l.width,this.height=l.height,this}copyTo(l){return l.copyFrom(this),l}contains(l,f){return this.width<=0||this.height<=0?!1:l>=this.x&&l<this.x+this.width&&f>=this.y&&f<this.y+this.height}strokeContains(l,f,v){let{width:b,height:T}=this;if(b<=0||T<=0)return!1;let S=this.x,R=this.y,U=S-v/2,W=S+b+v/2,K=R-v/2,ee=R+T+v/2,se=S+v/2,re=S+b-v/2,Me=R+v/2,Ie=R+T-v/2;return l>=U&&l<=W&&f>=K&&f<=ee&&!(l>se&&l<re&&f>Me&&f<Ie)}intersects(l,f){if(!f){let Jr=this.x<l.x?l.x:this.x;if((this.right>l.right?l.right:this.right)<=Jr)return!1;let di=this.y<l.y?l.y:this.y;return(this.bottom>l.bottom?l.bottom:this.bottom)>di}let v=this.left,b=this.right,T=this.top,S=this.bottom;if(b<=v||S<=T)return!1;let R=Wi[0].set(l.left,l.top),U=Wi[1].set(l.left,l.bottom),W=Wi[2].set(l.right,l.top),K=Wi[3].set(l.right,l.bottom);if(W.x<=R.x||U.y<=R.y)return!1;let ee=Math.sign(f.a*f.d-f.b*f.c);if(ee===0||(f.apply(R,R),f.apply(U,U),f.apply(W,W),f.apply(K,K),Math.max(R.x,U.x,W.x,K.x)<=v||Math.min(R.x,U.x,W.x,K.x)>=b||Math.max(R.y,U.y,W.y,K.y)<=T||Math.min(R.y,U.y,W.y,K.y)>=S))return!1;let se=ee*(U.y-R.y),re=ee*(R.x-U.x),Me=se*v+re*T,Ie=se*b+re*T,Ee=se*v+re*S,Oe=se*b+re*S;if(Math.max(Me,Ie,Ee,Oe)<=se*R.x+re*R.y||Math.min(Me,Ie,Ee,Oe)>=se*K.x+re*K.y)return!1;let et=ee*(R.y-W.y),kt=ee*(W.x-R.x),it=et*v+kt*T,Lt=et*b+kt*T,Dt=et*v+kt*S,Pt=et*b+kt*S;return!(Math.max(it,Lt,Dt,Pt)<=et*R.x+kt*R.y||Math.min(it,Lt,Dt,Pt)>=et*K.x+kt*K.y)}pad(l=0,f=l){return this.x-=l,this.y-=f,this.width+=l*2,this.height+=f*2,this}fit(l){let f=Math.max(this.x,l.x),v=Math.min(this.x+this.width,l.x+l.width),b=Math.max(this.y,l.y),T=Math.min(this.y+this.height,l.y+l.height);return this.x=f,this.width=Math.max(v-f,0),this.y=b,this.height=Math.max(T-b,0),this}ceil(l=1,f=.001){let v=Math.ceil((this.x+this.width-f)*l)/l,b=Math.ceil((this.y+this.height-f)*l)/l;return this.x=Math.floor((this.x+f)*l)/l,this.y=Math.floor((this.y+f)*l)/l,this.width=v-this.x,this.height=b-this.y,this}enlarge(l){let f=Math.min(this.x,l.x),v=Math.max(this.x+this.width,l.x+l.width),b=Math.min(this.y,l.y),T=Math.max(this.y+this.height,l.y+l.height);return this.x=f,this.width=v-f,this.y=b,this.height=T-b,this}getBounds(l){return l=l||new iF,l.copyFrom(this),l}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}}),Se,Re,$e=D(()=>{Un(),ye(),Se=new ji,Re=class kNe{constructor(l=1/0,f=1/0,v=-1/0,b=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Se,this.minX=l,this.minY=f,this.maxX=v,this.maxY=b}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new te);let l=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(l.x=0,l.y=0,l.width=0,l.height=0):l.copyFromBounds(this),l}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Se,this}set(l,f,v,b){this.minX=l,this.minY=f,this.maxX=v,this.maxY=b}addFrame(l,f,v,b,T){T||(T=this.matrix);let S=T.a,R=T.b,U=T.c,W=T.d,K=T.tx,ee=T.ty,se=this.minX,re=this.minY,Me=this.maxX,Ie=this.maxY,Ee=S*l+U*f+K,Oe=R*l+W*f+ee;Ee<se&&(se=Ee),Oe<re&&(re=Oe),Ee>Me&&(Me=Ee),Oe>Ie&&(Ie=Oe),Ee=S*v+U*f+K,Oe=R*v+W*f+ee,Ee<se&&(se=Ee),Oe<re&&(re=Oe),Ee>Me&&(Me=Ee),Oe>Ie&&(Ie=Oe),Ee=S*l+U*b+K,Oe=R*l+W*b+ee,Ee<se&&(se=Ee),Oe<re&&(re=Oe),Ee>Me&&(Me=Ee),Oe>Ie&&(Ie=Oe),Ee=S*v+U*b+K,Oe=R*v+W*b+ee,Ee<se&&(se=Ee),Oe<re&&(re=Oe),Ee>Me&&(Me=Ee),Oe>Ie&&(Ie=Oe),this.minX=se,this.minY=re,this.maxX=Me,this.maxY=Ie}addRect(l,f){this.addFrame(l.x,l.y,l.x+l.width,l.y+l.height,f)}addBounds(l,f){this.addFrame(l.minX,l.minY,l.maxX,l.maxY,f)}addBoundsMask(l){this.minX=this.minX>l.minX?this.minX:l.minX,this.minY=this.minY>l.minY?this.minY:l.minY,this.maxX=this.maxX<l.maxX?this.maxX:l.maxX,this.maxY=this.maxY<l.maxY?this.maxY:l.maxY}applyMatrix(l){let f=this.minX,v=this.minY,b=this.maxX,T=this.maxY,{a:S,b:R,c:U,d:W,tx:K,ty:ee}=l,se=S*f+U*v+K,re=R*f+W*v+ee;this.minX=se,this.minY=re,this.maxX=se,this.maxY=re,se=S*b+U*v+K,re=R*b+W*v+ee,this.minX=se<this.minX?se:this.minX,this.minY=re<this.minY?re:this.minY,this.maxX=se>this.maxX?se:this.maxX,this.maxY=re>this.maxY?re:this.maxY,se=S*f+U*T+K,re=R*f+W*T+ee,this.minX=se<this.minX?se:this.minX,this.minY=re<this.minY?re:this.minY,this.maxX=se>this.maxX?se:this.maxX,this.maxY=re>this.maxY?re:this.maxY,se=S*b+U*T+K,re=R*b+W*T+ee,this.minX=se<this.minX?se:this.minX,this.minY=re<this.minY?re:this.minY,this.maxX=se>this.maxX?se:this.maxX,this.maxY=re>this.maxY?re:this.maxY}fit(l){return this.minX<l.left&&(this.minX=l.left),this.maxX>l.right&&(this.maxX=l.right),this.minY<l.top&&(this.minY=l.top),this.maxY>l.bottom&&(this.maxY=l.bottom),this}fitBounds(l,f,v,b){return this.minX<l&&(this.minX=l),this.maxX>f&&(this.maxX=f),this.minY<v&&(this.minY=v),this.maxY>b&&(this.maxY=b),this}pad(l,f=l){return this.minX-=l,this.maxX+=l,this.minY-=f,this.maxY+=f,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new kNe(this.minX,this.minY,this.maxX,this.maxY)}scale(l,f=l){return this.minX*=l,this.minY*=f,this.maxX*=l,this.maxY*=f,this}get x(){return this.minX}set x(l){let f=this.maxX-this.minX;this.minX=l,this.maxX=l+f}get y(){return this.minY}set y(l){let f=this.maxY-this.minY;this.minY=l,this.maxY=l+f}get width(){return this.maxX-this.minX}set width(l){this.maxX=this.minX+l}get height(){return this.maxY-this.minY}set height(l){this.maxY=this.minY+l}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(l,f,v,b){let T=this.minX,S=this.minY,R=this.maxX,U=this.maxY;b||(b=this.matrix);let W=b.a,K=b.b,ee=b.c,se=b.d,re=b.tx,Me=b.ty;for(let Ie=f;Ie<v;Ie+=2){let Ee=l[Ie],Oe=l[Ie+1],et=W*Ee+ee*Oe+re,kt=K*Ee+se*Oe+Me;T=et<T?et:T,S=kt<S?kt:S,R=et>R?et:R,U=kt>U?kt:U}this.minX=T,this.minY=S,this.maxX=R,this.maxY=U}containsPoint(l,f){return this.minX<=l&&this.minY<=f&&this.maxX>=l&&this.maxY>=f}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(l){return this.minX=l.minX,this.minY=l.minY,this.maxX=l.maxX,this.maxY=l.maxY,this}}}),tt,Ct,ge=D(()=>{Un(),Th(),$e(),tt=new Fi(ji),Ct=new Fi(Re)});function De(o,l,f){f.clear();let v,b;return o.parent?l?v=o.parent.worldTransform:(b=tt.get().identity(),v=lt(o,b)):v=ji.IDENTITY,Ve(o,f,v,l),b&&tt.return(b),f.isValid||f.set(0,0,0,0),f}function Ve(o,l,f,v){if(!o.visible||!o.measurable)return;let b;v?b=o.worldTransform:(o.updateLocalTransform(),b=tt.get(),b.appendFrom(o.localTransform,f));let T=l,S=!!o.effects.length;if(S&&(l=Ct.get().clear()),o.boundsArea)l.addRect(o.boundsArea,b);else{o.bounds&&(l.matrix=b,l.addBounds(o.bounds));for(let R=0;R<o.children.length;R++)Ve(o.children[R],l,b,v)}if(S){for(let R=0;R<o.effects.length;R++)o.effects[R].addBounds?.(l);T.addBounds(l,ji.IDENTITY),Ct.return(l)}v||tt.return(b)}function lt(o,l){let f=o.parent;return f&&(lt(f,l),f.updateLocalTransform(),l.append(f.localTransform)),l}var ht=D(()=>{Un(),ge()});function vt(o,l){if(o===16777215||!l)return l;if(l===16777215||!o)return o;let f=o>>16&255,v=o>>8&255,b=o&255,T=l>>16&255,S=l>>8&255,R=l&255,U=f*T/255|0,W=v*S/255|0,K=b*R/255|0;return(U<<16)+(W<<8)+K}var ut=D(()=>{"use strict"});function xt(o,l){return o===jt?l:l===jt?o:vt(o,l)}var jt,ur=D(()=>{ut(),jt=16777215});function ei(o){return((o&255)<<16)+(o&65280)+(o>>16&255)}var pr,Er=D(()=>{ht(),ge(),ur(),pr={getGlobalAlpha(o){if(o)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let l=this.alpha,f=this.parent;for(;f;)l*=f.alpha,f=f.parent;return l},getGlobalTransform(o,l){if(l)return o.copyFrom(this.worldTransform);this.updateLocalTransform();let f=lt(this,tt.get().identity());return o.appendFrom(this.localTransform,f),tt.return(f),o},getGlobalTint(o){if(o)return this.renderGroup?ei(this.renderGroup.worldColor):this.parentRenderGroup?ei(xt(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let l=this.localColor,f=this.parent;for(;f;)l=xt(l,f.localColor),f=f.parent;return ei(l)}}});function Gt(...o){Dr!==$i&&(Dr++,Dr===$i?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...o))}var Dr,$i,Ar=D(()=>{"use strict";Dr=0,$i=500});function pn(o,l,f){return l.clear(),f||(f=ji.IDENTITY),ra(o,l,f,o,!0),l.isValid||l.set(0,0,0,0),l}function ra(o,l,f,v,b){let T;if(b)T=tt.get(),T=f.copyTo(T);else{if(!o.visible||!o.measurable)return;o.updateLocalTransform();let U=o.localTransform;T=tt.get(),T.appendFrom(U,f)}let S=l,R=!!o.effects.length;if(R&&(l=Ct.get().clear()),o.boundsArea)l.addRect(o.boundsArea,T);else{o.renderPipeId&&(l.matrix=T,l.addBounds(o.bounds));let U=o.children;for(let W=0;W<U.length;W++)ra(U[W],l,T,v,!1)}if(R){for(let U=0;U<o.effects.length;U++)o.effects[U].addLocalBounds?.(l,v);S.addBounds(l,ji.IDENTITY),Ct.return(l)}tt.return(T)}var Qr=D(()=>{Un(),ge()});function Hi(o,l){let f=o.children;for(let v=0;v<f.length;v++){let b=f[v],T=b.uid,S=(b._didViewChangeTick&65535)<<16|b._didContainerChangeTick&65535,R=l.index;(l.data[R]!==T||l.data[R+1]!==S)&&(l.data[l.index]=T,l.data[l.index+1]=S,l.didChange=!0),l.index=R+2,b.children.length&&Hi(b,l)}return l.didChange}var Ln=D(()=>{"use strict"}),ss,_a,la=D(()=>{Un(),$e(),ht(),Qr(),Ln(),ss=new ji,_a={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(o,l){let f=Math.sign(this.scale.x)||1;l!==0?this.scale.x=o/l*f:this.scale.x=f},_setHeight(o,l){let f=Math.sign(this.scale.y)||1;l!==0?this.scale.y=o/l*f:this.scale.y=f},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new Re});let o=this._localBoundsCacheData;return o.index=1,o.didChange=!1,o.data[0]!==this._didViewChangeTick&&(o.didChange=!0,o.data[0]=this._didViewChangeTick),Hi(this,o),o.didChange&&pn(this,o.localBounds,ss),o.localBounds},getBounds(o,l){return De(this,o,l||new Re)}}}),Us,Y=D(()=>{"use strict";Us={_onRender:null,set onRender(o){let l=this.renderGroup||this.parentRenderGroup;if(!o){this._onRender&&l?.removeOnRender(this),this._onRender=null;return}this._onRender||l?.addOnRender(this),this._onRender=o},get onRender(){return this._onRender}}});function _e(o,l){return o._zIndex-l._zIndex}var Fe,Ue=D(()=>{"use strict";Fe={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(o){this._zIndex!==o&&(this._zIndex=o,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(_e))}}}),je,mt=D(()=>{Gs(),ge(),je={getGlobalPosition(o=new Mn,l=!1){return this.parent?this.parent.toGlobal(this._position,o,l):(o.x=this._position.x,o.y=this._position.y),o},toGlobal(o,l,f=!1){let v=this.getGlobalTransform(tt.get(),f);return l=v.apply(o,l),tt.return(v),l},toLocal(o,l,f,v){l&&(o=l.toGlobal(o,f,v));let b=this.getGlobalTransform(tt.get(),v);return f=b.applyInverse(o,f),tt.return(b),f}}}),Nt,It,rr=D(()=>{hs(),Nt=0,It=class{constructor(){this.uid=Ma("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.tick=0}reset(){this.instructionSize=0,this.tick=Nt++}add(o){this.instructions[this.instructionSize++]=o}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}});function wr(o){return o+=o===0?1:0,--o,o|=o>>>1,o|=o>>>2,o|=o>>>4,o|=o>>>8,o|=o>>>16,o+1}function ni(o){return!(o&o-1)&&!!o}var Sr=D(()=>{"use strict"});function ti(o){let l={};for(let f in o)o[f]!==void 0&&(l[f]=o[f]);return l}var ar=D(()=>{"use strict"});function cr(o){let l=yi[o];return l===void 0&&(yi[o]=Ma("resource")),l}var yi,qi,da,$a=D(()=>{Ir(),hs(),Sa(),yi=Object.create(null),qi=class TNe extends jr{constructor(l={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,l={...TNe.defaultOptions,...l},this.addressMode=l.addressMode,this.addressModeU=l.addressModeU??this.addressModeU,this.addressModeV=l.addressModeV??this.addressModeV,this.addressModeW=l.addressModeW??this.addressModeW,this.scaleMode=l.scaleMode,this.magFilter=l.magFilter??this.magFilter,this.minFilter=l.minFilter??this.minFilter,this.mipmapFilter=l.mipmapFilter??this.mipmapFilter,this.lodMinClamp=l.lodMinClamp,this.lodMaxClamp=l.lodMaxClamp,this.compare=l.compare,this.maxAnisotropy=l.maxAnisotropy??1}set addressMode(l){this.addressModeU=l,this.addressModeV=l,this.addressModeW=l}get addressMode(){return this.addressModeU}set wrapMode(l){Wn(Cr,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=l}get wrapMode(){return this.addressMode}set scaleMode(l){this.magFilter=l,this.minFilter=l,this.mipmapFilter=l}get scaleMode(){return this.magFilter}set maxAnisotropy(l){this._maxAnisotropy=Math.min(l,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){let l=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=cr(l),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}},qi.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"},da=qi}),ya,Ha,xo=D(()=>{Ir(),Sr(),ar(),hs(),$a(),ya=class ENe extends jr{constructor(l={}){super(),this.options=l,this.uid=Ma("textureSource"),this._resourceType="textureSource",this._resourceId=Ma("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,l={...ENe.defaultOptions,...l},this.label=l.label??"",this.resource=l.resource,this.autoGarbageCollect=l.autoGarbageCollect,this._resolution=l.resolution,l.width?this.pixelWidth=l.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,l.height?this.pixelHeight=l.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=l.format,this.dimension=l.dimensions,this.mipLevelCount=l.mipLevelCount,this.autoGenerateMipmaps=l.autoGenerateMipmaps,this.sampleCount=l.sampleCount,this.antialias=l.antialias,this.alphaMode=l.alphaMode,this.style=new da(ti(l)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(l){this.style!==l&&(this._style?.off("change",this._onStyleChange,this),this._style=l,this._style?.on("change",this._onStyleChange,this),this._onStyleChange())}get addressMode(){return this._style.addressMode}set addressMode(l){this._style.addressMode=l}get repeatMode(){return this._style.addressMode}set repeatMode(l){this._style.addressMode=l}get magFilter(){return this._style.magFilter}set magFilter(l){this._style.magFilter=l}get minFilter(){return this._style.minFilter}set minFilter(l){this._style.minFilter=l}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(l){this._style.mipmapFilter=l}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(l){this._style.lodMinClamp=l}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(l){this._style.lodMaxClamp=l}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){let l=this._resolution;if(this.resize(this.resourceWidth/l,this.resourceHeight/l))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=Ma("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){let{resource:l}=this;return l.naturalWidth||l.videoWidth||l.displayWidth||l.width}get resourceHeight(){let{resource:l}=this;return l.naturalHeight||l.videoHeight||l.displayHeight||l.height}get resolution(){return this._resolution}set resolution(l){this._resolution!==l&&(this._resolution=l,this.width=this.pixelWidth/l,this.height=this.pixelHeight/l)}resize(l,f,v){v=v||this._resolution,l=l||this.width,f=f||this.height;let b=Math.round(l*v),T=Math.round(f*v);return this.width=b/v,this.height=T/v,this._resolution=v,this.pixelWidth===b&&this.pixelHeight===T?!1:(this._refreshPOT(),this.pixelWidth=b,this.pixelHeight=T,this.emit("resize",this),this._resourceId=Ma("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(l){this._style.wrapMode=l}get wrapMode(){return this._style.wrapMode}set scaleMode(l){this._style.scaleMode=l}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=ni(this.pixelWidth)&&ni(this.pixelHeight)}static test(l){throw new Error("Unimplemented")}},ya.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1},Ha=ya});function Ox(){for(let o=0;o<16;o++){let l=[];yc.push(l);for(let f=0;f<16;f++){let v=op(Ql[o]*Ql[f]+Q[o]*t0[f]),b=op(t0[o]*Ql[f]+wi[o]*t0[f]),T=op(Ql[o]*Q[f]+Q[o]*wi[f]),S=op(t0[o]*Q[f]+wi[o]*wi[f]);for(let R=0;R<16;R++)if(Ql[R]===v&&t0[R]===b&&Q[R]===T&&wi[R]===S){l.push(R);break}}}for(let o=0;o<16;o++){let l=new ji;l.set(Ql[o],t0[o],Q[o],wi[o],0,0),ug.push(l)}}var Ql,t0,Q,wi,yc,ug,op,gs,q8=D(()=>{Un(),Ql=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],t0=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Q=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],wi=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],yc=[],ug=[],op=Math.sign,Ox(),gs={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:o=>Ql[o],uY:o=>t0[o],vX:o=>Q[o],vY:o=>wi[o],inv:o=>o&8?o&15:-o&7,add:(o,l)=>yc[o][l],sub:(o,l)=>yc[o][gs.inv(l)],rotate180:o=>o^4,isVertical:o=>(o&3)===2,byDirection:(o,l)=>Math.abs(o)*2<=Math.abs(l)?l>=0?gs.S:gs.N:Math.abs(l)*2<=Math.abs(o)?o>0?gs.E:gs.W:l>0?o>0?gs.SE:gs.SW:o>0?gs.NE:gs.NW,matrixAppendRotationInv:(o,l,f=0,v=0)=>{let b=ug[gs.inv(l)];b.tx=f,b.ty=v,o.append(b)}}}),Zn,kw=D(()=>{"use strict";Zn=()=>{}}),lp,Tw=D(()=>{Ot(),xo(),lp=class extends Ha{constructor(o){let l=o.resource||new Float32Array(o.width*o.height*4),f=o.format;f||(l instanceof Float32Array?f="rgba32float":l instanceof Int32Array||l instanceof Uint32Array?f="rgba32uint":l instanceof Int16Array||l instanceof Uint16Array?f="rgba16uint":(l instanceof Int8Array,f="bgra8unorm")),super({...o,resource:l,format:f}),this.uploadMethodId="buffer"}static test(o){return o instanceof Int8Array||o instanceof Uint8Array||o instanceof Uint8ClampedArray||o instanceof Int16Array||o instanceof Uint16Array||o instanceof Int32Array||o instanceof Uint32Array||o instanceof Float32Array}},lp.extension=Ke.TextureSource}),Bx,Ew,X8=D(()=>{Un(),Bx=new ji,Ew=class{constructor(o,l){this.mapCoord=new ji,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof l>"u"?this.clampMargin=o.width<10?0:.5:this.clampMargin=l,this.isSimple=!1,this.texture=o}get texture(){return this._texture}set texture(o){this.texture!==o&&(this._texture?.removeListener("update",this.update,this),this._texture=o,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(o,l){l===void 0&&(l=o);let f=this.mapCoord;for(let v=0;v<o.length;v+=2){let b=o[v],T=o[v+1];l[v]=b*f.a+T*f.c+f.tx,l[v+1]=b*f.b+T*f.d+f.ty}return l}update(){let o=this._texture;this._updateID++;let l=o.uvs;this.mapCoord.set(l.x1-l.x0,l.y1-l.y0,l.x3-l.x0,l.y3-l.y0,l.x0,l.y0);let f=o.orig,v=o.trim;v&&(Bx.set(f.width/v.width,0,0,f.height/v.height,-v.x/v.width,-v.y/v.height),this.mapCoord.append(Bx));let b=o.source,T=this.uClampFrame,S=this.clampMargin/b._resolution,R=this.clampOffset/b._resolution;return T[0]=(o.frame.x+S+R)/b.width,T[1]=(o.frame.y+S+R)/b.height,T[2]=(o.frame.x+o.frame.width-S+R)/b.width,T[3]=(o.frame.y+o.frame.height-S+R)/b.height,this.uClampOffset[0]=this.clampOffset/b.pixelWidth,this.uClampOffset[1]=this.clampOffset/b.pixelHeight,this.isSimple=o.frame.width===b.width&&o.frame.height===b.height&&o.rotate===0,!0}}}),fn,os=D(()=>{Ir(),q8(),ye(),hs(),Sa(),kw(),Tw(),xo(),X8(),fn=class extends jr{constructor({source:o,label:l,frame:f,orig:v,trim:b,defaultAnchor:T,defaultBorders:S,rotate:R,dynamic:U}={}){if(super(),this.uid=Ma("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new te,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=l,this.source=o?.source??new Ha,this.noFrame=!f,f)this.frame.copyFrom(f);else{let{width:W,height:K}=this._source;this.frame.width=W,this.frame.height=K}this.orig=v||this.frame,this.trim=b,this.rotate=R??0,this.defaultAnchor=T,this.defaultBorders=S,this.destroyed=!1,this.dynamic=U||!1,this.updateUvs()}set source(o){this._source&&this._source.off("resize",this.update,this),this._source=o,o.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new Ew(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){let{uvs:o,frame:l}=this,{width:f,height:v}=this._source,b=l.x/f,T=l.y/v,S=l.width/f,R=l.height/v,U=this.rotate;if(U){let W=S/2,K=R/2,ee=b+W,se=T+K;U=gs.add(U,gs.NW),o.x0=ee+W*gs.uX(U),o.y0=se+K*gs.uY(U),U=gs.add(U,2),o.x1=ee+W*gs.uX(U),o.y1=se+K*gs.uY(U),U=gs.add(U,2),o.x2=ee+W*gs.uX(U),o.y2=se+K*gs.uY(U),U=gs.add(U,2),o.x3=ee+W*gs.uX(U),o.y3=se+K*gs.uY(U)}else o.x0=b,o.y0=T,o.x1=b+S,o.y1=T,o.x2=b+S,o.y2=T+R,o.x3=b,o.y3=T+R}destroy(o=!1){this._source&&o&&(this._source.destroy(),this._source=null),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return Wn(Cr,"Texture.baseTexture is now Texture.source"),this._source}},fn.EMPTY=new fn({label:"EMPTY",source:new Ha({label:"EMPTY"})}),fn.EMPTY.destroy=Zn,fn.WHITE=new fn({source:new lp({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"}),fn.WHITE.destroy=Zn}),Eh,Ne,Mo,ed=D(()=>{Sr(),xo(),os(),Eh=0,Ne=class{constructor(o){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=o||{},this.enableFullScreen=!1}createTexture(o,l,f){let v=new Ha({...this.textureOptions,width:o,height:l,resolution:1,antialias:f,autoGarbageCollect:!0});return new fn({source:v,label:`texturePool_${Eh++}`})}getOptimalTexture(o,l,f=1,v){let b=Math.ceil(o*f-1e-6),T=Math.ceil(l*f-1e-6);b=wr(b),T=wr(T);let S=(b<<17)+(T<<1)+(v?1:0);this._texturePool[S]||(this._texturePool[S]=[]);let R=this._texturePool[S].pop();return R||(R=this.createTexture(b,T,v)),R.source._resolution=f,R.source.width=b/f,R.source.height=T/f,R.source.pixelWidth=b,R.source.pixelHeight=T,R.frame.x=0,R.frame.y=0,R.frame.width=o,R.frame.height=l,R.updateUvs(),this._poolKeyHash[R.uid]=S,R}getSameSizeTexture(o,l=!1){let f=o.source;return this.getOptimalTexture(o.width,o.height,f._resolution,l)}returnTexture(o){let l=this._poolKeyHash[o.uid];this._texturePool[l].push(o)}clear(o){if(o=o!==!1,o)for(let l in this._texturePool){let f=this._texturePool[l];if(f)for(let v=0;v<f.length;v++)f[v].destroy(!0)}this._texturePool={}}},Mo=new Ne}),td,Cw=D(()=>{Un(),rr(),ed(),td=class{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new ji,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new It,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(o){this.root=o,o._onRender&&this.addOnRender(o),o.didChange=!0;let l=o.children;for(let f=0;f<l.length;f++)this.addChild(l[f])}enableCacheAsTexture(o={}){this.textureOptions=o,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(Mo.returnTexture(this.texture),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0}reset(){this.renderGroupChildren.length=0;for(let o in this.childrenToUpdate){let l=this.childrenToUpdate[o];l.list.fill(null),l.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(o){o.renderGroupParent&&o.renderGroupParent._removeRenderGroupChild(o),o.renderGroupParent=this,this.renderGroupChildren.push(o)}_removeRenderGroupChild(o){let l=this.renderGroupChildren.indexOf(o);l>-1&&this.renderGroupChildren.splice(l,1),o.renderGroupParent=null}addChild(o){if(this.structureDidChange=!0,o.parentRenderGroup=this,o.updateTick=-1,o.parent===this.root?o.relativeRenderGroupDepth=1:o.relativeRenderGroupDepth=o.parent.relativeRenderGroupDepth+1,o.didChange=!0,this.onChildUpdate(o),o.renderGroup){this.addRenderGroupChild(o.renderGroup);return}o._onRender&&this.addOnRender(o);let l=o.children;for(let f=0;f<l.length;f++)this.addChild(l[f])}removeChild(o){if(this.structureDidChange=!0,o._onRender&&(o.renderGroup||this.removeOnRender(o)),o.parentRenderGroup=null,o.renderGroup){this._removeRenderGroupChild(o.renderGroup);return}let l=o.children;for(let f=0;f<l.length;f++)this.removeChild(l[f])}removeChildren(o){for(let l=0;l<o.length;l++)this.removeChild(o[l])}onChildUpdate(o){let l=this.childrenToUpdate[o.relativeRenderGroupDepth];l||(l=this.childrenToUpdate[o.relativeRenderGroupDepth]={index:0,list:[]}),l.list[l.index++]=o}updateRenderable(o){o.globalDisplayStatus<7||(this.instructionSet.renderPipes[o.renderPipeId].updateRenderable(o),o.didViewUpdate=!1)}onChildViewUpdate(o){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=o}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(o){this._onRenderContainers.push(o)}removeOnRender(o){this._onRenderContainers.splice(this._onRenderContainers.indexOf(o),1)}runOnRender(){for(let o=0;o<this._onRenderContainers.length;o++)this._onRenderContainers[o]._onRender()}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(o=[]){let l=this.root.children;for(let f=0;f<l.length;f++)this._getChildren(l[f],o);return o}_getChildren(o,l=[]){if(l.push(o),o.renderGroup)return l;let f=o.children;for(let v=0;v<f.length;v++)this._getChildren(f[v],l);return l}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return this._matrixDirty&1?(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new ji),this._inverseWorldTransform.copyFrom(this.worldTransform).invert()):this._inverseWorldTransform}get textureOffsetInverseTransform(){return this._matrixDirty&2?(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new ji),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y)):this._textureOffsetInverseTransform}get inverseParentTextureTransform(){if(!(this._matrixDirty&4))return this._inverseParentTextureTransform;this._matrixDirty&=-5;let o=this._parentCacheAsTextureRenderGroup;return o?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new ji),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(o.inverseWorldTransform).translate(-o._textureBounds.x,-o._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}});function K8(o,l,f={}){for(let v in l)!f[v]&&l[v]!==void 0&&(o[v]=l[v])}var Ju=D(()=>{"use strict"}),Jl,qr,iy,hg,ny,up,ms,Ch=D(()=>{Ir(),nn(),_i(),Un(),Ls(),Rs(),hs(),Sa(),Ts(),vu(),de(),Vt(),Ai(),Er(),la(),Y(),Ue(),mt(),Cw(),Ju(),Jl=new Qa(null),qr=new Qa(null),iy=new Qa(null,1,1),hg=1,ny=2,up=4,ms=class CNe extends jr{constructor(l={}){super(),this.uid=Ma("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.updateTick=-1,this.localTransform=new ji,this.relativeGroupTransform=new ji,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new Qa(this,0,0),this._scale=iy,this._pivot=qr,this._skew=Jl,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],K8(this,l,{children:!0,parent:!0,effects:!0}),l.children?.forEach(f=>this.addChild(f)),l.parent?.addChild(this)}static mixin(l){Object.defineProperties(CNe.prototype,Object.getOwnPropertyDescriptors(l))}set _didChangeId(l){this._didViewChangeTick=l>>12&4095,this._didContainerChangeTick=l&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...l){if(this.allowChildren||Wn(Cr,"addChild: Only Containers will be allowed to add children in v8.0.0"),l.length>1){for(let b=0;b<l.length;b++)this.addChild(l[b]);return l[0]}let f=l[0],v=this.renderGroup||this.parentRenderGroup;return f.parent===this?(this.children.splice(this.children.indexOf(f),1),this.children.push(f),v&&(v.structureDidChange=!0),f):(f.parent&&f.parent.removeChild(f),this.children.push(f),this.sortableChildren&&(this.sortDirty=!0),f.parent=this,f.didChange=!0,f._updateFlags=15,v&&v.addChild(f),this.emit("childAdded",f,this,this.children.length-1),f.emit("added",this),this._didViewChangeTick++,f._zIndex!==0&&f.depthOfChildModified(),f)}removeChild(...l){if(l.length>1){for(let b=0;b<l.length;b++)this.removeChild(l[b]);return l[0]}let f=l[0],v=this.children.indexOf(f);return v>-1&&(this._didViewChangeTick++,this.children.splice(v,1),this.renderGroup?this.renderGroup.removeChild(f):this.parentRenderGroup&&this.parentRenderGroup.removeChild(f),f.parent=null,this.emit("childRemoved",f,this,v),f.emit("removed",this)),f}_onUpdate(l){l&&l===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(l){!!this.renderGroup!==l&&(l?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;let l=this.parentRenderGroup;l?.removeChild(this),this.renderGroup=pt.get(td,this),this.groupTransform=ji.IDENTITY,l?.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;let l=this.parentRenderGroup;l?.removeChild(this),pt.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,l?.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new ji),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(l){this._position.x=l}get y(){return this._position.y}set y(l){this._position.y=l}get position(){return this._position}set position(l){this._position.copyFrom(l)}get rotation(){return this._rotation}set rotation(l){this._rotation!==l&&(this._rotation=l,this._onUpdate(this._skew))}get angle(){return this.rotation*an}set angle(l){this.rotation=l*ma}get pivot(){return this._pivot===qr&&(this._pivot=new Qa(this,0,0)),this._pivot}set pivot(l){this._pivot===qr&&(this._pivot=new Qa(this,0,0)),typeof l=="number"?this._pivot.set(l):this._pivot.copyFrom(l)}get skew(){return this._skew===Jl&&(this._skew=new Qa(this,0,0)),this._skew}set skew(l){this._skew===Jl&&(this._skew=new Qa(this,0,0)),this._skew.copyFrom(l)}get scale(){return this._scale===iy&&(this._scale=new Qa(this,1,1)),this._scale}set scale(l){this._scale===iy&&(this._scale=new Qa(this,0,0)),typeof l=="number"?this._scale.set(l):this._scale.copyFrom(l)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(l){let f=this.getLocalBounds().width;this._setWidth(l,f)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(l){let f=this.getLocalBounds().height;this._setHeight(l,f)}getSize(l){l||(l={});let f=this.getLocalBounds();return l.width=Math.abs(this.scale.x*f.width),l.height=Math.abs(this.scale.y*f.height),l}setSize(l,f){let v=this.getLocalBounds();typeof l=="object"?(f=l.height??l.width,l=l.width):f??(f=l),l!==void 0&&this._setWidth(l,v.width),f!==void 0&&this._setHeight(f,v.height)}_updateSkew(){let l=this._rotation,f=this._skew;this._cx=Math.cos(l+f._y),this._sx=Math.sin(l+f._y),this._cy=-Math.sin(l-f._x),this._sy=Math.cos(l-f._x)}updateTransform(l){return this.position.set(typeof l.x=="number"?l.x:this.position.x,typeof l.y=="number"?l.y:this.position.y),this.scale.set(typeof l.scaleX=="number"?l.scaleX||1:this.scale.x,typeof l.scaleY=="number"?l.scaleY||1:this.scale.y),this.rotation=typeof l.rotation=="number"?l.rotation:this.rotation,this.skew.set(typeof l.skewX=="number"?l.skewX:this.skew.x,typeof l.skewY=="number"?l.skewY:this.skew.y),this.pivot.set(typeof l.pivotX=="number"?l.pivotX:this.pivot.x,typeof l.pivotY=="number"?l.pivotY:this.pivot.y),this}setFromMatrix(l){l.decompose(this)}updateLocalTransform(){let l=this._didContainerChangeTick;if(this._didLocalTransformChangeId===l)return;this._didLocalTransformChangeId=l;let f=this.localTransform,v=this._scale,b=this._pivot,T=this._position,S=v._x,R=v._y,U=b._x,W=b._y;f.a=this._cx*S,f.b=this._sx*S,f.c=this._cy*R,f.d=this._sy*R,f.tx=T._x-(U*f.a+W*f.c),f.ty=T._y-(U*f.b+W*f.d)}set alpha(l){l!==this.localAlpha&&(this.localAlpha=l,this._updateFlags|=hg,this._onUpdate())}get alpha(){return this.localAlpha}set tint(l){let f=li.shared.setValue(l??16777215).toBgrNumber();f!==this.localColor&&(this.localColor=f,this._updateFlags|=hg,this._onUpdate())}get tint(){return ei(this.localColor)}set blendMode(l){this.localBlendMode!==l&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=ny,this.localBlendMode=l,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(l){let f=l?2:0;(this.localDisplayStatus&2)!==f&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=up,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(l){let f=l?0:4;(this.localDisplayStatus&4)!==f&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=up,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(l){let f=l?1:0;(this.localDisplayStatus&1)!==f&&(this._updateFlags|=up,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(l=!1){if(this.destroyed)return;this.destroyed=!0;let f;if(this.children.length&&(f=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof l=="boolean"?l:l?.children)&&f)for(let v=0;v<f.length;++v)f[v].destroy(l);this.renderGroup?.destroy(),this.renderGroup=null}},ms.mixin(ui),ms.mixin(je),ms.mixin(Us),ms.mixin(_a),ms.mixin(Jt),ms.mixin(br),ms.mixin(Fe),ms.mixin(Pi),ms.mixin(yu),ms.mixin(pr)}),cg,Px=D(()=>{Gs(),cg=class SNe{constructor(l){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=SNe.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Mn,this.page=new Mn,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=l}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(l,f,v){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(l,f,v,b,T){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}});function Z8(o){return function(l){return l.test(o)}}function Sw(o){var l={userAgent:"",platform:"",maxTouchPoints:0};!o&&typeof navigator<"u"?l={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof o=="string"?l.userAgent=o:o&&o.userAgent&&(l={userAgent:o.userAgent,platform:o.platform,maxTouchPoints:o.maxTouchPoints||0});var f=l.userAgent,v=f.split("[FBAN");typeof v[1]<"u"&&(f=v[0]),v=f.split("Twitter"),typeof v[1]<"u"&&(f=v[0]);var b=Z8(f),T={apple:{phone:b(hn)&&!b(Fl),ipod:b(hp),tablet:!b(hn)&&(b(dg)||zx(l))&&!b(Fl),universal:b(Sh),device:(b(hn)||b(hp)||b(dg)||b(Sh)||zx(l))&&!b(Fl)},amazon:{phone:b(xu),tablet:!b(xu)&&b(eu),device:b(xu)||b(eu)},android:{phone:!b(Fl)&&b(xu)||!b(Fl)&&b(cp),tablet:!b(Fl)&&!b(xu)&&!b(cp)&&(b(eu)||b(dp)),device:!b(Fl)&&(b(xu)||b(eu)||b(cp)||b(dp))||b(/\bokhttp\b/i)},windows:{phone:b(Fl),tablet:b($l),device:b(Fl)||b($l)},other:{blackberry:b(rd),blackberry10:b(Lo),opera:b(bu),firefox:b($x),chrome:b(Fx),device:b(rd)||b(Lo)||b(bu)||b($x)||b(Fx)},any:!1,phone:!1,tablet:!1};return T.any=T.apple.device||T.android.device||T.windows.device||T.other.device,T.phone=T.apple.phone||T.android.phone||T.windows.phone,T.tablet=T.apple.tablet||T.android.tablet||T.windows.tablet,T}var hn,hp,dg,Sh,cp,dp,xu,eu,Fl,$l,rd,Lo,bu,Fx,$x,zx,Aw=D(()=>{hn=/iPhone/i,hp=/iPod/i,dg=/iPad/i,Sh=/\biOS-universal(?:.+)Mac\b/i,cp=/\bAndroid(?:.+)Mobile\b/i,dp=/Android/i,xu=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,eu=/Silk/i,Fl=/Windows Phone/i,$l=/\bWindows(?:.+)ARM\b/i,rd=/BlackBerry/i,Lo=/BB10/i,bu=/Opera Mini/i,Fx=/\b(CriOS|Chrome)(?:.+)Mobile/i,$x=/Mobile(?:.+)Firefox\b/i,zx=function(o){return typeof o<"u"&&o.platform==="MacIntel"&&typeof o.maxTouchPoints=="number"&&o.maxTouchPoints>1&&typeof MSStream>"u"}}),Q8=D(()=>{Aw(),Aw()}),Mw,kn,Gx=D(()=>{Q8(),Mw=Sw.default??Sw,kn=Mw(globalThis.navigator)}),pg,Ah,Lw,Rw,Ux,jx,Dw,Iw,Nw,Hx,J8=D(()=>{Px(),Ot(),Gx(),Es(),pg=9,Ah=100,Lw=0,Rw=0,Ux=2,jx=1,Dw=-1e3,Iw=-1e3,Nw=2,Hx=class{constructor(o,l=kn){this._mobileInfo=l,this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this._pool=[],this._renderId=0,this._children=[],this._androidUpdateCount=0,this._androidUpdateFrequency=500,this._hookDiv=null,(l.tablet||l.phone)&&this._createTouchHook();let f=document.createElement("div");f.style.width=`${Ah}px`,f.style.height=`${Ah}px`,f.style.position="absolute",f.style.top=`${Lw}px`,f.style.left=`${Rw}px`,f.style.zIndex=Ux.toString(),this._div=f,this._renderer=o,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}get hookDiv(){return this._hookDiv}_createTouchHook(){let o=document.createElement("button");o.style.width=`${jx}px`,o.style.height=`${jx}px`,o.style.position="absolute",o.style.top=`${Dw}px`,o.style.left=`${Iw}px`,o.style.zIndex=Nw.toString(),o.style.backgroundColor="#FF0000",o.title="select to enable accessibility for this content",o.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this._activate(),this._destroyTouchHook()}),document.body.appendChild(o),this._hookDiv=o}_destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}_activate(){this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this._renderer.runners.postrender.add(this),this._renderer.view.canvas.parentNode?.appendChild(this._div))}_deactivate(){!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this._renderer.runners.postrender.remove(this),this._div.parentNode?.removeChild(this._div))}_updateAccessibleObjects(o){if(!o.visible||!o.accessibleChildren)return;o.accessible&&o.isInteractive()&&(o._accessibleActive||this._addChild(o),o._renderId=this._renderId);let l=o.children;if(l)for(let f=0;f<l.length;f++)this._updateAccessibleObjects(l[f])}init(o){this.debug=o?.debug??this.debug,this._renderer.runners.postrender.remove(this)}postrender(){let o=performance.now();if(this._mobileInfo.android.device&&o<this._androidUpdateCount||(this._androidUpdateCount=o+this._androidUpdateFrequency,!this._renderer.renderingToScreen||!this._renderer.view.canvas))return;this._renderer.lastObjectRendered&&this._updateAccessibleObjects(this._renderer.lastObjectRendered);let{x:l,y:f,width:v,height:b}=this._renderer.view.canvas.getBoundingClientRect(),{width:T,height:S,resolution:R}=this._renderer,U=v/T*R,W=b/S*R,K=this._div;K.style.left=`${l}px`,K.style.top=`${f}px`,K.style.width=`${T}px`,K.style.height=`${S}px`;for(let ee=0;ee<this._children.length;ee++){let se=this._children[ee];if(se._renderId!==this._renderId)se._accessibleActive=!1,vo(this._children,ee,1),this._div.removeChild(se._accessibleDiv),this._pool.push(se._accessibleDiv),se._accessibleDiv=null,ee--;else{K=se._accessibleDiv;let re=se.hitArea,Me=se.worldTransform;se.hitArea?(K.style.left=`${(Me.tx+re.x*Me.a)*U}px`,K.style.top=`${(Me.ty+re.y*Me.d)*W}px`,K.style.width=`${re.width*Me.a*U}px`,K.style.height=`${re.height*Me.d*W}px`):(re=se.getBounds().rectangle,this._capHitArea(re),K.style.left=`${re.x*U}px`,K.style.top=`${re.y*W}px`,K.style.width=`${re.width*U}px`,K.style.height=`${re.height*W}px`,K.title!==se.accessibleTitle&&se.accessibleTitle!==null&&(K.title=se.accessibleTitle||""),K.getAttribute("aria-label")!==se.accessibleHint&&se.accessibleHint!==null&&K.setAttribute("aria-label",se.accessibleHint||"")),(se.accessibleTitle!==K.title||se.tabIndex!==K.tabIndex)&&(K.title=se.accessibleTitle||"",K.tabIndex=se.tabIndex,this.debug&&this._updateDebugHTML(K))}}this._renderId++}_updateDebugHTML(o){o.innerHTML=`type: ${o.type}</br> title : ${o.title}</br> tabIndex: ${o.tabIndex}`}_capHitArea(o){o.x<0&&(o.width+=o.x,o.x=0),o.y<0&&(o.height+=o.y,o.y=0);let{width:l,height:f}=this._renderer;o.x+o.width>l&&(o.width=l-o.x),o.y+o.height>f&&(o.height=f-o.y)}_addChild(o){let l=this._pool.pop();l||(l=document.createElement("button"),l.style.width=`${Ah}px`,l.style.height=`${Ah}px`,l.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",l.style.position="absolute",l.style.zIndex=Ux.toString(),l.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?l.setAttribute("aria-live","off"):l.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?l.setAttribute("aria-relevant","additions"):l.setAttribute("aria-relevant","text"),l.addEventListener("click",this._onClick.bind(this)),l.addEventListener("focus",this._onFocus.bind(this)),l.addEventListener("focusout",this._onFocusOut.bind(this))),l.style.pointerEvents=o.accessiblePointerEvents,l.type=o.accessibleType,o.accessibleTitle&&o.accessibleTitle!==null?l.title=o.accessibleTitle:(!o.accessibleHint||o.accessibleHint===null)&&(l.title=`container ${o.tabIndex}`),o.accessibleHint&&o.accessibleHint!==null&&l.setAttribute("aria-label",o.accessibleHint),this.debug&&this._updateDebugHTML(l),o._accessibleActive=!0,o._accessibleDiv=l,l.container=o,this._children.push(o),this._div.appendChild(o._accessibleDiv),o._accessibleDiv.tabIndex=o.tabIndex}_dispatchEvent(o,l){let{container:f}=o.target,v=this._renderer.events.rootBoundary,b=Object.assign(new cg(v),{target:f});v.rootTarget=this._renderer.lastObjectRendered,l.forEach(T=>v.dispatchEvent(b,T))}_onClick(o){this._dispatchEvent(o,["click","pointertap","tap"])}_onFocus(o){o.target.getAttribute("aria-live")||o.target.setAttribute("aria-live","assertive"),this._dispatchEvent(o,["mouseover"])}_onFocusOut(o){o.target.getAttribute("aria-live")||o.target.setAttribute("aria-live","polite"),this._dispatchEvent(o,["mouseout"])}_onKeyDown(o){o.keyCode===pg&&this._activate()}_onMouseMove(o){o.movementX===0&&o.movementY===0||this._deactivate()}destroy(){this._destroyTouchHook(),this._div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this._pool=null,this._children=null,this._renderer=null}},Hx.extension={type:[Ke.WebGLSystem,Ke.WebGPUSystem],name:"accessibility"}}),Vx,eA=D(()=>{"use strict";Vx={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,_renderId:-1}}),fg=D(()=>{Ot(),Ch(),J8(),eA(),Kr.add(Hx),ms.mixin(Vx)}),_u,ay=D(()=>{Ot(),_u=class{static init(o){Object.defineProperty(this,"resizeTo",{set(l){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=l,l&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this._cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this._cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this._cancelResize();let l,f;if(this._resizeTo===globalThis.window)l=globalThis.innerWidth,f=globalThis.innerHeight;else{let{clientWidth:v,clientHeight:b}=this._resizeTo;l=v,f=b}this.renderer.resize(l,f),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=o.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this._cancelResize(),this._cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}},_u.extension=Ke.Application}),r0,gg=D(()=>{"use strict";r0=(o=>(o[o.INTERACTION=50]="INTERACTION",o[o.HIGH=25]="HIGH",o[o.NORMAL=0]="NORMAL",o[o.LOW=-25]="LOW",o[o.UTILITY=-50]="UTILITY",o))(r0||{})}),sy,Ow=D(()=>{"use strict";sy=class{constructor(o,l=null,f=0,v=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=o,this._context=l,this.priority=f,this._once=v}match(o,l=null){return this._fn===o&&this._context===l}emit(o){this._fn&&(this._context?this._fn.call(this._context,o):this._fn(o));let l=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),l}connect(o){this.previous=o,o.next&&(o.next.previous=this),this.next=o.next,o.next=this}destroy(o=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);let l=this.next;return this.next=o?null:l,this.previous=null,l}}}),oy,wu,pp=D(()=>{gg(),Ow(),oy=class mc{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new sy(null,null,1/0),this.deltaMS=1/mc.targetFPMS,this.elapsedMS=1/mc.targetFPMS,this._tick=l=>{this._requestId=null,this.started&&(this.update(l),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(l,f,v=r0.NORMAL){return this._addListener(new sy(l,f,v))}addOnce(l,f,v=r0.NORMAL){return this._addListener(new sy(l,f,v,!0))}_addListener(l){let f=this._head.next,v=this._head;if(!f)l.connect(v);else{for(;f;){if(l.priority>f.priority){l.connect(v);break}v=f,f=f.next}l.previous||l.connect(v)}return this._startIfPossible(),this}remove(l,f){let v=this._head.next;for(;v;)v.match(l,f)?v=v.destroy():v=v.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let l=0,f=this._head;for(;f=f.next;)l++;return l}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let l=this._head.next;for(;l;)l=l.destroy(!0);this._head.destroy(),this._head=null}}update(l=performance.now()){let f;if(l>this.lastTime){if(f=this.elapsedMS=l-this.lastTime,f>this._maxElapsedMS&&(f=this._maxElapsedMS),f*=this.speed,this._minElapsedMS){let T=l-this._lastFrame|0;if(T<this._minElapsedMS)return;this._lastFrame=l-T%this._minElapsedMS}this.deltaMS=f,this.deltaTime=this.deltaMS*mc.targetFPMS;let v=this._head,b=v.next;for(;b;)b=b.emit(this);v.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=l}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(l){let f=Math.min(this.maxFPS,l),v=Math.min(Math.max(0,f)/1e3,mc.targetFPMS);this._maxElapsedMS=1/v}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(l){if(l===0)this._minElapsedMS=0;else{let f=Math.max(this.minFPS,l);this._minElapsedMS=1/(f/1e3)}}static get shared(){if(!mc._shared){let l=mc._shared=new mc;l.autoStart=!0,l._protected=!0}return mc._shared}static get system(){if(!mc._system){let l=mc._system=new mc;l.autoStart=!0,l._protected=!0}return mc._system}},oy.targetFPMS=.06,wu=oy}),Wx,Bw=D(()=>{Ot(),gg(),pp(),Wx=class{static init(o){o=Object.assign({autoStart:!0,sharedTicker:!1},o),Object.defineProperty(this,"ticker",{set(l){this._ticker&&this._ticker.remove(this.render,this),this._ticker=l,l&&l.add(this.render,this,r0.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=o.sharedTicker?wu.shared:new wu,o.autoStart&&this.start()}static destroy(){if(this._ticker){let o=this._ticker;this.ticker=null,o.destroy()}}},Wx.extension=Ke.Application}),ys=D(()=>{Ot(),ay(),Bw(),Kr.add(_u),Kr.add(Wx)}),ci,tl,Yx=D(()=>{gg(),pp(),ci=class{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}init(o){this.removeTickerListener(),this.events=o,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(o){this._pauseUpdate=o}addTickerListener(){this._tickerAdded||!this.domElement||(wu.system.add(this._tickerUpdate,this,r0.INTERACTION),this._tickerAdded=!0)}removeTickerListener(){this._tickerAdded&&(wu.system.remove(this._tickerUpdate,this),this._tickerAdded=!1)}pointerMoved(){this._didMove=!0}_update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}let o=this.events._rootPointerEvent;this.events.supportsTouchEvents&&o.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:o.clientX,clientY:o.clientY,pointerType:o.pointerType,pointerId:o.pointerId}))}_tickerUpdate(o){this._deltaTime+=o.deltaTime,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this._update())}},tl=new ci}),fp,ly=D(()=>{Gs(),Px(),fp=class extends cg{constructor(){super(...arguments),this.client=new Mn,this.movement=new Mn,this.offset=new Mn,this.global=new Mn,this.screen=new Mn}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(o,l,f){return o.worldTransform.applyInverse(f||this.global,l)}getModifierState(o){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(o)}initMouseEvent(o,l,f,v,b,T,S,R,U,W,K,ee,se,re,Me){throw new Error("Method not implemented.")}}}),rl,uy=D(()=>{ly(),rl=class extends fp{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}}),i0,Pw=D(()=>{ly(),i0=class extends fp{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}},i0.DOM_DELTA_PIXEL=0,i0.DOM_DELTA_LINE=1,i0.DOM_DELTA_PAGE=2}),tu,Mh,ru,hy,tA=D(()=>{Ir(),Gs(),Ar(),Yx(),ly(),uy(),Pw(),tu=2048,Mh=new Mn,ru=new Mn,hy=class{constructor(o){this.dispatch=new jr,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=o,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(o,l){this.mappingTable[o]||(this.mappingTable[o]=[]),this.mappingTable[o].push({fn:l,priority:0}),this.mappingTable[o].sort((f,v)=>f.priority-v.priority)}dispatchEvent(o,l){o.propagationStopped=!1,o.propagationImmediatelyStopped=!1,this.propagate(o,l),this.dispatch.emit(l||o.type,o)}mapEvent(o){if(!this.rootTarget)return;let l=this.mappingTable[o.type];if(l)for(let f=0,v=l.length;f<v;f++)l[f].fn(o);else Gt(`[EventBoundary]: Event mapping not defined for ${o.type}`)}hitTest(o,l){tl.pauseUpdate=!0;let f=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",v=this[f](this.rootTarget,this.rootTarget.eventMode,Mh.set(o,l),this.hitTestFn,this.hitPruneFn);return v&&v[0]}propagate(o,l){if(!o.target)return;let f=o.composedPath();o.eventPhase=o.CAPTURING_PHASE;for(let v=0,b=f.length-1;v<b;v++)if(o.currentTarget=f[v],this.notifyTarget(o,l),o.propagationStopped||o.propagationImmediatelyStopped)return;if(o.eventPhase=o.AT_TARGET,o.currentTarget=o.target,this.notifyTarget(o,l),!(o.propagationStopped||o.propagationImmediatelyStopped)){o.eventPhase=o.BUBBLING_PHASE;for(let v=f.length-2;v>=0;v--)if(o.currentTarget=f[v],this.notifyTarget(o,l),o.propagationStopped||o.propagationImmediatelyStopped)return}}all(o,l,f=this._allInteractiveElements){if(f.length===0)return;o.eventPhase=o.BUBBLING_PHASE;let v=Array.isArray(l)?l:[l];for(let b=f.length-1;b>=0;b--)v.forEach(T=>{o.currentTarget=f[b],this.notifyTarget(o,T)})}propagationPath(o){let l=[o];for(let f=0;f<tu&&o!==this.rootTarget&&o.parent;f++){if(!o.parent)throw new Error("Cannot find propagation path to disconnected target");l.push(o.parent),o=o.parent}return l.reverse(),l}hitTestMoveRecursive(o,l,f,v,b,T=!1){let S=!1;if(this._interactivePrune(o))return null;if((o.eventMode==="dynamic"||l==="dynamic")&&(tl.pauseUpdate=!1),o.interactiveChildren&&o.children){let W=o.children;for(let K=W.length-1;K>=0;K--){let ee=W[K],se=this.hitTestMoveRecursive(ee,this._isInteractive(l)?l:ee.eventMode,f,v,b,T||b(o,f));if(se){if(se.length>0&&!se[se.length-1].parent)continue;let re=o.isInteractive();(se.length>0||re)&&(re&&this._allInteractiveElements.push(o),se.push(o)),this._hitElements.length===0&&(this._hitElements=se),S=!0}}}let R=this._isInteractive(l),U=o.isInteractive();return U&&U&&this._allInteractiveElements.push(o),T||this._hitElements.length>0?null:S?this._hitElements:R&&!b(o,f)&&v(o,f)?U?[o]:[]:null}hitTestRecursive(o,l,f,v,b){if(this._interactivePrune(o)||b(o,f))return null;if((o.eventMode==="dynamic"||l==="dynamic")&&(tl.pauseUpdate=!1),o.interactiveChildren&&o.children){let R=o.children,U=f;for(let W=R.length-1;W>=0;W--){let K=R[W],ee=this.hitTestRecursive(K,this._isInteractive(l)?l:K.eventMode,U,v,b);if(ee){if(ee.length>0&&!ee[ee.length-1].parent)continue;let se=o.isInteractive();return(ee.length>0||se)&&ee.push(o),ee}}}let T=this._isInteractive(l),S=o.isInteractive();return T&&v(o,f)?S?[o]:[]:null}_isInteractive(o){return o==="static"||o==="dynamic"}_interactivePrune(o){return!o||!o.visible||!o.renderable||!o.measurable||o.eventMode==="none"||o.eventMode==="passive"&&!o.interactiveChildren}hitPruneFn(o,l){if(o.hitArea&&(o.worldTransform.applyInverse(l,ru),!o.hitArea.contains(ru.x,ru.y)))return!0;if(o.effects&&o.effects.length)for(let f=0;f<o.effects.length;f++){let v=o.effects[f];if(v.containsPoint&&!v.containsPoint(l,this.hitTestFn))return!0}return!1}hitTestFn(o,l){return o.hitArea?!0:o?.containsPoint?(o.worldTransform.applyInverse(l,ru),o.containsPoint(ru)):!1}notifyTarget(o,l){if(!o.currentTarget.isInteractive())return;l=l??o.type;let f=`on${l}`;o.currentTarget[f]?.(o);let v=o.eventPhase===o.CAPTURING_PHASE||o.eventPhase===o.AT_TARGET?`${l}capture`:l;this._notifyListeners(o,v),o.eventPhase===o.AT_TARGET&&this._notifyListeners(o,l)}mapPointerDown(o){if(!(o instanceof rl)){Gt("EventBoundary cannot map a non-pointer event as a pointer event");return}let l=this.createPointerEvent(o);if(this.dispatchEvent(l,"pointerdown"),l.pointerType==="touch")this.dispatchEvent(l,"touchstart");else if(l.pointerType==="mouse"||l.pointerType==="pen"){let v=l.button===2;this.dispatchEvent(l,v?"rightdown":"mousedown")}let f=this.trackingData(o.pointerId);f.pressTargetsByButton[o.button]=l.composedPath(),this.freeEvent(l)}mapPointerMove(o){if(!(o instanceof rl)){Gt("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;let l=this.createPointerEvent(o);this._isPointerMoveEvent=!1;let f=l.pointerType==="mouse"||l.pointerType==="pen",v=this.trackingData(o.pointerId),b=this.findMountedTarget(v.overTargets);if(v.overTargets?.length>0&&b!==l.target){let R=o.type==="mousemove"?"mouseout":"pointerout",U=this.createPointerEvent(o,R,b);if(this.dispatchEvent(U,"pointerout"),f&&this.dispatchEvent(U,"mouseout"),!l.composedPath().includes(b)){let W=this.createPointerEvent(o,"pointerleave",b);for(W.eventPhase=W.AT_TARGET;W.target&&!l.composedPath().includes(W.target);)W.currentTarget=W.target,this.notifyTarget(W),f&&this.notifyTarget(W,"mouseleave"),W.target=W.target.parent;this.freeEvent(W)}this.freeEvent(U)}if(b!==l.target){let R=o.type==="mousemove"?"mouseover":"pointerover",U=this.clonePointerEvent(l,R);this.dispatchEvent(U,"pointerover"),f&&this.dispatchEvent(U,"mouseover");let W=b?.parent;for(;W&&W!==this.rootTarget.parent&&W!==l.target;)W=W.parent;if(!W||W===this.rootTarget.parent){let K=this.clonePointerEvent(l,"pointerenter");for(K.eventPhase=K.AT_TARGET;K.target&&K.target!==b&&K.target!==this.rootTarget.parent;)K.currentTarget=K.target,this.notifyTarget(K),f&&this.notifyTarget(K,"mouseenter"),K.target=K.target.parent;this.freeEvent(K)}this.freeEvent(U)}let T=[],S=this.enableGlobalMoveEvents??!0;this.moveOnAll?T.push("pointermove"):this.dispatchEvent(l,"pointermove"),S&&T.push("globalpointermove"),l.pointerType==="touch"&&(this.moveOnAll?T.splice(1,0,"touchmove"):this.dispatchEvent(l,"touchmove"),S&&T.push("globaltouchmove")),f&&(this.moveOnAll?T.splice(1,0,"mousemove"):this.dispatchEvent(l,"mousemove"),S&&T.push("globalmousemove"),this.cursor=l.target?.cursor),T.length>0&&this.all(l,T),this._allInteractiveElements.length=0,this._hitElements.length=0,v.overTargets=l.composedPath(),this.freeEvent(l)}mapPointerOver(o){if(!(o instanceof rl)){Gt("EventBoundary cannot map a non-pointer event as a pointer event");return}let l=this.trackingData(o.pointerId),f=this.createPointerEvent(o),v=f.pointerType==="mouse"||f.pointerType==="pen";this.dispatchEvent(f,"pointerover"),v&&this.dispatchEvent(f,"mouseover"),f.pointerType==="mouse"&&(this.cursor=f.target?.cursor);let b=this.clonePointerEvent(f,"pointerenter");for(b.eventPhase=b.AT_TARGET;b.target&&b.target!==this.rootTarget.parent;)b.currentTarget=b.target,this.notifyTarget(b),v&&this.notifyTarget(b,"mouseenter"),b.target=b.target.parent;l.overTargets=f.composedPath(),this.freeEvent(f),this.freeEvent(b)}mapPointerOut(o){if(!(o instanceof rl)){Gt("EventBoundary cannot map a non-pointer event as a pointer event");return}let l=this.trackingData(o.pointerId);if(l.overTargets){let f=o.pointerType==="mouse"||o.pointerType==="pen",v=this.findMountedTarget(l.overTargets),b=this.createPointerEvent(o,"pointerout",v);this.dispatchEvent(b),f&&this.dispatchEvent(b,"mouseout");let T=this.createPointerEvent(o,"pointerleave",v);for(T.eventPhase=T.AT_TARGET;T.target&&T.target!==this.rootTarget.parent;)T.currentTarget=T.target,this.notifyTarget(T),f&&this.notifyTarget(T,"mouseleave"),T.target=T.target.parent;l.overTargets=null,this.freeEvent(b),this.freeEvent(T)}this.cursor=null}mapPointerUp(o){if(!(o instanceof rl)){Gt("EventBoundary cannot map a non-pointer event as a pointer event");return}let l=performance.now(),f=this.createPointerEvent(o);if(this.dispatchEvent(f,"pointerup"),f.pointerType==="touch")this.dispatchEvent(f,"touchend");else if(f.pointerType==="mouse"||f.pointerType==="pen"){let S=f.button===2;this.dispatchEvent(f,S?"rightup":"mouseup")}let v=this.trackingData(o.pointerId),b=this.findMountedTarget(v.pressTargetsByButton[o.button]),T=b;if(b&&!f.composedPath().includes(b)){let S=b;for(;S&&!f.composedPath().includes(S);){if(f.currentTarget=S,this.notifyTarget(f,"pointerupoutside"),f.pointerType==="touch")this.notifyTarget(f,"touchendoutside");else if(f.pointerType==="mouse"||f.pointerType==="pen"){let R=f.button===2;this.notifyTarget(f,R?"rightupoutside":"mouseupoutside")}S=S.parent}delete v.pressTargetsByButton[o.button],T=S}if(T){let S=this.clonePointerEvent(f,"click");S.target=T,S.path=null,v.clicksByButton[o.button]||(v.clicksByButton[o.button]={clickCount:0,target:S.target,timeStamp:l});let R=v.clicksByButton[o.button];if(R.target===S.target&&l-R.timeStamp<200?++R.clickCount:R.clickCount=1,R.target=S.target,R.timeStamp=l,S.detail=R.clickCount,S.pointerType==="mouse"){let U=S.button===2;this.dispatchEvent(S,U?"rightclick":"click")}else S.pointerType==="touch"&&this.dispatchEvent(S,"tap");this.dispatchEvent(S,"pointertap"),this.freeEvent(S)}this.freeEvent(f)}mapPointerUpOutside(o){if(!(o instanceof rl)){Gt("EventBoundary cannot map a non-pointer event as a pointer event");return}let l=this.trackingData(o.pointerId),f=this.findMountedTarget(l.pressTargetsByButton[o.button]),v=this.createPointerEvent(o);if(f){let b=f;for(;b;)v.currentTarget=b,this.notifyTarget(v,"pointerupoutside"),v.pointerType==="touch"?this.notifyTarget(v,"touchendoutside"):(v.pointerType==="mouse"||v.pointerType==="pen")&&this.notifyTarget(v,v.button===2?"rightupoutside":"mouseupoutside"),b=b.parent;delete l.pressTargetsByButton[o.button]}this.freeEvent(v)}mapWheel(o){if(!(o instanceof i0)){Gt("EventBoundary cannot map a non-wheel event as a wheel event");return}let l=this.createWheelEvent(o);this.dispatchEvent(l),this.freeEvent(l)}findMountedTarget(o){if(!o)return null;let l=o[0];for(let f=1;f<o.length&&o[f].parent===l;f++)l=o[f];return l}createPointerEvent(o,l,f){let v=this.allocateEvent(rl);return this.copyPointerData(o,v),this.copyMouseData(o,v),this.copyData(o,v),v.nativeEvent=o.nativeEvent,v.originalEvent=o,v.target=f??this.hitTest(v.global.x,v.global.y)??this._hitElements[0],typeof l=="string"&&(v.type=l),v}createWheelEvent(o){let l=this.allocateEvent(i0);return this.copyWheelData(o,l),this.copyMouseData(o,l),this.copyData(o,l),l.nativeEvent=o.nativeEvent,l.originalEvent=o,l.target=this.hitTest(l.global.x,l.global.y),l}clonePointerEvent(o,l){let f=this.allocateEvent(rl);return f.nativeEvent=o.nativeEvent,f.originalEvent=o.originalEvent,this.copyPointerData(o,f),this.copyMouseData(o,f),this.copyData(o,f),f.target=o.target,f.path=o.composedPath().slice(),f.type=l??f.type,f}copyWheelData(o,l){l.deltaMode=o.deltaMode,l.deltaX=o.deltaX,l.deltaY=o.deltaY,l.deltaZ=o.deltaZ}copyPointerData(o,l){o instanceof rl&&l instanceof rl&&(l.pointerId=o.pointerId,l.width=o.width,l.height=o.height,l.isPrimary=o.isPrimary,l.pointerType=o.pointerType,l.pressure=o.pressure,l.tangentialPressure=o.tangentialPressure,l.tiltX=o.tiltX,l.tiltY=o.tiltY,l.twist=o.twist)}copyMouseData(o,l){o instanceof fp&&l instanceof fp&&(l.altKey=o.altKey,l.button=o.button,l.buttons=o.buttons,l.client.copyFrom(o.client),l.ctrlKey=o.ctrlKey,l.metaKey=o.metaKey,l.movement.copyFrom(o.movement),l.screen.copyFrom(o.screen),l.shiftKey=o.shiftKey,l.global.copyFrom(o.global))}copyData(o,l){l.isTrusted=o.isTrusted,l.srcElement=o.srcElement,l.timeStamp=performance.now(),l.type=o.type,l.detail=o.detail,l.view=o.view,l.which=o.which,l.layer.copyFrom(o.layer),l.page.copyFrom(o.page)}trackingData(o){return this.mappingState.trackingData[o]||(this.mappingState.trackingData[o]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[o]}allocateEvent(o){this.eventPool.has(o)||this.eventPool.set(o,[]);let l=this.eventPool.get(o).pop()||new o(this);return l.eventPhase=l.NONE,l.currentTarget=null,l.defaultPrevented=!1,l.path=null,l.target=null,l}freeEvent(o){if(o.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");let l=o.constructor;this.eventPool.has(l)||this.eventPool.set(l,[]),this.eventPool.get(l).push(o)}_notifyListeners(o,l){let f=o.currentTarget._events[l];if(f)if("fn"in f)f.once&&o.currentTarget.removeListener(l,f.fn,void 0,!0),f.fn.call(f.context,o);else for(let v=0,b=f.length;v<b&&!o.propagationImmediatelyStopped;v++)f[v].once&&o.currentTarget.removeListener(l,f[v].fn,void 0,!0),f[v].fn.call(f[v].context,o)}}}),Fw,Ja,ie,Mr,ve=D(()=>{Ot(),tA(),Yx(),uy(),Pw(),Fw=1,Ja={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},ie=class mte{constructor(l){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=l,this.rootBoundary=new hy(null),tl.init(this),this.autoPreventDefault=!0,this._eventsAdded=!1,this._rootPointerEvent=new rl(null),this._rootWheelEvent=new i0(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...mte.defaultEventFeatures},{set:(f,v,b)=>(v==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=b),f[v]=b,!0)}),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._onPointerUp=this._onPointerUp.bind(this),this._onPointerOverOut=this._onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(l){let{canvas:f,resolution:v}=this.renderer;this.setTargetElement(f),this.resolution=v,mte._defaultEventMode=l.eventMode??"passive",Object.assign(this.features,l.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(l){this.resolution=l}destroy(){this.setTargetElement(null),this.renderer=null,this._currentCursor=null}setCursor(l){l=l||"default";let f=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(f=!1),this._currentCursor===l)return;this._currentCursor=l;let v=this.cursorStyles[l];if(v)switch(typeof v){case"string":f&&(this.domElement.style.cursor=v);break;case"function":v(l);break;case"object":f&&Object.assign(this.domElement.style,v);break}else f&&typeof l=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,l)&&(this.domElement.style.cursor=l)}get pointer(){return this._rootPointerEvent}_onPointerDown(l){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let f=this._normalizeToPointerData(l);this.autoPreventDefault&&f[0].isNormalized&&(l.cancelable||!("cancelable"in l))&&l.preventDefault();for(let v=0,b=f.length;v<b;v++){let T=f[v],S=this._bootstrapEvent(this._rootPointerEvent,T);this.rootBoundary.mapEvent(S)}this.setCursor(this.rootBoundary.cursor)}_onPointerMove(l){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,tl.pointerMoved();let f=this._normalizeToPointerData(l);for(let v=0,b=f.length;v<b;v++){let T=this._bootstrapEvent(this._rootPointerEvent,f[v]);this.rootBoundary.mapEvent(T)}this.setCursor(this.rootBoundary.cursor)}_onPointerUp(l){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let f=l.target;l.composedPath&&l.composedPath().length>0&&(f=l.composedPath()[0]);let v=f!==this.domElement?"outside":"",b=this._normalizeToPointerData(l);for(let T=0,S=b.length;T<S;T++){let R=this._bootstrapEvent(this._rootPointerEvent,b[T]);R.type+=v,this.rootBoundary.mapEvent(R)}this.setCursor(this.rootBoundary.cursor)}_onPointerOverOut(l){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let f=this._normalizeToPointerData(l);for(let v=0,b=f.length;v<b;v++){let T=this._bootstrapEvent(this._rootPointerEvent,f[v]);this.rootBoundary.mapEvent(T)}this.setCursor(this.rootBoundary.cursor)}onWheel(l){if(!this.features.wheel)return;let f=this.normalizeWheelEvent(l);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(f)}setTargetElement(l){this._removeEvents(),this.domElement=l,tl.domElement=l,this._addEvents()}_addEvents(){if(this._eventsAdded||!this.domElement)return;tl.addTickerListener();let l=this.domElement.style;l&&(globalThis.navigator.msPointerEnabled?(l.msContentZooming="none",l.msTouchAction="none"):this.supportsPointerEvents&&(l.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this._onPointerMove,!0),this.domElement.addEventListener("pointerdown",this._onPointerDown,!0),this.domElement.addEventListener("pointerleave",this._onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this._onPointerOverOut,!0),globalThis.addEventListener("pointerup",this._onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this._onPointerMove,!0),this.domElement.addEventListener("mousedown",this._onPointerDown,!0),this.domElement.addEventListener("mouseout",this._onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this._onPointerOverOut,!0),globalThis.addEventListener("mouseup",this._onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this._onPointerDown,!0),this.domElement.addEventListener("touchend",this._onPointerUp,!0),this.domElement.addEventListener("touchmove",this._onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this._eventsAdded=!0}_removeEvents(){if(!this._eventsAdded||!this.domElement)return;tl.removeTickerListener();let l=this.domElement.style;l&&(globalThis.navigator.msPointerEnabled?(l.msContentZooming="",l.msTouchAction=""):this.supportsPointerEvents&&(l.touchAction="")),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this._onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this._onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this._onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this._onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this._onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this._onPointerMove,!0),this.domElement.removeEventListener("mousedown",this._onPointerDown,!0),this.domElement.removeEventListener("mouseout",this._onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this._onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this._onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this._onPointerDown,!0),this.domElement.removeEventListener("touchend",this._onPointerUp,!0),this.domElement.removeEventListener("touchmove",this._onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this._eventsAdded=!1}mapPositionToPoint(l,f,v){let b=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},T=1/this.resolution;l.x=(f-b.left)*(this.domElement.width/b.width)*T,l.y=(v-b.top)*(this.domElement.height/b.height)*T}_normalizeToPointerData(l){let f=[];if(this.supportsTouchEvents&&l instanceof TouchEvent)for(let v=0,b=l.changedTouches.length;v<b;v++){let T=l.changedTouches[v];typeof T.button>"u"&&(T.button=0),typeof T.buttons>"u"&&(T.buttons=1),typeof T.isPrimary>"u"&&(T.isPrimary=l.touches.length===1&&l.type==="touchstart"),typeof T.width>"u"&&(T.width=T.radiusX||1),typeof T.height>"u"&&(T.height=T.radiusY||1),typeof T.tiltX>"u"&&(T.tiltX=0),typeof T.tiltY>"u"&&(T.tiltY=0),typeof T.pointerType>"u"&&(T.pointerType="touch"),typeof T.pointerId>"u"&&(T.pointerId=T.identifier||0),typeof T.pressure>"u"&&(T.pressure=T.force||.5),typeof T.twist>"u"&&(T.twist=0),typeof T.tangentialPressure>"u"&&(T.tangentialPressure=0),typeof T.layerX>"u"&&(T.layerX=T.offsetX=T.clientX),typeof T.layerY>"u"&&(T.layerY=T.offsetY=T.clientY),T.isNormalized=!0,T.type=l.type,f.push(T)}else if(!globalThis.MouseEvent||l instanceof MouseEvent&&(!this.supportsPointerEvents||!(l instanceof globalThis.PointerEvent))){let v=l;typeof v.isPrimary>"u"&&(v.isPrimary=!0),typeof v.width>"u"&&(v.width=1),typeof v.height>"u"&&(v.height=1),typeof v.tiltX>"u"&&(v.tiltX=0),typeof v.tiltY>"u"&&(v.tiltY=0),typeof v.pointerType>"u"&&(v.pointerType="mouse"),typeof v.pointerId>"u"&&(v.pointerId=Fw),typeof v.pressure>"u"&&(v.pressure=.5),typeof v.twist>"u"&&(v.twist=0),typeof v.tangentialPressure>"u"&&(v.tangentialPressure=0),v.isNormalized=!0,f.push(v)}else f.push(l);return f}normalizeWheelEvent(l){let f=this._rootWheelEvent;return this._transferMouseData(f,l),f.deltaX=l.deltaX,f.deltaY=l.deltaY,f.deltaZ=l.deltaZ,f.deltaMode=l.deltaMode,this.mapPositionToPoint(f.screen,l.clientX,l.clientY),f.global.copyFrom(f.screen),f.offset.copyFrom(f.screen),f.nativeEvent=l,f.type=l.type,f}_bootstrapEvent(l,f){return l.originalEvent=null,l.nativeEvent=f,l.pointerId=f.pointerId,l.width=f.width,l.height=f.height,l.isPrimary=f.isPrimary,l.pointerType=f.pointerType,l.pressure=f.pressure,l.tangentialPressure=f.tangentialPressure,l.tiltX=f.tiltX,l.tiltY=f.tiltY,l.twist=f.twist,this._transferMouseData(l,f),this.mapPositionToPoint(l.screen,f.clientX,f.clientY),l.global.copyFrom(l.screen),l.offset.copyFrom(l.screen),l.isTrusted=f.isTrusted,l.type==="pointerleave"&&(l.type="pointerout"),l.type.startsWith("mouse")&&(l.type=l.type.replace("mouse","pointer")),l.type.startsWith("touch")&&(l.type=Ja[l.type]||l.type),l}_transferMouseData(l,f){l.isTrusted=f.isTrusted,l.srcElement=f.srcElement,l.timeStamp=performance.now(),l.type=f.type,l.altKey=f.altKey,l.button=f.button,l.buttons=f.buttons,l.client.x=f.clientX,l.client.y=f.clientY,l.ctrlKey=f.ctrlKey,l.metaKey=f.metaKey,l.movement.x=f.movementX,l.movement.y=f.movementY,l.page.x=f.pageX,l.page.y=f.pageY,l.relatedTarget=null,l.shiftKey=f.shiftKey}},ie.extension={name:"events",type:[Ke.WebGLSystem,Ke.CanvasSystem,Ke.WebGPUSystem],priority:-1},ie.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0},Mr=ie}),Je,vs=D(()=>{ve(),Px(),Je={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,get interactive(){return this.eventMode==="dynamic"||this.eventMode==="static"},set interactive(o){this.eventMode=o?"static":"passive"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??Mr.defaultEventMode},set eventMode(o){this._internalEventMode=o},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(o,l,f){let v=typeof f=="boolean"&&f||typeof f=="object"&&f.capture,b=typeof f=="object"?f.signal:void 0,T=typeof f=="object"?f.once===!0:!1,S=typeof l=="function"?void 0:l;o=v?`${o}capture`:o;let R=typeof l=="function"?l:l.handleEvent,U=this;b&&b.addEventListener("abort",()=>{U.off(o,R,S)}),T?U.once(o,R,S):U.on(o,R,S)},removeEventListener(o,l,f){let v=typeof f=="boolean"&&f||typeof f=="object"&&f.capture,b=typeof l=="function"?void 0:l;o=v?`${o}capture`:o,l=typeof l=="function"?l:l.handleEvent,this.off(o,l,b)},dispatchEvent(o){if(!(o instanceof cg))throw new Error("Container cannot propagate events outside of the Federated Events API");return o.defaultPrevented=!1,o.path=null,o.target=this,o.manager.dispatchEvent(o),!o.defaultPrevented}}}),Ui=D(()=>{Ot(),Ch(),ve(),vs(),Kr.add(Mr),ms.mixin(Je)}),Ro,gp=D(()=>{"use strict";Ro=(o=>(o[o.Low=0]="Low",o[o.Normal=1]="Normal",o[o.High=2]="High",o))(Ro||{})}),Tn,Ys=D(()=>{"use strict";Tn={createCanvas:(o,l)=>{let f=document.createElement("canvas");return f.width=o,f.height=l,f},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(o,l)=>fetch(o,l),parseXML:o=>new DOMParser().parseFromString(o,"text/xml")}}),pl,Ya,Ye=D(()=>{Ys(),pl=Tn,Ya={get(){return pl},set(o){pl=o}}});function lo(o){if(typeof o!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(o)}`)}function _t(o){return o.split("?")[0].split("#")[0]}function $w(o){return o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function zw(o,l,f){return o.replace(new RegExp($w(l),"g"),f)}function Gw(o,l){let f="",v=0,b=-1,T=0,S=-1;for(let R=0;R<=o.length;++R){if(R<o.length)S=o.charCodeAt(R);else{if(S===47)break;S=47}if(S===47){if(!(b===R-1||T===1))if(b!==R-1&&T===2){if(f.length<2||v!==2||f.charCodeAt(f.length-1)!==46||f.charCodeAt(f.length-2)!==46){if(f.length>2){let U=f.lastIndexOf("/");if(U!==f.length-1){U===-1?(f="",v=0):(f=f.slice(0,U),v=f.length-1-f.lastIndexOf("/")),b=R,T=0;continue}}else if(f.length===2||f.length===1){f="",v=0,b=R,T=0;continue}}l&&(f.length>0?f+="/..":f="..",v=2)}else f.length>0?f+=`/${o.slice(b+1,R)}`:f=o.slice(b+1,R),v=R-b-1;b=R,T=0}else S===46&&T!==-1?++T:T=-1}return f}var id,qx=D(()=>{Ye(),id={toPosix(o){return zw(o,"\\","/")},isUrl(o){return/^https?:/.test(this.toPosix(o))},isDataUrl(o){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(o)},isBlobUrl(o){return o.startsWith("blob:")},hasProtocol(o){return/^[^/:]+:/.test(this.toPosix(o))},getProtocol(o){lo(o),o=this.toPosix(o);let l=/^file:\/\/\//.exec(o);if(l)return l[0];let f=/^[^/:]+:\/{0,2}/.exec(o);return f?f[0]:""},toAbsolute(o,l,f){if(lo(o),this.isDataUrl(o)||this.isBlobUrl(o))return o;let v=_t(this.toPosix(l??Ya.get().getBaseUrl())),b=_t(this.toPosix(f??this.rootname(v)));return o=this.toPosix(o),o.startsWith("/")?id.join(b,o.slice(1)):this.isAbsolute(o)?o:this.join(v,o)},normalize(o){if(lo(o),o.length===0)return".";if(this.isDataUrl(o)||this.isBlobUrl(o))return o;o=this.toPosix(o);let l="",f=o.startsWith("/");this.hasProtocol(o)&&(l=this.rootname(o),o=o.slice(l.length));let v=o.endsWith("/");return o=Gw(o,!1),o.length>0&&v&&(o+="/"),f?`/${o}`:l+o},isAbsolute(o){return lo(o),o=this.toPosix(o),this.hasProtocol(o)?!0:o.startsWith("/")},join(...o){if(o.length===0)return".";let l;for(let f=0;f<o.length;++f){let v=o[f];if(lo(v),v.length>0)if(l===void 0)l=v;else{let b=o[f-1]??"";this.joinExtensions.includes(this.extname(b).toLowerCase())?l+=`/../${v}`:l+=`/${v}`}}return l===void 0?".":this.normalize(l)},dirname(o){if(lo(o),o.length===0)return".";o=this.toPosix(o);let l=o.charCodeAt(0),f=l===47,v=-1,b=!0,T=this.getProtocol(o),S=o;o=o.slice(T.length);for(let R=o.length-1;R>=1;--R)if(l=o.charCodeAt(R),l===47){if(!b){v=R;break}}else b=!1;return v===-1?f?"/":this.isUrl(S)?T+o:T:f&&v===1?"//":T+o.slice(0,v)},rootname(o){lo(o),o=this.toPosix(o);let l="";if(o.startsWith("/")?l="/":l=this.getProtocol(o),this.isUrl(o)){let f=o.indexOf("/",l.length);f!==-1?l=o.slice(0,f):l=o,l.endsWith("/")||(l+="/")}return l},basename(o,l){lo(o),l&&lo(l),o=_t(this.toPosix(o));let f=0,v=-1,b=!0,T;if(l!==void 0&&l.length>0&&l.length<=o.length){if(l.length===o.length&&l===o)return"";let S=l.length-1,R=-1;for(T=o.length-1;T>=0;--T){let U=o.charCodeAt(T);if(U===47){if(!b){f=T+1;break}}else R===-1&&(b=!1,R=T+1),S>=0&&(U===l.charCodeAt(S)?--S===-1&&(v=T):(S=-1,v=R))}return f===v?v=R:v===-1&&(v=o.length),o.slice(f,v)}for(T=o.length-1;T>=0;--T)if(o.charCodeAt(T)===47){if(!b){f=T+1;break}}else v===-1&&(b=!1,v=T+1);return v===-1?"":o.slice(f,v)},extname(o){lo(o),o=_t(this.toPosix(o));let l=-1,f=0,v=-1,b=!0,T=0;for(let S=o.length-1;S>=0;--S){let R=o.charCodeAt(S);if(R===47){if(!b){f=S+1;break}continue}v===-1&&(b=!1,v=S+1),R===46?l===-1?l=S:T!==1&&(T=1):l!==-1&&(T=-1)}return l===-1||v===-1||T===0||T===1&&l===v-1&&l===f+1?"":o.slice(l,v)},parse(o){lo(o);let l={root:"",dir:"",base:"",ext:"",name:""};if(o.length===0)return l;o=_t(this.toPosix(o));let f=o.charCodeAt(0),v=this.isAbsolute(o),b,T="";l.root=this.rootname(o),v||this.hasProtocol(o)?b=1:b=0;let S=-1,R=0,U=-1,W=!0,K=o.length-1,ee=0;for(;K>=b;--K){if(f=o.charCodeAt(K),f===47){if(!W){R=K+1;break}continue}U===-1&&(W=!1,U=K+1),f===46?S===-1?S=K:ee!==1&&(ee=1):S!==-1&&(ee=-1)}return S===-1||U===-1||ee===0||ee===1&&S===U-1&&S===R+1?U!==-1&&(R===0&&v?l.base=l.name=o.slice(1,U):l.base=l.name=o.slice(R,U)):(R===0&&v?(l.name=o.slice(1,S),l.base=o.slice(1,U)):(l.name=o.slice(R,S),l.base=o.slice(R,U)),l.ext=o.slice(S,U)),l.dir=this.dirname(o),T&&(l.dir=T+l.dir),l},sep:"/",delimiter:":",joinExtensions:[".html"]}}),nd,cy=D(()=>{"use strict";nd=(o,l,f=!1)=>(Array.isArray(o)||(o=[o]),l?o.map(v=>typeof v=="string"||f?l(v):v):o)});function mg(o,l,f,v,b){let T=l[f];for(let S=0;S<T.length;S++){let R=T[S];f<l.length-1?mg(o.replace(v[f],R),l,f+1,v,b):b.push(o.replace(v[f],R))}}function dy(o){let l=/\{(.*?)\}/g,f=o.match(l),v=[];if(f){let b=[];f.forEach(T=>{let S=T.substring(1,T.length-1).split(",");b.push(S)}),mg(o,b,0,f,v)}else v.push(o);return v}var Xx=D(()=>{"use strict"}),An,Ds=D(()=>{"use strict";An=o=>!Array.isArray(o)});function fl(o){return o.split(".").pop().split("?").shift().split("#").shift()}var Lh,n0=D(()=>{Ar(),qx(),cy(),Xx(),Ds(),Lh=class{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(o,l)=>`${o}${this._bundleIdConnector}${l}`,extractAssetIdFromBundle:(o,l)=>l.replace(`${o}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(o){if(this._bundleIdConnector=o.connector??this._bundleIdConnector,this._createBundleAssetId=o.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=o.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...o){o.forEach(l=>{this._preferredOrder.push(l),l.priority||(l.priority=Object.keys(l.params))}),this._resolverHash={}}set basePath(o){this._basePath=o}get basePath(){return this._basePath}set rootPath(o){this._rootPath=o}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(o){if(typeof o=="string")this._defaultSearchParams=o;else{let l=o;this._defaultSearchParams=Object.keys(l).map(f=>`${encodeURIComponent(f)}=${encodeURIComponent(l[f])}`).join("&")}}getAlias(o){let{alias:l,src:f}=o;return nd(l||f,v=>typeof v=="string"?v:Array.isArray(v)?v.map(b=>b?.src??b):v?.src?v.src:v,!0)}addManifest(o){this._manifest&&Gt("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=o,o.bundles.forEach(l=>{this.addBundle(l.name,l.assets)})}addBundle(o,l){let f=[],v=l;Array.isArray(l)||(v=Object.entries(l).map(([b,T])=>typeof T=="string"||Array.isArray(T)?{alias:b,src:T}:{alias:b,...T})),v.forEach(b=>{let T=b.src,S=b.alias,R;if(typeof S=="string"){let U=this._createBundleAssetId(o,S);f.push(U),R=[S,U]}else{let U=S.map(W=>this._createBundleAssetId(o,W));f.push(...U),R=[...S,...U]}this.add({...b,alias:R,src:T})}),this._bundles[o]=f}add(o){let l=[];Array.isArray(o)?l.push(...o):l.push(o);let f;f=v=>{this.hasKey(v)&&Gt(`[Resolver] already has key: ${v} overwriting`)},nd(l).forEach(v=>{let{src:b}=v,{data:T,format:S,loadParser:R}=v,U=nd(b).map(ee=>typeof ee=="string"?dy(ee):Array.isArray(ee)?ee:[ee]),W=this.getAlias(v);Array.isArray(W)?W.forEach(f):f(W);let K=[];U.forEach(ee=>{ee.forEach(se=>{let re={};if(typeof se!="object"){re.src=se;for(let Me=0;Me<this._parsers.length;Me++){let Ie=this._parsers[Me];if(Ie.test(se)){re=Ie.parse(se);break}}}else T=se.data??T,S=se.format??S,R=se.loadParser??R,re={...re,...se};if(!W)throw new Error(`[Resolver] alias is undefined for this asset: ${re.src}`);re=this._buildResolvedAsset(re,{aliases:W,data:T,format:S,loadParser:R}),K.push(re)})}),W.forEach(ee=>{this._assetMap[ee]=K})})}resolveBundle(o){let l=An(o);o=nd(o);let f={};return o.forEach(v=>{let b=this._bundles[v];if(b){let T=this.resolve(b),S={};for(let R in T){let U=T[R];S[this._extractAssetIdFromBundle(v,R)]=U}f[v]=S}}),l?f[o[0]]:f}resolveUrl(o){let l=this.resolve(o);if(typeof o!="string"){let f={};for(let v in l)f[v]=l[v].src;return f}return l.src}resolve(o){let l=An(o);o=nd(o);let f={};return o.forEach(v=>{if(!this._resolverHash[v])if(this._assetMap[v]){let b=this._assetMap[v],T=this._getPreferredOrder(b);T?.priority.forEach(S=>{T.params[S].forEach(R=>{let U=b.filter(W=>W[S]?W[S]===R:!1);U.length&&(b=U)})}),this._resolverHash[v]=b[0]}else this._resolverHash[v]=this._buildResolvedAsset({alias:[v],src:v},{});f[v]=this._resolverHash[v]}),l?f[o[0]]:f}hasKey(o){return!!this._assetMap[o]}hasBundle(o){return!!this._bundles[o]}_getPreferredOrder(o){for(let l=0;l<o.length;l++){let f=o[0],v=this._preferredOrder.find(b=>b.params.format.includes(f.format));if(v)return v}return this._preferredOrder[0]}_appendDefaultSearchParams(o){if(!this._defaultSearchParams)return o;let l=/\?/.test(o)?"&":"?";return`${o}${l}${this._defaultSearchParams}`}_buildResolvedAsset(o,l){let{aliases:f,data:v,loadParser:b,format:T}=l;return(this._basePath||this._rootPath)&&(o.src=id.toAbsolute(o.src,this._basePath,this._rootPath)),o.alias=f??o.alias??[o.src],o.src=this._appendDefaultSearchParams(o.src),o.data={...v||{},...o.data},o.loadParser=b??o.loadParser,o.format=T??o.format??fl(o.src),o}},Lh.RETINA_PREFIX=/@([0-9\.]+)x/}),yg,py=D(()=>{"use strict";yg=(o,l)=>{let f=l.split("?")[1];return f&&(o+=`?${f}`),o}}),vg,mp,Uw=D(()=>{ye(),os(),vg=class Y8{constructor(l,f){this.linkedSheets=[],this._texture=l instanceof fn?l:null,this.textureSource=l.source,this.textures={},this.animations={},this.data=f;let v=parseFloat(f.meta.scale);v?(this.resolution=v,l.source.resolution=this.resolution):this.resolution=l.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(l=>{this._callback=l,this._batchIndex=0,this._frameKeys.length<=Y8.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(l){let f=l,v=Y8.BATCH_SIZE;for(;f-l<v&&f<this._frameKeys.length;){let b=this._frameKeys[f],T=this._frames[b],S=T.frame;if(S){let R=null,U=null,W=T.trimmed!==!1&&T.sourceSize?T.sourceSize:T.frame,K=new te(0,0,Math.floor(W.w)/this.resolution,Math.floor(W.h)/this.resolution);T.rotated?R=new te(Math.floor(S.x)/this.resolution,Math.floor(S.y)/this.resolution,Math.floor(S.h)/this.resolution,Math.floor(S.w)/this.resolution):R=new te(Math.floor(S.x)/this.resolution,Math.floor(S.y)/this.resolution,Math.floor(S.w)/this.resolution,Math.floor(S.h)/this.resolution),T.trimmed!==!1&&T.spriteSourceSize&&(U=new te(Math.floor(T.spriteSourceSize.x)/this.resolution,Math.floor(T.spriteSourceSize.y)/this.resolution,Math.floor(S.w)/this.resolution,Math.floor(S.h)/this.resolution)),this.textures[b]=new fn({source:this.textureSource,frame:R,orig:K,trim:U,rotate:T.rotated?2:0,defaultAnchor:T.anchor,defaultBorders:T.borders,label:b.toString()})}f++}}_processAnimations(){let l=this.data.animations||{};for(let f in l){this.animations[f]=[];for(let v=0;v<l[f].length;v++){let b=l[f][v];this.animations[f].push(this.textures[b])}}}_parseComplete(){let l=this._callback;this._callback=null,this._batchIndex=0,l.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Y8.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Y8.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(l=!1){for(let f in this.textures)this.textures[f].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,l&&(this._texture?.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}},vg.BATCH_SIZE=1e3,mp=vg});function jw(o,l,f){let v={};if(o.forEach(b=>{v[b]=l}),Object.keys(l.textures).forEach(b=>{v[b]=l.textures[b]}),!f){let b=id.dirname(o[0]);l.linkedSheets.forEach((T,S)=>{let R=jw([`${b}/${l.data.meta.related_multi_packs[S]}`],T,!0);Object.assign(v,R)})}return v}var xg,ku,rA=D(()=>{gp(),n0(),py(),Ot(),os(),qx(),Uw(),xg=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"],ku={extension:Ke.Asset,cache:{test:o=>o instanceof mp,getCacheableAssets:(o,l)=>jw(o,l,!1)},resolver:{extension:{type:Ke.ResolveParser,name:"resolveSpritesheet"},test:o=>{let l=o.split("?")[0].split("."),f=l.pop(),v=l.pop();return f==="json"&&xg.includes(v)},parse:o=>{let l=o.split(".");return{resolution:parseFloat(Lh.RETINA_PREFIX.exec(o)?.[1]??"1"),format:l[l.length-2],src:o}}},loader:{name:"spritesheetLoader",extension:{type:Ke.LoadParser,priority:Ro.Normal,name:"spritesheetLoader"},async testParse(o,l){return id.extname(l.src).toLowerCase()===".json"&&!!o.frames},async parse(o,l,f){let{texture:v,imageFilename:b}=l?.data??{},T=id.dirname(l.src);T&&T.lastIndexOf("/")!==T.length-1&&(T+="/");let S;if(v instanceof fn)S=v;else{let W=yg(T+(b??o.meta.image),l.src);S=(await f.load([W]))[W]}let R=new mp(S.source,o);await R.parse();let U=o?.meta?.related_multi_packs;if(Array.isArray(U)){let W=[];for(let ee of U){if(typeof ee!="string")continue;let se=T+ee;l.data?.ignoreMultiPack||(se=yg(se,l.src),W.push(f.load({src:se,data:{ignoreMultiPack:!0}})))}let K=await Promise.all(W);R.linkedSheets=K,K.forEach(ee=>{ee.linkedSheets=[R].concat(R.linkedSheets.filter(se=>se!==ee))})}return R},async unload(o,l,f){await f.unload(o.textureSource._sourceOrigin),o.destroy(!1)}}}}),Kx=D(()=>{Ot(),rA(),Kr.add(ku)});function fy(o,l,f,v){let{width:b,height:T}=f.orig,S=f.trim;if(S){let R=S.width,U=S.height;o.minX=S.x-l._x*b-v,o.maxX=o.minX+R,o.minY=S.y-l._y*T-v,o.maxY=o.minY+U}else o.minX=-l._x*b-v,o.maxX=o.minX+b,o.minY=-l._y*T-v,o.maxY=o.minY+T}var Zx=D(()=>{"use strict"}),gy,bg=D(()=>{$e(),Ch(),gy=class extends ms{constructor(){super(...arguments),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=0,this._lastInstructionTick=-1,this._bounds=new Re(0,1,0,0),this._boundsDirty=!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(o){this._roundPixels=o?1:0}containsPoint(o){let l=this.bounds,{x:f,y:v}=o;return f>=l.minX&&f<=l.maxX&&v>=l.minY&&v<=l.maxY}onViewUpdate(){if(this._didViewChangeTick++,this.didViewUpdate)return;this.didViewUpdate=!0;let o=this.renderGroup||this.parentRenderGroup;o&&o.onChildViewUpdate(this)}destroy(o){super.destroy(o),this._bounds=null}}}),Do,Qx=D(()=>{Rs(),os(),Zx(),bg(),Do=class yte extends gy{constructor(l=fn.EMPTY){l instanceof fn&&(l={texture:l});let{texture:f=fn.EMPTY,anchor:v,roundPixels:b,width:T,height:S,...R}=l;super({label:"Sprite",...R}),this.renderPipeId="sprite",this.batched=!0,this._sourceBounds={minX:0,maxX:1,minY:0,maxY:0},this._sourceBoundsDirty=!0,this._anchor=new Qa({_onUpdate:()=>{this.onViewUpdate()}}),v?this.anchor=v:f.defaultAnchor&&(this.anchor=f.defaultAnchor),this.texture=f,this.allowChildren=!1,this.roundPixels=b??!1,T!==void 0&&(this.width=T),S!==void 0&&(this.height=S)}static from(l,f=!1){return l instanceof fn?new yte(l):new yte(fn.from(l,f))}set texture(l){l||(l=fn.EMPTY);let f=this._texture;f!==l&&(f&&f.dynamic&&f.off("update",this.onViewUpdate,this),l.dynamic&&l.on("update",this.onViewUpdate,this),this._texture=l,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get sourceBounds(){return this._sourceBoundsDirty&&(this._updateSourceBounds(),this._sourceBoundsDirty=!1),this._sourceBounds}containsPoint(l){let f=this.sourceBounds;return l.x>=f.maxX&&l.x<=f.minX&&l.y>=f.maxY&&l.y<=f.minY}onViewUpdate(){this._sourceBoundsDirty=this._boundsDirty=!0,super.onViewUpdate()}updateBounds(){fy(this._bounds,this._anchor,this._texture,0)}_updateSourceBounds(){let l=this._anchor,f=this._texture,v=this._sourceBounds,{width:b,height:T}=f.orig;v.maxX=-l._x*b,v.minX=v.maxX+b,v.maxY=-l._y*T,v.minY=v.maxY+T}destroy(l=!1){if(super.destroy(l),typeof l=="boolean"?l:l?.texture){let f=typeof l=="boolean"?l:l?.textureSource;this._texture.destroy(f)}this._texture=null,this._bounds=null,this._sourceBounds=null,this._anchor=null}get anchor(){return this._anchor}set anchor(l){typeof l=="number"?this._anchor.set(l):this._anchor.copyFrom(l)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(l){this._setWidth(l,this._texture.orig.width),this._width=l}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(l){this._setHeight(l,this._texture.orig.height),this._height=l}getSize(l){return l||(l={}),l.width=Math.abs(this.scale.x)*this._texture.orig.width,l.height=Math.abs(this.scale.y)*this._texture.orig.height,l}setSize(l,f){typeof l=="object"?(f=l.height??l.width,l=l.width):f??(f=l),l!==void 0&&this._setWidth(l,this._texture.orig.width),f!==void 0&&this._setHeight(f,this._texture.orig.height)}}});function Hw(o,l,f){let v=Vw;o.measurable=!0,De(o,f,v),l.addBoundsMask(v),o.measurable=!1}var Vw,Jx=D(()=>{$e(),ht(),Vw=new Re});function Ww(o,l,f){let v=Ct.get();o.measurable=!0;let b=tt.get().identity(),T=Yw(o,f,b);pn(o,v,T),o.measurable=!1,l.addBoundsMask(v),tt.return(b),Ct.return(v)}function Yw(o,l,f){return o?(o!==l&&(Yw(o.parent,l,f),o.updateLocalTransform(),f.append(o.localTransform)),f):(Gt("Mask bounds, renderable is not inside the root container"),f)}var qw=D(()=>{Qr(),ge(),Ar()}),eb,my=D(()=>{Ot(),Qx(),Jx(),qw(),eb=class{constructor(o){this.priority=0,this.inverse=!1,this.pipe="alphaMask",o?.mask&&this.init(o.mask)}init(o){this.mask=o,this.renderMaskToTexture=!(o instanceof Do),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask=null}addBounds(o,l){this.inverse||Hw(this.mask,o,l)}addLocalBounds(o,l){Ww(this.mask,o,l)}containsPoint(o,l){let f=this.mask;return l(f,o)}destroy(){this.reset()}static test(o){return o instanceof Do}},eb.extension=Ke.MaskEffect}),yy,Xw=D(()=>{Ot(),yy=class{constructor(o){this.priority=0,this.pipe="colorMask",o?.mask&&this.init(o.mask)}init(o){this.mask=o}destroy(){}static test(o){return typeof o=="number"}},yy.extension=Ke.MaskEffect}),tb,Bt=D(()=>{Ot(),Ch(),Jx(),qw(),tb=class{constructor(o){this.priority=0,this.pipe="stencilMask",o?.mask&&this.init(o.mask)}init(o){this.mask=o,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null}addBounds(o,l){Hw(this.mask,o,l)}addLocalBounds(o,l){Ww(this.mask,o,l)}containsPoint(o,l){let f=this.mask;return l(f,o)}destroy(){this.reset()}static test(o){return o instanceof ms}},tb.extension=Ke.MaskEffect}),Ra,eh=D(()=>{Ye(),Ot(),xo(),Ra=class extends Ha{constructor(o){o.resource||(o.resource=Ya.get().createCanvas()),o.width||(o.width=o.resource.width,o.autoDensity||(o.width/=o.resolution)),o.height||(o.height=o.resource.height,o.autoDensity||(o.height/=o.resolution)),super(o),this.uploadMethodId="image",this.autoDensity=o.autoDensity,this.resizeCanvas(),this.transparent=!!o.transparent}resizeCanvas(){this.autoDensity&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(o=this.width,l=this.height,f=this._resolution){let v=super.resize(o,l,f);return v&&this.resizeCanvas(),v}static test(o){return globalThis.HTMLCanvasElement&&o instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&o instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}},Ra.extension=Ke.TextureSource}),iu,rb=D(()=>{Ye(),Ot(),Ar(),xo(),iu=class extends Ha{constructor(o){if(o.resource&&globalThis.HTMLImageElement&&o.resource instanceof HTMLImageElement){let l=Ya.get().createCanvas(o.resource.width,o.resource.height);l.getContext("2d").drawImage(o.resource,0,0,o.resource.width,o.resource.height),o.resource=l,Gt("ImageSource: Image element passed, converting to canvas. Use CanvasSource instead.")}super(o),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(o){return globalThis.HTMLImageElement&&o instanceof HTMLImageElement||typeof ImageBitmap<"u"&&o instanceof ImageBitmap||globalThis.VideoFrame&&o instanceof VideoFrame}},iu.extension=Ke.TextureSource});async function iA(){return vy??(vy=(async()=>{let o=document.createElement("canvas").getContext("webgl");if(!o)return"premultiply-alpha-on-upload";let l=await new Promise(T=>{let S=document.createElement("video");S.onloadeddata=()=>T(S),S.onerror=()=>T(null),S.autoplay=!1,S.crossOrigin="anonymous",S.preload="auto",S.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",S.load()});if(!l)return"premultiply-alpha-on-upload";let f=o.createTexture();o.bindTexture(o.TEXTURE_2D,f);let v=o.createFramebuffer();o.bindFramebuffer(o.FRAMEBUFFER,v),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,f,0),o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),o.pixelStorei(o.UNPACK_COLORSPACE_CONVERSION_WEBGL,o.NONE),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,l);let b=new Uint8Array(4);return o.readPixels(0,0,1,1,o.RGBA,o.UNSIGNED_BYTE,b),o.deleteFramebuffer(v),o.deleteTexture(f),o.getExtension("WEBGL_lose_context")?.loseContext(),b[0]<=b[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),vy}var vy,xy=D(()=>{"use strict"}),ad,_g,js=D(()=>{Ot(),pp(),xy(),xo(),ad=class ANe extends Ha{constructor(l){super(l),this.isReady=!1,this.uploadMethodId="video",l={...ANe.defaultOptions,...l},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=l.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=l.autoPlay!==!1,this.alphaMode=l.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),l.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){let l=wu.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-l)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;let l=this.resource,f=this.options;return(l.readyState===l.HAVE_ENOUGH_DATA||l.readyState===l.HAVE_FUTURE_DATA)&&l.width&&l.height&&(l.complete=!0),l.addEventListener("play",this._onPlayStart),l.addEventListener("pause",this._onPlayStop),l.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(f.preload||l.addEventListener("canplay",this._onCanPlay),l.addEventListener("canplaythrough",this._onCanPlayThrough),l.addEventListener("error",this._onError,!0)),this.alphaMode=await iA(),this._load=new Promise((v,b)=>{this.isValid?v(this):(this._resolve=v,this._reject=b,f.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${f.preloadTimeoutMs}ms`))})),l.load())}),this._load}_onError(l){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",l),this._reject&&(this._reject(l),this._reject=null,this._resolve=null)}_isSourcePlaying(){let l=this.resource;return!l.paused&&!l.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){let l=this.resource;this.isValid&&(this.isReady=!0,this.resize(l.videoWidth,l.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();let l=this.resource;l&&(l.removeEventListener("play",this._onPlayStart),l.removeEventListener("pause",this._onPlayStop),l.removeEventListener("seeked",this._onSeeked),l.removeEventListener("canplay",this._onCanPlay),l.removeEventListener("canplaythrough",this._onCanPlayThrough),l.removeEventListener("error",this._onError,!0),l.pause(),l.src="",l.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(l){l!==this._autoUpdate&&(this._autoUpdate=l,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(l){l!==this._updateFPS&&(this._updateFPS=l,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(wu.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(wu.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(wu.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(l){return globalThis.HTMLVideoElement&&l instanceof HTMLVideoElement}},ad.extension=Ke.TextureSource,ad.defaultOptions={...Ha.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1},ad.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},_g=ad}),Rh,Io,by=D(()=>{Ar(),cy(),Rh=class{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(o){return this._cache.has(o)}get(o){let l=this._cache.get(o);return l||Gt(`[Assets] Asset id ${o} was not found in the Cache`),l}set(o,l){let f=nd(o),v;for(let R=0;R<this.parsers.length;R++){let U=this.parsers[R];if(U.test(l)){v=U.getCacheableAssets(f,l);break}}let b=new Map(Object.entries(v||{}));v||f.forEach(R=>{b.set(R,l)});let T=[...b.keys()],S={cacheKeys:T,keys:f};f.forEach(R=>{this._cacheMap.set(R,S)}),T.forEach(R=>{let U=v?v[R]:l;this._cache.has(R)&&this._cache.get(R)!==U&&Gt("[Cache] already has key:",R),this._cache.set(R,b.get(R))})}remove(o){if(!this._cacheMap.has(o)){Gt(`[Assets] Asset id ${o} was not found in the Cache`);return}let l=this._cacheMap.get(o);l.cacheKeys.forEach(f=>{this._cache.delete(f)}),l.keys.forEach(f=>{this._cacheMap.delete(f)})}get parsers(){return this._parsers}},Io=new Rh});function Kw(o={}){let l=o&&o.resource,f=l?o.resource:o,v=l?o:{resource:o};for(let b=0;b<wg.length;b++){let T=wg[b];if(T.test(f))return new T(v)}throw new Error(`Could not find a source type for resource: ${v.resource}`)}function nA(o={},l=!1){let f=o&&o.resource,v=f?o.resource:o,b=f?o:{resource:o};if(!l&&Io.has(v))return Io.get(v);let T=new fn({source:Kw(b)});return T.on("destroy",()=>{Io.has(v)&&Io.remove(v)}),l||Io.set(v,T),T}function uo(o,l=!1){return typeof o=="string"?Io.get(o):o instanceof Ha?new fn({source:o}):nA(o,l)}var wg,ib=D(()=>{by(),Ot(),xo(),os(),wg=[],Kr.handleByList(Ke.TextureSource,wg),fn.from=uo,Ha.from=Kw}),nb=D(()=>{Ot(),my(),Xw(),Bt(),Tw(),eh(),rb(),js(),ib(),Kr.add(eb,yy,tb,_g,iu,Ra,lp)}),Tu,th=D(()=>{"use strict";Tu=class{constructor(o){this.resources=Object.create(null),this._dirty=!0;let l=0;for(let f in o){let v=o[f];this.setResource(v,l++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;let o=[],l=0;for(let f in this.resources)o[l++]=this.resources[f]._resourceId;this._key=o.join("|")}setResource(o,l){let f=this.resources[l];o!==f&&(f&&o.off?.("change",this.onResourceChange,this),o.on?.("change",this.onResourceChange,this),this.resources[l]=o,this._dirty=!0)}getResource(o){return this.resources[o]}_touch(o){let l=this.resources;for(let f in l)l[f]._touched=o}destroy(){let o=this.resources;for(let l in o)o[l].off?.("change",this.onResourceChange,this);this.resources=null}onResourceChange(o){if(this._dirty=!0,o.destroyed){let l=this.resources;for(let f in l)l[f]===o&&(l[f]=null)}else this._updateKey()}}});function wa(){return(!gl||gl?.isContextLost())&&(gl=Ya.get().createCanvas().getContext("webgl",{})),gl}var gl,yp=D(()=>{Ye()});function aA(o){let l="";for(let f=0;f<o;++f)f>0&&(l+=`
else `),f<o-1&&(l+=`if(test == ${f}.0){}`);return l}function Hr(o,l){if(o===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");let f=l.createShader(l.FRAGMENT_SHADER);try{for(;;){let v=nu.replace(/%forloop%/gi,aA(o));if(l.shaderSource(f,v),l.compileShader(f),!l.getShaderParameter(f,l.COMPILE_STATUS))o=o/2|0;else break}}finally{l.deleteShader(f)}return o}var nu,ab=D(()=>{"use strict";nu=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`)});function sd(){if(qs)return qs;let o=wa();return qs=o.getParameter(o.MAX_TEXTURE_IMAGE_UNITS),qs=Hr(qs,o),o.getExtension("WEBGL_lose_context")?.loseContext(),qs}var qs,au=D(()=>{yp(),ab(),qs=null});function Va(o,l){let f=2166136261;for(let v=0;v<l;v++)f^=o[v].uid,f=Math.imul(f,16777619),f>>>=0;return _y[f]||Zw(o,l,f)}function Zw(o,l,f){let v={},b=0;wy||(wy=sd());for(let S=0;S<wy;S++){let R=S<l?o[S]:fn.EMPTY.source;v[b++]=R.source,v[b++]=R.style}let T=new Tu(v);return _y[f]=T,T}var _y,wy,sb=D(()=>{th(),os(),au(),_y={},wy=0}),a0,Qw=D(()=>{"use strict";a0=class{constructor(o){typeof o=="number"?this.rawBinaryData=new ArrayBuffer(o):o instanceof Uint8Array?this.rawBinaryData=o.buffer:this.rawBinaryData=o,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(o){return this[`${o}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this.uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(o){switch(o){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${o} isn't a valid view type`)}}}});function ob(o,l){let f=o.byteLength/8|0,v=new Float64Array(o,0,f);new Float64Array(l,0,f).set(v);let b=o.byteLength-f*8;if(b>0){let T=new Uint8Array(o,f*8,b);new Uint8Array(l,f*8,b).set(T)}}var Jw=D(()=>{"use strict"}),e6,Is,zl=D(()=>{"use strict";e6={normal:"normal-npm",add:"add-npm",screen:"screen-npm"},Is=(o=>(o[o.DISABLED=0]="DISABLED",o[o.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",o[o.MASK_ACTIVE=2]="MASK_ACTIVE",o[o.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",o[o.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",o[o.NONE=5]="NONE",o))(Is||{})});function s0(o,l){return l.alphaMode==="no-premultiply-alpha"&&e6[o]||o}var kg=D(()=>{zl()}),t6,ky=D(()=>{"use strict";t6=class{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let o=0;o<this.count;o++){let l=this.textures[o];this.textures[o]=null,this.ids[l.uid]=null}this.count=0}}});function r6(){return Eg>0?Ty[--Eg]:new i6}function Tg(o){Ty[Eg++]=o}var i6,Ty,Eg,vp,Ey,lb,ub=D(()=>{hs(),Qw(),Jw(),kg(),au(),ky(),i6=class{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new t6,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}},Ty=[],Eg=0,vp=0,Ey=class nF{constructor(l={}){this.uid=Ma("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],nF.defaultOptions.maxTextures=nF.defaultOptions.maxTextures??sd(),l={...nF.defaultOptions,...l};let{maxTextures:f,attributesInitialSize:v,indicesInitialSize:b}=l;this.attributeBuffer=new a0(v*4),this.indexBuffer=new Uint16Array(b),this.maxTextures=f}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let l=0;l<this.batchIndex;l++)Tg(this.batches[l]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(l){this._elements[this.elementSize++]=l,l._indexStart=this.indexSize,l._attributeStart=this.attributeSize,l._batcher=this,this.indexSize+=l.indexSize,this.attributeSize+=l.attributeSize*this.vertexSize}checkAndUpdateTexture(l,f){let v=l._batch.textures.ids[f._source.uid];return!v&&v!==0?!1:(l._textureId=v,l.texture=f,!0)}updateElement(l){this.dirty=!0;let f=this.attributeBuffer;l.packAsQuad?this.packQuadAttributes(l,f.float32View,f.uint32View,l._attributeStart,l._textureId):this.packAttributes(l,f.float32View,f.uint32View,l._attributeStart,l._textureId)}break(l){let f=this._elements;if(!f[this.elementStart])return;let v=r6(),b=v.textures;b.clear();let T=f[this.elementStart],S=s0(T.blendMode,T.texture._source),R=T.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);let U=this.attributeBuffer.float32View,W=this.attributeBuffer.uint32View,K=this.indexBuffer,ee=this._batchIndexSize,se=this._batchIndexStart,re="startBatch",Me=this.maxTextures;for(let Ie=this.elementStart;Ie<this.elementSize;++Ie){let Ee=f[Ie];f[Ie]=null;let Oe=Ee.texture._source,et=s0(Ee.blendMode,Oe),kt=S!==et||R!==Ee.topology;if(Oe._batchTick===vp&&!kt){Ee._textureId=Oe._textureBindLocation,ee+=Ee.indexSize,Ee.packAsQuad?(this.packQuadAttributes(Ee,U,W,Ee._attributeStart,Ee._textureId),this.packQuadIndex(K,Ee._indexStart,Ee._attributeStart/this.vertexSize)):(this.packAttributes(Ee,U,W,Ee._attributeStart,Ee._textureId),this.packIndex(Ee,K,Ee._indexStart,Ee._attributeStart/this.vertexSize)),Ee._batch=v;continue}Oe._batchTick=vp,(b.count>=Me||kt)&&(this._finishBatch(v,se,ee-se,b,S,R,l,re),re="renderBatch",se=ee,S=et,R=Ee.topology,v=r6(),b=v.textures,b.clear(),++vp),Ee._textureId=Oe._textureBindLocation=b.count,b.ids[Oe.uid]=b.count,b.textures[b.count++]=Oe,Ee._batch=v,ee+=Ee.indexSize,Ee.packAsQuad?(this.packQuadAttributes(Ee,U,W,Ee._attributeStart,Ee._textureId),this.packQuadIndex(K,Ee._indexStart,Ee._attributeStart/this.vertexSize)):(this.packAttributes(Ee,U,W,Ee._attributeStart,Ee._textureId),this.packIndex(Ee,K,Ee._indexStart,Ee._attributeStart/this.vertexSize))}b.count>0&&(this._finishBatch(v,se,ee-se,b,S,R,l,re),se=ee,++vp),this.elementStart=this.elementSize,this._batchIndexStart=se,this._batchIndexSize=ee}_finishBatch(l,f,v,b,T,S,R,U){l.gpuBindGroup=null,l.bindGroup=null,l.action=U,l.batcher=this,l.textures=b,l.blendMode=T,l.topology=S,l.start=f,l.size=v,++vp,this.batches[this.batchIndex++]=l,R.add(l)}finish(l){this.break(l)}ensureAttributeBuffer(l){l*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(l*4)}ensureIndexBuffer(l){l<=this.indexBuffer.length||this._resizeIndexBuffer(l)}_resizeAttributeBuffer(l){let f=Math.max(l,this.attributeBuffer.size*2),v=new a0(f);ob(this.attributeBuffer.rawBinaryData,v.rawBinaryData),this.attributeBuffer=v}_resizeIndexBuffer(l){let f=this.indexBuffer,v=Math.max(l,f.length*1.5);v+=v%2;let b=v>65535?new Uint32Array(v):new Uint16Array(v);if(b.BYTES_PER_ELEMENT!==f.BYTES_PER_ELEMENT)for(let T=0;T<f.length;T++)b[T]=f[T];else ob(f.buffer,b.buffer);this.indexBuffer=b}packQuadIndex(l,f,v){l[f]=v+0,l[f+1]=v+1,l[f+2]=v+2,l[f+3]=v+0,l[f+4]=v+2,l[f+5]=v+3}packIndex(l,f,v,b){let T=l.indices,S=l.indexSize,R=l.indexOffset,U=l.attributeOffset;for(let W=0;W<S;W++)f[v++]=b+T[W+R]-U}destroy(){for(let l=0;l<this.batches.length;l++)Tg(this.batches[l]);this.batches=null;for(let l=0;l<this._elements.length;l++)this._elements[l]._batch=null;this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}},Ey.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6},lb=Ey}),pa,od=D(()=>{"use strict";pa=(o=>(o[o.MAP_READ=1]="MAP_READ",o[o.MAP_WRITE=2]="MAP_WRITE",o[o.COPY_SRC=4]="COPY_SRC",o[o.COPY_DST=8]="COPY_DST",o[o.INDEX=16]="INDEX",o[o.VERTEX=32]="VERTEX",o[o.UNIFORM=64]="UNIFORM",o[o.STORAGE=128]="STORAGE",o[o.INDIRECT=256]="INDIRECT",o[o.QUERY_RESOLVE=512]="QUERY_RESOLVE",o[o.STATIC=1024]="STATIC",o))(pa||{})}),ml,rh=D(()=>{Ir(),hs(),od(),ml=class extends jr{constructor(o){let{data:l,size:f}=o,{usage:v,label:b,shrinkToFit:T}=o;super(),this.uid=Ma("buffer"),this._resourceType="buffer",this._resourceId=Ma("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,l instanceof Array&&(l=new Float32Array(l)),this._data=l,f=f??l?.byteLength;let S=!!l;this.descriptor={size:f,usage:v,mappedAtCreation:S,label:b},this.shrinkToFit=T??!0}get data(){return this._data}set data(o){this.setDataWithSize(o,o.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&pa.STATIC)}set static(o){o?this.descriptor.usage|=pa.STATIC:this.descriptor.usage&=~pa.STATIC}setDataWithSize(o,l,f){if(this._updateID++,this._updateSize=l*o.BYTES_PER_ELEMENT,this._data===o){f&&this.emit("update",this);return}let v=this._data;if(this._data=o,this._dataInt32=null,!v||v.length!==o.length){!this.shrinkToFit&&v&&o.byteLength<v.byteLength?f&&this.emit("update",this):(this.descriptor.size=o.byteLength,this._resourceId=Ma("resource"),this.emit("change",this));return}f&&this.emit("update",this)}update(o){this._updateSize=o??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}});function Cy(o,l){if(!(o instanceof ml)){let f=l?pa.INDEX:pa.VERTEX;o instanceof Array&&(l?(o=new Uint32Array(o),f=pa.INDEX|pa.COPY_DST):(o=new Float32Array(o),f=pa.VERTEX|pa.COPY_DST)),o=new ml({data:o,label:l?"index-mesh-buffer":"vertex-mesh-buffer",usage:f})}return o}var n6=D(()=>{rh(),od()});function sA(o,l,f){let v=o.getAttribute(l);if(!v)return f.minX=0,f.minY=0,f.maxX=0,f.maxY=0,f;let b=v.buffer.data,T=1/0,S=1/0,R=-1/0,U=-1/0,W=b.BYTES_PER_ELEMENT,K=(v.offset||0)/W,ee=(v.stride||2*4)/W;for(let se=K;se<b.length;se+=ee){let re=b[se],Me=b[se+1];re>R&&(R=re),Me>U&&(U=Me),re<T&&(T=re),Me<S&&(S=Me)}return f.minX=T,f.minY=S,f.maxX=R,f.maxY=U,f}var oA=D(()=>{"use strict"});function a6(o){return(o instanceof ml||Array.isArray(o)||o.BYTES_PER_ELEMENT)&&(o={buffer:o}),o.buffer=Cy(o.buffer,!1),o}var ld,o0=D(()=>{Ir(),$e(),hs(),rh(),n6(),oA(),ld=class extends jr{constructor(o={}){super(),this.uid=Ma("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new Re,this._boundsDirty=!0;let{attributes:l,indexBuffer:f,topology:v}=o;if(this.buffers=[],this.attributes={},l)for(let b in l)this.addAttribute(b,l[b]);this.instanceCount=o.instanceCount??1,f&&this.addIndex(f),this.topology=v||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(o){return this.attributes[o]}getIndex(){return this.indexBuffer}getBuffer(o){return this.getAttribute(o).buffer}getSize(){for(let o in this.attributes){let l=this.attributes[o];return l.buffer.data.length/(l.stride/4||l.size)}return 0}addAttribute(o,l){let f=a6(l);this.buffers.indexOf(f.buffer)===-1&&(this.buffers.push(f.buffer),f.buffer.on("update",this.onBufferUpdate,this),f.buffer.on("change",this.onBufferUpdate,this)),this.attributes[o]=f}addIndex(o){this.indexBuffer=Cy(o,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,sA(this,"aPosition",this._bounds)):this._bounds}destroy(o=!1){this.emit("destroy",this),this.removeAllListeners(),o&&this.buffers.forEach(l=>l.destroy()),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}}),Sy,Cg,s6,lA=D(()=>{rh(),od(),o0(),Sy=new Float32Array(1),Cg=new Uint32Array(1),s6=class extends ld{constructor(){let o=new ml({data:Sy,label:"attribute-batch-buffer",usage:pa.VERTEX|pa.COPY_DST,shrinkToFit:!1}),l=new ml({data:Cg,label:"index-batch-buffer",usage:pa.INDEX|pa.COPY_DST,shrinkToFit:!1}),f=6*4;super({attributes:{aPosition:{buffer:o,format:"float32x2",stride:f,offset:0},aUV:{buffer:o,format:"float32x2",stride:f,offset:2*4},aColor:{buffer:o,format:"unorm8x4",stride:f,offset:4*4},aTextureIdAndRound:{buffer:o,format:"uint16x2",stride:f,offset:5*4}},indexBuffer:l})}}});function xp(o,l){let f=Sg[o];return f===void 0&&(bp[l]===void 0&&(bp[l]=1),Sg[o]=f=bp[l]++),f}var bp,Sg,_p=D(()=>{"use strict";bp=Object.create(null),Sg=Object.create(null)});function uA(){if(!Ag){Ag="mediump";let o=wa();o&&o.getShaderPrecisionFormat&&(Ag=o.getShaderPrecisionFormat(o.FRAGMENT_SHADER,o.HIGH_FLOAT).precision?"highp":"mediump")}return Ag}var Ag,hA=D(()=>{yp()});function o6(o,l,f){return l?o:f?(o=o.replace("out vec4 finalColor;",""),`
        
        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${o}
        `):`
        
        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${o}
        `}var Mg=D(()=>{"use strict"});function cA(o,l,f){let v=f?l.maxSupportedFragmentPrecision:l.maxSupportedVertexPrecision;if(o.substring(0,9)!=="precision"){let b=f?l.requestedFragmentPrecision:l.requestedVertexPrecision;return b==="highp"&&v!=="highp"&&(b="mediump"),`precision ${b} float;
${o}`}else if(v!=="highp"&&o.substring(0,15)==="precision highp")return o.replace("precision highp","precision mediump");return o}var dA=D(()=>{"use strict"});function pA(o,l){return l?`#version 300 es
${o}`:o}var l6=D(()=>{"use strict"});function fA(o,{name:l="pixi-program"},f=!0){l=l.replace(/\s+/g,"-"),l+=f?"-fragment":"-vertex";let v=f?hb:cb;return v[l]?(v[l]++,l+=`-${v[l]}`):v[l]=1,o.indexOf("#define SHADER_NAME")!==-1?o:`${`#define SHADER_NAME ${l}`}
${o}`}var hb,cb,gA=D(()=>{"use strict";hb={},cb={}});function vc(o,l){return l?o.replace("#version 300 es",""):o}var u6=D(()=>{"use strict"}),Ay,wp,Lg,ud,l0=D(()=>{_p(),hA(),Mg(),dA(),l6(),gA(),u6(),Ay={stripVersion:vc,ensurePrecision:cA,addProgramDefines:o6,setProgramName:fA,insertVersion:pA},wp=Object.create(null),Lg=class vte{constructor(l){l={...vte.defaultOptions,...l};let f=l.fragment.indexOf("#version 300 es")!==-1,v={stripVersion:f,ensurePrecision:{requestedFragmentPrecision:l.preferredFragmentPrecision,requestedVertexPrecision:l.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:uA()},setProgramName:{name:l.name},addProgramDefines:f,insertVersion:f},b=l.fragment,T=l.vertex;Object.keys(Ay).forEach(S=>{let R=v[S];b=Ay[S](b,R,!0),T=Ay[S](T,R,!1)}),this.fragment=b,this.vertex=T,this.transformFeedbackVaryings=l.transformFeedbackVaryings,this._key=xp(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null}static from(l){let f=`${l.vertex}:${l.fragment}`;return wp[f]||(wp[f]=new vte(l)),wp[f]}},Lg.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"},ud=Lg});function ih(o){return Eu[o]??Eu.float32}var Eu,kp=D(()=>{"use strict";Eu={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}}});function Dh({source:o,entryPoint:l}){let f={},v=o.indexOf(`fn ${l}`);if(v!==-1){let b=o.indexOf("->",v);if(b!==-1){let T=o.substring(v,b),S=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g,R;for(;(R=S.exec(T))!==null;){let U=db[R[3]]??"float32";f[R[2]]={location:parseInt(R[1],10),format:U,stride:ih(U).stride,offset:0,instance:!1,start:0}}}}return f}var db,h6=D(()=>{kp(),db={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"}});function My(o){let l=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,f=/@group\((\d+)\)/,v=/@binding\((\d+)\)/,b=/var(<[^>]+>)? (\w+)/,T=/:\s*(\w+)/,S=/struct\s+(\w+)\s*{([^}]+)}/g,R=/(\w+)\s*:\s*([\w\<\>]+)/g,U=/struct\s+(\w+)/,W=o.match(l)?.map(ee=>({group:parseInt(ee.match(f)[1],10),binding:parseInt(ee.match(v)[1],10),name:ee.match(b)[2],isUniform:ee.match(b)[1]==="<uniform>",type:ee.match(T)[1]}));if(!W)return{groups:[],structs:[]};let K=o.match(S)?.map(ee=>{let se=ee.match(U)[1],re=ee.match(R).reduce((Me,Ie)=>{let[Ee,Oe]=Ie.split(":");return Me[Ee.trim()]=Oe.trim(),Me},{});return re?{name:se,members:re}:null}).filter(({name:ee})=>W.some(se=>se.type===ee))??[];return{groups:W,structs:K}}var c6=D(()=>{"use strict"}),u0,d6=D(()=>{"use strict";u0=(o=>(o[o.VERTEX=1]="VERTEX",o[o.FRAGMENT=2]="FRAGMENT",o[o.COMPUTE=4]="COMPUTE",o))(u0||{})});function pb({groups:o}){let l=[];for(let f=0;f<o.length;f++){let v=o[f];l[v.group]||(l[v.group]=[]),v.isUniform?l[v.group].push({binding:v.binding,visibility:u0.VERTEX|u0.FRAGMENT,buffer:{type:"uniform"}}):v.type==="sampler"?l[v.group].push({binding:v.binding,visibility:u0.FRAGMENT,sampler:{type:"filtering"}}):v.type==="texture_2d"&&l[v.group].push({binding:v.binding,visibility:u0.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return l}var fb=D(()=>{d6()});function p6({groups:o}){let l=[];for(let f=0;f<o.length;f++){let v=o[f];l[v.group]||(l[v.group]={}),l[v.group][v.name]=v.binding}return l}var f6=D(()=>{"use strict"});function g6(o,l){let f=new Set,v=new Set,b=[...o.structs,...l.structs].filter(S=>f.has(S.name)?!1:(f.add(S.name),!0)),T=[...o.groups,...l.groups].filter(S=>{let R=`${S.name}-${S.binding}`;return v.has(R)?!1:(v.add(R),!0)});return{structs:b,groups:T}}var mA=D(()=>{"use strict"}),Tp,h0,Ep=D(()=>{_p(),h6(),c6(),fb(),f6(),mA(),Tp=Object.create(null),h0=class MNe{constructor(l){this._layoutKey=0,this._attributeLocationsKey=0;let{fragment:f,vertex:v,layout:b,gpuLayout:T,name:S}=l;if(this.name=S,this.fragment=f,this.vertex=v,f.source===v.source){let R=My(f.source);this.structsAndGroups=R}else{let R=My(v.source),U=My(f.source);this.structsAndGroups=g6(R,U)}this.layout=b??p6(this.structsAndGroups),this.gpuLayout=T??pb(this.structsAndGroups),this.autoAssignGlobalUniforms=this.layout[0]?.globalUniforms!==void 0,this.autoAssignLocalUniforms=this.layout[1]?.localUniforms!==void 0,this._generateProgramKey()}_generateProgramKey(){let{vertex:l,fragment:f}=this,v=l.source+f.source+l.entryPoint+f.entryPoint;this._layoutKey=xp(v,"program")}get attributeData(){return this._attributeData??(this._attributeData=Dh(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null}static from(l){let f=`${l.vertex.source}:${l.fragment.source}:${l.fragment.entryPoint}:${l.vertex.entryPoint}`;return Tp[f]||(Tp[f]=new MNe(l)),Tp[f]}}});function gb(o,l,f){if(o)for(let v in o){let b=v.toLocaleLowerCase(),T=l[b];if(T){let S=o[v];v==="header"&&(S=S.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),f&&T.push(`//----${f}----//`),T.push(S)}else Gt(`${v} placement hook does not exist in shader`)}}var Cp=D(()=>{Ar()});function Sp(o){let l={};return(o.match(m6)?.map(f=>f.replace(/[{()}]/g,""))??[]).forEach(f=>{l[f]=[]}),l}var m6,yA=D(()=>{"use strict";m6=/\{\{(.*?)\}\}/g});function mb(o,l){let f,v=/@in\s+([^;]+);/g;for(;(f=v.exec(o))!==null;)l.push(f[1])}function y6(o,l,f=!1){let v=[];mb(l,v),o.forEach(R=>{R.header&&mb(R.header,v)});let b=v;f&&b.sort();let T=b.map((R,U)=>`       @location(${U}) ${R},`).join(`
`),S=l.replace(/@in\s+[^;]+;\s*/g,"");return S=S.replace("{{in}}",`
${T}
`),S}var v6=D(()=>{"use strict"});function x6(o,l){let f,v=/@out\s+([^;]+);/g;for(;(f=v.exec(o))!==null;)l.push(f[1])}function b6(o){let l=/\b(\w+)\s*:/g.exec(o);return l?l[1]:""}function vA(o){let l=/@.*?\s+/g;return o.replace(l,"")}function _6(o,l){let f=[];x6(l,f),o.forEach(U=>{U.header&&x6(U.header,f)});let v=0,b=f.sort().map(U=>U.indexOf("builtin")>-1?U:`@location(${v++}) ${U}`).join(`,
`),T=f.sort().map(U=>`       var ${vA(U)};`).join(`
`),S=`return VSOutput(
                ${f.sort().map(U=>` ${b6(U)}`).join(`,
`)});`,R=l.replace(/@out\s+[^;]+;\s*/g,"");return R=R.replace("{{struct}}",`
${b}
`),R=R.replace("{{start}}",`
${T}
`),R=R.replace("{{return}}",`
${S}
`),R}var yb=D(()=>{"use strict"});function Ly(o,l){let f=o;for(let v in l){let b=l[v];b.join(`
`).length?f=f.replace(`{{${v}}}`,`//-----${v} START-----//
${b.join(`
`)}
//----${v} FINISH----//`):f=f.replace(`{{${v}}}`,"")}return f}var w6=D(()=>{"use strict"});function k6({template:o,bits:l}){let f=vb(o,l);if(yl[f])return yl[f];let{vertex:v,fragment:b}=xA(o,l);return yl[f]=xb(v,b,l),yl[f]}function T6({template:o,bits:l}){let f=vb(o,l);return yl[f]||(yl[f]=xb(o.vertex,o.fragment,l)),yl[f]}function xA(o,l){let f=l.map(S=>S.vertex).filter(S=>!!S),v=l.map(S=>S.fragment).filter(S=>!!S),b=y6(f,o.vertex,!0);b=_6(f,b);let T=y6(v,o.fragment,!0);return{vertex:b,fragment:T}}function vb(o,l){return l.map(f=>(Rg.has(f)||Rg.set(f,E6++),Rg.get(f))).sort((f,v)=>f-v).join("-")+o.vertex+o.fragment}function xb(o,l,f){let v=Sp(o),b=Sp(l);return f.forEach(T=>{gb(T.vertex,v,T.name),gb(T.fragment,b,T.name)}),{vertex:Ly(o,v),fragment:Ly(l,b)}}var yl,Rg,E6,bA=D(()=>{Cp(),yA(),v6(),yb(),w6(),yl=Object.create(null),Rg=new Map,E6=0}),C6,S6,Ry,A6,_A=D(()=>{"use strict";C6=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}
        
        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);
       
        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,S6=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;
   
    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {
        
        {{start}}

        var outColor:vec4<f32>;
      
        {{main}}
        
        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,Ry=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;
        
        {{start}}
        
        vColor = vec4(1.);
        
        {{main}}
        
        vUV = uv;
        
        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,A6=`
   
    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {
        
        {{start}}

        vec4 outColor;
      
        {{main}}
        
        finalColor = outColor * vColor;
        
        {{end}}
    }
`}),bb,M6,wA=D(()=>{"use strict";bb={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},M6={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}}});function Ap({bits:o,name:l}){let f=k6({template:{fragment:S6,vertex:C6},bits:[bb,...o]});return h0.from({name:l,vertex:{source:f.vertex,entryPoint:"main"},fragment:{source:f.fragment,entryPoint:"main"}})}function c0({bits:o,name:l}){return new ud({name:l,...T6({template:{vertex:Ry,fragment:A6},bits:[M6,...o]})})}var hd=D(()=>{l0(),Ep(),bA(),_A(),wA()}),Mp,Dg,Ig=D(()=>{"use strict";Mp={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},Dg={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}}});function L6(o){let l=[];if(o===1)l.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),l.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let f=0;for(let v=0;v<o;v++)l.push(`@group(1) @binding(${f++}) var textureSource${v+1}: texture_2d<f32>;`),l.push(`@group(1) @binding(${f++}) var textureSampler${v+1}: sampler;`)}return l.join(`
`)}function kA(o){let l=[];if(o===1)l.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{l.push("switch vTextureId {");for(let f=0;f<o;f++)f===o-1?l.push("  default:{"):l.push(`  case ${f}:{`),l.push(`      outColor = textureSampleGrad(textureSource${f+1}, textureSampler${f+1}, vUV, uvDx, uvDy);`),l.push("      break;}");l.push("}")}return l.join(`
`)}function Dy(o){return Og[o]||(Og[o]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${L6(o)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${kA(o)}
            `}}),Og[o]}function Iy(o){let l=[];for(let f=0;f<o;f++)f>0&&l.push("else"),f<o-1&&l.push(`if(vTextureId < ${f}.5)`),l.push("{"),l.push(`	outColor = texture(uTextures[${f}], vUV);`),l.push("}");return l.join(`
`)}function Ng(o){return Bg[o]||(Bg[o]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${o}];

            `,main:`

                ${Iy(o)}
            `}}),Bg[o]}var Og,Bg,Lp=D(()=>{"use strict";Og={},Bg={}}),d0,Rp,p0=D(()=>{"use strict";d0={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32> 
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},Rp={name:"round-pixels-bit",vertex:{header:`   
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {       
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}}}),Ny,Oy,TA=D(()=>{"use strict";Ny=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],Oy=Ny.reduce((o,l)=>(o[l]=!0,o),{})});function EA(o,l){switch(o){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*l);case"vec3<f32>":return new Float32Array(3*l);case"vec4<f32>":return new Float32Array(4*l);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var aF=D(()=>{"use strict"}),_b,il,vl=D(()=>{hs(),_p(),TA(),aF(),_b=class LNe{constructor(l,f){this._touched=0,this.uid=Ma("uniform"),this._resourceType="uniformGroup",this._resourceId=Ma("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,f={...LNe.defaultOptions,...f},this.uniformStructures=l;let v={};for(let b in l){let T=l[b];if(T.name=b,T.size=T.size??1,!Oy[T.type])throw new Error(`Uniform type ${T.type} is not supported. Supported uniform types are: ${Ny.join(", ")}`);T.value??(T.value=EA(T.type,T.size)),v[b]=T.value}this.uniforms=v,this._dirtyId=1,this.ubo=f.ubo,this.isStatic=f.isStatic,this._signature=xp(Object.keys(v).map(b=>`${b}-${l[b].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}},_b.defaultOptions={ubo:!1,isStatic:!1},il=_b});function k(o){let l=By[o];if(l)return l;let f=new Int32Array(o);for(let v=0;v<o;v++)f[v]=v;return l=By[o]=new il({uTextures:{value:f,type:"i32",size:o}},{isStatic:!0}),l}var By,nh=D(()=>{vl(),By={}}),Ce,ah=D(()=>{"use strict";Ce=(o=>(o[o.WEBGL=1]="WEBGL",o[o.WEBGPU=2]="WEBGPU",o[o.BOTH=3]="BOTH",o))(Ce||{})}),Ns,sh=D(()=>{Ir(),l0(),th(),Ep(),ah(),vl(),Ns=class RNe extends jr{constructor(l){super(),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[];let{gpuProgram:f,glProgram:v,groups:b,resources:T,compatibleRenderers:S,groupMap:R}=l;this.gpuProgram=f,this.glProgram=v,S===void 0&&(S=0,f&&(S|=Ce.WEBGPU),v&&(S|=Ce.WEBGL)),this.compatibleRenderers=S;let U={};if(!T&&!b&&(T={}),T&&b)throw new Error("[Shader] Cannot have both resources and groups");if(!f&&b&&!R)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!f&&b&&R)for(let W in R)for(let K in R[W]){let ee=R[W][K];U[ee]={group:W,binding:K,name:ee}}else if(f&&b&&!R){let W=f.structsAndGroups.groups;R={},W.forEach(K=>{R[K.group]=R[K.group]||{},R[K.group][K.binding]=K.name,U[K.name]=K})}else if(T){b={},R={},f&&f.structsAndGroups.groups.forEach(K=>{R[K.group]=R[K.group]||{},R[K.group][K.binding]=K.name,U[K.name]=K});let W=0;for(let K in T)U[K]||(b[99]||(b[99]=new Tu,this._ownedBindGroups.push(b[99])),U[K]={group:99,binding:W,name:K},R[99]=R[99]||{},R[99][W]=K,W++);for(let K in T){let ee=K,se=T[K];!se.source&&!se._resourceType&&(se=new il(se));let re=U[ee];re&&(b[re.group]||(b[re.group]=new Tu,this._ownedBindGroups.push(b[re.group])),b[re.group].setResource(se,re.binding))}}this.groups=b,this._uniformBindMap=R,this.resources=this._buildResourceAccessor(b,U)}addResource(l,f,v){var b,T;(b=this._uniformBindMap)[f]||(b[f]={}),(T=this._uniformBindMap[f])[v]||(T[v]=l),this.groups[f]||(this.groups[f]=new Tu,this._ownedBindGroups.push(this.groups[f]))}_buildResourceAccessor(l,f){let v={};for(let b in f){let T=f[b];Object.defineProperty(v,T.name,{get(){return l[T.group].getResource(T.binding)},set(S){l[T.group].setResource(S,T.binding)}})}return v}destroy(l=!1){this.emit("destroy",this),l&&(this.gpuProgram?.destroy(),this.glProgram?.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(f=>{f.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null}static from(l){let{gpu:f,gl:v,...b}=l,T,S;return f&&(T=h0.from(f)),v&&(S=ud.from(v)),new RNe({gpuProgram:T,glProgram:S,...b})}}}),Dp,CA=D(()=>{hd(),Ig(),Lp(),p0(),nh(),sh(),Dp=class extends Ns{constructor(o){let l=c0({name:"batch",bits:[Dg,Ng(o),Rp]}),f=Ap({name:"batch",bits:[Mp,Dy(o),d0]});super({glProgram:l,gpuProgram:f,resources:{batchSamplers:k(o)}})}}}),Py,cd,Ip,wb=D(()=>{Ot(),ub(),lA(),CA(),Py=null,cd=class DNe extends lb{constructor(){super(...arguments),this.geometry=new s6,this.shader=Py||(Py=new Dp(this.maxTextures)),this.name=DNe.extension.name,this.vertexSize=6}packAttributes(l,f,v,b,T){let S=T<<16|l.roundPixels&65535,R=l.transform,U=R.a,W=R.b,K=R.c,ee=R.d,se=R.tx,re=R.ty,{positions:Me,uvs:Ie}=l,Ee=l.color,Oe=l.attributeOffset,et=Oe+l.attributeSize;for(let kt=Oe;kt<et;kt++){let it=kt*2,Lt=Me[it],Dt=Me[it+1];f[b++]=U*Lt+K*Dt+se,f[b++]=ee*Dt+W*Lt+re,f[b++]=Ie[it],f[b++]=Ie[it+1],v[b++]=Ee,v[b++]=S}}packQuadAttributes(l,f,v,b,T){let S=l.texture,R=l.transform,U=R.a,W=R.b,K=R.c,ee=R.d,se=R.tx,re=R.ty,Me=l.bounds,Ie=Me.maxX,Ee=Me.minX,Oe=Me.maxY,et=Me.minY,kt=S.uvs,it=l.color,Lt=T<<16|l.roundPixels&65535;f[b+0]=U*Ee+K*et+se,f[b+1]=ee*et+W*Ee+re,f[b+2]=kt.x0,f[b+3]=kt.y0,v[b+4]=it,v[b+5]=Lt,f[b+6]=U*Ie+K*et+se,f[b+7]=ee*et+W*Ie+re,f[b+8]=kt.x1,f[b+9]=kt.y1,v[b+10]=it,v[b+11]=Lt,f[b+12]=U*Ie+K*Oe+se,f[b+13]=ee*Oe+W*Ie+re,f[b+14]=kt.x2,f[b+15]=kt.y2,v[b+16]=it,v[b+17]=Lt,f[b+18]=U*Ee+K*Oe+se,f[b+19]=ee*Oe+W*Ee+re,f[b+20]=kt.x3,f[b+21]=kt.y3,v[b+22]=it,v[b+23]=Lt}},cd.extension={type:[Ke.Batcher],name:"default"},Ip=cd});function R6(o,l,f,v,b,T,S,R=null){let U=0;f*=l,b*=T;let W=R.a,K=R.b,ee=R.c,se=R.d,re=R.tx,Me=R.ty;for(;U<S;){let Ie=o[f],Ee=o[f+1];v[b]=W*Ie+ee*Ee+re,v[b+1]=K*Ie+se*Ee+Me,b+=T,f+=l,U++}}function SA(o,l,f,v){let b=0;for(l*=f;b<v;)o[l]=0,o[l+1]=0,l+=f,b++}var kb=D(()=>{"use strict"});function Xs(o,l,f,v,b){let T=l.a,S=l.b,R=l.c,U=l.d,W=l.tx,K=l.ty;f=f||0,v=v||2,b=b||o.length/v-f;let ee=f*v;for(let se=0;se<b;se++){let re=o[ee],Me=o[ee+1];o[ee]=T*re+R*Me+W,o[ee+1]=S*re+U*Me+K,ee+=v}}var Fy=D(()=>{"use strict"}),Pg,bo,D6=D(()=>{Un(),ut(),Pg=new ji,bo=class{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){let o=this.baseColor,l=o>>16|o&65280|(o&255)<<16,f=this.renderable;return f?vt(l,f.groupColor)+(this.alpha*f.groupAlpha*255<<24):l+(this.alpha*255<<24)}get transform(){return this.renderable?.groupTransform||Pg}copyTo(o){o.indexOffset=this.indexOffset,o.indexSize=this.indexSize,o.attributeOffset=this.attributeOffset,o.attributeSize=this.attributeSize,o.baseColor=this.baseColor,o.alpha=this.alpha,o.texture=this.texture,o.geometryData=this.geometryData,o.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}}}),Np,I6,N6,AA=D(()=>{Ot(),Np={extension:{type:Ke.ShapeBuilder,name:"circle"},build(o,l){let f,v,b,T,S,R;if(o.type==="circle"){let it=o;f=it.x,v=it.y,S=R=it.radius,b=T=0}else if(o.type==="ellipse"){let it=o;f=it.x,v=it.y,S=it.halfWidth,R=it.halfHeight,b=T=0}else{let it=o,Lt=it.width/2,Dt=it.height/2;f=it.x+Lt,v=it.y+Dt,S=R=Math.max(0,Math.min(it.radius,Math.min(Lt,Dt))),b=Lt-S,T=Dt-R}if(!(S>=0&&R>=0&&b>=0&&T>=0))return l;let U=Math.ceil(2.3*Math.sqrt(S+R)),W=U*8+(b?4:0)+(T?4:0);if(W===0)return l;if(U===0)return l[0]=l[6]=f+b,l[1]=l[3]=v+T,l[2]=l[4]=f-b,l[5]=l[7]=v-T,l;let K=0,ee=U*4+(b?2:0)+2,se=ee,re=W,Me=b+S,Ie=T,Ee=f+Me,Oe=f-Me,et=v+Ie;if(l[K++]=Ee,l[K++]=et,l[--ee]=et,l[--ee]=Oe,T){let it=v-Ie;l[se++]=Oe,l[se++]=it,l[--re]=it,l[--re]=Ee}for(let it=1;it<U;it++){let Lt=Math.PI/2*(it/U),Dt=b+Math.cos(Lt)*S,Pt=T+Math.sin(Lt)*R,Jr=f+Dt,di=f-Dt,Ur=v+Pt,$r=v-Pt;l[K++]=Jr,l[K++]=Ur,l[--ee]=Ur,l[--ee]=di,l[se++]=di,l[se++]=$r,l[--re]=$r,l[--re]=Jr}Me=b,Ie=T+R,Ee=f+Me,Oe=f-Me,et=v+Ie;let kt=v-Ie;return l[K++]=Ee,l[K++]=et,l[--re]=kt,l[--re]=Ee,b&&(l[K++]=Oe,l[K++]=et,l[--re]=kt,l[--re]=Oe),l},triangulate(o,l,f,v,b,T){if(o.length===0)return;let S=0,R=0;for(let K=0;K<o.length;K+=2)S+=o[K],R+=o[K+1];S/=o.length/2,R/=o.length/2;let U=v;l[U*f]=S,l[U*f+1]=R;let W=U++;for(let K=0;K<o.length;K+=2)l[U*f]=o[K],l[U*f+1]=o[K+1],K>0&&(b[T++]=U,b[T++]=W,b[T++]=U-1),U++;b[T++]=W+1,b[T++]=W,b[T++]=U-1}},I6={...Np,extension:{...Np.extension,name:"ellipse"}},N6={...Np,extension:{...Np.extension,name:"roundedRectangle"}}});function Tb(o){let l=o.length;if(l<6)return 1;let f=0;for(let v=0,b=o[l-2],T=o[l-1];v<l;v+=2){let S=o[v],R=o[v+1];f+=(S-b)*(R+T),b=S,T=R}return f<0?-1:1}var MA=D(()=>{"use strict"});function O6(o,l,f,v,b,T,S,R){let U=o-f*b,W=l-v*b,K=o+f*T,ee=l+v*T,se,re;S?(se=v,re=-f):(se=-v,re=f);let Me=U+se,Ie=W+re,Ee=K+se,Oe=ee+re;return R.push(Me,Ie),R.push(Ee,Oe),2}function f0(o,l,f,v,b,T,S,R){let U=f-o,W=v-l,K=Math.atan2(U,W),ee=Math.atan2(b-o,T-l);R&&K<ee?K+=Math.PI*2:!R&&K>ee&&(ee+=Math.PI*2);let se=K,re=ee-K,Me=Math.abs(re),Ie=Math.sqrt(U*U+W*W),Ee=(15*Me*Math.sqrt(Ie)/Math.PI>>0)+1,Oe=re/Ee;if(se+=Oe,R){S.push(o,l),S.push(f,v);for(let et=1,kt=se;et<Ee;et++,kt+=Oe)S.push(o,l),S.push(o+Math.sin(kt)*Ie,l+Math.cos(kt)*Ie);S.push(o,l),S.push(b,T)}else{S.push(f,v),S.push(o,l);for(let et=1,kt=se;et<Ee;et++,kt+=Oe)S.push(o+Math.sin(kt)*Ie,l+Math.cos(kt)*Ie),S.push(o,l);S.push(b,T),S.push(o,l)}return Ee*2}function LA(o,l,f,v,b,T){let S=1e-4;if(o.length===0)return;let R=l,U=R.alignment;if(l.alignment!==.5){let ot=Tb(o);f&&(ot*=-1),U=(U-.5)*ot+.5}let W=new Mn(o[0],o[1]),K=new Mn(o[o.length-2],o[o.length-1]),ee=v,se=Math.abs(W.x-K.x)<S&&Math.abs(W.y-K.y)<S;if(ee){o=o.slice(),se&&(o.pop(),o.pop(),K.set(o[o.length-2],o[o.length-1]));let ot=(W.x+K.x)*.5,Ze=(K.y+W.y)*.5;o.unshift(ot,Ze),o.push(ot,Ze)}let re=b,Me=o.length/2,Ie=o.length,Ee=re.length/2,Oe=R.width/2,et=Oe*Oe,kt=R.miterLimit*R.miterLimit,it=o[0],Lt=o[1],Dt=o[2],Pt=o[3],Jr=0,di=0,Ur=-(Lt-Pt),$r=it-Dt,Ki=0,gn=0,Ft=Math.sqrt(Ur*Ur+$r*$r);Ur/=Ft,$r/=Ft,Ur*=Oe,$r*=Oe;let Ri=U,Yt=(1-Ri)*2,Tr=Ri*2;ee||(R.cap==="round"?Ie+=f0(it-Ur*(Yt-Tr)*.5,Lt-$r*(Yt-Tr)*.5,it-Ur*Yt,Lt-$r*Yt,it+Ur*Tr,Lt+$r*Tr,re,!0)+2:R.cap==="square"&&(Ie+=O6(it,Lt,Ur,$r,Yt,Tr,!0,re))),re.push(it-Ur*Yt,Lt-$r*Yt),re.push(it+Ur*Tr,Lt+$r*Tr);for(let ot=1;ot<Me-1;++ot){it=o[(ot-1)*2],Lt=o[(ot-1)*2+1],Dt=o[ot*2],Pt=o[ot*2+1],Jr=o[(ot+1)*2],di=o[(ot+1)*2+1],Ur=-(Lt-Pt),$r=it-Dt,Ft=Math.sqrt(Ur*Ur+$r*$r),Ur/=Ft,$r/=Ft,Ur*=Oe,$r*=Oe,Ki=-(Pt-di),gn=Dt-Jr,Ft=Math.sqrt(Ki*Ki+gn*gn),Ki/=Ft,gn/=Ft,Ki*=Oe,gn*=Oe;let Ze=Dt-it,Xt=Lt-Pt,Qt=Dt-Jr,yr=di-Pt,mr=Ze*Qt+Xt*yr,Lr=Xt*Qt-yr*Ze,zi=Lr<0;if(Math.abs(Lr)<.001*Math.abs(mr)){re.push(Dt-Ur*Yt,Pt-$r*Yt),re.push(Dt+Ur*Tr,Pt+$r*Tr),mr>=0&&(R.join==="round"?Ie+=f0(Dt,Pt,Dt-Ur*Yt,Pt-$r*Yt,Dt-Ki*Yt,Pt-gn*Yt,re,!1)+4:Ie+=2,re.push(Dt-Ki*Tr,Pt-gn*Tr),re.push(Dt+Ki*Yt,Pt+gn*Yt));continue}let Oi=(-Ur+it)*(-$r+Pt)-(-Ur+Dt)*(-$r+Lt),jn=(-Ki+Jr)*(-gn+Pt)-(-Ki+Dt)*(-gn+di),Dn=(Ze*jn-Qt*Oi)/Lr,Yn=(yr*Oi-Xt*jn)/Lr,ua=(Dn-Dt)*(Dn-Dt)+(Yn-Pt)*(Yn-Pt),Jn=Dt+(Dn-Dt)*Yt,co=Pt+(Yn-Pt)*Yt,To=Dt-(Dn-Dt)*Tr,lr=Pt-(Yn-Pt)*Tr,pi=Math.min(Ze*Ze+Xt*Xt,Qt*Qt+yr*yr),Ti=zi?Yt:Tr,Yi=pi+Ti*Ti*et;ua<=Yi?R.join==="bevel"||ua/et>kt?(zi?(re.push(Jn,co),re.push(Dt+Ur*Tr,Pt+$r*Tr),re.push(Jn,co),re.push(Dt+Ki*Tr,Pt+gn*Tr)):(re.push(Dt-Ur*Yt,Pt-$r*Yt),re.push(To,lr),re.push(Dt-Ki*Yt,Pt-gn*Yt),re.push(To,lr)),Ie+=2):R.join==="round"?zi?(re.push(Jn,co),re.push(Dt+Ur*Tr,Pt+$r*Tr),Ie+=f0(Dt,Pt,Dt+Ur*Tr,Pt+$r*Tr,Dt+Ki*Tr,Pt+gn*Tr,re,!0)+4,re.push(Jn,co),re.push(Dt+Ki*Tr,Pt+gn*Tr)):(re.push(Dt-Ur*Yt,Pt-$r*Yt),re.push(To,lr),Ie+=f0(Dt,Pt,Dt-Ur*Yt,Pt-$r*Yt,Dt-Ki*Yt,Pt-gn*Yt,re,!1)+4,re.push(Dt-Ki*Yt,Pt-gn*Yt),re.push(To,lr)):(re.push(Jn,co),re.push(To,lr)):(re.push(Dt-Ur*Yt,Pt-$r*Yt),re.push(Dt+Ur*Tr,Pt+$r*Tr),R.join==="round"?zi?Ie+=f0(Dt,Pt,Dt+Ur*Tr,Pt+$r*Tr,Dt+Ki*Tr,Pt+gn*Tr,re,!0)+2:Ie+=f0(Dt,Pt,Dt-Ur*Yt,Pt-$r*Yt,Dt-Ki*Yt,Pt-gn*Yt,re,!1)+2:R.join==="miter"&&ua/et<=kt&&(zi?(re.push(To,lr),re.push(To,lr)):(re.push(Jn,co),re.push(Jn,co)),Ie+=2),re.push(Dt-Ki*Yt,Pt-gn*Yt),re.push(Dt+Ki*Tr,Pt+gn*Tr),Ie+=2)}it=o[(Me-2)*2],Lt=o[(Me-2)*2+1],Dt=o[(Me-1)*2],Pt=o[(Me-1)*2+1],Ur=-(Lt-Pt),$r=it-Dt,Ft=Math.sqrt(Ur*Ur+$r*$r),Ur/=Ft,$r/=Ft,Ur*=Oe,$r*=Oe,re.push(Dt-Ur*Yt,Pt-$r*Yt),re.push(Dt+Ur*Tr,Pt+$r*Tr),ee||(R.cap==="round"?Ie+=f0(Dt-Ur*(Yt-Tr)*.5,Pt-$r*(Yt-Tr)*.5,Dt-Ur*Yt,Pt-$r*Yt,Dt+Ur*Tr,Pt+$r*Tr,re,!1)+2:R.cap==="square"&&(Ie+=O6(Dt,Pt,Ur,$r,Yt,Tr,!1,re)));let We=1e-4*1e-4;for(let ot=Ee;ot<Ie+Ee-2;++ot)it=re[ot*2],Lt=re[ot*2+1],Dt=re[(ot+1)*2],Pt=re[(ot+1)*2+1],Jr=re[(ot+2)*2],di=re[(ot+2)*2+1],!(Math.abs(it*(Pt-di)+Dt*(di-Lt)+Jr*(Lt-Pt))<We)&&T.push(ot,ot+1,ot+2)}var xc=D(()=>{Gs(),MA()});function dd(o,l,f,v){let b=1e-4;if(o.length===0)return;let T=o[0],S=o[1],R=o[o.length-2],U=o[o.length-1],W=l||Math.abs(T-R)<b&&Math.abs(S-U)<b,K=f,ee=o.length/2,se=K.length/2;for(let re=0;re<ee;re++)K.push(o[re*2]),K.push(o[re*2+1]);for(let re=0;re<ee-1;re++)v.push(se+re,se+re+1);W&&v.push(se+ee-1,se)}var B6=D(()=>{}),Eb=hi((o,l)=>{"use strict";l.exports=f,l.exports.default=f;function f(We,ot,Ze){Ze=Ze||2;var Xt=ot&&ot.length,Qt=Xt?ot[0]*Ze:We.length,yr=v(We,0,Qt,Ze,!0),mr=[];if(!yr||yr.next===yr.prev)return mr;var Lr,zi,Oi,jn,Dn,Yn,ua;if(Xt&&(yr=K(We,ot,yr,Ze)),We.length>80*Ze){Lr=Oi=We[0],zi=jn=We[1];for(var Jn=Ze;Jn<Qt;Jn+=Ze)Dn=We[Jn],Yn=We[Jn+1],Dn<Lr&&(Lr=Dn),Yn<zi&&(zi=Yn),Dn>Oi&&(Oi=Dn),Yn>jn&&(jn=Yn);ua=Math.max(Oi-Lr,jn-zi),ua=ua!==0?32767/ua:0}return T(yr,mr,Ze,Lr,zi,ua,0),mr}function v(We,ot,Ze,Xt,Qt){var yr,mr;if(Qt===Tr(We,ot,Ze,Xt)>0)for(yr=ot;yr<Ze;yr+=Xt)mr=Ft(yr,We[yr],We[yr+1],mr);else for(yr=Ze-Xt;yr>=ot;yr-=Xt)mr=Ft(yr,We[yr],We[yr+1],mr);return mr&&Dt(mr,mr.next)&&(Ri(mr),mr=mr.next),mr}function b(We,ot){if(!We)return We;ot||(ot=We);var Ze=We,Xt;do if(Xt=!1,!Ze.steiner&&(Dt(Ze,Ze.next)||Lt(Ze.prev,Ze,Ze.next)===0)){if(Ri(Ze),Ze=ot=Ze.prev,Ze===Ze.next)break;Xt=!0}else Ze=Ze.next;while(Xt||Ze!==ot);return ot}function T(We,ot,Ze,Xt,Qt,yr,mr){if(We){!mr&&yr&&Ie(We,Xt,Qt,yr);for(var Lr=We,zi,Oi;We.prev!==We.next;){if(zi=We.prev,Oi=We.next,yr?R(We,Xt,Qt,yr):S(We)){ot.push(zi.i/Ze|0),ot.push(We.i/Ze|0),ot.push(Oi.i/Ze|0),Ri(We),We=Oi.next,Lr=Oi.next;continue}if(We=Oi,We===Lr){mr?mr===1?(We=U(b(We),ot,Ze),T(We,ot,Ze,Xt,Qt,yr,2)):mr===2&&W(We,ot,Ze,Xt,Qt,yr):T(b(We),ot,Ze,Xt,Qt,yr,1);break}}}}function S(We){var ot=We.prev,Ze=We,Xt=We.next;if(Lt(ot,Ze,Xt)>=0)return!1;for(var Qt=ot.x,yr=Ze.x,mr=Xt.x,Lr=ot.y,zi=Ze.y,Oi=Xt.y,jn=Qt<yr?Qt<mr?Qt:mr:yr<mr?yr:mr,Dn=Lr<zi?Lr<Oi?Lr:Oi:zi<Oi?zi:Oi,Yn=Qt>yr?Qt>mr?Qt:mr:yr>mr?yr:mr,ua=Lr>zi?Lr>Oi?Lr:Oi:zi>Oi?zi:Oi,Jn=Xt.next;Jn!==ot;){if(Jn.x>=jn&&Jn.x<=Yn&&Jn.y>=Dn&&Jn.y<=ua&&kt(Qt,Lr,yr,zi,mr,Oi,Jn.x,Jn.y)&&Lt(Jn.prev,Jn,Jn.next)>=0)return!1;Jn=Jn.next}return!0}function R(We,ot,Ze,Xt){var Qt=We.prev,yr=We,mr=We.next;if(Lt(Qt,yr,mr)>=0)return!1;for(var Lr=Qt.x,zi=yr.x,Oi=mr.x,jn=Qt.y,Dn=yr.y,Yn=mr.y,ua=Lr<zi?Lr<Oi?Lr:Oi:zi<Oi?zi:Oi,Jn=jn<Dn?jn<Yn?jn:Yn:Dn<Yn?Dn:Yn,co=Lr>zi?Lr>Oi?Lr:Oi:zi>Oi?zi:Oi,To=jn>Dn?jn>Yn?jn:Yn:Dn>Yn?Dn:Yn,lr=Oe(ua,Jn,ot,Ze,Xt),pi=Oe(co,To,ot,Ze,Xt),Ti=We.prevZ,Yi=We.nextZ;Ti&&Ti.z>=lr&&Yi&&Yi.z<=pi;){if(Ti.x>=ua&&Ti.x<=co&&Ti.y>=Jn&&Ti.y<=To&&Ti!==Qt&&Ti!==mr&&kt(Lr,jn,zi,Dn,Oi,Yn,Ti.x,Ti.y)&&Lt(Ti.prev,Ti,Ti.next)>=0||(Ti=Ti.prevZ,Yi.x>=ua&&Yi.x<=co&&Yi.y>=Jn&&Yi.y<=To&&Yi!==Qt&&Yi!==mr&&kt(Lr,jn,zi,Dn,Oi,Yn,Yi.x,Yi.y)&&Lt(Yi.prev,Yi,Yi.next)>=0))return!1;Yi=Yi.nextZ}for(;Ti&&Ti.z>=lr;){if(Ti.x>=ua&&Ti.x<=co&&Ti.y>=Jn&&Ti.y<=To&&Ti!==Qt&&Ti!==mr&&kt(Lr,jn,zi,Dn,Oi,Yn,Ti.x,Ti.y)&&Lt(Ti.prev,Ti,Ti.next)>=0)return!1;Ti=Ti.prevZ}for(;Yi&&Yi.z<=pi;){if(Yi.x>=ua&&Yi.x<=co&&Yi.y>=Jn&&Yi.y<=To&&Yi!==Qt&&Yi!==mr&&kt(Lr,jn,zi,Dn,Oi,Yn,Yi.x,Yi.y)&&Lt(Yi.prev,Yi,Yi.next)>=0)return!1;Yi=Yi.nextZ}return!0}function U(We,ot,Ze){var Xt=We;do{var Qt=Xt.prev,yr=Xt.next.next;!Dt(Qt,yr)&&Pt(Qt,Xt,Xt.next,yr)&&$r(Qt,yr)&&$r(yr,Qt)&&(ot.push(Qt.i/Ze|0),ot.push(Xt.i/Ze|0),ot.push(yr.i/Ze|0),Ri(Xt),Ri(Xt.next),Xt=We=yr),Xt=Xt.next}while(Xt!==We);return b(Xt)}function W(We,ot,Ze,Xt,Qt,yr){var mr=We;do{for(var Lr=mr.next.next;Lr!==mr.prev;){if(mr.i!==Lr.i&&it(mr,Lr)){var zi=gn(mr,Lr);mr=b(mr,mr.next),zi=b(zi,zi.next),T(mr,ot,Ze,Xt,Qt,yr,0),T(zi,ot,Ze,Xt,Qt,yr,0);return}Lr=Lr.next}mr=mr.next}while(mr!==We)}function K(We,ot,Ze,Xt){var Qt=[],yr,mr,Lr,zi,Oi;for(yr=0,mr=ot.length;yr<mr;yr++)Lr=ot[yr]*Xt,zi=yr<mr-1?ot[yr+1]*Xt:We.length,Oi=v(We,Lr,zi,Xt,!1),Oi===Oi.next&&(Oi.steiner=!0),Qt.push(et(Oi));for(Qt.sort(ee),yr=0;yr<Qt.length;yr++)Ze=se(Qt[yr],Ze);return Ze}function ee(We,ot){return We.x-ot.x}function se(We,ot){var Ze=re(We,ot);if(!Ze)return ot;var Xt=gn(Ze,We);return b(Xt,Xt.next),b(Ze,Ze.next)}function re(We,ot){var Ze=ot,Xt=We.x,Qt=We.y,yr=-1/0,mr;do{if(Qt<=Ze.y&&Qt>=Ze.next.y&&Ze.next.y!==Ze.y){var Lr=Ze.x+(Qt-Ze.y)*(Ze.next.x-Ze.x)/(Ze.next.y-Ze.y);if(Lr<=Xt&&Lr>yr&&(yr=Lr,mr=Ze.x<Ze.next.x?Ze:Ze.next,Lr===Xt))return mr}Ze=Ze.next}while(Ze!==ot);if(!mr)return null;var zi=mr,Oi=mr.x,jn=mr.y,Dn=1/0,Yn;Ze=mr;do Xt>=Ze.x&&Ze.x>=Oi&&Xt!==Ze.x&&kt(Qt<jn?Xt:yr,Qt,Oi,jn,Qt<jn?yr:Xt,Qt,Ze.x,Ze.y)&&(Yn=Math.abs(Qt-Ze.y)/(Xt-Ze.x),$r(Ze,We)&&(Yn<Dn||Yn===Dn&&(Ze.x>mr.x||Ze.x===mr.x&&Me(mr,Ze)))&&(mr=Ze,Dn=Yn)),Ze=Ze.next;while(Ze!==zi);return mr}function Me(We,ot){return Lt(We.prev,We,ot.prev)<0&&Lt(ot.next,We,We.next)<0}function Ie(We,ot,Ze,Xt){var Qt=We;do Qt.z===0&&(Qt.z=Oe(Qt.x,Qt.y,ot,Ze,Xt)),Qt.prevZ=Qt.prev,Qt.nextZ=Qt.next,Qt=Qt.next;while(Qt!==We);Qt.prevZ.nextZ=null,Qt.prevZ=null,Ee(Qt)}function Ee(We){var ot,Ze,Xt,Qt,yr,mr,Lr,zi,Oi=1;do{for(Ze=We,We=null,yr=null,mr=0;Ze;){for(mr++,Xt=Ze,Lr=0,ot=0;ot<Oi&&(Lr++,Xt=Xt.nextZ,!!Xt);ot++);for(zi=Oi;Lr>0||zi>0&&Xt;)Lr!==0&&(zi===0||!Xt||Ze.z<=Xt.z)?(Qt=Ze,Ze=Ze.nextZ,Lr--):(Qt=Xt,Xt=Xt.nextZ,zi--),yr?yr.nextZ=Qt:We=Qt,Qt.prevZ=yr,yr=Qt;Ze=Xt}yr.nextZ=null,Oi*=2}while(mr>1);return We}function Oe(We,ot,Ze,Xt,Qt){return We=(We-Ze)*Qt|0,ot=(ot-Xt)*Qt|0,We=(We|We<<8)&16711935,We=(We|We<<4)&252645135,We=(We|We<<2)&858993459,We=(We|We<<1)&1431655765,ot=(ot|ot<<8)&16711935,ot=(ot|ot<<4)&252645135,ot=(ot|ot<<2)&858993459,ot=(ot|ot<<1)&1431655765,We|ot<<1}function et(We){var ot=We,Ze=We;do(ot.x<Ze.x||ot.x===Ze.x&&ot.y<Ze.y)&&(Ze=ot),ot=ot.next;while(ot!==We);return Ze}function kt(We,ot,Ze,Xt,Qt,yr,mr,Lr){return(Qt-mr)*(ot-Lr)>=(We-mr)*(yr-Lr)&&(We-mr)*(Xt-Lr)>=(Ze-mr)*(ot-Lr)&&(Ze-mr)*(yr-Lr)>=(Qt-mr)*(Xt-Lr)}function it(We,ot){return We.next.i!==ot.i&&We.prev.i!==ot.i&&!Ur(We,ot)&&($r(We,ot)&&$r(ot,We)&&Ki(We,ot)&&(Lt(We.prev,We,ot.prev)||Lt(We,ot.prev,ot))||Dt(We,ot)&&Lt(We.prev,We,We.next)>0&&Lt(ot.prev,ot,ot.next)>0)}function Lt(We,ot,Ze){return(ot.y-We.y)*(Ze.x-ot.x)-(ot.x-We.x)*(Ze.y-ot.y)}function Dt(We,ot){return We.x===ot.x&&We.y===ot.y}function Pt(We,ot,Ze,Xt){var Qt=di(Lt(We,ot,Ze)),yr=di(Lt(We,ot,Xt)),mr=di(Lt(Ze,Xt,We)),Lr=di(Lt(Ze,Xt,ot));return!!(Qt!==yr&&mr!==Lr||Qt===0&&Jr(We,Ze,ot)||yr===0&&Jr(We,Xt,ot)||mr===0&&Jr(Ze,We,Xt)||Lr===0&&Jr(Ze,ot,Xt))}function Jr(We,ot,Ze){return ot.x<=Math.max(We.x,Ze.x)&&ot.x>=Math.min(We.x,Ze.x)&&ot.y<=Math.max(We.y,Ze.y)&&ot.y>=Math.min(We.y,Ze.y)}function di(We){return We>0?1:We<0?-1:0}function Ur(We,ot){var Ze=We;do{if(Ze.i!==We.i&&Ze.next.i!==We.i&&Ze.i!==ot.i&&Ze.next.i!==ot.i&&Pt(Ze,Ze.next,We,ot))return!0;Ze=Ze.next}while(Ze!==We);return!1}function $r(We,ot){return Lt(We.prev,We,We.next)<0?Lt(We,ot,We.next)>=0&&Lt(We,We.prev,ot)>=0:Lt(We,ot,We.prev)<0||Lt(We,We.next,ot)<0}function Ki(We,ot){var Ze=We,Xt=!1,Qt=(We.x+ot.x)/2,yr=(We.y+ot.y)/2;do Ze.y>yr!=Ze.next.y>yr&&Ze.next.y!==Ze.y&&Qt<(Ze.next.x-Ze.x)*(yr-Ze.y)/(Ze.next.y-Ze.y)+Ze.x&&(Xt=!Xt),Ze=Ze.next;while(Ze!==We);return Xt}function gn(We,ot){var Ze=new Yt(We.i,We.x,We.y),Xt=new Yt(ot.i,ot.x,ot.y),Qt=We.next,yr=ot.prev;return We.next=ot,ot.prev=We,Ze.next=Qt,Qt.prev=Ze,Xt.next=Ze,Ze.prev=Xt,yr.next=Xt,Xt.prev=yr,Xt}function Ft(We,ot,Ze,Xt){var Qt=new Yt(We,ot,Ze);return Xt?(Qt.next=Xt.next,Qt.prev=Xt,Xt.next.prev=Qt,Xt.next=Qt):(Qt.prev=Qt,Qt.next=Qt),Qt}function Ri(We){We.next.prev=We.prev,We.prev.next=We.next,We.prevZ&&(We.prevZ.nextZ=We.nextZ),We.nextZ&&(We.nextZ.prevZ=We.prevZ)}function Yt(We,ot,Ze){this.i=We,this.x=ot,this.y=Ze,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}f.deviation=function(We,ot,Ze,Xt){var Qt=ot&&ot.length,yr=Qt?ot[0]*Ze:We.length,mr=Math.abs(Tr(We,0,yr,Ze));if(Qt)for(var Lr=0,zi=ot.length;Lr<zi;Lr++){var Oi=ot[Lr]*Ze,jn=Lr<zi-1?ot[Lr+1]*Ze:We.length;mr-=Math.abs(Tr(We,Oi,jn,Ze))}var Dn=0;for(Lr=0;Lr<Xt.length;Lr+=3){var Yn=Xt[Lr]*Ze,ua=Xt[Lr+1]*Ze,Jn=Xt[Lr+2]*Ze;Dn+=Math.abs((We[Yn]-We[Jn])*(We[ua+1]-We[Yn+1])-(We[Yn]-We[ua])*(We[Jn+1]-We[Yn+1]))}return mr===0&&Dn===0?0:Math.abs((Dn-mr)/mr)};function Tr(We,ot,Ze,Xt){for(var Qt=0,yr=ot,mr=Ze-Xt;yr<Ze;yr+=Xt)Qt+=(We[mr]-We[yr])*(We[yr+1]+We[mr+1]),mr=yr;return Qt}f.flatten=function(We){for(var ot=We[0][0].length,Ze={vertices:[],holes:[],dimensions:ot},Xt=0,Qt=0;Qt<We.length;Qt++){for(var yr=0;yr<We[Qt].length;yr++)for(var mr=0;mr<ot;mr++)Ze.vertices.push(We[Qt][yr][mr]);Qt>0&&(Xt+=We[Qt-1].length,Ze.holes.push(Xt))}return Ze}});function P6(o,l,f,v,b,T,S){let R=(0,ka.default)(o,l,2);if(!R)return;for(let W=0;W<R.length;W+=3)T[S++]=R[W]+b,T[S++]=R[W+1]+b,T[S++]=R[W+2]+b;let U=b*v;for(let W=0;W<o.length;W+=2)f[U]=o[W],f[U+1]=o[W+1],U+=v}var ka,Fg=D(()=>{ka=Sn(Eb(),1)}),F6,g0,Gl=D(()=>{Ot(),Fg(),F6=[],g0={extension:{type:Ke.ShapeBuilder,name:"polygon"},build(o,l){for(let f=0;f<o.points.length;f++)l[f]=o.points[f];return l},triangulate(o,l,f,v,b,T){P6(o,F6,l,f,v,b,T)}}}),$6,Op=D(()=>{Ot(),$6={extension:{type:Ke.ShapeBuilder,name:"rectangle"},build(o,l){let f=o,v=f.x,b=f.y,T=f.width,S=f.height;return T>=0&&S>=0&&(l[0]=v,l[1]=b,l[2]=v+T,l[3]=b,l[4]=v+T,l[5]=b+S,l[6]=v,l[7]=b+S),l},triangulate(o,l,f,v,b,T){let S=0;v*=f,l[v+S]=o[0],l[v+S+1]=o[1],S+=f,l[v+S]=o[2],l[v+S+1]=o[3],S+=f,l[v+S]=o[6],l[v+S+1]=o[7],S+=f,l[v+S]=o[4],l[v+S+1]=o[5],S+=f;let R=v/f;b[T++]=R,b[T++]=R+1,b[T++]=R+2,b[T++]=R+1,b[T++]=R+3,b[T++]=R+2}}}),Bp,$y=D(()=>{Ot(),Bp={extension:{type:Ke.ShapeBuilder,name:"triangle"},build(o,l){return l[0]=o.x,l[1]=o.y,l[2]=o.x2,l[3]=o.y2,l[4]=o.x3,l[5]=o.y3,l},triangulate(o,l,f,v,b,T){let S=0;v*=f,l[v+S]=o[0],l[v+S+1]=o[1],S+=f,l[v+S]=o[2],l[v+S+1]=o[3],S+=f,l[v+S]=o[4],l[v+S+1]=o[5];let R=v/f;b[T++]=R,b[T++]=R+1,b[T++]=R+2}}});function RA(o,l){let{geometryData:f,batches:v}=l;v.length=0,f.indices.length=0,f.vertices.length=0,f.uvs.length=0;for(let b=0;b<o.instructions.length;b++){let T=o.instructions[b];if(T.action==="texture")DA(T.data,v,f);else if(T.action==="fill"||T.action==="stroke"){let S=T.action==="stroke",R=T.data.path.shapePath,U=T.data.style,W=T.data.hole;S&&W&&z6(W.shapePath,U,null,!0,v,f),z6(R,U,W,S,v,f)}}}function DA(o,l,f){let{vertices:v,uvs:b,indices:T}=f,S=T.length,R=v.length/2,U=[],W=Pp.rectangle,K=cs,ee=o.image;K.x=o.dx,K.y=o.dy,K.width=o.dw,K.height=o.dh;let se=o.transform;W.build(K,U),se&&Xs(U,se),W.triangulate(U,v,2,R,T,S);let re=ee.uvs;b.push(re.x0,re.y0,re.x1,re.y1,re.x3,re.y3,re.x2,re.y2);let Me=pt.get(bo);Me.indexOffset=S,Me.indexSize=T.length-S,Me.attributeOffset=R,Me.attributeSize=v.length/2-R,Me.baseColor=o.style,Me.alpha=o.alpha,Me.texture=ee,Me.geometryData=f,l.push(Me)}function z6(o,l,f,v,b,T){let{vertices:S,uvs:R,indices:U}=T,W=o.shapePrimitives.length-1;o.shapePrimitives.forEach(({shape:K,transform:ee},se)=>{let re=U.length,Me=S.length/2,Ie=[],Ee=Pp[K.type],Oe="triangle-list";if(Ee.build(K,Ie),ee&&Xs(Ie,ee),v){let Lt=K.closePath??!0,Dt=l;Dt.pixelLine?(dd(Ie,Lt,S,U),Oe="line-list"):LA(Ie,Dt,!1,Lt,S,U)}else if(f&&W===se){W!==0&&console.warn("[Pixi Graphics] only the last shape have be cut out");let Lt=[],Dt=Ie.slice();G6(f.shapePath).forEach(Pt=>{Lt.push(Dt.length/2),Dt.push(...Pt)}),P6(Dt,Lt,S,2,Me,U,re)}else Ee.triangulate(Ie,S,2,Me,U,re);let et=R.length/2,kt=l.texture;if(kt!==fn.WHITE){let Lt=l.matrix;Lt&&(ee&&Lt.append(ee.clone().invert()),R6(S,2,Me,R,et,2,S.length/2-Me,Lt))}else SA(R,et,2,S.length/2-Me);let it=pt.get(bo);it.indexOffset=re,it.indexSize=U.length-re,it.attributeOffset=Me,it.attributeSize=S.length/2-Me,it.baseColor=l.color,it.alpha=l.alpha,it.texture=kt,it.geometryData=T,it.topology=Oe,b.push(it)})}function G6(o){if(!o)return[];let l=o.shapePrimitives,f=[];for(let v=0;v<l.length;v++){let b=l[v].shape,T=[];Pp[b.type].build(b,T),f.push(T)}return f}var Pp,cs,U6=D(()=>{Ot(),ye(),kb(),Fy(),os(),Ts(),D6(),AA(),xc(),B6(),Gl(),Op(),$y(),Fg(),Pp={},Kr.handleByMap(Ke.ShapeBuilder,Pp),Kr.add($6,g0,Bp,Np,I6,N6),cs=new te}),j6,$g,zy,zg,Cb=D(()=>{Ot(),sb(),wb(),rr(),Sa(),Ts(),U6(),j6=class{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}},$g=class{constructor(){this.batcher=new Ip,this.instructions=new It}init(){this.instructions.reset()}get geometry(){return Wn(kh,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}},zy=class xte{constructor(l){this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),l.renderableGC.addManagedHash(this,"_gpuContextHash"),l.renderableGC.addManagedHash(this,"_graphicsDataContextHash")}init(l){xte.defaultOptions.bezierSmoothness=l?.bezierSmoothness??xte.defaultOptions.bezierSmoothness}getContextRenderData(l){return this._graphicsDataContextHash[l.uid]||this._initContextRenderData(l)}updateGpuContext(l){let f=this._gpuContextHash[l.uid]||this._initContext(l);if(l.dirty){f?this._cleanGraphicsContextData(l):f=this._initContext(l),RA(l,f);let v=l.batchMode;l.customShader||v==="no-batch"?f.isBatchable=!1:v==="auto"&&(f.isBatchable=f.geometryData.vertices.length<400),l.dirty=!1}return f}getGpuContext(l){return this._gpuContextHash[l.uid]||this._initContext(l)}_initContextRenderData(l){let f=pt.get($g),{batches:v,geometryData:b}=this._gpuContextHash[l.uid],T=b.vertices.length,S=b.indices.length;for(let K=0;K<v.length;K++)v[K].applyTransform=!1;let R=f.batcher;R.ensureAttributeBuffer(T),R.ensureIndexBuffer(S),R.begin();for(let K=0;K<v.length;K++){let ee=v[K];R.add(ee)}R.finish(f.instructions);let U=R.geometry;U.indexBuffer.setDataWithSize(R.indexBuffer,R.indexSize,!0),U.buffers[0].setDataWithSize(R.attributeBuffer.float32View,R.attributeSize,!0);let W=R.batches;for(let K=0;K<W.length;K++){let ee=W[K];ee.bindGroup=Va(ee.textures.textures,ee.textures.count)}return this._graphicsDataContextHash[l.uid]=f,f}_initContext(l){let f=new j6;return f.context=l,this._gpuContextHash[l.uid]=f,l.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[l.uid]}onGraphicsContextDestroy(l){this._cleanGraphicsContextData(l),l.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[l.uid]=null}_cleanGraphicsContextData(l){let f=this._gpuContextHash[l.uid];f.isBatchable||this._graphicsDataContextHash[l.uid]&&(pt.return(this.getContextRenderData(l)),this._graphicsDataContextHash[l.uid]=null),f.batches&&f.batches.forEach(v=>{pt.return(v)})}destroy(){for(let l in this._gpuContextHash)this._gpuContextHash[l]&&this.onGraphicsContextDestroy(this._gpuContextHash[l].context)}},zy.extension={type:[Ke.WebGLSystem,Ke.WebGPUSystem,Ke.CanvasSystem],name:"graphicsContext"},zy.defaultOptions={bezierSmoothness:.5},zg=zy}),Sb,bc,Gy,Uy,Gg,Ug,Da,jy,Cu,Ih=D(()=>{"use strict";Sb={normal:0,add:1,multiply:2,screen:3,overlay:4,erase:5,"normal-npm":6,"add-npm":7,"screen-npm":8,min:9,max:10},bc=0,Gy=1,Uy=2,Gg=3,Ug=4,Da=5,jy=class INe{constructor(){this.data=0,this.blendMode="normal",this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<bc)}set blend(l){!!(this.data&1<<bc)!==l&&(this.data^=1<<bc)}get offsets(){return!!(this.data&1<<Gy)}set offsets(l){!!(this.data&1<<Gy)!==l&&(this.data^=1<<Gy)}set cullMode(l){if(l==="none"){this.culling=!1;return}this.culling=!0,this.clockwiseFrontFace=l==="front"}get cullMode(){return this.culling?this.clockwiseFrontFace?"front":"back":"none"}get culling(){return!!(this.data&1<<Uy)}set culling(l){!!(this.data&1<<Uy)!==l&&(this.data^=1<<Uy)}get depthTest(){return!!(this.data&1<<Gg)}set depthTest(l){!!(this.data&1<<Gg)!==l&&(this.data^=1<<Gg)}get depthMask(){return!!(this.data&1<<Da)}set depthMask(l){!!(this.data&1<<Da)!==l&&(this.data^=1<<Da)}get clockwiseFrontFace(){return!!(this.data&1<<Ug)}set clockwiseFrontFace(l){!!(this.data&1<<Ug)!==l&&(this.data^=1<<Ug)}get blendMode(){return this._blendMode}set blendMode(l){this.blend=l!=="none",this._blendMode=l,this._blendModeId=Sb[l]||0}get polygonOffset(){return this._polygonOffset}set polygonOffset(l){this.offsets=!!l,this._polygonOffset=l}toString(){return`[pixi.js/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){let l=new INe;return l.depthTest=!1,l.blend=!0,l}},jy.default2d=jy.for2d(),Cu=jy});function jg(o,l,f){let v=(o>>24&255)/255;l[f++]=(o&255)/255*v,l[f++]=(o>>8&255)/255*v,l[f++]=(o>>16&255)/255*v,l[f++]=v}var Fp=D(()=>{"use strict"}),Ab,es=D(()=>{Ot(),Ih(),Ts(),Fp(),D6(),Ab=class{constructor(o,l){this.state=Cu.for2d(),this._graphicsBatchesHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this.renderer=o,this._adaptor=l,this._adaptor.init(),this.renderer.renderableGC.addManagedHash(this,"_graphicsBatchesHash")}validateRenderable(o){let l=o.context,f=!!this._graphicsBatchesHash[o.uid],v=this.renderer.graphicsContext.updateGpuContext(l);return!!(v.isBatchable||f!==v.isBatchable)}addRenderable(o,l){let f=this.renderer.graphicsContext.updateGpuContext(o.context);o.didViewUpdate&&this._rebuild(o),f.isBatchable?this._addToBatcher(o,l):(this.renderer.renderPipes.batch.break(l),l.add(o))}updateRenderable(o){let l=this._graphicsBatchesHash[o.uid];if(l)for(let f=0;f<l.length;f++){let v=l[f];v._batcher.updateElement(v)}}destroyRenderable(o){this._graphicsBatchesHash[o.uid]&&this._removeBatchForRenderable(o.uid),o.off("destroyed",this._destroyRenderableBound)}execute(o){if(!o.isRenderable)return;let l=this.renderer,f=o.context;if(!l.graphicsContext.getGpuContext(f).batches.length)return;let v=f.customShader||this._adaptor.shader;this.state.blendMode=o.groupBlendMode;let b=v.resources.localUniforms.uniforms;b.uTransformMatrix=o.groupTransform,b.uRound=l._roundPixels|o._roundPixels,jg(o.groupColorAlpha,b.uColor,0),this._adaptor.execute(this,o)}_rebuild(o){let l=!!this._graphicsBatchesHash[o.uid],f=this.renderer.graphicsContext.updateGpuContext(o.context);l&&this._removeBatchForRenderable(o.uid),f.isBatchable&&this._initBatchesForRenderable(o),o.batched=f.isBatchable}_addToBatcher(o,l){let f=this.renderer.renderPipes.batch,v=this._getBatchesForRenderable(o);for(let b=0;b<v.length;b++){let T=v[b];f.addToBatch(T,l)}}_getBatchesForRenderable(o){return this._graphicsBatchesHash[o.uid]||this._initBatchesForRenderable(o)}_initBatchesForRenderable(o){let l=o.context,f=this.renderer.graphicsContext.getGpuContext(l),v=this.renderer._roundPixels|o._roundPixels,b=f.batches.map(T=>{let S=pt.get(bo);return T.copyTo(S),S.renderable=o,S.roundPixels=v,S});return this._graphicsBatchesHash[o.uid]===void 0&&o.on("destroyed",this._destroyRenderableBound),this._graphicsBatchesHash[o.uid]=b,b}_removeBatchForRenderable(o){this._graphicsBatchesHash[o].forEach(l=>{pt.return(l)}),this._graphicsBatchesHash[o]=null}destroy(){this.renderer=null,this._adaptor.destroy(),this._adaptor=null,this.state=null;for(let o in this._graphicsBatchesHash)this._removeBatchForRenderable(o);this._graphicsBatchesHash=null}},Ab.extension={type:[Ke.WebGLPipes,Ke.WebGPUPipes,Ke.CanvasPipes],name:"graphics"}}),H6=D(()=>{Ot(),Cb(),es(),Kr.add(Ab),Kr.add(zg)}),Hy,_c=D(()=>{"use strict";Hy=class{constructor(){this.batcherName="default",this.packAsQuad=!1,this.indexOffset=0,this.attributeOffset=0,this.roundPixels=0,this._batcher=null,this._batch=null,this._uvUpdateId=-1,this._textureMatrixUpdateId=-1}get blendMode(){return this.renderable.groupBlendMode}get topology(){return this._topology||this.geometry.topology}set topology(o){this._topology=o}reset(){this.renderable=null,this.texture=null,this._batcher=null,this._batch=null,this.geometry=null,this._uvUpdateId=-1,this._textureMatrixUpdateId=-1}get uvs(){let o=this.geometry.getBuffer("aUV"),l=o.data,f=l,v=this.texture.textureMatrix;return v.isSimple||(f=this._transformedUvs,(this._textureMatrixUpdateId!==v._updateID||this._uvUpdateId!==o._updateID)&&((!f||f.length<l.length)&&(f=this._transformedUvs=new Float32Array(l.length)),this._textureMatrixUpdateId=v._updateID,this._uvUpdateId=o._updateID,v.multiplyUvs(l,f))),f}get positions(){return this.geometry.positions}get indices(){return this.geometry.indices}get color(){return this.renderable.groupColorAlpha}get groupTransform(){return this.renderable.groupTransform}get attributeSize(){return this.geometry.positions.length/2}get indexSize(){return this.geometry.indices.length}}}),Hg,IA=D(()=>{Ot(),Un(),th(),vl(),kg(),Ts(),Fp(),_c(),Hg=class{constructor(o,l){this.localUniforms=new il({uTransformMatrix:{value:new ji,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}}),this.localUniformsBindGroup=new Tu({0:this.localUniforms}),this._meshDataHash=Object.create(null),this._gpuBatchableMeshHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this.renderer=o,this._adaptor=l,this._adaptor.init(),o.renderableGC.addManagedHash(this,"_gpuBatchableMeshHash"),o.renderableGC.addManagedHash(this,"_meshDataHash")}validateRenderable(o){let l=this._getMeshData(o),f=l.batched,v=o.batched;if(l.batched=v,f!==v)return!0;if(v){let b=o._geometry;if(b.indices.length!==l.indexSize||b.positions.length!==l.vertexSize)return l.indexSize=b.indices.length,l.vertexSize=b.positions.length,!0;let T=this._getBatchableMesh(o),S=o.texture;if(T.texture._source!==S._source&&T.texture._source!==S._source)return!T._batcher.checkAndUpdateTexture(T,S)}return!1}addRenderable(o,l){let f=this.renderer.renderPipes.batch,{batched:v}=this._getMeshData(o);if(v){let b=this._getBatchableMesh(o);b.texture=o._texture,b.geometry=o._geometry,f.addToBatch(b,l)}else f.break(l),l.add(o)}updateRenderable(o){if(o.batched){let l=this._gpuBatchableMeshHash[o.uid];l.texture=o._texture,l.geometry=o._geometry,l._batcher.updateElement(l)}}destroyRenderable(o){this._meshDataHash[o.uid]=null;let l=this._gpuBatchableMeshHash[o.uid];l&&(pt.return(l),this._gpuBatchableMeshHash[o.uid]=null),o.off("destroyed",this._destroyRenderableBound)}execute(o){if(!o.isRenderable)return;o.state.blendMode=s0(o.groupBlendMode,o.texture._source);let l=this.localUniforms;l.uniforms.uTransformMatrix=o.groupTransform,l.uniforms.uRound=this.renderer._roundPixels|o._roundPixels,l.update(),jg(o.groupColorAlpha,l.uniforms.uColor,0),this._adaptor.execute(this,o)}_getMeshData(o){return this._meshDataHash[o.uid]||this._initMeshData(o)}_initMeshData(o){return this._meshDataHash[o.uid]={batched:o.batched,indexSize:o._geometry.indices?.length,vertexSize:o._geometry.positions?.length},o.on("destroyed",this._destroyRenderableBound),this._meshDataHash[o.uid]}_getBatchableMesh(o){return this._gpuBatchableMeshHash[o.uid]||this._initBatchableMesh(o)}_initBatchableMesh(o){let l=pt.get(Hy);return l.renderable=o,l.texture=o._texture,l.transform=o.groupTransform,l.roundPixels=this.renderer._roundPixels|o._roundPixels,this._gpuBatchableMeshHash[o.uid]=l,l}destroy(){for(let o in this._gpuBatchableMeshHash)this._gpuBatchableMeshHash[o]&&pt.return(this._gpuBatchableMeshHash[o]);this._gpuBatchableMeshHash=null,this._meshDataHash=null,this.localUniforms=null,this.localUniformsBindGroup=null,this._adaptor.destroy(),this._adaptor=null,this.renderer=null}},Hg.extension={type:[Ke.WebGLPipes,Ke.WebGPUPipes,Ke.CanvasPipes],name:"mesh"}}),V6=D(()=>{Ot(),IA(),Kr.add(Hg)}),Mb,Lb=D(()=>{"use strict";Mb=class{execute(o,l){let f=o.state,v=o.renderer,b=l.shader||o.defaultShader;b.resources.uTexture=l.texture._source,b.resources.uniforms=o.localUniforms;let T=v.gl,S=o.getBuffers(l);v.shader.bind(b),v.state.set(f),v.geometry.bind(S.geometry,b.glProgram);let R=S.geometry.indexBuffer.data.BYTES_PER_ELEMENT===2?T.UNSIGNED_SHORT:T.UNSIGNED_INT;T.drawElements(T.TRIANGLES,l.particleChildren.length*6,R,0)}}});function No(o,l=null){let f=o*6;if(f>65535?l=l||new Uint32Array(f):l=l||new Uint16Array(f),l.length!==f)throw new Error(`Out buffer length is incorrect, got ${l.length} and expected ${f}`);for(let v=0,b=0;v<f;v+=6,b+=4)l[v+0]=b+0,l[v+1]=b+1,l[v+2]=b+2,l[v+3]=b+0,l[v+4]=b+2,l[v+5]=b+3;return l}var Vg=D(()=>{"use strict"});function Wg(o){return{dynamicUpdate:zr(o,!0),staticUpdate:zr(o,!1)}}function zr(o,l){let f=[];f.push(`
      
        var index = 0;

        for (let i = 0; i < ps.length; ++i)
        {
            const p = ps[i];

            `);let v=0;for(let T in o){let S=o[T];if(l!==S.dynamic)continue;f.push(`offset = index + ${v}`),f.push(S.code);let R=ih(S.format);v+=R.stride/4}f.push(`
            index += stride * 4;
        }
    `),f.unshift(`
        var stride = ${v};
    `);let b=f.join(`
`);return new Function("ps","f32v","u32v",b)}var NA=D(()=>{kp()});function OA(o){let l=[];for(let f in o){let v=o[f];l.push(f,v.code,v.dynamic?"d":"s")}return l.join("_")}var Oo,$p=D(()=>{rh(),od(),o0(),kp(),Qw(),Vg(),NA(),Oo=class{constructor(o){this._size=0,this._generateParticleUpdateCache={};let l=this._size=o.size??1e3,f=o.properties,v=0,b=0;for(let W in f){let K=f[W],ee=ih(K.format);K.dynamic?b+=ee.stride:v+=ee.stride}this._dynamicStride=b/4,this._staticStride=v/4,this.staticAttributeBuffer=new a0(l*4*v),this.dynamicAttributeBuffer=new a0(l*4*b),this.indexBuffer=No(l);let T=new ld,S=0,R=0;this._staticBuffer=new ml({data:new Float32Array(1),label:"static-particle-buffer",shrinkToFit:!1,usage:pa.VERTEX|pa.COPY_DST}),this._dynamicBuffer=new ml({data:new Float32Array(1),label:"dynamic-particle-buffer",shrinkToFit:!1,usage:pa.VERTEX|pa.COPY_DST});for(let W in f){let K=f[W],ee=ih(K.format);K.dynamic?(T.addAttribute(K.attributeName,{buffer:this._dynamicBuffer,stride:this._dynamicStride*4,offset:S*4,format:K.format}),S+=ee.size):(T.addAttribute(K.attributeName,{buffer:this._staticBuffer,stride:this._staticStride*4,offset:R*4,format:K.format}),R+=ee.size)}T.addIndex(this.indexBuffer);let U=this.getParticleUpdate(f);this._dynamicUpload=U.dynamicUpdate,this._staticUpload=U.staticUpdate,this.geometry=T}getParticleUpdate(o){let l=OA(o);return this._generateParticleUpdateCache[l]?this._generateParticleUpdateCache[l]:(this._generateParticleUpdateCache[l]=this.generateParticleUpdate(o),this._generateParticleUpdateCache[l])}generateParticleUpdate(o){return Wg(o)}update(o,l){o.length>this._size&&(l=!0,this._size=Math.max(o.length,this._size*1.5|0),this.staticAttributeBuffer=new a0(this._size*this._staticStride*4*4),this.dynamicAttributeBuffer=new a0(this._size*this._dynamicStride*4*4),this.indexBuffer=No(this._size),this.geometry.indexBuffer.setDataWithSize(this.indexBuffer,this.indexBuffer.byteLength,!0));let f=this.dynamicAttributeBuffer;if(this._dynamicUpload(o,f.float32View,f.uint32View),this._dynamicBuffer.setDataWithSize(this.dynamicAttributeBuffer.float32View,o.length*this._dynamicStride*4,!0),l){let v=this.staticAttributeBuffer;this._staticUpload(o,v.float32View,v.uint32View),this._staticBuffer.setDataWithSize(v.float32View,o.length*this._staticStride*4,!0)}}destroy(){this._staticBuffer.destroy(),this._dynamicBuffer.destroy(),this.geometry.destroy()}}}),Yg,BA=D(()=>{Yg=`varying vec2 vUV;
varying vec4 vColor;

uniform sampler2D uTexture;

void main(void){
    vec4 color = texture2D(uTexture, vUV) * vColor;
    gl_FragColor = color;
}`}),W6,PA=D(()=>{W6=`attribute vec2 aVertex;
attribute vec2 aUV;
attribute vec4 aColor;

attribute vec2 aPosition;
attribute float aRotation;

uniform mat3 uTranslationMatrix;
uniform float uRound;
uniform vec2 uResolution;
uniform vec4 uColor;

varying vec2 vUV;
varying vec4 vColor;

vec2 roundPixels(vec2 position, vec2 targetSize)
{       
    return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
}

void main(void){
    float cosRotation = cos(aRotation);
    float sinRotation = sin(aRotation);
    float x = aVertex.x * cosRotation - aVertex.y * sinRotation;
    float y = aVertex.x * sinRotation + aVertex.y * cosRotation;

    vec2 v = vec2(x, y);
    v = v + aPosition;

    gl_Position = vec4((uTranslationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    if(uRound == 1.0)
    {
        gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
    }

    vUV = aUV;
    vColor = vec4(aColor.rgb * aColor.a, aColor.a) * uColor;
}
`}),qg,Rb=D(()=>{qg=`
struct ParticleUniforms {
  uProjectionMatrix:mat3x3<f32>,
  uColor:vec4<f32>,
  uResolution:vec2<f32>,
  uRoundPixels:f32,
};

@group(0) @binding(0) var<uniform> uniforms: ParticleUniforms;

@group(1) @binding(0) var uTexture: texture_2d<f32>;
@group(1) @binding(1) var uSampler : sampler;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>,
    @location(1) color : vec4<f32>,
  };
@vertex
fn mainVertex(
  @location(0) aVertex: vec2<f32>,
  @location(1) aPosition: vec2<f32>,
  @location(2) aUV: vec2<f32>,
  @location(3) aColor: vec4<f32>,
  @location(4) aRotation: f32,
) -> VSOutput {
  
   let v = vec2(
       aVertex.x * cos(aRotation) - aVertex.y * sin(aRotation),
       aVertex.x * sin(aRotation) + aVertex.y * cos(aRotation)
   ) + aPosition;

   let position = vec4((uniforms.uProjectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    let vColor = vec4(aColor.rgb * aColor.a, aColor.a) * uniforms.uColor;

  return VSOutput(
   position,
   aUV,
   vColor,
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @location(1) color: vec4<f32>,
  @builtin(position) position: vec4<f32>,
) -> @location(0) vec4<f32> {

    var sample = textureSample(uTexture, uSampler, uv) * color;
   
    return sample;
}`}),Vy,Db=D(()=>{nn(),Un(),l0(),Ep(),sh(),os(),$a(),BA(),PA(),Rb(),Vy=class extends Ns{constructor(){let o=ud.from({vertex:W6,fragment:Yg}),l=h0.from({fragment:{source:qg,entryPoint:"mainFragment"},vertex:{source:qg,entryPoint:"mainVertex"}});super({glProgram:o,gpuProgram:l,resources:{uTexture:fn.WHITE.source,uSampler:new da({}),uniforms:{uTranslationMatrix:{value:new ji,type:"mat3x3<f32>"},uColor:{value:new li(16777215),type:"vec4<f32>"},uRound:{value:1,type:"f32"},uResolution:{value:[0,0],type:"vec2<f32>"}}}})}}}),Xg,ho=D(()=>{Un(),vl(),kg(),Ih(),Fp(),$p(),Db(),Xg=class{constructor(o,l){this.state=Cu.for2d(),this._gpuBufferHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this.localUniforms=new il({uTranslationMatrix:{value:new ji,type:"mat3x3<f32>"},uColor:{value:new Float32Array(4),type:"vec4<f32>"},uRound:{value:1,type:"f32"},uResolution:{value:[0,0],type:"vec2<f32>"}}),this.renderer=o,this.adaptor=l,this.defaultShader=new Vy,this.state=Cu.for2d()}validateRenderable(o){return!1}addRenderable(o,l){this.renderer.renderPipes.batch.break(l),l.add(o)}getBuffers(o){return this._gpuBufferHash[o.uid]||this._initBuffer(o)}_initBuffer(o){return this._gpuBufferHash[o.uid]=new Oo({size:o.particleChildren.length,properties:o._properties}),o.on("destroyed",this._destroyRenderableBound),this._gpuBufferHash[o.uid]}updateRenderable(o){}destroyRenderable(o){this._gpuBufferHash[o.uid].destroy(),this._gpuBufferHash[o.uid]=null,o.off("destroyed",this._destroyRenderableBound)}execute(o){let l=o.particleChildren;if(l.length===0)return;let f=this.renderer,v=this.getBuffers(o);o.texture||(o.texture=l[0].texture);let b=this.state;v.update(l,o._childrenDirty),o._childrenDirty=!1,b.blendMode=s0(o.blendMode,o.texture._source);let T=this.localUniforms.uniforms,S=T.uTranslationMatrix;o.worldTransform.copyTo(S),S.prepend(f.globalUniforms.globalUniformData.projectionMatrix),T.uResolution=f.globalUniforms.globalUniformData.resolution,T.uRound=f._roundPixels|o._roundPixels,jg(o.groupColorAlpha,T.uColor,0),this.adaptor.execute(this,o)}destroy(){this.defaultShader&&(this.defaultShader.destroy(),this.defaultShader=null)}}}),Ks,Bo=D(()=>{Ot(),Lb(),ho(),Ks=class extends Xg{constructor(o){super(o,new Mb)}},Ks.extension={type:[Ke.WebGLPipes],name:"particle"}}),_o,Po=D(()=>{"use strict";_o=class{execute(o,l){let f=o.renderer,v=l.shader||o.defaultShader;v.groups[0]=f.renderPipes.uniformBatch.getUniformBindGroup(o.localUniforms,!0),v.groups[1]=f.texture.getTextureBindGroup(l.texture);let b=o.state,T=o.getBuffers(l);f.encoder.draw({geometry:T.geometry,shader:l.shader||o.defaultShader,state:b,size:l.particleChildren.length*6})}}}),Fo,$o=D(()=>{Ot(),Po(),ho(),Fo=class extends Xg{constructor(o){super(o,new _o)}},Fo.extension={type:[Ke.WebGPUPipes],name:"particle"}}),Ib=D(()=>{Ot(),Bo(),$o(),Kr.add(Ks),Kr.add(Fo)}),Kg,at=D(()=>{"use strict";Kg=class{constructor(){this.batcherName="default",this.topology="triangle-list",this.attributeSize=4,this.indexSize=6,this.packAsQuad=!0,this.roundPixels=0,this._attributeStart=0,this._batcher=null,this._batch=null}get blendMode(){return this.renderable.groupBlendMode}get color(){return this.renderable.groupColorAlpha}reset(){this.renderable=null,this.texture=null,this._batcher=null,this._batch=null,this.bounds=null}}}),Wy,Y6=D(()=>{Ot(),Zx(),Ts(),at(),Wy=class{constructor(o){this._gpuText=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=o,this._renderer.runners.resolutionChange.add(this),this._renderer.renderableGC.addManagedHash(this,"_gpuText")}resolutionChange(){for(let o in this._gpuText){let l=this._gpuText[o];if(!l)continue;let f=l.batchableSprite.renderable;f._autoResolution&&(f._resolution=this._renderer.resolution,f.onViewUpdate())}}validateRenderable(o){let l=this._getGpuText(o),f=o._getKey();return l.currentKey!==f}addRenderable(o,l){let f=this._getGpuText(o).batchableSprite;o._didTextUpdate&&this._updateText(o),this._renderer.renderPipes.batch.addToBatch(f,l)}updateRenderable(o){let l=this._getGpuText(o).batchableSprite;o._didTextUpdate&&this._updateText(o),l._batcher.updateElement(l)}destroyRenderable(o){o.off("destroyed",this._destroyRenderableBound),this._destroyRenderableById(o.uid)}_destroyRenderableById(o){let l=this._gpuText[o];this._renderer.canvasText.decreaseReferenceCount(l.currentKey),pt.return(l.batchableSprite),this._gpuText[o]=null}_updateText(o){let l=o._getKey(),f=this._getGpuText(o),v=f.batchableSprite;f.currentKey!==l&&this._updateGpuText(o),o._didTextUpdate=!1;let b=o._style.padding;fy(v.bounds,o._anchor,v.texture,b)}_updateGpuText(o){let l=this._getGpuText(o),f=l.batchableSprite;l.texture&&this._renderer.canvasText.decreaseReferenceCount(l.currentKey),l.texture=f.texture=this._renderer.canvasText.getManagedTexture(o),l.currentKey=o._getKey(),f.texture=l.texture}_getGpuText(o){return this._gpuText[o.uid]||this.initGpuText(o)}initGpuText(o){let l={texture:null,currentKey:"--",batchableSprite:pt.get(Kg)};return l.batchableSprite.renderable=o,l.batchableSprite.transform=o.groupTransform,l.batchableSprite.bounds={minX:0,maxX:1,minY:0,maxY:0},l.batchableSprite.roundPixels=this._renderer._roundPixels|o._roundPixels,this._gpuText[o.uid]=l,o._resolution=o._autoResolution?this._renderer.resolution:o.resolution,this._updateText(o),o.on("destroyed",this._destroyRenderableBound),l}destroy(){for(let o in this._gpuText)this._destroyRenderableById(o);this._gpuText=null,this._renderer=null}},Wy.extension={type:[Ke.WebGLPipes,Ke.WebGPUPipes,Ke.CanvasPipes],name:"text"}}),Nb,oh,Zg=D(()=>{Ye(),Sr(),Nb=class{constructor(o){this._canvasPool=Object.create(null),this.canvasOptions=o||{},this.enableFullScreen=!1}_createCanvasAndContext(o,l){let f=Ya.get().createCanvas();f.width=o,f.height=l;let v=f.getContext("2d");return{canvas:f,context:v}}getOptimalCanvasAndContext(o,l,f=1){o=Math.ceil(o*f-1e-6),l=Math.ceil(l*f-1e-6),o=wr(o),l=wr(l);let v=(o<<17)+(l<<1);this._canvasPool[v]||(this._canvasPool[v]=[]);let b=this._canvasPool[v].pop();return b||(b=this._createCanvasAndContext(o,l)),b}returnCanvasAndContext(o){let l=o.canvas,{width:f,height:v}=l,b=(f<<17)+(v<<1);o.context.clearRect(0,0,f,v),this._canvasPool[b].push(o)}clear(){this._canvasPool={}}},oh=new Nb});function Qg(o,l,f){for(let v=0,b=4*f*l;v<l;++v,b+=4)if(o[b+3]!==0)return!1;return!0}function Jg(o,l,f,v,b){let T=4*l;for(let S=v,R=v*T+4*f;S<=b;++S,R+=T)if(o[R+3]!==0)return!1;return!0}function Ob(o,l=1){let{width:f,height:v}=o,b=o.getContext("2d",{willReadFrequently:!0});if(b===null)throw new TypeError("Failed to get canvas 2D context");let T=b.getImageData(0,0,f,v).data,S=0,R=0,U=f-1,W=v-1;for(;R<v&&Qg(T,f,R);)++R;if(R===v)return te.EMPTY;for(;Qg(T,f,W);)--W;for(;Jg(T,f,S,R,W);)++S;for(;Jg(T,f,U,R,W);)--U;return++U,++W,new te(S/l,R/l,(U-S)/l,(W-R)/l)}var FA=D(()=>{ye()}),Qn,m0,Bb=D(()=>{nn(),Ye(),Un(),rb(),os(),hs(),Qn=class bte{constructor(l,f,v,b){this.uid=Ma("fillGradient"),this.type="linear",this.gradientStops=[],this._styleKey=null,this.x0=l,this.y0=f,this.x1=v,this.y1=b}addColorStop(l,f){return this.gradientStops.push({offset:l,color:li.shared.setValue(f).toHexa()}),this._styleKey=null,this}buildLinearGradient(){if(this.texture)return;let l=bte.defaultTextureSize,{gradientStops:f}=this,v=Ya.get().createCanvas();v.width=l,v.height=l;let b=v.getContext("2d"),T=b.createLinearGradient(0,0,bte.defaultTextureSize,1);for(let Ie=0;Ie<f.length;Ie++){let Ee=f[Ie];T.addColorStop(Ee.offset,Ee.color)}b.fillStyle=T,b.fillRect(0,0,l,l),this.texture=new fn({source:new iu({resource:v,addressModeU:"clamp-to-edge",addressModeV:"repeat"})});let{x0:S,y0:R,x1:U,y1:W}=this,K=new ji,ee=U-S,se=W-R,re=Math.sqrt(ee*ee+se*se),Me=Math.atan2(se,ee);K.translate(-S,-R),K.scale(1/l,1/l),K.rotate(-Me),K.scale(256/re,1),this.transform=K,this._styleKey=null}get styleKey(){if(this._styleKey)return this._styleKey;let l=this.gradientStops.map(b=>`${b.offset}-${b.color}`).join("-"),f=this.texture.uid,v=this.transform.toArray().join("-");return`fill-gradient-${this.uid}-${l}-${f}-${v}-${this.x0}-${this.y0}-${this.x1}-${this.y1}`}},Qn.defaultTextureSize=256,m0=Qn}),Pb,e1,Fb=D(()=>{Un(),hs(),Pb={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}},e1=class{constructor(o,l){this.uid=Ma("fillPattern"),this.transform=new ji,this._styleKey=null,this.texture=o,this.transform.scale(1/o.frame.width,1/o.frame.height),l&&(o.source.style.addressModeU=Pb[l].addressModeU,o.source.style.addressModeV=Pb[l].addressModeV)}setTransform(o){let l=this.texture;this.transform.copyFrom(o),this.transform.invert(),this.transform.scale(1/l.frame.width,1/l.frame.height),this._styleKey=null}get styleKey(){return this._styleKey?this._styleKey:(this._styleKey=`fill-pattern-${this.uid}-${this.texture.uid}-${this.transform.toArray().join("-")}`,this._styleKey)}}}),$A=hi((o,l)=>{l.exports=b;var f={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},v=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function b(R){var U=[];return R.replace(v,function(W,K,ee){var se=K.toLowerCase();for(ee=S(ee),se=="m"&&ee.length>2&&(U.push([K].concat(ee.splice(0,2))),se="l",K=K=="m"?"l":"L");;){if(ee.length==f[se])return ee.unshift(K),U.push(ee);if(ee.length<f[se])throw new Error("malformed path data");U.push([K].concat(ee.splice(0,f[se])))}}),U}var T=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function S(R){var U=R.match(T);return U?U.map(Number):[]}});function q6(o,l){let f=(0,zp.default)(o),v=[],b=null,T=0,S=0;for(let R=0;R<f.length;R++){let U=f[R],W=U[0],K=U;switch(W){case"M":T=K[1],S=K[2],l.moveTo(T,S);break;case"m":T+=K[1],S+=K[2],l.moveTo(T,S);break;case"H":T=K[1],l.lineTo(T,S);break;case"h":T+=K[1],l.lineTo(T,S);break;case"V":S=K[1],l.lineTo(T,S);break;case"v":S+=K[1],l.lineTo(T,S);break;case"L":T=K[1],S=K[2],l.lineTo(T,S);break;case"l":T+=K[1],S+=K[2],l.lineTo(T,S);break;case"C":T=K[5],S=K[6],l.bezierCurveTo(K[1],K[2],K[3],K[4],T,S);break;case"c":l.bezierCurveTo(T+K[1],S+K[2],T+K[3],S+K[4],T+K[5],S+K[6]),T+=K[5],S+=K[6];break;case"S":T=K[3],S=K[4],l.bezierCurveToShort(K[1],K[2],T,S);break;case"s":l.bezierCurveToShort(T+K[1],S+K[2],T+K[3],S+K[4]),T+=K[3],S+=K[4];break;case"Q":T=K[3],S=K[4],l.quadraticCurveTo(K[1],K[2],T,S);break;case"q":l.quadraticCurveTo(T+K[1],S+K[2],T+K[3],S+K[4]),T+=K[3],S+=K[4];break;case"T":T=K[1],S=K[2],l.quadraticCurveToShort(T,S);break;case"t":T+=K[1],S+=K[2],l.quadraticCurveToShort(T,S);break;case"A":T=K[6],S=K[7],l.arcToSvg(K[1],K[2],K[3],K[4],K[5],T,S);break;case"a":T+=K[6],S+=K[7],l.arcToSvg(K[1],K[2],K[3],K[4],K[5],T,S);break;case"Z":case"z":l.closePath(),v.length>0&&(b=v.pop(),b?(T=b.startX,S=b.startY):(T=0,S=0)),b=null;break;default:Gt(`Unknown SVG path command: ${W}`)}W!=="Z"&&W!=="z"&&b===null&&(b={startX:T,startY:S},v.push(b))}return l}var zp,$b=D(()=>{zp=Sn($A(),1),Ar()}),t1,X6=D(()=>{ye(),t1=class NNe{constructor(l=0,f=0,v=0){this.type="circle",this.x=l,this.y=f,this.radius=v}clone(){return new NNe(this.x,this.y,this.radius)}contains(l,f){if(this.radius<=0)return!1;let v=this.radius*this.radius,b=this.x-l,T=this.y-f;return b*=b,T*=T,b+T<=v}strokeContains(l,f,v){if(this.radius===0)return!1;let b=this.x-l,T=this.y-f,S=this.radius,R=v/2,U=Math.sqrt(b*b+T*T);return U<S+R&&U>S-R}getBounds(l){return l=l||new te,l.x=this.x-this.radius,l.y=this.y-this.radius,l.width=this.radius*2,l.height=this.radius*2,l}copyFrom(l){return this.x=l.x,this.y=l.y,this.radius=l.radius,this}copyTo(l){return l.copyFrom(this),l}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}}),K6,zA=D(()=>{ye(),K6=class ONe{constructor(l=0,f=0,v=0,b=0){this.type="ellipse",this.x=l,this.y=f,this.halfWidth=v,this.halfHeight=b}clone(){return new ONe(this.x,this.y,this.halfWidth,this.halfHeight)}contains(l,f){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let v=(l-this.x)/this.halfWidth,b=(f-this.y)/this.halfHeight;return v*=v,b*=b,v+b<=1}strokeContains(l,f,v){let{halfWidth:b,halfHeight:T}=this;if(b<=0||T<=0)return!1;let S=v/2,R=b-S,U=T-S,W=b+S,K=T+S,ee=l-this.x,se=f-this.y,re=ee*ee/(R*R)+se*se/(U*U),Me=ee*ee/(W*W)+se*se/(K*K);return re>1&&Me<=1}getBounds(l){return l=l||new te,l.x=this.x-this.halfWidth,l.y=this.y-this.halfHeight,l.width=this.halfWidth*2,l.height=this.halfHeight*2,l}copyFrom(l){return this.x=l.x,this.y=l.y,this.halfWidth=l.halfWidth,this.halfHeight=l.halfHeight,this}copyTo(l){return l.copyFrom(this),l}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}});function Z6(o,l,f,v,b,T){let S=o-f,R=l-v,U=b-f,W=T-v,K=S*U+R*W,ee=U*U+W*W,se=-1;ee!==0&&(se=K/ee);let re,Me;se<0?(re=f,Me=v):se>1?(re=b,Me=T):(re=f+se*U,Me=v+se*W);let Ie=o-re,Ee=l-Me;return Ie*Ie+Ee*Ee}var GA=D(()=>{"use strict"}),Gp,UA=D(()=>{GA(),ye(),Gp=class BNe{constructor(...l){this.type="polygon";let f=Array.isArray(l[0])?l[0]:l;if(typeof f[0]!="number"){let v=[];for(let b=0,T=f.length;b<T;b++)v.push(f[b].x,f[b].y);f=v}this.points=f,this.closePath=!0}clone(){let l=this.points.slice(),f=new BNe(l);return f.closePath=this.closePath,f}contains(l,f){let v=!1,b=this.points.length/2;for(let T=0,S=b-1;T<b;S=T++){let R=this.points[T*2],U=this.points[T*2+1],W=this.points[S*2],K=this.points[S*2+1];U>f!=K>f&&l<(W-R)*((f-U)/(K-U))+R&&(v=!v)}return v}strokeContains(l,f,v){let b=v/2,T=b*b,{points:S}=this,R=S.length-(this.closePath?0:2);for(let U=0;U<R;U+=2){let W=S[U],K=S[U+1],ee=S[(U+2)%S.length],se=S[(U+3)%S.length];if(Z6(l,f,W,K,ee,se)<=T)return!0}return!1}getBounds(l){l=l||new te;let f=this.points,v=1/0,b=-1/0,T=1/0,S=-1/0;for(let R=0,U=f.length;R<U;R+=2){let W=f[R],K=f[R+1];v=W<v?W:v,b=W>b?W:b,T=K<T?K:T,S=K>S?K:S}return l.x=v,l.width=b-v,l.y=T,l.height=S-T,l}copyFrom(l){return this.points=l.points.slice(),this.closePath=l.closePath,this}copyTo(l){return l.copyFrom(this),l}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((l,f)=>`${l}, ${f}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return this.points[this.points.length-2]}get y(){return this.points[this.points.length-1]}}}),r1,Q6,jA=D(()=>{ye(),r1=(o,l,f,v,b,T)=>{let S=o-f,R=l-v,U=Math.sqrt(S*S+R*R);return U>=b-T&&U<=b+T},Q6=class PNe{constructor(l=0,f=0,v=0,b=0,T=20){this.type="roundedRectangle",this.x=l,this.y=f,this.width=v,this.height=b,this.radius=T}getBounds(l){return l=l||new te,l.x=this.x,l.y=this.y,l.width=this.width,l.height=this.height,l}clone(){return new PNe(this.x,this.y,this.width,this.height,this.radius)}copyFrom(l){return this.x=l.x,this.y=l.y,this.width=l.width,this.height=l.height,this}copyTo(l){return l.copyFrom(this),l}contains(l,f){if(this.width<=0||this.height<=0)return!1;if(l>=this.x&&l<=this.x+this.width&&f>=this.y&&f<=this.y+this.height){let v=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(f>=this.y+v&&f<=this.y+this.height-v||l>=this.x+v&&l<=this.x+this.width-v)return!0;let b=l-(this.x+v),T=f-(this.y+v),S=v*v;if(b*b+T*T<=S||(b=l-(this.x+this.width-v),b*b+T*T<=S)||(T=f-(this.y+this.height-v),b*b+T*T<=S)||(b=l-(this.x+v),b*b+T*T<=S))return!0}return!1}strokeContains(l,f,v){let{x:b,y:T,width:S,height:R,radius:U}=this,W=v/2,K=b+U,ee=T+U,se=S-U*2,re=R-U*2,Me=b+S,Ie=T+R;return(l>=b-W&&l<=b+W||l>=Me-W&&l<=Me+W)&&f>=ee&&f<=ee+re||(f>=T-W&&f<=T+W||f>=Ie-W&&f<=Ie+W)&&l>=K&&l<=K+se?!0:l<K&&f<ee&&r1(l,f,K,ee,U,W)||l>Me-U&&f<ee&&r1(l,f,Me-U,ee,U,W)||l>Me-U&&f>Ie-U&&r1(l,f,Me-U,Ie-U,U,W)||l<K&&f>Ie-U&&r1(l,f,K,Ie-U,U,W)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}});function J6(o,l,f,v,b,T,S,R,U,W){let K=Math.min(.99,Math.max(0,W??zg.defaultOptions.bezierSmoothness)),ee=(tk-K)/1;return ee*=ee,HA(l,f,v,b,T,S,R,U,o,ee),o}function HA(o,l,f,v,b,T,S,R,U,W){zb(o,l,f,v,b,T,S,R,U,W,0),U.push(S,R)}function zb(o,l,f,v,b,T,S,R,U,W,K){if(K>ek)return;let ee=Math.PI,se=(o+f)/2,re=(l+v)/2,Me=(f+b)/2,Ie=(v+T)/2,Ee=(b+S)/2,Oe=(T+R)/2,et=(se+Me)/2,kt=(re+Ie)/2,it=(Me+Ee)/2,Lt=(Ie+Oe)/2,Dt=(et+it)/2,Pt=(kt+Lt)/2;if(K>0){let Jr=S-o,di=R-l,Ur=Math.abs((f-S)*di-(v-R)*Jr),$r=Math.abs((b-S)*di-(T-R)*Jr),Ki,gn;if(Ur>i1&&$r>i1){if((Ur+$r)*(Ur+$r)<=W*(Jr*Jr+di*di)){if(y0<Yy){U.push(Dt,Pt);return}let Ft=Math.atan2(T-v,b-f);if(Ki=Math.abs(Ft-Math.atan2(v-l,f-o)),gn=Math.abs(Math.atan2(R-T,S-b)-Ft),Ki>=ee&&(Ki=2*ee-Ki),gn>=ee&&(gn=2*ee-gn),Ki+gn<y0){U.push(Dt,Pt);return}if(pd!==0){if(Ki>pd){U.push(f,v);return}if(gn>pd){U.push(b,T);return}}}}else if(Ur>i1){if(Ur*Ur<=W*(Jr*Jr+di*di)){if(y0<Yy){U.push(Dt,Pt);return}if(Ki=Math.abs(Math.atan2(T-v,b-f)-Math.atan2(v-l,f-o)),Ki>=ee&&(Ki=2*ee-Ki),Ki<y0){U.push(f,v),U.push(b,T);return}if(pd!==0&&Ki>pd){U.push(f,v);return}}}else if($r>i1){if($r*$r<=W*(Jr*Jr+di*di)){if(y0<Yy){U.push(Dt,Pt);return}if(Ki=Math.abs(Math.atan2(R-T,S-b)-Math.atan2(T-v,b-f)),Ki>=ee&&(Ki=2*ee-Ki),Ki<y0){U.push(f,v),U.push(b,T);return}if(pd!==0&&Ki>pd){U.push(b,T);return}}}else if(Jr=Dt-(o+S)/2,di=Pt-(l+R)/2,Jr*Jr+di*di<=W){U.push(Dt,Pt);return}}zb(o,l,se,re,et,kt,Dt,Pt,U,W,K+1),zb(Dt,Pt,it,Lt,Ee,Oe,S,R,U,W,K+1)}var ek,i1,tk,Yy,y0,pd,rk=D(()=>{Cb(),ek=8,i1=11920929e-14,tk=1,Yy=.01,y0=0,pd=0});function VA(o,l,f,v,b,T,S,R){let U=Math.min(.99,Math.max(0,R??zg.defaultOptions.bezierSmoothness)),W=(ak-U)/1;return W*=W,WA(l,f,v,b,T,S,o,W),o}function WA(o,l,f,v,b,T,S,R){Gb(S,o,l,f,v,b,T,R,0),S.push(b,T)}function Gb(o,l,f,v,b,T,S,R,U){if(U>ik)return;let W=Math.PI,K=(l+v)/2,ee=(f+b)/2,se=(v+T)/2,re=(b+S)/2,Me=(K+se)/2,Ie=(ee+re)/2,Ee=T-l,Oe=S-f,et=Math.abs((v-T)*Oe-(b-S)*Ee);if(et>nk){if(et*et<=R*(Ee*Ee+Oe*Oe)){if(Ub<sk){o.push(Me,Ie);return}let kt=Math.abs(Math.atan2(S-b,T-v)-Math.atan2(b-f,v-l));if(kt>=W&&(kt=2*W-kt),kt<Ub){o.push(Me,Ie);return}}}else if(Ee=Me-(l+T)/2,Oe=Ie-(f+S)/2,Ee*Ee+Oe*Oe<=R){o.push(Me,Ie);return}Gb(o,l,f,K,ee,Me,Ie,R,U+1),Gb(o,Me,Ie,se,re,T,S,R,U+1)}var ik,nk,ak,sk,Ub,YA=D(()=>{Cb(),ik=8,nk=11920929e-14,ak=1,sk=.01,Ub=0});function ok(o,l,f,v,b,T,S,R){let U=Math.abs(b-T);(!S&&b>T||S&&T>b)&&(U=2*Math.PI-U),R=R||Math.max(6,Math.floor(6*Math.pow(v,1/3)*(U/Math.PI))),R=Math.max(R,3);let W=U/R,K=b;W*=S?-1:1;for(let ee=0;ee<R+1;ee++){let se=Math.cos(K),re=Math.sin(K),Me=l+se*v,Ie=f+re*v;o.push(Me,Ie),K+=W}}var lk=D(()=>{"use strict"});function qA(o,l,f,v,b,T){let S=o[o.length-2],R=o[o.length-1]-f,U=S-l,W=b-f,K=v-l,ee=Math.abs(R*K-U*W);if(ee<1e-8||T===0){(o[o.length-2]!==l||o[o.length-1]!==f)&&o.push(l,f);return}let se=R*R+U*U,re=W*W+K*K,Me=R*W+U*K,Ie=T*Math.sqrt(se)/ee,Ee=T*Math.sqrt(re)/ee,Oe=Ie*Me/se,et=Ee*Me/re,kt=Ie*K+Ee*U,it=Ie*W+Ee*R,Lt=U*(Ee+Oe),Dt=R*(Ee+Oe),Pt=K*(Ie+et),Jr=W*(Ie+et),di=Math.atan2(Dt-it,Lt-kt),Ur=Math.atan2(Jr-it,Pt-kt);ok(o,kt+l,it+f,T,di,Ur,U*W>K*R)}var XA=D(()=>{lk()});function KA(o,l){let f=l===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(l/4),v=l===1.5707963267948966?.551915024494:f,b=Math.cos(o),T=Math.sin(o),S=Math.cos(o+l),R=Math.sin(o+l);return[{x:b-T*v,y:T+b*v},{x:S+R*v,y:R-S*v},{x:S,y:R}]}function ZA(o,l,f,v,b,T,S,R=0,U=0,W=0){if(T===0||S===0)return;let K=Math.sin(R*Up/360),ee=Math.cos(R*Up/360),se=ee*(l-v)/2+K*(f-b)/2,re=-K*(l-v)/2+ee*(f-b)/2;if(se===0&&re===0)return;T=Math.abs(T),S=Math.abs(S);let Me=Math.pow(se,2)/Math.pow(T,2)+Math.pow(re,2)/Math.pow(S,2);Me>1&&(T*=Math.sqrt(Me),S*=Math.sqrt(Me)),xl(l,f,v,b,T,S,U,W,K,ee,se,re,n1);let{ang1:Ie,ang2:Ee}=n1,{centerX:Oe,centerY:et}=n1,kt=Math.abs(Ee)/(Up/4);Math.abs(1-kt)<1e-7&&(kt=1);let it=Math.max(Math.ceil(kt),1);Ee/=it;let Lt=o[o.length-2],Dt=o[o.length-1],Pt={x:0,y:0};for(let Jr=0;Jr<it;Jr++){let di=KA(Ie,Ee),{x:Ur,y:$r}=su(di[0],T,S,ee,K,Oe,et,Pt),{x:Ki,y:gn}=su(di[1],T,S,ee,K,Oe,et,Pt),{x:Ft,y:Ri}=su(di[2],T,S,ee,K,Oe,et,Pt);J6(o,Lt,Dt,Ur,$r,Ki,gn,Ft,Ri),Lt=Ft,Dt=Ri,Ie+=Ee}}var Up,n1,su,wc,xl,jp=D(()=>{rk(),Up=Math.PI*2,n1={centerX:0,centerY:0,ang1:0,ang2:0},su=({x:o,y:l},f,v,b,T,S,R,U)=>{o*=f,l*=v;let W=b*o-T*l,K=T*o+b*l;return U.x=W+S,U.y=K+R,U},wc=(o,l,f,v)=>{let b=o*v-l*f<0?-1:1,T=o*f+l*v;return T>1&&(T=1),T<-1&&(T=-1),b*Math.acos(T)},xl=(o,l,f,v,b,T,S,R,U,W,K,ee,se)=>{let re=Math.pow(b,2),Me=Math.pow(T,2),Ie=Math.pow(K,2),Ee=Math.pow(ee,2),Oe=re*Me-re*Ee-Me*Ie;Oe<0&&(Oe=0),Oe/=re*Ee+Me*Ie,Oe=Math.sqrt(Oe)*(S===R?-1:1);let et=Oe*b/T*ee,kt=Oe*-T/b*K,it=W*et-U*kt+(o+f)/2,Lt=U*et+W*kt+(l+v)/2,Dt=(K-et)/b,Pt=(ee-kt)/T,Jr=(-K-et)/b,di=(-ee-kt)/T,Ur=wc(1,0,Dt,Pt),$r=wc(Dt,Pt,Jr,di);R===0&&$r>0&&($r-=Up),R===1&&$r<0&&($r+=Up),se.centerX=it,se.centerY=Lt,se.ang1=Ur,se.ang2=$r}});function QA(o,l,f){let v=(S,R)=>{let U=R.x-S.x,W=R.y-S.y,K=Math.sqrt(U*U+W*W),ee=U/K,se=W/K;return{len:K,nx:ee,ny:se}},b=(S,R)=>{S===0?o.moveTo(R.x,R.y):o.lineTo(R.x,R.y)},T=l[l.length-1];for(let S=0;S<l.length;S++){let R=l[S%l.length],U=R.radius??f;if(U<=0){b(S,R),T=R;continue}let W=l[(S+1)%l.length],K=v(R,T),ee=v(R,W);if(K.len<1e-4||ee.len<1e-4){b(S,R),T=R;continue}let se=Math.asin(K.nx*ee.ny-K.ny*ee.nx),re=1,Me=!1;K.nx*ee.nx-K.ny*-ee.ny<0?se<0?se=Math.PI+se:(se=Math.PI-se,re=-1,Me=!0):se>0&&(re=-1,Me=!0);let Ie=se/2,Ee,Oe=Math.abs(Math.cos(Ie)*U/Math.sin(Ie));Oe>Math.min(K.len/2,ee.len/2)?(Oe=Math.min(K.len/2,ee.len/2),Ee=Math.abs(Oe*Math.sin(Ie)/Math.cos(Ie))):Ee=U;let et=R.x+ee.nx*Oe+-ee.ny*Ee*re,kt=R.y+ee.ny*Oe+ee.nx*Ee*re,it=Math.atan2(K.ny,K.nx)+Math.PI/2*re,Lt=Math.atan2(ee.ny,ee.nx)-Math.PI/2*re;S===0&&o.moveTo(et+Math.cos(it)*Ee,kt+Math.sin(it)*Ee),o.arc(et,kt,Ee,it,Lt,Me),T=R}}function JA(o,l,f,v){let b=(R,U)=>Math.sqrt((R.x-U.x)**2+(R.y-U.y)**2),T=(R,U,W)=>({x:R.x+(U.x-R.x)*W,y:R.y+(U.y-R.y)*W}),S=l.length;for(let R=0;R<S;R++){let U=l[(R+1)%S],W=U.radius??f;if(W<=0){R===0?o.moveTo(U.x,U.y):o.lineTo(U.x,U.y);continue}let K=l[R],ee=l[(R+2)%S],se=b(K,U),re;if(se<1e-4)re=U;else{let Ee=Math.min(se/2,W);re=T(U,K,Ee/se)}let Me=b(ee,U),Ie;if(Me<1e-4)Ie=U;else{let Ee=Math.min(Me/2,W);Ie=T(U,ee,Ee/Me)}R===0?o.moveTo(re.x,re.y):o.lineTo(re.x,re.y),o.quadraticCurveTo(U.x,U.y,Ie.x,Ie.y,v)}}var e9=D(()=>{"use strict"}),jb,uk,t9=D(()=>{X6(),zA(),UA(),ye(),jA(),$e(),rk(),YA(),lk(),XA(),jp(),e9(),jb=new te,uk=class{constructor(o){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new Re,this._graphicsPath2D=o}moveTo(o,l){return this.startPoly(o,l),this}lineTo(o,l){this._ensurePoly();let f=this._currentPoly.points,v=f[f.length-2],b=f[f.length-1];return(v!==o||b!==l)&&f.push(o,l),this}arc(o,l,f,v,b,T){this._ensurePoly(!1);let S=this._currentPoly.points;return ok(S,o,l,f,v,b,T),this}arcTo(o,l,f,v,b){this._ensurePoly();let T=this._currentPoly.points;return qA(T,o,l,f,v,b),this}arcToSvg(o,l,f,v,b,T,S){let R=this._currentPoly.points;return ZA(R,this._currentPoly.lastX,this._currentPoly.lastY,T,S,o,l,f,v,b),this}bezierCurveTo(o,l,f,v,b,T,S){this._ensurePoly();let R=this._currentPoly;return J6(this._currentPoly.points,R.lastX,R.lastY,o,l,f,v,b,T,S),this}quadraticCurveTo(o,l,f,v,b){this._ensurePoly();let T=this._currentPoly;return VA(this._currentPoly.points,T.lastX,T.lastY,o,l,f,v,b),this}closePath(){return this.endPoly(!0),this}addPath(o,l){this.endPoly(),l&&!l.isIdentity()&&(o=o.clone(!0),o.transform(l));for(let f=0;f<o.instructions.length;f++){let v=o.instructions[f];this[v.action](...v.data)}return this}finish(o=!1){this.endPoly(o)}rect(o,l,f,v,b){return this.drawShape(new te(o,l,f,v),b),this}circle(o,l,f,v){return this.drawShape(new t1(o,l,f),v),this}poly(o,l,f){let v=new Gp(o);return v.closePath=l,this.drawShape(v,f),this}regularPoly(o,l,f,v,b=0,T){v=Math.max(v|0,3);let S=-1*Math.PI/2+b,R=Math.PI*2/v,U=[];for(let W=0;W<v;W++){let K=W*R+S;U.push(o+f*Math.cos(K),l+f*Math.sin(K))}return this.poly(U,!0,T),this}roundPoly(o,l,f,v,b,T=0,S){if(v=Math.max(v|0,3),b<=0)return this.regularPoly(o,l,f,v,T);let R=f*Math.sin(Math.PI/v)-.001;b=Math.min(b,R);let U=-1*Math.PI/2+T,W=Math.PI*2/v,K=(v-2)*Math.PI/v/2;for(let ee=0;ee<v;ee++){let se=ee*W+U,re=o+f*Math.cos(se),Me=l+f*Math.sin(se),Ie=se+Math.PI+K,Ee=se-Math.PI-K,Oe=re+b*Math.cos(Ie),et=Me+b*Math.sin(Ie),kt=re+b*Math.cos(Ee),it=Me+b*Math.sin(Ee);ee===0?this.moveTo(Oe,et):this.lineTo(Oe,et),this.quadraticCurveTo(re,Me,kt,it,S)}return this.closePath()}roundShape(o,l,f=!1,v){return o.length<3?this:(f?JA(this,o,l,v):QA(this,o,l),this.closePath())}filletRect(o,l,f,v,b){if(b===0)return this.rect(o,l,f,v);let T=Math.min(f,v)/2,S=Math.min(T,Math.max(-T,b)),R=o+f,U=l+v,W=S<0?-S:0,K=Math.abs(S);return this.moveTo(o,l+K).arcTo(o+W,l+W,o+K,l,K).lineTo(R-K,l).arcTo(R-W,l+W,R,l+K,K).lineTo(R,U-K).arcTo(R-W,U-W,o+f-K,U,K).lineTo(o+K,U).arcTo(o+W,U-W,o,U-K,K).closePath()}chamferRect(o,l,f,v,b,T){if(b<=0)return this.rect(o,l,f,v);let S=Math.min(b,Math.min(f,v)/2),R=o+f,U=l+v,W=[o+S,l,R-S,l,R,l+S,R,U-S,R-S,U,o+S,U,o,U-S,o,l+S];for(let K=W.length-1;K>=2;K-=2)W[K]===W[K-2]&&W[K-1]===W[K-3]&&W.splice(K-1,2);return this.poly(W,!0,T)}ellipse(o,l,f,v,b){return this.drawShape(new K6(o,l,f,v),b),this}roundRect(o,l,f,v,b,T){return this.drawShape(new Q6(o,l,f,v,b),T),this}drawShape(o,l){return this.endPoly(),this.shapePrimitives.push({shape:o,transform:l}),this}startPoly(o,l){let f=this._currentPoly;return f&&this.endPoly(),f=new Gp,f.points.push(o,l),this._currentPoly=f,this}endPoly(o=!1){let l=this._currentPoly;return l&&l.points.length>2&&(l.closePath=o,this.shapePrimitives.push({shape:l})),this._currentPoly=null,this}_ensurePoly(o=!0){if(!this._currentPoly&&(this._currentPoly=new Gp,o)){let l=this.shapePrimitives[this.shapePrimitives.length-1];if(l){let f=l.shape.x,v=l.shape.y;if(l.transform&&!l.transform.isIdentity()){let b=l.transform,T=f;f=b.a*f+b.c*v+b.tx,v=b.b*T+b.d*v+b.ty}this._currentPoly.points.push(f,v)}else this._currentPoly.points.push(0,0)}}buildPath(){let o=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let l=0;l<o.instructions.length;l++){let f=o.instructions[l];this[f.action](...f.data)}this.finish()}get bounds(){let o=this._bounds;o.clear();let l=this.shapePrimitives;for(let f=0;f<l.length;f++){let v=l[f],b=v.shape.getBounds(jb);v.transform?o.addRect(b,v.transform):o.addRect(b)}return o}}});function Hp(o,l){return o?o.prepend(l):l.clone()}var Ji,a1=D(()=>{Gs(),hs(),Ar(),$b(),t9(),Ji=class FNe{constructor(l){this.instructions=[],this.uid=Ma("graphicsPath"),this._dirty=!0,typeof l=="string"?q6(l,this):this.instructions=l?.slice()??[]}get shapePath(){return this._shapePath||(this._shapePath=new uk(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(l,f){return l=l.clone(),this.instructions.push({action:"addPath",data:[l,f]}),this._dirty=!0,this}arc(...l){return this.instructions.push({action:"arc",data:l}),this._dirty=!0,this}arcTo(...l){return this.instructions.push({action:"arcTo",data:l}),this._dirty=!0,this}arcToSvg(...l){return this.instructions.push({action:"arcToSvg",data:l}),this._dirty=!0,this}bezierCurveTo(...l){return this.instructions.push({action:"bezierCurveTo",data:l}),this._dirty=!0,this}bezierCurveToShort(l,f,v,b,T){let S=this.instructions[this.instructions.length-1],R=this.getLastPoint(Mn.shared),U=0,W=0;if(!S||S.action!=="bezierCurveTo")U=R.x,W=R.y;else{U=S.data[2],W=S.data[3];let K=R.x,ee=R.y;U=K+(K-U),W=ee+(ee-W)}return this.instructions.push({action:"bezierCurveTo",data:[U,W,l,f,v,b,T]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...l){return this.instructions.push({action:"ellipse",data:l}),this._dirty=!0,this}lineTo(...l){return this.instructions.push({action:"lineTo",data:l}),this._dirty=!0,this}moveTo(...l){return this.instructions.push({action:"moveTo",data:l}),this}quadraticCurveTo(...l){return this.instructions.push({action:"quadraticCurveTo",data:l}),this._dirty=!0,this}quadraticCurveToShort(l,f,v){let b=this.instructions[this.instructions.length-1],T=this.getLastPoint(Mn.shared),S=0,R=0;if(!b||b.action!=="quadraticCurveTo")S=T.x,R=T.y;else{S=b.data[0],R=b.data[1];let U=T.x,W=T.y;S=U+(U-S),R=W+(W-R)}return this.instructions.push({action:"quadraticCurveTo",data:[S,R,l,f,v]}),this._dirty=!0,this}rect(l,f,v,b,T){return this.instructions.push({action:"rect",data:[l,f,v,b,T]}),this._dirty=!0,this}circle(l,f,v,b){return this.instructions.push({action:"circle",data:[l,f,v,b]}),this._dirty=!0,this}roundRect(...l){return this.instructions.push({action:"roundRect",data:l}),this._dirty=!0,this}poly(...l){return this.instructions.push({action:"poly",data:l}),this._dirty=!0,this}regularPoly(...l){return this.instructions.push({action:"regularPoly",data:l}),this._dirty=!0,this}roundPoly(...l){return this.instructions.push({action:"roundPoly",data:l}),this._dirty=!0,this}roundShape(...l){return this.instructions.push({action:"roundShape",data:l}),this._dirty=!0,this}filletRect(...l){return this.instructions.push({action:"filletRect",data:l}),this._dirty=!0,this}chamferRect(...l){return this.instructions.push({action:"chamferRect",data:l}),this._dirty=!0,this}star(l,f,v,b,T,S,R){T=T||b/2;let U=-1*Math.PI/2+S,W=v*2,K=Math.PI*2/W,ee=[];for(let se=0;se<W;se++){let re=se%2?T:b,Me=se*K+U;ee.push(l+re*Math.cos(Me),f+re*Math.sin(Me))}return this.poly(ee,!0,R),this}clone(l=!1){let f=new FNe;if(!l)f.instructions=this.instructions.slice();else for(let v=0;v<this.instructions.length;v++){let b=this.instructions[v];f.instructions.push({action:b.action,data:b.data.slice()})}return f}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(l){if(l.isIdentity())return this;let f=l.a,v=l.b,b=l.c,T=l.d,S=l.tx,R=l.ty,U=0,W=0,K=0,ee=0,se=0,re=0,Me=0,Ie=0;for(let Ee=0;Ee<this.instructions.length;Ee++){let Oe=this.instructions[Ee],et=Oe.data;switch(Oe.action){case"moveTo":case"lineTo":U=et[0],W=et[1],et[0]=f*U+b*W+S,et[1]=v*U+T*W+R;break;case"bezierCurveTo":K=et[0],ee=et[1],se=et[2],re=et[3],U=et[4],W=et[5],et[0]=f*K+b*ee+S,et[1]=v*K+T*ee+R,et[2]=f*se+b*re+S,et[3]=v*se+T*re+R,et[4]=f*U+b*W+S,et[5]=v*U+T*W+R;break;case"quadraticCurveTo":K=et[0],ee=et[1],U=et[2],W=et[3],et[0]=f*K+b*ee+S,et[1]=v*K+T*ee+R,et[2]=f*U+b*W+S,et[3]=v*U+T*W+R;break;case"arcToSvg":U=et[5],W=et[6],Me=et[0],Ie=et[1],et[0]=f*Me+b*Ie,et[1]=v*Me+T*Ie,et[5]=f*U+b*W+S,et[6]=v*U+T*W+R;break;case"circle":et[4]=Hp(et[3],l);break;case"rect":et[4]=Hp(et[4],l);break;case"ellipse":et[8]=Hp(et[8],l);break;case"roundRect":et[5]=Hp(et[5],l);break;case"addPath":et[0].transform(l);break;case"poly":et[2]=Hp(et[2],l);break;default:Gt("unknown transform action",Oe.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(l){let f=this.instructions.length-1,v=this.instructions[f];if(!v)return l.x=0,l.y=0,l;for(;v.action==="closePath";){if(f--,f<0)return l.x=0,l.y=0,l;v=this.instructions[f]}switch(v.action){case"moveTo":case"lineTo":l.x=v.data[0],l.y=v.data[1];break;case"quadraticCurveTo":l.x=v.data[2],l.y=v.data[3];break;case"bezierCurveTo":l.x=v.data[4],l.y=v.data[5];break;case"arc":case"arcToSvg":l.x=v.data[5],l.y=v.data[6];break;case"addPath":v.data[0].getLastPoint(l);break}return l}}});function fd(o,l){if(typeof o=="string"){let v=document.createElement("div");v.innerHTML=o.trim(),o=v.querySelector("svg")}let f={context:l,path:new Ji};return Hb(o,f,null,null),l}function Hb(o,l,f,v){let b=o.children,{fillStyle:T,strokeStyle:S}=Vb(o);T&&f?f={...f,...T}:T&&(f=T),S&&v?v={...v,...S}:S&&(v=S),l.context.fillStyle=f,l.context.strokeStyle=v;let R,U,W,K,ee,se,re,Me,Ie,Ee,Oe,et,kt,it,Lt,Dt,Pt;switch(o.nodeName.toLowerCase()){case"path":it=o.getAttribute("d"),Lt=new Ji(it),l.context.path(Lt),f&&l.context.fill(),v&&l.context.stroke();break;case"circle":re=Cs(o,"cx",0),Me=Cs(o,"cy",0),Ie=Cs(o,"r",0),l.context.ellipse(re,Me,Ie,Ie),f&&l.context.fill(),v&&l.context.stroke();break;case"rect":R=Cs(o,"x",0),U=Cs(o,"y",0),Dt=Cs(o,"width",0),Pt=Cs(o,"height",0),Ee=Cs(o,"rx",0),Oe=Cs(o,"ry",0),Ee||Oe?l.context.roundRect(R,U,Dt,Pt,Ee||Oe):l.context.rect(R,U,Dt,Pt),f&&l.context.fill(),v&&l.context.stroke();break;case"ellipse":re=Cs(o,"cx",0),Me=Cs(o,"cy",0),Ee=Cs(o,"rx",0),Oe=Cs(o,"ry",0),l.context.beginPath(),l.context.ellipse(re,Me,Ee,Oe),f&&l.context.fill(),v&&l.context.stroke();break;case"line":W=Cs(o,"x1",0),K=Cs(o,"y1",0),ee=Cs(o,"x2",0),se=Cs(o,"y2",0),l.context.beginPath(),l.context.moveTo(W,K),l.context.lineTo(ee,se),v&&l.context.stroke();break;case"polygon":kt=o.getAttribute("points"),et=kt.match(/\d+/g).map(Jr=>parseInt(Jr,10)),l.context.poly(et,!0),f&&l.context.fill(),v&&l.context.stroke();break;case"polyline":kt=o.getAttribute("points"),et=kt.match(/\d+/g).map(Jr=>parseInt(Jr,10)),l.context.poly(et,!1),v&&l.context.stroke();break;case"g":case"svg":break;default:{console.info(`[SVG parser] <${o.nodeName}> elements unsupported`);break}}for(let Jr=0;Jr<b.length;Jr++)Hb(b[Jr],l,f,v)}function Cs(o,l,f){let v=o.getAttribute(l);return v?Number(v):f}function Vb(o){let l=o.getAttribute("style"),f={},v={},b=!1,T=!1;if(l){let S=l.split(";");for(let R=0;R<S.length;R++){let U=S[R],[W,K]=U.split(":");switch(W){case"stroke":K!=="none"&&(f.color=li.shared.setValue(K).toNumber(),T=!0);break;case"stroke-width":f.width=Number(K);break;case"fill":K!=="none"&&(b=!0,v.color=li.shared.setValue(K).toNumber());break;case"fill-opacity":v.alpha=Number(K);break;case"stroke-opacity":f.alpha=Number(K);break;case"opacity":v.alpha=Number(K),f.alpha=Number(K);break}}}else{let S=o.getAttribute("stroke");S&&S!=="none"&&(T=!0,f.color=li.shared.setValue(S).toNumber(),f.width=Cs(o,"stroke-width",1));let R=o.getAttribute("fill");R&&R!=="none"&&(b=!0,v.color=li.shared.setValue(R).toNumber())}return{strokeStyle:T?f:null,fillStyle:b?v:null}}var Zs=D(()=>{nn(),a1()});function qy(o){return li.isColorLike(o)}function Xy(o){return o instanceof e1}function hk(o){return o instanceof m0}function r9(o,l,f){let v=li.shared.setValue(l??0);return o.color=v.toNumber(),o.alpha=v.alpha===1?f.alpha:v.alpha,o.texture=fn.WHITE,{...f,...o}}function ck(o,l,f){return o.fill=l,o.color=16777215,o.texture=l.texture,o.matrix=l.transform,{...f,...o}}function dk(o,l,f){return l.buildLinearGradient(),o.fill=l,o.color=16777215,o.texture=l.texture,o.matrix=l.transform,{...f,...o}}function i9(o,l){let f={...l,...o};if(f.texture){if(f.texture!==fn.WHITE){let T=f.matrix?.clone().invert()||new ji;T.translate(f.texture.frame.x,f.texture.frame.y),T.scale(1/f.texture.source.width,1/f.texture.source.height),f.matrix=T}let b=f.texture.source.style;b.addressMode==="clamp-to-edge"&&(b.addressMode="repeat",b.update())}let v=li.shared.setValue(f.color);return f.alpha*=v.alpha,f.color=v.toNumber(),f.matrix=f.matrix?f.matrix.clone():null,f}function gd(o,l){if(o==null)return null;let f={},v=o;return qy(o)?r9(f,o,l):Xy(o)?ck(f,o,l):hk(o)?dk(f,o,l):v.fill&&Xy(v.fill)?ck(v,v.fill,l):v.fill&&hk(v.fill)?dk(v,v.fill,l):i9(v,l)}function Ky(o,l){let{width:f,alignment:v,miterLimit:b,cap:T,join:S,pixelLine:R,...U}=l,W=gd(o,U);return W?{width:f,alignment:v,miterLimit:b,cap:T,join:S,pixelLine:R,...W}:null}var pk=D(()=>{nn(),Un(),os(),Bb(),Fb()}),fk,Wb,kc,Su,Yb=D(()=>{Ir(),nn(),Un(),Gs(),os(),hs(),Sa(),$e(),a1(),Zs(),pk(),fk=new Mn,Wb=new ji,kc=class sp extends jr{constructor(){super(...arguments),this.uid=Ma("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new Ji,this._transform=new ji,this._fillStyle={...sp.defaultFillStyle},this._strokeStyle={...sp.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new Re,this._boundsDirty=!0}clone(){let l=new sp;return l.batchMode=this.batchMode,l.instructions=this.instructions.slice(),l._activePath=this._activePath.clone(),l._transform=this._transform.clone(),l._fillStyle={...this._fillStyle},l._strokeStyle={...this._strokeStyle},l._stateStack=this._stateStack.slice(),l._bounds=this._bounds.clone(),l._boundsDirty=!0,l}get fillStyle(){return this._fillStyle}set fillStyle(l){this._fillStyle=gd(l,sp.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(l){this._strokeStyle=Ky(l,sp.defaultStrokeStyle)}setFillStyle(l){return this._fillStyle=gd(l,sp.defaultFillStyle),this}setStrokeStyle(l){return this._strokeStyle=gd(l,sp.defaultStrokeStyle),this}texture(l,f,v,b,T,S){return this.instructions.push({action:"texture",data:{image:l,dx:v||0,dy:b||0,dw:T||l.frame.width,dh:S||l.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:f?li.shared.setValue(f).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new Ji,this}fill(l,f){let v,b=this.instructions[this.instructions.length-1];return this._tick===0&&b&&b.action==="stroke"?v=b.data.path:v=this._activePath.clone(),v?(l!=null&&(f!==void 0&&typeof l=="number"&&(Wn(Cr,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),l={color:l,alpha:f}),this._fillStyle=gd(l,sp.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:v}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){let{x:l,y:f}=this._activePath.getLastPoint(Mn.shared);this._activePath.clear(),this._activePath.moveTo(l,f)}stroke(l){let f,v=this.instructions[this.instructions.length-1];return this._tick===0&&v&&v.action==="fill"?f=v.data.path:f=this._activePath.clone(),f?(l!=null&&(this._strokeStyle=Ky(l,sp.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:f}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let l=0;l<2;l++){let f=this.instructions[this.instructions.length-1-l],v=this._activePath.clone();if(f&&(f.action==="stroke"||f.action==="fill"))if(f.data.hole)f.data.hole.addPath(v);else{f.data.hole=v;break}}return this._initNextPathLocation(),this}arc(l,f,v,b,T,S){this._tick++;let R=this._transform;return this._activePath.arc(R.a*l+R.c*f+R.tx,R.b*l+R.d*f+R.ty,v,b,T,S),this}arcTo(l,f,v,b,T){this._tick++;let S=this._transform;return this._activePath.arcTo(S.a*l+S.c*f+S.tx,S.b*l+S.d*f+S.ty,S.a*v+S.c*b+S.tx,S.b*v+S.d*b+S.ty,T),this}arcToSvg(l,f,v,b,T,S,R){this._tick++;let U=this._transform;return this._activePath.arcToSvg(l,f,v,b,T,U.a*S+U.c*R+U.tx,U.b*S+U.d*R+U.ty),this}bezierCurveTo(l,f,v,b,T,S,R){this._tick++;let U=this._transform;return this._activePath.bezierCurveTo(U.a*l+U.c*f+U.tx,U.b*l+U.d*f+U.ty,U.a*v+U.c*b+U.tx,U.b*v+U.d*b+U.ty,U.a*T+U.c*S+U.tx,U.b*T+U.d*S+U.ty,R),this}closePath(){return this._tick++,this._activePath?.closePath(),this}ellipse(l,f,v,b){return this._tick++,this._activePath.ellipse(l,f,v,b,this._transform.clone()),this}circle(l,f,v){return this._tick++,this._activePath.circle(l,f,v,this._transform.clone()),this}path(l){return this._tick++,this._activePath.addPath(l,this._transform.clone()),this}lineTo(l,f){this._tick++;let v=this._transform;return this._activePath.lineTo(v.a*l+v.c*f+v.tx,v.b*l+v.d*f+v.ty),this}moveTo(l,f){this._tick++;let v=this._transform,b=this._activePath.instructions,T=v.a*l+v.c*f+v.tx,S=v.b*l+v.d*f+v.ty;return b.length===1&&b[0].action==="moveTo"?(b[0].data[0]=T,b[0].data[1]=S,this):(this._activePath.moveTo(T,S),this)}quadraticCurveTo(l,f,v,b,T){this._tick++;let S=this._transform;return this._activePath.quadraticCurveTo(S.a*l+S.c*f+S.tx,S.b*l+S.d*f+S.ty,S.a*v+S.c*b+S.tx,S.b*v+S.d*b+S.ty,T),this}rect(l,f,v,b){return this._tick++,this._activePath.rect(l,f,v,b,this._transform.clone()),this}roundRect(l,f,v,b,T){return this._tick++,this._activePath.roundRect(l,f,v,b,T,this._transform.clone()),this}poly(l,f){return this._tick++,this._activePath.poly(l,f,this._transform.clone()),this}regularPoly(l,f,v,b,T=0,S){return this._tick++,this._activePath.regularPoly(l,f,v,b,T,S),this}roundPoly(l,f,v,b,T,S){return this._tick++,this._activePath.roundPoly(l,f,v,b,T,S),this}roundShape(l,f,v,b){return this._tick++,this._activePath.roundShape(l,f,v,b),this}filletRect(l,f,v,b,T){return this._tick++,this._activePath.filletRect(l,f,v,b,T),this}chamferRect(l,f,v,b,T,S){return this._tick++,this._activePath.chamferRect(l,f,v,b,T,S),this}star(l,f,v,b,T=0,S=0){return this._tick++,this._activePath.star(l,f,v,b,T,S,this._transform.clone()),this}svg(l){return this._tick++,fd(l,this),this}restore(){let l=this._stateStack.pop();return l&&(this._transform=l.transform,this._fillStyle=l.fillStyle,this._strokeStyle=l.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(l){return this._transform.rotate(l),this}scale(l,f=l){return this._transform.scale(l,f),this}setTransform(l,f,v,b,T,S){return l instanceof ji?(this._transform.set(l.a,l.b,l.c,l.d,l.tx,l.ty),this):(this._transform.set(l,f,v,b,T,S),this)}transform(l,f,v,b,T,S){return l instanceof ji?(this._transform.append(l),this):(Wb.set(l,f,v,b,T,S),this._transform.append(Wb),this)}translate(l,f=l){return this._transform.translate(l,f),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this.dirty||(this.emit("update",this,16),this.dirty=!0,this._boundsDirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;let l=this._bounds;l.clear();for(let f=0;f<this.instructions.length;f++){let v=this.instructions[f],b=v.action;if(b==="fill"){let T=v.data;l.addBounds(T.path.bounds)}else if(b==="texture"){let T=v.data;l.addFrame(T.dx,T.dy,T.dx+T.dw,T.dy+T.dh,T.transform)}if(b==="stroke"){let T=v.data,S=T.style.alignment,R=T.style.width*(1-S),U=T.path.bounds;l.addFrame(U.minX-R,U.minY-R,U.maxX+R,U.maxY+R)}}return l}containsPoint(l){if(!this.bounds.containsPoint(l.x,l.y))return!1;let f=this.instructions,v=!1;for(let b=0;b<f.length;b++){let T=f[b],S=T.data,R=S.path;if(!T.action||!R)continue;let U=S.style,W=R.shapePath.shapePrimitives;for(let K=0;K<W.length;K++){let ee=W[K].shape;if(!U||!ee)continue;let se=W[K].transform,re=se?se.applyInverse(l,fk):l;T.action==="fill"?v=ee.contains(re.x,re.y):v=ee.strokeContains(re.x,re.y,U.width);let Me=S.hole;if(Me){let Ie=Me.shapePath?.shapePrimitives;if(Ie)for(let Ee=0;Ee<Ie.length;Ee++)Ie[Ee].shape.contains(re.x,re.y)&&(v=!1)}if(v)return!0}}return v}destroy(l=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof l=="boolean"?l:l?.texture){let f=typeof l=="boolean"?l:l?.textureSource;this._fillStyle.texture&&this._fillStyle.texture.destroy(f),this._strokeStyle.texture&&this._strokeStyle.texture.destroy(f)}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}},kc.defaultFillStyle={color:16777215,alpha:1,texture:fn.WHITE,matrix:null,fill:null},kc.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:fn.WHITE,matrix:null,fill:null,pixelLine:!1},Su=kc});function gk(o){let l=[],f=0;for(let v=0;v<qb.length;v++){let b=`_${qb[v]}`;l[f++]=o[b]}return f=mk(o._fill,l,f),f=n9(o._stroke,l,f),f=a9(o.dropShadow,l,f),l.join("-")}function mk(o,l,f){return o&&(l[f++]=o.color,l[f++]=o.alpha,l[f++]=o.fill?.styleKey),f}function n9(o,l,f){return o&&(f=mk(o,l,f),l[f++]=o.width,l[f++]=o.alignment,l[f++]=o.cap,l[f++]=o.join,l[f++]=o.miterLimit),f}function a9(o,l,f){return o&&(l[f++]=o.alpha,l[f++]=o.angle,l[f++]=o.blur,l[f++]=o.distance,l[f++]=li.shared.setValue(o.color).toNumber()),f}var qb,Xb=D(()=>{nn(),qb=["align","breakWords","cssOverrides","fontVariant","fontWeight","leading","letterSpacing","lineHeight","padding","textBaseline","trim","whiteSpace","wordWrap","wordWrapWidth","fontFamily","fontStyle","fontSize"]});function Kb(o){let l=o;if(typeof l.dropShadow=="boolean"&&l.dropShadow){let f=ou.defaultDropShadow;o.dropShadow={alpha:l.dropShadowAlpha??f.alpha,angle:l.dropShadowAngle??f.angle,blur:l.dropShadowBlur??f.blur,color:l.dropShadowColor??f.color,distance:l.dropShadowDistance??f.distance}}if(l.strokeThickness!==void 0){Wn(Cr,"strokeThickness is now a part of stroke");let f=l.stroke,v={};if(li.isColorLike(f))v.color=f;else if(f instanceof m0||f instanceof e1)v.fill=f;else if(Object.hasOwnProperty.call(f,"color")||Object.hasOwnProperty.call(f,"fill"))v=f;else throw new Error("Invalid stroke value.");o.stroke={...v,width:l.strokeThickness}}if(Array.isArray(l.fillGradientStops)){Wn(Cr,"gradient fill is now a fill pattern: `new FillGradient(...)`");let f;o.fontSize==null?o.fontSize=ou.defaultTextStyle.fontSize:typeof o.fontSize=="string"?f=parseInt(o.fontSize,10):f=o.fontSize;let v=new m0(0,0,0,f*1.7),b=l.fillGradientStops.map(T=>li.shared.setValue(T).toNumber());b.forEach((T,S)=>{let R=S/(b.length-1);v.addColorStop(R,T)}),o.fill={fill:v}}}var Zy,ou,Tc=D(()=>{Ir(),nn(),Sa(),Bb(),Fb(),Yb(),pk(),Xb(),Zy=class ww extends jr{constructor(l={}){super(),Kb(l);let f={...ww.defaultTextStyle,...l};for(let v in f){let b=v;this[b]=f[v]}this.update()}get align(){return this._align}set align(l){this._align=l,this.update()}get breakWords(){return this._breakWords}set breakWords(l){this._breakWords=l,this.update()}get dropShadow(){return this._dropShadow}set dropShadow(l){l!==null&&typeof l=="object"?this._dropShadow=this._createProxy({...ww.defaultDropShadow,...l}):this._dropShadow=l?this._createProxy({...ww.defaultDropShadow}):null,this.update()}get fontFamily(){return this._fontFamily}set fontFamily(l){this._fontFamily=l,this.update()}get fontSize(){return this._fontSize}set fontSize(l){typeof l=="string"?this._fontSize=parseInt(l,10):this._fontSize=l,this.update()}get fontStyle(){return this._fontStyle}set fontStyle(l){this._fontStyle=l.toLowerCase(),this.update()}get fontVariant(){return this._fontVariant}set fontVariant(l){this._fontVariant=l,this.update()}get fontWeight(){return this._fontWeight}set fontWeight(l){this._fontWeight=l,this.update()}get leading(){return this._leading}set leading(l){this._leading=l,this.update()}get letterSpacing(){return this._letterSpacing}set letterSpacing(l){this._letterSpacing=l,this.update()}get lineHeight(){return this._lineHeight}set lineHeight(l){this._lineHeight=l,this.update()}get padding(){return this._padding}set padding(l){this._padding=l,this.update()}get trim(){return this._trim}set trim(l){this._trim=l,this.update()}get textBaseline(){return this._textBaseline}set textBaseline(l){this._textBaseline=l,this.update()}get whiteSpace(){return this._whiteSpace}set whiteSpace(l){this._whiteSpace=l,this.update()}get wordWrap(){return this._wordWrap}set wordWrap(l){this._wordWrap=l,this.update()}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(l){this._wordWrapWidth=l,this.update()}get fill(){return this._originalFill}set fill(l){l!==this._originalFill&&(this._originalFill=l,this._isFillStyle(l)&&(this._originalFill=this._createProxy({...Su.defaultFillStyle,...l},()=>{this._fill=gd({...this._originalFill},Su.defaultFillStyle)})),this._fill=gd(l===0?"black":l,Su.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(l){l!==this._originalStroke&&(this._originalStroke=l,this._isFillStyle(l)&&(this._originalStroke=this._createProxy({...Su.defaultStrokeStyle,...l},()=>{this._stroke=Ky({...this._originalStroke},Su.defaultStrokeStyle)})),this._stroke=Ky(l,Su.defaultStrokeStyle),this.update())}_generateKey(){return this._styleKey=gk(this),this._styleKey}update(){this._styleKey=null,this.emit("update",this)}reset(){let l=ww.defaultTextStyle;for(let f in l)this[f]=l[f]}get styleKey(){return this._styleKey||this._generateKey()}clone(){return new ww({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth})}destroy(l=!1){if(this.removeAllListeners(),typeof l=="boolean"?l:l?.texture){let f=typeof l=="boolean"?l:l?.textureSource;this._fill?.texture&&this._fill.texture.destroy(f),this._originalFill?.texture&&this._originalFill.texture.destroy(f),this._stroke?.texture&&this._stroke.texture.destroy(f),this._originalStroke?.texture&&this._originalStroke.texture.destroy(f)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(l,f){return new Proxy(l,{set:(v,b,T)=>(v[b]=T,f?.(b,T),this.update(),!0)})}_isFillStyle(l){return(l??null)!==null&&!(li.isColorLike(l)||l instanceof m0||l instanceof e1)}},Zy.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5},Zy.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100},ou=Zy});function Zb(o,l,f,v){let b=Qb;b.minX=0,b.minY=0,b.maxX=o.width/v|0,b.maxY=o.height/v|0;let T=Mo.getOptimalTexture(b.width,b.height,v,!1);return T.source.uploadMethodId="image",T.source.resource=o,T.source.alphaMode="premultiply-alpha-on-upload",T.frame.width=l/v,T.frame.height=f/v,T.source.emit("update",T.source),T.updateUvs(),T}var Qb,yk=D(()=>{ed(),$e(),Qb=new Re});function Qy(o){let l=typeof o.fontSize=="number"?`${o.fontSize}px`:o.fontSize,f=o.fontFamily;Array.isArray(o.fontFamily)||(f=o.fontFamily.split(","));for(let v=f.length-1;v>=0;v--){let b=f[v].trim();!/([\"\'])[^\'\"]+\1/.test(b)&&!Vp.includes(b)&&(b=`"${b}"`),f[v]=b}return`${o.fontStyle} ${o.fontVariant} ${o.fontWeight} ${l} ${f.join(",")}`}var Vp,Jy=D(()=>{"use strict";Vp=["serif","sans-serif","monospace","cursive","fantasy","system-ui"]}),e2,Au,lh,t2=D(()=>{Ye(),Jy(),e2={willReadFrequently:!0},Au=class bn{static get experimentalLetterSpacingSupported(){let l=bn._experimentalLetterSpacingSupported;if(l!==void 0){let f=Ya.get().getCanvasRenderingContext2D().prototype;l=bn._experimentalLetterSpacingSupported="letterSpacing"in f||"textLetterSpacing"in f}return l}constructor(l,f,v,b,T,S,R,U,W){this.text=l,this.style=f,this.width=v,this.height=b,this.lines=T,this.lineWidths=S,this.lineHeight=R,this.maxLineWidth=U,this.fontProperties=W}static measureText(l=" ",f,v=bn._canvas,b=f.wordWrap){let T=`${l}:${f.styleKey}`;if(bn._measurementCache[T])return bn._measurementCache[T];let S=Qy(f),R=bn.measureFont(S);R.fontSize===0&&(R.fontSize=f.fontSize,R.ascent=f.fontSize);let U=bn.__context;U.font=S;let W=(b?bn._wordWrap(l,f,v):l).split(/(?:\r\n|\r|\n)/),K=new Array(W.length),ee=0;for(let Ee=0;Ee<W.length;Ee++){let Oe=bn._measureText(W[Ee],f.letterSpacing,U);K[Ee]=Oe,ee=Math.max(ee,Oe)}let se=f._stroke?.width||0,re=ee+se;f.dropShadow&&(re+=f.dropShadow.distance);let Me=f.lineHeight||R.fontSize,Ie=Math.max(Me,R.fontSize+se)+(W.length-1)*(Me+f.leading);return f.dropShadow&&(Ie+=f.dropShadow.distance),new bn(l,f,re,Ie,W,K,Me+f.leading,ee,R)}static _measureText(l,f,v){let b=!1;bn.experimentalLetterSpacingSupported&&(bn.experimentalLetterSpacing?(v.letterSpacing=`${f}px`,v.textLetterSpacing=`${f}px`,b=!0):(v.letterSpacing="0px",v.textLetterSpacing="0px"));let T=v.measureText(l),S=T.width,R=-T.actualBoundingBoxLeft,U=T.actualBoundingBoxRight-R;if(S>0)if(b)S-=f,U-=f;else{let W=(bn.graphemeSegmenter(l).length-1)*f;S+=W,U+=W}return Math.max(S,U)}static _wordWrap(l,f,v=bn._canvas){let b=v.getContext("2d",e2),T=0,S="",R="",U=Object.create(null),{letterSpacing:W,whiteSpace:K}=f,ee=bn._collapseSpaces(K),se=bn._collapseNewlines(K),re=!ee,Me=f.wordWrapWidth+W,Ie=bn._tokenize(l);for(let Ee=0;Ee<Ie.length;Ee++){let Oe=Ie[Ee];if(bn._isNewline(Oe)){if(!se){R+=bn._addLine(S),re=!ee,S="",T=0;continue}Oe=" "}if(ee){let kt=bn.isBreakingSpace(Oe),it=bn.isBreakingSpace(S[S.length-1]);if(kt&&it)continue}let et=bn._getFromCache(Oe,W,U,b);if(et>Me)if(S!==""&&(R+=bn._addLine(S),S="",T=0),bn.canBreakWords(Oe,f.breakWords)){let kt=bn.wordWrapSplit(Oe);for(let it=0;it<kt.length;it++){let Lt=kt[it],Dt=Lt,Pt=1;for(;kt[it+Pt];){let di=kt[it+Pt];if(!bn.canBreakChars(Dt,di,Oe,it,f.breakWords))Lt+=di;else break;Dt=di,Pt++}it+=Pt-1;let Jr=bn._getFromCache(Lt,W,U,b);Jr+T>Me&&(R+=bn._addLine(S),re=!1,S="",T=0),S+=Lt,T+=Jr}}else{S.length>0&&(R+=bn._addLine(S),S="",T=0);let kt=Ee===Ie.length-1;R+=bn._addLine(Oe,!kt),re=!1,S="",T=0}else et+T>Me&&(re=!1,R+=bn._addLine(S),S="",T=0),(S.length>0||!bn.isBreakingSpace(Oe)||re)&&(S+=Oe,T+=et)}return R+=bn._addLine(S,!1),R}static _addLine(l,f=!0){return l=bn._trimRight(l),l=f?`${l}
`:l,l}static _getFromCache(l,f,v,b){let T=v[l];return typeof T!="number"&&(T=bn._measureText(l,f,b)+f,v[l]=T),T}static _collapseSpaces(l){return l==="normal"||l==="pre-line"}static _collapseNewlines(l){return l==="normal"}static _trimRight(l){if(typeof l!="string")return"";for(let f=l.length-1;f>=0;f--){let v=l[f];if(!bn.isBreakingSpace(v))break;l=l.slice(0,-1)}return l}static _isNewline(l){return typeof l!="string"?!1:bn._newlines.includes(l.charCodeAt(0))}static isBreakingSpace(l,f){return typeof l!="string"?!1:bn._breakingSpaces.includes(l.charCodeAt(0))}static _tokenize(l){let f=[],v="";if(typeof l!="string")return f;for(let b=0;b<l.length;b++){let T=l[b],S=l[b+1];if(bn.isBreakingSpace(T,S)||bn._isNewline(T)){v!==""&&(f.push(v),v=""),f.push(T);continue}v+=T}return v!==""&&f.push(v),f}static canBreakWords(l,f){return f}static canBreakChars(l,f,v,b,T){return!0}static wordWrapSplit(l){return bn.graphemeSegmenter(l)}static measureFont(l){if(bn._fonts[l])return bn._fonts[l];let f=bn._context;f.font=l;let v=f.measureText(bn.METRICS_STRING+bn.BASELINE_SYMBOL),b={ascent:v.actualBoundingBoxAscent,descent:v.actualBoundingBoxDescent,fontSize:v.actualBoundingBoxAscent+v.actualBoundingBoxDescent};return bn._fonts[l]=b,b}static clearMetrics(l=""){l?delete bn._fonts[l]:bn._fonts={}}static get _canvas(){if(!bn.__canvas){let l;try{let f=new OffscreenCanvas(0,0);if(f.getContext("2d",e2)?.measureText)return bn.__canvas=f,f;l=Ya.get().createCanvas()}catch{l=Ya.get().createCanvas()}l.width=l.height=10,bn.__canvas=l}return bn.__canvas}static get _context(){return bn.__context||(bn.__context=bn._canvas.getContext("2d",e2)),bn.__context}},Au.METRICS_STRING="|\xC9q\xC5",Au.BASELINE_SYMBOL="M",Au.BASELINE_MULTIPLIER=1.4,Au.HEIGHT_MULTIPLIER=2,Au.graphemeSegmenter=(()=>{if(typeof Intl?.Segmenter=="function"){let o=new Intl.Segmenter;return l=>[...o.segment(l)].map(f=>f.segment)}return o=>[...o]})(),Au.experimentalLetterSpacing=!1,Au._fonts={},Au._newlines=[10,13],Au._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288],Au._measurementCache={},lh=Au});function r2(o,l){if(o.texture===fn.WHITE&&!o.fill)return li.shared.setValue(o.color).setAlpha(o.alpha??1).toHexa();if(o.fill){if(o.fill instanceof e1){let f=o.fill,v=l.createPattern(f.texture.source.resource,"repeat"),b=f.transform.copyTo(ji.shared);return b.scale(f.texture.frame.width,f.texture.frame.height),v.setTransform(b),v}else if(o.fill instanceof m0){let f=o.fill;if(f.type==="linear"){let v=l.createLinearGradient(f.x0,f.y0,f.x1,f.y1);return f.gradientStops.forEach(b=>{v.addColorStop(b.offset,li.shared.setValue(b.color).toHex())}),v}}}else{let f=l.createPattern(o.texture.source.resource,"repeat"),v=o.matrix.copyTo(ji.shared);return v.scale(o.texture.frame.width,o.texture.frame.height),f.setTransform(v),f}return Gt("FillStyle not recognised",o),"red"}var Jb=D(()=>{nn(),Un(),os(),Ar(),Bb(),Fb()}),e4,s9=D(()=>{nn(),Ot(),Sr(),Zg(),ed(),FA(),Sa(),Tc(),yk(),t2(),Jy(),Jb(),e4=class{constructor(o){this._activeTextures={},this._renderer=o}getTextureSize(o,l,f){let v=lh.measureText(o||" ",f),b=Math.ceil(Math.ceil(Math.max(1,v.width)+f.padding*2)*l),T=Math.ceil(Math.ceil(Math.max(1,v.height)+f.padding*2)*l);return b=Math.ceil(b-1e-6),T=Math.ceil(T-1e-6),b=wr(b),T=wr(T),{width:b,height:T}}getTexture(o,l,f,v){typeof o=="string"&&(Wn("8.0.0","CanvasTextSystem.getTexture: Use object TextOptions instead of separate arguments"),o={text:o,style:f,resolution:l}),o.style instanceof ou||(o.style=new ou(o.style));let{texture:b,canvasAndContext:T}=this.createTextureAndCanvas(o);return this._renderer.texture.initSource(b._source),oh.returnCanvasAndContext(T),b}createTextureAndCanvas(o){let{text:l,style:f}=o,v=o.resolution??this._renderer.resolution,b=lh.measureText(l||" ",f),T=Math.ceil(Math.ceil(Math.max(1,b.width)+f.padding*2)*v),S=Math.ceil(Math.ceil(Math.max(1,b.height)+f.padding*2)*v),R=oh.getOptimalCanvasAndContext(T,S),{canvas:U}=R;this.renderTextToCanvas(l,f,v,R);let W=Zb(U,T,S,v);if(f.trim){let K=Ob(U,v);W.frame.copyFrom(K),W.updateUvs()}return{texture:W,canvasAndContext:R}}getManagedTexture(o){o._resolution=o._autoResolution?this._renderer.resolution:o.resolution;let l=o._getKey();if(this._activeTextures[l])return this._increaseReferenceCount(l),this._activeTextures[l].texture;let{texture:f,canvasAndContext:v}=this.createTextureAndCanvas(o);return this._activeTextures[l]={canvasAndContext:v,texture:f,usageCount:1},f}_increaseReferenceCount(o){this._activeTextures[o].usageCount++}decreaseReferenceCount(o){let l=this._activeTextures[o];if(l.usageCount--,l.usageCount===0){oh.returnCanvasAndContext(l.canvasAndContext),Mo.returnTexture(l.texture);let f=l.texture.source;f.resource=null,f.uploadMethodId="unknown",f.alphaMode="no-premultiply-alpha",this._activeTextures[o]=null}}getReferenceCount(o){return this._activeTextures[o].usageCount}renderTextToCanvas(o,l,f,v){let{canvas:b,context:T}=v,S=Qy(l),R=lh.measureText(o||" ",l),U=R.lines,W=R.lineHeight,K=R.lineWidths,ee=R.maxLineWidth,se=R.fontProperties,re=b.height;if(T.resetTransform(),T.scale(f,f),T.textBaseline=l.textBaseline,l._stroke?.width){let Oe=l._stroke;T.lineWidth=Oe.width,T.miterLimit=Oe.miterLimit,T.lineJoin=Oe.join,T.lineCap=Oe.cap}T.font=S;let Me,Ie,Ee=l.dropShadow?2:1;for(let Oe=0;Oe<Ee;++Oe){let et=l.dropShadow&&Oe===0,kt=et?Math.ceil(Math.max(1,re)+l.padding*2):0,it=kt*f;if(et){T.fillStyle="black",T.strokeStyle="black";let Pt=l.dropShadow,Jr=Pt.color,di=Pt.alpha;T.shadowColor=li.shared.setValue(Jr).setAlpha(di).toRgbaString();let Ur=Pt.blur*f,$r=Pt.distance*f;T.shadowBlur=Ur,T.shadowOffsetX=Math.cos(Pt.angle)*$r,T.shadowOffsetY=Math.sin(Pt.angle)*$r+it}else T.fillStyle=l._fill?r2(l._fill,T):null,l._stroke?.width&&(T.strokeStyle=r2(l._stroke,T)),T.shadowColor="black";let Lt=(W-se.fontSize)/2;W-se.fontSize<0&&(Lt=0);let Dt=l._stroke?.width??0;for(let Pt=0;Pt<U.length;Pt++)Me=Dt/2,Ie=Dt/2+Pt*W+se.ascent+Lt,l.align==="right"?Me+=ee-K[Pt]:l.align==="center"&&(Me+=(ee-K[Pt])/2),l._stroke?.width&&this._drawLetterSpacing(U[Pt],l,v,Me+l.padding,Ie+l.padding-kt,!0),l._fill!==void 0&&this._drawLetterSpacing(U[Pt],l,v,Me+l.padding,Ie+l.padding-kt)}}_drawLetterSpacing(o,l,f,v,b,T=!1){let{context:S}=f,R=l.letterSpacing,U=!1;if(lh.experimentalLetterSpacingSupported&&(lh.experimentalLetterSpacing?(S.letterSpacing=`${R}px`,S.textLetterSpacing=`${R}px`,U=!0):(S.letterSpacing="0px",S.textLetterSpacing="0px")),R===0||U){T?S.strokeText(o,v,b):S.fillText(o,v,b);return}let W=v,K=lh.graphemeSegmenter(o),ee=S.measureText(o).width,se=0;for(let re=0;re<K.length;++re){let Me=K[re];T?S.strokeText(Me,W,b):S.fillText(Me,W,b);let Ie="";for(let Ee=re+1;Ee<K.length;++Ee)Ie+=K[Ee];se=S.measureText(Ie).width,W+=ee-se+R,ee=se}}destroy(){this._activeTextures=null}},e4.extension={type:[Ke.WebGLSystem,Ke.WebGPUSystem,Ke.CanvasSystem],name:"canvasText"}}),t4=D(()=>{Ot(),Y6(),s9(),Kr.add(e4),Kr.add(Wy)}),i2,vk=D(()=>{Sa(),bg(),Yb(),i2=class _te extends gy{constructor(l){l instanceof Su&&(l={context:l});let{context:f,roundPixels:v,...b}=l||{};super({label:"Graphics",...b}),this.renderPipeId="graphics",f?this._context=f:this._context=this._ownedContext=new Su,this._context.on("update",this.onViewUpdate,this),this.allowChildren=!1,this.roundPixels=v??!1}set context(l){l!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=l,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(l){return this._context.containsPoint(l)}destroy(l){this._ownedContext&&!l?this._ownedContext.destroy(l):(l===!0||l?.context===!0)&&this._context.destroy(l),this._ownedContext=null,this._context=null,super.destroy(l)}_callContextMethod(l,f){return this.context[l](...f),this}setFillStyle(...l){return this._callContextMethod("setFillStyle",l)}setStrokeStyle(...l){return this._callContextMethod("setStrokeStyle",l)}fill(...l){return this._callContextMethod("fill",l)}stroke(...l){return this._callContextMethod("stroke",l)}texture(...l){return this._callContextMethod("texture",l)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...l){return this._callContextMethod("arc",l)}arcTo(...l){return this._callContextMethod("arcTo",l)}arcToSvg(...l){return this._callContextMethod("arcToSvg",l)}bezierCurveTo(...l){return this._callContextMethod("bezierCurveTo",l)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...l){return this._callContextMethod("ellipse",l)}circle(...l){return this._callContextMethod("circle",l)}path(...l){return this._callContextMethod("path",l)}lineTo(...l){return this._callContextMethod("lineTo",l)}moveTo(...l){return this._callContextMethod("moveTo",l)}quadraticCurveTo(...l){return this._callContextMethod("quadraticCurveTo",l)}rect(...l){return this._callContextMethod("rect",l)}roundRect(...l){return this._callContextMethod("roundRect",l)}poly(...l){return this._callContextMethod("poly",l)}regularPoly(...l){return this._callContextMethod("regularPoly",l)}roundPoly(...l){return this._callContextMethod("roundPoly",l)}roundShape(...l){return this._callContextMethod("roundShape",l)}filletRect(...l){return this._callContextMethod("filletRect",l)}chamferRect(...l){return this._callContextMethod("chamferRect",l)}star(...l){return this._callContextMethod("star",l)}svg(...l){return this._callContextMethod("svg",l)}restore(...l){return this._callContextMethod("restore",l)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...l){return this._callContextMethod("rotate",l)}scaleTransform(...l){return this._callContextMethod("scale",l)}setTransform(...l){return this._callContextMethod("setTransform",l)}transform(...l){return this._callContextMethod("transform",l)}translateTransform(...l){return this._callContextMethod("translate",l)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(l){this._context.fillStyle=l}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(l){this._context.strokeStyle=l}clone(l=!1){return l?new _te(this._context.clone()):(this._ownedContext=null,new _te(this._context))}lineStyle(l,f,v){Wn(Cr,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");let b={};return l&&(b.width=l),f&&(b.color=f),v&&(b.alpha=v),this.context.strokeStyle=b,this}beginFill(l,f){Wn(Cr,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");let v={};return l&&(v.color=l),f&&(v.alpha=f),this.context.fillStyle=v,this}endFill(){Wn(Cr,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();let l=this.context.strokeStyle;return(l.width!==Su.defaultStrokeStyle.width||l.color!==Su.defaultStrokeStyle.color||l.alpha!==Su.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...l){return Wn(Cr,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",l)}drawEllipse(...l){return Wn(Cr,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",l)}drawPolygon(...l){return Wn(Cr,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",l)}drawRect(...l){return Wn(Cr,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",l)}drawRoundedRect(...l){return Wn(Cr,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",l)}drawStar(...l){return Wn(Cr,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",l)}}}),r4,Nh,o9=D(()=>{"use strict";r4={name:"local-uniform-msdf-bit",vertex:{header:`
            struct LocalUniforms {
                uColor:vec4<f32>,
                uTransformMatrix:mat3x3<f32>,
                uDistance: f32,
                uRound:f32,
            }

            @group(2) @binding(0) var<uniform> localUniforms : LocalUniforms;
        `,main:`
            vColor *= localUniforms.uColor;
            modelMatrix *= localUniforms.uTransformMatrix;
        `,end:`
            if(localUniforms.uRound == 1)
            {
                vPosition = vec4(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
            }
        `},fragment:{header:`
            struct LocalUniforms {
                uColor:vec4<f32>,
                uTransformMatrix:mat3x3<f32>,
                uDistance: f32
            }

            @group(2) @binding(0) var<uniform> localUniforms : LocalUniforms;
         `,main:` 
            outColor = vec4<f32>(calculateMSDFAlpha(outColor, localUniforms.uColor, localUniforms.uDistance));
        `}},Nh={name:"local-uniform-msdf-bit",vertex:{header:`
            uniform mat3 uTransformMatrix;
            uniform vec4 uColor;
            uniform float uRound;
        `,main:`
            vColor *= uColor;
            modelMatrix *= uTransformMatrix;
        `,end:`
            if(uRound == 1.)
            {
                gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
            }
        `},fragment:{header:`
            uniform float uDistance;
         `,main:` 
            outColor = vec4(calculateMSDFAlpha(outColor, vColor, uDistance));
        `}}}),n2,xk,i4=D(()=>{"use strict";n2={name:"msdf-bit",fragment:{header:`
            fn calculateMSDFAlpha(msdfColor:vec4<f32>, shapeColor:vec4<f32>, distance:f32) -> f32 {
                
                // MSDF
                var median = msdfColor.r + msdfColor.g + msdfColor.b -
                    min(msdfColor.r, min(msdfColor.g, msdfColor.b)) -
                    max(msdfColor.r, max(msdfColor.g, msdfColor.b));
            
                // SDF
                median = min(median, msdfColor.a);

                var screenPxDistance = distance * (median - 0.5);
                var alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);
                if (median < 0.01) {
                    alpha = 0.0;
                } else if (median > 0.99) {
                    alpha = 1.0;
                }

                // Gamma correction for coverage-like alpha
                var luma: f32 = dot(shapeColor.rgb, vec3<f32>(0.299, 0.587, 0.114));
                var gamma: f32 = mix(1.0, 1.0 / 2.2, luma);
                var coverage: f32 = pow(shapeColor.a * alpha, gamma);

                return coverage;
             
            }
        `}},xk={name:"msdf-bit",fragment:{header:`
            float calculateMSDFAlpha(vec4 msdfColor, vec4 shapeColor, float distance) {
                
                // MSDF
                float median = msdfColor.r + msdfColor.g + msdfColor.b -
                                min(msdfColor.r, min(msdfColor.g, msdfColor.b)) -
                                max(msdfColor.r, max(msdfColor.g, msdfColor.b));
               
                // SDF
                median = min(median, msdfColor.a);
            
                float screenPxDistance = distance * (median - 0.5);
                float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);
           
                if (median < 0.01) {
                    alpha = 0.0;
                } else if (median > 0.99) {
                    alpha = 1.0;
                }

                // Gamma correction for coverage-like alpha
                float luma = dot(shapeColor.rgb, vec3(0.299, 0.587, 0.114));
                float gamma = mix(1.0, 1.0 / 2.2, luma);
                float coverage = pow(shapeColor.a * alpha, gamma);  
              
                return coverage;
            }
        `}}}),n4,a4,bk,l9=D(()=>{Un(),au(),hd(),Ig(),Lp(),p0(),nh(),sh(),vl(),o9(),i4(),bk=class extends Ns{constructor(){let o=new il({uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uTransformMatrix:{value:new ji,type:"mat3x3<f32>"},uDistance:{value:4,type:"f32"},uRound:{value:0,type:"f32"}}),l=sd();n4??(n4=Ap({name:"sdf-shader",bits:[Mp,Dy(l),r4,n2,d0]})),a4??(a4=c0({name:"sdf-shader",bits:[Dg,Ng(l),Nh,xk,Rp]})),super({glProgram:a4,gpuProgram:n4,resources:{localUniforms:o,batchSamplers:k(l)}})}}}),_k,u9=D(()=>{Ir(),Sa(),_k=class extends jr{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return Wn(Cr,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return Wn(Cr,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return Wn(Cr,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return Wn(Cr,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return Wn(Cr,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(o=!1){this.emit("destroy",this),this.removeAllListeners();for(let l in this.chars)this.chars[l].texture?.destroy();this.chars=null,o&&(this.pages.forEach(l=>l.texture.destroy(!0)),this.pages=null)}}});function Qs(o){if(o==="")return[];typeof o=="string"&&(o=[o]);let l=[];for(let f=0,v=o.length;f<v;f++){let b=o[f];if(Array.isArray(b)){if(b.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${b.length}.`);if(b[0].length===0||b[1].length===0)throw new Error("[BitmapFont]: Invalid character delimiter.");let T=b[0].charCodeAt(0),S=b[1].charCodeAt(0);if(S<T)throw new Error("[BitmapFont]: Invalid character range.");for(let R=T,U=S;R<=U;R++)l.push(String.fromCharCode(R))}else l.push(...Array.from(b))}if(l.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return l}var bl=D(()=>{"use strict"}),s4,o4,h9=D(()=>{nn(),ye(),Zg(),rb(),os(),Sa(),t2(),Jy(),Jb(),Tc(),u9(),bl(),s4=class $Ne extends _k{constructor(l){super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentPageIndex=-1,this._skipKerning=!1;let f={...$Ne.defaultOptions,...l};this._textureSize=f.textureSize,this._mipmap=f.mipmap;let v=f.style.clone();f.overrideFill&&(v._fill.color=16777215,v._fill.alpha=1,v._fill.texture=fn.WHITE,v._fill.fill=null),this.applyFillAsTint=f.overrideFill;let b=v.fontSize;v.fontSize=this.baseMeasurementFontSize;let T=Qy(v);f.overrideSize?v._stroke&&(v._stroke.width*=this.baseRenderedFontSize/b):v.fontSize=this.baseRenderedFontSize=b,this._style=v,this._skipKerning=f.skipKerning??!1,this.resolution=f.resolution??1,this._padding=f.padding??4,this.fontMetrics=lh.measureFont(T),this.lineHeight=v.lineHeight||this.fontMetrics.fontSize||v.fontSize}ensureCharacters(l){let f=Qs(l).filter(Ee=>!this._currentChars.includes(Ee)).filter((Ee,Oe,et)=>et.indexOf(Ee)===Oe);if(!f.length)return;this._currentChars=[...this._currentChars,...f];let v;this._currentPageIndex===-1?v=this._nextPage():v=this.pages[this._currentPageIndex];let{canvas:b,context:T}=v.canvasAndContext,S=v.texture.source,R=this._style,U=this._currentX,W=this._currentY,K=this.baseRenderedFontSize/this.baseMeasurementFontSize,ee=this._padding*K,se=0,re=!1,Me=b.width/this.resolution,Ie=b.height/this.resolution;for(let Ee=0;Ee<f.length;Ee++){let Oe=f[Ee],et=lh.measureText(Oe,R,b,!1);et.lineHeight=et.height;let kt=et.width*K,it=Math.ceil((R.fontStyle==="italic"?2:1)*kt),Lt=et.height*K,Dt=it+ee*2,Pt=Lt+ee*2;if(re=!1,Oe!==`
`&&Oe!=="\r"&&Oe!=="	"&&Oe!==" "&&(re=!0,se=Math.ceil(Math.max(Pt,se))),U+Dt>Me&&(W+=se,se=Pt,U=0,W+se>Ie)){S.update();let di=this._nextPage();b=di.canvasAndContext.canvas,T=di.canvasAndContext.context,S=di.texture.source,W=0}let Jr=kt/K-(R.dropShadow?.distance??0)-(R._stroke?.width??0);if(this.chars[Oe]={id:Oe.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:Jr,kerning:{}},re){this._drawGlyph(T,et,U+ee,W+ee,K,R);let di=S.width*K,Ur=S.height*K,$r=new te(U/di*S.width,W/Ur*S.height,Dt/di*S.width,Pt/Ur*S.height);this.chars[Oe].texture=new fn({source:S,frame:$r}),U+=Math.ceil(Dt)}}S.update(),this._currentX=U,this._currentY=W,this._skipKerning&&this._applyKerning(f,T)}get pageTextures(){return Wn(Cr,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(l,f){let v=this._measureCache;for(let b=0;b<l.length;b++){let T=l[b];for(let S=0;S<this._currentChars.length;S++){let R=this._currentChars[S],U=v[T];U||(U=v[T]=f.measureText(T).width);let W=v[R];W||(W=v[R]=f.measureText(R).width);let K=f.measureText(T+R).width,ee=K-(U+W);ee&&(this.chars[T].kerning[R]=ee),K=f.measureText(T+R).width,ee=K-(U+W),ee&&(this.chars[R].kerning[T]=ee)}}}_nextPage(){this._currentPageIndex++;let l=this.resolution,f=oh.getOptimalCanvasAndContext(this._textureSize,this._textureSize,l);this._setupContext(f.context,this._style,l);let v=l*(this.baseRenderedFontSize/this.baseMeasurementFontSize),b=new fn({source:new iu({resource:f.canvas,resolution:v,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})}),T={canvasAndContext:f,texture:b};return this.pages[this._currentPageIndex]=T,T}_setupContext(l,f,v){f.fontSize=this.baseRenderedFontSize,l.scale(v,v),l.font=Qy(f),f.fontSize=this.baseMeasurementFontSize,l.textBaseline=f.textBaseline;let b=f._stroke,T=b?.width??0;if(b&&(l.lineWidth=T,l.lineJoin=b.join,l.miterLimit=b.miterLimit,l.strokeStyle=r2(b,l)),f._fill&&(l.fillStyle=r2(f._fill,l)),f.dropShadow){let S=f.dropShadow,R=li.shared.setValue(S.color).toArray(),U=S.blur*v,W=S.distance*v;l.shadowColor=`rgba(${R[0]*255},${R[1]*255},${R[2]*255},${S.alpha})`,l.shadowBlur=U,l.shadowOffsetX=Math.cos(S.angle)*W,l.shadowOffsetY=Math.sin(S.angle)*W}else l.shadowColor="black",l.shadowBlur=0,l.shadowOffsetX=0,l.shadowOffsetY=0}_drawGlyph(l,f,v,b,T,S){let R=f.text,U=f.fontProperties,W=(S._stroke?.width??0)*T,K=v+W/2,ee=b-W/2,se=U.descent*T,re=f.lineHeight*T;S.stroke&&W&&l.strokeText(R,K,ee+re-se),S._fill&&l.fillText(R,K,ee+re-se)}destroy(){super.destroy();for(let l=0;l<this.pages.length;l++){let{canvasAndContext:f,texture:v}=this.pages[l];oh.returnCanvasAndContext(f),v.destroy(!0)}this.pages=null}},s4.defaultOptions={textureSize:512,style:new ou,mipmap:!0},o4=s4});function zo(o,l,f,v){let b={width:0,height:0,offsetY:0,scale:l.fontSize/f.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};b.offsetY=f.baseLineOffset;let T=b.lines[0],S=null,R=!0,U={spaceWord:!1,width:0,start:0,index:0,positions:[],chars:[]},W=Me=>{let Ie=T.width;for(let Ee=0;Ee<U.index;Ee++){let Oe=Me.positions[Ee];T.chars.push(Me.chars[Ee]),T.charPositions.push(Oe+Ie)}T.width+=Me.width,R=!1,U.width=0,U.index=0,U.chars.length=0},K=()=>{let Me=T.chars.length-1;if(v){let Ie=T.chars[Me];for(;Ie===" ";)T.width-=f.chars[Ie].xAdvance,Ie=T.chars[--Me]}b.width=Math.max(b.width,T.width),T={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},R=!0,b.lines.push(T),b.height+=f.lineHeight},ee=f.baseMeasurementFontSize/l.fontSize,se=l.letterSpacing*ee,re=l.wordWrapWidth*ee;for(let Me=0;Me<o.length+1;Me++){let Ie,Ee=Me===o.length;Ee||(Ie=o[Me]);let Oe=f.chars[Ie]||f.chars[" "];if(/(?:\s)/.test(Ie)||Ie==="\r"||Ie===`
`||Ee){if(!R&&l.wordWrap&&T.width+U.width-se>re?(K(),W(U),Ee||T.charPositions.push(0)):(U.start=T.width,W(U),Ee||T.charPositions.push(0)),Ie==="\r"||Ie===`
`)T.width!==0&&K();else if(!Ee){let et=Oe.xAdvance+(Oe.kerning[S]||0)+se;T.width+=et,T.spaceWidth=et,T.spacesIndex.push(T.charPositions.length),T.chars.push(Ie)}}else{let et=Oe.kerning[S]||0,kt=Oe.xAdvance+et+se;U.positions[U.index++]=U.width+et,U.chars.push(Ie),U.width+=kt}S=Ie}return K(),l.align==="center"?c9(b):l.align==="right"?d9(b):l.align==="justify"&&p9(b),b}function c9(o){for(let l=0;l<o.lines.length;l++){let f=o.lines[l],v=o.width/2-f.width/2;for(let b=0;b<f.charPositions.length;b++)f.charPositions[b]+=v}}function d9(o){for(let l=0;l<o.lines.length;l++){let f=o.lines[l],v=o.width-f.width;for(let b=0;b<f.charPositions.length;b++)f.charPositions[b]+=v}}function p9(o){let l=o.width;for(let f=0;f<o.lines.length;f++){let v=o.lines[f],b=0,T=v.spacesIndex[b++],S=0,R=v.spacesIndex.length,U=(l-v.width)/R;for(let W=0;W<v.charPositions.length;W++)W===T&&(T=v.spacesIndex[b++],S+=U),v.charPositions[W]+=S}}var wk=D(()=>{"use strict"}),s1,kk,Tk,f9=D(()=>{by(),Sa(),Ar(),Tc(),h9(),wk(),bl(),s1=0,kk=class{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1}}getFont(o,l){let f=`${l.fontFamily}-bitmap`,v=!0;if(l._fill.fill&&!l._stroke)f+=l._fill.fill.styleKey,v=!1;else if(l._stroke||l.dropShadow){let T=l.styleKey;T=T.substring(0,T.lastIndexOf("-")),f=`${T}-bitmap`,v=!1}if(!Io.has(f)){let T=new o4({style:l,overrideFill:v,overrideSize:!0,...this.defaultOptions});s1++,s1>50&&Gt("BitmapText",`You have dynamically created ${s1} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),T.once("destroy",()=>{s1--,Io.remove(f)}),Io.set(f,T)}let b=Io.get(f);return b.ensureCharacters?.(o),b}getLayout(o,l,f=!0){let v=this.getFont(o,l);return zo([...o],l,v,f)}measureText(o,l,f=!0){return this.getLayout(o,l,f)}install(...o){let l=o[0];typeof l=="string"&&(l={name:l,style:o[1],chars:o[2]?.chars,resolution:o[2]?.resolution,padding:o[2]?.padding,skipKerning:o[2]?.skipKerning},Wn(Cr,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));let f=l?.name;if(!f)throw new Error("[BitmapFontManager] Property `name` is required.");l={...this.defaultOptions,...l};let v=l.style,b=v instanceof ou?v:new ou(v),T=b._fill.fill!==null&&b._fill.fill!==void 0,S=new o4({style:b,overrideFill:T,skipKerning:l.skipKerning,padding:l.padding,resolution:l.resolution,overrideSize:!1}),R=Qs(l.chars);return S.ensureCharacters(R.join("")),Io.set(`${f}-bitmap`,S),S.once("destroy",()=>Io.remove(`${f}-bitmap`)),S}uninstall(o){let l=`${o}-bitmap`,f=Io.get(l);f&&f.destroy()}},Tk=new kk});function Ek(o,l){l.groupTransform=o.groupTransform,l.groupColorAlpha=o.groupColorAlpha,l.groupColor=o.groupColor,l.groupBlendMode=o.groupBlendMode,l.globalDisplayStatus=o.globalDisplayStatus,l.groupTransform=o.groupTransform,l.localDisplayStatus=o.localDisplayStatus,l.groupAlpha=o.groupAlpha,l._roundPixels=o._roundPixels}var l4,g9=D(()=>{by(),Ot(),Ts(),vk(),l9(),f9(),wk(),l4=class{constructor(o){this._gpuBitmapText={},this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=o,this._renderer.renderableGC.addManagedHash(this,"_gpuBitmapText")}validateRenderable(o){let l=this._getGpuBitmapText(o);return o._didTextUpdate&&(o._didTextUpdate=!1,this._updateContext(o,l)),this._renderer.renderPipes.graphics.validateRenderable(l)}addRenderable(o,l){let f=this._getGpuBitmapText(o);Ek(o,f),o._didTextUpdate&&(o._didTextUpdate=!1,this._updateContext(o,f)),this._renderer.renderPipes.graphics.addRenderable(f,l),f.context.customShader&&this._updateDistanceField(o)}destroyRenderable(o){o.off("destroyed",this._destroyRenderableBound),this._destroyRenderableByUid(o.uid)}_destroyRenderableByUid(o){let l=this._gpuBitmapText[o].context;l.customShader&&(pt.return(l.customShader),l.customShader=null),pt.return(this._gpuBitmapText[o]),this._gpuBitmapText[o]=null}updateRenderable(o){let l=this._getGpuBitmapText(o);Ek(o,l),this._renderer.renderPipes.graphics.updateRenderable(l),l.context.customShader&&this._updateDistanceField(o)}_updateContext(o,l){let{context:f}=l,v=Tk.getFont(o.text,o._style);f.clear(),v.distanceField.type!=="none"&&(f.customShader||(f.customShader=pt.get(bk)));let b=Array.from(o.text),T=o._style,S=v.baseLineOffset,R=zo(b,T,v,!0),U=0,W=T.padding,K=R.scale,ee=R.width,se=R.height+R.offsetY;T._stroke&&(ee+=T._stroke.width/K,se+=T._stroke.width/K),f.translate(-o._anchor._x*ee-W,-o._anchor._y*se-W).scale(K,K);let re=v.applyFillAsTint?T._fill.color:16777215;for(let Me=0;Me<R.lines.length;Me++){let Ie=R.lines[Me];for(let Ee=0;Ee<Ie.charPositions.length;Ee++){let Oe=b[U++],et=v.chars[Oe];et?.texture&&f.texture(et.texture,re||"black",Math.round(Ie.charPositions[Ee]+et.xOffset),Math.round(S+et.yOffset))}S+=v.lineHeight}}_getGpuBitmapText(o){return this._gpuBitmapText[o.uid]||this.initGpuText(o)}initGpuText(o){let l=pt.get(i2);return this._gpuBitmapText[o.uid]=l,this._updateContext(o,l),o.on("destroyed",this._destroyRenderableBound),this._gpuBitmapText[o.uid]}_updateDistanceField(o){let l=this._getGpuBitmapText(o).context,f=o._style.fontFamily,v=Io.get(`${f}-bitmap`),{a:b,b:T,c:S,d:R}=o.groupTransform,U=Math.sqrt(b*b+T*T),W=Math.sqrt(S*S+R*R),K=(Math.abs(U)+Math.abs(W))/2,ee=v.baseRenderedFontSize/o._style.fontSize,se=K*v.distanceField.range*(1/ee);l.customShader.resources.localUniforms.uniforms.uDistance=se}destroy(){for(let o in this._gpuBitmapText)this._destroyRenderableByUid(o);this._gpuBitmapText=null,this._renderer=null}},l4.extension={type:[Ke.WebGLPipes,Ke.WebGPUPipes,Ke.CanvasPipes],name:"bitmapText"}}),u4=D(()=>{Ot(),g9(),Kr.add(l4)}),h4,Ck=D(()=>{Ot(),os(),Zx(),Ts(),at(),h4=class{constructor(o){this._gpuText=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=o,this._renderer.runners.resolutionChange.add(this),this._renderer.renderableGC.addManagedHash(this,"_gpuText")}resolutionChange(){for(let o in this._gpuText){let l=this._gpuText[o];if(!l)continue;let f=l.batchableSprite.renderable;f._autoResolution&&(f._resolution=this._renderer.resolution,f.onViewUpdate())}}validateRenderable(o){let l=this._getGpuText(o),f=o._getKey();return l.textureNeedsUploading?(l.textureNeedsUploading=!1,!0):l.currentKey!==f}addRenderable(o,l){let f=this._getGpuText(o).batchableSprite;o._didTextUpdate&&this._updateText(o),this._renderer.renderPipes.batch.addToBatch(f,l)}updateRenderable(o){let l=this._getGpuText(o).batchableSprite;o._didTextUpdate&&this._updateText(o),l._batcher.updateElement(l)}destroyRenderable(o){o.off("destroyed",this._destroyRenderableBound),this._destroyRenderableById(o.uid)}_destroyRenderableById(o){let l=this._gpuText[o];this._renderer.htmlText.decreaseReferenceCount(l.currentKey),pt.return(l.batchableSprite),this._gpuText[o]=null}_updateText(o){let l=o._getKey(),f=this._getGpuText(o),v=f.batchableSprite;f.currentKey!==l&&this._updateGpuText(o).catch(T=>{console.error(T)}),o._didTextUpdate=!1;let b=o._style.padding;fy(v.bounds,o._anchor,v.texture,b)}async _updateGpuText(o){o._didTextUpdate=!1;let l=this._getGpuText(o);if(l.generatingTexture)return;let f=o._getKey();this._renderer.htmlText.decreaseReferenceCount(l.currentKey),l.generatingTexture=!0,l.currentKey=f;let v=o.resolution??this._renderer.resolution,b=await this._renderer.htmlText.getManagedTexture(o.text,v,o._style,o._getKey()),T=l.batchableSprite;T.texture=l.texture=b,l.generatingTexture=!1,l.textureNeedsUploading=!0,o.onViewUpdate();let S=o._style.padding;fy(T.bounds,o._anchor,T.texture,S)}_getGpuText(o){return this._gpuText[o.uid]||this.initGpuText(o)}initGpuText(o){let l={texture:fn.EMPTY,currentKey:"--",batchableSprite:pt.get(Kg),textureNeedsUploading:!1,generatingTexture:!1},f=l.batchableSprite;return f.renderable=o,f.transform=o.groupTransform,f.texture=fn.EMPTY,f.bounds={minX:0,maxX:1,minY:0,maxY:0},f.roundPixels=this._renderer._roundPixels|o._roundPixels,o._resolution=o._autoResolution?this._renderer.resolution:o.resolution,this._gpuText[o.uid]=l,o.on("destroyed",this._destroyRenderableBound),l}destroy(){for(let o in this._gpuText)this._destroyRenderableById(o);this._gpuText=null,this._renderer=null}},h4.extension={type:[Ke.WebGLPipes,Ke.WebGPUPipes,Ke.CanvasPipes],name:"htmlText"}});function Sk(){let{userAgent:o}=Ya.get().getNavigator();return/^((?!chrome|android).)*safari/i.test(o)}var m9=D(()=>{Ye()}),c4,o1,d4,Ak=D(()=>{"use strict";c4="http://www.w3.org/2000/svg",o1="http://www.w3.org/1999/xhtml",d4=class{constructor(){this.svgRoot=document.createElementNS(c4,"svg"),this.foreignObject=document.createElementNS(c4,"foreignObject"),this.domElement=document.createElementNS(o1,"div"),this.styleElement=document.createElementNS(o1,"style"),this.image=new Image;let{foreignObject:o,svgRoot:l,styleElement:f,domElement:v}=this;o.setAttribute("width","10000"),o.setAttribute("height","10000"),o.style.overflow="hidden",l.appendChild(o),o.appendChild(f),o.appendChild(v)}}});function y9(o){let l=o._stroke,f=o._fill,v=[`div { ${[`color: ${li.shared.setValue(f.color).toHex()}`,`font-size: ${o.fontSize}px`,`font-family: ${o.fontFamily}`,`font-weight: ${o.fontWeight}`,`font-style: ${o.fontStyle}`,`font-variant: ${o.fontVariant}`,`letter-spacing: ${o.letterSpacing}px`,`text-align: ${o.align}`,`padding: ${o.padding}px`,`white-space: ${o.whiteSpace==="pre"&&o.wordWrap?"pre-wrap":o.whiteSpace}`,...o.lineHeight?[`line-height: ${o.lineHeight}px`]:[],...o.wordWrap?[`word-wrap: ${o.breakWords?"break-all":"break-word"}`,`max-width: ${o.wordWrapWidth}px`]:[],...l?[Lk(l)]:[],...o.dropShadow?[Mk(o.dropShadow)]:[],...o.cssOverrides].join(";")} }`];return v9(o.tagStyles,v),v.join(" ")}function Mk(o){let l=li.shared.setValue(o.color).setAlpha(o.alpha).toHexa(),f=Math.round(Math.cos(o.angle)*o.distance),v=Math.round(Math.sin(o.angle)*o.distance),b=`${f}px ${v}px`;return o.blur>0?`text-shadow: ${b} ${o.blur}px ${l}`:`text-shadow: ${b} ${l}`}function Lk(o){return[`-webkit-text-stroke-width: ${o.width}px`,`-webkit-text-stroke-color: ${li.shared.setValue(o.color).toHex()}`,`text-stroke-width: ${o.width}px`,`text-stroke-color: ${li.shared.setValue(o.color).toHex()}`,"paint-order: stroke"].join(";")}function v9(o,l){for(let f in o){let v=o[f],b=[];for(let T in v)f4[T]?b.push(f4[T](v[T])):p4[T]&&b.push(p4[T].replace("{{VALUE}}",v[T]));l.push(`${f} { ${b.join(";")} }`)}}var p4,f4,Rk=D(()=>{nn(),p4={fontSize:"font-size: {{VALUE}}px",fontFamily:"font-family: {{VALUE}}",fontWeight:"font-weight: {{VALUE}}",fontStyle:"font-style: {{VALUE}}",fontVariant:"font-variant: {{VALUE}}",letterSpacing:"letter-spacing: {{VALUE}}px",align:"text-align: {{VALUE}}",padding:"padding: {{VALUE}}px",whiteSpace:"white-space: {{VALUE}}",lineHeight:"line-height: {{VALUE}}px",wordWrapWidth:"max-width: {{VALUE}}px"},f4={fill:o=>`color: ${li.shared.setValue(o).toHex()}`,breakWords:o=>`word-wrap: ${o?"break-all":"break-word"}`,stroke:Lk,dropShadow:Mk}}),Ec,a2=D(()=>{Ar(),Tc(),Xb(),Rk(),Ec=class zNe extends ou{constructor(l={}){super(l),this._cssOverrides=[],this.cssOverrides??(this.cssOverrides=l.cssOverrides),this.tagStyles=l.tagStyles??{}}set cssOverrides(l){this._cssOverrides=l instanceof Array?l:[l],this.update()}get cssOverrides(){return this._cssOverrides}_generateKey(){return this._styleKey=gk(this)+this._cssOverrides.join("-"),this._styleKey}update(){this._cssStyle=null,super.update()}clone(){return new zNe({align:this.align,breakWords:this.breakWords,dropShadow:this.dropShadow?{...this.dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,cssOverrides:this.cssOverrides})}get cssStyle(){return this._cssStyle||(this._cssStyle=y9(this)),this._cssStyle}addOverride(...l){let f=l.filter(v=>!this.cssOverrides.includes(v));f.length>0&&(this.cssOverrides.push(...f),this.update())}removeOverride(...l){let f=l.filter(v=>this.cssOverrides.includes(v));f.length>0&&(this.cssOverrides=this.cssOverrides.filter(v=>!f.includes(v)),this.update())}set fill(l){typeof l!="string"&&typeof l!="number"&&Gt("[HTMLTextStyle] only color fill is not supported by HTMLText"),super.fill=l}set stroke(l){l&&typeof l!="string"&&typeof l!="number"&&Gt("[HTMLTextStyle] only color stroke is not supported by HTMLText"),super.stroke=l}}});function Dk(o,l){let f=l.fontFamily,v=[],b={},T=/font-family:([^;"\s]+)/g,S=o.match(T);function R(U){b[U]||(v.push(U),b[U]=!0)}if(Array.isArray(f))for(let U=0;U<f.length;U++)R(f[U]);else R(f);S&&S.forEach(U=>{let W=U.split(":")[1].trim();R(W)});for(let U in l.tagStyles){let W=l.tagStyles[U].fontFamily;R(W)}return v}var Ik=D(()=>{"use strict"});async function s2(o){let l=await(await Ya.get().fetch(o)).blob(),f=new FileReader;return await new Promise((v,b)=>{f.onloadend=()=>v(f.result),f.onerror=b,f.readAsDataURL(l)})}var g4=D(()=>{Ye()});async function Nk(o,l){let f=await s2(l);return`@font-face {
        font-family: "${o.fontFamily}";
        src: url('${f}');
        font-weight: ${o.fontWeight};
        font-style: ${o.fontStyle};
    }`}var Ok=D(()=>{g4()});async function x9(o,l,f){let v=o.filter(b=>Io.has(`${b}-and-url`)).map((b,T)=>{if(!l1.has(b)){let{url:S}=Io.get(`${b}-and-url`);T===0?l1.set(b,Nk({fontWeight:l.fontWeight,fontStyle:l.fontStyle,fontFamily:b},S)):l1.set(b,Nk({fontWeight:f.fontWeight,fontStyle:f.fontStyle,fontFamily:b},S))}return l1.get(b)});return(await Promise.all(v)).join(`
`)}var l1,b9=D(()=>{by(),Ok(),l1=new Map});function Bk(o,l,f,v,b){let{domElement:T,styleElement:S,svgRoot:R}=b;T.innerHTML=`<style>${l.cssStyle}</style><div style='padding:0;'>${o}</div>`,T.setAttribute("style",`transform: scale(${f});transform-origin: top left; display: inline-block`),S.textContent=v;let{width:U,height:W}=b.image;return R.setAttribute("width",U.toString()),R.setAttribute("height",W.toString()),new XMLSerializer().serializeToString(R)}var Pk=D(()=>{"use strict"});function Fk(o,l){let f=oh.getOptimalCanvasAndContext(o.width,o.height,l),{context:v}=f;return v.clearRect(0,0,o.width,o.height),v.drawImage(o,0,0),f}var $k=D(()=>{Zg()});function Wp(o,l,f){return new Promise(async v=>{f&&await new Promise(b=>setTimeout(b,100)),o.onload=()=>{v()},o.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(l)}`,o.crossOrigin="anonymous"})}var zk=D(()=>{"use strict"});function _9(o,l,f,v){v=v||Gk||(Gk=new d4);let{domElement:b,styleElement:T,svgRoot:S}=v;b.innerHTML=`<style>${l.cssStyle};</style><div style='padding:0'>${o}</div>`,b.setAttribute("style","transform-origin: top left; display: inline-block"),f&&(T.textContent=f),document.body.appendChild(S);let R=b.getBoundingClientRect();S.remove();let U=l.padding*2;return{width:R.width-U,height:R.height-U}}var Gk,Uk=D(()=>{Ak()}),u1,jk=D(()=>{Ot(),Zg(),ed(),ah(),m9(),Ar(),Ts(),yk(),Ak(),a2(),Ik(),b9(),Pk(),$k(),zk(),Uk(),u1=class{constructor(o){this._activeTextures={},this._renderer=o,this._createCanvas=o.type===Ce.WEBGPU}getTexture(o){return this._buildTexturePromise(o.text,o.resolution,o.style)}getManagedTexture(o,l,f,v){if(this._activeTextures[v])return this._increaseReferenceCount(v),this._activeTextures[v].promise;let b=this._buildTexturePromise(o,l,f).then(T=>(this._activeTextures[v].texture=T,T));return this._activeTextures[v]={texture:null,promise:b,usageCount:1},b}async _buildTexturePromise(o,l,f){let v=pt.get(d4),b=Dk(o,f),T=await x9(b,f,Ec.defaultTextStyle),S=_9(o,f,T,v),R=Math.ceil(Math.ceil(Math.max(1,S.width)+f.padding*2)*l),U=Math.ceil(Math.ceil(Math.max(1,S.height)+f.padding*2)*l),W=v.image,K=2;W.width=(R|0)+K,W.height=(U|0)+K;let ee=Bk(o,f,l,T,v);await Wp(W,ee,Sk()&&b.length>0);let se=W,re;this._createCanvas&&(re=Fk(W,l));let Me=Zb(re?re.canvas:se,W.width-K,W.height-K,l);return this._createCanvas&&(this._renderer.texture.initSource(Me.source),oh.returnCanvasAndContext(re)),pt.return(v),Me}_increaseReferenceCount(o){this._activeTextures[o].usageCount++}decreaseReferenceCount(o){let l=this._activeTextures[o];l&&(l.usageCount--,l.usageCount===0&&(l.texture?this._cleanUp(l):l.promise.then(f=>{l.texture=f,this._cleanUp(l)}).catch(()=>{Gt("HTMLTextSystem: Failed to clean texture")}),this._activeTextures[o]=null))}_cleanUp(o){Mo.returnTexture(o.texture),o.texture.source.resource=null,o.texture.source.uploadMethodId="unknown"}getReferenceCount(o){return this._activeTextures[o].usageCount}destroy(){this._activeTextures=null}},u1.extension={type:[Ke.WebGLSystem,Ke.WebGPUSystem,Ke.CanvasSystem],name:"htmlText"},u1.defaultFontOptions={fontFamily:"Arial",fontStyle:"normal",fontWeight:"normal"}}),o2=D(()=>{Ot(),Ck(),jk(),Kr.add(u1),Kr.add(h4)}),m4,md,y4=D(()=>{rh(),od(),o0(),Sa(),m4=class GNe extends ld{constructor(...l){let f=l[0]??{};f instanceof Float32Array&&(Wn(Cr,"use new MeshGeometry({ positions, uvs, indices }) instead"),f={positions:f,uvs:l[1],indices:l[2]}),f={...GNe.defaultOptions,...f};let v=f.positions||new Float32Array([0,0,1,0,1,1,0,1]),b=f.uvs||new Float32Array([0,0,1,0,1,1,0,1]),T=f.indices||new Uint32Array([0,1,2,0,2,3]),S=f.shrinkBuffersToFit,R=new ml({data:v,label:"attribute-mesh-positions",shrinkToFit:S,usage:pa.VERTEX|pa.COPY_DST}),U=new ml({data:b,label:"attribute-mesh-uvs",shrinkToFit:S,usage:pa.VERTEX|pa.COPY_DST}),W=new ml({data:T,label:"index-mesh-buffer",shrinkToFit:S,usage:pa.INDEX|pa.COPY_DST});super({attributes:{aPosition:{buffer:R,format:"float32x2",stride:2*4,offset:0},aUV:{buffer:U,format:"float32x2",stride:2*4,offset:0}},indexBuffer:W,topology:f.topology}),this.batchMode="auto"}get positions(){return this.attributes.aPosition.buffer.data}set positions(l){this.attributes.aPosition.buffer.data=l}get uvs(){return this.attributes.aUV.buffer.data}set uvs(l){this.attributes.aUV.buffer.data=l}get indices(){return this.indexBuffer.data}set indices(l){this.indexBuffer.data=l}},m4.defaultOptions={topology:"triangle-list",shrinkBuffersToFit:!1},md=m4}),Yp,Hk,l2,v0=D(()=>{"use strict";Yp={name:"local-uniform-bit",vertex:{header:`

            struct LocalUniforms {
                uTransformMatrix:mat3x3<f32>,
                uColor:vec4<f32>,
                uRound:f32,
            }

            @group(1) @binding(0) var<uniform> localUniforms : LocalUniforms;
        `,main:`
            vColor *= localUniforms.uColor;
            modelMatrix *= localUniforms.uTransformMatrix;
        `,end:`
            if(localUniforms.uRound == 1)
            {
                vPosition = vec4(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
            }
        `}},Hk={...Yp,vertex:{...Yp.vertex,header:Yp.vertex.header.replace("group(1)","group(2)")}},l2={name:"local-uniform-bit",vertex:{header:`

            uniform mat3 uTransformMatrix;
            uniform vec4 uColor;
            uniform float uRound;
        `,main:`
            vColor *= uColor;
            modelMatrix = uTransformMatrix;
        `,end:`
            if(uRound == 1.)
            {
                gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
            }
        `}}}),Vk,Wk,w9=D(()=>{"use strict";Vk={name:"tiling-bit",vertex:{header:`
            struct TilingUniforms {
                uMapCoord:mat3x3<f32>,
                uClampFrame:vec4<f32>,
                uClampOffset:vec2<f32>,
                uTextureTransform:mat3x3<f32>,
                uSizeAnchor:vec4<f32>
            };

            @group(2) @binding(0) var<uniform> tilingUniforms: TilingUniforms;
            @group(2) @binding(1) var uTexture: texture_2d<f32>;
            @group(2) @binding(2) var uSampler: sampler;
        `,main:`
            uv = (tilingUniforms.uTextureTransform * vec3(uv, 1.0)).xy;

            position = (position - tilingUniforms.uSizeAnchor.zw) * tilingUniforms.uSizeAnchor.xy;
        `},fragment:{header:`
            struct TilingUniforms {
                uMapCoord:mat3x3<f32>,
                uClampFrame:vec4<f32>,
                uClampOffset:vec2<f32>,
                uTextureTransform:mat3x3<f32>,
                uSizeAnchor:vec4<f32>
            };

            @group(2) @binding(0) var<uniform> tilingUniforms: TilingUniforms;
            @group(2) @binding(1) var uTexture: texture_2d<f32>;
            @group(2) @binding(2) var uSampler: sampler;
        `,main:`

            var coord = vUV + ceil(tilingUniforms.uClampOffset - vUV);
            coord = (tilingUniforms.uMapCoord * vec3(coord, 1.0)).xy;
            var unclamped = coord;
            coord = clamp(coord, tilingUniforms.uClampFrame.xy, tilingUniforms.uClampFrame.zw);

            var bias = 0.;

            if(unclamped.x == coord.x && unclamped.y == coord.y)
            {
                bias = -32.;
            } 

            outColor = textureSampleBias(uTexture, uSampler, coord, bias);
        `}},Wk={name:"tiling-bit",vertex:{header:`
            uniform mat3 uTextureTransform;
            uniform vec4 uSizeAnchor;
        
        `,main:`
            uv = (uTextureTransform * vec3(aUV, 1.0)).xy;

            position = (position - uSizeAnchor.zw) * uSizeAnchor.xy;
        `},fragment:{header:`
            uniform sampler2D uTexture;
            uniform mat3 uMapCoord;
            uniform vec4 uClampFrame;
            uniform vec2 uClampOffset;
        `,main:`

        vec2 coord = vUV + ceil(uClampOffset - vUV);
        coord = (uMapCoord * vec3(coord, 1.0)).xy;
        vec2 unclamped = coord;
        coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);
        
        outColor = texture(uTexture, coord, unclamped == coord ? 0.0 : -32.0);// lod-bias very negative to force lod 0
    
        `}}}),v4,u2,Yk,h2=D(()=>{Un(),hd(),v0(),p0(),sh(),vl(),os(),w9(),Yk=class extends Ns{constructor(){v4??(v4=Ap({name:"tiling-sprite-shader",bits:[Yp,Vk,d0]})),u2??(u2=c0({name:"tiling-sprite-shader",bits:[l2,Wk,Rp]}));let o=new il({uMapCoord:{value:new ji,type:"mat3x3<f32>"},uClampFrame:{value:new Float32Array([0,0,1,1]),type:"vec4<f32>"},uClampOffset:{value:new Float32Array([0,0]),type:"vec2<f32>"},uTextureTransform:{value:new ji,type:"mat3x3<f32>"},uSizeAnchor:{value:new Float32Array([100,100,.5,.5]),type:"vec4<f32>"}});super({glProgram:u2,gpuProgram:v4,resources:{localUniforms:new il({uTransformMatrix:{value:new ji,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}}),tilingUniforms:o,uTexture:fn.EMPTY.source,uSampler:fn.EMPTY.source.style}})}updateUniforms(o,l,f,v,b,T){let S=this.resources.tilingUniforms,R=T.width,U=T.height,W=T.textureMatrix,K=S.uniforms.uTextureTransform;K.set(f.a*R/o,f.b*R/l,f.c*U/o,f.d*U/l,f.tx/o,f.ty/l),K.invert(),S.uniforms.uMapCoord=W.mapCoord,S.uniforms.uClampFrame=W.uClampFrame,S.uniforms.uClampOffset=W.uClampOffset,S.uniforms.uTextureTransform=K,S.uniforms.uSizeAnchor[0]=o,S.uniforms.uSizeAnchor[1]=l,S.uniforms.uSizeAnchor[2]=v,S.uniforms.uSizeAnchor[3]=b,T&&(this.resources.uTexture=T.source,this.resources.uSampler=T.source.style)}}}),qk,k9=D(()=>{y4(),qk=class extends md{constructor(){super({positions:new Float32Array([0,0,1,0,1,1,0,1]),uvs:new Float32Array([0,0,1,0,1,1,0,1]),indices:new Uint32Array([0,1,2,0,2,3])})}}});function T9(o,l){let f=o.anchor.x,v=o.anchor.y;l[0]=-f*o.width,l[1]=-v*o.height,l[2]=(1-f)*o.width,l[3]=-v*o.height,l[4]=(1-f)*o.width,l[5]=(1-v)*o.height,l[6]=-f*o.width,l[7]=(1-v)*o.height}var E9=D(()=>{"use strict"});function Xk(o,l,f,v){let b=0,T=o.length/(l||2),S=v.a,R=v.b,U=v.c,W=v.d,K=v.tx,ee=v.ty;for(f*=l;b<T;){let se=o[f],re=o[f+1];o[f]=S*se+U*re+K,o[f+1]=R*se+W*re+ee,f+=l,b++}}var Kk=D(()=>{"use strict"});function C9(o,l){let f=o.texture,v=f.frame.width,b=f.frame.height,T=0,S=0;o.applyAnchorToTexture&&(T=o.anchor.x,S=o.anchor.y),l[0]=l[6]=-T,l[2]=l[4]=1-T,l[1]=l[3]=-S,l[5]=l[7]=1-S;let R=ji.shared;R.copyFrom(o._tileTransform.matrix),R.tx/=o.width,R.ty/=o.height,R.invert(),R.scale(o.width/v,o.height/b),Xk(l,2,0,R)}var Zk=D(()=>{Un(),Kk()}),h1,c2,nl=D(()=>{Ot(),kg(),Ih(),ah(),Fp(),_c(),y4(),h2(),k9(),E9(),Zk(),h1=new qk,c2=class{constructor(o){this._state=Cu.default2d,this._tilingSpriteDataHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=o,this._renderer.renderableGC.addManagedHash(this,"_tilingSpriteDataHash")}validateRenderable(o){let l=this._getTilingSpriteData(o),f=l.canBatch;this._updateCanBatch(o);let v=l.canBatch;if(v&&v===f){let{batchableMesh:b}=l;if(b&&b.texture._source!==o.texture._source)return!b._batcher.checkAndUpdateTexture(b,o.texture)}return f!==v}addRenderable(o,l){let f=this._renderer.renderPipes.batch;this._updateCanBatch(o);let v=this._getTilingSpriteData(o),{geometry:b,canBatch:T}=v;if(T){v.batchableMesh||(v.batchableMesh=new Hy);let S=v.batchableMesh;o.didViewUpdate&&(this._updateBatchableMesh(o),S.geometry=b,S.renderable=o,S.transform=o.groupTransform,S.texture=o._texture),S.roundPixels=this._renderer._roundPixels|o._roundPixels,f.addToBatch(S,l)}else f.break(l),v.shader||(v.shader=new Yk),this.updateRenderable(o),l.add(o)}execute(o){let{shader:l}=this._tilingSpriteDataHash[o.uid];l.groups[0]=this._renderer.globalUniforms.bindGroup;let f=l.resources.localUniforms.uniforms;f.uTransformMatrix=o.groupTransform,f.uRound=this._renderer._roundPixels|o._roundPixels,jg(o.groupColorAlpha,f.uColor,0),this._state.blendMode=s0(o.groupBlendMode,o.texture._source),this._renderer.encoder.draw({geometry:h1,shader:l,state:this._state})}updateRenderable(o){let l=this._getTilingSpriteData(o),{canBatch:f}=l;if(f){let{batchableMesh:v}=l;o.didViewUpdate&&this._updateBatchableMesh(o),v._batcher.updateElement(v)}else if(o.didViewUpdate){let{shader:v}=l;v.updateUniforms(o.width,o.height,o._tileTransform.matrix,o.anchor.x,o.anchor.y,o.texture)}}destroyRenderable(o){let l=this._getTilingSpriteData(o);l.batchableMesh=null,l.shader?.destroy(),this._tilingSpriteDataHash[o.uid]=null,o.off("destroyed",this._destroyRenderableBound)}_getTilingSpriteData(o){return this._tilingSpriteDataHash[o.uid]||this._initTilingSpriteData(o)}_initTilingSpriteData(o){let l=new md({indices:h1.indices,positions:h1.positions.slice(),uvs:h1.uvs.slice()});return this._tilingSpriteDataHash[o.uid]={canBatch:!0,renderable:o,geometry:l},o.on("destroyed",this._destroyRenderableBound),this._tilingSpriteDataHash[o.uid]}_updateBatchableMesh(o){let l=this._getTilingSpriteData(o),{geometry:f}=l,v=o.texture.source.style;v.addressMode!=="repeat"&&(v.addressMode="repeat",v.update()),C9(o,f.uvs),T9(o,f.positions)}destroy(){for(let o in this._tilingSpriteDataHash)this.destroyRenderable(this._tilingSpriteDataHash[o].renderable);this._tilingSpriteDataHash=null,this._renderer=null}_updateCanBatch(o){let l=this._getTilingSpriteData(o),f=o.texture,v=!0;return this._renderer.type===Ce.WEBGL&&(v=this._renderer.context.supports.nonPowOf2wrapping),l.canBatch=f.textureMatrix.isSimple&&(v||f.source.isPowerOfTwo),l.canBatch}},c2.extension={type:[Ke.WebGLPipes,Ke.WebGPUPipes,Ke.CanvasPipes],name:"tilingSprite"}}),Qk=D(()=>{Ot(),nl(),Kr.add(c2)}),x4,Jk,c1=D(()=>{Sa(),y4(),x4=class UNe extends md{constructor(...l){super({});let f=l[0]??{};typeof f=="number"&&(Wn(Cr,"PlaneGeometry constructor changed please use { width, height, verticesX, verticesY } instead"),f={width:f,height:l[1],verticesX:l[2],verticesY:l[3]}),this.build(f)}build(l){l={...UNe.defaultOptions,...l},this.verticesX=this.verticesX??l.verticesX,this.verticesY=this.verticesY??l.verticesY,this.width=this.width??l.width,this.height=this.height??l.height;let f=this.verticesX*this.verticesY,v=[],b=[],T=[],S=this.verticesX-1,R=this.verticesY-1,U=this.width/S,W=this.height/R;for(let ee=0;ee<f;ee++){let se=ee%this.verticesX,re=ee/this.verticesX|0;v.push(se*U,re*W),b.push(se/S,re/R)}let K=S*R;for(let ee=0;ee<K;ee++){let se=ee%S,re=ee/S|0,Me=re*this.verticesX+se,Ie=re*this.verticesX+se+1,Ee=(re+1)*this.verticesX+se,Oe=(re+1)*this.verticesX+se+1;T.push(Me,Ie,Ee,Ie,Oe,Ee)}this.buffers[0].data=new Float32Array(v),this.buffers[1].data=new Float32Array(b),this.indexBuffer.data=new Uint32Array(T),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}},x4.defaultOptions={width:100,height:100,verticesX:10,verticesY:10},Jk=x4}),d2,p2,eT=D(()=>{c1(),d2=class jNe extends Jk{constructor(l={}){l={...jNe.defaultOptions,...l},super({width:l.width,height:l.height,verticesX:4,verticesY:4}),this.update(l)}update(l){this.width=l.width??this.width,this.height=l.height??this.height,this._originalWidth=l.originalWidth??this._originalWidth,this._originalHeight=l.originalHeight??this._originalHeight,this._leftWidth=l.leftWidth??this._leftWidth,this._rightWidth=l.rightWidth??this._rightWidth,this._topHeight=l.topHeight??this._topHeight,this._bottomHeight=l.bottomHeight??this._bottomHeight,this.updateUvs(),this.updatePositions()}updatePositions(){let l=this.positions,f=this._leftWidth+this._rightWidth,v=this.width>f?1:this.width/f,b=this._topHeight+this._bottomHeight,T=this.height>b?1:this.height/b,S=Math.min(v,T);l[9]=l[11]=l[13]=l[15]=this._topHeight*S,l[17]=l[19]=l[21]=l[23]=this.height-this._bottomHeight*S,l[25]=l[27]=l[29]=l[31]=this.height,l[2]=l[10]=l[18]=l[26]=this._leftWidth*S,l[4]=l[12]=l[20]=l[28]=this.width-this._rightWidth*S,l[6]=l[14]=l[22]=l[30]=this.width,this.getBuffer("aPosition").update()}updateUvs(){let l=this.uvs;l[0]=l[8]=l[16]=l[24]=0,l[1]=l[3]=l[5]=l[7]=0,l[6]=l[14]=l[22]=l[30]=1,l[25]=l[27]=l[29]=l[31]=1;let f=1/this._originalWidth,v=1/this._originalHeight;l[2]=l[10]=l[18]=l[26]=f*this._leftWidth,l[9]=l[11]=l[13]=l[15]=v*this._topHeight,l[4]=l[12]=l[20]=l[28]=1-f*this._rightWidth,l[17]=l[19]=l[21]=l[23]=1-v*this._bottomHeight,this.getBuffer("aUV").update()}},d2.defaultOptions={width:100,height:100,leftWidth:10,topHeight:10,rightWidth:10,bottomHeight:10,originalWidth:100,originalHeight:100},p2=d2}),f2,qp=D(()=>{Ot(),Ts(),_c(),eT(),f2=class{constructor(o){this._gpuSpriteHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=o,this._renderer.renderableGC.addManagedHash(this,"_gpuSpriteHash")}addRenderable(o,l){let f=this._getGpuSprite(o);o.didViewUpdate&&this._updateBatchableSprite(o,f),this._renderer.renderPipes.batch.addToBatch(f,l)}updateRenderable(o){let l=this._gpuSpriteHash[o.uid];o.didViewUpdate&&this._updateBatchableSprite(o,l),l._batcher.updateElement(l)}validateRenderable(o){let l=o._texture,f=this._getGpuSprite(o);return f.texture._source!==l._source?!f._batcher.checkAndUpdateTexture(f,l):!1}destroyRenderable(o){let l=this._gpuSpriteHash[o.uid];pt.return(l.geometry),pt.return(l),this._gpuSpriteHash[o.uid]=null,o.off("destroyed",this._destroyRenderableBound)}_updateBatchableSprite(o,l){l.geometry.update(o),l.texture=o._texture}_getGpuSprite(o){return this._gpuSpriteHash[o.uid]||this._initGPUSprite(o)}_initGPUSprite(o){let l=pt.get(Hy);return l.geometry=pt.get(p2),l.renderable=o,l.transform=o.groupTransform,l.texture=o._texture,l.roundPixels=this._renderer._roundPixels|o._roundPixels,this._gpuSpriteHash[o.uid]=l,o.didViewUpdate||this._updateBatchableSprite(o,l),o.on("destroyed",this._destroyRenderableBound),l}destroy(){for(let o in this._gpuSpriteHash)this._gpuSpriteHash[o].geometry.destroy();this._gpuSpriteHash=null,this._renderer=null}},f2.extension={type:[Ke.WebGLPipes,Ke.WebGPUPipes,Ke.CanvasPipes],name:"nineSliceSprite"}}),tT=D(()=>{Ot(),qp(),Kr.add(f2)}),b4,_4=D(()=>{Ot(),b4=class{constructor(o){this._renderer=o}push(o,l,f){this._renderer.renderPipes.batch.break(f),f.add({renderPipeId:"filter",canBundle:!1,action:"pushFilter",container:l,filterEffect:o})}pop(o,l,f){this._renderer.renderPipes.batch.break(f),f.add({renderPipeId:"filter",action:"popFilter",canBundle:!1})}execute(o){o.action==="pushFilter"?this._renderer.filter.push(o):o.action==="popFilter"&&this._renderer.filter.pop()}destroy(){this._renderer=null}},b4.extension={type:[Ke.WebGLPipes,Ke.WebGPUPipes,Ke.CanvasPipes],name:"filter"}});function w4(o,l){l.clear(),S9(o,l),l.isValid||l.set(0,0,0,0);let f=o.renderGroup||o.parentRenderGroup;return l.applyMatrix(f.worldTransform),l}function S9(o,l){if(o.localDisplayStatus!==7||!o.measurable)return;let f=!!o.effects.length,v=l;if((o.renderGroup||f)&&(v=Ct.get().clear()),o.boundsArea)l.addRect(o.boundsArea,o.worldTransform);else{if(o.renderPipeId){let T=o.bounds;v.addFrame(T.minX,T.minY,T.maxX,T.maxY,o.groupTransform)}let b=o.children;for(let T=0;T<b.length;T++)S9(b[T],v)}if(f){let b=!1;for(let T=0;T<o.effects.length;T++)o.effects[T].addBounds&&(b||(b=!0,v.applyMatrix(o.parentRenderGroup.worldTransform)),o.effects[T].addBounds(v,!0));b&&(v.applyMatrix(o.parentRenderGroup.worldTransform.copyTo(A9).invert()),l.addBounds(v,o.relativeGroupTransform)),l.addBounds(v),Ct.return(v)}else o.renderGroup&&(l.addBounds(v,o.relativeGroupTransform),Ct.return(v))}var A9,sF=D(()=>{Un(),ge(),A9=new ji});function oF(o,l){l.clear();let f=l.matrix;for(let v=0;v<o.length;v++){let b=o[v];b.globalDisplayStatus<7||(l.matrix=b.worldTransform,l.addBounds(b.bounds))}return l.matrix=f,l}var lF=D(()=>{"use strict"}),k4,T4,g2=D(()=>{Ot(),Un(),Gs(),th(),o0(),vl(),os(),ed(),ah(),$e(),sF(),lF(),Ar(),k4=new ld({attributes:{aPosition:{buffer:new Float32Array([0,0,1,0,1,1,0,1]),format:"float32x2",stride:2*4,offset:0}},indexBuffer:new Uint32Array([0,1,2,0,2,3])}),T4=class{constructor(o){this._filterStackIndex=0,this._filterStack=[],this._filterGlobalUniforms=new il({uInputSize:{value:new Float32Array(4),type:"vec4<f32>"},uInputPixel:{value:new Float32Array(4),type:"vec4<f32>"},uInputClamp:{value:new Float32Array(4),type:"vec4<f32>"},uOutputFrame:{value:new Float32Array(4),type:"vec4<f32>"},uGlobalFrame:{value:new Float32Array(4),type:"vec4<f32>"},uOutputTexture:{value:new Float32Array(4),type:"vec4<f32>"}}),this._globalFilterBindGroup=new Tu({}),this.renderer=o}get activeBackTexture(){return this._activeFilterData?.backTexture}push(o){let l=this.renderer,f=o.filterEffect.filters;this._filterStack[this._filterStackIndex]||(this._filterStack[this._filterStackIndex]=this._getFilterData());let v=this._filterStack[this._filterStackIndex];if(this._filterStackIndex++,f.length===0){v.skip=!0;return}let b=v.bounds;if(o.renderables?oF(o.renderables,b):o.filterEffect.filterArea?(b.clear(),b.addRect(o.filterEffect.filterArea),b.applyMatrix(o.container.worldTransform)):w4(o.container,b),o.container){let se=(o.container.renderGroup||o.container.parentRenderGroup).cacheToLocalTransform;se&&b.applyMatrix(se)}let T=l.renderTarget.renderTarget.colorTexture.source,S=1/0,R=0,U=!0,W=!1,K=!1,ee=!0;for(let se=0;se<f.length;se++){let re=f[se];if(S=Math.min(S,re.resolution==="inherit"?T._resolution:re.resolution),R+=re.padding,re.antialias==="off"?U=!1:re.antialias==="inherit"&&U&&(U=T.antialias),re.clipToViewport||(ee=!1),!(re.compatibleRenderers&l.type)){K=!1;break}if(re.blendRequired&&!(l.backBuffer?.useBackBuffer??!0)){Gt("Blend filter requires backBuffer on WebGL renderer to be enabled. Set `useBackBuffer: true` in the renderer options."),K=!1;break}K=re.enabled||K,W=W||re.blendRequired}if(!K){v.skip=!0;return}if(ee){let se=l.renderTarget.rootViewPort;b.fitBounds(0,se.width,0,se.height)}if(b.scale(S).ceil().scale(1/S).pad(R|0),!b.isPositive){v.skip=!0;return}v.skip=!1,v.bounds=b,v.blendRequired=W,v.container=o.container,v.filterEffect=o.filterEffect,v.previousRenderSurface=l.renderTarget.renderSurface,v.inputTexture=Mo.getOptimalTexture(b.width,b.height,S,U),l.renderTarget.bind(v.inputTexture,!0),l.globalUniforms.push({offset:b})}pop(){let o=this.renderer;this._filterStackIndex--;let l=this._filterStack[this._filterStackIndex];if(l.skip)return;this._activeFilterData=l;let f=l.inputTexture,v=l.bounds,b=fn.EMPTY;if(o.renderTarget.finishRenderPass(),l.blendRequired){let S=this._filterStackIndex>0?this._filterStack[this._filterStackIndex-1].bounds:null,R=o.renderTarget.getRenderTarget(l.previousRenderSurface);b=this.getBackTexture(R,v,S)}l.backTexture=b;let T=l.filterEffect.filters;if(this._globalFilterBindGroup.setResource(f.source.style,2),this._globalFilterBindGroup.setResource(b.source,3),o.globalUniforms.pop(),T.length===1)T[0].apply(this,f,l.previousRenderSurface,!1),Mo.returnTexture(f);else{let S=l.inputTexture,R=Mo.getOptimalTexture(v.width,v.height,S.source._resolution,!1),U=0;for(U=0;U<T.length-1;++U){T[U].apply(this,S,R,!0);let W=S;S=R,R=W}T[U].apply(this,S,l.previousRenderSurface,!1),Mo.returnTexture(S),Mo.returnTexture(R)}l.blendRequired&&Mo.returnTexture(b)}getBackTexture(o,l,f){let v=o.colorTexture.source._resolution,b=Mo.getOptimalTexture(l.width,l.height,v,!1),T=l.minX,S=l.minY;f&&(T-=f.minX,S-=f.minY),T=Math.floor(T*v),S=Math.floor(S*v);let R=Math.ceil(l.width*v),U=Math.ceil(l.height*v);return this.renderer.renderTarget.copyToTexture(o,b,{x:T,y:S},{width:R,height:U},{x:0,y:0}),b}applyFilter(o,l,f,v){let b=this.renderer,T=this._filterStack[this._filterStackIndex],S=T.bounds,R=Mn.shared,U=T.previousRenderSurface===f,W=this.renderer.renderTarget.rootRenderTarget.colorTexture.source._resolution,K=this._filterStackIndex-1;for(;K>0&&this._filterStack[K].skip;)--K;K>0&&(W=this._filterStack[K].inputTexture.source._resolution);let ee=this._filterGlobalUniforms,se=ee.uniforms,re=se.uOutputFrame,Me=se.uInputSize,Ie=se.uInputPixel,Ee=se.uInputClamp,Oe=se.uGlobalFrame,et=se.uOutputTexture;if(U){let Lt=this._filterStackIndex;for(;Lt>0;){Lt--;let Dt=this._filterStack[this._filterStackIndex-1];if(!Dt.skip){R.x=Dt.bounds.minX,R.y=Dt.bounds.minY;break}}re[0]=S.minX-R.x,re[1]=S.minY-R.y}else re[0]=0,re[1]=0;re[2]=l.frame.width,re[3]=l.frame.height,Me[0]=l.source.width,Me[1]=l.source.height,Me[2]=1/Me[0],Me[3]=1/Me[1],Ie[0]=l.source.pixelWidth,Ie[1]=l.source.pixelHeight,Ie[2]=1/Ie[0],Ie[3]=1/Ie[1],Ee[0]=.5*Ie[2],Ee[1]=.5*Ie[3],Ee[2]=l.frame.width*Me[2]-.5*Ie[2],Ee[3]=l.frame.height*Me[3]-.5*Ie[3];let kt=this.renderer.renderTarget.rootRenderTarget.colorTexture;Oe[0]=R.x*W,Oe[1]=R.y*W,Oe[2]=kt.source.width*W,Oe[3]=kt.source.height*W;let it=this.renderer.renderTarget.getRenderTarget(f);if(b.renderTarget.bind(f,!!v),f instanceof fn?(et[0]=f.frame.width,et[1]=f.frame.height):(et[0]=it.width,et[1]=it.height),et[2]=it.isRoot?-1:1,ee.update(),b.renderPipes.uniformBatch){let Lt=b.renderPipes.uniformBatch.getUboResource(ee);this._globalFilterBindGroup.setResource(Lt,0)}else this._globalFilterBindGroup.setResource(ee,0);this._globalFilterBindGroup.setResource(l.source,1),this._globalFilterBindGroup.setResource(l.source.style,2),o.groups[0]=this._globalFilterBindGroup,b.encoder.draw({geometry:k4,shader:o,state:o._state,topology:"triangle-list"}),b.type===Ce.WEBGL&&b.renderTarget.finishRenderPass()}_getFilterData(){return{skip:!1,inputTexture:null,bounds:new Re,container:null,filterEffect:null,blendRequired:!1,previousRenderSurface:null}}calculateSpriteMatrix(o,l){let f=this._activeFilterData,v=o.set(f.inputTexture._source.width,0,0,f.inputTexture._source.height,f.bounds.minX,f.bounds.minY),b=l.worldTransform.copyTo(ji.shared);return b.invert(),v.prepend(b),v.scale(1/l.texture.frame.width,1/l.texture.frame.height),v.translate(l.anchor.x,l.anchor.y),v}},T4.extension={type:[Ke.WebGLSystem,Ke.WebGPUSystem],name:"filter"}}),E4=D(()=>{Ot(),_4(),g2(),Kr.add(T4),Kr.add(b4)}),M9={},rT=D(()=>{fg(),ys(),Ui(),Kx(),nb(),H6(),V6(),Ib(),t4(),u4(),o2(),Qk(),tT(),E4()}),L9={},R9=D(()=>{ys(),Kx(),nb(),H6(),V6(),Ib(),t4(),u4(),o2(),Qk(),tT(),E4()}),iT,m2,D9=D(()=>{l0(),Ep(),sh(),Ih(),iT=class wte extends Ns{constructor(l){l={...wte.defaultOptions,...l},super(l),this.enabled=!0,this._state=Cu.for2d(),this.blendMode=l.blendMode,this.padding=l.padding,typeof l.antialias=="boolean"?this.antialias=l.antialias?"on":"off":this.antialias=l.antialias,this.resolution=l.resolution,this.blendRequired=l.blendRequired,this.clipToViewport=l.clipToViewport,this.addResource("uTexture",0,1)}apply(l,f,v,b){l.applyFilter(this,f,v,b)}get blendMode(){return this._state.blendMode}set blendMode(l){this._state.blendMode=l}static from(l){let{gpu:f,gl:v,...b}=l,T,S;return f&&(T=h0.from(f)),v&&(S=ud.from(v)),new wte({gpuProgram:T,glProgram:S,...b})}},iT.defaultOptions={blendMode:"normal",resolution:1,padding:0,antialias:"off",blendRequired:!1,clipToViewport:!0},m2=iT});async function C4(o){if(!o)for(let l=0;l<S4.length;l++){let f=S4[l];if(f.value.test()){await f.value.load();return}}}var S4,uF=D(()=>{Ot(),S4=[],Kr.handleByNamedList(Ke.Environment,S4)});function I9(){if(typeof d1=="boolean")return d1;try{d1=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{d1=!1}return d1}var d1,N9=D(()=>{"use strict"}),lu,y2=D(()=>{"use strict";lu=(o=>(o[o.NONE=0]="NONE",o[o.COLOR=16384]="COLOR",o[o.STENCIL=1024]="STENCIL",o[o.DEPTH=256]="DEPTH",o[o.COLOR_DEPTH=16640]="COLOR_DEPTH",o[o.COLOR_STENCIL=17408]="COLOR_STENCIL",o[o.DEPTH_STENCIL=1280]="DEPTH_STENCIL",o[o.ALL=17664]="ALL",o))(lu||{})}),A4,O9=D(()=>{"use strict";A4=class{constructor(o){this.items=[],this._name=o}emit(o,l,f,v,b,T,S,R){let{name:U,items:W}=this;for(let K=0,ee=W.length;K<ee;K++)W[K][U](o,l,f,v,b,T,S,R);return this}add(o){return o[this._name]&&(this.remove(o),this.items.push(o)),this}remove(o){let l=this.items.indexOf(o);return l!==-1&&this.items.splice(l,1),this}contains(o){return this.items.indexOf(o)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}}),B9,M4,p1,v2=D(()=>{nn(),uF(),Ch(),N9(),Sa(),y2(),O9(),Ir(),B9=["init","destroy","contextChange","resolutionChange","reset","renderEnd","renderStart","render","update","postrender","prerender"],M4=class HNe extends jr{constructor(l){super(),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=l.type,this.name=l.name,this.config=l;let f=[...B9,...this.config.runners??[]];this._addRunners(...f),this._unsafeEvalCheck()}async init(l={}){let f=l.skipExtensionImports===!0?!0:l.manageImports===!1;await C4(f),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(let v in this._systemsHash)l={...this._systemsHash[v].constructor.defaultOptions,...l};l={...HNe.defaultOptions,...l},this._roundPixels=l.roundPixels?1:0;for(let v=0;v<this.runners.init.items.length;v++)await this.runners.init.items[v].init(l);this._initOptions=l}render(l,f){let v=l;if(v instanceof ms&&(v={container:v},f&&(Wn(Cr,"passing a second argument is deprecated, please use render options instead"),v.target=f.renderTexture)),v.target||(v.target=this.view.renderTarget),v.target===this.view.renderTarget&&(this._lastObjectRendered=v.container,v.clearColor=this.background.colorRgba),v.clearColor){let b=Array.isArray(v.clearColor)&&v.clearColor.length===4;v.clearColor=b?v.clearColor:li.shared.setValue(v.clearColor).toArray()}v.transform||(v.container.updateLocalTransform(),v.transform=v.container.localTransform),v.container.enableRenderGroup(),this.runners.prerender.emit(v),this.runners.renderStart.emit(v),this.runners.render.emit(v),this.runners.renderEnd.emit(v),this.runners.postrender.emit(v)}resize(l,f,v){let b=this.view.resolution;this.view.resize(l,f,v),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),v!==void 0&&v!==b&&this.runners.resolutionChange.emit(v)}clear(l={}){let f=this;l.target||(l.target=f.renderTarget.renderTarget),l.clearColor||(l.clearColor=this.background.colorRgba),l.clear??(l.clear=lu.ALL);let{clear:v,clearColor:b,target:T}=l;li.shared.setValue(b??this.background.colorRgba),f.renderTarget.clear(T,v,li.shared.toArray())}get resolution(){return this.view.resolution}set resolution(l){this.view.resolution=l,this.runners.resolutionChange.emit(l)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...l){l.forEach(f=>{this.runners[f]=new A4(f)})}_addSystems(l){let f;for(f in l){let v=l[f];this._addSystem(v.value,v.name)}}_addSystem(l,f){let v=new l(this);if(this[f])throw new Error(`Whoops! The name "${f}" is already in use`);this[f]=v,this._systemsHash[f]=v;for(let b in this.runners)this.runners[b].add(v);return this}_addPipes(l,f){let v=f.reduce((b,T)=>(b[T.name]=T.value,b),{});l.forEach(b=>{let T=b.value,S=b.name,R=v[S];this.renderPipes[S]=new T(this,R?new R:null)})}destroy(l=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(l),Object.values(this.runners).forEach(f=>{f.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(l){return this.textureGenerator.generateTexture(l)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!I9())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}},M4.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1},p1=M4}),nT,hF=D(()=>{Ot(),Un(),au(),sb(),hd(),Ig(),Lp(),v0(),p0(),sh(),vl(),nT=class{init(){let o=new il({uTransformMatrix:{value:new ji,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}}),l=Ap({name:"graphics",bits:[Mp,Dy(sd()),Hk,d0]});this.shader=new Ns({gpuProgram:l,resources:{localUniforms:o}})}execute(o,l){let f=l.context,v=f.customShader||this.shader,b=o.renderer,T=b.graphicsContext,{batcher:S,instructions:R}=T.getContextRenderData(f),U=b.encoder;U.setGeometry(S.geometry,v.gpuProgram);let W=b.globalUniforms.bindGroup;U.setBindGroup(0,W,v.gpuProgram);let K=b.renderPipes.uniformBatch.getUniformBindGroup(v.resources.localUniforms,!0);U.setBindGroup(2,K,v.gpuProgram);let ee=R.instructions,se=null;for(let re=0;re<R.instructionSize;re++){let Me=ee[re];if(Me.topology!==se&&(se=Me.topology,U.setPipelineFromGeometryProgramAndState(S.geometry,v.gpuProgram,o.state,Me.topology)),v.groups[1]=Me.bindGroup,!Me.gpuBindGroup){let Ie=Me.textures;Me.bindGroup=Va(Ie.textures,Ie.count),Me.gpuBindGroup=b.bindGroup.getBindGroup(Me.bindGroup,v.gpuProgram,1)}U.setBindGroup(1,Me.bindGroup,v.gpuProgram),U.renderPassEncoder.drawIndexed(Me.size,1,Me.start)}}destroy(){this.shader.destroy(!0),this.shader=null}},nT.extension={type:[Ke.WebGPUPipesAdaptor],name:"graphics"}}),P9,F9,$9=D(()=>{"use strict";P9={name:"texture-bit",vertex:{header:`

        struct TextureUniforms {
            uTextureMatrix:mat3x3<f32>,
        }

        @group(2) @binding(2) var<uniform> textureUniforms : TextureUniforms;
        `,main:`
            uv = (textureUniforms.uTextureMatrix * vec3(uv, 1.0)).xy;
        `},fragment:{header:`
            @group(2) @binding(0) var uTexture: texture_2d<f32>;
            @group(2) @binding(1) var uSampler: sampler;

         
        `,main:`
            outColor = textureSample(uTexture, uSampler, vUV);
        `}},F9={name:"texture-bit",vertex:{header:`
            uniform mat3 uTextureMatrix;
        `,main:`
            uv = (uTextureMatrix * vec3(uv, 1.0)).xy;
        `},fragment:{header:`
        uniform sampler2D uTexture;

         
        `,main:`
            outColor = texture(uTexture, vUV);
        `}}}),aT,z9=D(()=>{Ot(),Un(),hd(),v0(),p0(),$9(),sh(),os(),Ar(),aT=class{init(){let o=Ap({name:"mesh",bits:[Yp,P9,d0]});this._shader=new Ns({gpuProgram:o,resources:{uTexture:fn.EMPTY._source,uSampler:fn.EMPTY._source.style,textureUniforms:{uTextureMatrix:{type:"mat3x3<f32>",value:new ji}}}})}execute(o,l){let f=o.renderer,v=l._shader;if(!v)v=this._shader,v.groups[2]=f.texture.getTextureBindGroup(l.texture);else if(!v.gpuProgram){Gt("Mesh shader has no gpuProgram",l.shader);return}let b=v.gpuProgram;if(b.autoAssignGlobalUniforms&&(v.groups[0]=f.globalUniforms.bindGroup),b.autoAssignLocalUniforms){let T=o.localUniforms;v.groups[1]=f.renderPipes.uniformBatch.getUniformBindGroup(T,!0)}f.encoder.draw({geometry:l._geometry,shader:v,state:l.state})}destroy(){this._shader.destroy(!0),this._shader=null}},aT.extension={type:[Ke.WebGPUPipesAdaptor],name:"mesh"}}),x2,sT,G9=D(()=>{Ot(),Ih(),sb(),x2=Cu.for2d(),sT=class{start(o,l,f){let v=o.renderer,b=v.encoder,T=f.gpuProgram;this._shader=f,this._geometry=l,b.setGeometry(l,T),x2.blendMode="normal",v.pipeline.getPipeline(l,T,x2);let S=v.globalUniforms.bindGroup;b.resetBindGroup(1),b.setBindGroup(0,S,T)}execute(o,l){let f=this._shader.gpuProgram,v=o.renderer,b=v.encoder;if(!l.bindGroup){let R=l.textures;l.bindGroup=Va(R.textures,R.count)}x2.blendMode=l.blendMode;let T=v.bindGroup.getBindGroup(l.bindGroup,f,1),S=v.pipeline.getPipeline(this._geometry,f,x2,l.topology);l.bindGroup._touch(v.textureGC.count),b.setPipeline(S),b.renderPassEncoder.setBindGroup(1,T),b.renderPassEncoder.drawIndexed(l.size,1,l.start)}},sT.extension={type:[Ke.WebGPUPipesAdaptor],name:"batch"}}),L4,U9=D(()=>{Ot(),L4=class{constructor(o){this._renderer=o}updateRenderable(){}destroyRenderable(){}validateRenderable(){return!1}addRenderable(o,l){this._renderer.renderPipes.batch.break(l),l.add(o)}execute(o){o.isRenderable&&o.render(this._renderer)}destroy(){this._renderer=null}},L4.extension={type:[Ke.WebGLPipes,Ke.WebGPUPipes,Ke.CanvasPipes],name:"customRender"}});function oT(o,l){let f=o.instructionSet,v=f.instructions;for(let b=0;b<f.instructionSize;b++){let T=v[b];l[T.renderPipeId].execute(T)}}var j9=D(()=>{"use strict"}),H9,lT,cF=D(()=>{Ot(),Un(),Ts(),at(),j9(),H9=new ji,lT=class{constructor(o){this._renderer=o}addRenderGroup(o,l){o.isCachedAsTexture?this._addRenderableCacheAsTexture(o,l):this._addRenderableDirect(o,l)}execute(o){o.isRenderable&&(o.isCachedAsTexture?this._executeCacheAsTexture(o):this._executeDirect(o))}destroy(){this._renderer=null}_addRenderableDirect(o,l){this._renderer.renderPipes.batch.break(l),o._batchableRenderGroup&&(pt.return(o._batchableRenderGroup),o._batchableRenderGroup=null),l.add(o)}_addRenderableCacheAsTexture(o,l){let f=o._batchableRenderGroup??(o._batchableRenderGroup=pt.get(Kg));f.renderable=o.root,f.transform=o.root.relativeGroupTransform,f.texture=o.texture,f.bounds=o._textureBounds,l.add(o),this._renderer.renderPipes.batch.addToBatch(f,l)}_executeCacheAsTexture(o){if(o.textureNeedsUpdate){o.textureNeedsUpdate=!1;let l=H9.identity().translate(-o._textureBounds.x,-o._textureBounds.y);this._renderer.renderTarget.push(o.texture,!0,null,o.texture.frame),this._renderer.globalUniforms.push({worldTransformMatrix:l,worldColor:o.worldColorAlpha}),oT(o,this._renderer.renderPipes),this._renderer.renderTarget.pop(),this._renderer.globalUniforms.pop()}o._batchableRenderGroup._batcher.updateElement(o._batchableRenderGroup),o._batchableRenderGroup._batcher.geometry.buffers[0].update()}_executeDirect(o){this._renderer.globalUniforms.push({worldTransformMatrix:o.inverseParentTextureTransform,worldColor:o.worldColorAlpha}),oT(o,this._renderer.renderPipes),this._renderer.globalUniforms.pop()}},lT.extension={type:[Ke.WebGLPipes,Ke.WebGPUPipes,Ke.CanvasPipes],name:"renderGroup"}});function dF(o,l){let f=o.root,v=o.instructionSet;v.reset();let b=l.renderPipes?l:l.batch.renderer,T=b.renderPipes;T.batch.buildStart(v),T.blendMode.buildStart(),T.colorMask.buildStart(),f.sortableChildren&&f.sortChildren(),D4(f,v,b,!0),T.batch.buildEnd(v),T.blendMode.buildEnd(v)}function R4(o,l,f){let v=f.renderPipes?f:f.batch.renderer;o.globalDisplayStatus<7||!o.includeInBuild||(o.sortableChildren&&o.sortChildren(),o.isSimple?pF(o,l,v):D4(o,l,v,!1))}function pF(o,l,f){if(o.renderPipeId){let v=o,{renderPipes:b,renderableGC:T}=f;b.blendMode.setBlendMode(v,o.groupBlendMode,l),b[v.renderPipeId].addRenderable(v,l),T.addRenderable(v,l),v.didViewUpdate=!1}if(!o.renderGroup){let v=o.children,b=v.length;for(let T=0;T<b;T++)R4(v[T],l,f)}}function D4(o,l,f,v){let{renderPipes:b,renderableGC:T}=f;if(!v&&o.renderGroup)b.renderGroup.addRenderGroup(o.renderGroup,l);else{for(let W=0;W<o.effects.length;W++){let K=o.effects[W];b[K.pipe].push(K,o,l)}let S=o,R=S.renderPipeId;R&&(b.blendMode.setBlendMode(S,S.groupBlendMode,l),b[R].addRenderable(S,l),T.addRenderable(S,l),S.didViewUpdate=!1);let U=o.children;if(U.length)for(let W=0;W<U.length;W++)R4(U[W],l,f);for(let W=o.effects.length-1;W>=0;W--){let K=o.effects[W];b[K.pipe].pop(K,o,l)}}}var f1=D(()=>{"use strict"});function b2(o,l){l||(l=0);for(let f=l;f<o.length&&o[f];f++)o[f]=null}var I4=D(()=>{"use strict"});function uT(o,l=!1){x0(o);let f=o.childrenToUpdate,v=o.updateTick++;for(let b in f){let T=Number(b),S=f[b],R=S.list,U=S.index;for(let W=0;W<U;W++){let K=R[W];K.parentRenderGroup===o&&K.relativeRenderGroupDepth===T&&Oh(K,v,0)}b2(R,U),S.index=0}if(l)for(let b=0;b<o.renderGroupChildren.length;b++)uT(o.renderGroupChildren[b],l)}function x0(o){let l=o.root,f;if(o.renderGroupParent){let v=o.renderGroupParent;o.worldTransform.appendFrom(l.relativeGroupTransform,v.worldTransform),o.worldColor=xt(l.groupColor,v.worldColor),f=l.groupAlpha*v.worldAlpha}else o.worldTransform.copyFrom(l.localTransform),o.worldColor=l.localColor,f=l.localAlpha;f=f<0?0:f>1?1:f,o.worldAlpha=f,o.worldColorAlpha=o.worldColor+((f*255|0)<<24)}function Oh(o,l,f){if(l===o.updateTick)return;o.updateTick=l,o.didChange=!1;let v=o.localTransform;o.updateLocalTransform();let b=o.parent;if(b&&!b.renderGroup?(f=f|o._updateFlags,o.relativeGroupTransform.appendFrom(v,b.relativeGroupTransform),f&hT&&Xp(o,b,f)):(f=o._updateFlags,o.relativeGroupTransform.copyFrom(v),f&hT&&Xp(o,uh,f)),!o.renderGroup){let T=o.children,S=T.length;for(let W=0;W<S;W++)Oh(T[W],l,f);let R=o.parentRenderGroup,U=o;U.renderPipeId&&!R.structureDidChange&&R.updateRenderable(U)}}function Xp(o,l,f){if(f&hg){o.groupColor=xt(o.localColor,l.groupColor);let v=o.localAlpha*l.groupAlpha;v=v<0?0:v>1?1:v,o.groupAlpha=v,o.groupColorAlpha=o.groupColor+((v*255|0)<<24)}f&ny&&(o.groupBlendMode=o.localBlendMode==="inherit"?l.groupBlendMode:o.localBlendMode),f&up&&(o.globalDisplayStatus=o.localDisplayStatus&l.globalDisplayStatus),o._updateFlags=0}var uh,hT,_2=D(()=>{Ch(),I4(),ur(),uh=new ms,hT=up|hg|ny});function N4(o,l){let{list:f,index:v}=o.childrenRenderablesToUpdate,b=!1;for(let T=0;T<v;T++){let S=f[T];if(b=l[S.renderPipeId].validateRenderable(S),b)break}return o.structureDidChange=b,b}var V9=D(()=>{"use strict"}),W9,cT,dT=D(()=>{Ot(),Un(),ed(),$e(),f1(),I4(),j9(),_2(),V9(),W9=new ji,cT=class{constructor(o){this._renderer=o}render({container:o,transform:l}){let f=o.parent,v=o.renderGroup.renderGroupParent;o.parent=null,o.renderGroup.renderGroupParent=null;let b=this._renderer,T=W9;l&&(T=T.copyFrom(o.renderGroup.localTransform),o.renderGroup.localTransform.copyFrom(l));let S=b.renderPipes;this._updateCachedRenderGroups(o.renderGroup,null),this._updateRenderGroups(o.renderGroup),b.globalUniforms.start({worldTransformMatrix:l?o.renderGroup.localTransform:o.renderGroup.worldTransform,worldColor:o.renderGroup.worldColorAlpha}),oT(o.renderGroup,S),S.uniformBatch&&S.uniformBatch.renderEnd(),l&&o.renderGroup.localTransform.copyFrom(T),o.parent=f,o.renderGroup.renderGroupParent=v}destroy(){this._renderer=null}_updateCachedRenderGroups(o,l){if(o.isCachedAsTexture){if(!o.updateCacheTexture)return;l=o}o._parentCacheAsTextureRenderGroup=l;for(let f=o.renderGroupChildren.length-1;f>=0;f--)this._updateCachedRenderGroups(o.renderGroupChildren[f],l);if(o.invalidateMatrices(),o.isCachedAsTexture){if(o.textureNeedsUpdate){let f=o.root.getLocalBounds();f.ceil();let v=o.texture;o.texture&&Mo.returnTexture(o.texture);let b=this._renderer,T=o.textureOptions.resolution||b.view.resolution,S=o.textureOptions.antialias??b.view.antialias;o.texture=Mo.getOptimalTexture(f.width,f.height,T,S),o._textureBounds||(o._textureBounds=new Re),o._textureBounds.copyFrom(f),v!==o.texture&&o.renderGroupParent&&(o.renderGroupParent.structureDidChange=!0)}}else o.texture&&(Mo.returnTexture(o.texture),o.texture=null)}_updateRenderGroups(o){let l=this._renderer,f=l.renderPipes;if(o.runOnRender(),o.instructionSet.renderPipes=f,o.structureDidChange?b2(o.childrenRenderablesToUpdate.list,0):N4(o,f),uT(o),o.structureDidChange?(o.structureDidChange=!1,dF(o,l)):this._updateRenderables(o),o.childrenRenderablesToUpdate.index=0,l.renderPipes.batch.upload(o.instructionSet),!(o.isCachedAsTexture&&!o.textureNeedsUpdate))for(let v=0;v<o.renderGroupChildren.length;v++)this._updateRenderGroups(o.renderGroupChildren[v])}_updateRenderables(o){let{list:l,index:f}=o.childrenRenderablesToUpdate;for(let v=0;v<f;v++){let b=l[v];b.didViewUpdate&&o.updateRenderable(b)}b2(l,f)}},cT.extension={type:[Ke.WebGLSystem,Ke.WebGPUSystem,Ke.CanvasSystem],name:"renderGroup"}}),pT,Y9=D(()=>{Ot(),Ts(),at(),pT=class{constructor(o){this._gpuSpriteHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=o,this._renderer.renderableGC.addManagedHash(this,"_gpuSpriteHash")}addRenderable(o,l){let f=this._getGpuSprite(o);o.didViewUpdate&&this._updateBatchableSprite(o,f),this._renderer.renderPipes.batch.addToBatch(f,l)}updateRenderable(o){let l=this._gpuSpriteHash[o.uid];o.didViewUpdate&&this._updateBatchableSprite(o,l),l._batcher.updateElement(l)}validateRenderable(o){let l=o._texture,f=this._getGpuSprite(o);return f.texture._source!==l._source?!f._batcher.checkAndUpdateTexture(f,l):!1}destroyRenderable(o){let l=this._gpuSpriteHash[o.uid];pt.return(l),this._gpuSpriteHash[o.uid]=null,o.off("destroyed",this._destroyRenderableBound)}_updateBatchableSprite(o,l){l.bounds=o.bounds,l.texture=o._texture}_getGpuSprite(o){return this._gpuSpriteHash[o.uid]||this._initGPUSprite(o)}_initGPUSprite(o){let l=pt.get(Kg);return l.renderable=o,l.transform=o.groupTransform,l.texture=o._texture,l.bounds=o.bounds,l.roundPixels=this._renderer._roundPixels|o._roundPixels,this._gpuSpriteHash[o.uid]=l,o.on("destroyed",this._destroyRenderableBound),l}destroy(){for(let o in this._gpuSpriteHash)pt.return(this._gpuSpriteHash[o]);this._gpuSpriteHash=null,this._renderer=null}},pT.extension={type:[Ke.WebGLPipes,Ke.WebGPUPipes,Ke.CanvasPipes],name:"sprite"}}),w2,q9=D(()=>{Ir(),w2="8.6.1"}),k2,O4,X9=D(()=>{Ot(),q9(),k2=class{static init(){globalThis.__PIXI_APP_INIT__?.(this,w2)}static destroy(){}},k2.extension=Ke.Application,O4=class{constructor(o){this._renderer=o}init(){globalThis.__PIXI_RENDERER_INIT__?.(this._renderer,w2)}destroy(){this._renderer=null}},O4.extension={type:[Ke.WebGLSystem,Ke.WebGPUSystem],name:"initHook",priority:-10}}),B4,P4,fF=D(()=>{Ot(),Ih(),wb(),B4=class VNe{constructor(l,f){this.state=Cu.for2d(),this._batchersByInstructionSet=Object.create(null),this._activeBatches=Object.create(null),this.renderer=l,this._adaptor=f,this._adaptor.init?.(this)}static getBatcher(l){return new this._availableBatchers[l]}buildStart(l){let f=this._batchersByInstructionSet[l.uid];f||(f=this._batchersByInstructionSet[l.uid]=Object.create(null),f.default||(f.default=new Ip)),this._activeBatches=f,this._activeBatch=this._activeBatches.default;for(let v in this._activeBatches)this._activeBatches[v].begin()}addToBatch(l,f){if(this._activeBatch.name!==l.batcherName){this._activeBatch.break(f);let v=this._activeBatches[l.batcherName];v||(v=this._activeBatches[l.batcherName]=VNe.getBatcher(l.batcherName),v.begin()),this._activeBatch=v}this._activeBatch.add(l)}break(l){this._activeBatch.break(l)}buildEnd(l){this._activeBatch.break(l);let f=this._activeBatches;for(let v in f){let b=f[v],T=b.geometry;T.indexBuffer.setDataWithSize(b.indexBuffer,b.indexSize,!0),T.buffers[0].setDataWithSize(b.attributeBuffer.float32View,b.attributeSize,!1)}}upload(l){let f=this._batchersByInstructionSet[l.uid];for(let v in f){let b=f[v],T=b.geometry;b.dirty&&(b.dirty=!1,T.buffers[0].update(b.attributeSize*4))}}execute(l){if(l.action==="startBatch"){let f=l.batcher,v=f.geometry,b=f.shader;this._adaptor.start(this,v,b)}this._adaptor.execute(this,l)}destroy(){this.state=null,this.renderer=null,this._adaptor=null;for(let l in this._activeBatches)this._activeBatches[l].destroy();this._activeBatches=null}},B4.extension={type:[Ke.WebGLPipes,Ke.WebGPUPipes,Ke.CanvasPipes],name:"batch"},B4._availableBatchers=Object.create(null),P4=B4,Kr.handleByMap(Ke.Batcher,P4._availableBatchers),Kr.add(Ip)}),fT,gF=D(()=>{fT=`in vec2 vMaskCoord;
in vec2 vTextureCoord;

uniform sampler2D uTexture;
uniform sampler2D uMaskTexture;

uniform float uAlpha;
uniform vec4 uMaskClamp;
uniform float uInverse;

out vec4 finalColor;

void main(void)
{
    float clip = step(3.5,
        step(uMaskClamp.x, vMaskCoord.x) +
        step(uMaskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, uMaskClamp.z) +
        step(vMaskCoord.y, uMaskClamp.w));

    // TODO look into why this is needed
    float npmAlpha = uAlpha;
    vec4 original = texture(uTexture, vTextureCoord);
    vec4 masky = texture(uMaskTexture, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    float a = alphaMul * masky.r * npmAlpha * clip;

    if (uInverse == 1.0) {
        a = 1.0 - a;
    }

    finalColor = original * a;
}
`}),K9,mF=D(()=>{K9=`in vec2 aPosition;

out vec2 vTextureCoord;
out vec2 vMaskCoord;


uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;
uniform mat3 uFilterMatrix;

vec4 filterVertexPosition(  vec2 aPosition )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
       
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord(  vec2 aPosition )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

vec2 getFilterCoord( vec2 aPosition )
{
    return  ( uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;
}   

void main(void)
{
    gl_Position = filterVertexPosition(aPosition);
    vTextureCoord = filterTextureCoord(aPosition);
    vMaskCoord = getFilterCoord(aPosition);
}
`}),T2,yF=D(()=>{T2=`struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct MaskUniforms {
  uFilterMatrix:mat3x3<f32>,
  uMaskClamp:vec4<f32>,
  uAlpha:f32,
  uInverse:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> filterUniforms : MaskUniforms;
@group(1) @binding(1) var uMaskTexture: texture_2d<f32>;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>,
    @location(1) filterUv : vec2<f32>,
};

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);
}

fn getFilterCoord(aPosition:vec2<f32> ) -> vec2<f32>
{
  return ( filterUniforms.uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}

@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>,
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition),
   getFilterCoord(aPosition)
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @location(1) filterUv: vec2<f32>,
  @builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {

    var maskClamp = filterUniforms.uMaskClamp;
    var uAlpha = filterUniforms.uAlpha;

    var clip = step(3.5,
      step(maskClamp.x, filterUv.x) +
      step(maskClamp.y, filterUv.y) +
      step(filterUv.x, maskClamp.z) +
      step(filterUv.y, maskClamp.w));

    var mask = textureSample(uMaskTexture, uSampler, filterUv);
    var source = textureSample(uTexture, uSampler, uv);
    var alphaMul = 1.0 - uAlpha * (1.0 - mask.a);

    var a: f32 = alphaMul * mask.r * uAlpha * clip;

    if (filterUniforms.uInverse == 1.0) {
        a = 1.0 - a;
    }

    return source * a;
}
`}),E2,vF=D(()=>{Un(),l0(),Ep(),vl(),X8(),D9(),gF(),mF(),yF(),E2=class extends m2{constructor(o){let{sprite:l,...f}=o,v=new Ew(l.texture),b=new il({uFilterMatrix:{value:new ji,type:"mat3x3<f32>"},uMaskClamp:{value:v.uClampFrame,type:"vec4<f32>"},uAlpha:{value:1,type:"f32"},uInverse:{value:o.inverse?1:0,type:"f32"}}),T=h0.from({vertex:{source:T2,entryPoint:"mainVertex"},fragment:{source:T2,entryPoint:"mainFragment"}}),S=ud.from({vertex:K9,fragment:fT,name:"mask-filter"});super({...f,gpuProgram:T,glProgram:S,resources:{filterUniforms:b,uMaskTexture:l.texture.source}}),this.sprite=l,this._textureMatrix=v}set inverse(o){this.resources.filterUniforms.uniforms.uInverse=o?1:0}get inverse(){return this.resources.filterUniforms.uniforms.uInverse===1}apply(o,l,f,v){this._textureMatrix.texture=this.sprite.texture,o.calculateSpriteMatrix(this.resources.filterUniforms.uniforms.uFilterMatrix,this.sprite).prepend(this._textureMatrix.mapCoord),this.resources.uMaskTexture=this.sprite.texture.source,o.applyFilter(this,l,f,v)}}}),F4,$4,z4,Z9=D(()=>{Ot(),Ge(),vF(),$e(),ht(),f1(),Qx(),Ts(),os(),ed(),ah(),F4=new Re,$4=class extends Pe{constructor(){super(),this.filters=[new E2({sprite:new Do(fn.EMPTY),inverse:!1,resolution:"inherit",antialias:"inherit"})]}get sprite(){return this.filters[0].sprite}set sprite(o){this.filters[0].sprite=o}get inverse(){return this.filters[0].inverse}set inverse(o){this.filters[0].inverse=o}},z4=class{constructor(o){this._activeMaskStage=[],this._renderer=o}push(o,l,f){let v=this._renderer;if(v.renderPipes.batch.break(f),f.add({renderPipeId:"alphaMask",action:"pushMaskBegin",mask:o,inverse:l._maskOptions.inverse,canBundle:!1,maskedContainer:l}),o.inverse=l._maskOptions.inverse,o.renderMaskToTexture){let b=o.mask;b.includeInBuild=!0,R4(b,f,v),b.includeInBuild=!1}v.renderPipes.batch.break(f),f.add({renderPipeId:"alphaMask",action:"pushMaskEnd",mask:o,maskedContainer:l,inverse:l._maskOptions.inverse,canBundle:!1})}pop(o,l,f){this._renderer.renderPipes.batch.break(f),f.add({renderPipeId:"alphaMask",action:"popMaskEnd",mask:o,inverse:l._maskOptions.inverse,canBundle:!1})}execute(o){let l=this._renderer,f=o.mask.renderMaskToTexture;if(o.action==="pushMaskBegin"){let v=pt.get($4);if(v.inverse=o.inverse,f){o.mask.mask.measurable=!0;let b=De(o.mask.mask,!0,F4);o.mask.mask.measurable=!1,b.ceil();let T=l.renderTarget.renderTarget.colorTexture.source,S=Mo.getOptimalTexture(b.width,b.height,T._resolution,T.antialias);l.renderTarget.push(S,!0),l.globalUniforms.push({offset:b,worldColor:4294967295});let R=v.sprite;R.texture=S,R.worldTransform.tx=b.minX,R.worldTransform.ty=b.minY,this._activeMaskStage.push({filterEffect:v,maskedContainer:o.maskedContainer,filterTexture:S})}else v.sprite=o.mask.mask,this._activeMaskStage.push({filterEffect:v,maskedContainer:o.maskedContainer})}else if(o.action==="pushMaskEnd"){let v=this._activeMaskStage[this._activeMaskStage.length-1];f&&(l.type===Ce.WEBGL&&l.renderTarget.finishRenderPass(),l.renderTarget.pop(),l.globalUniforms.pop()),l.filter.push({renderPipeId:"filter",action:"pushFilter",container:v.maskedContainer,filterEffect:v.filterEffect,canBundle:!1})}else if(o.action==="popMaskEnd"){l.filter.pop();let v=this._activeMaskStage.pop();f&&Mo.returnTexture(v.filterTexture),pt.return(v.filterEffect)}}destroy(){this._renderer=null,this._activeMaskStage=null}},z4.extension={type:[Ke.WebGLPipes,Ke.WebGPUPipes,Ke.CanvasPipes],name:"alphaMask"}}),G4,xF=D(()=>{Ot(),G4=class{constructor(o){this._colorStack=[],this._colorStackIndex=0,this._currentColor=0,this._renderer=o}buildStart(){this._colorStack[0]=15,this._colorStackIndex=1,this._currentColor=15}push(o,l,f){this._renderer.renderPipes.batch.break(f);let v=this._colorStack;v[this._colorStackIndex]=v[this._colorStackIndex-1]&o.mask;let b=this._colorStack[this._colorStackIndex];b!==this._currentColor&&(this._currentColor=b,f.add({renderPipeId:"colorMask",colorMask:b,canBundle:!1})),this._colorStackIndex++}pop(o,l,f){this._renderer.renderPipes.batch.break(f);let v=this._colorStack;this._colorStackIndex--;let b=v[this._colorStackIndex-1];b!==this._currentColor&&(this._currentColor=b,f.add({renderPipeId:"colorMask",colorMask:b,canBundle:!1}))}execute(o){this._renderer.colorMask.setMask(o.colorMask)}destroy(){this._colorStack=null}},G4.extension={type:[Ke.WebGLPipes,Ke.WebGPUPipes,Ke.CanvasPipes],name:"colorMask"}}),gT,bF=D(()=>{Ot(),f1(),y2(),zl(),gT=class{constructor(o){this._maskStackHash={},this._maskHash=new WeakMap,this._renderer=o}push(o,l,f){var v;let b=o,T=this._renderer;T.renderPipes.batch.break(f),T.renderPipes.blendMode.setBlendMode(b.mask,"none",f),f.add({renderPipeId:"stencilMask",action:"pushMaskBegin",mask:o,inverse:l._maskOptions.inverse,canBundle:!1});let S=b.mask;S.includeInBuild=!0,this._maskHash.has(b)||this._maskHash.set(b,{instructionsStart:0,instructionsLength:0});let R=this._maskHash.get(b);R.instructionsStart=f.instructionSize,R4(S,f,T),S.includeInBuild=!1,T.renderPipes.batch.break(f),f.add({renderPipeId:"stencilMask",action:"pushMaskEnd",mask:o,inverse:l._maskOptions.inverse,canBundle:!1});let U=f.instructionSize-R.instructionsStart-1;R.instructionsLength=U;let W=T.renderTarget.renderTarget.uid;(v=this._maskStackHash)[W]??(v[W]=0)}pop(o,l,f){let v=o,b=this._renderer;b.renderPipes.batch.break(f),b.renderPipes.blendMode.setBlendMode(v.mask,"none",f),f.add({renderPipeId:"stencilMask",action:"popMaskBegin",inverse:l._maskOptions.inverse,canBundle:!1});let T=this._maskHash.get(o);for(let S=0;S<T.instructionsLength;S++)f.instructions[f.instructionSize++]=f.instructions[T.instructionsStart++];f.add({renderPipeId:"stencilMask",action:"popMaskEnd",canBundle:!1})}execute(o){var l;let f=this._renderer,v=f.renderTarget.renderTarget.uid,b=(l=this._maskStackHash)[v]??(l[v]=0);o.action==="pushMaskBegin"?(f.renderTarget.ensureDepthStencil(),f.stencil.setStencilMode(Is.RENDERING_MASK_ADD,b),b++,f.colorMask.setMask(0)):o.action==="pushMaskEnd"?(o.inverse?f.stencil.setStencilMode(Is.INVERSE_MASK_ACTIVE,b):f.stencil.setStencilMode(Is.MASK_ACTIVE,b),f.colorMask.setMask(15)):o.action==="popMaskBegin"?(f.colorMask.setMask(0),b!==0?f.stencil.setStencilMode(Is.RENDERING_MASK_REMOVE,b):(f.renderTarget.clear(null,lu.STENCIL),f.stencil.setStencilMode(Is.DISABLED,b)),b--):o.action==="popMaskEnd"&&(o.inverse?f.stencil.setStencilMode(Is.INVERSE_MASK_ACTIVE,b):f.stencil.setStencilMode(Is.MASK_ACTIVE,b),f.colorMask.setMask(15)),this._maskStackHash[v]=b}destroy(){this._renderer=null,this._maskStackHash=null,this._maskHash=null}},gT.extension={type:[Ke.WebGLPipes,Ke.WebGPUPipes,Ke.CanvasPipes],name:"stencilMask"}}),U4,Q9,_F=D(()=>{nn(),Ot(),U4=class WNe{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new li(0),this.color=this._backgroundColor,this.alpha=1}init(l){l={...WNe.defaultOptions,...l},this.clearBeforeRender=l.clearBeforeRender,this.color=l.background||l.backgroundColor||this._backgroundColor,this.alpha=l.backgroundAlpha,this._backgroundColor.setAlpha(l.backgroundAlpha)}get color(){return this._backgroundColor}set color(l){this._backgroundColor.setValue(l)}get alpha(){return this._backgroundColor.alpha}set alpha(l){this._backgroundColor.setAlpha(l)}get colorRgba(){return this._backgroundColor.toArray()}destroy(){}},U4.extension={type:[Ke.WebGLSystem,Ke.WebGPUSystem,Ke.CanvasSystem],name:"background",priority:0},U4.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},Q9=U4}),g1,yd,wF=D(()=>{Ot(),Ge(),Ar(),g1={},Kr.handle(Ke.BlendMode,o=>{if(!o.name)throw new Error("BlendMode extension must have a name property");g1[o.name]=o.ref},o=>{delete g1[o.name]}),yd=class{constructor(o){this._isAdvanced=!1,this._filterHash=Object.create(null),this._renderer=o}setBlendMode(o,l,f){if(this._activeBlendMode===l){this._isAdvanced&&this._renderableList.push(o);return}this._activeBlendMode=l,this._isAdvanced&&this._endAdvancedBlendMode(f),this._isAdvanced=!!g1[l],this._isAdvanced&&(this._beginAdvancedBlendMode(f),this._renderableList.push(o))}_beginAdvancedBlendMode(o){this._renderer.renderPipes.batch.break(o);let l=this._activeBlendMode;if(!g1[l]){Gt(`Unable to assign BlendMode: '${l}'. You may want to include: import 'pixi.js/advanced-blend-modes'`);return}let f=this._filterHash[l];f||(f=this._filterHash[l]=new Pe,f.filters=[new g1[l]]);let v={renderPipeId:"filter",action:"pushFilter",renderables:[],filterEffect:f,canBundle:!1};this._renderableList=v.renderables,o.add(v)}_endAdvancedBlendMode(o){this._renderableList=null,this._renderer.renderPipes.batch.break(o),o.add({renderPipeId:"filter",action:"popFilter",canBundle:!1})}buildStart(){this._isAdvanced=!1}buildEnd(o){this._isAdvanced&&this._endAdvancedBlendMode(o)}destroy(){this._renderer=null,this._renderableList=null;for(let o in this._filterHash)this._filterHash[o].destroy();this._filterHash=null}},yd.extension={type:[Ke.WebGLPipes,Ke.WebGPUPipes,Ke.CanvasPipes],name:"blendMode"}}),j4,H4,J9,kF=D(()=>{Ot(),Ch(),os(),j4={png:"image/png",jpg:"image/jpeg",webp:"image/webp"},H4=class YNe{constructor(l){this._renderer=l}_normalizeOptions(l,f={}){return l instanceof ms||l instanceof fn?{target:l,...f}:{...f,...l}}async image(l){let f=new Image;return f.src=await this.base64(l),f}async base64(l){l=this._normalizeOptions(l,YNe.defaultImageOptions);let{format:f,quality:v}=l,b=this.canvas(l);if(b.toBlob!==void 0)return new Promise((T,S)=>{b.toBlob(R=>{if(!R){S(new Error("ICanvas.toBlob failed!"));return}let U=new FileReader;U.onload=()=>T(U.result),U.onerror=S,U.readAsDataURL(R)},j4[f],v)});if(b.toDataURL!==void 0)return b.toDataURL(j4[f],v);if(b.convertToBlob!==void 0){let T=await b.convertToBlob({type:j4[f],quality:v});return new Promise((S,R)=>{let U=new FileReader;U.onload=()=>S(U.result),U.onerror=R,U.readAsDataURL(T)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(l){l=this._normalizeOptions(l);let f=l.target,v=this._renderer;if(f instanceof fn)return v.texture.generateCanvas(f);let b=v.textureGenerator.generateTexture(l),T=v.texture.generateCanvas(b);return b.destroy(),T}pixels(l){l=this._normalizeOptions(l);let f=l.target,v=this._renderer,b=f instanceof fn?f:v.textureGenerator.generateTexture(l),T=v.texture.getPixels(b);return f instanceof ms&&b.destroy(),T}texture(l){return l=this._normalizeOptions(l),l.target instanceof fn?l.target:this._renderer.textureGenerator.generateTexture(l)}download(l){l=this._normalizeOptions(l);let f=this.canvas(l),v=document.createElement("a");v.download=l.filename??"image.png",v.href=f.toDataURL("image/png"),document.body.appendChild(v),v.click(),document.body.removeChild(v)}log(l){let f=l.width??200;l=this._normalizeOptions(l);let v=this.canvas(l),b=v.toDataURL();console.log(`[Pixi Texture] ${v.width}px ${v.height}px`);let T=["font-size: 1px;",`padding: ${f}px 300px;`,`background: url(${b}) no-repeat;`,"background-size: contain;"].join(" ");console.log("%c ",T)}destroy(){this._renderer=null}},H4.extension={type:[Ke.WebGLSystem,Ke.WebGPUSystem],name:"extract"},H4.defaultImageOptions={format:"png",quality:1},J9=H4}),eM,TF=D(()=>{xo(),os(),eM=class qNe extends fn{static create(l){return new qNe({source:new Ha(l)})}resize(l,f,v){return this.source.resize(l,f,v),this}}}),mT,tM,rM,Kp,V4=D(()=>{nn(),Ot(),Un(),ye(),$e(),Qr(),Ch(),TF(),mT=new te,tM=new Re,rM=[0,0,0,0],Kp=class{constructor(o){this._renderer=o}generateTexture(o){o instanceof ms&&(o={target:o,frame:void 0,textureSourceOptions:{},resolution:void 0});let l=o.resolution||this._renderer.resolution,f=o.antialias||this._renderer.view.antialias,v=o.target,b=o.clearColor;b?b=Array.isArray(b)&&b.length===4?b:li.shared.setValue(b).toArray():b=rM;let T=o.frame?.copyTo(mT)||pn(v,tM).rectangle;T.width=Math.max(T.width,1/l)|0,T.height=Math.max(T.height,1/l)|0;let S=eM.create({...o.textureSourceOptions,width:T.width,height:T.height,resolution:l,antialias:f}),R=ji.shared.translate(-T.x,-T.y);return this._renderer.render({container:v,transform:R,target:S,clearColor:b}),S.source.updateMipmaps(),S}destroy(){this._renderer=null}},Kp.extension={type:[Ke.WebGLSystem,Ke.WebGPUSystem],name:"textureGenerator"}}),m1,C2=D(()=>{Ot(),Un(),Gs(),Fp(),th(),ah(),vl(),m1=class{constructor(o){this._stackIndex=0,this._globalUniformDataStack=[],this._uniformsPool=[],this._activeUniforms=[],this._bindGroupPool=[],this._activeBindGroups=[],this._renderer=o}reset(){this._stackIndex=0;for(let o=0;o<this._activeUniforms.length;o++)this._uniformsPool.push(this._activeUniforms[o]);for(let o=0;o<this._activeBindGroups.length;o++)this._bindGroupPool.push(this._activeBindGroups[o]);this._activeUniforms.length=0,this._activeBindGroups.length=0}start(o){this.reset(),this.push(o)}bind({size:o,projectionMatrix:l,worldTransformMatrix:f,worldColor:v,offset:b}){let T=this._renderer.renderTarget.renderTarget,S=this._stackIndex?this._globalUniformDataStack[this._stackIndex-1]:{projectionData:T,worldTransformMatrix:new ji,worldColor:4294967295,offset:new Mn},R={projectionMatrix:l||this._renderer.renderTarget.projectionMatrix,resolution:o||T.size,worldTransformMatrix:f||S.worldTransformMatrix,worldColor:v||S.worldColor,offset:b||S.offset,bindGroup:null},U=this._uniformsPool.pop()||this._createUniforms();this._activeUniforms.push(U);let W=U.uniforms;W.uProjectionMatrix=R.projectionMatrix,W.uResolution=R.resolution,W.uWorldTransformMatrix.copyFrom(R.worldTransformMatrix),W.uWorldTransformMatrix.tx-=R.offset.x,W.uWorldTransformMatrix.ty-=R.offset.y,jg(R.worldColor,W.uWorldColorAlpha,0),U.update();let K;this._renderer.renderPipes.uniformBatch?K=this._renderer.renderPipes.uniformBatch.getUniformBindGroup(U,!1):(K=this._bindGroupPool.pop()||new Tu,this._activeBindGroups.push(K),K.setResource(U,0)),R.bindGroup=K,this._currentGlobalUniformData=R}push(o){this.bind(o),this._globalUniformDataStack[this._stackIndex++]=this._currentGlobalUniformData}pop(){this._currentGlobalUniformData=this._globalUniformDataStack[--this._stackIndex-1],this._renderer.type===Ce.WEBGL&&this._currentGlobalUniformData.bindGroup.resources[0].update()}get bindGroup(){return this._currentGlobalUniformData.bindGroup}get globalUniformData(){return this._currentGlobalUniformData}get uniformGroup(){return this._currentGlobalUniformData.bindGroup.resources[0]}_createUniforms(){return new il({uProjectionMatrix:{value:new ji,type:"mat3x3<f32>"},uWorldTransformMatrix:{value:new ji,type:"mat3x3<f32>"},uWorldColorAlpha:{value:new Float32Array(4),type:"vec4<f32>"},uResolution:{value:[0,0],type:"vec2<f32>"}},{isStatic:!0})}destroy(){this._renderer=null}},m1.extension={type:[Ke.WebGLSystem,Ke.WebGPUSystem,Ke.CanvasSystem],name:"globalUniforms"}}),W4,yT,EF=D(()=>{Ot(),pp(),W4=1,yT=class{constructor(){this._tasks=[],this._offset=0}init(){wu.system.add(this._update,this)}repeat(o,l,f=!0){let v=W4++,b=0;return f&&(this._offset+=1e3,b=this._offset),this._tasks.push({func:o,duration:l,start:performance.now(),offset:b,last:performance.now(),repeat:!0,id:v}),v}cancel(o){for(let l=0;l<this._tasks.length;l++)if(this._tasks[l].id===o){this._tasks.splice(l,1);return}}_update(){let o=performance.now();for(let l=0;l<this._tasks.length;l++){let f=this._tasks[l];if(o-f.offset-f.last>=f.duration){let v=o-f.start;f.func(v),f.last=o}}}destroy(){wu.system.remove(this._update,this),this._tasks.length=0}},yT.extension={type:[Ke.WebGLSystem,Ke.WebGPUSystem,Ke.CanvasSystem],name:"scheduler",priority:0}});function iM(o){if(!y1){if(Ya.get().getNavigator().userAgent.toLowerCase().indexOf("chrome")>-1){let l=[`%c  %c  %c  %c  %c PixiJS %c v${w2} (${o}) http://www.pixijs.com/

`,"background: #E72264; padding:5px 0;","background: #6CA2EA; padding:5px 0;","background: #B5D33D; padding:5px 0;","background: #FED23F; padding:5px 0;","color: #FFFFFF; background: #E72264; padding:5px 0;","color: #E72264; background: #FFFFFF; padding:5px 0;"];globalThis.console.log(...l)}else globalThis.console&&globalThis.console.log(`PixiJS ${w2} - ${o} - http://www.pixijs.com/`);y1=!0}}var y1,CF=D(()=>{Ye(),q9(),y1=!1}),Y4,nM=D(()=>{Ot(),CF(),ah(),Y4=class{constructor(o){this._renderer=o}init(o){if(o.hello){let l=this._renderer.name;this._renderer.type===Ce.WEBGL&&(l+=` ${this._renderer.context.webGLVersion}`),iM(l)}}},Y4.extension={type:[Ke.WebGLSystem,Ke.WebGPUSystem,Ke.CanvasSystem],name:"hello",priority:-2},Y4.defaultOptions={hello:!1}});function aM(o){let l=!1;for(let v in o)if(o[v]==null){l=!0;break}if(!l)return o;let f=Object.create(null);for(let v in o){let b=o[v];b&&(f[v]=b)}return f}function sM(o){let l=0;for(let f=0;f<o.length;f++)o[f]==null?l++:o[f-l]=o[f];return o.length=o.length-l,o}var SF=D(()=>{"use strict"}),S2,A2,vT=D(()=>{Ot(),SF(),S2=class XNe{constructor(l){this._managedRenderables=[],this._managedHashes=[],this._managedArrays=[],this._renderer=l}init(l){l={...XNe.defaultOptions,...l},this.maxUnusedTime=l.renderableGCMaxUnusedTime,this._frequency=l.renderableGCFrequency,this.enabled=l.renderableGCActive}get enabled(){return!!this._handler}set enabled(l){this.enabled!==l&&(l?(this._handler=this._renderer.scheduler.repeat(()=>this.run(),this._frequency,!1),this._hashHandler=this._renderer.scheduler.repeat(()=>{for(let f of this._managedHashes)f.context[f.hash]=aM(f.context[f.hash])},this._frequency),this._arrayHandler=this._renderer.scheduler.repeat(()=>{for(let f of this._managedArrays)sM(f.context[f.hash])},this._frequency)):(this._renderer.scheduler.cancel(this._handler),this._renderer.scheduler.cancel(this._hashHandler),this._renderer.scheduler.cancel(this._arrayHandler)))}addManagedHash(l,f){this._managedHashes.push({context:l,hash:f})}addManagedArray(l,f){this._managedArrays.push({context:l,hash:f})}prerender(){this._now=performance.now()}addRenderable(l,f){this.enabled&&(l._lastUsed=this._now,l._lastInstructionTick===-1&&(this._managedRenderables.push(l),l.once("destroyed",this._removeRenderable,this)),l._lastInstructionTick=f.tick)}run(){let l=performance.now(),f=this._managedRenderables,v=this._renderer.renderPipes,b=0;for(let T=0;T<f.length;T++){let S=f[T];if(S===null){b++;continue}let R=(S.renderGroup??S.parentRenderGroup)?.instructionSet?.tick??-1;S._lastInstructionTick!==R&&l-S._lastUsed>this.maxUnusedTime?(S.destroyed||v[S.renderPipeId].destroyRenderable(S),S._lastInstructionTick=-1,b++,S.off("destroyed",this._removeRenderable,this)):f[T-b]=S}f.length=f.length-b}destroy(){this.enabled=!1,this._renderer=null,this._managedRenderables.length=0,this._managedHashes.length=0,this._managedArrays.length=0}_removeRenderable(l){let f=this._managedRenderables.indexOf(l);f>=0&&(l.off("destroyed",this._removeRenderable,this),this._managedRenderables[f]=null)}},S2.extension={type:[Ke.WebGLSystem,Ke.WebGPUSystem],name:"renderableGC",priority:0},S2.defaultOptions={renderableGCActive:!0,renderableGCMaxUnusedTime:6e4,renderableGCFrequency:3e4},A2=S2}),M2,L2,xT=D(()=>{Ot(),M2=class KNe{constructor(l){this._renderer=l,this.count=0,this.checkCount=0}init(l){l={...KNe.defaultOptions,...l},this.checkCountMax=l.textureGCCheckCountMax,this.maxIdle=l.textureGCAMaxIdle??l.textureGCMaxIdle,this.active=l.textureGCActive}postrender(){this._renderer.renderingToScreen&&(this.count++,this.active&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){let l=this._renderer.texture.managedTextures;for(let f=0;f<l.length;f++){let v=l[f];v.autoGarbageCollect&&v.resource&&v._touched>-1&&this.count-v._touched>this.maxIdle&&(v._touched=-1,v.unload())}}destroy(){this._renderer=null}},M2.extension={type:[Ke.WebGLSystem,Ke.WebGPUSystem],name:"textureGC"},M2.defaultOptions={textureGCActive:!0,textureGCAMaxIdle:null,textureGCMaxIdle:60*60,textureGCCheckCountMax:600},L2=M2}),bT,q4,_T=D(()=>{hs(),xo(),os(),bT=class ZNe{constructor(l={}){if(this.uid=Ma("renderTarget"),this.colorTextures=[],this.dirtyId=0,this.isRoot=!1,this._size=new Float32Array(2),this._managedColorTextures=!1,l={...ZNe.defaultOptions,...l},this.stencil=l.stencil,this.depth=l.depth,this.isRoot=l.isRoot,typeof l.colorTextures=="number"){this._managedColorTextures=!0;for(let f=0;f<l.colorTextures;f++)this.colorTextures.push(new Ha({width:l.width,height:l.height,resolution:l.resolution,antialias:l.antialias}))}else{this.colorTextures=[...l.colorTextures.map(v=>v.source)];let f=this.colorTexture.source;this.resize(f.width,f.height,f._resolution)}this.colorTexture.source.on("resize",this.onSourceResize,this),(l.depthStencilTexture||this.stencil)&&(l.depthStencilTexture instanceof fn||l.depthStencilTexture instanceof Ha?this.depthStencilTexture=l.depthStencilTexture.source:this.ensureDepthStencilTexture())}get size(){let l=this._size;return l[0]=this.pixelWidth,l[1]=this.pixelHeight,l}get width(){return this.colorTexture.source.width}get height(){return this.colorTexture.source.height}get pixelWidth(){return this.colorTexture.source.pixelWidth}get pixelHeight(){return this.colorTexture.source.pixelHeight}get resolution(){return this.colorTexture.source._resolution}get colorTexture(){return this.colorTextures[0]}onSourceResize(l){this.resize(l.width,l.height,l._resolution,!0)}ensureDepthStencilTexture(){this.depthStencilTexture||(this.depthStencilTexture=new Ha({width:this.width,height:this.height,resolution:this.resolution,format:"depth24plus-stencil8",autoGenerateMipmaps:!1,antialias:!1,mipLevelCount:1}))}resize(l,f,v=this.resolution,b=!1){this.dirtyId++,this.colorTextures.forEach((T,S)=>{b&&S===0||T.source.resize(l,f,v)}),this.depthStencilTexture&&this.depthStencilTexture.source.resize(l,f,v)}destroy(){this.colorTexture.source.off("resize",this.onSourceResize,this),this._managedColorTextures&&this.colorTextures.forEach(l=>{l.destroy()}),this.depthStencilTexture&&(this.depthStencilTexture.destroy(),delete this.depthStencilTexture)}},bT.defaultOptions={width:0,height:0,resolution:1,colorTextures:1,stencil:!1,depth:!1,antialias:!1,isRoot:!1},q4=bT});function wT(o,l){if(!v1.has(o)){let f=new fn({source:new Ra({resource:o,...l})}),v=()=>{v1.get(o)===f&&v1.delete(o)};f.once("destroy",v),f.source.once("destroy",v),v1.set(o,f)}return v1.get(o)}var v1,X4=D(()=>{eh(),os(),v1=new Map}),x1,oM,AF=D(()=>{Ye(),Ot(),ye(),Sa(),_T(),X4(),x1=class QNe{get autoDensity(){return this.texture.source.autoDensity}set autoDensity(l){this.texture.source.autoDensity=l}get resolution(){return this.texture.source._resolution}set resolution(l){this.texture.source.resize(this.texture.source.width,this.texture.source.height,l)}init(l){l={...QNe.defaultOptions,...l},l.view&&(Wn(Cr,"ViewSystem.view has been renamed to ViewSystem.canvas"),l.canvas=l.view),this.screen=new te(0,0,l.width,l.height),this.canvas=l.canvas||Ya.get().createCanvas(),this.antialias=!!l.antialias,this.texture=wT(this.canvas,l),this.renderTarget=new q4({colorTextures:[this.texture],depth:!!l.depth,isRoot:!0}),this.texture.source.transparent=l.backgroundAlpha<1,this.resolution=l.resolution}resize(l,f,v){this.texture.source.resize(l,f,v),this.screen.width=this.texture.frame.width,this.screen.height=this.texture.frame.height}destroy(l=!1){(typeof l=="boolean"?l:l?.removeView)&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)}},x1.extension={type:[Ke.WebGLSystem,Ke.WebGPUSystem,Ke.CanvasSystem],name:"view",priority:0},x1.defaultOptions={width:800,height:600,autoDensity:!1,antialias:!1},oM=x1}),kT,TT,lM=D(()=>{U9(),cF(),dT(),Y9(),X9(),fF(),Z9(),xF(),bF(),_F(),wF(),kF(),V4(),C2(),EF(),nM(),vT(),xT(),AF(),kT=[Q9,m1,Y4,oM,cT,L2,Kp,J9,O4,A2,yT],TT=[yd,P4,pT,lT,z4,gT,G4,L4]}),K4,uM=D(()=>{Ot(),K4=class{constructor(o){this._hash=Object.create(null),this._renderer=o,this._renderer.renderableGC.addManagedHash(this,"_hash")}contextChange(o){this._gpu=o}getBindGroup(o,l,f){return o._updateKey(),this._hash[o._key]||this._createBindGroup(o,l,f)}_createBindGroup(o,l,f){let v=this._gpu.device,b=l.layout[f],T=[],S=this._renderer;for(let W in b){let K=o.resources[W]??o.resources[b[W]],ee;if(K._resourceType==="uniformGroup"){let se=K;S.ubo.updateUniformGroup(se);let re=se.buffer;ee={buffer:S.buffer.getGPUBuffer(re),offset:0,size:re.descriptor.size}}else if(K._resourceType==="buffer"){let se=K;ee={buffer:S.buffer.getGPUBuffer(se),offset:0,size:se.descriptor.size}}else if(K._resourceType==="bufferResource"){let se=K;ee={buffer:S.buffer.getGPUBuffer(se.buffer),offset:se.offset,size:se.size}}else if(K._resourceType==="textureSampler"){let se=K;ee=S.texture.getGpuSampler(se)}else if(K._resourceType==="textureSource"){let se=K;ee=S.texture.getGpuSource(se).createView({})}T.push({binding:b[W],resource:ee})}let R=S.shader.getProgramData(l).bindGroups[f],U=v.createBindGroup({layout:R,entries:T});return this._hash[o._key]=U,U}destroy(){for(let o of Object.keys(this._hash))this._hash[o]=null;this._hash=null,this._renderer=null}},K4.extension={type:[Ke.WebGPUSystem],name:"bindGroup"}}),ET,MF=D(()=>{Ot(),Jw(),ET=class{constructor(o){this._gpuBuffers=Object.create(null),this._managedBuffers=[],o.renderableGC.addManagedHash(this,"_gpuBuffers")}contextChange(o){this._gpu=o}getGPUBuffer(o){return this._gpuBuffers[o.uid]||this.createGPUBuffer(o)}updateBuffer(o){let l=this._gpuBuffers[o.uid]||this.createGPUBuffer(o),f=o.data;return o._updateID&&f&&(o._updateID=0,this._gpu.device.queue.writeBuffer(l,0,f.buffer,0,(o._updateSize||f.byteLength)+3&-4)),l}destroyAll(){for(let o in this._gpuBuffers)this._gpuBuffers[o].destroy();this._gpuBuffers={}}createGPUBuffer(o){this._gpuBuffers[o.uid]||(o.on("update",this.updateBuffer,this),o.on("change",this.onBufferChange,this),o.on("destroy",this.onBufferDestroy,this),this._managedBuffers.push(o));let l=this._gpu.device.createBuffer(o.descriptor);return o._updateID=0,o.data&&(ob(o.data.buffer,l.getMappedRange()),l.unmap()),this._gpuBuffers[o.uid]=l,l}onBufferChange(o){this._gpuBuffers[o.uid].destroy(),o._updateID=0,this._gpuBuffers[o.uid]=this.createGPUBuffer(o)}onBufferDestroy(o){this._managedBuffers.splice(this._managedBuffers.indexOf(o),1),this._destroyBuffer(o)}destroy(){this._managedBuffers.forEach(o=>this._destroyBuffer(o)),this._managedBuffers=null,this._gpuBuffers=null}_destroyBuffer(o){this._gpuBuffers[o.uid].destroy(),o.off("update",this.updateBuffer,this),o.off("change",this.onBufferChange,this),o.off("destroy",this.onBufferDestroy,this),this._gpuBuffers[o.uid]=null}},ET.extension={type:[Ke.WebGPUSystem],name:"buffer"}}),CT,hM=D(()=>{Ot(),CT=class{constructor(o){this._colorMaskCache=15,this._renderer=o}setMask(o){this._colorMaskCache!==o&&(this._colorMaskCache=o,this._renderer.pipeline.setColorMask(o))}destroy(){this._renderer=null,this._colorMaskCache=null}},CT.extension={type:[Ke.WebGPUSystem],name:"colorMask"}}),R2,Z4=D(()=>{Ye(),Ot(),R2=class{constructor(o){this._renderer=o}async init(o){return this._initPromise?this._initPromise:(this._initPromise=this._createDeviceAndAdaptor(o).then(l=>{this.gpu=l,this._renderer.runners.contextChange.emit(this.gpu)}),this._initPromise)}contextChange(o){this._renderer.gpu=o}async _createDeviceAndAdaptor(o){let l=await Ya.get().getNavigator().gpu.requestAdapter({powerPreference:o.powerPreference,forceFallbackAdapter:o.forceFallbackAdapter}),f=["texture-compression-bc","texture-compression-astc","texture-compression-etc2"].filter(b=>l.features.has(b)),v=await l.requestDevice({requiredFeatures:f});return{adapter:l,device:v}}destroy(){this.gpu=null,this._renderer=null}},R2.extension={type:[Ke.WebGPUSystem],name:"device"},R2.defaultOptions={powerPreference:void 0,forceFallbackAdapter:!1}}),ST,LF=D(()=>{Ot(),ST=class{constructor(o){this._boundBindGroup=Object.create(null),this._boundVertexBuffer=Object.create(null),this._renderer=o}renderStart(){this.commandFinished=new Promise(o=>{this._resolveCommandFinished=o}),this.commandEncoder=this._renderer.gpu.device.createCommandEncoder()}beginRenderPass(o){this.endRenderPass(),this._clearCache(),this.renderPassEncoder=this.commandEncoder.beginRenderPass(o.descriptor)}endRenderPass(){this.renderPassEncoder&&this.renderPassEncoder.end(),this.renderPassEncoder=null}setViewport(o){this.renderPassEncoder.setViewport(o.x,o.y,o.width,o.height,0,1)}setPipelineFromGeometryProgramAndState(o,l,f,v){let b=this._renderer.pipeline.getPipeline(o,l,f,v);this.setPipeline(b)}setPipeline(o){this._boundPipeline!==o&&(this._boundPipeline=o,this.renderPassEncoder.setPipeline(o))}_setVertexBuffer(o,l){this._boundVertexBuffer[o]!==l&&(this._boundVertexBuffer[o]=l,this.renderPassEncoder.setVertexBuffer(o,this._renderer.buffer.updateBuffer(l)))}_setIndexBuffer(o){if(this._boundIndexBuffer===o)return;this._boundIndexBuffer=o;let l=o.data.BYTES_PER_ELEMENT===2?"uint16":"uint32";this.renderPassEncoder.setIndexBuffer(this._renderer.buffer.updateBuffer(o),l)}resetBindGroup(o){this._boundBindGroup[o]=null}setBindGroup(o,l,f){if(this._boundBindGroup[o]===l)return;this._boundBindGroup[o]=l,l._touch(this._renderer.textureGC.count);let v=this._renderer.bindGroup.getBindGroup(l,f,o);this.renderPassEncoder.setBindGroup(o,v)}setGeometry(o,l){let f=this._renderer.pipeline.getBufferNamesToBind(o,l);for(let v in f)this._setVertexBuffer(v,o.attributes[f[v]].buffer);o.indexBuffer&&this._setIndexBuffer(o.indexBuffer)}_setShaderBindGroups(o,l){for(let f in o.groups){let v=o.groups[f];l||this._syncBindGroup(v),this.setBindGroup(f,v,o.gpuProgram)}}_syncBindGroup(o){for(let l in o.resources){let f=o.resources[l];f.isUniformGroup&&this._renderer.ubo.updateUniformGroup(f)}}draw(o){let{geometry:l,shader:f,state:v,topology:b,size:T,start:S,instanceCount:R,skipSync:U}=o;this.setPipelineFromGeometryProgramAndState(l,f.gpuProgram,v,b),this.setGeometry(l,f.gpuProgram),this._setShaderBindGroups(f,U),l.indexBuffer?this.renderPassEncoder.drawIndexed(T||l.indexBuffer.data.length,R??l.instanceCount,S||0):this.renderPassEncoder.draw(T||l.getSize(),R??l.instanceCount,S||0)}finishRenderPass(){this.renderPassEncoder&&(this.renderPassEncoder.end(),this.renderPassEncoder=null)}postrender(){this.finishRenderPass(),this._gpu.device.queue.submit([this.commandEncoder.finish()]),this._resolveCommandFinished(),this.commandEncoder=null}restoreRenderPass(){let o=this._renderer.renderTarget.adaptor.getDescriptor(this._renderer.renderTarget.renderTarget,!1,[0,0,0,1]);this.renderPassEncoder=this.commandEncoder.beginRenderPass(o);let l=this._boundPipeline,f={...this._boundVertexBuffer},v=this._boundIndexBuffer,b={...this._boundBindGroup};this._clearCache();let T=this._renderer.renderTarget.viewport;this.renderPassEncoder.setViewport(T.x,T.y,T.width,T.height,0,1),this.setPipeline(l);for(let S in f)this._setVertexBuffer(S,f[S]);for(let S in b)this.setBindGroup(S,b[S],null);this._setIndexBuffer(v)}_clearCache(){for(let o=0;o<16;o++)this._boundBindGroup[o]=null,this._boundVertexBuffer[o]=null;this._boundIndexBuffer=null,this._boundPipeline=null}destroy(){this._renderer=null,this._gpu=null,this._boundBindGroup=null,this._boundVertexBuffer=null,this._boundIndexBuffer=null,this._boundPipeline=null}contextChange(o){this._gpu=o}},ST.extension={type:[Ke.WebGPUSystem],name:"encoder",priority:1}}),AT,cM=D(()=>{Ot(),zl(),AT=class{constructor(o){this._renderTargetStencilState=Object.create(null),this._renderer=o,o.renderTarget.onRenderTargetChange.add(this)}onRenderTargetChange(o){let l=this._renderTargetStencilState[o.uid];l||(l=this._renderTargetStencilState[o.uid]={stencilMode:Is.DISABLED,stencilReference:0}),this._activeRenderTarget=o,this.setStencilMode(l.stencilMode,l.stencilReference)}setStencilMode(o,l){let f=this._renderTargetStencilState[this._activeRenderTarget.uid];f.stencilMode=o,f.stencilReference=l;let v=this._renderer;v.pipeline.setStencilMode(o),v.encoder.renderPassEncoder.setStencilReference(l)}destroy(){this._renderer.renderTarget.onRenderTargetChange.remove(this),this._renderer=null,this._activeRenderTarget=null,this._renderTargetStencilState=null}},AT.extension={type:[Ke.WebGPUSystem],name:"stencil"}}),MT,dM=D(()=>{N9(),rh(),od(),MT=class{constructor(o){this._syncFunctionHash=Object.create(null),this._adaptor=o,this._systemCheck()}_systemCheck(){if(!I9())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}ensureUniformGroup(o){let l=this.getUniformGroupData(o);o.buffer||(o.buffer=new ml({data:new Float32Array(l.layout.size/4),usage:pa.UNIFORM|pa.COPY_DST}))}getUniformGroupData(o){return this._syncFunctionHash[o._signature]||this._initUniformGroup(o)}_initUniformGroup(o){let l=o._signature,f=this._syncFunctionHash[l];if(!f){let v=Object.keys(o.uniformStructures).map(S=>o.uniformStructures[S]),b=this._adaptor.createUboElements(v),T=this._generateUboSync(b.uboElements);f=this._syncFunctionHash[l]={layout:b,syncFunction:T}}return this._syncFunctionHash[l]}_generateUboSync(o){return this._adaptor.generateUboSync(o)}syncUniformGroup(o,l,f){let v=this.getUniformGroupData(o);o.buffer||(o.buffer=new ml({data:new Float32Array(v.layout.size/4),usage:pa.UNIFORM|pa.COPY_DST}));let b=null;return l||(l=o.buffer.data,b=o.buffer.dataInt32),f||(f=0),v.syncFunction(o.uniforms,l,b,f),!0}updateUniformGroup(o){if(o.isStatic&&!o._dirtyId)return!1;o._dirtyId=0;let l=this.syncUniformGroup(o);return o.buffer.update(),l}destroy(){this._syncFunctionHash=null}}});function RF(o){let l=o.map(v=>({data:v,offset:0,size:0})),f=0;for(let v=0;v<l.length;v++){let b=l[v],T=D2[b.data.type].size,S=D2[b.data.type].align;if(!D2[b.data.type])throw new Error(`[Pixi.js] WebGPU UniformBuffer: Unknown type ${b.data.type}`);b.data.size>1&&(T=Math.max(T,S)*b.data.size),f=Math.ceil(f/S)*S,b.size=T,b.offset=f,f+=T}return f=Math.ceil(f/16)*16,{uboElements:l,size:f}}var D2,LT=D(()=>{"use strict";D2={i32:{align:4,size:4},u32:{align:4,size:4},f32:{align:4,size:4},f16:{align:2,size:2},"vec2<i32>":{align:8,size:8},"vec2<u32>":{align:8,size:8},"vec2<f32>":{align:8,size:8},"vec2<f16>":{align:4,size:4},"vec3<i32>":{align:16,size:12},"vec3<u32>":{align:16,size:12},"vec3<f32>":{align:16,size:12},"vec3<f16>":{align:8,size:6},"vec4<i32>":{align:16,size:16},"vec4<u32>":{align:16,size:16},"vec4<f32>":{align:16,size:16},"vec4<f16>":{align:8,size:8},"mat2x2<f32>":{align:8,size:16},"mat2x2<f16>":{align:4,size:8},"mat3x2<f32>":{align:8,size:24},"mat3x2<f16>":{align:4,size:12},"mat4x2<f32>":{align:8,size:32},"mat4x2<f16>":{align:4,size:16},"mat2x3<f32>":{align:16,size:32},"mat2x3<f16>":{align:8,size:16},"mat3x3<f32>":{align:16,size:48},"mat3x3<f16>":{align:8,size:24},"mat4x3<f32>":{align:16,size:64},"mat4x3<f16>":{align:8,size:32},"mat2x4<f32>":{align:16,size:32},"mat2x4<f16>":{align:8,size:16},"mat3x4<f32>":{align:16,size:48},"mat3x4<f16>":{align:8,size:24},"mat4x4<f32>":{align:16,size:64},"mat4x4<f16>":{align:8,size:32}}}),b0,pM=D(()=>{"use strict";b0=[{type:"mat3x3<f32>",test:o=>o.value.a!==void 0,ubo:`
            var matrix = uv[name].toArray(true);
            data[offset] = matrix[0];
            data[offset + 1] = matrix[1];
            data[offset + 2] = matrix[2];
            data[offset + 4] = matrix[3];
            data[offset + 5] = matrix[4];
            data[offset + 6] = matrix[5];
            data[offset + 8] = matrix[6];
            data[offset + 9] = matrix[7];
            data[offset + 10] = matrix[8];
        `,uniform:`
            gl.uniformMatrix3fv(ud[name].location, false, uv[name].toArray(true));
        `},{type:"vec4<f32>",test:o=>o.type==="vec4<f32>"&&o.size===1&&o.value.width!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.x;
            data[offset + 1] = v.y;
            data[offset + 2] = v.width;
            data[offset + 3] = v.height;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height) {
                cv[0] = v.x;
                cv[1] = v.y;
                cv[2] = v.width;
                cv[3] = v.height;
                gl.uniform4f(ud[name].location, v.x, v.y, v.width, v.height);
            }
        `},{type:"vec2<f32>",test:o=>o.type==="vec2<f32>"&&o.size===1&&o.value.x!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.x;
            data[offset + 1] = v.y;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.x || cv[1] !== v.y) {
                cv[0] = v.x;
                cv[1] = v.y;
                gl.uniform2f(ud[name].location, v.x, v.y);
            }
        `},{type:"vec4<f32>",test:o=>o.type==="vec4<f32>"&&o.size===1&&o.value.red!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.red;
            data[offset + 1] = v.green;
            data[offset + 2] = v.blue;
            data[offset + 3] = v.alpha;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha) {
                cv[0] = v.red;
                cv[1] = v.green;
                cv[2] = v.blue;
                cv[3] = v.alpha;
                gl.uniform4f(ud[name].location, v.red, v.green, v.blue, v.alpha);
            }
        `},{type:"vec3<f32>",test:o=>o.type==="vec3<f32>"&&o.size===1&&o.value.red!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.red;
            data[offset + 1] = v.green;
            data[offset + 2] = v.blue;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue) {
                cv[0] = v.red;
                cv[1] = v.green;
                cv[2] = v.blue;
                gl.uniform3f(ud[name].location, v.red, v.green, v.blue);
            }
        `}]});function fM(o,l,f,v){let b=[`
        var v = null;
        var v2 = null;
        var t = 0;
        var index = 0;
        var name = null;
        var arrayOffset = null;
    `],T=0;for(let R=0;R<o.length;R++){let U=o[R],W=U.data.name,K=!1,ee=0;for(let se=0;se<b0.length;se++)if(b0[se].test(U.data)){ee=U.offset/4,b.push(`name = "${W}";`,`offset += ${ee-T};`,b0[se][l]||b0[se].ubo),K=!0;break}if(!K)if(U.data.size>1)ee=U.offset/4,b.push(f(U,ee-T));else{let se=v[U.data.type];ee=U.offset/4,b.push(`
                    v = uv.${W};
                    offset += ${ee-T};
                    ${se};
                `)}T=ee}let S=b.join(`
`);return new Function("uv","data","dataInt32","offset",S)}var RT=D(()=>{pM()});function Zp(o,l){return`
        for (let i = 0; i < ${o*l}; i++) {
            data[offset + (((i / ${o})|0) * 4) + (i % ${o})] = v[i];
        }
    `}var DT,I2,IT=D(()=>{"use strict";DT={f32:`
        data[offset] = v;`,i32:`
        dataInt32[offset] = v;`,"vec2<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];`,"vec3<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];`,"vec4<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];
        data[offset + 3] = v[3];`,"vec2<i32>":`
        dataInt32[offset] = v[0];
        dataInt32[offset + 1] = v[1];`,"vec3<i32>":`
        dataInt32[offset] = v[0];
        dataInt32[offset + 1] = v[1];
        dataInt32[offset + 2] = v[2];`,"vec4<i32>":`
        dataInt32[offset] = v[0];
        dataInt32[offset + 1] = v[1];
        dataInt32[offset + 2] = v[2];
        dataInt32[offset + 3] = v[3];`,"mat2x2<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 4] = v[2];
        data[offset + 5] = v[3];`,"mat3x3<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];
        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];
        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];`,"mat4x4<f32>":`
        for (let i = 0; i < 16; i++) {
            data[offset + i] = v[i];
        }`,"mat3x2<f32>":Zp(3,2),"mat4x2<f32>":Zp(4,2),"mat2x3<f32>":Zp(2,3),"mat4x3<f32>":Zp(4,3),"mat2x4<f32>":Zp(2,4),"mat3x4<f32>":Zp(3,4)},I2={...DT,"mat2x2<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];
        data[offset + 3] = v[3];
    `}});function DF(o,l){let{size:f,align:v}=D2[o.data.type],b=(v-f)/4,T=o.data.type.indexOf("i32")>=0?"dataInt32":"data";return`
         v = uv.${o.data.name};
         ${l!==0?`offset += ${l};`:""}

         arrayOffset = offset;

         t = 0;

         for(var i=0; i < ${o.data.size*(f/4)}; i++)
         {
             for(var j = 0; j < ${f/4}; j++)
             {
                 ${T}[arrayOffset++] = v[t++];
             }
             ${b!==0?`arrayOffset += ${b};`:""}
         }
     `}var IF=D(()=>{LT()});function NF(o){return fM(o,"uboWgsl",DF,I2)}var OF=D(()=>{RT(),IT(),IF()}),NT,BF=D(()=>{Ot(),dM(),LT(),OF(),NT=class extends MT{constructor(){super({createUboElements:RF,generateUboSync:NF})}},NT.extension={type:[Ke.WebGPUSystem],name:"ubo"}}),Q4,OT=D(()=>{Ir(),hs(),Q4=class extends jr{constructor({buffer:o,offset:l,size:f}){super(),this.uid=Ma("buffer"),this._resourceType="bufferResource",this._touched=0,this._resourceId=Ma("resource"),this._bufferResource=!0,this.destroyed=!1,this.buffer=o,this.offset=l|0,this.size=f,this.buffer.on("change",this.onBufferChange,this)}onBufferChange(){this._resourceId=Ma("resource"),this.emit("change",this)}destroy(o=!1){this.destroyed=!0,o&&this.buffer.destroy(),this.emit("change",this),this.buffer=null}}}),gM,PF=D(()=>{"use strict";gM=class{constructor({minUniformOffsetAlignment:o}){this._minUniformOffsetAlignment=256,this.byteIndex=0,this._minUniformOffsetAlignment=o,this.data=new Float32Array(65535)}clear(){this.byteIndex=0}addEmptyGroup(o){if(o>this._minUniformOffsetAlignment/4)throw new Error(`UniformBufferBatch: array is too large: ${o*4}`);let l=this.byteIndex,f=l+o*4;if(f=Math.ceil(f/this._minUniformOffsetAlignment)*this._minUniformOffsetAlignment,f>this.data.length*4)throw new Error("UniformBufferBatch: ubo batch got too big");return this.byteIndex=f,l}addGroup(o){let l=this.addEmptyGroup(o.length);for(let f=0;f<o.length;f++)this.data[l/4+f]=o[f];return l}destroy(){this.data=null}}}),vd,BT,FF=D(()=>{Ot(),rh(),OT(),od(),PF(),th(),vd=128,BT=class{constructor(o){this._bindGroupHash=Object.create(null),this._buffers=[],this._bindGroups=[],this._bufferResources=[],this._renderer=o,this._renderer.renderableGC.addManagedHash(this,"_bindGroupHash"),this._batchBuffer=new gM({minUniformOffsetAlignment:vd});let l=256/vd;for(let f=0;f<l;f++){let v=pa.UNIFORM|pa.COPY_DST;f===0&&(v|=pa.COPY_SRC),this._buffers.push(new ml({data:this._batchBuffer.data,usage:v}))}}renderEnd(){this._uploadBindGroups(),this._resetBindGroups()}_resetBindGroups(){for(let o in this._bindGroupHash)this._bindGroupHash[o]=null;this._batchBuffer.clear()}getUniformBindGroup(o,l){if(!l&&this._bindGroupHash[o.uid])return this._bindGroupHash[o.uid];this._renderer.ubo.ensureUniformGroup(o);let f=o.buffer.data,v=this._batchBuffer.addEmptyGroup(f.length);return this._renderer.ubo.syncUniformGroup(o,this._batchBuffer.data,v/4),this._bindGroupHash[o.uid]=this._getBindGroup(v/vd),this._bindGroupHash[o.uid]}getUboResource(o){this._renderer.ubo.updateUniformGroup(o);let l=o.buffer.data,f=this._batchBuffer.addGroup(l);return this._getBufferResource(f/vd)}getArrayBindGroup(o){let l=this._batchBuffer.addGroup(o);return this._getBindGroup(l/vd)}getArrayBufferResource(o){let l=this._batchBuffer.addGroup(o)/vd;return this._getBufferResource(l)}_getBufferResource(o){if(!this._bufferResources[o]){let l=this._buffers[o%2];this._bufferResources[o]=new Q4({buffer:l,offset:(o/2|0)*256,size:vd})}return this._bufferResources[o]}_getBindGroup(o){if(!this._bindGroups[o]){let l=new Tu({0:this._getBufferResource(o)});this._bindGroups[o]=l}return this._bindGroups[o]}_uploadBindGroups(){let o=this._renderer.buffer,l=this._buffers[0];l.update(this._batchBuffer.byteIndex),o.updateBuffer(l);let f=this._renderer.gpu.device.createCommandEncoder();for(let v=1;v<this._buffers.length;v++){let b=this._buffers[v];f.copyBufferToBuffer(o.getGPUBuffer(l),vd,o.getGPUBuffer(b),0,this._batchBuffer.byteIndex)}this._renderer.gpu.device.queue.submit([f.finish()])}destroy(){for(let o=0;o<this._bindGroups.length;o++)this._bindGroups[o].destroy();this._bindGroups=null,this._bindGroupHash=null;for(let o=0;o<this._buffers.length;o++)this._buffers[o].destroy();this._buffers=null;for(let o=0;o<this._bufferResources.length;o++)this._bufferResources[o].destroy();this._bufferResources=null,this._batchBuffer.destroy(),this._bindGroupHash=null,this._renderer=null}},BT.extension={type:[Ke.WebGPUPipes],name:"uniformBatch"}});function mM(o,l){for(let f in o.attributes){let v=o.attributes[f],b=l[f];b?(v.format??(v.format=b.format),v.offset??(v.offset=b.offset),v.instance??(v.instance=b.instance)):Gt(`Attribute ${f} is not present in the shader, but is present in the geometry. Unable to infer attribute details.`)}$F(o)}function $F(o){let{buffers:l,attributes:f}=o,v={},b={};for(let T in l){let S=l[T];v[S.uid]=0,b[S.uid]=0}for(let T in f){let S=f[T];v[S.buffer.uid]+=ih(S.format).stride}for(let T in f){let S=f[T];S.stride??(S.stride=v[S.buffer.uid]),S.start??(S.start=b[S.buffer.uid]),b[S.buffer.uid]+=ih(S.format).stride}}var yM=D(()=>{Ar(),kp()}),xd,vM=D(()=>{zl(),xd=[],xd[Is.NONE]=void 0,xd[Is.DISABLED]={stencilWriteMask:0,stencilReadMask:0},xd[Is.RENDERING_MASK_ADD]={stencilFront:{compare:"equal",passOp:"increment-clamp"},stencilBack:{compare:"equal",passOp:"increment-clamp"}},xd[Is.RENDERING_MASK_REMOVE]={stencilFront:{compare:"equal",passOp:"decrement-clamp"},stencilBack:{compare:"equal",passOp:"decrement-clamp"}},xd[Is.MASK_ACTIVE]={stencilWriteMask:0,stencilFront:{compare:"equal",passOp:"keep"},stencilBack:{compare:"equal",passOp:"keep"}},xd[Is.INVERSE_MASK_ACTIVE]={stencilWriteMask:0,stencilFront:{compare:"not-equal",passOp:"replace"},stencilBack:{compare:"not-equal",passOp:"replace"}}});function zF(o,l,f,v,b){return o<<24|l<<16|f<<10|v<<5|b}function GF(o,l,f,v){return f<<6|o<<3|v<<1|l}var xM,PT,UF=D(()=>{Ot(),Ar(),yM(),zl(),_p(),vM(),xM={"point-list":0,"line-list":1,"line-strip":2,"triangle-list":3,"triangle-strip":4},PT=class{constructor(o){this._moduleCache=Object.create(null),this._bufferLayoutsCache=Object.create(null),this._bindingNamesCache=Object.create(null),this._pipeCache=Object.create(null),this._pipeStateCaches=Object.create(null),this._colorMask=15,this._multisampleCount=1,this._renderer=o}contextChange(o){this._gpu=o,this.setStencilMode(Is.DISABLED),this._updatePipeHash()}setMultisampleCount(o){this._multisampleCount!==o&&(this._multisampleCount=o,this._updatePipeHash())}setRenderTarget(o){this._multisampleCount=o.msaaSamples,this._depthStencilAttachment=o.descriptor.depthStencilAttachment?1:0,this._updatePipeHash()}setColorMask(o){this._colorMask!==o&&(this._colorMask=o,this._updatePipeHash())}setStencilMode(o){this._stencilMode!==o&&(this._stencilMode=o,this._stencilState=xd[o],this._updatePipeHash())}setPipeline(o,l,f,v){let b=this.getPipeline(o,l,f);v.setPipeline(b)}getPipeline(o,l,f,v){o._layoutKey||(mM(o,l.attributeData),this._generateBufferKey(o)),v=v||o.topology;let b=zF(o._layoutKey,l._layoutKey,f.data,f._blendModeId,xM[v]);return this._pipeCache[b]?this._pipeCache[b]:(this._pipeCache[b]=this._createPipeline(o,l,f,v),this._pipeCache[b])}_createPipeline(o,l,f,v){let b=this._gpu.device,T=this._createVertexBufferLayouts(o,l),S=this._renderer.state.getColorTargets(f);S[0].writeMask=this._stencilMode===Is.RENDERING_MASK_ADD?0:this._colorMask;let R=this._renderer.shader.getProgramData(l).pipeline,U={vertex:{module:this._getModule(l.vertex.source),entryPoint:l.vertex.entryPoint,buffers:T},fragment:{module:this._getModule(l.fragment.source),entryPoint:l.fragment.entryPoint,targets:S},primitive:{topology:v,cullMode:f.cullMode},layout:R,multisample:{count:this._multisampleCount},label:"PIXI Pipeline"};return this._depthStencilAttachment&&(U.depthStencil={...this._stencilState,format:"depth24plus-stencil8",depthWriteEnabled:f.depthTest,depthCompare:f.depthTest?"less":"always"}),b.createRenderPipeline(U)}_getModule(o){return this._moduleCache[o]||this._createModule(o)}_createModule(o){let l=this._gpu.device;return this._moduleCache[o]=l.createShaderModule({code:o}),this._moduleCache[o]}_generateBufferKey(o){let l=[],f=0,v=Object.keys(o.attributes).sort();for(let T=0;T<v.length;T++){let S=o.attributes[v[T]];l[f++]=S.offset,l[f++]=S.format,l[f++]=S.stride,l[f++]=S.instance}let b=l.join("|");return o._layoutKey=xp(b,"geometry"),o._layoutKey}_generateAttributeLocationsKey(o){let l=[],f=0,v=Object.keys(o.attributeData).sort();for(let T=0;T<v.length;T++){let S=o.attributeData[v[T]];l[f++]=S.location}let b=l.join("|");return o._attributeLocationsKey=xp(b,"programAttributes"),o._attributeLocationsKey}getBufferNamesToBind(o,l){let f=o._layoutKey<<16|l._attributeLocationsKey;if(this._bindingNamesCache[f])return this._bindingNamesCache[f];let v=this._createVertexBufferLayouts(o,l),b=Object.create(null),T=l.attributeData;for(let S=0;S<v.length;S++){let R=Object.values(v[S].attributes)[0].shaderLocation;for(let U in T)if(T[U].location===R){b[S]=U;break}}return this._bindingNamesCache[f]=b,b}_createVertexBufferLayouts(o,l){l._attributeLocationsKey||this._generateAttributeLocationsKey(l);let f=o._layoutKey<<16|l._attributeLocationsKey;if(this._bufferLayoutsCache[f])return this._bufferLayoutsCache[f];let v=[];return o.buffers.forEach(b=>{let T={arrayStride:0,stepMode:"vertex",attributes:[]},S=T.attributes;for(let R in l.attributeData){let U=o.attributes[R];(U.divisor??1)!==1&&Gt(`Attribute ${R} has an invalid divisor value of '${U.divisor}'. WebGPU only supports a divisor value of 1`),U.buffer===b&&(T.arrayStride=U.stride,T.stepMode=U.instance?"instance":"vertex",S.push({shaderLocation:l.attributeData[R].location,offset:U.offset,format:U.format}))}S.length&&v.push(T)}),this._bufferLayoutsCache[f]=v,v}_updatePipeHash(){let o=GF(this._stencilMode,this._multisampleCount,this._colorMask,this._depthStencilAttachment);this._pipeStateCaches[o]||(this._pipeStateCaches[o]=Object.create(null)),this._pipeCache=this._pipeStateCaches[o]}destroy(){this._renderer=null,this._bufferLayoutsCache=null}},PT.extension={type:[Ke.WebGPUSystem],name:"pipeline"}});function jF(o,l,f,v,b,T){let S=T?1:-1;return o.identity(),o.a=1/v*2,o.d=S*(1/b*2),o.tx=-1-l*o.a,o.ty=-S-f*o.d,o}var HF=D(()=>{"use strict"});function VF(o){let l=o.colorTexture.source.resource;return globalThis.HTMLCanvasElement&&l instanceof HTMLCanvasElement&&document.body.contains(l)}var WF=D(()=>{"use strict"}),FT,bM=D(()=>{Un(),ye(),y2(),HF(),O9(),eh(),xo(),os(),X4(),WF(),_T(),FT=class{constructor(o){this.rootViewPort=new te,this.viewport=new te,this.onRenderTargetChange=new A4("onRenderTargetChange"),this.projectionMatrix=new ji,this.defaultClearColor=[0,0,0,0],this._renderSurfaceToRenderTargetHash=new Map,this._gpuRenderTargetHash=Object.create(null),this._renderTargetStack=[],this._renderer=o,o.renderableGC.addManagedHash(this,"_gpuRenderTargetHash")}finishRenderPass(){this.adaptor.finishRenderPass(this.renderTarget)}renderStart({target:o,clear:l,clearColor:f,frame:v}){this._renderTargetStack.length=0,this.push(o,l,f,v),this.rootViewPort.copyFrom(this.viewport),this.rootRenderTarget=this.renderTarget,this.renderingToScreen=VF(this.rootRenderTarget),this.adaptor.prerender?.(this.rootRenderTarget)}postrender(){this.adaptor.postrender?.(this.rootRenderTarget)}bind(o,l=!0,f,v){let b=this.getRenderTarget(o),T=this.renderTarget!==b;this.renderTarget=b,this.renderSurface=o;let S=this.getGpuRenderTarget(b);(b.pixelWidth!==S.width||b.pixelHeight!==S.height)&&(this.adaptor.resizeGpuRenderTarget(b),S.width=b.pixelWidth,S.height=b.pixelHeight);let R=b.colorTexture,U=this.viewport,W=R.pixelWidth,K=R.pixelHeight;if(!v&&o instanceof fn&&(v=o.frame),v){let ee=R._resolution;U.x=v.x*ee+.5|0,U.y=v.y*ee+.5|0,U.width=v.width*ee+.5|0,U.height=v.height*ee+.5|0}else U.x=0,U.y=0,U.width=W,U.height=K;return jF(this.projectionMatrix,0,0,U.width/R.resolution,U.height/R.resolution,!b.isRoot),this.adaptor.startRenderPass(b,l,f,U),T&&this.onRenderTargetChange.emit(b),b}clear(o,l=lu.ALL,f){l&&(o&&(o=this.getRenderTarget(o)),this.adaptor.clear(o||this.renderTarget,l,f,this.viewport))}contextChange(){this._gpuRenderTargetHash=Object.create(null)}push(o,l=lu.ALL,f,v){let b=this.bind(o,l,f,v);return this._renderTargetStack.push({renderTarget:b,frame:v}),b}pop(){this._renderTargetStack.pop();let o=this._renderTargetStack[this._renderTargetStack.length-1];this.bind(o.renderTarget,!1,null,o.frame)}getRenderTarget(o){return o.isTexture&&(o=o.source),this._renderSurfaceToRenderTargetHash.get(o)??this._initRenderTarget(o)}copyToTexture(o,l,f,v,b){f.x<0&&(v.width+=f.x,b.x-=f.x,f.x=0),f.y<0&&(v.height+=f.y,b.y-=f.y,f.y=0);let{pixelWidth:T,pixelHeight:S}=o;return v.width=Math.min(v.width,T-f.x),v.height=Math.min(v.height,S-f.y),this.adaptor.copyToTexture(o,l,f,v,b)}ensureDepthStencil(){this.renderTarget.stencil||(this.renderTarget.stencil=!0,this.adaptor.startRenderPass(this.renderTarget,!1,null,this.viewport))}destroy(){this._renderer=null,this._renderSurfaceToRenderTargetHash.forEach((o,l)=>{o!==l&&o.destroy()}),this._renderSurfaceToRenderTargetHash.clear(),this._gpuRenderTargetHash=Object.create(null)}_initRenderTarget(o){let l=null;return Ra.test(o)&&(o=wT(o).source),o instanceof q4?l=o:o instanceof Ha&&(l=new q4({colorTextures:[o]}),Ra.test(o.source.resource)&&(l.isRoot=!0),o.once("destroy",()=>{l.destroy(),this._renderSurfaceToRenderTargetHash.delete(o);let f=this._gpuRenderTargetHash[l.uid];f&&(this._gpuRenderTargetHash[l.uid]=null,this.adaptor.destroyGpuRenderTarget(f))})),this._renderSurfaceToRenderTargetHash.set(o,l),l}getGpuRenderTarget(o){return this._gpuRenderTargetHash[o.uid]||(this._gpuRenderTargetHash[o.uid]=this.adaptor.initGpuRenderTarget(o))}}}),_M,YF=D(()=>{"use strict";_M=class{constructor(){this.contexts=[],this.msaaTextures=[],this.msaaSamples=1}}}),wM,qF=D(()=>{y2(),eh(),xo(),YF(),wM=class{init(o,l){this._renderer=o,this._renderTargetSystem=l}copyToTexture(o,l,f,v,b){let T=this._renderer,S=this._getGpuColorTexture(o),R=T.texture.getGpuSource(l.source);return T.encoder.commandEncoder.copyTextureToTexture({texture:S,origin:f},{texture:R,origin:b},v),l}startRenderPass(o,l=!0,f,v){let b=this._renderTargetSystem.getGpuRenderTarget(o),T=this.getDescriptor(o,l,f);b.descriptor=T,this._renderer.pipeline.setRenderTarget(b),this._renderer.encoder.beginRenderPass(b),this._renderer.encoder.setViewport(v)}finishRenderPass(){this._renderer.encoder.endRenderPass()}_getGpuColorTexture(o){let l=this._renderTargetSystem.getGpuRenderTarget(o);return l.contexts[0]?l.contexts[0].getCurrentTexture():this._renderer.texture.getGpuSource(o.colorTextures[0].source)}getDescriptor(o,l,f){typeof l=="boolean"&&(l=l?lu.ALL:lu.NONE);let v=this._renderTargetSystem,b=v.getGpuRenderTarget(o),T=o.colorTextures.map((R,U)=>{let W=b.contexts[U],K,ee;W?K=W.getCurrentTexture().createView():K=this._renderer.texture.getGpuSource(R).createView({mipLevelCount:1}),b.msaaTextures[U]&&(ee=K,K=this._renderer.texture.getTextureView(b.msaaTextures[U]));let se=l&lu.COLOR?"clear":"load";return f??(f=v.defaultClearColor),{view:K,resolveTarget:ee,clearValue:f,storeOp:"store",loadOp:se}}),S;if((o.stencil||o.depth)&&!o.depthStencilTexture&&(o.ensureDepthStencilTexture(),o.depthStencilTexture.source.sampleCount=b.msaa?4:1),o.depthStencilTexture){let R=l&lu.STENCIL?"clear":"load",U=l&lu.DEPTH?"clear":"load";S={view:this._renderer.texture.getGpuSource(o.depthStencilTexture.source).createView(),stencilStoreOp:"store",stencilLoadOp:R,depthClearValue:1,depthLoadOp:U,depthStoreOp:"store"}}return{colorAttachments:T,depthStencilAttachment:S}}clear(o,l=!0,f,v){if(!l)return;let{gpu:b,encoder:T}=this._renderer,S=b.device;if(T.commandEncoder===null){let R=S.createCommandEncoder(),U=this.getDescriptor(o,l,f),W=R.beginRenderPass(U);W.setViewport(v.x,v.y,v.width,v.height,0,1),W.end();let K=R.finish();S.queue.submit([K])}else this.startRenderPass(o,l,f,v)}initGpuRenderTarget(o){o.isRoot=!0;let l=new _M;return o.colorTextures.forEach((f,v)=>{if(Ra.test(f.resource)){let b=f.resource.getContext("webgpu"),T=f.transparent?"premultiplied":"opaque";try{b.configure({device:this._renderer.gpu.device,usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC,format:"bgra8unorm",alphaMode:T})}catch(S){console.error(S)}l.contexts[v]=b}if(l.msaa=f.source.antialias,f.source.antialias){let b=new Ha({width:0,height:0,sampleCount:4});l.msaaTextures[v]=b}}),l.msaa&&(l.msaaSamples=4,o.depthStencilTexture&&(o.depthStencilTexture.source.sampleCount=4)),l}destroyGpuRenderTarget(o){o.contexts.forEach(l=>{l.unconfigure()}),o.msaaTextures.forEach(l=>{l.destroy()}),o.msaaTextures.length=0,o.contexts.length=0}ensureDepthStencilTexture(o){let l=this._renderTargetSystem.getGpuRenderTarget(o);o.depthStencilTexture&&l.msaa&&(o.depthStencilTexture.source.sampleCount=4)}resizeGpuRenderTarget(o){let l=this._renderTargetSystem.getGpuRenderTarget(o);l.width=o.width,l.height=o.height,l.msaa&&o.colorTextures.forEach((f,v)=>{l.msaaTextures[v]?.resize(f.source.width,f.source.height,f.source._resolution)})}}}),$T,XF=D(()=>{Ot(),bM(),qF(),$T=class extends FT{constructor(o){super(o),this.adaptor=new wM,this.adaptor.init(o,this)}},$T.extension={type:[Ke.WebGPUSystem],name:"renderTarget"}}),zT,KF=D(()=>{Ot(),zT=class{constructor(){this._gpuProgramData=Object.create(null)}contextChange(o){this._gpu=o,this.maxTextures=o.device.limits.maxSampledTexturesPerShaderStage}getProgramData(o){return this._gpuProgramData[o._layoutKey]||this._createGPUProgramData(o)}_createGPUProgramData(o){let l=this._gpu.device,f=o.gpuLayout.map(b=>l.createBindGroupLayout({entries:b})),v={bindGroupLayouts:f};return this._gpuProgramData[o._layoutKey]={bindGroups:f,pipeline:l.createPipelineLayout(v)},this._gpuProgramData[o._layoutKey]}destroy(){this._gpu=null,this._gpuProgramData=null}},zT.extension={type:[Ke.WebGPUSystem],name:"shader"}}),Ul,ZF=D(()=>{"use strict";Ul={},Ul.normal={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"}},Ul.add={alpha:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one",operation:"add"}},Ul.multiply={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"dst",dstFactor:"one-minus-src-alpha",operation:"add"}},Ul.screen={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one-minus-src",operation:"add"}},Ul.overlay={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one-minus-src",operation:"add"}},Ul.none={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"zero",dstFactor:"zero",operation:"add"}},Ul["normal-npm"]={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha",operation:"add"}},Ul["add-npm"]={alpha:{srcFactor:"one",dstFactor:"one",operation:"add"},color:{srcFactor:"src-alpha",dstFactor:"one",operation:"add"}},Ul["screen-npm"]={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"src-alpha",dstFactor:"one-minus-src",operation:"add"}},Ul.erase={alpha:{srcFactor:"zero",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"zero",dstFactor:"one-minus-src",operation:"add"}},Ul.min={alpha:{srcFactor:"one",dstFactor:"one",operation:"min"},color:{srcFactor:"one",dstFactor:"one",operation:"min"}},Ul.max={alpha:{srcFactor:"one",dstFactor:"one",operation:"max"},color:{srcFactor:"one",dstFactor:"one",operation:"max"}}}),J4,kM=D(()=>{Ot(),Ih(),ZF(),J4=class{constructor(){this.defaultState=new Cu,this.defaultState.blend=!0}contextChange(o){this.gpu=o}getColorTargets(o){return[{format:"bgra8unorm",writeMask:0,blend:Ul[o.blendMode]||Ul.normal}]}destroy(){this.gpu=null}},J4.extension={type:[Ke.WebGPUSystem],name:"state"}}),TM,QF=D(()=>{"use strict";TM={type:"image",upload(o,l,f){let v=o.resource,b=(o.pixelWidth|0)*(o.pixelHeight|0),T=v.byteLength/b;f.device.queue.writeTexture({texture:l},v,{offset:0,rowsPerImage:o.pixelHeight,bytesPerRow:o.pixelHeight*T},{width:o.pixelWidth,height:o.pixelHeight,depthOrArrayLayers:1})}}}),GT,EM,Qp,CM=D(()=>{"use strict";GT={"bc1-rgba-unorm":{blockBytes:8,blockWidth:4,blockHeight:4},"bc2-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"bc3-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"bc7-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"etc1-rgb-unorm":{blockBytes:8,blockWidth:4,blockHeight:4},"etc2-rgba8unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"astc-4x4-unorm":{blockBytes:16,blockWidth:4,blockHeight:4}},EM={blockBytes:4,blockWidth:1,blockHeight:1},Qp={type:"compressed",upload(o,l,f){let v=o.pixelWidth,b=o.pixelHeight,T=GT[o.format]||EM;for(let S=0;S<o.resource.length;S++){let R=o.resource[S],U=Math.ceil(v/T.blockWidth)*T.blockBytes;f.device.queue.writeTexture({texture:l,mipLevel:S},R,{offset:0,bytesPerRow:U},{width:Math.ceil(v/T.blockWidth)*T.blockWidth,height:Math.ceil(b/T.blockHeight)*T.blockHeight,depthOrArrayLayers:1}),v=Math.max(v>>1,1),b=Math.max(b>>1,1)}}}}),UT,SM=D(()=>{"use strict";UT={type:"image",upload(o,l,f){let v=o.resource;if(!v)return;let b=Math.min(l.width,o.resourceWidth||o.pixelWidth),T=Math.min(l.height,o.resourceHeight||o.pixelHeight),S=o.alphaMode==="premultiply-alpha-on-upload";f.device.queue.copyExternalImageToTexture({source:v},{texture:l,premultipliedAlpha:S},{width:b,height:T})}}}),AM,JF=D(()=>{SM(),AM={type:"video",upload(o,l,f){UT.upload(o,l,f)}}}),MM,LM=D(()=>{"use strict";MM=class{constructor(o){this.device=o,this.sampler=o.createSampler({minFilter:"linear"}),this.pipelines={}}_getMipmapPipeline(o){let l=this.pipelines[o];return l||(this.mipmapShaderModule||(this.mipmapShaderModule=this.device.createShaderModule({code:`
                        var<private> pos : array<vec2<f32>, 3> = array<vec2<f32>, 3>(
                        vec2<f32>(-1.0, -1.0), vec2<f32>(-1.0, 3.0), vec2<f32>(3.0, -1.0));

                        struct VertexOutput {
                        @builtin(position) position : vec4<f32>,
                        @location(0) texCoord : vec2<f32>,
                        };

                        @vertex
                        fn vertexMain(@builtin(vertex_index) vertexIndex : u32) -> VertexOutput {
                        var output : VertexOutput;
                        output.texCoord = pos[vertexIndex] * vec2<f32>(0.5, -0.5) + vec2<f32>(0.5);
                        output.position = vec4<f32>(pos[vertexIndex], 0.0, 1.0);
                        return output;
                        }

                        @group(0) @binding(0) var imgSampler : sampler;
                        @group(0) @binding(1) var img : texture_2d<f32>;

                        @fragment
                        fn fragmentMain(@location(0) texCoord : vec2<f32>) -> @location(0) vec4<f32> {
                        return textureSample(img, imgSampler, texCoord);
                        }
                    `})),l=this.device.createRenderPipeline({layout:"auto",vertex:{module:this.mipmapShaderModule,entryPoint:"vertexMain"},fragment:{module:this.mipmapShaderModule,entryPoint:"fragmentMain",targets:[{format:o}]}}),this.pipelines[o]=l),l}generateMipmap(o){let l=this._getMipmapPipeline(o.format);if(o.dimension==="3d"||o.dimension==="1d")throw new Error("Generating mipmaps for non-2d textures is currently unsupported!");let f=o,v=o.depthOrArrayLayers||1,b=o.usage&GPUTextureUsage.RENDER_ATTACHMENT;if(!b){let R={size:{width:Math.ceil(o.width/2),height:Math.ceil(o.height/2),depthOrArrayLayers:v},format:o.format,usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_SRC|GPUTextureUsage.RENDER_ATTACHMENT,mipLevelCount:o.mipLevelCount-1};f=this.device.createTexture(R)}let T=this.device.createCommandEncoder({}),S=l.getBindGroupLayout(0);for(let R=0;R<v;++R){let U=o.createView({baseMipLevel:0,mipLevelCount:1,dimension:"2d",baseArrayLayer:R,arrayLayerCount:1}),W=b?1:0;for(let K=1;K<o.mipLevelCount;++K){let ee=f.createView({baseMipLevel:W++,mipLevelCount:1,dimension:"2d",baseArrayLayer:R,arrayLayerCount:1}),se=T.beginRenderPass({colorAttachments:[{view:ee,storeOp:"store",loadOp:"clear",clearValue:{r:0,g:0,b:0,a:0}}]}),re=this.device.createBindGroup({layout:S,entries:[{binding:0,resource:this.sampler},{binding:1,resource:U}]});se.setPipeline(l),se.setBindGroup(0,re),se.draw(3,1,0,0),se.end(),U=ee}}if(!b){let R={width:Math.ceil(o.width/2),height:Math.ceil(o.height/2),depthOrArrayLayers:v};for(let U=1;U<o.mipLevelCount;++U)T.copyTextureToTexture({texture:f,mipLevel:U-1},{texture:o,mipLevel:U},R),R.width=Math.ceil(R.width/2),R.height=Math.ceil(R.height/2)}return this.device.queue.submit([T.finish()]),b||f.destroy(),o}}}),N2,RM=D(()=>{Ye(),Ot(),vl(),Zg(),th(),QF(),CM(),SM(),JF(),LM(),N2=class{constructor(o){this.managedTextures=[],this._gpuSources=Object.create(null),this._gpuSamplers=Object.create(null),this._bindGroupHash=Object.create(null),this._textureViewHash=Object.create(null),this._uploads={image:UT,buffer:TM,video:AM,compressed:Qp},this._renderer=o,o.renderableGC.addManagedHash(this,"_gpuSources"),o.renderableGC.addManagedHash(this,"_gpuSamplers"),o.renderableGC.addManagedHash(this,"_bindGroupHash"),o.renderableGC.addManagedHash(this,"_textureViewHash")}contextChange(o){this._gpu=o}initSource(o){if(o.autoGenerateMipmaps){let R=Math.max(o.pixelWidth,o.pixelHeight);o.mipLevelCount=Math.floor(Math.log2(R))+1}let l=GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST;o.uploadMethodId!=="compressed"&&(l|=GPUTextureUsage.RENDER_ATTACHMENT,l|=GPUTextureUsage.COPY_SRC);let f=GT[o.format]||{blockBytes:4,blockWidth:1,blockHeight:1},v=Math.ceil(o.pixelWidth/f.blockWidth)*f.blockWidth,b=Math.ceil(o.pixelHeight/f.blockHeight)*f.blockHeight,T={label:o.label,size:{width:v,height:b},format:o.format,sampleCount:o.sampleCount,mipLevelCount:o.mipLevelCount,dimension:o.dimension,usage:l},S=this._gpu.device.createTexture(T);return this._gpuSources[o.uid]=S,this.managedTextures.includes(o)||(o.on("update",this.onSourceUpdate,this),o.on("resize",this.onSourceResize,this),o.on("destroy",this.onSourceDestroy,this),o.on("unload",this.onSourceUnload,this),o.on("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.push(o)),this.onSourceUpdate(o),S}onSourceUpdate(o){let l=this.getGpuSource(o);l&&(this._uploads[o.uploadMethodId]&&this._uploads[o.uploadMethodId].upload(o,l,this._gpu),o.autoGenerateMipmaps&&o.mipLevelCount>1&&this.onUpdateMipmaps(o))}onSourceUnload(o){let l=this._gpuSources[o.uid];l&&(this._gpuSources[o.uid]=null,l.destroy())}onUpdateMipmaps(o){this._mipmapGenerator||(this._mipmapGenerator=new MM(this._gpu.device));let l=this.getGpuSource(o);this._mipmapGenerator.generateMipmap(l)}onSourceDestroy(o){o.off("update",this.onSourceUpdate,this),o.off("unload",this.onSourceUnload,this),o.off("destroy",this.onSourceDestroy,this),o.off("resize",this.onSourceResize,this),o.off("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.splice(this.managedTextures.indexOf(o),1),this.onSourceUnload(o)}onSourceResize(o){let l=this._gpuSources[o.uid];l?(l.width!==o.pixelWidth||l.height!==o.pixelHeight)&&(this._textureViewHash[o.uid]=null,this._bindGroupHash[o.uid]=null,this.onSourceUnload(o),this.initSource(o)):this.initSource(o)}_initSampler(o){return this._gpuSamplers[o._resourceId]=this._gpu.device.createSampler(o),this._gpuSamplers[o._resourceId]}getGpuSampler(o){return this._gpuSamplers[o._resourceId]||this._initSampler(o)}getGpuSource(o){return this._gpuSources[o.uid]||this.initSource(o)}getTextureBindGroup(o){return this._bindGroupHash[o.uid]??this._createTextureBindGroup(o)}_createTextureBindGroup(o){let l=o.source;return this._bindGroupHash[o.uid]=new Tu({0:l,1:l.style,2:new il({uTextureMatrix:{type:"mat3x3<f32>",value:o.textureMatrix.mapCoord}})}),this._bindGroupHash[o.uid]}getTextureView(o){let l=o.source;return this._textureViewHash[l.uid]??this._createTextureView(l)}_createTextureView(o){return this._textureViewHash[o.uid]=this.getGpuSource(o).createView(),this._textureViewHash[o.uid]}generateCanvas(o){let l=this._renderer,f=l.gpu.device.createCommandEncoder(),v=Ya.get().createCanvas();v.width=o.source.pixelWidth,v.height=o.source.pixelHeight;let b=v.getContext("webgpu");return b.configure({device:l.gpu.device,usage:GPUTextureUsage.COPY_DST|GPUTextureUsage.COPY_SRC,format:Ya.get().getNavigator().gpu.getPreferredCanvasFormat(),alphaMode:"premultiplied"}),f.copyTextureToTexture({texture:l.texture.getGpuSource(o.source),origin:{x:0,y:0}},{texture:b.getCurrentTexture()},{width:v.width,height:v.height}),l.gpu.device.queue.submit([f.finish()]),v}getPixels(o){let l=this.generateCanvas(o),f=oh.getOptimalCanvasAndContext(l.width,l.height),v=f.context;v.drawImage(l,0,0);let{width:b,height:T}=l,S=v.getImageData(0,0,b,T),R=new Uint8ClampedArray(S.data.buffer);return oh.returnCanvasAndContext(f),{pixels:R,width:b,height:T}}destroy(){this.managedTextures.slice().forEach(o=>this.onSourceDestroy(o)),this.managedTextures=null;for(let o of Object.keys(this._bindGroupHash)){let l=Number(o);this._bindGroupHash[l]?.destroy(),this._bindGroupHash[l]=null}this._gpu=null,this._mipmapGenerator=null,this._gpuSources=null,this._bindGroupHash=null,this._textureViewHash=null,this._gpuSamplers=null}},N2.extension={type:[Ke.WebGPUSystem],name:"texture"}}),jT={};oi(jT,{WebGPURenderer:()=>NM});var HT,DM,IM,VT,WT,YT,NM,e$=D(()=>{Ot(),hF(),z9(),G9(),v2(),lM(),ah(),uM(),MF(),hM(),Z4(),LF(),cM(),BF(),FF(),UF(),XF(),KF(),kM(),RM(),HT=[...kT,NT,ST,R2,ET,N2,$T,zT,J4,PT,CT,AT,K4],DM=[...TT,BT],IM=[sT,aT,nT],VT=[],WT=[],YT=[],Kr.handleByNamedList(Ke.WebGPUSystem,VT),Kr.handleByNamedList(Ke.WebGPUPipes,WT),Kr.handleByNamedList(Ke.WebGPUPipesAdaptor,YT),Kr.add(...HT,...DM,...IM),NM=class extends p1{constructor(){let o={name:"webgpu",type:Ce.WEBGPU,systems:VT,renderPipes:WT,renderPipeAdaptors:YT};super(o)}}}),qT,t$=D(()=>{Ot(),Un(),au(),hd(),Ig(),Lp(),v0(),p0(),nh(),sh(),vl(),qT=class{init(){let o=new il({uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uTransformMatrix:{value:new ji,type:"mat3x3<f32>"},uRound:{value:0,type:"f32"}}),l=sd(),f=c0({name:"graphics",bits:[Dg,Ng(l),l2,Rp]});this.shader=new Ns({glProgram:f,resources:{localUniforms:o,batchSamplers:k(l)}})}execute(o,l){let f=l.context,v=f.customShader||this.shader,b=o.renderer,T=b.graphicsContext,{batcher:S,instructions:R}=T.getContextRenderData(f);v.groups[0]=b.globalUniforms.bindGroup,b.state.set(o.state),b.shader.bind(v),b.geometry.bind(S.geometry,v.glProgram);let U=R.instructions;for(let W=0;W<R.instructionSize;W++){let K=U[W];if(K.size){for(let ee=0;ee<K.textures.count;ee++)b.texture.bind(K.textures.textures[ee],ee);b.geometry.draw(K.topology,K.size,K.start)}}}destroy(){this.shader.destroy(!0),this.shader=null}},qT.extension={type:[Ke.WebGLPipesAdaptor],name:"graphics"}}),XT,r$=D(()=>{Ot(),Un(),hd(),v0(),p0(),$9(),sh(),os(),Ar(),XT=class{init(){let o=c0({name:"mesh",bits:[l2,F9,Rp]});this._shader=new Ns({glProgram:o,resources:{uTexture:fn.EMPTY.source,textureUniforms:{uTextureMatrix:{type:"mat3x3<f32>",value:new ji}}}})}execute(o,l){let f=o.renderer,v=l._shader;if(v){if(!v.glProgram){Gt("Mesh shader has no glProgram",l.shader);return}}else{v=this._shader;let b=l.texture,T=b.source;v.resources.uTexture=T,v.resources.uSampler=T.style,v.resources.textureUniforms.uniforms.uTextureMatrix=b.textureMatrix.mapCoord}v.groups[100]=f.globalUniforms.bindGroup,v.groups[101]=o.localUniformsBindGroup,f.encoder.draw({geometry:l._geometry,shader:v,state:l.state})}destroy(){this._shader.destroy(!0),this._shader=null}},XT.extension={type:[Ke.WebGLPipesAdaptor],name:"mesh"}}),KT,i$=D(()=>{Ot(),Ih(),KT=class{constructor(){this._didUpload=!1,this._tempState=Cu.for2d()}init(o){o.renderer.runners.contextChange.add(this)}contextChange(){this._didUpload=!1}start(o,l,f){let v=o.renderer;v.shader.bind(f,this._didUpload),v.shader.updateUniformGroup(v.globalUniforms.uniformGroup),v.geometry.bind(l,f.glProgram)}execute(o,l){let f=o.renderer;this._didUpload=!0,this._tempState.blendMode=l.blendMode,f.state.set(this._tempState);let v=l.textures.textures;for(let b=0;b<l.textures.count;b++)f.texture.bind(v[b],b);f.geometry.draw(l.topology,l.size,l.start)}},KT.extension={type:[Ke.WebGLPipesAdaptor],name:"batch"}}),O2,n$=D(()=>{"use strict";O2=(o=>(o[o.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",o[o.ARRAY_BUFFER=34962]="ARRAY_BUFFER",o[o.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",o))(O2||{})}),OM,a$=D(()=>{"use strict";OM=class{constructor(o,l){this._lastBindBaseLocation=-1,this._lastBindCallId=-1,this.buffer=o||null,this.updateID=-1,this.byteLength=-1,this.type=l}}}),ZT,s$=D(()=>{Ot(),od(),n$(),a$(),ZT=class{constructor(o){this._gpuBuffers=Object.create(null),this._boundBufferBases=Object.create(null),this._minBaseLocation=0,this._nextBindBaseIndex=this._minBaseLocation,this._bindCallId=0,this._renderer=o,this._renderer.renderableGC.addManagedHash(this,"_gpuBuffers")}destroy(){this._renderer=null,this._gl=null,this._gpuBuffers=null,this._boundBufferBases=null}contextChange(){let o=this._gl=this._renderer.gl;this._gpuBuffers=Object.create(null),this._maxBindings=o.MAX_UNIFORM_BUFFER_BINDINGS?o.getParameter(o.MAX_UNIFORM_BUFFER_BINDINGS):0}getGlBuffer(o){return this._gpuBuffers[o.uid]||this.createGLBuffer(o)}bind(o){let{_gl:l}=this,f=this.getGlBuffer(o);l.bindBuffer(f.type,f.buffer)}bindBufferBase(o,l){let{_gl:f}=this;this._boundBufferBases[l]!==o&&(this._boundBufferBases[l]=o,o._lastBindBaseLocation=l,f.bindBufferBase(f.UNIFORM_BUFFER,l,o.buffer))}nextBindBase(o){this._bindCallId++,this._minBaseLocation=0,o&&(this._boundBufferBases[0]=null,this._minBaseLocation=1,this._nextBindBaseIndex<1&&(this._nextBindBaseIndex=1))}freeLocationForBufferBase(o){let l=this.getLastBindBaseLocation(o);if(l>=this._minBaseLocation)return o._lastBindCallId=this._bindCallId,l;let f=0,v=this._nextBindBaseIndex;for(;f<2;){v>=this._maxBindings&&(v=this._minBaseLocation,f++);let b=this._boundBufferBases[v];if(b&&b._lastBindCallId===this._bindCallId){v++;continue}break}return l=v,this._nextBindBaseIndex=v+1,f>=2?-1:(o._lastBindCallId=this._bindCallId,this._boundBufferBases[l]=null,l)}getLastBindBaseLocation(o){let l=o._lastBindBaseLocation;return this._boundBufferBases[l]===o?l:-1}bindBufferRange(o,l,f,v){let{_gl:b}=this;f=f||0,l=l||0,this._boundBufferBases[l]=null,b.bindBufferRange(b.UNIFORM_BUFFER,l||0,o.buffer,f*256,v||256)}updateBuffer(o){let{_gl:l}=this,f=this.getGlBuffer(o);if(o._updateID===f.updateID)return f;f.updateID=o._updateID,l.bindBuffer(f.type,f.buffer);let v=o.data,b=o.descriptor.usage&pa.STATIC?l.STATIC_DRAW:l.DYNAMIC_DRAW;return v?f.byteLength>=v.byteLength?l.bufferSubData(f.type,0,v,0,o._updateSize/v.BYTES_PER_ELEMENT):(f.byteLength=v.byteLength,l.bufferData(f.type,v,b)):(f.byteLength=o.descriptor.size,l.bufferData(f.type,f.byteLength,b)),f}destroyAll(){let o=this._gl;for(let l in this._gpuBuffers)o.deleteBuffer(this._gpuBuffers[l].buffer);this._gpuBuffers=Object.create(null)}onBufferDestroy(o,l){let f=this._gpuBuffers[o.uid],v=this._gl;l||v.deleteBuffer(f.buffer),this._gpuBuffers[o.uid]=null}createGLBuffer(o){let{_gl:l}=this,f=O2.ARRAY_BUFFER;o.descriptor.usage&pa.INDEX?f=O2.ELEMENT_ARRAY_BUFFER:o.descriptor.usage&pa.UNIFORM&&(f=O2.UNIFORM_BUFFER);let v=new OM(l.createBuffer(),f);return this._gpuBuffers[o.uid]=v,o.on("destroy",this.onBufferDestroy,this),v}},ZT.extension={type:[Ke.WebGLSystem],name:"buffer"}}),e3,BM,o$=D(()=>{Ye(),Ot(),Ar(),e3=class JNe{constructor(l){this.supports={uint32Indices:!0,uniformBufferObject:!0,vertexArrayObject:!0,srgbTextures:!0,nonPowOf2wrapping:!0,msaa:!0,nonPowOf2mipmaps:!0},this._renderer=l,this.extensions=Object.create(null),this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(l){this.gl=l,this._renderer.gl=l}init(l){l={...JNe.defaultOptions,...l};let f=this.multiView=l.multiView;if(l.context&&f&&(Gt("Renderer created with both a context and multiview enabled. Disabling multiView as both cannot work together."),f=!1),f?this.canvas=Ya.get().createCanvas(this._renderer.canvas.width,this._renderer.canvas.height):this.canvas=this._renderer.view.canvas,l.context)this.initFromContext(l.context);else{let v=this._renderer.background.alpha<1,b=l.premultipliedAlpha??!0,T=l.antialias&&!this._renderer.backBuffer.useBackBuffer;this.createContext(l.preferWebGLVersion,{alpha:v,premultipliedAlpha:b,antialias:T,stencil:!0,preserveDrawingBuffer:l.preserveDrawingBuffer,powerPreference:l.powerPreference??"default"})}}ensureCanvasSize(l){if(!this.multiView){l!==this.canvas&&Gt("multiView is disabled, but targetCanvas is not the main canvas");return}let{canvas:f}=this;(f.width<l.width||f.height<l.height)&&(f.width=Math.max(l.width,l.width),f.height=Math.max(l.height,l.height))}initFromContext(l){this.gl=l,this.webGLVersion=l instanceof Ya.get().getWebGLRenderingContext()?1:2,this.getExtensions(),this.validateContext(l),this._renderer.runners.contextChange.emit(l);let f=this._renderer.view.canvas;f.addEventListener("webglcontextlost",this.handleContextLost,!1),f.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}createContext(l,f){let v,b=this.canvas;if(l===2&&(v=b.getContext("webgl2",f)),!v&&(v=b.getContext("webgl",f),!v))throw new Error("This browser does not support WebGL. Try using the canvas renderer");this.gl=v,this.initFromContext(this.gl)}getExtensions(){let{gl:l}=this,f={anisotropicFiltering:l.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:l.getExtension("OES_texture_float_linear"),s3tc:l.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:l.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:l.getExtension("WEBGL_compressed_texture_etc"),etc1:l.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:l.getExtension("WEBGL_compressed_texture_pvrtc")||l.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:l.getExtension("WEBGL_compressed_texture_atc"),astc:l.getExtension("WEBGL_compressed_texture_astc"),bptc:l.getExtension("EXT_texture_compression_bptc"),rgtc:l.getExtension("EXT_texture_compression_rgtc"),loseContext:l.getExtension("WEBGL_lose_context")};if(this.webGLVersion===1)this.extensions={...f,drawBuffers:l.getExtension("WEBGL_draw_buffers"),depthTexture:l.getExtension("WEBGL_depth_texture"),vertexArrayObject:l.getExtension("OES_vertex_array_object")||l.getExtension("MOZ_OES_vertex_array_object")||l.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:l.getExtension("OES_element_index_uint"),floatTexture:l.getExtension("OES_texture_float"),floatTextureLinear:l.getExtension("OES_texture_float_linear"),textureHalfFloat:l.getExtension("OES_texture_half_float"),textureHalfFloatLinear:l.getExtension("OES_texture_half_float_linear"),vertexAttribDivisorANGLE:l.getExtension("ANGLE_instanced_arrays"),srgb:l.getExtension("EXT_sRGB")};else{this.extensions={...f,colorBufferFloat:l.getExtension("EXT_color_buffer_float")};let v=l.getExtension("WEBGL_provoking_vertex");v&&v.provokingVertexWEBGL(v.FIRST_VERTEX_CONVENTION_WEBGL)}}handleContextLost(l){l.preventDefault(),this._contextLossForced&&(this._contextLossForced=!1,setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext?.restoreContext()},0))}handleContextRestored(){this._renderer.runners.contextChange.emit(this.gl)}destroy(){let l=this._renderer.view.canvas;this._renderer=null,l.removeEventListener("webglcontextlost",this.handleContextLost),l.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext?.loseContext()}forceContextLoss(){this.extensions.loseContext?.loseContext(),this._contextLossForced=!0}validateContext(l){let f=l.getContextAttributes();f&&!f.stencil&&Gt("Provided WebGL context does not have a stencil buffer, masks may not render correctly");let v=this.supports,b=this.webGLVersion===2,T=this.extensions;v.uint32Indices=b||!!T.uint32ElementIndex,v.uniformBufferObject=b,v.vertexArrayObject=b||!!T.vertexArrayObject,v.srgbTextures=b||!!T.srgb,v.nonPowOf2wrapping=b,v.nonPowOf2mipmaps=b,v.msaa=b,v.uint32Indices||Gt("Provided WebGL context does not support 32 index buffer, large scenes may not render correctly")}},e3.extension={type:[Ke.WebGLSystem],name:"context"},e3.defaultOptions={context:null,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:void 0,preferWebGLVersion:2,multiView:!1},BM=e3}),t3,QT,La,PM=D(()=>{"use strict";t3=(o=>(o[o.RGBA=6408]="RGBA",o[o.RGB=6407]="RGB",o[o.RG=33319]="RG",o[o.RED=6403]="RED",o[o.RGBA_INTEGER=36249]="RGBA_INTEGER",o[o.RGB_INTEGER=36248]="RGB_INTEGER",o[o.RG_INTEGER=33320]="RG_INTEGER",o[o.RED_INTEGER=36244]="RED_INTEGER",o[o.ALPHA=6406]="ALPHA",o[o.LUMINANCE=6409]="LUMINANCE",o[o.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",o[o.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",o[o.DEPTH_STENCIL=34041]="DEPTH_STENCIL",o))(t3||{}),QT=(o=>(o[o.TEXTURE_2D=3553]="TEXTURE_2D",o[o.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",o[o.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",o[o.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",o[o.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",o[o.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",o[o.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",o[o.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",o[o.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",o))(QT||{}),La=(o=>(o[o.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",o[o.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",o[o.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",o[o.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",o[o.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",o[o.UNSIGNED_INT=5125]="UNSIGNED_INT",o[o.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",o[o.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",o[o.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",o[o.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",o[o.BYTE=5120]="BYTE",o[o.SHORT=5122]="SHORT",o[o.INT=5124]="INT",o[o.FLOAT=5126]="FLOAT",o[o.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",o[o.HALF_FLOAT=36193]="HALF_FLOAT",o))(La||{})});function l$(o){return JT[o]??JT.float32}var JT,u$=D(()=>{PM(),JT={uint8x2:La.UNSIGNED_BYTE,uint8x4:La.UNSIGNED_BYTE,sint8x2:La.BYTE,sint8x4:La.BYTE,unorm8x2:La.UNSIGNED_BYTE,unorm8x4:La.UNSIGNED_BYTE,snorm8x2:La.BYTE,snorm8x4:La.BYTE,uint16x2:La.UNSIGNED_SHORT,uint16x4:La.UNSIGNED_SHORT,sint16x2:La.SHORT,sint16x4:La.SHORT,unorm16x2:La.UNSIGNED_SHORT,unorm16x4:La.UNSIGNED_SHORT,snorm16x2:La.SHORT,snorm16x4:La.SHORT,float16x2:La.HALF_FLOAT,float16x4:La.HALF_FLOAT,float32:La.FLOAT,float32x2:La.FLOAT,float32x3:La.FLOAT,float32x4:La.FLOAT,uint32:La.UNSIGNED_INT,uint32x2:La.UNSIGNED_INT,uint32x3:La.UNSIGNED_INT,uint32x4:La.UNSIGNED_INT,sint32:La.INT,sint32x2:La.INT,sint32x3:La.INT,sint32x4:La.INT}}),FM,eE,h$=D(()=>{Ot(),kp(),yM(),u$(),FM={"point-list":0,"line-list":1,"line-strip":3,"triangle-list":4,"triangle-strip":5},eE=class{constructor(o){this._geometryVaoHash=Object.create(null),this._renderer=o,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this._renderer.renderableGC.addManagedHash(this,"_geometryVaoHash")}contextChange(){let o=this.gl=this._renderer.gl;if(!this._renderer.context.supports.vertexArrayObject)throw new Error("[PixiJS] Vertex Array Objects are not supported on this device");let l=this._renderer.context.extensions.vertexArrayObject;l&&(o.createVertexArray=()=>l.createVertexArrayOES(),o.bindVertexArray=v=>l.bindVertexArrayOES(v),o.deleteVertexArray=v=>l.deleteVertexArrayOES(v));let f=this._renderer.context.extensions.vertexAttribDivisorANGLE;f&&(o.drawArraysInstanced=(v,b,T,S)=>{f.drawArraysInstancedANGLE(v,b,T,S)},o.drawElementsInstanced=(v,b,T,S,R)=>{f.drawElementsInstancedANGLE(v,b,T,S,R)},o.vertexAttribDivisor=(v,b)=>f.vertexAttribDivisorANGLE(v,b)),this._activeGeometry=null,this._activeVao=null,this._geometryVaoHash=Object.create(null)}bind(o,l){let f=this.gl;this._activeGeometry=o;let v=this.getVao(o,l);this._activeVao!==v&&(this._activeVao=v,f.bindVertexArray(v)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){let o=this._activeGeometry,l=this._renderer.buffer;for(let f=0;f<o.buffers.length;f++){let v=o.buffers[f];l.updateBuffer(v)}}checkCompatibility(o,l){let f=o.attributes,v=l._attributeData;for(let b in v)if(!f[b])throw new Error(`shader and geometry incompatible, geometry missing the "${b}" attribute`)}getSignature(o,l){let f=o.attributes,v=l._attributeData,b=["g",o.uid];for(let T in f)v[T]&&b.push(T,v[T].location);return b.join("-")}getVao(o,l){return this._geometryVaoHash[o.uid]?.[l._key]||this.initGeometryVao(o,l)}initGeometryVao(o,l,f=!0){let v=this._renderer.gl,b=this._renderer.buffer;this._renderer.shader._getProgramData(l),this.checkCompatibility(o,l);let T=this.getSignature(o,l);this._geometryVaoHash[o.uid]||(this._geometryVaoHash[o.uid]=Object.create(null),o.on("destroy",this.onGeometryDestroy,this));let S=this._geometryVaoHash[o.uid],R=S[T];if(R)return S[l._key]=R,R;mM(o,l._attributeData);let U=o.buffers;R=v.createVertexArray(),v.bindVertexArray(R);for(let W=0;W<U.length;W++){let K=U[W];b.bind(K)}return this.activateVao(o,l),S[l._key]=R,S[T]=R,v.bindVertexArray(null),R}onGeometryDestroy(o,l){let f=this._geometryVaoHash[o.uid],v=this.gl;if(f){if(l)for(let b in f)this._activeVao!==f[b]&&this.unbind(),v.deleteVertexArray(f[b]);this._geometryVaoHash[o.uid]=null}}destroyAll(o=!1){let l=this.gl;for(let f in this._geometryVaoHash){if(o)for(let v in this._geometryVaoHash[f]){let b=this._geometryVaoHash[f];this._activeVao!==b&&this.unbind(),l.deleteVertexArray(b[v])}this._geometryVaoHash[f]=null}}activateVao(o,l){let f=this._renderer.gl,v=this._renderer.buffer,b=o.attributes;o.indexBuffer&&v.bind(o.indexBuffer);let T=null;for(let S in b){let R=b[S],U=R.buffer,W=v.getGlBuffer(U),K=l._attributeData[S];if(K){T!==W&&(v.bind(U),T=W);let ee=K.location;f.enableVertexAttribArray(ee);let se=ih(R.format),re=l$(R.format);if(K.format?.substring(1,4)==="int"?f.vertexAttribIPointer(ee,se.size,re,R.stride,R.offset):f.vertexAttribPointer(ee,se.size,re,se.normalised,R.stride,R.offset),R.instance)if(this.hasInstance){let Me=R.divisor??1;f.vertexAttribDivisor(ee,Me)}else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(o,l,f,v){let{gl:b}=this._renderer,T=this._activeGeometry,S=FM[o||T.topology];if(v??(v=T.instanceCount),T.indexBuffer){let R=T.indexBuffer.data.BYTES_PER_ELEMENT,U=R===2?b.UNSIGNED_SHORT:b.UNSIGNED_INT;v>1?b.drawElementsInstanced(S,l||T.indexBuffer.data.length,U,(f||0)*R,v):b.drawElements(S,l||T.indexBuffer.data.length,U,(f||0)*R)}else v>1?b.drawArraysInstanced(S,f||0,l||T.getSize(),v):b.drawArrays(S,f||0,l||T.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this._renderer=null,this.gl=null,this._activeVao=null,this._activeGeometry=null}},eE.extension={type:[Ke.WebGLSystem],name:"geometry"}}),$M,r3,zM,c$=D(()=>{Ot(),Ar(),o0(),sh(),Ih(),xo(),os(),l0(),$M=new ld({attributes:{aPosition:[-1,-1,3,-1,-1,3]}}),r3=class eOe{constructor(l){this.useBackBuffer=!1,this._useBackBufferThisRender=!1,this._renderer=l}init(l={}){let{useBackBuffer:f,antialias:v}={...eOe.defaultOptions,...l};this.useBackBuffer=f,this._antialias=v,this._renderer.context.supports.msaa||(Gt("antialiasing, is not supported on when using the back buffer"),this._antialias=!1),this._state=Cu.for2d();let b=new ud({vertex:`
                attribute vec2 aPosition;
                out vec2 vUv;

                void main() {
                    gl_Position = vec4(aPosition, 0.0, 1.0);

                    vUv = (aPosition + 1.0) / 2.0;

                    // flip dem UVs
                    vUv.y = 1.0 - vUv.y;
                }`,fragment:`
                in vec2 vUv;
                out vec4 finalColor;

                uniform sampler2D uTexture;

                void main() {
                    finalColor = texture(uTexture, vUv);
                }`,name:"big-triangle"});this._bigTriangleShader=new Ns({glProgram:b,resources:{uTexture:fn.WHITE.source}})}renderStart(l){let f=this._renderer.renderTarget.getRenderTarget(l.target);if(this._useBackBufferThisRender=this.useBackBuffer&&!!f.isRoot,this._useBackBufferThisRender){let v=this._renderer.renderTarget.getRenderTarget(l.target);this._targetTexture=v.colorTexture,l.target=this._getBackBufferTexture(v.colorTexture)}}renderEnd(){this._presentBackBuffer()}_presentBackBuffer(){let l=this._renderer;l.renderTarget.finishRenderPass(),this._useBackBufferThisRender&&(l.renderTarget.bind(this._targetTexture,!1),this._bigTriangleShader.resources.uTexture=this._backBufferTexture.source,l.encoder.draw({geometry:$M,shader:this._bigTriangleShader,state:this._state}))}_getBackBufferTexture(l){return this._backBufferTexture=this._backBufferTexture||new fn({source:new Ha({width:l.width,height:l.height,resolution:l._resolution,antialias:this._antialias})}),this._backBufferTexture.source.resize(l.width,l.height,l._resolution),this._backBufferTexture}destroy(){this._backBufferTexture&&(this._backBufferTexture.destroy(),this._backBufferTexture=null)}},r3.extension={type:[Ke.WebGLSystem],name:"backBuffer",priority:1},r3.defaultOptions={useBackBuffer:!1},zM=r3}),tE,d$=D(()=>{Ot(),tE=class{constructor(o){this._colorMaskCache=15,this._renderer=o}setMask(o){this._colorMaskCache!==o&&(this._colorMaskCache=o,this._renderer.gl.colorMask(!!(o&8),!!(o&4),!!(o&2),!!(o&1)))}},tE.extension={type:[Ke.WebGLSystem],name:"colorMask"}}),rE,p$=D(()=>{Ot(),rE=class{constructor(o){this.commandFinished=Promise.resolve(),this._renderer=o}setGeometry(o,l){this._renderer.geometry.bind(o,l.glProgram)}finishRenderPass(){}draw(o){let l=this._renderer,{geometry:f,shader:v,state:b,skipSync:T,topology:S,size:R,start:U,instanceCount:W}=o;l.shader.bind(v,T),l.geometry.bind(f,l.shader._activeProgram),b&&l.state.set(b),l.geometry.draw(S,R,U,W??f.instanceCount)}destroy(){this._renderer=null}},rE.extension={type:[Ke.WebGLSystem],name:"encoder"}}),iE,GM=D(()=>{Ot(),vM(),zl(),iE=class{constructor(o){this._stencilCache={enabled:!1,stencilReference:0,stencilMode:Is.NONE},this._renderTargetStencilState=Object.create(null),o.renderTarget.onRenderTargetChange.add(this)}contextChange(o){this._gl=o,this._comparisonFuncMapping={always:o.ALWAYS,never:o.NEVER,equal:o.EQUAL,"not-equal":o.NOTEQUAL,less:o.LESS,"less-equal":o.LEQUAL,greater:o.GREATER,"greater-equal":o.GEQUAL},this._stencilOpsMapping={keep:o.KEEP,zero:o.ZERO,replace:o.REPLACE,invert:o.INVERT,"increment-clamp":o.INCR,"decrement-clamp":o.DECR,"increment-wrap":o.INCR_WRAP,"decrement-wrap":o.DECR_WRAP},this._stencilCache.enabled=!1,this._stencilCache.stencilMode=Is.NONE,this._stencilCache.stencilReference=0}onRenderTargetChange(o){if(this._activeRenderTarget===o)return;this._activeRenderTarget=o;let l=this._renderTargetStencilState[o.uid];l||(l=this._renderTargetStencilState[o.uid]={stencilMode:Is.DISABLED,stencilReference:0}),this.setStencilMode(l.stencilMode,l.stencilReference)}setStencilMode(o,l){let f=this._renderTargetStencilState[this._activeRenderTarget.uid],v=this._gl,b=xd[o],T=this._stencilCache;if(f.stencilMode=o,f.stencilReference=l,o===Is.DISABLED){this._stencilCache.enabled&&(this._stencilCache.enabled=!1,v.disable(v.STENCIL_TEST));return}this._stencilCache.enabled||(this._stencilCache.enabled=!0,v.enable(v.STENCIL_TEST)),(o!==T.stencilMode||T.stencilReference!==l)&&(T.stencilMode=o,T.stencilReference=l,v.stencilFunc(this._comparisonFuncMapping[b.stencilBack.compare],l,255),v.stencilOp(v.KEEP,v.KEEP,this._stencilOpsMapping[b.stencilBack.passOp]))}},iE.extension={type:[Ke.WebGLSystem],name:"stencil"}});function f$(o){let l=o.map(T=>({data:T,offset:0,size:0})),f=16,v=0,b=0;for(let T=0;T<l.length;T++){let S=l[T];if(v=nE[S.data.type],!v)throw new Error(`Unknown type ${S.data.type}`);S.data.size>1&&(v=Math.max(v,f)*S.data.size);let R=v===12?16:v;S.size=v;let U=b%f;U>0&&f-U<R?b+=(f-U)%16:b+=(v-U%v)%v,S.offset=b,b+=v}return b=Math.ceil(b/16)*16,{uboElements:l,size:b}}var nE,UM=D(()=>{"use strict";nE={f32:4,i32:4,"vec2<f32>":8,"vec3<f32>":12,"vec4<f32>":16,"vec2<i32>":8,"vec3<i32>":12,"vec4<i32>":16,"mat2x2<f32>":32,"mat3x3<f32>":48,"mat4x4<f32>":64}});function g$(o,l){let f=Math.max(nE[o.data.type]/16,1),v=o.data.value.length/o.data.size,b=(4-v%4)%4,T=o.data.type.indexOf("i32")>=0?"dataInt32":"data";return`
        v = uv.${o.data.name};
        offset += ${l};

        arrayOffset = offset;

        t = 0;

        for(var i=0; i < ${o.data.size*f}; i++)
        {
            for(var j = 0; j < ${v}; j++)
            {
                ${T}[arrayOffset++] = v[t++];
            }
            ${b!==0?`arrayOffset += ${b};`:""}
        }
    `}var m$=D(()=>{UM()});function y$(o){return fM(o,"uboStd40",g$,DT)}var Mu=D(()=>{RT(),IT(),m$()}),i3,v$=D(()=>{Ot(),dM(),UM(),Mu(),i3=class extends MT{constructor(){super({createUboElements:f$,generateUboSync:y$})}},i3.extension={type:[Ke.WebGLSystem],name:"ubo"}}),n3,b1=D(()=>{"use strict";n3=class{constructor(){this.width=-1,this.height=-1,this.msaa=!1,this.msaaRenderBuffer=[]}}}),Bh,Nr=D(()=>{ye(),Ar(),eh(),y2(),b1(),Bh=class{constructor(){this._clearColorCache=[0,0,0,0],this._viewPortCache=new te}init(o,l){this._renderer=o,this._renderTargetSystem=l,o.runners.contextChange.add(this)}contextChange(){this._clearColorCache=[0,0,0,0],this._viewPortCache=new te}copyToTexture(o,l,f,v,b){let T=this._renderTargetSystem,S=this._renderer,R=T.getGpuRenderTarget(o),U=S.gl;return this.finishRenderPass(o),U.bindFramebuffer(U.FRAMEBUFFER,R.resolveTargetFramebuffer),S.texture.bind(l,0),U.copyTexSubImage2D(U.TEXTURE_2D,0,b.x,b.y,f.x,f.y,v.width,v.height),l}startRenderPass(o,l=!0,f,v){let b=this._renderTargetSystem,T=o.colorTexture,S=b.getGpuRenderTarget(o),R=v.y;o.isRoot&&(R=T.pixelHeight-v.height),o.colorTextures.forEach(K=>{this._renderer.texture.unbind(K)});let U=this._renderer.gl;U.bindFramebuffer(U.FRAMEBUFFER,S.framebuffer);let W=this._viewPortCache;(W.x!==v.x||W.y!==R||W.width!==v.width||W.height!==v.height)&&(W.x=v.x,W.y=R,W.width=v.width,W.height=v.height,U.viewport(v.x,R,v.width,v.height)),!S.depthStencilRenderBuffer&&(o.stencil||o.depth)&&this._initStencil(S),this.clear(o,l,f)}finishRenderPass(o){let l=this._renderTargetSystem.getGpuRenderTarget(o);if(!l.msaa)return;let f=this._renderer.gl;f.bindFramebuffer(f.FRAMEBUFFER,l.resolveTargetFramebuffer),f.bindFramebuffer(f.READ_FRAMEBUFFER,l.framebuffer),f.blitFramebuffer(0,0,l.width,l.height,0,0,l.width,l.height,f.COLOR_BUFFER_BIT,f.NEAREST),f.bindFramebuffer(f.FRAMEBUFFER,l.framebuffer)}initGpuRenderTarget(o){let l=this._renderer,f=l.gl,v=new n3;return o.colorTexture.resource===l.canvas?(this._renderer.context.ensureCanvasSize(o.colorTexture.resource),v.framebuffer=null,v):(this._initColor(o,v),f.bindFramebuffer(f.FRAMEBUFFER,null),v)}destroyGpuRenderTarget(o){let l=this._renderer.gl;o.framebuffer&&(l.deleteFramebuffer(o.framebuffer),o.framebuffer=null),o.resolveTargetFramebuffer&&(l.deleteFramebuffer(o.resolveTargetFramebuffer),o.resolveTargetFramebuffer=null),o.depthStencilRenderBuffer&&(l.deleteRenderbuffer(o.depthStencilRenderBuffer),o.depthStencilRenderBuffer=null),o.msaaRenderBuffer.forEach(f=>{l.deleteRenderbuffer(f)}),o.msaaRenderBuffer=null}clear(o,l,f){if(!l)return;let v=this._renderTargetSystem;typeof l=="boolean"&&(l=l?lu.ALL:lu.NONE);let b=this._renderer.gl;if(l&lu.COLOR){f??(f=v.defaultClearColor);let T=this._clearColorCache,S=f;(T[0]!==S[0]||T[1]!==S[1]||T[2]!==S[2]||T[3]!==S[3])&&(T[0]=S[0],T[1]=S[1],T[2]=S[2],T[3]=S[3],b.clearColor(S[0],S[1],S[2],S[3]))}b.clear(l)}resizeGpuRenderTarget(o){if(o.isRoot)return;let l=this._renderTargetSystem.getGpuRenderTarget(o);this._resizeColor(o,l),(o.stencil||o.depth)&&this._resizeStencil(l)}_initColor(o,l){let f=this._renderer,v=f.gl,b=v.createFramebuffer();if(l.resolveTargetFramebuffer=b,v.bindFramebuffer(v.FRAMEBUFFER,b),l.width=o.colorTexture.source.pixelWidth,l.height=o.colorTexture.source.pixelHeight,o.colorTextures.forEach((T,S)=>{let R=T.source;R.antialias&&(f.context.supports.msaa?l.msaa=!0:Gt("[RenderTexture] Antialiasing on textures is not supported in WebGL1")),f.texture.bindSource(R,0);let U=f.texture.getGlSource(R).texture;v.framebufferTexture2D(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0+S,3553,U,0)}),l.msaa){let T=v.createFramebuffer();l.framebuffer=T,v.bindFramebuffer(v.FRAMEBUFFER,T),o.colorTextures.forEach((S,R)=>{let U=v.createRenderbuffer();l.msaaRenderBuffer[R]=U})}else l.framebuffer=b;this._resizeColor(o,l)}_resizeColor(o,l){let f=o.colorTexture.source;if(l.width=f.pixelWidth,l.height=f.pixelHeight,o.colorTextures.forEach((v,b)=>{b!==0&&v.source.resize(f.width,f.height,f._resolution)}),l.msaa){let v=this._renderer,b=v.gl,T=l.framebuffer;b.bindFramebuffer(b.FRAMEBUFFER,T),o.colorTextures.forEach((S,R)=>{let U=S.source;v.texture.bindSource(U,0);let W=v.texture.getGlSource(U).internalFormat,K=l.msaaRenderBuffer[R];b.bindRenderbuffer(b.RENDERBUFFER,K),b.renderbufferStorageMultisample(b.RENDERBUFFER,4,W,U.pixelWidth,U.pixelHeight),b.framebufferRenderbuffer(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0+R,b.RENDERBUFFER,K)})}}_initStencil(o){if(o.framebuffer===null)return;let l=this._renderer.gl,f=l.createRenderbuffer();o.depthStencilRenderBuffer=f,l.bindRenderbuffer(l.RENDERBUFFER,f),l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_STENCIL_ATTACHMENT,l.RENDERBUFFER,f),this._resizeStencil(o)}_resizeStencil(o){let l=this._renderer.gl;l.bindRenderbuffer(l.RENDERBUFFER,o.depthStencilRenderBuffer),o.msaa?l.renderbufferStorageMultisample(l.RENDERBUFFER,4,l.DEPTH24_STENCIL8,o.width,o.height):l.renderbufferStorage(l.RENDERBUFFER,this._renderer.context.webGLVersion===2?l.DEPTH24_STENCIL8:l.DEPTH_STENCIL,o.width,o.height)}prerender(o){let l=o.colorTexture.resource;this._renderer.context.multiView&&Ra.test(l)&&this._renderer.context.ensureCanvasSize(l)}postrender(o){if(this._renderer.context.multiView&&Ra.test(o.colorTexture.resource)){let l=this._renderer.context.canvas,f=o.colorTexture;f.context2D.drawImage(l,0,f.pixelHeight-l.height)}}}}),aE,Cc=D(()=>{Ot(),bM(),Nr(),aE=class extends FT{constructor(o){super(o),this.adaptor=new Bh,this.adaptor.init(o,this)}},aE.extension={type:[Ke.WebGLSystem],name:"renderTarget"}});function x$(o,l){let f=[],v=[`
        var g = s.groups;
        var sS = r.shader;
        var p = s.glProgram;
        var ugS = r.uniformGroup;
        var resources;
    `],b=!1,T=0,S=l._getProgramData(o.glProgram);for(let U in o.groups){let W=o.groups[U];f.push(`
            resources = g[${U}].resources;
        `);for(let K in W.resources){let ee=W.resources[K];if(ee instanceof il)if(ee.ubo){let se=o._uniformBindMap[U][Number(K)];f.push(`
                        sS.bindUniformBlock(
                            resources[${K}],
                            '${se}',
                            ${o.glProgram._uniformBlockData[se].index}
                        );
                    `)}else f.push(`
                        ugS.updateUniformGroup(resources[${K}], p, sD);
                    `);else if(ee instanceof Q4){let se=o._uniformBindMap[U][Number(K)];f.push(`
                    sS.bindUniformBlock(
                        resources[${K}],
                        '${se}',
                        ${o.glProgram._uniformBlockData[se].index}
                    );
                `)}else if(ee instanceof Ha){let se=o._uniformBindMap[U][K],re=S.uniformData[se];re&&(b||(b=!0,v.push(`
                        var tS = r.texture;
                        `)),l._gl.uniform1i(re.location,T),f.push(`
                        tS.bind(resources[${K}], ${T});
                    `),T++)}}}let R=[...v,...f].join(`
`);return new Function("r","s","sD",R)}var B2=D(()=>{OT(),vl(),xo()}),P2,jM=D(()=>{"use strict";P2=class{constructor(o,l){this.program=o,this.uniformData=l,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBlockBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBlockBindings=null,this.program=null}}});function _0(o,l,f){let v=o.createShader(l);return o.shaderSource(v,f),o.compileShader(v),v}var HM=D(()=>{"use strict"});function sE(o){let l=new Array(o);for(let f=0;f<l.length;f++)l[f]=!1;return l}function VM(o,l){switch(o){case"float":return 0;case"vec2":return new Float32Array(2*l);case"vec3":return new Float32Array(3*l);case"vec4":return new Float32Array(4*l);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*l);case"ivec3":return new Int32Array(3*l);case"ivec4":return new Int32Array(4*l);case"uvec2":return new Uint32Array(2*l);case"uvec3":return new Uint32Array(3*l);case"uvec4":return new Uint32Array(4*l);case"bool":return!1;case"bvec2":return sE(2*l);case"bvec3":return sE(3*l);case"bvec4":return sE(4*l);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var oE=D(()=>{"use strict"});function w0(o,l){if(!k0){let f=Object.keys(a3);k0={};for(let v=0;v<f.length;++v){let b=f[v];k0[o[b]]=a3[b]}}return k0[l]}function WM(o,l){let f=w0(o,l);return F2[f]||"float32"}var k0,a3,F2,al=D(()=>{"use strict";k0=null,a3={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"},F2={float:"float32",vec2:"float32x2",vec3:"float32x3",vec4:"float32x4",int:"sint32",ivec2:"sint32x2",ivec3:"sint32x3",ivec4:"sint32x4",uint:"uint32",uvec2:"uint32x2",uvec3:"uint32x3",uvec4:"uint32x4",bool:"uint32",bvec2:"uint32x2",bvec3:"uint32x3",bvec4:"uint32x4"}});function YM(o,l,f=!1){let v={},b=l.getProgramParameter(o,l.ACTIVE_ATTRIBUTES);for(let S=0;S<b;S++){let R=l.getActiveAttrib(o,S);if(R.name.startsWith("gl_"))continue;let U=WM(l,R.type);v[R.name]={location:0,format:U,stride:ih(U).stride,offset:0,instance:!1,start:0}}let T=Object.keys(v);if(f){T.sort((S,R)=>S>R?1:-1);for(let S=0;S<T.length;S++)v[T[S]].location=S,l.bindAttribLocation(o,S,T[S]);l.linkProgram(o)}else for(let S=0;S<T.length;S++)v[T[S]].location=l.getAttribLocation(o,T[S]);return v}var b$=D(()=>{kp(),al()});function qM(o,l){if(!l.ACTIVE_UNIFORM_BLOCKS)return{};let f={},v=l.getProgramParameter(o,l.ACTIVE_UNIFORM_BLOCKS);for(let b=0;b<v;b++){let T=l.getActiveUniformBlockName(o,b),S=l.getUniformBlockIndex(o,T),R=l.getActiveUniformBlockParameter(o,b,l.UNIFORM_BLOCK_DATA_SIZE);f[T]={name:T,index:S,size:R}}return f}var s3=D(()=>{"use strict"});function Jp(o,l){let f={},v=l.getProgramParameter(o,l.ACTIVE_UNIFORMS);for(let b=0;b<v;b++){let T=l.getActiveUniform(o,b),S=T.name.replace(/\[.*?\]$/,""),R=!!T.name.match(/\[.*?\]$/),U=w0(l,T.type);f[S]={name:S,index:b,type:U,size:T.size,isArray:R,value:VM(U,T.size)}}return f}var ef=D(()=>{oE(),al()});function lE(o,l){let f=o.getShaderSource(l).split(`
`).map((W,K)=>`${K}: ${W}`),v=o.getShaderInfoLog(l),b=v.split(`
`),T={},S=b.map(W=>parseFloat(W.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(W=>W&&!T[W]?(T[W]=!0,!0):!1),R=[""];S.forEach(W=>{f[W-1]=`%c${f[W-1]}%c`,R.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});let U=f.join(`
`);R[0]=U,console.error(v),console.groupCollapsed("click to view full shader code"),console.warn(...R),console.groupEnd()}function XM(o,l,f,v){o.getProgramParameter(l,o.LINK_STATUS)||(o.getShaderParameter(f,o.COMPILE_STATUS)||lE(o,f),o.getShaderParameter(v,o.COMPILE_STATUS)||lE(o,v),console.error("PixiJS Error: Could not initialize shader."),o.getProgramInfoLog(l)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",o.getProgramInfoLog(l)))}var _$=D(()=>{"use strict"});function Ph(o,l){let f=_0(o,o.VERTEX_SHADER,l.vertex),v=_0(o,o.FRAGMENT_SHADER,l.fragment),b=o.createProgram();o.attachShader(b,f),o.attachShader(b,v);let T=l.transformFeedbackVaryings;T&&(typeof o.transformFeedbackVaryings!="function"?Gt("TransformFeedback is not supported but TransformFeedbackVaryings are given."):o.transformFeedbackVaryings(b,T.names,T.bufferMode==="separate"?o.SEPARATE_ATTRIBS:o.INTERLEAVED_ATTRIBS)),o.linkProgram(b),o.getProgramParameter(b,o.LINK_STATUS)||XM(o,b,f,v),l._attributeData=YM(b,o,!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(l.vertex)),l._uniformData=Jp(b,o),l._uniformBlockData=qM(b,o),o.deleteShader(f),o.deleteShader(v);let S={};for(let R in l._uniformData){let U=l._uniformData[R];S[R]={location:o.getUniformLocation(b,R),value:VM(U.type,U.size)}}return new P2(b,S)}var KM=D(()=>{Ar(),jM(),HM(),oE(),b$(),s3(),ef(),_$()}),T0,$2,_1=D(()=>{Ot(),au(),B2(),KM(),T0={textureCount:0,blockIndex:0},$2=class{constructor(o){this._activeProgram=null,this._programDataHash=Object.create(null),this._shaderSyncFunctions=Object.create(null),this._renderer=o,this._renderer.renderableGC.addManagedHash(this,"_programDataHash")}contextChange(o){this._gl=o,this._programDataHash=Object.create(null),this._shaderSyncFunctions=Object.create(null),this._activeProgram=null,this.maxTextures=sd()}bind(o,l){if(this._setProgram(o.glProgram),l)return;T0.textureCount=0,T0.blockIndex=0;let f=this._shaderSyncFunctions[o.glProgram._key];f||(f=this._shaderSyncFunctions[o.glProgram._key]=this._generateShaderSync(o,this)),this._renderer.buffer.nextBindBase(!!o.glProgram.transformFeedbackVaryings),f(this._renderer,o,T0)}updateUniformGroup(o){this._renderer.uniformGroup.updateUniformGroup(o,this._activeProgram,T0)}bindUniformBlock(o,l,f=0){let v=this._renderer.buffer,b=this._getProgramData(this._activeProgram),T=o._bufferResource;T||this._renderer.ubo.updateUniformGroup(o);let S=o.buffer,R=v.updateBuffer(S),U=v.freeLocationForBufferBase(R);if(T){let{offset:K,size:ee}=o;K===0&&ee===S.data.byteLength?v.bindBufferBase(R,U):v.bindBufferRange(R,U,K)}else v.getLastBindBaseLocation(R)!==U&&v.bindBufferBase(R,U);let W=this._activeProgram._uniformBlockData[l].index;b.uniformBlockBindings[f]!==U&&(b.uniformBlockBindings[f]=U,this._renderer.gl.uniformBlockBinding(b.program,W,U))}_setProgram(o){if(this._activeProgram===o)return;this._activeProgram=o;let l=this._getProgramData(o);this._gl.useProgram(l.program)}_getProgramData(o){return this._programDataHash[o._key]||this._createProgramData(o)}_createProgramData(o){let l=o._key;return this._programDataHash[l]=Ph(this._gl,o),this._programDataHash[l]}destroy(){for(let o of Object.keys(this._programDataHash))this._programDataHash[o].destroy(),this._programDataHash[o]=null;this._programDataHash=null}_generateShaderSync(o,l){return x$(o,l)}},$2.extension={type:[Ke.WebGLSystem],name:"shader"}}),w1,E0,k1=D(()=>{"use strict";w1={f32:`if (cv !== v) {
            cu.value = v;
            gl.uniform1f(location, v);
        }`,"vec2<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2f(location, v[0], v[1]);
        }`,"vec3<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3f(location, v[0], v[1], v[2]);
        }`,"vec4<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4f(location, v[0], v[1], v[2], v[3]);
        }`,i32:`if (cv !== v) {
            cu.value = v;
            gl.uniform1i(location, v);
        }`,"vec2<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2i(location, v[0], v[1]);
        }`,"vec3<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3i(location, v[0], v[1], v[2]);
        }`,"vec4<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4i(location, v[0], v[1], v[2], v[3]);
        }`,u32:`if (cv !== v) {
            cu.value = v;
            gl.uniform1ui(location, v);
        }`,"vec2<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2ui(location, v[0], v[1]);
        }`,"vec3<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3ui(location, v[0], v[1], v[2]);
        }`,"vec4<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
        }`,bool:`if (cv !== v) {
            cu.value = v;
            gl.uniform1i(location, v);
        }`,"vec2<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2i(location, v[0], v[1]);
        }`,"vec3<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3i(location, v[0], v[1], v[2]);
        }`,"vec4<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4i(location, v[0], v[1], v[2], v[3]);
        }`,"mat2x2<f32>":"gl.uniformMatrix2fv(location, false, v);","mat3x3<f32>":"gl.uniformMatrix3fv(location, false, v);","mat4x4<f32>":"gl.uniformMatrix4fv(location, false, v);"},E0={f32:"gl.uniform1fv(location, v);","vec2<f32>":"gl.uniform2fv(location, v);","vec3<f32>":"gl.uniform3fv(location, v);","vec4<f32>":"gl.uniform4fv(location, v);","mat2x2<f32>":"gl.uniformMatrix2fv(location, false, v);","mat3x3<f32>":"gl.uniformMatrix3fv(location, false, v);","mat4x4<f32>":"gl.uniformMatrix4fv(location, false, v);",i32:"gl.uniform1iv(location, v);","vec2<i32>":"gl.uniform2iv(location, v);","vec3<i32>":"gl.uniform3iv(location, v);","vec4<i32>":"gl.uniform4iv(location, v);",u32:"gl.uniform1iv(location, v);","vec2<u32>":"gl.uniform2iv(location, v);","vec3<u32>":"gl.uniform3iv(location, v);","vec4<u32>":"gl.uniform4iv(location, v);",bool:"gl.uniform1iv(location, v);","vec2<bool>":"gl.uniform2iv(location, v);","vec3<bool>":"gl.uniform3iv(location, v);","vec4<bool>":"gl.uniform4iv(location, v);"}});function Fh(o,l){let f=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
        var name = null;
    `];for(let v in o.uniforms){if(!l[v]){o.uniforms[v]instanceof il?o.uniforms[v].ubo?f.push(`
                        renderer.shader.bindUniformBlock(uv.${v}, "${v}");
                    `):f.push(`
                        renderer.shader.updateUniformGroup(uv.${v});
                    `):o.uniforms[v]instanceof Q4&&f.push(`
                        renderer.shader.bindBufferResource(uv.${v}, "${v}");
                    `);continue}let b=o.uniformStructures[v],T=!1;for(let S=0;S<b0.length;S++){let R=b0[S];if(b.type===R.type&&R.test(b)){f.push(`name = "${v}";`,b0[S].uniform),T=!0;break}}if(!T){let S=(b.size===1?w1:E0)[b.type].replace("location",`ud["${v}"].location`);f.push(`
            cu = ud["${v}"];
            cv = cu.value;
            v = uv["${v}"];
            ${S};`)}}return new Function("ud","uv","renderer","syncData",f.join(`
`))}var ZM=D(()=>{OT(),vl(),pM(),k1()}),o3,QM=D(()=>{Ot(),ZM(),o3=class{constructor(o){this._cache={},this._uniformGroupSyncHash={},this._renderer=o,this.gl=null,this._cache={}}contextChange(o){this.gl=o}updateUniformGroup(o,l,f){let v=this._renderer.shader._getProgramData(l);(!o.isStatic||o._dirtyId!==v.uniformDirtyGroups[o.uid])&&(v.uniformDirtyGroups[o.uid]=o._dirtyId,this._getUniformSyncFunction(o,l)(v.uniformData,o.uniforms,this._renderer,f))}_getUniformSyncFunction(o,l){return this._uniformGroupSyncHash[o._signature]?.[l._key]||this._createUniformSyncFunction(o,l)}_createUniformSyncFunction(o,l){let f=this._uniformGroupSyncHash[o._signature]||(this._uniformGroupSyncHash[o._signature]={}),v=this._getSignature(o,l._uniformData,"u");return this._cache[v]||(this._cache[v]=this._generateUniformsSync(o,l._uniformData)),f[l._key]=this._cache[v],f[l._key]}_generateUniformsSync(o,l){return Fh(o,l)}_getSignature(o,l,f){let v=o.uniforms,b=[`${f}-`];for(let T in v)b.push(T),l[T]&&b.push(l[T].type);return b.join("-")}destroy(){this._renderer=null,this._cache=null}},o3.extension={type:[Ke.WebGLSystem],name:"uniformGroup"}});function JM(o){let l={};if(l.normal=[o.ONE,o.ONE_MINUS_SRC_ALPHA],l.add=[o.ONE,o.ONE],l.multiply=[o.DST_COLOR,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE_MINUS_SRC_ALPHA],l.screen=[o.ONE,o.ONE_MINUS_SRC_COLOR,o.ONE,o.ONE_MINUS_SRC_ALPHA],l.none=[0,0],l["normal-npm"]=[o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE_MINUS_SRC_ALPHA],l["add-npm"]=[o.SRC_ALPHA,o.ONE,o.ONE,o.ONE],l["screen-npm"]=[o.SRC_ALPHA,o.ONE_MINUS_SRC_COLOR,o.ONE,o.ONE_MINUS_SRC_ALPHA],l.erase=[o.ZERO,o.ONE_MINUS_SRC_ALPHA],!(o instanceof Ya.get().getWebGLRenderingContext()))l.min=[o.ONE,o.ONE,o.ONE,o.ONE,o.MIN,o.MIN],l.max=[o.ONE,o.ONE,o.ONE,o.ONE,o.MAX,o.MAX];else{let f=o.getExtension("EXT_blend_minmax");f&&(l.min=[o.ONE,o.ONE,o.ONE,o.ONE,f.MIN_EXT,f.MIN_EXT],l.max=[o.ONE,o.ONE,o.ONE,o.ONE,f.MAX_EXT,f.MAX_EXT])}return l}var eL=D(()=>{Ye()}),uE,hE,l3,cE,dE,pE,fE,gE,w$=D(()=>{Ot(),Ih(),eL(),uE=0,hE=1,l3=2,cE=3,dE=4,pE=5,fE=class kte{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode="none",this._blendEq=!1,this.map=[],this.map[uE]=this.setBlend,this.map[hE]=this.setOffset,this.map[l3]=this.setCullFace,this.map[cE]=this.setDepthTest,this.map[dE]=this.setFrontFace,this.map[pE]=this.setDepthMask,this.checks=[],this.defaultState=Cu.for2d()}contextChange(l){this.gl=l,this.blendModesMap=JM(l),this.reset()}set(l){if(l=l||this.defaultState,this.stateId!==l.data){let f=this.stateId^l.data,v=0;for(;f;)f&1&&this.map[v].call(this,!!(l.data&1<<v)),f=f>>1,v++;this.stateId=l.data}for(let f=0;f<this.checks.length;f++)this.checks[f](this,l)}forceState(l){l=l||this.defaultState;for(let f=0;f<this.map.length;f++)this.map[f].call(this,!!(l.data&1<<f));for(let f=0;f<this.checks.length;f++)this.checks[f](this,l);this.stateId=l.data}setBlend(l){this._updateCheck(kte._checkBlendMode,l),this.gl[l?"enable":"disable"](this.gl.BLEND)}setOffset(l){this._updateCheck(kte._checkPolygonOffset,l),this.gl[l?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(l){this.gl[l?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(l){this.gl.depthMask(l)}setCullFace(l){this.gl[l?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(l){this.gl.frontFace(this.gl[l?"CW":"CCW"])}setBlendMode(l){if(this.blendModesMap[l]||(l="normal"),l===this.blendMode)return;this.blendMode=l;let f=this.blendModesMap[l],v=this.gl;f.length===2?v.blendFunc(f[0],f[1]):v.blendFuncSeparate(f[0],f[1],f[2],f[3]),f.length===6?(this._blendEq=!0,v.blendEquationSeparate(f[4],f[5])):this._blendEq&&(this._blendEq=!1,v.blendEquationSeparate(v.FUNC_ADD,v.FUNC_ADD))}setPolygonOffset(l,f){this.gl.polygonOffset(l,f)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode="",this.setBlendMode("normal")}_updateCheck(l,f){let v=this.checks.indexOf(l);f&&v===-1?this.checks.push(l):!f&&v!==-1&&this.checks.splice(v,1)}static _checkBlendMode(l,f){l.setBlendMode(f.blendMode)}static _checkPolygonOffset(l,f){l.setPolygonOffset(1,f.polygonOffset)}destroy(){this.gl=null,this.checks.length=0}},fE.extension={type:[Ke.WebGLSystem],name:"state"},gE=fE}),$h,mE=D(()=>{PM(),$h=class{constructor(o){this.target=QT.TEXTURE_2D,this.texture=o,this.width=-1,this.height=-1,this.type=La.UNSIGNED_BYTE,this.internalFormat=t3.RGBA,this.format=t3.RGBA,this.samplerType=0}}}),u3,yE=D(()=>{"use strict";u3={id:"buffer",upload(o,l,f){l.width===o.width||l.height===o.height?f.texSubImage2D(f.TEXTURE_2D,0,0,0,o.width,o.height,l.format,l.type,o.resource):f.texImage2D(l.target,0,l.internalFormat,o.width,o.height,0,l.format,l.type,o.resource),l.width=o.width,l.height=o.height}}}),h3,tL,vE=D(()=>{"use strict";h3={"bc1-rgba-unorm":!0,"bc1-rgba-unorm-srgb":!0,"bc2-rgba-unorm":!0,"bc2-rgba-unorm-srgb":!0,"bc3-rgba-unorm":!0,"bc3-rgba-unorm-srgb":!0,"bc4-r-unorm":!0,"bc4-r-snorm":!0,"bc5-rg-unorm":!0,"bc5-rg-snorm":!0,"bc6h-rgb-ufloat":!0,"bc6h-rgb-float":!0,"bc7-rgba-unorm":!0,"bc7-rgba-unorm-srgb":!0,"etc2-rgb8unorm":!0,"etc2-rgb8unorm-srgb":!0,"etc2-rgb8a1unorm":!0,"etc2-rgb8a1unorm-srgb":!0,"etc2-rgba8unorm":!0,"etc2-rgba8unorm-srgb":!0,"eac-r11unorm":!0,"eac-r11snorm":!0,"eac-rg11unorm":!0,"eac-rg11snorm":!0,"astc-4x4-unorm":!0,"astc-4x4-unorm-srgb":!0,"astc-5x4-unorm":!0,"astc-5x4-unorm-srgb":!0,"astc-5x5-unorm":!0,"astc-5x5-unorm-srgb":!0,"astc-6x5-unorm":!0,"astc-6x5-unorm-srgb":!0,"astc-6x6-unorm":!0,"astc-6x6-unorm-srgb":!0,"astc-8x5-unorm":!0,"astc-8x5-unorm-srgb":!0,"astc-8x6-unorm":!0,"astc-8x6-unorm-srgb":!0,"astc-8x8-unorm":!0,"astc-8x8-unorm-srgb":!0,"astc-10x5-unorm":!0,"astc-10x5-unorm-srgb":!0,"astc-10x6-unorm":!0,"astc-10x6-unorm-srgb":!0,"astc-10x8-unorm":!0,"astc-10x8-unorm-srgb":!0,"astc-10x10-unorm":!0,"astc-10x10-unorm-srgb":!0,"astc-12x10-unorm":!0,"astc-12x10-unorm-srgb":!0,"astc-12x12-unorm":!0,"astc-12x12-unorm-srgb":!0},tL={id:"compressed",upload(o,l,f){f.pixelStorei(f.UNPACK_ALIGNMENT,4);let v=o.pixelWidth,b=o.pixelHeight,T=!!h3[o.format];for(let S=0;S<o.resource.length;S++){let R=o.resource[S];T?f.compressedTexImage2D(f.TEXTURE_2D,S,l.internalFormat,v,b,0,R):f.texImage2D(f.TEXTURE_2D,S,l.internalFormat,v,b,0,l.format,l.type,R),v=Math.max(v>>1,1),b=Math.max(b>>1,1)}}}}),zh,xE=D(()=>{"use strict";zh={id:"image",upload(o,l,f,v){let b=o.alphaMode==="premultiply-alpha-on-upload";f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,b);let T=l.width,S=l.height,R=o.pixelWidth,U=o.pixelHeight,W=o.resourceWidth,K=o.resourceHeight;W<R||K<U?((T!==R||S!==U)&&f.texImage2D(l.target,0,l.internalFormat,R,U,0,l.format,l.type,null),v===2?f.texSubImage2D(f.TEXTURE_2D,0,0,0,W,K,l.format,l.type,o.resource):f.texSubImage2D(f.TEXTURE_2D,0,0,0,l.format,l.type,o.resource)):T===R||S===U?f.texSubImage2D(f.TEXTURE_2D,0,0,0,l.format,l.type,o.resource):v===2?f.texImage2D(l.target,0,l.internalFormat,R,U,0,l.format,l.type,o.resource):f.texImage2D(l.target,0,l.internalFormat,l.format,l.type,o.resource),l.width=R,l.height=U}}}),T1,bE=D(()=>{xE(),T1={id:"video",upload(o,l,f,v){if(!o.isValid){f.texImage2D(l.target,0,l.internalFormat,1,1,0,l.format,l.type,null);return}zh.upload(o,l,f,v)}}}),z2,c3,E1,C0,_E=D(()=>{"use strict";z2={linear:9729,nearest:9728},c3={linear:{linear:9987,nearest:9985},nearest:{linear:9986,nearest:9984}},E1={"clamp-to-edge":33071,repeat:10497,"mirror-repeat":33648},C0={never:512,less:513,equal:514,"less-equal":515,greater:516,"not-equal":517,"greater-equal":518,always:519}});function wE(o,l,f,v,b,T,S,R){let U=T;if(!R||o.addressModeU!=="repeat"||o.addressModeV!=="repeat"||o.addressModeW!=="repeat"){let W=E1[S?"clamp-to-edge":o.addressModeU],K=E1[S?"clamp-to-edge":o.addressModeV],ee=E1[S?"clamp-to-edge":o.addressModeW];l[b](U,l.TEXTURE_WRAP_S,W),l[b](U,l.TEXTURE_WRAP_T,K),l.TEXTURE_WRAP_R&&l[b](U,l.TEXTURE_WRAP_R,ee)}if((!R||o.magFilter!=="linear")&&l[b](U,l.TEXTURE_MAG_FILTER,z2[o.magFilter]),f){if(!R||o.mipmapFilter!=="linear"){let W=c3[o.minFilter][o.mipmapFilter];l[b](U,l.TEXTURE_MIN_FILTER,W)}}else l[b](U,l.TEXTURE_MIN_FILTER,z2[o.minFilter]);if(v&&o.maxAnisotropy>1){let W=Math.min(o.maxAnisotropy,l.getParameter(v.MAX_TEXTURE_MAX_ANISOTROPY_EXT));l[b](U,v.TEXTURE_MAX_ANISOTROPY_EXT,W)}o.compare&&l[b](U,l.TEXTURE_COMPARE_FUNC,C0[o.compare])}var k$=D(()=>{_E()});function G2(o){return{r8unorm:o.RED,r8snorm:o.RED,r8uint:o.RED,r8sint:o.RED,r16uint:o.RED,r16sint:o.RED,r16float:o.RED,rg8unorm:o.RG,rg8snorm:o.RG,rg8uint:o.RG,rg8sint:o.RG,r32uint:o.RED,r32sint:o.RED,r32float:o.RED,rg16uint:o.RG,rg16sint:o.RG,rg16float:o.RG,rgba8unorm:o.RGBA,"rgba8unorm-srgb":o.RGBA,rgba8snorm:o.RGBA,rgba8uint:o.RGBA,rgba8sint:o.RGBA,bgra8unorm:o.RGBA,"bgra8unorm-srgb":o.RGBA,rgb9e5ufloat:o.RGB,rgb10a2unorm:o.RGBA,rg11b10ufloat:o.RGB,rg32uint:o.RG,rg32sint:o.RG,rg32float:o.RG,rgba16uint:o.RGBA,rgba16sint:o.RGBA,rgba16float:o.RGBA,rgba32uint:o.RGBA,rgba32sint:o.RGBA,rgba32float:o.RGBA,stencil8:o.STENCIL_INDEX8,depth16unorm:o.DEPTH_COMPONENT,depth24plus:o.DEPTH_COMPONENT,"depth24plus-stencil8":o.DEPTH_STENCIL,depth32float:o.DEPTH_COMPONENT,"depth32float-stencil8":o.DEPTH_STENCIL}}var rL=D(()=>{"use strict"});function T$(o,l){let f={},v=o.RGBA;return o instanceof Ya.get().getWebGLRenderingContext()?l.srgb&&(f={"rgba8unorm-srgb":l.srgb.SRGB8_ALPHA8_EXT,"bgra8unorm-srgb":l.srgb.SRGB8_ALPHA8_EXT}):(f={"rgba8unorm-srgb":o.SRGB8_ALPHA8,"bgra8unorm-srgb":o.SRGB8_ALPHA8},v=o.RGBA8),{r8unorm:o.R8,r8snorm:o.R8_SNORM,r8uint:o.R8UI,r8sint:o.R8I,r16uint:o.R16UI,r16sint:o.R16I,r16float:o.R16F,rg8unorm:o.RG8,rg8snorm:o.RG8_SNORM,rg8uint:o.RG8UI,rg8sint:o.RG8I,r32uint:o.R32UI,r32sint:o.R32I,r32float:o.R32F,rg16uint:o.RG16UI,rg16sint:o.RG16I,rg16float:o.RG16F,rgba8unorm:o.RGBA,...f,rgba8snorm:o.RGBA8_SNORM,rgba8uint:o.RGBA8UI,rgba8sint:o.RGBA8I,bgra8unorm:v,rgb9e5ufloat:o.RGB9_E5,rgb10a2unorm:o.RGB10_A2,rg11b10ufloat:o.R11F_G11F_B10F,rg32uint:o.RG32UI,rg32sint:o.RG32I,rg32float:o.RG32F,rgba16uint:o.RGBA16UI,rgba16sint:o.RGBA16I,rgba16float:o.RGBA16F,rgba32uint:o.RGBA32UI,rgba32sint:o.RGBA32I,rgba32float:o.RGBA32F,stencil8:o.STENCIL_INDEX8,depth16unorm:o.DEPTH_COMPONENT16,depth24plus:o.DEPTH_COMPONENT24,"depth24plus-stencil8":o.DEPTH24_STENCIL8,depth32float:o.DEPTH_COMPONENT32F,"depth32float-stencil8":o.DEPTH32F_STENCIL8,...l.s3tc?{"bc1-rgba-unorm":l.s3tc.COMPRESSED_RGBA_S3TC_DXT1_EXT,"bc2-rgba-unorm":l.s3tc.COMPRESSED_RGBA_S3TC_DXT3_EXT,"bc3-rgba-unorm":l.s3tc.COMPRESSED_RGBA_S3TC_DXT5_EXT}:{},...l.s3tc_sRGB?{"bc1-rgba-unorm-srgb":l.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,"bc2-rgba-unorm-srgb":l.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,"bc3-rgba-unorm-srgb":l.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}:{},...l.rgtc?{"bc4-r-unorm":l.rgtc.COMPRESSED_RED_RGTC1_EXT,"bc4-r-snorm":l.rgtc.COMPRESSED_SIGNED_RED_RGTC1_EXT,"bc5-rg-unorm":l.rgtc.COMPRESSED_RED_GREEN_RGTC2_EXT,"bc5-rg-snorm":l.rgtc.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}:{},...l.bptc?{"bc6h-rgb-float":l.bptc.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,"bc6h-rgb-ufloat":l.bptc.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,"bc7-rgba-unorm":l.bptc.COMPRESSED_RGBA_BPTC_UNORM_EXT,"bc7-rgba-unorm-srgb":l.bptc.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT}:{},...l.etc?{"etc2-rgb8unorm":l.etc.COMPRESSED_RGB8_ETC2,"etc2-rgb8unorm-srgb":l.etc.COMPRESSED_SRGB8_ETC2,"etc2-rgb8a1unorm":l.etc.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2,"etc2-rgb8a1unorm-srgb":l.etc.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2,"etc2-rgba8unorm":l.etc.COMPRESSED_RGBA8_ETC2_EAC,"etc2-rgba8unorm-srgb":l.etc.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC,"eac-r11unorm":l.etc.COMPRESSED_R11_EAC,"eac-rg11unorm":l.etc.COMPRESSED_SIGNED_RG11_EAC}:{},...l.astc?{"astc-4x4-unorm":l.astc.COMPRESSED_RGBA_ASTC_4x4_KHR,"astc-4x4-unorm-srgb":l.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR,"astc-5x4-unorm":l.astc.COMPRESSED_RGBA_ASTC_5x4_KHR,"astc-5x4-unorm-srgb":l.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR,"astc-5x5-unorm":l.astc.COMPRESSED_RGBA_ASTC_5x5_KHR,"astc-5x5-unorm-srgb":l.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR,"astc-6x5-unorm":l.astc.COMPRESSED_RGBA_ASTC_6x5_KHR,"astc-6x5-unorm-srgb":l.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR,"astc-6x6-unorm":l.astc.COMPRESSED_RGBA_ASTC_6x6_KHR,"astc-6x6-unorm-srgb":l.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR,"astc-8x5-unorm":l.astc.COMPRESSED_RGBA_ASTC_8x5_KHR,"astc-8x5-unorm-srgb":l.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR,"astc-8x6-unorm":l.astc.COMPRESSED_RGBA_ASTC_8x6_KHR,"astc-8x6-unorm-srgb":l.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR,"astc-8x8-unorm":l.astc.COMPRESSED_RGBA_ASTC_8x8_KHR,"astc-8x8-unorm-srgb":l.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR,"astc-10x5-unorm":l.astc.COMPRESSED_RGBA_ASTC_10x5_KHR,"astc-10x5-unorm-srgb":l.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR,"astc-10x6-unorm":l.astc.COMPRESSED_RGBA_ASTC_10x6_KHR,"astc-10x6-unorm-srgb":l.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR,"astc-10x8-unorm":l.astc.COMPRESSED_RGBA_ASTC_10x8_KHR,"astc-10x8-unorm-srgb":l.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR,"astc-10x10-unorm":l.astc.COMPRESSED_RGBA_ASTC_10x10_KHR,"astc-10x10-unorm-srgb":l.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR,"astc-12x10-unorm":l.astc.COMPRESSED_RGBA_ASTC_12x10_KHR,"astc-12x10-unorm-srgb":l.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR,"astc-12x12-unorm":l.astc.COMPRESSED_RGBA_ASTC_12x12_KHR,"astc-12x12-unorm-srgb":l.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR}:{}}}var iL=D(()=>{Ye()});function E$(o){return{r8unorm:o.UNSIGNED_BYTE,r8snorm:o.BYTE,r8uint:o.UNSIGNED_BYTE,r8sint:o.BYTE,r16uint:o.UNSIGNED_SHORT,r16sint:o.SHORT,r16float:o.HALF_FLOAT,rg8unorm:o.UNSIGNED_BYTE,rg8snorm:o.BYTE,rg8uint:o.UNSIGNED_BYTE,rg8sint:o.BYTE,r32uint:o.UNSIGNED_INT,r32sint:o.INT,r32float:o.FLOAT,rg16uint:o.UNSIGNED_SHORT,rg16sint:o.SHORT,rg16float:o.HALF_FLOAT,rgba8unorm:o.UNSIGNED_BYTE,"rgba8unorm-srgb":o.UNSIGNED_BYTE,rgba8snorm:o.BYTE,rgba8uint:o.UNSIGNED_BYTE,rgba8sint:o.BYTE,bgra8unorm:o.UNSIGNED_BYTE,"bgra8unorm-srgb":o.UNSIGNED_BYTE,rgb9e5ufloat:o.UNSIGNED_INT_5_9_9_9_REV,rgb10a2unorm:o.UNSIGNED_INT_2_10_10_10_REV,rg11b10ufloat:o.UNSIGNED_INT_10F_11F_11F_REV,rg32uint:o.UNSIGNED_INT,rg32sint:o.INT,rg32float:o.FLOAT,rgba16uint:o.UNSIGNED_SHORT,rgba16sint:o.SHORT,rgba16float:o.HALF_FLOAT,rgba32uint:o.UNSIGNED_INT,rgba32sint:o.INT,rgba32float:o.FLOAT,stencil8:o.UNSIGNED_BYTE,depth16unorm:o.UNSIGNED_SHORT,depth24plus:o.UNSIGNED_INT,"depth24plus-stencil8":o.UNSIGNED_INT_24_8,depth32float:o.FLOAT,"depth32float-stencil8":o.FLOAT_32_UNSIGNED_INT_24_8_REV}}var C$=D(()=>{"use strict"}),C1,d3,nL=D(()=>{Ye(),Ot(),os(),mE(),yE(),vE(),xE(),bE(),k$(),rL(),iL(),C$(),C1=4,d3=class{constructor(o){this.managedTextures=[],this._glTextures=Object.create(null),this._glSamplers=Object.create(null),this._boundTextures=[],this._activeTextureLocation=-1,this._boundSamplers=Object.create(null),this._uploads={image:zh,buffer:u3,video:T1,compressed:tL},this._useSeparateSamplers=!1,this._renderer=o,this._renderer.renderableGC.addManagedHash(this,"_glTextures"),this._renderer.renderableGC.addManagedHash(this,"_glSamplers")}contextChange(o){this._gl=o,this._mapFormatToInternalFormat||(this._mapFormatToInternalFormat=T$(o,this._renderer.context.extensions),this._mapFormatToType=E$(o),this._mapFormatToFormat=G2(o)),this._glTextures=Object.create(null),this._glSamplers=Object.create(null),this._boundSamplers=Object.create(null);for(let l=0;l<16;l++)this.bind(fn.EMPTY,l)}initSource(o){this.bind(o)}bind(o,l=0){let f=o.source;o?(this.bindSource(f,l),this._useSeparateSamplers&&this._bindSampler(f.style,l)):(this.bindSource(null,l),this._useSeparateSamplers&&this._bindSampler(null,l))}bindSource(o,l=0){let f=this._gl;if(o._touched=this._renderer.textureGC.count,this._boundTextures[l]!==o){this._boundTextures[l]=o,this._activateLocation(l),o=o||fn.EMPTY.source;let v=this.getGlSource(o);f.bindTexture(v.target,v.texture)}}_bindSampler(o,l=0){let f=this._gl;if(!o){this._boundSamplers[l]=null,f.bindSampler(l,null);return}let v=this._getGlSampler(o);this._boundSamplers[l]!==v&&(this._boundSamplers[l]=v,f.bindSampler(l,v))}unbind(o){let l=o.source,f=this._boundTextures,v=this._gl;for(let b=0;b<f.length;b++)if(f[b]===l){this._activateLocation(b);let T=this.getGlSource(l);v.bindTexture(T.target,null),f[b]=null}}_activateLocation(o){this._activeTextureLocation!==o&&(this._activeTextureLocation=o,this._gl.activeTexture(this._gl.TEXTURE0+o))}_initSource(o){let l=this._gl,f=new $h(l.createTexture());if(f.type=this._mapFormatToType[o.format],f.internalFormat=this._mapFormatToInternalFormat[o.format],f.format=this._mapFormatToFormat[o.format],o.autoGenerateMipmaps&&(this._renderer.context.supports.nonPowOf2mipmaps||o.isPowerOfTwo)){let v=Math.max(o.width,o.height);o.mipLevelCount=Math.floor(Math.log2(v))+1}return this._glTextures[o.uid]=f,this.managedTextures.includes(o)||(o.on("update",this.onSourceUpdate,this),o.on("resize",this.onSourceUpdate,this),o.on("styleChange",this.onStyleChange,this),o.on("destroy",this.onSourceDestroy,this),o.on("unload",this.onSourceUnload,this),o.on("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.push(o)),this.onSourceUpdate(o),this.updateStyle(o,!1),f}onStyleChange(o){this.updateStyle(o,!1)}updateStyle(o,l){let f=this._gl,v=this.getGlSource(o);f.bindTexture(f.TEXTURE_2D,v.texture),this._boundTextures[this._activeTextureLocation]=o,wE(o.style,f,o.mipLevelCount>1,this._renderer.context.extensions.anisotropicFiltering,"texParameteri",f.TEXTURE_2D,!this._renderer.context.supports.nonPowOf2wrapping&&!o.isPowerOfTwo,l)}onSourceUnload(o){let l=this._glTextures[o.uid];l&&(this.unbind(o),this._glTextures[o.uid]=null,this._gl.deleteTexture(l.texture))}onSourceUpdate(o){let l=this._gl,f=this.getGlSource(o);l.bindTexture(l.TEXTURE_2D,f.texture),this._boundTextures[this._activeTextureLocation]=o,this._uploads[o.uploadMethodId]?this._uploads[o.uploadMethodId].upload(o,f,l,this._renderer.context.webGLVersion):l.texImage2D(l.TEXTURE_2D,0,l.RGBA,o.pixelWidth,o.pixelHeight,0,l.RGBA,l.UNSIGNED_BYTE,null),o.autoGenerateMipmaps&&o.mipLevelCount>1&&this.onUpdateMipmaps(o,!1)}onUpdateMipmaps(o,l=!0){l&&this.bindSource(o,0);let f=this.getGlSource(o);this._gl.generateMipmap(f.target)}onSourceDestroy(o){o.off("destroy",this.onSourceDestroy,this),o.off("update",this.onSourceUpdate,this),o.off("resize",this.onSourceUpdate,this),o.off("unload",this.onSourceUnload,this),o.off("styleChange",this.onStyleChange,this),o.off("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.splice(this.managedTextures.indexOf(o),1),this.onSourceUnload(o)}_initSampler(o){let l=this._gl,f=this._gl.createSampler();return this._glSamplers[o._resourceId]=f,wE(o,l,this._boundTextures[this._activeTextureLocation].mipLevelCount>1,this._renderer.context.extensions.anisotropicFiltering,"samplerParameteri",f,!1,!0),this._glSamplers[o._resourceId]}_getGlSampler(o){return this._glSamplers[o._resourceId]||this._initSampler(o)}getGlSource(o){return this._glTextures[o.uid]||this._initSource(o)}generateCanvas(o){let{pixels:l,width:f,height:v}=this.getPixels(o),b=Ya.get().createCanvas();b.width=f,b.height=v;let T=b.getContext("2d");if(T){let S=T.createImageData(f,v);S.data.set(l),T.putImageData(S,0,0)}return b}getPixels(o){let l=o.source.resolution,f=o.frame,v=Math.max(Math.round(f.width*l),1),b=Math.max(Math.round(f.height*l),1),T=new Uint8Array(C1*v*b),S=this._renderer,R=S.renderTarget.getRenderTarget(o),U=S.renderTarget.getGpuRenderTarget(R),W=S.gl;return W.bindFramebuffer(W.FRAMEBUFFER,U.resolveTargetFramebuffer),W.readPixels(Math.round(f.x*l),Math.round(f.y*l),v,b,W.RGBA,W.UNSIGNED_BYTE,T),{pixels:new Uint8ClampedArray(T.buffer),width:v,height:b}}destroy(){this.managedTextures.slice().forEach(o=>this.onSourceDestroy(o)),this.managedTextures=null,this._renderer=null}},d3.extension={type:[Ke.WebGLSystem],name:"texture"}}),aL={};oi(aL,{WebGLRenderer:()=>lL});var sL,oL,tf,p3,f3,rf,lL,S$=D(()=>{Ot(),t$(),r$(),i$(),v2(),lM(),ah(),s$(),o$(),h$(),c$(),d$(),p$(),GM(),v$(),Cc(),_1(),QM(),w$(),nL(),sL=[...kT,i3,zM,BM,ZT,d3,aE,eE,o3,$2,rE,gE,iE,tE],oL=[...TT],tf=[KT,XT,qT],p3=[],f3=[],rf=[],Kr.handleByNamedList(Ke.WebGLSystem,p3),Kr.handleByNamedList(Ke.WebGLPipes,f3),Kr.handleByNamedList(Ke.WebGLPipesAdaptor,rf),Kr.add(...sL,...oL,...tf),lL=class extends p1{constructor(){let o={name:"webgl",type:Ce.WEBGL,systems:p3,renderPipes:f3,renderPipeAdaptors:rf};super(o)}}}),uL=hi((o,l)=>{"use strict";l.exports=v;function f(T){return T instanceof Buffer?Buffer.from(T):new T.constructor(T.buffer.slice(),T.byteOffset,T.length)}function v(T){if(T=T||{},T.circles)return b(T);let S=new Map;if(S.set(Date,ee=>new Date(ee)),S.set(Map,(ee,se)=>new Map(U(Array.from(ee),se))),S.set(Set,(ee,se)=>new Set(U(Array.from(ee),se))),T.constructorHandlers)for(let ee of T.constructorHandlers)S.set(ee[0],ee[1]);let R=null;return T.proto?K:W;function U(ee,se){let re=Object.keys(ee),Me=new Array(re.length);for(let Ie=0;Ie<re.length;Ie++){let Ee=re[Ie],Oe=ee[Ee];typeof Oe!="object"||Oe===null?Me[Ee]=Oe:Oe.constructor!==Object&&(R=S.get(Oe.constructor))?Me[Ee]=R(Oe,se):ArrayBuffer.isView(Oe)?Me[Ee]=f(Oe):Me[Ee]=se(Oe)}return Me}function W(ee){if(typeof ee!="object"||ee===null)return ee;if(Array.isArray(ee))return U(ee,W);if(ee.constructor!==Object&&(R=S.get(ee.constructor)))return R(ee,W);let se={};for(let re in ee){if(Object.hasOwnProperty.call(ee,re)===!1)continue;let Me=ee[re];typeof Me!="object"||Me===null?se[re]=Me:Me.constructor!==Object&&(R=S.get(Me.constructor))?se[re]=R(Me,W):ArrayBuffer.isView(Me)?se[re]=f(Me):se[re]=W(Me)}return se}function K(ee){if(typeof ee!="object"||ee===null)return ee;if(Array.isArray(ee))return U(ee,K);if(ee.constructor!==Object&&(R=S.get(ee.constructor)))return R(ee,K);let se={};for(let re in ee){let Me=ee[re];typeof Me!="object"||Me===null?se[re]=Me:Me.constructor!==Object&&(R=S.get(Me.constructor))?se[re]=R(Me,K):ArrayBuffer.isView(Me)?se[re]=f(Me):se[re]=K(Me)}return se}}function b(T){let S=[],R=[],U=new Map;if(U.set(Date,re=>new Date(re)),U.set(Map,(re,Me)=>new Map(K(Array.from(re),Me))),U.set(Set,(re,Me)=>new Set(K(Array.from(re),Me))),T.constructorHandlers)for(let re of T.constructorHandlers)U.set(re[0],re[1]);let W=null;return T.proto?se:ee;function K(re,Me){let Ie=Object.keys(re),Ee=new Array(Ie.length);for(let Oe=0;Oe<Ie.length;Oe++){let et=Ie[Oe],kt=re[et];if(typeof kt!="object"||kt===null)Ee[et]=kt;else if(kt.constructor!==Object&&(W=U.get(kt.constructor)))Ee[et]=W(kt,Me);else if(ArrayBuffer.isView(kt))Ee[et]=f(kt);else{let it=S.indexOf(kt);it!==-1?Ee[et]=R[it]:Ee[et]=Me(kt)}}return Ee}function ee(re){if(typeof re!="object"||re===null)return re;if(Array.isArray(re))return K(re,ee);if(re.constructor!==Object&&(W=U.get(re.constructor)))return W(re,ee);let Me={};S.push(re),R.push(Me);for(let Ie in re){if(Object.hasOwnProperty.call(re,Ie)===!1)continue;let Ee=re[Ie];if(typeof Ee!="object"||Ee===null)Me[Ie]=Ee;else if(Ee.constructor!==Object&&(W=U.get(Ee.constructor)))Me[Ie]=W(Ee,ee);else if(ArrayBuffer.isView(Ee))Me[Ie]=f(Ee);else{let Oe=S.indexOf(Ee);Oe!==-1?Me[Ie]=R[Oe]:Me[Ie]=ee(Ee)}}return S.pop(),R.pop(),Me}function se(re){if(typeof re!="object"||re===null)return re;if(Array.isArray(re))return K(re,se);if(re.constructor!==Object&&(W=U.get(re.constructor)))return W(re,se);let Me={};S.push(re),R.push(Me);for(let Ie in re){let Ee=re[Ie];if(typeof Ee!="object"||Ee===null)Me[Ie]=Ee;else if(Ee.constructor!==Object&&(W=U.get(Ee.constructor)))Me[Ie]=W(Ee,se);else if(ArrayBuffer.isView(Ee))Me[Ie]=f(Ee);else{let Oe=S.indexOf(Ee);Oe!==-1?Me[Ie]=R[Oe]:Me[Ie]=se(Ee)}}return S.pop(),R.pop(),Me}}}),A$={value:()=>{}};function hL(){for(var o=0,l=arguments.length,f={},v;o<l;++o){if(!(v=arguments[o]+"")||v in f||/[\s.]/.test(v))throw new Error("illegal type: "+v);f[v]=[]}return new g3(f)}function g3(o){this._=o}function M$(o,l){return o.trim().split(/^|\s+/).map(function(f){var v="",b=f.indexOf(".");if(b>=0&&(v=f.slice(b+1),f=f.slice(0,b)),f&&!l.hasOwnProperty(f))throw new Error("unknown type: "+f);return{type:f,name:v}})}g3.prototype=hL.prototype={constructor:g3,on:function(o,l){var f=this._,v=M$(o+"",f),b,T=-1,S=v.length;if(arguments.length<2){for(;++T<S;)if((b=(o=v[T]).type)&&(b=L$(f[b],o.name)))return b;return}if(l!=null&&typeof l!="function")throw new Error("invalid callback: "+l);for(;++T<S;)if(b=(o=v[T]).type)f[b]=cL(f[b],o.name,l);else if(l==null)for(b in f)f[b]=cL(f[b],o.name,null);return this},copy:function(){var o={},l=this._;for(var f in l)o[f]=l[f].slice();return new g3(o)},call:function(o,l){if((b=arguments.length-2)>0)for(var f=new Array(b),v=0,b,T;v<b;++v)f[v]=arguments[v+2];if(!this._.hasOwnProperty(o))throw new Error("unknown type: "+o);for(T=this._[o],v=0,b=T.length;v<b;++v)T[v].value.apply(l,f)},apply:function(o,l,f){if(!this._.hasOwnProperty(o))throw new Error("unknown type: "+o);for(var v=this._[o],b=0,T=v.length;b<T;++b)v[b].value.apply(l,f)}};function L$(o,l){for(var f=0,v=o.length,b;f<v;++f)if((b=o[f]).name===l)return b.value}function cL(o,l,f){for(var v=0,b=o.length;v<b;++v)if(o[v].name===l){o[v]=A$,o=o.slice(0,v).concat(o.slice(v+1));break}return f!=null&&o.push({name:l,value:f}),o}var m3=hL,Lu="http://www.w3.org/1999/xhtml",U2={svg:"http://www.w3.org/2000/svg",xhtml:Lu,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function y3(o){var l=o+="",f=l.indexOf(":");return f>=0&&(l=o.slice(0,f))!=="xmlns"&&(o=o.slice(f+1)),U2.hasOwnProperty(l)?{space:U2[l],local:o}:o}function R$(o){return function(){var l=this.ownerDocument,f=this.namespaceURI;return f===Lu&&l.documentElement.namespaceURI===Lu?l.createElement(o):l.createElementNS(f,o)}}function D$(o){return function(){return this.ownerDocument.createElementNS(o.space,o.local)}}function dL(o){var l=y3(o);return(l.local?D$:R$)(l)}function pL(){}function S1(o){return o==null?pL:function(){return this.querySelector(o)}}function v3(o){typeof o!="function"&&(o=S1(o));for(var l=this._groups,f=l.length,v=new Array(f),b=0;b<f;++b)for(var T=l[b],S=T.length,R=v[b]=new Array(S),U,W,K=0;K<S;++K)(U=T[K])&&(W=o.call(U,U.__data__,K,T))&&("__data__"in U&&(W.__data__=U.__data__),R[K]=W);return new Du(v,this._parents)}function fL(o){return o==null?[]:Array.isArray(o)?o:Array.from(o)}function kE(){return[]}function x3(o){return o==null?kE:function(){return this.querySelectorAll(o)}}function I$(o){return function(){return fL(o.apply(this,arguments))}}function N$(o){typeof o=="function"?o=I$(o):o=x3(o);for(var l=this._groups,f=l.length,v=[],b=[],T=0;T<f;++T)for(var S=l[T],R=S.length,U,W=0;W<R;++W)(U=S[W])&&(v.push(o.call(U,U.__data__,W,S)),b.push(U));return new Du(v,b)}function TE(o){return function(){return this.matches(o)}}function b3(o){return function(l){return l.matches(o)}}var _3=Array.prototype.find;function O$(o){return function(){return _3.call(this.children,o)}}function B$(){return this.firstElementChild}function P$(o){return this.select(o==null?B$:O$(typeof o=="function"?o:b3(o)))}var w3=Array.prototype.filter;function F$(){return Array.from(this.children)}function gL(o){return function(){return w3.call(this.children,o)}}function mL(o){return this.selectAll(o==null?F$:gL(typeof o=="function"?o:b3(o)))}function yL(o){typeof o!="function"&&(o=TE(o));for(var l=this._groups,f=l.length,v=new Array(f),b=0;b<f;++b)for(var T=l[b],S=T.length,R=v[b]=[],U,W=0;W<S;++W)(U=T[W])&&o.call(U,U.__data__,W,T)&&R.push(U);return new Du(v,this._parents)}function vL(o){return new Array(o.length)}function xL(){return new Du(this._enter||this._groups.map(vL),this._parents)}function j2(o,l){this.ownerDocument=o.ownerDocument,this.namespaceURI=o.namespaceURI,this._next=null,this._parent=o,this.__data__=l}j2.prototype={constructor:j2,appendChild:function(o){return this._parent.insertBefore(o,this._next)},insertBefore:function(o,l){return this._parent.insertBefore(o,l)},querySelector:function(o){return this._parent.querySelector(o)},querySelectorAll:function(o){return this._parent.querySelectorAll(o)}};function $$(o){return function(){return o}}function z$(o,l,f,v,b,T){for(var S=0,R,U=l.length,W=T.length;S<W;++S)(R=l[S])?(R.__data__=T[S],v[S]=R):f[S]=new j2(o,T[S]);for(;S<U;++S)(R=l[S])&&(b[S]=R)}function H2(o,l,f,v,b,T,S){var R,U,W=new Map,K=l.length,ee=T.length,se=new Array(K),re;for(R=0;R<K;++R)(U=l[R])&&(se[R]=re=S.call(U,U.__data__,R,l)+"",W.has(re)?b[R]=U:W.set(re,U));for(R=0;R<ee;++R)re=S.call(o,T[R],R,T)+"",(U=W.get(re))?(v[R]=U,U.__data__=T[R],W.delete(re)):f[R]=new j2(o,T[R]);for(R=0;R<K;++R)(U=l[R])&&W.get(se[R])===U&&(b[R]=U)}function EE(o){return o.__data__}function G$(o,l){if(!arguments.length)return Array.from(this,EE);var f=l?H2:z$,v=this._parents,b=this._groups;typeof o!="function"&&(o=$$(o));for(var T=b.length,S=new Array(T),R=new Array(T),U=new Array(T),W=0;W<T;++W){var K=v[W],ee=b[W],se=ee.length,re=k3(o.call(K,K&&K.__data__,W,v)),Me=re.length,Ie=R[W]=new Array(Me),Ee=S[W]=new Array(Me),Oe=U[W]=new Array(se);f(K,ee,Ie,Ee,Oe,re,l);for(var et=0,kt=0,it,Lt;et<Me;++et)if(it=Ie[et]){for(et>=kt&&(kt=et+1);!(Lt=Ee[kt])&&++kt<Me;);it._next=Lt||null}}return S=new Du(S,v),S._enter=R,S._exit=U,S}function k3(o){return typeof o=="object"&&"length"in o?o:Array.from(o)}function bL(){return new Du(this._exit||this._groups.map(vL),this._parents)}function U$(o,l,f){var v=this.enter(),b=this,T=this.exit();return typeof o=="function"?(v=o(v),v&&(v=v.selection())):v=v.append(o+""),l!=null&&(b=l(b),b&&(b=b.selection())),f==null?T.remove():f(T),v&&b?v.merge(b).order():b}function _L(o){for(var l=o.selection?o.selection():o,f=this._groups,v=l._groups,b=f.length,T=v.length,S=Math.min(b,T),R=new Array(b),U=0;U<S;++U)for(var W=f[U],K=v[U],ee=W.length,se=R[U]=new Array(ee),re,Me=0;Me<ee;++Me)(re=W[Me]||K[Me])&&(se[Me]=re);for(;U<b;++U)R[U]=f[U];return new Du(R,this._parents)}function j$(){for(var o=this._groups,l=-1,f=o.length;++l<f;)for(var v=o[l],b=v.length-1,T=v[b],S;--b>=0;)(S=v[b])&&(T&&S.compareDocumentPosition(T)^4&&T.parentNode.insertBefore(S,T),T=S);return this}function H$(o){o||(o=CE);function l(ee,se){return ee&&se?o(ee.__data__,se.__data__):!ee-!se}for(var f=this._groups,v=f.length,b=new Array(v),T=0;T<v;++T){for(var S=f[T],R=S.length,U=b[T]=new Array(R),W,K=0;K<R;++K)(W=S[K])&&(U[K]=W);U.sort(l)}return new Du(b,this._parents).order()}function CE(o,l){return o<l?-1:o>l?1:o>=l?0:NaN}function nf(){var o=arguments[0];return arguments[0]=this,o.apply(null,arguments),this}function A1(){return Array.from(this)}function M1(){for(var o=this._groups,l=0,f=o.length;l<f;++l)for(var v=o[l],b=0,T=v.length;b<T;++b){var S=v[b];if(S)return S}return null}function SE(){let o=0;for(let l of this)++o;return o}function T3(){return!this.node()}function V2(o){for(var l=this._groups,f=0,v=l.length;f<v;++f)for(var b=l[f],T=0,S=b.length,R;T<S;++T)(R=b[T])&&o.call(R,R.__data__,T,b);return this}function W2(o){return function(){this.removeAttribute(o)}}function S0(o){return function(){this.removeAttributeNS(o.space,o.local)}}function Y2(o,l){return function(){this.setAttribute(o,l)}}function L1(o,l){return function(){this.setAttributeNS(o.space,o.local,l)}}function AE(o,l){return function(){var f=l.apply(this,arguments);f==null?this.removeAttribute(o):this.setAttribute(o,f)}}function wL(o,l){return function(){var f=l.apply(this,arguments);f==null?this.removeAttributeNS(o.space,o.local):this.setAttributeNS(o.space,o.local,f)}}function kL(o,l){var f=y3(o);if(arguments.length<2){var v=this.node();return f.local?v.getAttributeNS(f.space,f.local):v.getAttribute(f)}return this.each((l==null?f.local?S0:W2:typeof l=="function"?f.local?wL:AE:f.local?L1:Y2)(f,l))}function TL(o){return o.ownerDocument&&o.ownerDocument.defaultView||o.document&&o||o.defaultView}function ME(o){return function(){this.style.removeProperty(o)}}function E3(o,l,f){return function(){this.style.setProperty(o,l,f)}}function LE(o,l,f){return function(){var v=l.apply(this,arguments);v==null?this.style.removeProperty(o):this.style.setProperty(o,v,f)}}function Sc(o,l,f){return arguments.length>1?this.each((l==null?ME:typeof l=="function"?LE:E3)(o,l,f??"")):_l(this.node(),o)}function _l(o,l){return o.style.getPropertyValue(l)||TL(o).getComputedStyle(o,null).getPropertyValue(l)}function V$(o){return function(){delete this[o]}}function EL(o,l){return function(){this[o]=l}}function CL(o,l){return function(){var f=l.apply(this,arguments);f==null?delete this[o]:this[o]=f}}function RE(o,l){return arguments.length>1?this.each((l==null?V$:typeof l=="function"?CL:EL)(o,l)):this.node()[o]}function C3(o){return o.trim().split(/^|\s+/)}function R1(o){return o.classList||new D1(o)}function D1(o){this._node=o,this._names=C3(o.getAttribute("class")||"")}D1.prototype={add:function(o){var l=this._names.indexOf(o);l<0&&(this._names.push(o),this._node.setAttribute("class",this._names.join(" ")))},remove:function(o){var l=this._names.indexOf(o);l>=0&&(this._names.splice(l,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(o){return this._names.indexOf(o)>=0}};function S3(o,l){for(var f=R1(o),v=-1,b=l.length;++v<b;)f.add(l[v])}function q2(o,l){for(var f=R1(o),v=-1,b=l.length;++v<b;)f.remove(l[v])}function X2(o){return function(){S3(this,o)}}function Ru(o){return function(){q2(this,o)}}function W$(o,l){return function(){(l.apply(this,arguments)?S3:q2)(this,o)}}function Y$(o,l){var f=C3(o+"");if(arguments.length<2){for(var v=R1(this.node()),b=-1,T=f.length;++b<T;)if(!v.contains(f[b]))return!1;return!0}return this.each((typeof l=="function"?W$:l?X2:Ru)(f,l))}function q$(){this.textContent=""}function X$(o){return function(){this.textContent=o}}function K$(o){return function(){var l=o.apply(this,arguments);this.textContent=l??""}}function Z$(o){return arguments.length?this.each(o==null?q$:(typeof o=="function"?K$:X$)(o)):this.node().textContent}function Q$(){this.innerHTML=""}function DE(o){return function(){this.innerHTML=o}}function A3(o){return function(){var l=o.apply(this,arguments);this.innerHTML=l??""}}function SL(o){return arguments.length?this.each(o==null?Q$:(typeof o=="function"?A3:DE)(o)):this.node().innerHTML}function AL(){this.nextSibling&&this.parentNode.appendChild(this)}function J$(){return this.each(AL)}function ez(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function tz(){return this.each(ez)}function rz(o){var l=typeof o=="function"?o:dL(o);return this.select(function(){return this.appendChild(l.apply(this,arguments))})}function iz(){return null}function nz(o,l){var f=typeof o=="function"?o:dL(o),v=l==null?iz:typeof l=="function"?l:S1(l);return this.select(function(){return this.insertBefore(f.apply(this,arguments),v.apply(this,arguments)||null)})}function az(){var o=this.parentNode;o&&o.removeChild(this)}function sz(){return this.each(az)}function oz(){var o=this.cloneNode(!1),l=this.parentNode;return l?l.insertBefore(o,this.nextSibling):o}function lz(){var o=this.cloneNode(!0),l=this.parentNode;return l?l.insertBefore(o,this.nextSibling):o}function uz(o){return this.select(o?lz:oz)}function hz(o){return arguments.length?this.property("__data__",o):this.node().__data__}function cz(o){return function(l){o.call(this,l,this.__data__)}}function dz(o){return o.trim().split(/^|\s+/).map(function(l){var f="",v=l.indexOf(".");return v>=0&&(f=l.slice(v+1),l=l.slice(0,v)),{type:l,name:f}})}function pz(o){return function(){var l=this.__on;if(l){for(var f=0,v=-1,b=l.length,T;f<b;++f)T=l[f],(!o.type||T.type===o.type)&&T.name===o.name?this.removeEventListener(T.type,T.listener,T.options):l[++v]=T;++v?l.length=v:delete this.__on}}}function fz(o,l,f){return function(){var v=this.__on,b,T=cz(l);if(v){for(var S=0,R=v.length;S<R;++S)if((b=v[S]).type===o.type&&b.name===o.name){this.removeEventListener(b.type,b.listener,b.options),this.addEventListener(b.type,b.listener=T,b.options=f),b.value=l;return}}this.addEventListener(o.type,T,f),b={type:o.type,name:o.name,value:l,listener:T,options:f},v?v.push(b):this.__on=[b]}}function gz(o,l,f){var v=dz(o+""),b,T=v.length,S;if(arguments.length<2){var R=this.node().__on;if(R){for(var U=0,W=R.length,K;U<W;++U)for(b=0,K=R[U];b<T;++b)if((S=v[b]).type===K.type&&S.name===K.name)return K.value}return}for(R=l?fz:pz,b=0;b<T;++b)this.each(R(v[b],l,f));return this}function ML(o,l,f){var v=TL(o),b=v.CustomEvent;typeof b=="function"?b=new b(l,f):(b=v.document.createEvent("Event"),f?(b.initEvent(l,f.bubbles,f.cancelable),b.detail=f.detail):b.initEvent(l,!1,!1)),o.dispatchEvent(b)}function mz(o,l){return function(){return ML(this,o,l)}}function yz(o,l){return function(){return ML(this,o,l.apply(this,arguments))}}function vz(o,l){return this.each((typeof l=="function"?yz:mz)(o,l))}function*xz(){for(var o=this._groups,l=0,f=o.length;l<f;++l)for(var v=o[l],b=0,T=v.length,S;b<T;++b)(S=v[b])&&(yield S)}var LL=[null];function Du(o,l){this._groups=o,this._parents=l}function RL(){return new Du([[document.documentElement]],LL)}function bz(){return this}Du.prototype=RL.prototype={constructor:Du,select:v3,selectAll:N$,selectChild:P$,selectChildren:mL,filter:yL,data:G$,enter:xL,exit:bL,join:U$,merge:_L,selection:bz,order:j$,sort:H$,call:nf,nodes:A1,node:M1,size:SE,empty:T3,each:V2,attr:kL,style:Sc,property:RE,classed:Y$,text:Z$,html:SL,raise:J$,lower:tz,append:rz,insert:nz,remove:sz,clone:uz,datum:hz,on:gz,dispatch:vz,[Symbol.iterator]:xz};var K2=RL;function Gh(o){return typeof o=="string"?new Du([[document.querySelector(o)]],[document.documentElement]):new Du([[o]],LL)}function _z(o){let l;for(;l=o.sourceEvent;)o=l;return o}function bd(o,l){if(o=_z(o),l===void 0&&(l=o.currentTarget),l){var f=l.ownerSVGElement||l;if(f.createSVGPoint){var v=f.createSVGPoint();return v.x=o.clientX,v.y=o.clientY,v=v.matrixTransform(l.getScreenCTM().inverse()),[v.x,v.y]}if(l.getBoundingClientRect){var b=l.getBoundingClientRect();return[o.clientX-b.left-l.clientLeft,o.clientY-b.top-l.clientTop]}}return[o.pageX,o.pageY]}var wz={passive:!1},Z2={capture:!0,passive:!1};function IE(o){o.stopImmediatePropagation()}function I1(o){o.preventDefault(),o.stopImmediatePropagation()}function DL(o){var l=o.document.documentElement,f=Gh(o).on("dragstart.drag",I1,Z2);"onselectstart"in l?f.on("selectstart.drag",I1,Z2):(l.__noselect=l.style.MozUserSelect,l.style.MozUserSelect="none")}function IL(o,l){var f=o.document.documentElement,v=Gh(o).on("dragstart.drag",null);l&&(v.on("click.drag",I1,Z2),setTimeout(function(){v.on("click.drag",null)},0)),"onselectstart"in f?v.on("selectstart.drag",null):(f.style.MozUserSelect=f.__noselect,delete f.__noselect)}var M3=o=>()=>o;function NE(o,{sourceEvent:l,subject:f,target:v,identifier:b,active:T,x:S,y:R,dx:U,dy:W,dispatch:K}){Object.defineProperties(this,{type:{value:o,enumerable:!0,configurable:!0},sourceEvent:{value:l,enumerable:!0,configurable:!0},subject:{value:f,enumerable:!0,configurable:!0},target:{value:v,enumerable:!0,configurable:!0},identifier:{value:b,enumerable:!0,configurable:!0},active:{value:T,enumerable:!0,configurable:!0},x:{value:S,enumerable:!0,configurable:!0},y:{value:R,enumerable:!0,configurable:!0},dx:{value:U,enumerable:!0,configurable:!0},dy:{value:W,enumerable:!0,configurable:!0},_:{value:K}})}NE.prototype.on=function(){var o=this._.on.apply(this._,arguments);return o===this._?this:o};function kz(o){return!o.ctrlKey&&!o.button}function Tz(){return this.parentNode}function Ez(o,l){return l??{x:o.x,y:o.y}}function Cz(){return navigator.maxTouchPoints||"ontouchstart"in this}function Sz(){var o=kz,l=Tz,f=Ez,v=Cz,b={},T=m3("start","drag","end"),S=0,R,U,W,K,ee=0;function se(it){it.on("mousedown.drag",re).filter(v).on("touchstart.drag",Ee).on("touchmove.drag",Oe,wz).on("touchend.drag touchcancel.drag",et).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function re(it,Lt){if(!(K||!o.call(this,it,Lt))){var Dt=kt(this,l.call(this,it,Lt),it,Lt,"mouse");Dt&&(Gh(it.view).on("mousemove.drag",Me,Z2).on("mouseup.drag",Ie,Z2),DL(it.view),IE(it),W=!1,R=it.clientX,U=it.clientY,Dt("start",it))}}function Me(it){if(I1(it),!W){var Lt=it.clientX-R,Dt=it.clientY-U;W=Lt*Lt+Dt*Dt>ee}b.mouse("drag",it)}function Ie(it){Gh(it.view).on("mousemove.drag mouseup.drag",null),IL(it.view,W),I1(it),b.mouse("end",it)}function Ee(it,Lt){if(o.call(this,it,Lt)){var Dt=it.changedTouches,Pt=l.call(this,it,Lt),Jr=Dt.length,di,Ur;for(di=0;di<Jr;++di)(Ur=kt(this,Pt,it,Lt,Dt[di].identifier,Dt[di]))&&(IE(it),Ur("start",it,Dt[di]))}}function Oe(it){var Lt=it.changedTouches,Dt=Lt.length,Pt,Jr;for(Pt=0;Pt<Dt;++Pt)(Jr=b[Lt[Pt].identifier])&&(I1(it),Jr("drag",it,Lt[Pt]))}function et(it){var Lt=it.changedTouches,Dt=Lt.length,Pt,Jr;for(K&&clearTimeout(K),K=setTimeout(function(){K=null},500),Pt=0;Pt<Dt;++Pt)(Jr=b[Lt[Pt].identifier])&&(IE(it),Jr("end",it,Lt[Pt]))}function kt(it,Lt,Dt,Pt,Jr,di){var Ur=T.copy(),$r=bd(di||Dt,Lt),Ki,gn,Ft;if((Ft=f.call(it,new NE("beforestart",{sourceEvent:Dt,target:se,identifier:Jr,active:S,x:$r[0],y:$r[1],dx:0,dy:0,dispatch:Ur}),Pt))!=null)return Ki=Ft.x-$r[0]||0,gn=Ft.y-$r[1]||0,function Ri(Yt,Tr,We){var ot=$r,Ze;switch(Yt){case"start":b[Jr]=Ri,Ze=S++;break;case"end":delete b[Jr],--S;case"drag":$r=bd(We||Tr,Lt),Ze=S;break}Ur.call(Yt,it,new NE(Yt,{sourceEvent:Tr,subject:Ft,target:se,identifier:Jr,active:Ze,x:$r[0]+Ki,y:$r[1]+gn,dx:$r[0]-ot[0],dy:$r[1]-ot[1],dispatch:Ur}),Pt)}}return se.filter=function(it){return arguments.length?(o=typeof it=="function"?it:M3(!!it),se):o},se.container=function(it){return arguments.length?(l=typeof it=="function"?it:M3(it),se):l},se.subject=function(it){return arguments.length?(f=typeof it=="function"?it:M3(it),se):f},se.touchable=function(it){return arguments.length?(v=typeof it=="function"?it:M3(!!it),se):v},se.on=function(){var it=T.on.apply(T,arguments);return it===T?se:it},se.clickDistance=function(it){return arguments.length?(ee=(it=+it)*it,se):Math.sqrt(ee)},se}function OE(o,l,f){o.prototype=l.prototype=f,f.constructor=o}function BE(o,l){var f=Object.create(o.prototype);for(var v in l)f[v]=l[v];return f}function Q2(){}var J2=.7,ev=1/J2,N1="\\s*([+-]?\\d+)\\s*",tv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ac="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Az=/^#([0-9a-f]{3,8})$/,Mz=new RegExp(`^rgb\\(${N1},${N1},${N1}\\)$`),Lz=new RegExp(`^rgb\\(${Ac},${Ac},${Ac}\\)$`),Rz=new RegExp(`^rgba\\(${N1},${N1},${N1},${tv}\\)$`),Dz=new RegExp(`^rgba\\(${Ac},${Ac},${Ac},${tv}\\)$`),Iz=new RegExp(`^hsl\\(${tv},${Ac},${Ac}\\)$`),Nz=new RegExp(`^hsla\\(${tv},${Ac},${Ac},${tv}\\)$`),NL={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};OE(Q2,rv,{copy(o){return Object.assign(new this.constructor,this,o)},displayable(){return this.rgb().displayable()},hex:OL,formatHex:OL,formatHex8:Oz,formatHsl:Bz,formatRgb:BL,toString:BL});function OL(){return this.rgb().formatHex()}function Oz(){return this.rgb().formatHex8()}function Bz(){return $L(this).formatHsl()}function BL(){return this.rgb().formatRgb()}function rv(o){var l,f;return o=(o+"").trim().toLowerCase(),(l=Az.exec(o))?(f=l[1].length,l=parseInt(l[1],16),f===6?PL(l):f===3?new uu(l>>8&15|l>>4&240,l>>4&15|l&240,(l&15)<<4|l&15,1):f===8?L3(l>>24&255,l>>16&255,l>>8&255,(l&255)/255):f===4?L3(l>>12&15|l>>8&240,l>>8&15|l>>4&240,l>>4&15|l&240,((l&15)<<4|l&15)/255):null):(l=Mz.exec(o))?new uu(l[1],l[2],l[3],1):(l=Lz.exec(o))?new uu(l[1]*255/100,l[2]*255/100,l[3]*255/100,1):(l=Rz.exec(o))?L3(l[1],l[2],l[3],l[4]):(l=Dz.exec(o))?L3(l[1]*255/100,l[2]*255/100,l[3]*255/100,l[4]):(l=Iz.exec(o))?FL(l[1],l[2]/100,l[3]/100,1):(l=Nz.exec(o))?FL(l[1],l[2]/100,l[3]/100,l[4]):NL.hasOwnProperty(o)?PL(NL[o]):o==="transparent"?new uu(NaN,NaN,NaN,0):null}function PL(o){return new uu(o>>16&255,o>>8&255,o&255,1)}function L3(o,l,f,v){return v<=0&&(o=l=f=NaN),new uu(o,l,f,v)}function Pz(o){return o instanceof Q2||(o=rv(o)),o?(o=o.rgb(),new uu(o.r,o.g,o.b,o.opacity)):new uu}function R3(o,l,f,v){return arguments.length===1?Pz(o):new uu(o,l,f,v??1)}function uu(o,l,f,v){this.r=+o,this.g=+l,this.b=+f,this.opacity=+v}OE(uu,R3,BE(Q2,{brighter(o){return o=o==null?ev:Math.pow(ev,o),new uu(this.r*o,this.g*o,this.b*o,this.opacity)},darker(o){return o=o==null?J2:Math.pow(J2,o),new uu(this.r*o,this.g*o,this.b*o,this.opacity)},rgb(){return this},clamp(){return new uu(wl(this.r),wl(this.g),wl(this.b),iv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Mc,formatHex:Mc,formatHex8:Fz,formatRgb:PE,toString:PE}));function Mc(){return`#${hh(this.r)}${hh(this.g)}${hh(this.b)}`}function Fz(){return`#${hh(this.r)}${hh(this.g)}${hh(this.b)}${hh((isNaN(this.opacity)?1:this.opacity)*255)}`}function PE(){let o=iv(this.opacity);return`${o===1?"rgb(":"rgba("}${wl(this.r)}, ${wl(this.g)}, ${wl(this.b)}${o===1?")":`, ${o})`}`}function iv(o){return isNaN(o)?1:Math.max(0,Math.min(1,o))}function wl(o){return Math.max(0,Math.min(255,Math.round(o)||0))}function hh(o){return o=wl(o),(o<16?"0":"")+o.toString(16)}function FL(o,l,f,v){return v<=0?o=l=f=NaN:f<=0||f>=1?o=l=NaN:l<=0&&(o=NaN),new Uh(o,l,f,v)}function $L(o){if(o instanceof Uh)return new Uh(o.h,o.s,o.l,o.opacity);if(o instanceof Q2||(o=rv(o)),!o)return new Uh;if(o instanceof Uh)return o;o=o.rgb();var l=o.r/255,f=o.g/255,v=o.b/255,b=Math.min(l,f,v),T=Math.max(l,f,v),S=NaN,R=T-b,U=(T+b)/2;return R?(l===T?S=(f-v)/R+(f<v)*6:f===T?S=(v-l)/R+2:S=(l-f)/R+4,R/=U<.5?T+b:2-T-b,S*=60):R=U>0&&U<1?0:S,new Uh(S,R,U,o.opacity)}function zL(o,l,f,v){return arguments.length===1?$L(o):new Uh(o,l,f,v??1)}function Uh(o,l,f,v){this.h=+o,this.s=+l,this.l=+f,this.opacity=+v}OE(Uh,zL,BE(Q2,{brighter(o){return o=o==null?ev:Math.pow(ev,o),new Uh(this.h,this.s,this.l*o,this.opacity)},darker(o){return o=o==null?J2:Math.pow(J2,o),new Uh(this.h,this.s,this.l*o,this.opacity)},rgb(){var o=this.h%360+(this.h<0)*360,l=isNaN(o)||isNaN(this.s)?0:this.s,f=this.l,v=f+(f<.5?f:1-f)*l,b=2*f-v;return new uu(FE(o>=240?o-240:o+120,b,v),FE(o,b,v),FE(o<120?o+240:o-120,b,v),this.opacity)},clamp(){return new Uh(GL(this.h),nv(this.s),nv(this.l),iv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let o=iv(this.opacity);return`${o===1?"hsl(":"hsla("}${GL(this.h)}, ${nv(this.s)*100}%, ${nv(this.l)*100}%${o===1?")":`, ${o})`}`}}));function GL(o){return o=(o||0)%360,o<0?o+360:o}function nv(o){return Math.max(0,Math.min(1,o||0))}function FE(o,l,f){return(o<60?l+(f-l)*o/60:o<180?f:o<240?l+(f-l)*(240-o)/60:l)*255}function UL(o,l,f,v,b){var T=o*o,S=T*o;return((1-3*o+3*T-S)*l+(4-6*T+3*S)*f+(1+3*o+3*T-3*S)*v+S*b)/6}function $E(o){var l=o.length-1;return function(f){var v=f<=0?f=0:f>=1?(f=1,l-1):Math.floor(f*l),b=o[v],T=o[v+1],S=v>0?o[v-1]:2*b-T,R=v<l-1?o[v+2]:2*T-b;return UL((f-v/l)*l,S,b,T,R)}}function $z(o){var l=o.length;return function(f){var v=Math.floor(((f%=1)<0?++f:f)*l),b=o[(v+l-1)%l],T=o[v%l],S=o[(v+1)%l],R=o[(v+2)%l];return UL((f-v/l)*l,b,T,S,R)}}var jL=o=>()=>o;function zz(o,l){return function(f){return o+f*l}}function HL(o,l,f){return o=Math.pow(o,f),l=Math.pow(l,f)-o,f=1/f,function(v){return Math.pow(o+v*l,f)}}function Gz(o){return(o=+o)==1?D3:function(l,f){return f-l?HL(l,f,o):jL(isNaN(l)?f:l)}}function D3(o,l){var f=l-o;return f?zz(o,f):jL(isNaN(o)?l:o)}var VL=function o(l){var f=Gz(l);function v(b,T){var S=f((b=R3(b)).r,(T=R3(T)).r),R=f(b.g,T.g),U=f(b.b,T.b),W=D3(b.opacity,T.opacity);return function(K){return b.r=S(K),b.g=R(K),b.b=U(K),b.opacity=W(K),b+""}}return v.gamma=o,v}(1);function WL(o){return function(l){var f=l.length,v=new Array(f),b=new Array(f),T=new Array(f),S,R;for(S=0;S<f;++S)R=R3(l[S]),v[S]=R.r||0,b[S]=R.g||0,T[S]=R.b||0;return v=o(v),b=o(b),T=o(T),R.opacity=1,function(U){return R.r=v(U),R.g=b(U),R.b=T(U),R+""}}}var Mte=WL($E),Lte=WL($z);function A0(o,l){return o=+o,l=+l,function(f){return o*(1-f)+l*f}}var zE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,GE=new RegExp(zE.source,"g");function Uz(o){return function(){return o}}function YL(o){return function(l){return o(l)+""}}function jz(o,l){var f=zE.lastIndex=GE.lastIndex=0,v,b,T,S=-1,R=[],U=[];for(o=o+"",l=l+"";(v=zE.exec(o))&&(b=GE.exec(l));)(T=b.index)>f&&(T=l.slice(f,T),R[S]?R[S]+=T:R[++S]=T),(v=v[0])===(b=b[0])?R[S]?R[S]+=b:R[++S]=b:(R[++S]=null,U.push({i:S,x:A0(v,b)})),f=GE.lastIndex;return f<l.length&&(T=l.slice(f),R[S]?R[S]+=T:R[++S]=T),R.length<2?U[0]?YL(U[0].x):Uz(l):(l=U.length,function(W){for(var K=0,ee;K<l;++K)R[(ee=U[K]).i]=ee.x(W);return R.join("")})}var qL=180/Math.PI,O1={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function av(o,l,f,v,b,T){var S,R,U;return(S=Math.sqrt(o*o+l*l))&&(o/=S,l/=S),(U=o*f+l*v)&&(f-=o*U,v-=l*U),(R=Math.sqrt(f*f+v*v))&&(f/=R,v/=R,U/=R),o*v<l*f&&(o=-o,l=-l,U=-U,S=-S),{translateX:b,translateY:T,rotate:Math.atan2(l,o)*qL,skewX:Math.atan(U)*qL,scaleX:S,scaleY:R}}var jh;function XL(o){let l=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(o+"");return l.isIdentity?O1:av(l.a,l.b,l.c,l.d,l.e,l.f)}function I3(o){return o==null?O1:(jh||(jh=document.createElementNS("http://www.w3.org/2000/svg","g")),jh.setAttribute("transform",o),(o=jh.transform.baseVal.consolidate())?(o=o.matrix,av(o.a,o.b,o.c,o.d,o.e,o.f)):O1)}function KL(o,l,f,v){function b(W){return W.length?W.pop()+" ":""}function T(W,K,ee,se,re,Me){if(W!==ee||K!==se){var Ie=re.push("translate(",null,l,null,f);Me.push({i:Ie-4,x:A0(W,ee)},{i:Ie-2,x:A0(K,se)})}else(ee||se)&&re.push("translate("+ee+l+se+f)}function S(W,K,ee,se){W!==K?(W-K>180?K+=360:K-W>180&&(W+=360),se.push({i:ee.push(b(ee)+"rotate(",null,v)-2,x:A0(W,K)})):K&&ee.push(b(ee)+"rotate("+K+v)}function R(W,K,ee,se){W!==K?se.push({i:ee.push(b(ee)+"skewX(",null,v)-2,x:A0(W,K)}):K&&ee.push(b(ee)+"skewX("+K+v)}function U(W,K,ee,se,re,Me){if(W!==ee||K!==se){var Ie=re.push(b(re)+"scale(",null,",",null,")");Me.push({i:Ie-4,x:A0(W,ee)},{i:Ie-2,x:A0(K,se)})}else(ee!==1||se!==1)&&re.push(b(re)+"scale("+ee+","+se+")")}return function(W,K){var ee=[],se=[];return W=o(W),K=o(K),T(W.translateX,W.translateY,K.translateX,K.translateY,ee,se),S(W.rotate,K.rotate,ee,se),R(W.skewX,K.skewX,ee,se),U(W.scaleX,W.scaleY,K.scaleX,K.scaleY,ee,se),W=K=null,function(re){for(var Me=-1,Ie=se.length,Ee;++Me<Ie;)ee[(Ee=se[Me]).i]=Ee.x(re);return ee.join("")}}}var ZL=KL(XL,"px, ","px)","deg)"),Hz=KL(I3,", ",")",")"),Vz=1e-12;function QL(o){return((o=Math.exp(o))+1/o)/2}function Wz(o){return((o=Math.exp(o))-1/o)/2}function Yz(o){return((o=Math.exp(2*o))-1)/(o+1)}var qz=function o(l,f,v){function b(T,S){var R=T[0],U=T[1],W=T[2],K=S[0],ee=S[1],se=S[2],re=K-R,Me=ee-U,Ie=re*re+Me*Me,Ee,Oe;if(Ie<Vz)Oe=Math.log(se/W)/l,Ee=function(Pt){return[R+Pt*re,U+Pt*Me,W*Math.exp(l*Pt*Oe)]};else{var et=Math.sqrt(Ie),kt=(se*se-W*W+v*Ie)/(2*W*f*et),it=(se*se-W*W-v*Ie)/(2*se*f*et),Lt=Math.log(Math.sqrt(kt*kt+1)-kt),Dt=Math.log(Math.sqrt(it*it+1)-it);Oe=(Dt-Lt)/l,Ee=function(Pt){var Jr=Pt*Oe,di=QL(Lt),Ur=W/(f*et)*(di*Yz(l*Jr+Lt)-Wz(Lt));return[R+Ur*re,U+Ur*Me,W*di/QL(l*Jr+Lt)]}}return Ee.duration=Oe*1e3*l/Math.SQRT2,Ee}return b.rho=function(T){var S=Math.max(.001,+T),R=S*S,U=R*R;return o(S,R,U)},b}(Math.SQRT2,2,4),B1=0,sv=0,M0=0,ov=1e3,_d,L0,N3=0,af=0,O3=0,lv=typeof performance=="object"&&performance.now?performance:Date,uv=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(o){setTimeout(o,17)};function hv(){return af||(uv(JL),af=lv.now()+O3)}function JL(){af=0}function cv(){this._call=this._time=this._next=null}cv.prototype=UE.prototype={constructor:cv,restart:function(o,l,f){if(typeof o!="function")throw new TypeError("callback is not a function");f=(f==null?hv():+f)+(l==null?0:+l),!this._next&&L0!==this&&(L0?L0._next=this:_d=this,L0=this),this._call=o,this._time=f,B3()},stop:function(){this._call&&(this._call=null,this._time=1/0,B3())}};function UE(o,l,f){var v=new cv;return v.restart(o,l,f),v}function Xz(){hv(),++B1;for(var o=_d,l;o;)(l=af-o._time)>=0&&o._call.call(void 0,l),o=o._next;--B1}function eR(){af=(N3=lv.now())+O3,B1=sv=0;try{Xz()}finally{B1=0,rR(),af=0}}function tR(){var o=lv.now(),l=o-N3;l>ov&&(O3-=l,N3=o)}function rR(){for(var o,l=_d,f,v=1/0;l;)l._call?(v>l._time&&(v=l._time),o=l,l=l._next):(f=l._next,l._next=null,l=o?o._next=f:_d=f);L0=o,B3(v)}function B3(o){if(!B1){sv&&(sv=clearTimeout(sv));var l=o-af;l>24?(o<1/0&&(sv=setTimeout(eR,o-lv.now()-O3)),M0&&(M0=clearInterval(M0))):(M0||(N3=lv.now(),M0=setInterval(tR,ov)),B1=1,uv(eR))}}function iR(o,l,f){var v=new cv;return l=l==null?0:+l,v.restart(b=>{v.stop(),o(b+l)},l,f),v}var jE=m3("start","end","cancel","interrupt"),Kz=[],HE=0,nR=1,VE=2,P1=3,P3=4,WE=5,F3=6;function sf(o,l,f,v,b,T){var S=o.__transition;if(!S)o.__transition={};else if(f in S)return;Zz(o,f,{name:l,index:v,group:b,on:jE,tween:Kz,time:T.time,delay:T.delay,duration:T.duration,ease:T.ease,timer:null,state:HE})}function $3(o,l){var f=Vh(o,l);if(f.state>HE)throw new Error("too late; already scheduled");return f}function Hh(o,l){var f=Vh(o,l);if(f.state>P1)throw new Error("too late; already running");return f}function Vh(o,l){var f=o.__transition;if(!f||!(f=f[l]))throw new Error("transition not found");return f}function Zz(o,l,f){var v=o.__transition,b;v[l]=f,f.timer=UE(T,0,f.time);function T(W){f.state=nR,f.timer.restart(S,f.delay,f.time),f.delay<=W&&S(W-f.delay)}function S(W){var K,ee,se,re;if(f.state!==nR)return U();for(K in v)if(re=v[K],re.name===f.name){if(re.state===P1)return iR(S);re.state===P3?(re.state=F3,re.timer.stop(),re.on.call("interrupt",o,o.__data__,re.index,re.group),delete v[K]):+K<l&&(re.state=F3,re.timer.stop(),re.on.call("cancel",o,o.__data__,re.index,re.group),delete v[K])}if(iR(function(){f.state===P1&&(f.state=P3,f.timer.restart(R,f.delay,f.time),R(W))}),f.state=VE,f.on.call("start",o,o.__data__,f.index,f.group),f.state===VE){for(f.state=P1,b=new Array(se=f.tween.length),K=0,ee=-1;K<se;++K)(re=f.tween[K].value.call(o,o.__data__,f.index,f.group))&&(b[++ee]=re);b.length=ee+1}}function R(W){for(var K=W<f.duration?f.ease.call(null,W/f.duration):(f.timer.restart(U),f.state=WE,1),ee=-1,se=b.length;++ee<se;)b[ee].call(o,K);f.state===WE&&(f.on.call("end",o,o.__data__,f.index,f.group),U())}function U(){f.state=F3,f.timer.stop(),delete v[l];for(var W in v)return;delete o.__transition}}function z3(o,l){var f=o.__transition,v,b,T=!0,S;if(f){l=l==null?null:l+"";for(S in f){if((v=f[S]).name!==l){T=!1;continue}b=v.state>VE&&v.state<WE,v.state=F3,v.timer.stop(),v.on.call(b?"interrupt":"cancel",o,o.__data__,v.index,v.group),delete f[S]}T&&delete o.__transition}}function Qz(o){return this.each(function(){z3(this,o)})}function Jz(o,l){var f,v;return function(){var b=Hh(this,o),T=b.tween;if(T!==f){v=f=T;for(var S=0,R=v.length;S<R;++S)if(v[S].name===l){v=v.slice(),v.splice(S,1);break}}b.tween=v}}function eG(o,l,f){var v,b;if(typeof f!="function")throw new Error;return function(){var T=Hh(this,o),S=T.tween;if(S!==v){b=(v=S).slice();for(var R={name:l,value:f},U=0,W=b.length;U<W;++U)if(b[U].name===l){b[U]=R;break}U===W&&b.push(R)}T.tween=b}}function tG(o,l){var f=this._id;if(o+="",arguments.length<2){for(var v=Vh(this.node(),f).tween,b=0,T=v.length,S;b<T;++b)if((S=v[b]).name===o)return S.value;return null}return this.each((l==null?Jz:eG)(f,o,l))}function G3(o,l,f){var v=o._id;return o.each(function(){var b=Hh(this,v);(b.value||(b.value={}))[l]=f.apply(this,arguments)}),function(b){return Vh(b,v).value[l]}}function aR(o,l){var f;return(typeof l=="number"?A0:l instanceof rv?VL:(f=rv(l))?(l=f,VL):jz)(o,l)}function rG(o){return function(){this.removeAttribute(o)}}function iG(o){return function(){this.removeAttributeNS(o.space,o.local)}}function nG(o,l,f){var v,b=f+"",T;return function(){var S=this.getAttribute(o);return S===b?null:S===v?T:T=l(v=S,f)}}function U3(o,l,f){var v,b=f+"",T;return function(){var S=this.getAttributeNS(o.space,o.local);return S===b?null:S===v?T:T=l(v=S,f)}}function j3(o,l,f){var v,b,T;return function(){var S,R=f(this),U;return R==null?void this.removeAttribute(o):(S=this.getAttribute(o),U=R+"",S===U?null:S===v&&U===b?T:(b=U,T=l(v=S,R)))}}function H3(o,l,f){var v,b,T;return function(){var S,R=f(this),U;return R==null?void this.removeAttributeNS(o.space,o.local):(S=this.getAttributeNS(o.space,o.local),U=R+"",S===U?null:S===v&&U===b?T:(b=U,T=l(v=S,R)))}}function YE(o,l){var f=y3(o),v=f==="transform"?Hz:aR;return this.attrTween(o,typeof l=="function"?(f.local?H3:j3)(f,v,G3(this,"attr."+o,l)):l==null?(f.local?iG:rG)(f):(f.local?U3:nG)(f,v,l))}function sR(o,l){return function(f){this.setAttribute(o,l.call(this,f))}}function qE(o,l){return function(f){this.setAttributeNS(o.space,o.local,l.call(this,f))}}function aG(o,l){var f,v;function b(){var T=l.apply(this,arguments);return T!==v&&(f=(v=T)&&qE(o,T)),f}return b._value=l,b}function sG(o,l){var f,v;function b(){var T=l.apply(this,arguments);return T!==v&&(f=(v=T)&&sR(o,T)),f}return b._value=l,b}function oG(o,l){var f="attr."+o;if(arguments.length<2)return(f=this.tween(f))&&f._value;if(l==null)return this.tween(f,null);if(typeof l!="function")throw new Error;var v=y3(o);return this.tween(f,(v.local?aG:sG)(v,l))}function lG(o,l){return function(){$3(this,o).delay=+l.apply(this,arguments)}}function uG(o,l){return l=+l,function(){$3(this,o).delay=l}}function F1(o){var l=this._id;return arguments.length?this.each((typeof o=="function"?lG:uG)(l,o)):Vh(this.node(),l).delay}function XE(o,l){return function(){Hh(this,o).duration=+l.apply(this,arguments)}}function hG(o,l){return l=+l,function(){Hh(this,o).duration=l}}function cG(o){var l=this._id;return arguments.length?this.each((typeof o=="function"?XE:hG)(l,o)):Vh(this.node(),l).duration}function dG(o,l){if(typeof l!="function")throw new Error;return function(){Hh(this,o).ease=l}}function oR(o){var l=this._id;return arguments.length?this.each(dG(l,o)):Vh(this.node(),l).ease}function pG(o,l){return function(){var f=l.apply(this,arguments);if(typeof f!="function")throw new Error;Hh(this,o).ease=f}}function lR(o){if(typeof o!="function")throw new Error;return this.each(pG(this._id,o))}function KE(o){typeof o!="function"&&(o=TE(o));for(var l=this._groups,f=l.length,v=new Array(f),b=0;b<f;++b)for(var T=l[b],S=T.length,R=v[b]=[],U,W=0;W<S;++W)(U=T[W])&&o.call(U,U.__data__,W,T)&&R.push(U);return new kl(v,this._parents,this._name,this._id)}function uR(o){if(o._id!==this._id)throw new Error;for(var l=this._groups,f=o._groups,v=l.length,b=f.length,T=Math.min(v,b),S=new Array(v),R=0;R<T;++R)for(var U=l[R],W=f[R],K=U.length,ee=S[R]=new Array(K),se,re=0;re<K;++re)(se=U[re]||W[re])&&(ee[re]=se);for(;R<v;++R)S[R]=l[R];return new kl(S,this._parents,this._name,this._id)}function fG(o){return(o+"").trim().split(/^|\s+/).every(function(l){var f=l.indexOf(".");return f>=0&&(l=l.slice(0,f)),!l||l==="start"})}function gG(o,l,f){var v,b,T=fG(l)?$3:Hh;return function(){var S=T(this,o),R=S.on;R!==v&&(b=(v=R).copy()).on(l,f),S.on=b}}function mG(o,l){var f=this._id;return arguments.length<2?Vh(this.node(),f).on.on(o):this.each(gG(f,o,l))}function $1(o){return function(){var l=this.parentNode;for(var f in this.__transition)if(+f!==o)return;l&&l.removeChild(this)}}function yG(){return this.on("end.remove",$1(this._id))}function vG(o){var l=this._name,f=this._id;typeof o!="function"&&(o=S1(o));for(var v=this._groups,b=v.length,T=new Array(b),S=0;S<b;++S)for(var R=v[S],U=R.length,W=T[S]=new Array(U),K,ee,se=0;se<U;++se)(K=R[se])&&(ee=o.call(K,K.__data__,se,R))&&("__data__"in K&&(ee.__data__=K.__data__),W[se]=ee,sf(W[se],l,f,se,W,Vh(K,f)));return new kl(T,this._parents,l,f)}function xG(o){var l=this._name,f=this._id;typeof o!="function"&&(o=x3(o));for(var v=this._groups,b=v.length,T=[],S=[],R=0;R<b;++R)for(var U=v[R],W=U.length,K,ee=0;ee<W;++ee)if(K=U[ee]){for(var se=o.call(K,K.__data__,ee,U),re,Me=Vh(K,f),Ie=0,Ee=se.length;Ie<Ee;++Ie)(re=se[Ie])&&sf(re,l,f,Ie,se,Me);T.push(se),S.push(K)}return new kl(T,S,l,f)}var wo=K2.prototype.constructor;function V3(){return new wo(this._groups,this._parents)}function W3(o,l){var f,v,b;return function(){var T=_l(this,o),S=(this.style.removeProperty(o),_l(this,o));return T===S?null:T===f&&S===v?b:b=l(f=T,v=S)}}function wd(o){return function(){this.style.removeProperty(o)}}function of(o,l,f){var v,b=f+"",T;return function(){var S=_l(this,o);return S===b?null:S===v?T:T=l(v=S,f)}}function bG(o,l,f){var v,b,T;return function(){var S=_l(this,o),R=f(this),U=R+"";return R==null&&(U=R=(this.style.removeProperty(o),_l(this,o))),S===U?null:S===v&&U===b?T:(b=U,T=l(v=S,R))}}function hR(o,l){var f,v,b,T="style."+l,S="end."+T,R;return function(){var U=Hh(this,o),W=U.on,K=U.value[T]==null?R||(R=wd(l)):void 0;(W!==f||b!==K)&&(v=(f=W).copy()).on(S,b=K),U.on=v}}function kd(o,l,f){var v=(o+="")=="transform"?ZL:aR;return l==null?this.styleTween(o,W3(o,v)).on("end.style."+o,wd(o)):typeof l=="function"?this.styleTween(o,bG(o,v,G3(this,"style."+o,l))).each(hR(this._id,o)):this.styleTween(o,of(o,v,l),f).on("end.style."+o,null)}function _G(o,l,f){return function(v){this.style.setProperty(o,l.call(this,v),f)}}function cR(o,l,f){var v,b;function T(){var S=l.apply(this,arguments);return S!==b&&(v=(b=S)&&_G(o,S,f)),v}return T._value=l,T}function z1(o,l,f){var v="style."+(o+="");if(arguments.length<2)return(v=this.tween(v))&&v._value;if(l==null)return this.tween(v,null);if(typeof l!="function")throw new Error;return this.tween(v,cR(o,l,f??""))}function wG(o){return function(){this.textContent=o}}function ZE(o){return function(){var l=o(this);this.textContent=l??""}}function kG(o){return this.tween("text",typeof o=="function"?ZE(G3(this,"text",o)):wG(o==null?"":o+""))}function dR(o){return function(l){this.textContent=o.call(this,l)}}function G1(o){var l,f;function v(){var b=o.apply(this,arguments);return b!==f&&(l=(f=b)&&dR(b)),l}return v._value=o,v}function TG(o){var l="text";if(arguments.length<1)return(l=this.tween(l))&&l._value;if(o==null)return this.tween(l,null);if(typeof o!="function")throw new Error;return this.tween(l,G1(o))}function QE(){for(var o=this._name,l=this._id,f=dv(),v=this._groups,b=v.length,T=0;T<b;++T)for(var S=v[T],R=S.length,U,W=0;W<R;++W)if(U=S[W]){var K=Vh(U,l);sf(U,o,f,W,S,{time:K.time+K.delay+K.duration,delay:0,duration:K.duration,ease:K.ease})}return new kl(v,this._parents,o,f)}function EG(){var o,l,f=this,v=f._id,b=f.size();return new Promise(function(T,S){var R={value:S},U={value:function(){--b===0&&T()}};f.each(function(){var W=Hh(this,v),K=W.on;K!==o&&(l=(o=K).copy(),l._.cancel.push(R),l._.interrupt.push(R),l._.end.push(U)),W.on=l}),b===0&&T()})}var pR=0;function kl(o,l,f,v){this._groups=o,this._parents=l,this._name=f,this._id=v}function CG(o){return K2().transition(o)}function dv(){return++pR}var Td=K2.prototype;kl.prototype=CG.prototype={constructor:kl,select:vG,selectAll:xG,selectChild:Td.selectChild,selectChildren:Td.selectChildren,filter:KE,merge:uR,selection:V3,transition:QE,call:Td.call,nodes:Td.nodes,node:Td.node,size:Td.size,empty:Td.empty,each:Td.each,on:mG,attr:YE,attrTween:oG,style:kd,styleTween:z1,text:kG,textTween:TG,remove:yG,tween:tG,delay:F1,duration:cG,ease:oR,easeVarying:lR,end:EG,[Symbol.iterator]:Td[Symbol.iterator]};function JE(o){return((o*=2)<=1?o*o*o:(o-=2)*o*o+2)/2}var SG={time:null,delay:0,duration:250,ease:JE};function fR(o,l){for(var f;!(f=o.__transition)||!(f=f[l]);)if(!(o=o.parentNode))throw new Error(`transition ${l} not found`);return f}function lf(o){var l,f;o instanceof kl?(l=o._id,o=o._name):(l=dv(),(f=SG).time=hv(),o=o==null?null:o+"");for(var v=this._groups,b=v.length,T=0;T<b;++T)for(var S=v[T],R=S.length,U,W=0;W<R;++W)(U=S[W])&&sf(U,o,l,W,S,f||fR(U,l));return new kl(v,this._parents,o,l)}K2.prototype.interrupt=Qz,K2.prototype.transition=lf;var{abs:U1,max:pv,min:fv}=Math;function Y3(o){return[+o[0],+o[1]]}function eC(o){return[Y3(o[0]),Y3(o[1])]}var uf={name:"x",handles:["w","e"].map(tC),input:function(o,l){return o==null?null:[[+o[0],l[0][1]],[+o[1],l[1][1]]]},output:function(o){return o&&[o[0][0],o[1][0]]}},gR={name:"y",handles:["n","s"].map(tC),input:function(o,l){return o==null?null:[[l[0][0],+o[0]],[l[1][0],+o[1]]]},output:function(o){return o&&[o[0][1],o[1][1]]}},mR={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(tC),input:function(o){return o==null?null:eC(o)},output:function(o){return o}};function tC(o){return{type:o}}function AG(o,l){var f,v=1;o==null&&(o=0),l==null&&(l=0);function b(){var T,S=f.length,R,U=0,W=0;for(T=0;T<S;++T)R=f[T],U+=R.x,W+=R.y;for(U=(U/S-o)*v,W=(W/S-l)*v,T=0;T<S;++T)R=f[T],R.x-=U,R.y-=W}return b.initialize=function(T){f=T},b.x=function(T){return arguments.length?(o=+T,b):o},b.y=function(T){return arguments.length?(l=+T,b):l},b.strength=function(T){return arguments.length?(v=+T,b):v},b}function MG(o){let l=+this._x.call(null,o),f=+this._y.call(null,o);return yR(this.cover(l,f),l,f,o)}function yR(o,l,f,v){if(isNaN(l)||isNaN(f))return o;var b,T=o._root,S={data:v},R=o._x0,U=o._y0,W=o._x1,K=o._y1,ee,se,re,Me,Ie,Ee,Oe,et;if(!T)return o._root=S,o;for(;T.length;)if((Ie=l>=(ee=(R+W)/2))?R=ee:W=ee,(Ee=f>=(se=(U+K)/2))?U=se:K=se,b=T,!(T=T[Oe=Ee<<1|Ie]))return b[Oe]=S,o;if(re=+o._x.call(null,T.data),Me=+o._y.call(null,T.data),l===re&&f===Me)return S.next=T,b?b[Oe]=S:o._root=S,o;do b=b?b[Oe]=new Array(4):o._root=new Array(4),(Ie=l>=(ee=(R+W)/2))?R=ee:W=ee,(Ee=f>=(se=(U+K)/2))?U=se:K=se;while((Oe=Ee<<1|Ie)===(et=(Me>=se)<<1|re>=ee));return b[et]=T,b[Oe]=S,o}function LG(o){var l,f,v=o.length,b,T,S=new Array(v),R=new Array(v),U=1/0,W=1/0,K=-1/0,ee=-1/0;for(f=0;f<v;++f)isNaN(b=+this._x.call(null,l=o[f]))||isNaN(T=+this._y.call(null,l))||(S[f]=b,R[f]=T,b<U&&(U=b),b>K&&(K=b),T<W&&(W=T),T>ee&&(ee=T));if(U>K||W>ee)return this;for(this.cover(U,W).cover(K,ee),f=0;f<v;++f)yR(this,S[f],R[f],o[f]);return this}function RG(o,l){if(isNaN(o=+o)||isNaN(l=+l))return this;var f=this._x0,v=this._y0,b=this._x1,T=this._y1;if(isNaN(f))b=(f=Math.floor(o))+1,T=(v=Math.floor(l))+1;else{for(var S=b-f||1,R=this._root,U,W;f>o||o>=b||v>l||l>=T;)switch(W=(l<v)<<1|o<f,U=new Array(4),U[W]=R,R=U,S*=2,W){case 0:b=f+S,T=v+S;break;case 1:f=b-S,T=v+S;break;case 2:b=f+S,v=T-S;break;case 3:f=b-S,v=T-S;break}this._root&&this._root.length&&(this._root=R)}return this._x0=f,this._y0=v,this._x1=b,this._y1=T,this}function DG(){var o=[];return this.visit(function(l){if(!l.length)do o.push(l.data);while(l=l.next)}),o}function q3(o){return arguments.length?this.cover(+o[0][0],+o[0][1]).cover(+o[1][0],+o[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function ko(o,l,f,v,b){this.node=o,this.x0=l,this.y0=f,this.x1=v,this.y1=b}function vR(o,l,f){var v,b=this._x0,T=this._y0,S,R,U,W,K=this._x1,ee=this._y1,se=[],re=this._root,Me,Ie;for(re&&se.push(new ko(re,b,T,K,ee)),f==null?f=1/0:(b=o-f,T=l-f,K=o+f,ee=l+f,f*=f);Me=se.pop();)if(!(!(re=Me.node)||(S=Me.x0)>K||(R=Me.y0)>ee||(U=Me.x1)<b||(W=Me.y1)<T))if(re.length){var Ee=(S+U)/2,Oe=(R+W)/2;se.push(new ko(re[3],Ee,Oe,U,W),new ko(re[2],S,Oe,Ee,W),new ko(re[1],Ee,R,U,Oe),new ko(re[0],S,R,Ee,Oe)),(Ie=(l>=Oe)<<1|o>=Ee)&&(Me=se[se.length-1],se[se.length-1]=se[se.length-1-Ie],se[se.length-1-Ie]=Me)}else{var et=o-+this._x.call(null,re.data),kt=l-+this._y.call(null,re.data),it=et*et+kt*kt;if(it<f){var Lt=Math.sqrt(f=it);b=o-Lt,T=l-Lt,K=o+Lt,ee=l+Lt,v=re.data}}return v}function xR(o){if(isNaN(K=+this._x.call(null,o))||isNaN(ee=+this._y.call(null,o)))return this;var l,f=this._root,v,b,T,S=this._x0,R=this._y0,U=this._x1,W=this._y1,K,ee,se,re,Me,Ie,Ee,Oe;if(!f)return this;if(f.length)for(;;){if((Me=K>=(se=(S+U)/2))?S=se:U=se,(Ie=ee>=(re=(R+W)/2))?R=re:W=re,l=f,!(f=f[Ee=Ie<<1|Me]))return this;if(!f.length)break;(l[Ee+1&3]||l[Ee+2&3]||l[Ee+3&3])&&(v=l,Oe=Ee)}for(;f.data!==o;)if(b=f,!(f=f.next))return this;return(T=f.next)&&delete f.next,b?(T?b.next=T:delete b.next,this):l?(T?l[Ee]=T:delete l[Ee],(f=l[0]||l[1]||l[2]||l[3])&&f===(l[3]||l[2]||l[1]||l[0])&&!f.length&&(v?v[Oe]=f:this._root=f),this):(this._root=T,this)}function hf(o){for(var l=0,f=o.length;l<f;++l)this.remove(o[l]);return this}function bR(){return this._root}function _R(){var o=0;return this.visit(function(l){if(!l.length)do++o;while(l=l.next)}),o}function IG(o){var l=[],f,v=this._root,b,T,S,R,U;for(v&&l.push(new ko(v,this._x0,this._y0,this._x1,this._y1));f=l.pop();)if(!o(v=f.node,T=f.x0,S=f.y0,R=f.x1,U=f.y1)&&v.length){var W=(T+R)/2,K=(S+U)/2;(b=v[3])&&l.push(new ko(b,W,K,R,U)),(b=v[2])&&l.push(new ko(b,T,K,W,U)),(b=v[1])&&l.push(new ko(b,W,S,R,K)),(b=v[0])&&l.push(new ko(b,T,S,W,K))}return this}function NG(o){var l=[],f=[],v;for(this._root&&l.push(new ko(this._root,this._x0,this._y0,this._x1,this._y1));v=l.pop();){var b=v.node;if(b.length){var T,S=v.x0,R=v.y0,U=v.x1,W=v.y1,K=(S+U)/2,ee=(R+W)/2;(T=b[0])&&l.push(new ko(T,S,R,K,ee)),(T=b[1])&&l.push(new ko(T,K,R,U,ee)),(T=b[2])&&l.push(new ko(T,S,ee,K,W)),(T=b[3])&&l.push(new ko(T,K,ee,U,W))}f.push(v)}for(;v=f.pop();)o(v.node,v.x0,v.y0,v.x1,v.y1);return this}function OG(o){return o[0]}function BG(o){return arguments.length?(this._x=o,this):this._x}function PG(o){return o[1]}function FG(o){return arguments.length?(this._y=o,this):this._y}function rC(o,l,f){var v=new X3(l??OG,f??PG,NaN,NaN,NaN,NaN);return o==null?v:v.addAll(o)}function X3(o,l,f,v,b,T){this._x=o,this._y=l,this._x0=f,this._y0=v,this._x1=b,this._y1=T,this._root=void 0}function cf(o){for(var l={data:o.data},f=l;o=o.next;)f=f.next={data:o.data};return l}var jl=rC.prototype=X3.prototype;jl.copy=function(){var o=new X3(this._x,this._y,this._x0,this._y0,this._x1,this._y1),l=this._root,f,v;if(!l)return o;if(!l.length)return o._root=cf(l),o;for(f=[{source:l,target:o._root=new Array(4)}];l=f.pop();)for(var b=0;b<4;++b)(v=l.source[b])&&(v.length?f.push({source:v,target:l.target[b]=new Array(4)}):l.target[b]=cf(v));return o},jl.add=MG,jl.addAll=LG,jl.cover=RG,jl.data=DG,jl.extent=q3,jl.find=vR,jl.remove=xR,jl.removeAll=hf,jl.root=bR,jl.size=_R,jl.visit=IG,jl.visitAfter=NG,jl.x=BG,jl.y=FG;function Ed(o){return function(){return o}}function R0(o){return(o()-.5)*1e-6}function wR(o){return o.x+o.vx}function Lc(o){return o.y+o.vy}function $G(o){var l,f,v,b=1,T=1;typeof o!="function"&&(o=Ed(o==null?1:+o));function S(){for(var W,K=l.length,ee,se,re,Me,Ie,Ee,Oe=0;Oe<T;++Oe)for(ee=rC(l,wR,Lc).visitAfter(R),W=0;W<K;++W)se=l[W],Ie=f[se.index],Ee=Ie*Ie,re=se.x+se.vx,Me=se.y+se.vy,ee.visit(et);function et(kt,it,Lt,Dt,Pt){var Jr=kt.data,di=kt.r,Ur=Ie+di;if(Jr){if(Jr.index>se.index){var $r=re-Jr.x-Jr.vx,Ki=Me-Jr.y-Jr.vy,gn=$r*$r+Ki*Ki;gn<Ur*Ur&&($r===0&&($r=R0(v),gn+=$r*$r),Ki===0&&(Ki=R0(v),gn+=Ki*Ki),gn=(Ur-(gn=Math.sqrt(gn)))/gn*b,se.vx+=($r*=gn)*(Ur=(di*=di)/(Ee+di)),se.vy+=(Ki*=gn)*Ur,Jr.vx-=$r*(Ur=1-Ur),Jr.vy-=Ki*Ur)}return}return it>re+Ur||Dt<re-Ur||Lt>Me+Ur||Pt<Me-Ur}}function R(W){if(W.data)return W.r=f[W.data.index];for(var K=W.r=0;K<4;++K)W[K]&&W[K].r>W.r&&(W.r=W[K].r)}function U(){if(l){var W,K=l.length,ee;for(f=new Array(K),W=0;W<K;++W)ee=l[W],f[ee.index]=+o(ee,W,l)}}return S.initialize=function(W,K){l=W,v=K,U()},S.iterations=function(W){return arguments.length?(T=+W,S):T},S.strength=function(W){return arguments.length?(b=+W,S):b},S.radius=function(W){return arguments.length?(o=typeof W=="function"?W:Ed(+W),U(),S):o},S}function Cd(o){return o.index}function kR(o,l){var f=o.get(l);if(!f)throw new Error("node not found: "+l);return f}function TR(o){var l=Cd,f=ee,v,b=Ed(30),T,S,R,U,W,K=1;o==null&&(o=[]);function ee(Ee){return 1/Math.min(R[Ee.source.index],R[Ee.target.index])}function se(Ee){for(var Oe=0,et=o.length;Oe<K;++Oe)for(var kt=0,it,Lt,Dt,Pt,Jr,di,Ur;kt<et;++kt)it=o[kt],Lt=it.source,Dt=it.target,Pt=Dt.x+Dt.vx-Lt.x-Lt.vx||R0(W),Jr=Dt.y+Dt.vy-Lt.y-Lt.vy||R0(W),di=Math.sqrt(Pt*Pt+Jr*Jr),di=(di-T[kt])/di*Ee*v[kt],Pt*=di,Jr*=di,Dt.vx-=Pt*(Ur=U[kt]),Dt.vy-=Jr*Ur,Lt.vx+=Pt*(Ur=1-Ur),Lt.vy+=Jr*Ur}function re(){if(S){var Ee,Oe=S.length,et=o.length,kt=new Map(S.map((Lt,Dt)=>[l(Lt,Dt,S),Lt])),it;for(Ee=0,R=new Array(Oe);Ee<et;++Ee)it=o[Ee],it.index=Ee,typeof it.source!="object"&&(it.source=kR(kt,it.source)),typeof it.target!="object"&&(it.target=kR(kt,it.target)),R[it.source.index]=(R[it.source.index]||0)+1,R[it.target.index]=(R[it.target.index]||0)+1;for(Ee=0,U=new Array(et);Ee<et;++Ee)it=o[Ee],U[Ee]=R[it.source.index]/(R[it.source.index]+R[it.target.index]);v=new Array(et),Me(),T=new Array(et),Ie()}}function Me(){if(S)for(var Ee=0,Oe=o.length;Ee<Oe;++Ee)v[Ee]=+f(o[Ee],Ee,o)}function Ie(){if(S)for(var Ee=0,Oe=o.length;Ee<Oe;++Ee)T[Ee]=+b(o[Ee],Ee,o)}return se.initialize=function(Ee,Oe){S=Ee,W=Oe,re()},se.links=function(Ee){return arguments.length?(o=Ee,re(),se):o},se.id=function(Ee){return arguments.length?(l=Ee,se):l},se.iterations=function(Ee){return arguments.length?(K=+Ee,se):K},se.strength=function(Ee){return arguments.length?(f=typeof Ee=="function"?Ee:Ed(+Ee),Me(),se):f},se.distance=function(Ee){return arguments.length?(b=typeof Ee=="function"?Ee:Ed(+Ee),Ie(),se):b},se}function ER(){let o=1;return()=>(o=(1664525*o+1013904223)%4294967296)/4294967296}function zG(o){return o.x}function GG(o){return o.y}var CR=10,SR=Math.PI*(3-Math.sqrt(5));function UG(o){var l,f=1,v=.001,b=1-Math.pow(v,1/300),T=0,S=.6,R=new Map,U=UE(ee),W=m3("tick","end"),K=ER();o==null&&(o=[]);function ee(){se(),W.call("tick",l),f<v&&(U.stop(),W.call("end",l))}function se(Ie){var Ee,Oe=o.length,et;Ie===void 0&&(Ie=1);for(var kt=0;kt<Ie;++kt)for(f+=(T-f)*b,R.forEach(function(it){it(f)}),Ee=0;Ee<Oe;++Ee)et=o[Ee],et.fx==null?et.x+=et.vx*=S:(et.x=et.fx,et.vx=0),et.fy==null?et.y+=et.vy*=S:(et.y=et.fy,et.vy=0);return l}function re(){for(var Ie=0,Ee=o.length,Oe;Ie<Ee;++Ie){if(Oe=o[Ie],Oe.index=Ie,Oe.fx!=null&&(Oe.x=Oe.fx),Oe.fy!=null&&(Oe.y=Oe.fy),isNaN(Oe.x)||isNaN(Oe.y)){var et=CR*Math.sqrt(.5+Ie),kt=Ie*SR;Oe.x=et*Math.cos(kt),Oe.y=et*Math.sin(kt)}(isNaN(Oe.vx)||isNaN(Oe.vy))&&(Oe.vx=Oe.vy=0)}}function Me(Ie){return Ie.initialize&&Ie.initialize(o,K),Ie}return re(),l={tick:se,restart:function(){return U.restart(ee),l},stop:function(){return U.stop(),l},nodes:function(Ie){return arguments.length?(o=Ie,re(),R.forEach(Me),l):o},alpha:function(Ie){return arguments.length?(f=+Ie,l):f},alphaMin:function(Ie){return arguments.length?(v=+Ie,l):v},alphaDecay:function(Ie){return arguments.length?(b=+Ie,l):+b},alphaTarget:function(Ie){return arguments.length?(T=+Ie,l):T},velocityDecay:function(Ie){return arguments.length?(S=1-Ie,l):1-S},randomSource:function(Ie){return arguments.length?(K=Ie,R.forEach(Me),l):K},force:function(Ie,Ee){return arguments.length>1?(Ee==null?R.delete(Ie):R.set(Ie,Me(Ee)),l):R.get(Ie)},find:function(Ie,Ee,Oe){var et=0,kt=o.length,it,Lt,Dt,Pt,Jr;for(Oe==null?Oe=1/0:Oe*=Oe,et=0;et<kt;++et)Pt=o[et],it=Ie-Pt.x,Lt=Ee-Pt.y,Dt=it*it+Lt*Lt,Dt<Oe&&(Jr=Pt,Oe=Dt);return Jr},on:function(Ie,Ee){return arguments.length>1?(W.on(Ie,Ee),l):W.on(Ie)}}}function iC(){var o,l,f,v,b=Ed(-30),T,S=1,R=1/0,U=.81;function W(re){var Me,Ie=o.length,Ee=rC(o,zG,GG).visitAfter(ee);for(v=re,Me=0;Me<Ie;++Me)l=o[Me],Ee.visit(se)}function K(){if(o){var re,Me=o.length,Ie;for(T=new Array(Me),re=0;re<Me;++re)Ie=o[re],T[Ie.index]=+b(Ie,re,o)}}function ee(re){var Me=0,Ie,Ee,Oe=0,et,kt,it;if(re.length){for(et=kt=it=0;it<4;++it)(Ie=re[it])&&(Ee=Math.abs(Ie.value))&&(Me+=Ie.value,Oe+=Ee,et+=Ee*Ie.x,kt+=Ee*Ie.y);re.x=et/Oe,re.y=kt/Oe}else{Ie=re,Ie.x=Ie.data.x,Ie.y=Ie.data.y;do Me+=T[Ie.data.index];while(Ie=Ie.next)}re.value=Me}function se(re,Me,Ie,Ee){if(!re.value)return!0;var Oe=re.x-l.x,et=re.y-l.y,kt=Ee-Me,it=Oe*Oe+et*et;if(kt*kt/U<it)return it<R&&(Oe===0&&(Oe=R0(f),it+=Oe*Oe),et===0&&(et=R0(f),it+=et*et),it<S&&(it=Math.sqrt(S*it)),l.vx+=Oe*re.value*v/it,l.vy+=et*re.value*v/it),!0;if(!(re.length||it>=R)){(re.data!==l||re.next)&&(Oe===0&&(Oe=R0(f),it+=Oe*Oe),et===0&&(et=R0(f),it+=et*et),it<S&&(it=Math.sqrt(S*it)));do re.data!==l&&(kt=T[re.data.index]*v/it,l.vx+=Oe*kt,l.vy+=et*kt);while(re=re.next)}}return W.initialize=function(re,Me){o=re,f=Me,K()},W.strength=function(re){return arguments.length?(b=typeof re=="function"?re:Ed(+re),K(),W):b},W.distanceMin=function(re){return arguments.length?(S=re*re,W):Math.sqrt(S)},W.distanceMax=function(re){return arguments.length?(R=re*re,W):Math.sqrt(R)},W.theta=function(re){return arguments.length?(U=re*re,W):Math.sqrt(U)},W}var j1=o=>()=>o;function nC(o,{sourceEvent:l,target:f,transform:v,dispatch:b}){Object.defineProperties(this,{type:{value:o,enumerable:!0,configurable:!0},sourceEvent:{value:l,enumerable:!0,configurable:!0},target:{value:f,enumerable:!0,configurable:!0},transform:{value:v,enumerable:!0,configurable:!0},_:{value:b}})}function Iu(o,l,f){this.k=o,this.x=l,this.y=f}Iu.prototype={constructor:Iu,scale:function(o){return o===1?this:new Iu(this.k*o,this.x,this.y)},translate:function(o,l){return o===0&l===0?this:new Iu(this.k,this.x+this.k*o,this.y+this.k*l)},apply:function(o){return[o[0]*this.k+this.x,o[1]*this.k+this.y]},applyX:function(o){return o*this.k+this.x},applyY:function(o){return o*this.k+this.y},invert:function(o){return[(o[0]-this.x)/this.k,(o[1]-this.y)/this.k]},invertX:function(o){return(o-this.x)/this.k},invertY:function(o){return(o-this.y)/this.k},rescaleX:function(o){return o.copy().domain(o.range().map(this.invertX,this).map(o.invert,o))},rescaleY:function(o){return o.copy().domain(o.range().map(this.invertY,this).map(o.invert,o))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var K3=new Iu(1,0,0);Ia.prototype=Iu.prototype;function Ia(o){for(;!o.__zoom;)if(!(o=o.parentNode))return K3;return o.__zoom}function aC(o){o.stopImmediatePropagation()}function Sd(o){o.preventDefault(),o.stopImmediatePropagation()}function gv(o){return(!o.ctrlKey||o.type==="wheel")&&!o.button}function jG(){var o=this;return o instanceof SVGElement?(o=o.ownerSVGElement||o,o.hasAttribute("viewBox")?(o=o.viewBox.baseVal,[[o.x,o.y],[o.x+o.width,o.y+o.height]]):[[0,0],[o.width.baseVal.value,o.height.baseVal.value]]):[[0,0],[o.clientWidth,o.clientHeight]]}function AR(){return this.__zoom||K3}function HG(o){return-o.deltaY*(o.deltaMode===1?.05:o.deltaMode?1:.002)*(o.ctrlKey?10:1)}function VG(){return navigator.maxTouchPoints||"ontouchstart"in this}function WG(o,l,f){var v=o.invertX(l[0][0])-f[0][0],b=o.invertX(l[1][0])-f[1][0],T=o.invertY(l[0][1])-f[0][1],S=o.invertY(l[1][1])-f[1][1];return o.translate(b>v?(v+b)/2:Math.min(0,v)||Math.max(0,b),S>T?(T+S)/2:Math.min(0,T)||Math.max(0,S))}function MR(){var o=gv,l=jG,f=WG,v=HG,b=VG,T=[0,1/0],S=[[-1/0,-1/0],[1/0,1/0]],R=250,U=qz,W=m3("start","zoom","end"),K,ee,se,re=500,Me=150,Ie=0,Ee=10;function Oe(Ft){Ft.property("__zoom",AR).on("wheel.zoom",Jr,{passive:!1}).on("mousedown.zoom",di).on("dblclick.zoom",Ur).filter(b).on("touchstart.zoom",$r).on("touchmove.zoom",Ki).on("touchend.zoom touchcancel.zoom",gn).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}Oe.transform=function(Ft,Ri,Yt,Tr){var We=Ft.selection?Ft.selection():Ft;We.property("__zoom",AR),Ft!==We?Lt(Ft,Ri,Yt,Tr):We.interrupt().each(function(){Dt(this,arguments).event(Tr).start().zoom(null,typeof Ri=="function"?Ri.apply(this,arguments):Ri).end()})},Oe.scaleBy=function(Ft,Ri,Yt,Tr){Oe.scaleTo(Ft,function(){var We=this.__zoom.k,ot=typeof Ri=="function"?Ri.apply(this,arguments):Ri;return We*ot},Yt,Tr)},Oe.scaleTo=function(Ft,Ri,Yt,Tr){Oe.transform(Ft,function(){var We=l.apply(this,arguments),ot=this.__zoom,Ze=Yt==null?it(We):typeof Yt=="function"?Yt.apply(this,arguments):Yt,Xt=ot.invert(Ze),Qt=typeof Ri=="function"?Ri.apply(this,arguments):Ri;return f(kt(et(ot,Qt),Ze,Xt),We,S)},Yt,Tr)},Oe.translateBy=function(Ft,Ri,Yt,Tr){Oe.transform(Ft,function(){return f(this.__zoom.translate(typeof Ri=="function"?Ri.apply(this,arguments):Ri,typeof Yt=="function"?Yt.apply(this,arguments):Yt),l.apply(this,arguments),S)},null,Tr)},Oe.translateTo=function(Ft,Ri,Yt,Tr,We){Oe.transform(Ft,function(){var ot=l.apply(this,arguments),Ze=this.__zoom,Xt=Tr==null?it(ot):typeof Tr=="function"?Tr.apply(this,arguments):Tr;return f(K3.translate(Xt[0],Xt[1]).scale(Ze.k).translate(typeof Ri=="function"?-Ri.apply(this,arguments):-Ri,typeof Yt=="function"?-Yt.apply(this,arguments):-Yt),ot,S)},Tr,We)};function et(Ft,Ri){return Ri=Math.max(T[0],Math.min(T[1],Ri)),Ri===Ft.k?Ft:new Iu(Ri,Ft.x,Ft.y)}function kt(Ft,Ri,Yt){var Tr=Ri[0]-Yt[0]*Ft.k,We=Ri[1]-Yt[1]*Ft.k;return Tr===Ft.x&&We===Ft.y?Ft:new Iu(Ft.k,Tr,We)}function it(Ft){return[(+Ft[0][0]+ +Ft[1][0])/2,(+Ft[0][1]+ +Ft[1][1])/2]}function Lt(Ft,Ri,Yt,Tr){Ft.on("start.zoom",function(){Dt(this,arguments).event(Tr).start()}).on("interrupt.zoom end.zoom",function(){Dt(this,arguments).event(Tr).end()}).tween("zoom",function(){var We=this,ot=arguments,Ze=Dt(We,ot).event(Tr),Xt=l.apply(We,ot),Qt=Yt==null?it(Xt):typeof Yt=="function"?Yt.apply(We,ot):Yt,yr=Math.max(Xt[1][0]-Xt[0][0],Xt[1][1]-Xt[0][1]),mr=We.__zoom,Lr=typeof Ri=="function"?Ri.apply(We,ot):Ri,zi=U(mr.invert(Qt).concat(yr/mr.k),Lr.invert(Qt).concat(yr/Lr.k));return function(Oi){if(Oi===1)Oi=Lr;else{var jn=zi(Oi),Dn=yr/jn[2];Oi=new Iu(Dn,Qt[0]-jn[0]*Dn,Qt[1]-jn[1]*Dn)}Ze.zoom(null,Oi)}})}function Dt(Ft,Ri,Yt){return!Yt&&Ft.__zooming||new Pt(Ft,Ri)}function Pt(Ft,Ri){this.that=Ft,this.args=Ri,this.active=0,this.sourceEvent=null,this.extent=l.apply(Ft,Ri),this.taps=0}Pt.prototype={event:function(Ft){return Ft&&(this.sourceEvent=Ft),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(Ft,Ri){return this.mouse&&Ft!=="mouse"&&(this.mouse[1]=Ri.invert(this.mouse[0])),this.touch0&&Ft!=="touch"&&(this.touch0[1]=Ri.invert(this.touch0[0])),this.touch1&&Ft!=="touch"&&(this.touch1[1]=Ri.invert(this.touch1[0])),this.that.__zoom=Ri,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(Ft){var Ri=Gh(this.that).datum();W.call(Ft,this.that,new nC(Ft,{sourceEvent:this.sourceEvent,target:Oe,type:Ft,transform:this.that.__zoom,dispatch:W}),Ri)}};function Jr(Ft,...Ri){if(!o.apply(this,arguments))return;var Yt=Dt(this,Ri).event(Ft),Tr=this.__zoom,We=Math.max(T[0],Math.min(T[1],Tr.k*Math.pow(2,v.apply(this,arguments)))),ot=bd(Ft);if(Yt.wheel)(Yt.mouse[0][0]!==ot[0]||Yt.mouse[0][1]!==ot[1])&&(Yt.mouse[1]=Tr.invert(Yt.mouse[0]=ot)),clearTimeout(Yt.wheel);else{if(Tr.k===We)return;Yt.mouse=[ot,Tr.invert(ot)],z3(this),Yt.start()}Sd(Ft),Yt.wheel=setTimeout(Ze,Me),Yt.zoom("mouse",f(kt(et(Tr,We),Yt.mouse[0],Yt.mouse[1]),Yt.extent,S));function Ze(){Yt.wheel=null,Yt.end()}}function di(Ft,...Ri){if(se||!o.apply(this,arguments))return;var Yt=Ft.currentTarget,Tr=Dt(this,Ri,!0).event(Ft),We=Gh(Ft.view).on("mousemove.zoom",Qt,!0).on("mouseup.zoom",yr,!0),ot=bd(Ft,Yt),Ze=Ft.clientX,Xt=Ft.clientY;DL(Ft.view),aC(Ft),Tr.mouse=[ot,this.__zoom.invert(ot)],z3(this),Tr.start();function Qt(mr){if(Sd(mr),!Tr.moved){var Lr=mr.clientX-Ze,zi=mr.clientY-Xt;Tr.moved=Lr*Lr+zi*zi>Ie}Tr.event(mr).zoom("mouse",f(kt(Tr.that.__zoom,Tr.mouse[0]=bd(mr,Yt),Tr.mouse[1]),Tr.extent,S))}function yr(mr){We.on("mousemove.zoom mouseup.zoom",null),IL(mr.view,Tr.moved),Sd(mr),Tr.event(mr).end()}}function Ur(Ft,...Ri){if(o.apply(this,arguments)){var Yt=this.__zoom,Tr=bd(Ft.changedTouches?Ft.changedTouches[0]:Ft,this),We=Yt.invert(Tr),ot=Yt.k*(Ft.shiftKey?.5:2),Ze=f(kt(et(Yt,ot),Tr,We),l.apply(this,Ri),S);Sd(Ft),R>0?Gh(this).transition().duration(R).call(Lt,Ze,Tr,Ft):Gh(this).call(Oe.transform,Ze,Tr,Ft)}}function $r(Ft,...Ri){if(o.apply(this,arguments)){var Yt=Ft.touches,Tr=Yt.length,We=Dt(this,Ri,Ft.changedTouches.length===Tr).event(Ft),ot,Ze,Xt,Qt;for(aC(Ft),Ze=0;Ze<Tr;++Ze)Xt=Yt[Ze],Qt=bd(Xt,this),Qt=[Qt,this.__zoom.invert(Qt),Xt.identifier],We.touch0?!We.touch1&&We.touch0[2]!==Qt[2]&&(We.touch1=Qt,We.taps=0):(We.touch0=Qt,ot=!0,We.taps=1+!!K);K&&(K=clearTimeout(K)),ot&&(We.taps<2&&(ee=Qt[0],K=setTimeout(function(){K=null},re)),z3(this),We.start())}}function Ki(Ft,...Ri){if(this.__zooming){var Yt=Dt(this,Ri).event(Ft),Tr=Ft.changedTouches,We=Tr.length,ot,Ze,Xt,Qt;for(Sd(Ft),ot=0;ot<We;++ot)Ze=Tr[ot],Xt=bd(Ze,this),Yt.touch0&&Yt.touch0[2]===Ze.identifier?Yt.touch0[0]=Xt:Yt.touch1&&Yt.touch1[2]===Ze.identifier&&(Yt.touch1[0]=Xt);if(Ze=Yt.that.__zoom,Yt.touch1){var yr=Yt.touch0[0],mr=Yt.touch0[1],Lr=Yt.touch1[0],zi=Yt.touch1[1],Oi=(Oi=Lr[0]-yr[0])*Oi+(Oi=Lr[1]-yr[1])*Oi,jn=(jn=zi[0]-mr[0])*jn+(jn=zi[1]-mr[1])*jn;Ze=et(Ze,Math.sqrt(Oi/jn)),Xt=[(yr[0]+Lr[0])/2,(yr[1]+Lr[1])/2],Qt=[(mr[0]+zi[0])/2,(mr[1]+zi[1])/2]}else if(Yt.touch0)Xt=Yt.touch0[0],Qt=Yt.touch0[1];else return;Yt.zoom("touch",f(kt(Ze,Xt,Qt),Yt.extent,S))}}function gn(Ft,...Ri){if(this.__zooming){var Yt=Dt(this,Ri).event(Ft),Tr=Ft.changedTouches,We=Tr.length,ot,Ze;for(aC(Ft),se&&clearTimeout(se),se=setTimeout(function(){se=null},re),ot=0;ot<We;++ot)Ze=Tr[ot],Yt.touch0&&Yt.touch0[2]===Ze.identifier?delete Yt.touch0:Yt.touch1&&Yt.touch1[2]===Ze.identifier&&delete Yt.touch1;if(Yt.touch1&&!Yt.touch0&&(Yt.touch0=Yt.touch1,delete Yt.touch1),Yt.touch0)Yt.touch0[1]=this.__zoom.invert(Yt.touch0[0]);else if(Yt.end(),Yt.taps===2&&(Ze=bd(Ze,this),Math.hypot(ee[0]-Ze[0],ee[1]-Ze[1])<Ee)){var Xt=Gh(this).on("dblclick.zoom");Xt&&Xt.apply(this,arguments)}}}return Oe.wheelDelta=function(Ft){return arguments.length?(v=typeof Ft=="function"?Ft:j1(+Ft),Oe):v},Oe.filter=function(Ft){return arguments.length?(o=typeof Ft=="function"?Ft:j1(!!Ft),Oe):o},Oe.touchable=function(Ft){return arguments.length?(b=typeof Ft=="function"?Ft:j1(!!Ft),Oe):b},Oe.extent=function(Ft){return arguments.length?(l=typeof Ft=="function"?Ft:j1([[+Ft[0][0],+Ft[0][1]],[+Ft[1][0],+Ft[1][1]]]),Oe):l},Oe.scaleExtent=function(Ft){return arguments.length?(T[0]=+Ft[0],T[1]=+Ft[1],Oe):[T[0],T[1]]},Oe.translateExtent=function(Ft){return arguments.length?(S[0][0]=+Ft[0][0],S[1][0]=+Ft[1][0],S[0][1]=+Ft[0][1],S[1][1]=+Ft[1][1],Oe):[[S[0][0],S[0][1]],[S[1][0],S[1][1]]]},Oe.constrain=function(Ft){return arguments.length?(f=Ft,Oe):f},Oe.duration=function(Ft){return arguments.length?(R=+Ft,Oe):R},Oe.interpolate=function(Ft){return arguments.length?(U=Ft,Oe):U},Oe.on=function(){var Ft=W.on.apply(W,arguments);return Ft===W?Oe:Ft},Oe.clickDistance=function(Ft){return arguments.length?(Ie=(Ft=+Ft)*Ft,Oe):Math.sqrt(Ie)},Oe.tapDistance=function(Ft){return arguments.length?(Ee=+Ft,Oe):Ee},Oe}Ot();var LR={extension:{type:Ke.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await Promise.resolve().then(()=>(rT(),M9))}};Ot();var YG={extension:{type:Ke.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await Promise.resolve().then(()=>(R9(),L9))}};Ot(),nb(),Kx(),Ot(),Ye(),v2();var sC;function qG(o){return sC!==void 0||(sC=(()=>{let l={stencil:!0,failIfMajorPerformanceCaveat:o??p1.defaultOptions.failIfMajorPerformanceCaveat};try{if(!Ya.get().getWebGLRenderingContext())return!1;let f=Ya.get().createCanvas().getContext("webgl",l),v=!!f?.getContextAttributes()?.stencil;if(f){let b=f.getExtension("WEBGL_lose_context");b&&b.loseContext()}return f=null,v}catch{return!1}})()),sC}Ye();var Z3;async function XG(o={}){return Z3!==void 0||(Z3=await(async()=>{let l=Ya.get().getNavigator().gpu;if(!l)return!1;try{return await(await l.requestAdapter(o)).requestDevice(),!0}catch{return!1}})()),Z3}v2();var oC=["webgl","webgpu","canvas"];async function KG(o){let l=[];o.preference?(l.push(o.preference),oC.forEach(T=>{T!==o.preference&&l.push(T)})):l=oC.slice();let f,v={};for(let T=0;T<l.length;T++){let S=l[T];if(S==="webgpu"&&await XG()){let{WebGPURenderer:R}=await Promise.resolve().then(()=>(e$(),jT));f=R,v={...o,...o.webgpu};break}else if(S==="webgl"&&qG(o.failIfMajorPerformanceCaveat??p1.defaultOptions.failIfMajorPerformanceCaveat)){let{WebGLRenderer:R}=await Promise.resolve().then(()=>(S$(),aL));f=R,v={...o,...o.webgl};break}else if(S==="canvas")throw v={...o},new Error("CanvasRenderer is not yet implemented")}if(delete v.webgpu,delete v.webgl,!f)throw new Error("No available renderer for the current environment");let b=new f;return await b.init(v),b}Ch(),X9(),Sa();var RR=class Tte{constructor(...l){this.stage=new ms,l[0]!==void 0&&Wn(Cr,"Application constructor options are deprecated, please use Application.init() instead.")}async init(l){l={...l},this.renderer=await KG(l),Tte._plugins.forEach(f=>{f.init.call(this,l)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return Wn(Cr,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(l=!1,f=!1){let v=Tte._plugins.slice(0);v.reverse(),v.forEach(b=>{b.destroy.call(this)}),this.stage.destroy(f),this.stage=null,this.renderer.destroy(l),this.renderer=null}};RR._plugins=[];var DR=RR;Kr.handleByList(Ke.Application,DR._plugins),Kr.add(k2),Rs(),Sa(),bg();var ZG=class extends gy{constructor(o,l){let{text:f,resolution:v,style:b,anchor:T,width:S,height:R,roundPixels:U,...W}=o;super({...W}),this.batched=!0,this._resolution=null,this._autoResolution=!0,this._didTextUpdate=!0,this._styleClass=l,this.text=f??"",this.style=b,this.resolution=v??null,this.allowChildren=!1,this._anchor=new Qa({_onUpdate:()=>{this.onViewUpdate()}}),T&&(this.anchor=T),this.roundPixels=U??!1,S!==void 0&&(this.width=S),R!==void 0&&(this.height=R)}get anchor(){return this._anchor}set anchor(o){typeof o=="number"?this._anchor.set(o):this._anchor.copyFrom(o)}set text(o){o=o.toString(),this._text!==o&&(this._text=o,this.onViewUpdate())}get text(){return this._text}set resolution(o){this._autoResolution=o===null,this._resolution=o,this.onViewUpdate()}get resolution(){return this._resolution}get style(){return this._style}set style(o){o=o||{},this._style?.off("update",this.onViewUpdate,this),o instanceof this._styleClass?this._style=o:this._style=new this._styleClass(o),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(o){this._setWidth(o,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(o){this._setHeight(o,this.bounds.height)}getSize(o){return o||(o={}),o.width=Math.abs(this.scale.x)*this.bounds.width,o.height=Math.abs(this.scale.y)*this.bounds.height,o}setSize(o,l){typeof o=="object"?(l=o.height??o.width,o=o.width):l??(l=o),o!==void 0&&this._setWidth(o,this.bounds.width),l!==void 0&&this._setHeight(l,this.bounds.height)}containsPoint(o){let l=this.bounds.width,f=this.bounds.height,v=-l*this.anchor.x,b=0;return o.x>=v&&o.x<=v+l&&(b=-f*this.anchor.y,o.y>=b&&o.y<=b+f)}onViewUpdate(){this._boundsDirty=!0,this.didViewUpdate||(this._didTextUpdate=!0),super.onViewUpdate()}_getKey(){return`${this.text}:${this._style.styleKey}:${this._resolution}`}destroy(o=!1){super.destroy(o),this.owner=null,this._bounds=null,this._anchor=null,(typeof o=="boolean"?o:o?.style)&&this._style.destroy(o),this._style=null,this._text=null}};function QG(o,l){let f=o[0]??{};return(typeof f=="string"||o[1])&&(Wn(Cr,`use new ${l}({ text: "hi!", style }) instead`),f={text:f,style:o[1]}),f}t2(),Tc();var JG=class extends ZG{constructor(...o){let l=QG(o,"Text");super(l,ou),this.renderPipeId="text"}updateBounds(){let o=this._bounds,l=this._anchor,f=lh.measureText(this._text,this._style),{width:v,height:b}=f;o.minX=-l._x*v,o.maxX=o.minX+v,o.minY=-l._y*b,o.maxY=o.minY+b}};X6(),ib(),Ch(),vk(),Ir();var Rte=Sn(Eb(),1);Kr.add(LR,YG);var H1=Object.freeze({Linear:Object.freeze({None:function(o){return o},In:function(o){return o},Out:function(o){return o},InOut:function(o){return o}}),Quadratic:Object.freeze({In:function(o){return o*o},Out:function(o){return o*(2-o)},InOut:function(o){return(o*=2)<1?.5*o*o:-.5*(--o*(o-2)-1)}}),Cubic:Object.freeze({In:function(o){return o*o*o},Out:function(o){return--o*o*o+1},InOut:function(o){return(o*=2)<1?.5*o*o*o:.5*((o-=2)*o*o+2)}}),Quartic:Object.freeze({In:function(o){return o*o*o*o},Out:function(o){return 1- --o*o*o*o},InOut:function(o){return(o*=2)<1?.5*o*o*o*o:-.5*((o-=2)*o*o*o-2)}}),Quintic:Object.freeze({In:function(o){return o*o*o*o*o},Out:function(o){return--o*o*o*o*o+1},InOut:function(o){return(o*=2)<1?.5*o*o*o*o*o:.5*((o-=2)*o*o*o*o+2)}}),Sinusoidal:Object.freeze({In:function(o){return 1-Math.sin((1-o)*Math.PI/2)},Out:function(o){return Math.sin(o*Math.PI/2)},InOut:function(o){return .5*(1-Math.sin(Math.PI*(.5-o)))}}),Exponential:Object.freeze({In:function(o){return o===0?0:Math.pow(1024,o-1)},Out:function(o){return o===1?1:1-Math.pow(2,-10*o)},InOut:function(o){return o===0?0:o===1?1:(o*=2)<1?.5*Math.pow(1024,o-1):.5*(-Math.pow(2,-10*(o-1))+2)}}),Circular:Object.freeze({In:function(o){return 1-Math.sqrt(1-o*o)},Out:function(o){return Math.sqrt(1- --o*o)},InOut:function(o){return(o*=2)<1?-.5*(Math.sqrt(1-o*o)-1):.5*(Math.sqrt(1-(o-=2)*o)+1)}}),Elastic:Object.freeze({In:function(o){return o===0?0:o===1?1:-Math.pow(2,10*(o-1))*Math.sin((o-1.1)*5*Math.PI)},Out:function(o){return o===0?0:o===1?1:Math.pow(2,-10*o)*Math.sin((o-.1)*5*Math.PI)+1},InOut:function(o){return o===0?0:o===1?1:(o*=2,o<1?-.5*Math.pow(2,10*(o-1))*Math.sin((o-1.1)*5*Math.PI):.5*Math.pow(2,-10*(o-1))*Math.sin((o-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(o){var l=1.70158;return o===1?1:o*o*((l+1)*o-l)},Out:function(o){var l=1.70158;return o===0?0:--o*o*((l+1)*o+l)+1},InOut:function(o){var l=2.5949095;return(o*=2)<1?.5*(o*o*((l+1)*o-l)):.5*((o-=2)*o*((l+1)*o+l)+2)}}),Bounce:Object.freeze({In:function(o){return 1-H1.Bounce.Out(1-o)},Out:function(o){return o<.36363636363636365?7.5625*o*o:o<.7272727272727273?7.5625*(o-=.5454545454545454)*o+.75:o<.9090909090909091?7.5625*(o-=.8181818181818182)*o+.9375:7.5625*(o-=.9545454545454546)*o+.984375},InOut:function(o){return o<.5?H1.Bounce.In(o*2)*.5:H1.Bounce.Out(o*2-1)*.5+.5}}),generatePow:function(o){return o===void 0&&(o=4),o=o<Number.EPSILON?Number.EPSILON:o,o=o>1e4?1e4:o,{In:function(l){return Math.pow(l,o)},Out:function(l){return 1-Math.pow(1-l,o)},InOut:function(l){return l<.5?Math.pow(l*2,o)/2:(1-Math.pow(2-l*2,o))/2+.5}}}}),mv=function(){return performance.now()},Q3=function(){function o(){for(var l=[],f=0;f<arguments.length;f++)l[f]=arguments[f];this._tweens={},this._tweensAddedDuringUpdate={},this.add.apply(this,l)}return o.prototype.getAll=function(){var l=this;return Object.keys(this._tweens).map(function(f){return l._tweens[f]})},o.prototype.removeAll=function(){this._tweens={}},o.prototype.add=function(){for(var l,f=[],v=0;v<arguments.length;v++)f[v]=arguments[v];for(var b=0,T=f;b<T.length;b++){var S=T[b];(l=S._group)===null||l===void 0||l.remove(S),S._group=this,this._tweens[S.getId()]=S,this._tweensAddedDuringUpdate[S.getId()]=S}},o.prototype.remove=function(){for(var l=[],f=0;f<arguments.length;f++)l[f]=arguments[f];for(var v=0,b=l;v<b.length;v++){var T=b[v];T._group=void 0,delete this._tweens[T.getId()],delete this._tweensAddedDuringUpdate[T.getId()]}},o.prototype.allStopped=function(){return this.getAll().every(function(l){return!l.isPlaying()})},o.prototype.update=function(l,f){l===void 0&&(l=mv()),f===void 0&&(f=!0);var v=Object.keys(this._tweens);if(v.length!==0)for(;v.length>0;){this._tweensAddedDuringUpdate={};for(var b=0;b<v.length;b++){var T=this._tweens[v[b]],S=!f;T&&T.update(l,S)===!1&&!f&&this.remove(T)}v=Object.keys(this._tweensAddedDuringUpdate)}},o}(),V1={Linear:function(o,l){var f=o.length-1,v=f*l,b=Math.floor(v),T=V1.Utils.Linear;return l<0?T(o[0],o[1],v):l>1?T(o[f],o[f-1],f-v):T(o[b],o[b+1>f?f:b+1],v-b)},Bezier:function(o,l){for(var f=0,v=o.length-1,b=Math.pow,T=V1.Utils.Bernstein,S=0;S<=v;S++)f+=b(1-l,v-S)*b(l,S)*o[S]*T(v,S);return f},CatmullRom:function(o,l){var f=o.length-1,v=f*l,b=Math.floor(v),T=V1.Utils.CatmullRom;return o[0]===o[f]?(l<0&&(b=Math.floor(v=f*(1+l))),T(o[(b-1+f)%f],o[b],o[(b+1)%f],o[(b+2)%f],v-b)):l<0?o[0]-(T(o[0],o[0],o[1],o[1],-v)-o[0]):l>1?o[f]-(T(o[f],o[f],o[f-1],o[f-1],v-f)-o[f]):T(o[b?b-1:0],o[b],o[f<b+1?f:b+1],o[f<b+2?f:b+2],v-b)},Utils:{Linear:function(o,l,f){return(l-o)*f+o},Bernstein:function(o,l){var f=V1.Utils.Factorial;return f(o)/f(l)/f(o-l)},Factorial:function(){var o=[1];return function(l){var f=1;if(o[l])return o[l];for(var v=l;v>1;v--)f*=v;return o[l]=f,f}}(),CatmullRom:function(o,l,f,v,b){var T=(f-o)*.5,S=(v-l)*.5,R=b*b,U=b*R;return(2*l-2*f+T+S)*U+(-3*l+3*f-2*T-S)*R+T*b+l}}},lC=function(){function o(){}return o.nextId=function(){return o._nextId++},o._nextId=0,o}(),uC=new Q3,J3=function(){function o(l,f){this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=H1.Linear.None,this._interpolationFunction=V1.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=lC.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1,this._object=l,typeof f=="object"?(this._group=f,f.add(this)):f===!0&&(this._group=uC,uC.add(this))}return o.prototype.getId=function(){return this._id},o.prototype.isPlaying=function(){return this._isPlaying},o.prototype.isPaused=function(){return this._isPaused},o.prototype.getDuration=function(){return this._duration},o.prototype.to=function(l,f){if(f===void 0&&(f=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=l,this._propertiesAreSetUp=!1,this._duration=f<0?0:f,this},o.prototype.duration=function(l){return l===void 0&&(l=1e3),this._duration=l<0?0:l,this},o.prototype.dynamic=function(l){return l===void 0&&(l=!1),this._isDynamic=l,this},o.prototype.start=function(l,f){if(l===void 0&&(l=mv()),f===void 0&&(f=!1),this._isPlaying)return this;if(this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var v in this._valuesStartRepeat)this._swapEndStartRepeatValues(v),this._valuesStart[v]=this._valuesStartRepeat[v]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=l,this._startTime+=this._delayTime,!this._propertiesAreSetUp||f){if(this._propertiesAreSetUp=!0,!this._isDynamic){var b={};for(var T in this._valuesEnd)b[T]=this._valuesEnd[T];this._valuesEnd=b}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,f)}return this},o.prototype.startFromCurrentValues=function(l){return this.start(l,!0)},o.prototype._setupProperties=function(l,f,v,b,T){for(var S in v){var R=l[S],U=Array.isArray(R),W=U?"array":typeof R,K=!U&&Array.isArray(v[S]);if(!(W==="undefined"||W==="function")){if(K){var ee=v[S];if(ee.length===0)continue;for(var se=[R],re=0,Me=ee.length;re<Me;re+=1){var Ie=this._handleRelativeValue(R,ee[re]);if(isNaN(Ie)){K=!1,console.warn("Found invalid interpolation list. Skipping.");break}se.push(Ie)}K&&(v[S]=se)}if((W==="object"||U)&&R&&!K){f[S]=U?[]:{};var Ee=R;for(var Oe in Ee)f[S][Oe]=Ee[Oe];b[S]=U?[]:{};var ee=v[S];if(!this._isDynamic){var et={};for(var Oe in ee)et[Oe]=ee[Oe];v[S]=ee=et}this._setupProperties(Ee,f[S],ee,b[S],T)}else(typeof f[S]>"u"||T)&&(f[S]=R),U||(f[S]*=1),K?b[S]=v[S].slice().reverse():b[S]=f[S]||0}}},o.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},o.prototype.end=function(){return this._goToEnd=!0,this.update(this._startTime+this._duration),this},o.prototype.pause=function(l){return l===void 0&&(l=mv()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=l,this)},o.prototype.resume=function(l){return l===void 0&&(l=mv()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=l-this._pauseStart,this._pauseStart=0,this)},o.prototype.stopChainedTweens=function(){for(var l=0,f=this._chainedTweens.length;l<f;l++)this._chainedTweens[l].stop();return this},o.prototype.group=function(l){return l?(l.add(this),this):(console.warn("tween.group() without args has been removed, use group.add(tween) instead."),this)},o.prototype.remove=function(){var l;return(l=this._group)===null||l===void 0||l.remove(this),this},o.prototype.delay=function(l){return l===void 0&&(l=0),this._delayTime=l,this},o.prototype.repeat=function(l){return l===void 0&&(l=0),this._initialRepeat=l,this._repeat=l,this},o.prototype.repeatDelay=function(l){return this._repeatDelayTime=l,this},o.prototype.yoyo=function(l){return l===void 0&&(l=!1),this._yoyo=l,this},o.prototype.easing=function(l){return l===void 0&&(l=H1.Linear.None),this._easingFunction=l,this},o.prototype.interpolation=function(l){return l===void 0&&(l=V1.Linear),this._interpolationFunction=l,this},o.prototype.chain=function(){for(var l=[],f=0;f<arguments.length;f++)l[f]=arguments[f];return this._chainedTweens=l,this},o.prototype.onStart=function(l){return this._onStartCallback=l,this},o.prototype.onEveryStart=function(l){return this._onEveryStartCallback=l,this},o.prototype.onUpdate=function(l){return this._onUpdateCallback=l,this},o.prototype.onRepeat=function(l){return this._onRepeatCallback=l,this},o.prototype.onComplete=function(l){return this._onCompleteCallback=l,this},o.prototype.onStop=function(l){return this._onStopCallback=l,this},o.prototype.update=function(l,f){var v=this,b;if(l===void 0&&(l=mv()),f===void 0&&(f=o.autoStartOnUpdate),this._isPaused)return!0;var T;if(!this._goToEnd&&!this._isPlaying)if(f)this.start(l,!0);else return!1;if(this._goToEnd=!1,l<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var S=l-this._startTime,R=this._duration+((b=this._repeatDelayTime)!==null&&b!==void 0?b:this._delayTime),U=this._duration+this._repeat*R,W=function(){if(v._duration===0||S>U)return 1;var Ie=Math.trunc(S/R),Ee=S-Ie*R,Oe=Math.min(Ee/v._duration,1);return Oe===0&&S===v._duration?1:Oe},K=W(),ee=this._easingFunction(K);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,ee),this._onUpdateCallback&&this._onUpdateCallback(this._object,K),this._duration===0||S>=this._duration)if(this._repeat>0){var se=Math.min(Math.trunc((S-this._duration)/R)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=se);for(T in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[T]=="string"&&(this._valuesStartRepeat[T]=this._valuesStartRepeat[T]+parseFloat(this._valuesEnd[T])),this._yoyo&&this._swapEndStartRepeatValues(T),this._valuesStart[T]=this._valuesStartRepeat[T];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=R*se,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var re=0,Me=this._chainedTweens.length;re<Me;re++)this._chainedTweens[re].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},o.prototype._updateProperties=function(l,f,v,b){for(var T in v)if(f[T]!==void 0){var S=f[T]||0,R=v[T],U=Array.isArray(l[T]),W=Array.isArray(R),K=!U&&W;K?l[T]=this._interpolationFunction(R,b):typeof R=="object"&&R?this._updateProperties(l[T],S,R,b):(R=this._handleRelativeValue(S,R),typeof R=="number"&&(l[T]=S+(R-S)*b))}},o.prototype._handleRelativeValue=function(l,f){return typeof f!="string"?f:f.charAt(0)==="+"||f.charAt(0)==="-"?l+parseFloat(f):parseFloat(f)},o.prototype._swapEndStartRepeatValues=function(l){var f=this._valuesStartRepeat[l],v=this._valuesEnd[l];typeof v=="string"?this._valuesStartRepeat[l]=this._valuesStartRepeat[l]+parseFloat(v):this._valuesStartRepeat[l]=this._valuesEnd[l],this._valuesEnd[l]=f},o.autoStartOnUpdate=!1,o}(),Dte=lC.nextId,Rc=uC,Ite=Rc.getAll.bind(Rc),Nte=Rc.removeAll.bind(Rc),eU=Rc.add.bind(Rc),Ote=Rc.remove.bind(Rc),Bte=Rc.update.bind(Rc),Pte=Object.hasOwnProperty,tU=Sn(uL(),1),Fte=(0,tU.default)();function rU(o){return o.document.body.dataset.slug}function yv(o){let l=IR(sU(o,"index"),!0);return l.length===0?"/":l}function iU(o){let l=o.split("/").filter(f=>f!=="").slice(0,-1).map(f=>"..").join("/");return l.length===0&&(l="."),l}function hC(o,l){return nU(iU(o),yv(l))}function nU(...o){return o.filter(l=>l!=="").join("/").replace(/\/\/+/g,"/")}function aU(o,l){return o===l||o.endsWith("/"+l)}function sU(o,l){return aU(o,l)&&(o=o.slice(0,-l.length)),o}function IR(o,l){return o.startsWith("/")&&(o=o.substring(1)),!l&&o.endsWith("/")&&(o=o.slice(0,-1)),o}function oU(o,l){if(!o)return;function f(b){b.target===this&&(b.preventDefault(),b.stopPropagation(),l())}function v(b){b.key.startsWith("Esc")&&(b.preventDefault(),l())}o?.addEventListener("click",f),window.addCleanup(()=>o?.removeEventListener("click",f)),document.addEventListener("keydown",v),window.addCleanup(()=>document.removeEventListener("keydown",v))}function lU(o){for(;o.firstChild;)o.removeChild(o.firstChild)}var NR="graph-visited";function OR(){return new Set(JSON.parse(localStorage.getItem(NR)??"[]"))}function uU(o){let l=OR();l.add(o),localStorage.setItem(NR,JSON.stringify([...l]))}async function hU(o,l){let f=yv(l),v=OR(),b=document.getElementById(o);if(!b)return;lU(b);let{drag:T,zoom:S,depth:R,scale:U,repelForce:W,centerForce:K,linkDistance:ee,fontSize:se,opacityScale:re,removeTags:Me,showTags:Ie,focusOnHover:Ee}=JSON.parse(b.dataset.cfg),Oe=new Map(Object.entries(await fetchData).map(([lr,pi])=>[yv(lr),pi])),et=[],kt=[],it=new Set(Oe.keys()),Lt=new Map;for(let[lr,pi]of Oe.entries()){let Ti=pi.links??[];for(let Yi of Ti)it.has(Yi)&&et.push({source:lr,target:Yi});if(Ie){let Yi=pi.tags.filter(Eo=>!Me.includes(Eo)).map(Eo=>yv("tags/"+Eo));kt.push(...Yi.filter(Eo=>!kt.includes(Eo)));for(let Eo of Yi)et.push({source:lr,target:Eo})}}let Dt=new Set,Pt=[f,"__SENTINEL"];if(R>=0)for(;R>=0&&Pt.length>0;){let lr=Pt.shift();if(lr==="__SENTINEL")R--,Pt.push("__SENTINEL");else{Dt.add(lr);let pi=et.filter(Yi=>Yi.source===lr),Ti=et.filter(Yi=>Yi.target===lr);Pt.push(...pi.map(Yi=>Yi.target),...Ti.map(Yi=>Yi.source))}}else it.forEach(lr=>Dt.add(lr)),Ie&&kt.forEach(lr=>Dt.add(lr));let Jr=[...Dt].map(lr=>{let pi=lr.startsWith("tags/")?"#"+lr.substring(5):Oe.get(lr)?.title??lr;return{id:lr,text:pi,tags:Oe.get(lr)?.tags??[]}}),di={nodes:Jr,links:et.filter(lr=>Dt.has(lr.source)&&Dt.has(lr.target)).map(lr=>({source:Jr.find(pi=>pi.id===lr.source),target:Jr.find(pi=>pi.id===lr.target)}))},Ur=UG(di.nodes).force("charge",iC().strength(-100*W)).force("center",AG().strength(K)).force("link",TR(di.links).distance(ee)).force("collide",$G(lr=>Ri(lr)).iterations(3)),$r=b.offsetWidth,Ki=Math.max(b.offsetHeight,250),gn=["--secondary","--tertiary","--gray","--light","--lightgray","--dark","--darkgray","--bodyFont"].reduce((lr,pi)=>(lr[pi]=getComputedStyle(document.documentElement).getPropertyValue(pi),lr),{}),Ft=lr=>lr.id===f?gn["--secondary"]:v.has(lr.id)||lr.id.startsWith("tags/")?gn["--tertiary"]:gn["--gray"];function Ri(lr){let pi=di.links.filter(Ti=>Ti.source.id===lr.id||Ti.target.id===lr.id).length;return 2+Math.sqrt(pi)}let Yt=null,Tr=new Set,We=[],ot=[];function Ze(lr){if(Yt=lr,lr===null){Tr=new Set;for(let pi of ot)pi.active=!1;for(let pi of We)pi.active=!1}else{Tr=new Set;for(let pi of We){let Ti=pi.simulationData;(Ti.source.id===lr||Ti.target.id===lr)&&(Tr.add(Ti.source.id),Tr.add(Ti.target.id)),pi.active=Ti.source.id===lr||Ti.target.id===lr}for(let pi of ot)pi.active=Tr.has(pi.simulationData.id)}}let Xt=0,Qt=!1;function yr(){Lt.get("link")?.stop();let lr=new Q3;for(let pi of We){let Ti=1;Yt&&(Ti=pi.active?1:.2),pi.color=pi.active?gn["--gray"]:gn["--lightgray"],lr.add(new J3(pi).to({alpha:Ti},200))}lr.getAll().forEach(pi=>pi.start()),Lt.set("link",{update:lr.update.bind(lr),stop(){lr.getAll().forEach(pi=>pi.stop())}})}function mr(){Lt.get("label")?.stop();let lr=new Q3,pi=1/U,Ti=pi*1.1;for(let Yi of ot){let Eo=Yi.simulationData.id;Yt===Eo?lr.add(new J3(Yi.label).to({alpha:1,scale:{x:Ti,y:Ti}},100)):lr.add(new J3(Yi.label).to({alpha:Yi.label.alpha,scale:{x:pi,y:pi}},100))}lr.getAll().forEach(Yi=>Yi.start()),Lt.set("label",{update:lr.update.bind(lr),stop(){lr.getAll().forEach(Yi=>Yi.stop())}})}function Lr(){Lt.get("hover")?.stop();let lr=new Q3;for(let pi of ot){let Ti=1;Yt!==null&&Ee&&(Ti=pi.active?1:.2),lr.add(new J3(pi.gfx,lr).to({alpha:Ti},200))}lr.getAll().forEach(pi=>pi.start()),Lt.set("hover",{update:lr.update.bind(lr),stop(){lr.getAll().forEach(pi=>pi.stop())}})}function zi(){Lr(),yr(),mr()}Lt.forEach(lr=>lr.stop()),Lt.clear();let Oi=new DR;await Oi.init({width:$r,height:Ki,antialias:!0,autoStart:!1,autoDensity:!0,backgroundAlpha:0,preference:"webgpu",resolution:window.devicePixelRatio,eventMode:"static"}),b.appendChild(Oi.canvas);let jn=Oi.stage;jn.interactive=!1;let Dn=new ms({zIndex:3}),Yn=new ms({zIndex:2}),ua=new ms({zIndex:1});jn.addChild(Yn,Dn,ua);for(let lr of di.nodes){let pi=lr.id,Ti=new JG({interactive:!1,eventMode:"none",text:lr.text,alpha:0,anchor:{x:.5,y:1.2},style:{fontSize:se*15,fill:gn["--dark"],fontFamily:gn["--bodyFont"]},resolution:window.devicePixelRatio*4});Ti.scale.set(1/U);let Yi=0,Eo=pi.startsWith("tags/"),BR=new i2({interactive:!0,label:pi,eventMode:"static",hitArea:new t1(0,0,Ri(lr)),cursor:"pointer"}).circle(0,0,Ri(lr)).fill({color:Eo?gn["--light"]:Ft(lr)}).stroke({width:Eo?2:0,color:Ft(lr)}).on("pointerover",dU=>{Ze(dU.target.label),Yi=Ti.alpha,Qt||zi()}).on("pointerleave",()=>{Ze(null),Ti.alpha=Yi,Qt||zi()});Yn.addChild(BR),Dn.addChild(Ti);let cU={simulationData:lr,gfx:BR,label:Ti,color:Ft(lr),alpha:1,active:!1};ot.push(cU)}for(let lr of di.links){let pi=new i2({interactive:!1,eventMode:"none"});ua.addChild(pi);let Ti={simulationData:lr,gfx:pi,color:gn["--lightgray"],alpha:1,active:!1};We.push(Ti)}let Jn=K3;if(T)Gh(Oi.canvas).call(Sz().container(()=>Oi.canvas).subject(()=>di.nodes.find(lr=>lr.id===Yt)).on("start",function(lr){lr.active||Ur.alphaTarget(1).restart(),lr.subject.fx=lr.subject.x,lr.subject.fy=lr.subject.y,lr.subject.__initialDragPos={x:lr.subject.x,y:lr.subject.y,fx:lr.subject.fx,fy:lr.subject.fy},Xt=Date.now(),Qt=!0}).on("drag",function(lr){let pi=lr.subject.__initialDragPos;lr.subject.fx=pi.x+(lr.x-pi.x)/Jn.k,lr.subject.fy=pi.y+(lr.y-pi.y)/Jn.k}).on("end",function(lr){if(lr.active||Ur.alphaTarget(0),lr.subject.fx=null,lr.subject.fy=null,Qt=!1,Date.now()-Xt<500){let pi=di.nodes.find(Yi=>Yi.id===lr.subject.id),Ti=hC(l,pi.id);window.spaNavigate(new URL(Ti,window.location.toString()))}}));else for(let lr of ot)lr.gfx.on("click",()=>{let pi=hC(l,lr.simulationData.id);window.spaNavigate(new URL(pi,window.location.toString()))});S&&Gh(Oi.canvas).call(MR().extent([[0,0],[$r,Ki]]).scaleExtent([.25,4]).on("zoom",({transform:lr})=>{Jn=lr,jn.scale.set(lr.k,lr.k),jn.position.set(lr.x,lr.y);let pi=lr.k*re,Ti=Math.max((pi-1)/3.75,0),Yi=ot.filter(Eo=>Eo.active).flatMap(Eo=>Eo.label);for(let Eo of Dn.children)Yi.includes(Eo)||(Eo.alpha=Ti)}));function co(lr){for(let pi of ot){let{x:Ti,y:Yi}=pi.simulationData;!Ti||!Yi||(pi.gfx.position.set(Ti+$r/2,Yi+Ki/2),pi.label&&pi.label.position.set(Ti+$r/2,Yi+Ki/2))}for(let pi of We){let Ti=pi.simulationData;pi.gfx.clear(),pi.gfx.moveTo(Ti.source.x+$r/2,Ti.source.y+Ki/2),pi.gfx.lineTo(Ti.target.x+$r/2,Ti.target.y+Ki/2).stroke({alpha:pi.alpha,width:1,color:pi.color})}Lt.forEach(pi=>pi.update(lr)),Oi.renderer.render(jn),requestAnimationFrame(co)}let To=requestAnimationFrame(co);window.addCleanup(()=>cancelAnimationFrame(To))}document.addEventListener("nav",async o=>{let l=o.detail.url;uU(yv(l));let f=document.getElementById("global-graph-outer"),v=f?.closest(".sidebar"),b=document.querySelector(".graph");function T(){let K=rU(window);f?.classList.add("active"),b?.classList.add("active"),v&&(v.style.zIndex="1"),hU("global-graph-container",K),oU(f,S)}function S(){f?.classList.remove("active"),b?.classList.remove("active"),v&&(v.style.zIndex="")}async function R(K){(K.key===";"||K.key==="g")&&(K.ctrlKey||K.metaKey)&&!K.shiftKey&&(K.preventDefault(),f?.classList.contains("active")?S():T())}let U=K=>{K.preventDefault(),f?.classList.contains("active")?S():T()},W=document.getElementById("graph-button");W?.addEventListener("click",U),window.addCleanup(()=>W?.removeEventListener("click",U)),document.addEventListener("keydown",R),window.addCleanup(()=>document.removeEventListener("keydown",R))})}(),function(){var na=Object.create,ta=Object.defineProperty,Ua=Object.getOwnPropertyDescriptor,Fa=Object.getOwnPropertyNames,On=Object.getPrototypeOf,dn=Object.prototype.hasOwnProperty,D=(Ot,Vi)=>()=>(Vi||Ot((Vi={exports:{}}).exports,Vi),Vi.exports),hi=(Ot,Vi,Li,jr)=>{if(Vi&&typeof Vi=="object"||typeof Vi=="function")for(let Ir of Fa(Vi))!dn.call(Ot,Ir)&&Ir!==Li&&ta(Ot,Ir,{get:()=>Vi[Ir],enumerable:!(jr=Ua(Vi,Ir))||jr.enumerable});return Ot},oi=(Ot,Vi,Li)=>(Li=Ot!=null?na(On(Ot)):{},hi(Vi||!Ot||!Ot.__esModule?ta(Li,"default",{value:Ot,enumerable:!0}):Li,Ot)),aa=D((Ot,Vi)=>{"use strict";Vi.exports=jr;function Li(gr){return gr instanceof Buffer?Buffer.from(gr):new gr.constructor(gr.buffer.slice(),gr.byteOffset,gr.length)}function jr(gr){if(gr=gr||{},gr.circles)return Ir(gr);let Zr=new Map;if(Zr.set(Date,or=>new Date(or)),Zr.set(Map,(or,Wr)=>new Map(Vr(Array.from(or),Wr))),Zr.set(Set,(or,Wr)=>new Set(Vr(Array.from(or),Wr))),gr.constructorHandlers)for(let or of gr.constructorHandlers)Zr.set(or[0],or[1]);let vr=null;return gr.proto?xi:Ht;function Vr(or,Wr){let xr=Object.keys(or),Zt=new Array(xr.length);for(let dr=0;dr<xr.length;dr++){let nr=xr[dr],qt=or[nr];typeof qt!="object"||qt===null?Zt[nr]=qt:qt.constructor!==Object&&(vr=Zr.get(qt.constructor))?Zt[nr]=vr(qt,Wr):ArrayBuffer.isView(qt)?Zt[nr]=Li(qt):Zt[nr]=Wr(qt)}return Zt}function Ht(or){if(typeof or!="object"||or===null)return or;if(Array.isArray(or))return Vr(or,Ht);if(or.constructor!==Object&&(vr=Zr.get(or.constructor)))return vr(or,Ht);let Wr={};for(let xr in or){if(Object.hasOwnProperty.call(or,xr)===!1)continue;let Zt=or[xr];typeof Zt!="object"||Zt===null?Wr[xr]=Zt:Zt.constructor!==Object&&(vr=Zr.get(Zt.constructor))?Wr[xr]=vr(Zt,Ht):ArrayBuffer.isView(Zt)?Wr[xr]=Li(Zt):Wr[xr]=Ht(Zt)}return Wr}function xi(or){if(typeof or!="object"||or===null)return or;if(Array.isArray(or))return Vr(or,xi);if(or.constructor!==Object&&(vr=Zr.get(or.constructor)))return vr(or,xi);let Wr={};for(let xr in or){let Zt=or[xr];typeof Zt!="object"||Zt===null?Wr[xr]=Zt:Zt.constructor!==Object&&(vr=Zr.get(Zt.constructor))?Wr[xr]=vr(Zt,xi):ArrayBuffer.isView(Zt)?Wr[xr]=Li(Zt):Wr[xr]=xi(Zt)}return Wr}}function Ir(gr){let Zr=[],vr=[],Vr=new Map;if(Vr.set(Date,xr=>new Date(xr)),Vr.set(Map,(xr,Zt)=>new Map(xi(Array.from(xr),Zt))),Vr.set(Set,(xr,Zt)=>new Set(xi(Array.from(xr),Zt))),gr.constructorHandlers)for(let xr of gr.constructorHandlers)Vr.set(xr[0],xr[1]);let Ht=null;return gr.proto?Wr:or;function xi(xr,Zt){let dr=Object.keys(xr),nr=new Array(dr.length);for(let qt=0;qt<dr.length;qt++){let Yr=dr[qt],ii=xr[Yr];if(typeof ii!="object"||ii===null)nr[Yr]=ii;else if(ii.constructor!==Object&&(Ht=Vr.get(ii.constructor)))nr[Yr]=Ht(ii,Zt);else if(ArrayBuffer.isView(ii))nr[Yr]=Li(ii);else{let ki=Zr.indexOf(ii);ki!==-1?nr[Yr]=vr[ki]:nr[Yr]=Zt(ii)}}return nr}function or(xr){if(typeof xr!="object"||xr===null)return xr;if(Array.isArray(xr))return xi(xr,or);if(xr.constructor!==Object&&(Ht=Vr.get(xr.constructor)))return Ht(xr,or);let Zt={};Zr.push(xr),vr.push(Zt);for(let dr in xr){if(Object.hasOwnProperty.call(xr,dr)===!1)continue;let nr=xr[dr];if(typeof nr!="object"||nr===null)Zt[dr]=nr;else if(nr.constructor!==Object&&(Ht=Vr.get(nr.constructor)))Zt[dr]=Ht(nr,or);else if(ArrayBuffer.isView(nr))Zt[dr]=Li(nr);else{let qt=Zr.indexOf(nr);qt!==-1?Zt[dr]=vr[qt]:Zt[dr]=or(nr)}}return Zr.pop(),vr.pop(),Zt}function Wr(xr){if(typeof xr!="object"||xr===null)return xr;if(Array.isArray(xr))return xi(xr,Wr);if(xr.constructor!==Object&&(Ht=Vr.get(xr.constructor)))return Ht(xr,Wr);let Zt={};Zr.push(xr),vr.push(Zt);for(let dr in xr){let nr=xr[dr];if(typeof nr!="object"||nr===null)Zt[dr]=nr;else if(nr.constructor!==Object&&(Ht=Vr.get(nr.constructor)))Zt[dr]=Ht(nr,Wr);else if(ArrayBuffer.isView(nr))Zt[dr]=Li(nr);else{let qt=Zr.indexOf(nr);qt!==-1?Zt[dr]=vr[qt]:Zt[dr]=Wr(nr)}}return Zr.pop(),vr.pop(),Zt}}}),Sn=Object.hasOwnProperty,Ke=oi(aa(),1),Ca=(0,Ke.default)();function ba(Ot,Vi){if(!Ot)return;function Li(Ir){Ir.target===this&&(Ir.preventDefault(),Ir.stopPropagation(),Vi())}function jr(Ir){Ir.key.startsWith("Esc")&&(Ir.preventDefault(),Vi())}Ot?.addEventListener("click",Li),window.addCleanup(()=>Ot?.removeEventListener("click",Li)),document.addEventListener("keydown",jr),window.addCleanup(()=>document.removeEventListener("keydown",jr))}function Kr(Ot){if(!Ot)return;Ot.classList.remove("active");let Vi=document.querySelector(".toolbar"),Li=document.querySelectorAll("hr"),jr=document.getElementById("quartz-root");!Vi||!Li||!jr||(Vi.querySelector("#reader-button")?.setAttribute("data-active","false"),Li.forEach(Ir=>Ir.style.visibility="show"),jr.style.overflow="",jr.style.maxHeight="")}document.addEventListener("nav",()=>{let Ot=document.querySelector(".reader");if(!Ot)return;let Vi=()=>Kr(Ot);ba(Ot,Vi);let Li=Ot.querySelector(".reader-close");Li&&(Li.addEventListener("click",Vi),window.addCleanup(()=>Li.removeEventListener("click",Vi)));function jr(){Ot.classList.add("active");let gr=document.getElementById("quartz-root");gr.style.overflow="hidden",gr.style.maxHeight="0px"}async function Ir(gr){gr.key==="b"&&(gr.ctrlKey||gr.metaKey)&&!gr.shiftKey&&(gr.preventDefault(),Ot.classList.contains("active")?Vi():jr())}document.addEventListener("keydown",Ir),window.addCleanup(()=>document.removeEventListener("keydown",Ir))})}(),function(){document.addEventListener("nav",()=>{let na=document.getElementById("image-popup-modal"),ta=na?.querySelector(".image-popup-img"),Ua=na?.querySelector(".image-popup-close"),Fa=na?.querySelector(".image-popup-backdrop");if(!na||!ta||!Ua||!Fa)return;function On(){na.classList.remove("active"),document.body.style.overflow=""}function dn(hi,oi){ta.src=hi,ta.alt=oi,na.classList.add("active"),document.body.style.overflow="hidden"}let D=document.querySelectorAll(".popover-hint img");for(let hi of D)if(hi instanceof HTMLImageElement){hi.style.cursor="pointer";let oi=()=>dn(hi.src,hi.alt);hi.addEventListener("click",oi),window.addCleanup(()=>hi.removeEventListener("click",oi))}Ua.addEventListener("click",On),Fa.addEventListener("click",On),document.addEventListener("keydown",hi=>{hi.key==="Escape"&&On()}),window.addCleanup(()=>{Ua.removeEventListener("click",On),Fa.removeEventListener("click",On)})})}(),function(){var na=Object.create,ta=Object.defineProperty,Ua=Object.getOwnPropertyDescriptor,Fa=Object.getOwnPropertyNames,On=Object.getPrototypeOf,dn=Object.prototype.hasOwnProperty,D=(e,t)=>()=>(e&&(t=e(e=0)),t),hi=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),oi=(e,t)=>{for(var r in t)ta(e,r,{get:t[r],enumerable:!0})},aa=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Fa(t))!dn.call(e,n)&&n!==r&&ta(e,n,{get:()=>t[n],enumerable:!(i=Ua(t,n))||i.enumerable});return e},Sn=(e,t,r)=>(aa(e,t,"default"),r&&aa(r,t,"default")),Ke=(e,t,r)=>(r=e!=null?na(On(e)):{},aa(t||!e||!e.__esModule?ta(r,"default",{value:e,enumerable:!0}):r,e)),Ca=hi((e,t)=>{"use strict";t.exports=i;function r(a){return a instanceof Buffer?Buffer.from(a):new a.constructor(a.buffer.slice(),a.byteOffset,a.length)}function i(a){if(a=a||{},a.circles)return n(a);let s=new Map;if(s.set(Date,g=>new Date(g)),s.set(Map,(g,y)=>new Map(h(Array.from(g),y))),s.set(Set,(g,y)=>new Set(h(Array.from(g),y))),a.constructorHandlers)for(let g of a.constructorHandlers)s.set(g[0],g[1]);let u=null;return a.proto?p:d;function h(g,y){let m=Object.keys(g),x=new Array(m.length);for(let _=0;_<m.length;_++){let E=m[_],w=g[E];typeof w!="object"||w===null?x[E]=w:w.constructor!==Object&&(u=s.get(w.constructor))?x[E]=u(w,y):ArrayBuffer.isView(w)?x[E]=r(w):x[E]=y(w)}return x}function d(g){if(typeof g!="object"||g===null)return g;if(Array.isArray(g))return h(g,d);if(g.constructor!==Object&&(u=s.get(g.constructor)))return u(g,d);let y={};for(let m in g){if(Object.hasOwnProperty.call(g,m)===!1)continue;let x=g[m];typeof x!="object"||x===null?y[m]=x:x.constructor!==Object&&(u=s.get(x.constructor))?y[m]=u(x,d):ArrayBuffer.isView(x)?y[m]=r(x):y[m]=d(x)}return y}function p(g){if(typeof g!="object"||g===null)return g;if(Array.isArray(g))return h(g,p);if(g.constructor!==Object&&(u=s.get(g.constructor)))return u(g,p);let y={};for(let m in g){let x=g[m];typeof x!="object"||x===null?y[m]=x:x.constructor!==Object&&(u=s.get(x.constructor))?y[m]=u(x,p):ArrayBuffer.isView(x)?y[m]=r(x):y[m]=p(x)}return y}}function n(a){let s=[],u=[],h=new Map;if(h.set(Date,m=>new Date(m)),h.set(Map,(m,x)=>new Map(p(Array.from(m),x))),h.set(Set,(m,x)=>new Set(p(Array.from(m),x))),a.constructorHandlers)for(let m of a.constructorHandlers)h.set(m[0],m[1]);let d=null;return a.proto?y:g;function p(m,x){let _=Object.keys(m),E=new Array(_.length);for(let w=0;w<_.length;w++){let C=_[w],A=m[C];if(typeof A!="object"||A===null)E[C]=A;else if(A.constructor!==Object&&(d=h.get(A.constructor)))E[C]=d(A,x);else if(ArrayBuffer.isView(A))E[C]=r(A);else{let M=s.indexOf(A);M!==-1?E[C]=u[M]:E[C]=x(A)}}return E}function g(m){if(typeof m!="object"||m===null)return m;if(Array.isArray(m))return p(m,g);if(m.constructor!==Object&&(d=h.get(m.constructor)))return d(m,g);let x={};s.push(m),u.push(x);for(let _ in m){if(Object.hasOwnProperty.call(m,_)===!1)continue;let E=m[_];if(typeof E!="object"||E===null)x[_]=E;else if(E.constructor!==Object&&(d=h.get(E.constructor)))x[_]=d(E,g);else if(ArrayBuffer.isView(E))x[_]=r(E);else{let w=s.indexOf(E);w!==-1?x[_]=u[w]:x[_]=g(E)}}return s.pop(),u.pop(),x}function y(m){if(typeof m!="object"||m===null)return m;if(Array.isArray(m))return p(m,y);if(m.constructor!==Object&&(d=h.get(m.constructor)))return d(m,y);let x={};s.push(m),u.push(x);for(let _ in m){let E=m[_];if(typeof E!="object"||E===null)x[_]=E;else if(E.constructor!==Object&&(d=h.get(E.constructor)))x[_]=d(E,y);else if(ArrayBuffer.isView(E))x[_]=r(E);else{let w=s.indexOf(E);w!==-1?x[_]=u[w]:x[_]=y(E)}}return s.pop(),u.pop(),x}}}),ba=hi((e,t)=>{(function(r,i){typeof e=="object"&&typeof t<"u"?t.exports=i():typeof define=="function"&&define.amd?define(i):(r=typeof globalThis<"u"?globalThis:r||self).dayjs=i()})(e,function(){"use strict";var r=1e3,i=6e4,n=36e5,a="millisecond",s="second",u="minute",h="hour",d="day",p="week",g="month",y="quarter",m="year",x="date",_="Invalid Date",E=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,w=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,C={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(I){var j=["th","st","nd","rd"],H=I%100;return"["+I+(j[(H-20)%10]||j[H]||j[0])+"]"}},A=function(I,j,H){var V=String(I);return!V||V.length>=j?I:""+Array(j+1-V.length).join(H)+I},M={s:A,z:function(I){var j=-I.utcOffset(),H=Math.abs(j),V=Math.floor(H/60),P=H%60;return(j<=0?"+":"-")+A(V,2,"0")+":"+A(P,2,"0")},m:function I(j,H){if(j.date()<H.date())return-I(H,j);var V=12*(H.year()-j.year())+(H.month()-j.month()),P=j.clone().add(V,g),q=H-P<0,Z=j.clone().add(V+(q?-1:1),g);return+(-(V+(H-P)/(q?P-Z:Z-P))||0)},a:function(I){return I<0?Math.ceil(I)||0:Math.floor(I)},p:function(I){return{M:g,y:m,w:p,d,D:x,h,m:u,s,ms:a,Q:y}[I]||String(I||"").toLowerCase().replace(/s$/,"")},u:function(I){return I===void 0}},N="en",B={};B[N]=C;var O="$isDayjsObject",L=function(I){return I instanceof F||!(!I||!I[O])},$=function I(j,H,V){var P;if(!j)return N;if(typeof j=="string"){var q=j.toLowerCase();B[q]&&(P=q),H&&(B[q]=H,P=q);var Z=j.split("-");if(!P&&Z.length>1)return I(Z[0])}else{var J=j.name;B[J]=j,P=J}return!V&&P&&(N=P),P||!V&&N},G=function(I,j){if(L(I))return I.clone();var H=typeof j=="object"?j:{};return H.date=I,H.args=arguments,new F(H)},z=M;z.l=$,z.i=L,z.w=function(I,j){return G(I,{locale:j.$L,utc:j.$u,x:j.$x,$offset:j.$offset})};var F=function(){function I(H){this.$L=$(H.locale,null,!0),this.parse(H),this.$x=this.$x||H.x||{},this[O]=!0}var j=I.prototype;return j.parse=function(H){this.$d=function(V){var P=V.date,q=V.utc;if(P===null)return new Date(NaN);if(z.u(P))return new Date;if(P instanceof Date)return new Date(P);if(typeof P=="string"&&!/Z$/i.test(P)){var Z=P.match(E);if(Z){var J=Z[2]-1||0,ae=(Z[7]||"0").substring(0,3);return q?new Date(Date.UTC(Z[1],J,Z[3]||1,Z[4]||0,Z[5]||0,Z[6]||0,ae)):new Date(Z[1],J,Z[3]||1,Z[4]||0,Z[5]||0,Z[6]||0,ae)}}return new Date(P)}(H),this.init()},j.init=function(){var H=this.$d;this.$y=H.getFullYear(),this.$M=H.getMonth(),this.$D=H.getDate(),this.$W=H.getDay(),this.$H=H.getHours(),this.$m=H.getMinutes(),this.$s=H.getSeconds(),this.$ms=H.getMilliseconds()},j.$utils=function(){return z},j.isValid=function(){return this.$d.toString()!==_},j.isSame=function(H,V){var P=G(H);return this.startOf(V)<=P&&P<=this.endOf(V)},j.isAfter=function(H,V){return G(H)<this.startOf(V)},j.isBefore=function(H,V){return this.endOf(V)<G(H)},j.$g=function(H,V,P){return z.u(H)?this[V]:this.set(P,H)},j.unix=function(){return Math.floor(this.valueOf()/1e3)},j.valueOf=function(){return this.$d.getTime()},j.startOf=function(H,V){var P=this,q=!!z.u(V)||V,Z=z.p(H),J=function(he,le){var ke=z.w(P.$u?Date.UTC(P.$y,le,he):new Date(P.$y,le,he),P);return q?ke:ke.endOf(d)},ae=function(he,le){return z.w(P.toDate()[he].apply(P.toDate("s"),(q?[0,0,0,0]:[23,59,59,999]).slice(le)),P)},ue=this.$W,be=this.$M,Le=this.$D,xe="set"+(this.$u?"UTC":"");switch(Z){case m:return q?J(1,0):J(31,11);case g:return q?J(1,be):J(0,be+1);case p:var Ae=this.$locale().weekStart||0,oe=(ue<Ae?ue+7:ue)-Ae;return J(q?Le-oe:Le+(6-oe),be);case d:case x:return ae(xe+"Hours",0);case h:return ae(xe+"Minutes",1);case u:return ae(xe+"Seconds",2);case s:return ae(xe+"Milliseconds",3);default:return this.clone()}},j.endOf=function(H){return this.startOf(H,!1)},j.$set=function(H,V){var P,q=z.p(H),Z="set"+(this.$u?"UTC":""),J=(P={},P[d]=Z+"Date",P[x]=Z+"Date",P[g]=Z+"Month",P[m]=Z+"FullYear",P[h]=Z+"Hours",P[u]=Z+"Minutes",P[s]=Z+"Seconds",P[a]=Z+"Milliseconds",P)[q],ae=q===d?this.$D+(V-this.$W):V;if(q===g||q===m){var ue=this.clone().set(x,1);ue.$d[J](ae),ue.init(),this.$d=ue.set(x,Math.min(this.$D,ue.daysInMonth())).$d}else J&&this.$d[J](ae);return this.init(),this},j.set=function(H,V){return this.clone().$set(H,V)},j.get=function(H){return this[z.p(H)]()},j.add=function(H,V){var P,q=this;H=Number(H);var Z=z.p(V),J=function(be){var Le=G(q);return z.w(Le.date(Le.date()+Math.round(be*H)),q)};if(Z===g)return this.set(g,this.$M+H);if(Z===m)return this.set(m,this.$y+H);if(Z===d)return J(1);if(Z===p)return J(7);var ae=(P={},P[u]=i,P[h]=n,P[s]=r,P)[Z]||1,ue=this.$d.getTime()+H*ae;return z.w(ue,this)},j.subtract=function(H,V){return this.add(-1*H,V)},j.format=function(H){var V=this,P=this.$locale();if(!this.isValid())return P.invalidDate||_;var q=H||"YYYY-MM-DDTHH:mm:ssZ",Z=z.z(this),J=this.$H,ae=this.$m,ue=this.$M,be=P.weekdays,Le=P.months,xe=P.meridiem,Ae=function(le,ke,pe,qe){return le&&(le[ke]||le(V,q))||pe[ke].slice(0,qe)},oe=function(le){return z.s(J%12||12,le,"0")},he=xe||function(le,ke,pe){var qe=le<12?"AM":"PM";return pe?qe.toLowerCase():qe};return q.replace(w,function(le,ke){return ke||function(pe){switch(pe){case"YY":return String(V.$y).slice(-2);case"YYYY":return z.s(V.$y,4,"0");case"M":return ue+1;case"MM":return z.s(ue+1,2,"0");case"MMM":return Ae(P.monthsShort,ue,Le,3);case"MMMM":return Ae(Le,ue);case"D":return V.$D;case"DD":return z.s(V.$D,2,"0");case"d":return String(V.$W);case"dd":return Ae(P.weekdaysMin,V.$W,be,2);case"ddd":return Ae(P.weekdaysShort,V.$W,be,3);case"dddd":return be[V.$W];case"H":return String(J);case"HH":return z.s(J,2,"0");case"h":return oe(1);case"hh":return oe(2);case"a":return he(J,ae,!0);case"A":return he(J,ae,!1);case"m":return String(ae);case"mm":return z.s(ae,2,"0");case"s":return String(V.$s);case"ss":return z.s(V.$s,2,"0");case"SSS":return z.s(V.$ms,3,"0");case"Z":return Z}return null}(le)||Z.replace(":","")})},j.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},j.diff=function(H,V,P){var q,Z=this,J=z.p(V),ae=G(H),ue=(ae.utcOffset()-this.utcOffset())*i,be=this-ae,Le=function(){return z.m(Z,ae)};switch(J){case m:q=Le()/12;break;case g:q=Le();break;case y:q=Le()/3;break;case p:q=(be-ue)/6048e5;break;case d:q=(be-ue)/864e5;break;case h:q=be/n;break;case u:q=be/i;break;case s:q=be/r;break;default:q=be}return P?q:z.a(q)},j.daysInMonth=function(){return this.endOf(g).$D},j.$locale=function(){return B[this.$L]},j.locale=function(H,V){if(!H)return this.$L;var P=this.clone(),q=$(H,V,!0);return q&&(P.$L=q),P},j.clone=function(){return z.w(this.$d,this)},j.toDate=function(){return new Date(this.valueOf())},j.toJSON=function(){return this.isValid()?this.toISOString():null},j.toISOString=function(){return this.$d.toISOString()},j.toString=function(){return this.$d.toUTCString()},I}(),X=F.prototype;return G.prototype=X,[["$ms",a],["$s",s],["$m",u],["$H",h],["$W",d],["$M",g],["$y",m],["$D",x]].forEach(function(I){X[I[1]]=function(j){return this.$g(j,I[0],I[1])}}),G.extend=function(I,j){return I.$i||(I(j,F,G),I.$i=!0),G},G.locale=$,G.isDayjs=L,G.unix=function(I){return G(1e3*I)},G.en=B[N],G.Ls=B,G.p={},G})}),Kr,Ot,Vi=D(()=>{Kr={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:e=>e>=255?255:e<0?0:e,g:e=>e>=255?255:e<0?0:e,b:e=>e>=255?255:e<0?0:e,h:e=>e%360,s:e=>e>=100?100:e<0?0:e,l:e=>e>=100?100:e<0?0:e,a:e=>e>=1?1:e<0?0:e},toLinear:e=>{let t=e/255;return e>.03928?Math.pow((t+.055)/1.055,2.4):t/12.92},hue2rgb:(e,t,r)=>(r<0&&(r+=1),r>1&&(r-=1),r<.16666666666666666?e+(t-e)*6*r:r<.5?t:r<.6666666666666666?e+(t-e)*(.6666666666666666-r)*6:e),hsl2rgb:({h:e,s:t,l:r},i)=>{if(!t)return r*2.55;e/=360,t/=100,r/=100;let n=r<.5?r*(1+t):r+t-r*t,a=2*r-n;switch(i){case"r":return Kr.hue2rgb(a,n,e+.3333333333333333)*255;case"g":return Kr.hue2rgb(a,n,e)*255;case"b":return Kr.hue2rgb(a,n,e-.3333333333333333)*255}},rgb2hsl:({r:e,g:t,b:r},i)=>{e/=255,t/=255,r/=255;let n=Math.max(e,t,r),a=Math.min(e,t,r),s=(n+a)/2;if(i==="l")return s*100;if(n===a)return 0;let u=n-a,h=s>.5?u/(2-n-a):u/(n+a);if(i==="s")return h*100;switch(n){case e:return((t-r)/u+(t<r?6:0))*60;case t:return((r-e)/u+2)*60;case r:return((e-t)/u+4)*60;default:return-1}}},Ot=Kr}),Li,jr,Ir=D(()=>{Li={clamp:(e,t,r)=>t>r?Math.min(t,Math.max(r,e)):Math.min(r,Math.max(t,e)),round:e=>Math.round(e*1e10)/1e10},jr=Li}),gr,Zr,vr=D(()=>{gr={dec2hex:e=>{let t=Math.round(e).toString(16);return t.length>1?t:`0${t}`}},Zr=gr}),Vr,Ht,xi=D(()=>{Vi(),Ir(),vr(),Vr={channel:Ot,lang:jr,unit:Zr},Ht=Vr}),or,Wr,xr=D(()=>{xi(),or={};for(let e=0;e<=255;e++)or[e]=Ht.unit.dec2hex(e);Wr={ALL:0,RGB:1,HSL:2}}),Zt,dr,nr=D(()=>{xr(),Zt=class{constructor(){this.type=Wr.ALL}get(){return this.type}set(e){if(this.type&&this.type!==e)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=e}reset(){this.type=Wr.ALL}is(e){return this.type===e}},dr=Zt}),qt,Yr,ii=D(()=>{xi(),nr(),xr(),qt=class{constructor(e,t){this.color=t,this.changed=!1,this.data=e,this.type=new dr}set(e,t){return this.color=t,this.changed=!1,this.data=e,this.type.type=Wr.ALL,this}_ensureHSL(){let e=this.data,{h:t,s:r,l:i}=e;t===void 0&&(e.h=Ht.channel.rgb2hsl(e,"h")),r===void 0&&(e.s=Ht.channel.rgb2hsl(e,"s")),i===void 0&&(e.l=Ht.channel.rgb2hsl(e,"l"))}_ensureRGB(){let e=this.data,{r:t,g:r,b:i}=e;t===void 0&&(e.r=Ht.channel.hsl2rgb(e,"r")),r===void 0&&(e.g=Ht.channel.hsl2rgb(e,"g")),i===void 0&&(e.b=Ht.channel.hsl2rgb(e,"b"))}get r(){let e=this.data,t=e.r;return!this.type.is(Wr.HSL)&&t!==void 0?t:(this._ensureHSL(),Ht.channel.hsl2rgb(e,"r"))}get g(){let e=this.data,t=e.g;return!this.type.is(Wr.HSL)&&t!==void 0?t:(this._ensureHSL(),Ht.channel.hsl2rgb(e,"g"))}get b(){let e=this.data,t=e.b;return!this.type.is(Wr.HSL)&&t!==void 0?t:(this._ensureHSL(),Ht.channel.hsl2rgb(e,"b"))}get h(){let e=this.data,t=e.h;return!this.type.is(Wr.RGB)&&t!==void 0?t:(this._ensureRGB(),Ht.channel.rgb2hsl(e,"h"))}get s(){let e=this.data,t=e.s;return!this.type.is(Wr.RGB)&&t!==void 0?t:(this._ensureRGB(),Ht.channel.rgb2hsl(e,"s"))}get l(){let e=this.data,t=e.l;return!this.type.is(Wr.RGB)&&t!==void 0?t:(this._ensureRGB(),Ht.channel.rgb2hsl(e,"l"))}get a(){return this.data.a}set r(e){this.type.set(Wr.RGB),this.changed=!0,this.data.r=e}set g(e){this.type.set(Wr.RGB),this.changed=!0,this.data.g=e}set b(e){this.type.set(Wr.RGB),this.changed=!0,this.data.b=e}set h(e){this.type.set(Wr.HSL),this.changed=!0,this.data.h=e}set s(e){this.type.set(Wr.HSL),this.changed=!0,this.data.s=e}set l(e){this.type.set(Wr.HSL),this.changed=!0,this.data.l=e}set a(e){this.changed=!0,this.data.a=e}},Yr=qt}),ki,zn,sa=D(()=>{ii(),ki=new Yr({r:0,g:0,b:0,a:0},"transparent"),zn=ki}),un,ja,fs=D(()=>{sa(),xr(),un={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:e=>{if(e.charCodeAt(0)!==35)return;let t=e.match(un.re);if(!t)return;let r=t[1],i=parseInt(r,16),n=r.length,a=n%4===0,s=n>4,u=s?1:17,h=s?8:4,d=a?0:-1,p=s?255:15;return zn.set({r:(i>>h*(d+3)&p)*u,g:(i>>h*(d+2)&p)*u,b:(i>>h*(d+1)&p)*u,a:a?(i&p)*u/255:1},e)},stringify:e=>{let{r:t,g:r,b:i,a:n}=e;return n<1?`#${or[Math.round(t)]}${or[Math.round(r)]}${or[Math.round(i)]}${or[Math.round(n*255)]}`:`#${or[Math.round(t)]}${or[Math.round(r)]}${or[Math.round(i)]}`}},ja=un}),Vn,Wt,ir=D(()=>{xi(),sa(),Vn={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:e=>{let t=e.match(Vn.hueRe);if(t){let[,r,i]=t;switch(i){case"grad":return Ht.channel.clamp.h(parseFloat(r)*.9);case"rad":return Ht.channel.clamp.h(parseFloat(r)*180/Math.PI);case"turn":return Ht.channel.clamp.h(parseFloat(r)*360)}}return Ht.channel.clamp.h(parseFloat(e))},parse:e=>{let t=e.charCodeAt(0);if(t!==104&&t!==72)return;let r=e.match(Vn.re);if(!r)return;let[,i,n,a,s,u]=r;return zn.set({h:Vn._hue2deg(i),s:Ht.channel.clamp.s(parseFloat(n)),l:Ht.channel.clamp.l(parseFloat(a)),a:s?Ht.channel.clamp.a(u?parseFloat(s)/100:parseFloat(s)):1},e)},stringify:e=>{let{h:t,s:r,l:i,a:n}=e;return n<1?`hsla(${Ht.lang.round(t)}, ${Ht.lang.round(r)}%, ${Ht.lang.round(i)}%, ${n})`:`hsl(${Ht.lang.round(t)}, ${Ht.lang.round(r)}%, ${Ht.lang.round(i)}%)`}},Wt=Vn}),Rr,Ii,Ni=D(()=>{fs(),Rr={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:e=>{e=e.toLowerCase();let t=Rr.colors[e];if(t)return ja.parse(t)},stringify:e=>{let t=ja.stringify(e);for(let r in Rr.colors)if(Rr.colors[r]===t)return r}},Ii=Rr}),mi,Qi,Gn=D(()=>{xi(),sa(),mi={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:e=>{let t=e.charCodeAt(0);if(t!==114&&t!==82)return;let r=e.match(mi.re);if(!r)return;let[,i,n,a,s,u,h,d,p]=r;return zn.set({r:Ht.channel.clamp.r(n?parseFloat(i)*2.55:parseFloat(i)),g:Ht.channel.clamp.g(s?parseFloat(a)*2.55:parseFloat(a)),b:Ht.channel.clamp.b(h?parseFloat(u)*2.55:parseFloat(u)),a:d?Ht.channel.clamp.a(p?parseFloat(d)/100:parseFloat(d)):1},e)},stringify:e=>{let{r:t,g:r,b:i,a:n}=e;return n<1?`rgba(${Ht.lang.round(t)}, ${Ht.lang.round(r)}, ${Ht.lang.round(i)}, ${Ht.lang.round(n)})`:`rgb(${Ht.lang.round(t)}, ${Ht.lang.round(r)}, ${Ht.lang.round(i)})`}},Qi=mi}),Kn,Zi,oa=D(()=>{fs(),ir(),Ni(),Gn(),xr(),Kn={format:{keyword:Ii,hex:ja,rgb:Qi,rgba:Qi,hsl:Wt,hsla:Wt},parse:e=>{if(typeof e!="string")return e;let t=ja.parse(e)||Qi.parse(e)||Wt.parse(e)||Ii.parse(e);if(t)return t;throw new Error(`Unsupported color format: "${e}"`)},stringify:e=>!e.changed&&e.color?e.color:e.type.is(Wr.HSL)||e.data.r===void 0?Wt.stringify(e):e.a<1||!Number.isInteger(e.r)||!Number.isInteger(e.g)||!Number.isInteger(e.b)?Qi.stringify(e):ja.stringify(e)},Zi=Kn}),li,nn,Pi=D(()=>{xi(),oa(),li=(e,t)=>{let r=Zi.parse(e);for(let i in t)r[i]=Ht.channel.clamp[i](t[i]);return Zi.stringify(r)},nn=li}),_i,Nn,an=D(()=>{xi(),sa(),oa(),Pi(),_i=(e,t,r=0,i=1)=>{if(typeof e!="number")return nn(e,{a:t});let n=zn.set({r:Ht.channel.clamp.r(e),g:Ht.channel.clamp.g(t),b:Ht.channel.clamp.b(r),a:Ht.channel.clamp.a(i)});return Zi.stringify(n)},Nn=_i}),ma,Ls,Mn=D(()=>{xi(),oa(),ma=(e,t)=>Ht.lang.round(Zi.parse(e)[t]),Ls=ma}),oo,Gs,ji=D(()=>{xi(),oa(),oo=e=>{let{r:t,g:r,b:i}=Zi.parse(e),n=.2126*Ht.channel.toLinear(t)+.7152*Ht.channel.toLinear(r)+.0722*Ht.channel.toLinear(i);return Ht.lang.round(n)},Gs=oo}),Ao,dl,Un=D(()=>{ji(),Ao=e=>Gs(e)>=.5,dl=Ao}),Qa,Rs,Ma=D(()=>{Un(),Qa=e=>!dl(e),Rs=Qa}),Pl,hs,Wn=D(()=>{xi(),oa(),Pl=(e,t,r)=>{let i=Zi.parse(e),n=i[t],a=Ht.channel.clamp[t](n+r);return n!==a&&(i[t]=a),Zi.stringify(i)},hs=Pl}),el,Cr,kh=D(()=>{Wn(),el=(e,t)=>hs(e,"l",t),Cr=el}),Sa,Fi,Th=D(()=>{Wn(),Sa=(e,t)=>hs(e,"l",-t),Fi=Sa}),mu,pt,Ts=D(()=>{oa(),Pi(),mu=(e,t)=>{let r=Zi.parse(e),i={};for(let n in t)t[n]&&(i[n]=r[n]+t[n]);return nn(e,i)},pt=mu}),yu,vu,vo=D(()=>{oa(),an(),yu=(e,t,r=50)=>{let{r:i,g:n,b:a,a:s}=Zi.parse(e),{r:u,g:h,b:d,a:p}=Zi.parse(t),g=r/100,y=g*2-1,m=s-p,x=((y*m===-1?y:(y+m)/(1+y*m))+1)/2,_=1-x,E=i*x+u*_,w=n*x+h*_,C=a*x+d*_,A=s*g+p*(1-g);return Nn(E,w,C,A)},vu=yu}),Es,ui,de=D(()=>{oa(),vo(),Es=(e,t=100)=>{let r=Zi.parse(e);return r.r=255-r.r,r.g=255-r.g,r.b=255-r.b,vu(r,e,t)},ui=Es}),Pe=D(()=>{an(),Mn(),Ma(),kh(),Th(),Ts(),de()}),Ge=D(()=>{Pe()});function nt(e){return function(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),n=1;n<r;n++)i[n-1]=arguments[n];return ge(e,t,i)}}function gt(e){return function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return De(e,r)}}function dt(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:vt;te&&te(e,null);let i=t.length;for(;i--;){let n=t[i];if(typeof n=="string"){let a=r(n);a!==n&&(ye(t)||(t[i]=a),n=a)}e[n]=!0}return e}function Jt(e){for(let t=0;t<e.length;t++)pr(e,t)||(e[t]=null);return e}function Vt(e){let t=Ct(null);for(let[r,i]of Wi(e))pr(e,r)&&(Array.isArray(i)?t[r]=Jt(i):i&&typeof i=="object"&&i.constructor===Object?t[r]=Vt(i):t[r]=i);return t}function br(e,t){for(;e!==null;){let i=Re(e,t);if(i){if(i.get)return nt(i.get);if(typeof i.value=="function")return nt(i.value)}e=Se(e)}function r(){return null}return r}function Ai(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Sr(),t=rt=>Ai(rt);if(t.version="3.2.1",t.removed=[],!e||!e.document||e.document.nodeType!==ni.document)return t.isSupported=!1,t;let{document:r}=e,i=r,n=i.currentScript,{DocumentFragment:a,HTMLTemplateElement:s,Node:u,Element:h,NodeFilter:d,NamedNodeMap:p=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:g,DOMParser:y,trustedTypes:m}=e,x=h.prototype,_=br(x,"cloneNode"),E=br(x,"remove"),w=br(x,"nextSibling"),C=br(x,"childNodes"),A=br(x,"parentNode");if(typeof s=="function"){let rt=r.createElement("template");rt.content&&rt.content.ownerDocument&&(r=rt.content.ownerDocument)}let M,N="",{implementation:B,createNodeIterator:O,createDocumentFragment:L,getElementsByTagName:$}=r,{importNode:G}=i,z={};t.isSupported=typeof Wi=="function"&&typeof A=="function"&&B&&B.createHTMLDocument!==void 0;let{MUSTACHE_EXPR:F,ERB_EXPR:X,TMPLIT_EXPR:I,DATA_ATTR:j,ARIA_ATTR:H,IS_SCRIPT_OR_DATA:V,ATTR_WHITESPACE:P,CUSTOM_ELEMENT:q}=wr,{IS_ALLOWED_URI:Z}=wr,J=null,ae=dt({},[...Dr,...$i,...Ar,...ra,...Hi]),ue=null,be=dt({},[...Ln,...ss,..._a,...la]),Le=Object.seal(Ct(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),xe=null,Ae=null,oe=!0,he=!0,le=!1,ke=!0,pe=!1,qe=!0,me=!1,st=!1,we=!1,Et=!1,wt=!1,Tt=!1,er=!0,tr=!1,kr="user-content-",fr=!0,Mt=!1,Kt={},ne=null,He=dt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Te=null,Qe=dt({},["audio","video","img","source","image","track"]),ce=null,Ut=dt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),fe="http://www.w3.org/1998/Math/MathML",ze="http://www.w3.org/2000/svg",yt="http://www.w3.org/1999/xhtml",bt=yt,At=!1,ct=null,zt=dt({},[fe,ze,yt],ut),ft=dt({},["mi","mo","mn","ms","mtext"]),Pr=dt({},["annotation-xml"]),Mi=dt({},["title","style","font","a","script"]),Di=null,ri=["application/xhtml+xml","text/html"],Gi="text/html",Br=null,sr=null,hr=r.createElement("form"),Ci=function(rt){return rt instanceof RegExp||rt instanceof Function},_r=function(){let rt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(sr&&sr===rt)){if((!rt||typeof rt!="object")&&(rt={}),rt=Vt(rt),Di=ri.indexOf(rt.PARSER_MEDIA_TYPE)===-1?Gi:rt.PARSER_MEDIA_TYPE,Br=Di==="application/xhtml+xml"?ut:vt,J=pr(rt,"ALLOWED_TAGS")?dt({},rt.ALLOWED_TAGS,Br):ae,ue=pr(rt,"ALLOWED_ATTR")?dt({},rt.ALLOWED_ATTR,Br):be,ct=pr(rt,"ALLOWED_NAMESPACES")?dt({},rt.ALLOWED_NAMESPACES,ut):zt,ce=pr(rt,"ADD_URI_SAFE_ATTR")?dt(Vt(Ut),rt.ADD_URI_SAFE_ATTR,Br):Ut,Te=pr(rt,"ADD_DATA_URI_TAGS")?dt(Vt(Qe),rt.ADD_DATA_URI_TAGS,Br):Qe,ne=pr(rt,"FORBID_CONTENTS")?dt({},rt.FORBID_CONTENTS,Br):He,xe=pr(rt,"FORBID_TAGS")?dt({},rt.FORBID_TAGS,Br):{},Ae=pr(rt,"FORBID_ATTR")?dt({},rt.FORBID_ATTR,Br):{},Kt=pr(rt,"USE_PROFILES")?rt.USE_PROFILES:!1,oe=rt.ALLOW_ARIA_ATTR!==!1,he=rt.ALLOW_DATA_ATTR!==!1,le=rt.ALLOW_UNKNOWN_PROTOCOLS||!1,ke=rt.ALLOW_SELF_CLOSE_IN_ATTR!==!1,pe=rt.SAFE_FOR_TEMPLATES||!1,qe=rt.SAFE_FOR_XML!==!1,me=rt.WHOLE_DOCUMENT||!1,Et=rt.RETURN_DOM||!1,wt=rt.RETURN_DOM_FRAGMENT||!1,Tt=rt.RETURN_TRUSTED_TYPE||!1,we=rt.FORCE_BODY||!1,er=rt.SANITIZE_DOM!==!1,tr=rt.SANITIZE_NAMED_PROPS||!1,fr=rt.KEEP_CONTENT!==!1,Mt=rt.IN_PLACE||!1,Z=rt.ALLOWED_URI_REGEXP||je,bt=rt.NAMESPACE||yt,ft=rt.MATHML_TEXT_INTEGRATION_POINTS||ft,Pr=rt.HTML_INTEGRATION_POINTS||Pr,Le=rt.CUSTOM_ELEMENT_HANDLING||{},rt.CUSTOM_ELEMENT_HANDLING&&Ci(rt.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Le.tagNameCheck=rt.CUSTOM_ELEMENT_HANDLING.tagNameCheck),rt.CUSTOM_ELEMENT_HANDLING&&Ci(rt.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Le.attributeNameCheck=rt.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),rt.CUSTOM_ELEMENT_HANDLING&&typeof rt.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Le.allowCustomizedBuiltInElements=rt.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),pe&&(he=!1),wt&&(Et=!0),Kt&&(J=dt({},Hi),ue=[],Kt.html===!0&&(dt(J,Dr),dt(ue,Ln)),Kt.svg===!0&&(dt(J,$i),dt(ue,ss),dt(ue,la)),Kt.svgFilters===!0&&(dt(J,Ar),dt(ue,ss),dt(ue,la)),Kt.mathMl===!0&&(dt(J,ra),dt(ue,_a),dt(ue,la))),rt.ADD_TAGS&&(J===ae&&(J=Vt(J)),dt(J,rt.ADD_TAGS,Br)),rt.ADD_ATTR&&(ue===be&&(ue=Vt(ue)),dt(ue,rt.ADD_ATTR,Br)),rt.ADD_URI_SAFE_ATTR&&dt(ce,rt.ADD_URI_SAFE_ATTR,Br),rt.FORBID_CONTENTS&&(ne===He&&(ne=Vt(ne)),dt(ne,rt.FORBID_CONTENTS,Br)),fr&&(J["#text"]=!0),me&&dt(J,["html","head","body"]),J.table&&(dt(J,["tbody"]),delete xe.tbody),rt.TRUSTED_TYPES_POLICY){if(typeof rt.TRUSTED_TYPES_POLICY.createHTML!="function")throw Gt('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof rt.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Gt('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');M=rt.TRUSTED_TYPES_POLICY,N=M.createHTML("")}else M===void 0&&(M=ti(m,n)),M!==null&&typeof N=="string"&&(N=M.createHTML(""));$e&&$e(rt),sr=rt}},ln=dt({},[...$i,...Ar,...pn]),en=dt({},[...ra,...Qr]),bi=function(rt){let vi=A(rt);(!vi||!vi.tagName)&&(vi={namespaceURI:bt,tagName:"template"});let ai=vt(rt.tagName),ga=vt(vi.tagName);return ct[rt.namespaceURI]?rt.namespaceURI===ze?vi.namespaceURI===yt?ai==="svg":vi.namespaceURI===fe?ai==="svg"&&(ga==="annotation-xml"||ft[ga]):!!ln[ai]:rt.namespaceURI===fe?vi.namespaceURI===yt?ai==="math":vi.namespaceURI===ze?ai==="math"&&Pr[ga]:!!en[ai]:rt.namespaceURI===yt?vi.namespaceURI===ze&&!Pr[ga]||vi.namespaceURI===fe&&!ft[ga]?!1:!en[ai]&&(Mi[ai]||!ln[ai]):!!(Di==="application/xhtml+xml"&&ct[rt.namespaceURI]):!1},gi=function(rt){ht(t.removed,{element:rt});try{A(rt).removeChild(rt)}catch{E(rt)}},Fr=function(rt,vi){try{ht(t.removed,{attribute:vi.getAttributeNode(rt),from:vi})}catch{ht(t.removed,{attribute:null,from:vi})}if(vi.removeAttribute(rt),rt==="is"&&!ue[rt])if(Et||wt)try{gi(vi)}catch{}else try{vi.setAttribute(rt,"")}catch{}},Bi=function(rt){let vi=null,ai=null;if(we)rt="<remove></remove>"+rt;else{let as=xt(rt,/^[\r\n\t ]+/);ai=as&&as[0]}Di==="application/xhtml+xml"&&bt===yt&&(rt='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+rt+"</body></html>");let ga=M?M.createHTML(rt):rt;if(bt===yt)try{vi=new y().parseFromString(ga,Di)}catch{}if(!vi||!vi.documentElement){vi=B.createDocument(bt,"template",null);try{vi.documentElement.innerHTML=At?N:ga}catch{}}let Ta=vi.body||vi.documentElement;return rt&&ai&&Ta.insertBefore(r.createTextNode(ai),Ta.childNodes[0]||null),bt===yt?$.call(vi,me?"html":"body")[0]:me?vi.documentElement:Ta},Xr=function(rt){return O.call(rt.ownerDocument||rt,rt,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null)},xa=function(rt){return rt instanceof g&&(typeof rt.nodeName!="string"||typeof rt.textContent!="string"||typeof rt.removeChild!="function"||!(rt.attributes instanceof p)||typeof rt.removeAttribute!="function"||typeof rt.setAttribute!="function"||typeof rt.namespaceURI!="string"||typeof rt.insertBefore!="function"||typeof rt.hasChildNodes!="function")},Hn=function(rt){return typeof u=="function"&&rt instanceof u};function fa(rt,vi,ai){z[rt]&&Ve(z[rt],ga=>{ga.call(t,vi,ai,sr)})}let $s=function(rt){let vi=null;if(fa("beforeSanitizeElements",rt,null),xa(rt))return gi(rt),!0;let ai=Br(rt.nodeName);if(fa("uponSanitizeElement",rt,{tagName:ai,allowedTags:J}),rt.hasChildNodes()&&!Hn(rt.firstElementChild)&&Er(/<[/\w]/g,rt.innerHTML)&&Er(/<[/\w]/g,rt.textContent)||rt.nodeType===ni.progressingInstruction||qe&&rt.nodeType===ni.comment&&Er(/<[/\w]/g,rt.data))return gi(rt),!0;if(!J[ai]||xe[ai]){if(!xe[ai]&&Vs(ai)&&(Le.tagNameCheck instanceof RegExp&&Er(Le.tagNameCheck,ai)||Le.tagNameCheck instanceof Function&&Le.tagNameCheck(ai)))return!1;if(fr&&!ne[ai]){let ga=A(rt)||rt.parentNode,Ta=C(rt)||rt.childNodes;if(Ta&&ga){let as=Ta.length;for(let Ol=as-1;Ol>=0;--Ol){let So=_(Ta[Ol],!0);So.__removalCount=(rt.__removalCount||0)+1,ga.insertBefore(So,w(rt))}}}return gi(rt),!0}return rt instanceof h&&!bi(rt)||(ai==="noscript"||ai==="noembed"||ai==="noframes")&&Er(/<\/no(script|embed|frames)/i,rt.innerHTML)?(gi(rt),!0):(pe&&rt.nodeType===ni.text&&(vi=rt.textContent,Ve([F,X,I],ga=>{vi=jt(vi,ga," ")}),rt.textContent!==vi&&(ht(t.removed,{element:rt.cloneNode()}),rt.textContent=vi)),fa("afterSanitizeElements",rt,null),!1)},Za=function(rt,vi,ai){if(er&&(vi==="id"||vi==="name")&&(ai in r||ai in hr))return!1;if(!(he&&!Ae[vi]&&Er(j,vi))&&!(oe&&Er(H,vi))){if(!ue[vi]||Ae[vi]){if(!(Vs(rt)&&(Le.tagNameCheck instanceof RegExp&&Er(Le.tagNameCheck,rt)||Le.tagNameCheck instanceof Function&&Le.tagNameCheck(rt))&&(Le.attributeNameCheck instanceof RegExp&&Er(Le.attributeNameCheck,vi)||Le.attributeNameCheck instanceof Function&&Le.attributeNameCheck(vi))||vi==="is"&&Le.allowCustomizedBuiltInElements&&(Le.tagNameCheck instanceof RegExp&&Er(Le.tagNameCheck,ai)||Le.tagNameCheck instanceof Function&&Le.tagNameCheck(ai))))return!1}else if(!ce[vi]&&!Er(Z,jt(ai,P,""))&&!((vi==="src"||vi==="xlink:href"||vi==="href")&&rt!=="script"&&ur(ai,"data:")===0&&Te[rt])&&!(le&&!Er(V,jt(ai,P,"")))&&ai)return!1}return!0},Vs=function(rt){return rt!=="annotation-xml"&&xt(rt,q)},ks=function(rt){fa("beforeSanitizeAttributes",rt,null);let{attributes:vi}=rt;if(!vi)return;let ai={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ue,forceKeepAttr:void 0},ga=vi.length;for(;ga--;){let Ta=vi[ga],{name:as,namespaceURI:Ol,value:So}=Ta,Ea=Br(as),si=as==="value"?So:ei(So);if(ai.attrName=Ea,ai.attrValue=si,ai.keepAttr=!0,ai.forceKeepAttr=void 0,fa("uponSanitizeAttribute",rt,ai),si=ai.attrValue,tr&&(Ea==="id"||Ea==="name")&&(Fr(as,rt),si=kr+si),qe&&Er(/((--!?|])>)|<\/(style|title)/i,si)){Fr(as,rt);continue}if(ai.forceKeepAttr||(Fr(as,rt),!ai.keepAttr))continue;if(!ke&&Er(/\/>/i,si)){Fr(as,rt);continue}pe&&Ve([F,X,I],Gr=>{si=jt(si,Gr," ")});let xn=Br(rt.nodeName);if(Za(xn,Ea,si)){if(M&&typeof m=="object"&&typeof m.getAttributeType=="function"&&!Ol)switch(m.getAttributeType(xn,Ea)){case"TrustedHTML":{si=M.createHTML(si);break}case"TrustedScriptURL":{si=M.createScriptURL(si);break}}try{Ol?rt.setAttributeNS(Ol,as,si):rt.setAttribute(as,si),xa(rt)?gi(rt):lt(t.removed)}catch{}}}fa("afterSanitizeAttributes",rt,null)},Ws=function rt(vi){let ai=null,ga=Xr(vi);for(fa("beforeSanitizeShadowDOM",vi,null);ai=ga.nextNode();)fa("uponSanitizeShadowNode",ai,null),!$s(ai)&&(ai.content instanceof a&&rt(ai.content),ks(ai));fa("afterSanitizeShadowDOM",vi,null)};return t.sanitize=function(rt){let vi=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ai=null,ga=null,Ta=null,as=null;if(At=!rt,At&&(rt="<!-->"),typeof rt!="string"&&!Hn(rt))if(typeof rt.toString=="function"){if(rt=rt.toString(),typeof rt!="string")throw Gt("dirty is not a string, aborting")}else throw Gt("toString is not a function");if(!t.isSupported)return rt;if(st||_r(vi),t.removed=[],typeof rt=="string"&&(Mt=!1),Mt){if(rt.nodeName){let Ea=Br(rt.nodeName);if(!J[Ea]||xe[Ea])throw Gt("root node is forbidden and cannot be sanitized in-place")}}else if(rt instanceof u)ai=Bi("<!---->"),ga=ai.ownerDocument.importNode(rt,!0),ga.nodeType===ni.element&&ga.nodeName==="BODY"||ga.nodeName==="HTML"?ai=ga:ai.appendChild(ga);else{if(!Et&&!pe&&!me&&rt.indexOf("<")===-1)return M&&Tt?M.createHTML(rt):rt;if(ai=Bi(rt),!ai)return Et?null:Tt?N:""}ai&&we&&gi(ai.firstChild);let Ol=Xr(Mt?rt:ai);for(;Ta=Ol.nextNode();)$s(Ta)||(Ta.content instanceof a&&Ws(Ta.content),ks(Ta));if(Mt)return rt;if(Et){if(wt)for(as=L.call(ai.ownerDocument);ai.firstChild;)as.appendChild(ai.firstChild);else as=ai;return(ue.shadowroot||ue.shadowrootmode)&&(as=G.call(i,as,!0)),as}let So=me?ai.outerHTML:ai.innerHTML;return me&&J["!doctype"]&&ai.ownerDocument&&ai.ownerDocument.doctype&&ai.ownerDocument.doctype.name&&Er(It,ai.ownerDocument.doctype.name)&&(So="<!DOCTYPE "+ai.ownerDocument.doctype.name+`>
`+So),pe&&Ve([F,X,I],Ea=>{So=jt(So,Ea," ")}),M&&Tt?M.createHTML(So):So},t.setConfig=function(){let rt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};_r(rt),st=!0},t.clearConfig=function(){sr=null,st=!1},t.isValidAttribute=function(rt,vi,ai){sr||_r({});let ga=Br(rt),Ta=Br(vi);return Za(ga,Ta,ai)},t.addHook=function(rt,vi){typeof vi=="function"&&(z[rt]=z[rt]||[],ht(z[rt],vi))},t.removeHook=function(rt){if(z[rt])return lt(z[rt])},t.removeHooks=function(rt){z[rt]&&(z[rt]=[])},t.removeAllHooks=function(){z={}},t}var Wi,te,ye,Se,Re,$e,tt,Ct,ge,De,Ve,lt,ht,vt,ut,xt,jt,ur,ei,pr,Er,Gt,Dr,$i,Ar,pn,ra,Qr,Hi,Ln,ss,_a,la,Us,Y,_e,Fe,Ue,je,mt,Nt,It,rr,wr,ni,Sr,ti,ar,cr=D(()=>{({entries:Wi,setPrototypeOf:te,isFrozen:ye,getPrototypeOf:Se,getOwnPropertyDescriptor:Re}=Object),{freeze:$e,seal:tt,create:Ct}=Object,{apply:ge,construct:De}=typeof Reflect<"u"&&Reflect,$e||($e=function(e){return e}),tt||(tt=function(e){return e}),ge||(ge=function(e,t,r){return e.apply(t,r)}),De||(De=function(e,t){return new e(...t)}),Ve=nt(Array.prototype.forEach),lt=nt(Array.prototype.pop),ht=nt(Array.prototype.push),vt=nt(String.prototype.toLowerCase),ut=nt(String.prototype.toString),xt=nt(String.prototype.match),jt=nt(String.prototype.replace),ur=nt(String.prototype.indexOf),ei=nt(String.prototype.trim),pr=nt(Object.prototype.hasOwnProperty),Er=nt(RegExp.prototype.test),Gt=gt(TypeError),Dr=$e(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),$i=$e(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Ar=$e(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),pn=$e(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),ra=$e(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Qr=$e(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Hi=$e(["#text"]),Ln=$e(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),ss=$e(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),_a=$e(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),la=$e(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Us=tt(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Y=tt(/<%[\w\W]*|[\w\W]*%>/gm),_e=tt(/\${[\w\W]*}/gm),Fe=tt(/^data-[\-\w.\u00B7-\uFFFF]/),Ue=tt(/^aria-[\-\w]+$/),je=tt(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),mt=tt(/^(?:\w+script|data):/i),Nt=tt(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),It=tt(/^html$/i),rr=tt(/^[a-z][.\w]*(-[.\w]+)+$/i),wr=Object.freeze({__proto__:null,ARIA_ATTR:Ue,ATTR_WHITESPACE:Nt,CUSTOM_ELEMENT:rr,DATA_ATTR:Fe,DOCTYPE_NAME:It,ERB_EXPR:Y,IS_ALLOWED_URI:je,IS_SCRIPT_OR_DATA:mt,MUSTACHE_EXPR:Us,TMPLIT_EXPR:_e}),ni={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},Sr=function(){return typeof window>"u"?null:window},ti=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let r=null,i="data-tt-policy-suffix";t&&t.hasAttribute(i)&&(r=t.getAttribute(i));let n="dompurify"+(r?"#"+r:"");try{return e.createPolicy(n,{createHTML(a){return a},createScriptURL(a){return a}})}catch{return console.warn("TrustedTypes policy "+n+" could not be created."),null}},ar=Ai()}),yi={};oi(yi,{default:()=>EA});function qi(e){return String(e).replace(Ch,t=>ms[t])}function da(e){if(e.default)return e.default;var t=e.type,r=Array.isArray(t)?t[0]:t;if(typeof r!="string")return r.enum[0];switch(r){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}function $a(e){for(var t=0;t<Gx.length;t++)for(var r=Gx[t],i=0;i<r.blocks.length;i++){var n=r.blocks[i];if(e>=n[0]&&e<=n[1])return r.name}return null}function ya(e){for(var t=0;t<pg.length;t+=2)if(e>=pg[t]&&e<=pg[t+1])return!0;return!1}function Ha(e,t){_u[e]=t}function xo(e,t,r){if(!_u[t])throw new Error("Font metrics not found for font: "+t+".");var i=e.charCodeAt(0),n=_u[t][i];if(!n&&e[0]in r0&&(i=r0[e[0]].charCodeAt(0),n=_u[t][i]),!n&&r==="text"&&ya(i)&&(n=_u[t][77]),n)return{depth:n[0],height:n[1],italic:n[2],skew:n[3],width:n[4]}}function Ox(e){var t;if(e>=5?t=0:e>=3?t=1:t=2,!gg[t]){var r=gg[t]={cssEmPerMu:ay.quad[t]/18};for(var i in ay)ay.hasOwnProperty(i)&&(r[i]=ay[i][t])}return gg[t]}function Ql(e){if(e instanceof tu)return e;throw new Error("Expected symbolNode but got "+String(e)+".")}function t0(e){if(e instanceof rl)return e;throw new Error("Expected span<HtmlDomNode> but got "+String(e)+".")}function Q(e,t,r,i,n,a){Ja[e][n]={font:t,group:r,replace:i},a&&i&&(Ja[e][i]=Ja[e][n])}function wi(e){for(var{type:t,names:r,props:i,handler:n,htmlBuilder:a,mathmlBuilder:s}=e,u={type:t,numArgs:i.numArgs,argTypes:i.argTypes,allowedInArgument:!!i.allowedInArgument,allowedInText:!!i.allowedInText,allowedInMath:i.allowedInMath===void 0?!0:i.allowedInMath,numOptionalArgs:i.numOptionalArgs||0,infix:!!i.infix,primitive:!!i.primitive,handler:n},h=0;h<r.length;++h)vy[r[h]]=u;t&&(a&&(xy[t]=a),s&&(ad[t]=s))}function yc(e){var{type:t,htmlBuilder:r,mathmlBuilder:i}=e;wi({type:t,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:r,mathmlBuilder:i})}function ug(e,t){var r=Rh(["base"],e,t),i=Rh(["strut"]);return i.style.height=ci(r.height+r.depth),r.depth&&(i.style.verticalAlign=ci(-r.depth)),r.children.unshift(i),r}function op(e,t){var r=null;e.length===1&&e[0].type==="tag"&&(r=e[0].tag,e=e[0].body);var i=uo(e,t,"root"),n;i.length===2&&i[1].hasClass("tag")&&(n=i.pop());for(var a=[],s=[],u=0;u<i.length;u++)if(s.push(i[u]),i[u].hasClass("mbin")||i[u].hasClass("mrel")||i[u].hasClass("allowbreak")){for(var h=!1;u<i.length-1&&i[u+1].hasClass("mspace")&&!i[u+1].hasClass("newline");)u++,s.push(i[u]),i[u].hasClass("nobreak")&&(h=!0);h||(a.push(ug(s,t)),s=[])}else i[u].hasClass("newline")&&(s.pop(),s.length>0&&(a.push(ug(s,t)),s=[]),a.push(i[u]));s.length>0&&a.push(ug(s,t));var d;r?(d=ug(uo(r,t,!0)),d.classes=["tag"],a.push(d)):n&&a.push(n);var p=Rh(["katex-html"],a);if(p.setAttribute("aria-hidden","true"),d){var g=d.children[0];g.style.height=ci(p.height+p.depth),p.depth&&(g.style.verticalAlign=ci(-p.depth))}return p}function gs(e){return new fg(e)}function q8(e,t,r,i,n){var a=qs(e,r),s;a.length===1&&a[0]instanceof gl&&hn.contains(["mrow","mtable"],a[0].type)?s=a[0]:s=new Hr.MathNode("mrow",a);var u=new Hr.MathNode("annotation",[new Hr.TextNode(t)]);u.setAttribute("encoding","application/x-tex");var h=new Hr.MathNode("semantics",[s,u]),d=new Hr.MathNode("math",[h]);d.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),i&&d.setAttribute("display","block");var p=n?"katex":"katex-mathml";return Bt.makeSpan([p],[d])}function Zn(e,t){if(!e||e.type!==t)throw new Error("Expected node of type "+t+", but got "+(e?"node of type "+e.type:String(e)));return e}function kw(e){var t=lp(e);if(!t)throw new Error("Expected node of symbol group type, but got "+(e?"node of type "+e.type:String(e)));return t}function lp(e){return e&&(e.type==="atom"||Fw.hasOwnProperty(e.type))?e:null}function Tw(e,t){var r=uo(e.body,t,!0);return r6([e.mclass],r,t)}function Bx(e,t){var r,i=qs(e.body,t);return e.mclass==="minner"?r=new Hr.MathNode("mpadded",i):e.mclass==="mord"?e.isCharacterBox?(r=i[0],r.type="mi"):r=new Hr.MathNode("mi",i):(e.isCharacterBox?(r=i[0],r.type="mo"):r=new Hr.MathNode("mo",i),e.mclass==="mbin"?(r.attributes.lspace="0.22em",r.attributes.rspace="0.22em"):e.mclass==="mpunct"?(r.attributes.lspace="0em",r.attributes.rspace="0.17em"):e.mclass==="mopen"||e.mclass==="mclose"?(r.attributes.lspace="0em",r.attributes.rspace="0em"):e.mclass==="minner"&&(r.attributes.lspace="0.0556em",r.attributes.width="+0.1111em")),r}function Ew(e,t,r){var i=i6[e];switch(i){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return r.callFunction(i,[t[0]],[t[1]]);case"\\uparrow":case"\\downarrow":{var n=r.callFunction("\\\\cdleft",[t[0]],[]),a={type:"atom",text:i,mode:"math",family:"rel"},s=r.callFunction("\\Big",[a],[]),u=r.callFunction("\\\\cdright",[t[1]],[]),h={type:"ordgroup",mode:"math",body:[n,s,u]};return r.callFunction("\\\\cdparent",[h],[])}case"\\\\cdlongequal":return r.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var d={type:"textord",text:"\\Vert",mode:"math"};return r.callFunction("\\Big",[d],[])}default:return{type:"textord",text:" ",mode:"math"}}}function X8(e){var t=[];for(e.gullet.beginGroup(),e.gullet.macros.set("\\cr","\\\\\\relax"),e.gullet.beginGroup();;){t.push(e.parseExpression(!1,"\\\\")),e.gullet.endGroup(),e.gullet.beginGroup();var r=e.fetch().text;if(r==="&"||r==="\\\\")e.consume();else if(r==="\\end"){t[t.length-1].length===0&&t.pop();break}else throw new qr("Expected \\\\ or \\cr or \\end",e.nextToken)}for(var i=[],n=[i],a=0;a<t.length;a++){for(var s=t[a],u=Ty(),h=0;h<s.length;h++)if(!Eg(s[h]))u.body.push(s[h]);else{i.push(u),h+=1;var d=kw(s[h]).text,p=new Array(2);if(p[0]={type:"ordgroup",mode:"math",body:[]},p[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(d)>-1))if("<>AV".indexOf(d)>-1)for(var g=0;g<2;g++){for(var y=!0,m=h+1;m<s.length;m++){if(vp(s[m],d)){y=!1,h=m;break}if(Eg(s[m]))throw new qr("Missing a "+d+" character to complete a CD arrow.",s[m]);p[g].body.push(s[m])}if(y)throw new qr("Missing a "+d+" character to complete a CD arrow.",s[h])}else throw new qr('Expected one of "<>AV=|." after @',s[h]);var x=Ew(d,p,e),_={type:"styling",body:[x],mode:"math",style:"display"};i.push(_),u=Ty()}a%2===0?i.push(u):i.shift(),i=[],n.push(i)}e.gullet.endGroup(),e.gullet.endGroup();var E=new Array(n[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:n,arraystretch:1,addJot:!0,rowGaps:[null],cols:E,colSeparationType:"CD",hLinesBeforeRow:new Array(n.length+1).fill([])}}function fn(e,t){var r=lp(e);if(r&&hn.contains(Ay,r.text))return r;throw r?new qr("Invalid delimiter '"+r.text+"' after '"+t.funcName+"'",e):new qr("Invalid delimiter type '"+e.type+"'",e)}function os(e){if(!e.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}function Eh(e){for(var{type:t,names:r,props:i,handler:n,htmlBuilder:a,mathmlBuilder:s}=e,u={type:t,numArgs:i.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:n},h=0;h<r.length;++h)ud[r[h]]=u;a&&(xy[t]=a),s&&(ad[t]=s)}function Ne(e,t){l0[e]=t}function Mo(e){var t=[];e.consumeSpaces();var r=e.fetch().text;for(r==="\\relax"&&(e.consume(),e.consumeSpaces(),r=e.fetch().text);r==="\\hline"||r==="\\hdashline";)e.consume(),t.push(r==="\\hdashline"),e.consumeSpaces(),r=e.fetch().text;return t}function ed(e){if(e.indexOf("ed")===-1)return e.indexOf("*")===-1}function td(e,t,r){var{hskipBeforeAndAfter:i,addJot:n,cols:a,arraystretch:s,colSeparationType:u,autoTag:h,singleRow:d,emptySingleRow:p,maxNumCols:g,leqno:y}=t;if(e.gullet.beginGroup(),d||e.gullet.macros.set("\\cr","\\\\\\relax"),!s){var m=e.gullet.expandMacroAsText("\\arraystretch");if(m==null)s=1;else if(s=parseFloat(m),!s||s<0)throw new qr("Invalid \\arraystretch: "+m)}e.gullet.beginGroup();var x=[],_=[x],E=[],w=[],C=h!=null?[]:void 0;function A(){h&&e.gullet.macros.set("\\@eqnsw","1",!0)}function M(){C&&(e.gullet.macros.get("\\df@tag")?(C.push(e.subparse([new Jl("\\df@tag")])),e.gullet.macros.set("\\df@tag",void 0,!0)):C.push(!!h&&e.gullet.macros.get("\\@eqnsw")==="1"))}for(A(),w.push(Mo(e));;){var N=e.parseExpression(!1,d?"\\end":"\\\\");e.gullet.endGroup(),e.gullet.beginGroup(),N={type:"ordgroup",mode:e.mode,body:N},r&&(N={type:"styling",mode:e.mode,style:r,body:[N]}),x.push(N);var B=e.fetch().text;if(B==="&"){if(g&&x.length===g){if(d||u)throw new qr("Too many tab characters: &",e.nextToken);e.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}e.consume()}else if(B==="\\end"){M(),x.length===1&&N.type==="styling"&&N.body[0].body.length===0&&(_.length>1||!p)&&_.pop(),w.length<_.length+1&&w.push([]);break}else if(B==="\\\\"){e.consume();var O=void 0;e.gullet.future().text!==" "&&(O=e.parseSizeGroup(!0)),E.push(O?O.value:null),M(),w.push(Mo(e)),x=[],_.push(x),A()}else throw new qr("Expected & or \\\\ or \\cr or \\end",e.nextToken)}return e.gullet.endGroup(),e.gullet.endGroup(),{type:"array",mode:e.mode,addJot:n,arraystretch:s,body:_,cols:a,rowGaps:E,hskipBeforeAndAfter:i,hLinesBeforeRow:w,colSeparationType:u,tags:C,leqno:y}}function Cw(e){return e.slice(0,1)==="d"?"display":"text"}function K8(e,t,r){for(var i=uo(e,t,!1),n=t.sizeMultiplier/r.sizeMultiplier,a=0;a<i.length;a++){var s=i[a].classes.indexOf("sizing");s<0?Array.prototype.push.apply(i[a].classes,t.sizingClasses(r)):i[a].classes[s+1]==="reset-size"+t.size&&(i[a].classes[s+1]="reset-size"+r.size),i[a].height*=n,i[a].depth*=n}return Bt.makeFragment(i)}var Ju,Jl,qr,iy,hg,ny,up,ms,Ch,cg,Px,Z8,Sw,hn,hp,dg,Sh,cp,dp,xu,eu,Fl,$l,rd,Lo,bu,Fx,$x,zx,Aw,Q8,Mw,kn,Gx,pg,Ah,Lw,Rw,Ux,jx,Dw,Iw,Nw,Hx,J8,Vx,eA,fg,_u,ay,r0,gg,sy,Ow,oy,wu,pp,Wx,Bw,ys,ci,tl,Yx,fp,ly,rl,uy,i0,Pw,tu,Mh,ru,hy,tA,Fw,Ja,ie,Mr,ve,Je,vs,Ui,Ro,gp,Tn,Ys,pl,Ya,Ye,lo,_t,$w,zw,Gw,id,qx,nd,cy,mg,dy,Xx,An,Ds,fl,Lh,n0,yg,py,vg,mp,Uw,jw,xg,ku,rA,Kx,fy,Zx,gy,bg,Do,Qx,Hw,Vw,Jx,Ww,Yw,qw,eb,my,yy,Xw,tb,Bt,Ra,eh,iu,rb,iA,vy,xy,ad,_g,js,Rh,Io,by,Kw,nA,uo,wg,ib,nb,Tu,th,wa,gl,yp,aA,Hr,nu,ab,sd,qs,au,Va,Zw,_y,wy,sb,a0,Qw,ob,Jw,e6,Is,zl,s0,kg,t6,ky,r6,Tg,i6,Ty,Eg,vp,Ey,lb,ub,pa,od,ml,rh,Cy,n6,sA,oA,a6,ld,o0,Sy,Cg,s6,lA,xp,bp,Sg,_p,uA,Ag,hA,o6,Mg,cA,dA,pA,l6,fA,hb,cb,gA,vc,u6,Ay,wp,Lg,ud,l0,ih,Eu,kp,Dh,db,h6,My,c6,u0,d6,pb,fb,p6,f6,g6,mA,Tp,h0,Ep,gb,Cp,Sp,m6,yA,mb,y6,v6,x6,b6,vA,_6,yb,Ly,w6,k6,T6,xA,vb,xb,yl,Rg,E6,bA,C6,S6,Ry,A6,_A,bb,M6,wA,Ap,c0,hd,Mp,Dg,Ig,L6,kA,Dy,Iy,Ng,Og,Bg,Lp,d0,Rp,p0,Ny,Oy,TA,EA,aF=D(()=>{for(Ju=class tOe{constructor(t,r,i){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=t,this.start=r,this.end=i}static range(t,r){return r?!t||!t.loc||!r.loc||t.loc.lexer!==r.loc.lexer?null:new tOe(t.loc.lexer,t.loc.start,r.loc.end):t&&t.loc}},Jl=class rOe{constructor(t,r){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=t,this.loc=r}range(t,r){return new rOe(r,Ju.range(this,t))}},qr=class iOe{constructor(t,r){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var i="KaTeX parse error: "+t,n,a,s=r&&r.loc;if(s&&s.start<=s.end){var u=s.lexer.input;n=s.start,a=s.end,n===u.length?i+=" at end of input: ":i+=" at position "+(n+1)+": ";var h=u.slice(n,a).replace(/[^]/g,"$&\u0332"),d;n>15?d="\u2026"+u.slice(n-15,n):d=u.slice(0,n);var p;a+15<u.length?p=u.slice(a,a+15)+"\u2026":p=u.slice(a),i+=d+h+p}var g=new Error(i);return g.name="ParseError",g.__proto__=iOe.prototype,g.position=n,n!=null&&a!=null&&(g.length=a-n),g.rawMessage=t,g}},qr.prototype.__proto__=Error.prototype,iy=function(e,t){return e.indexOf(t)!==-1},hg=function(e,t){return e===void 0?t:e},ny=/([A-Z])/g,up=function(e){return e.replace(ny,"-$1").toLowerCase()},ms={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},Ch=/[&><"']/g,cg=function e(t){return t.type==="ordgroup"||t.type==="color"?t.body.length===1?e(t.body[0]):t:t.type==="font"?e(t.body):t},Px=function(e){var t=cg(e);return t.type==="mathord"||t.type==="textord"||t.type==="atom"},Z8=function(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e},Sw=function(e){var t=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(e);return t?t[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(t[1])?null:t[1].toLowerCase():"_relative"},hn={contains:iy,deflt:hg,escape:qi,hyphenate:up,getBaseElem:cg,isCharacterBox:Px,protocolFromUrl:Sw},hp={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:e=>"#"+e},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(e,t)=>(t.push(e),t)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:e=>Math.max(0,e),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:e=>Math.max(0,e),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:e=>Math.max(0,e),cli:"-e, --max-expand <n>",cliProcessor:e=>e==="Infinity"?1/0:parseInt(e)},globalGroup:{type:"boolean",cli:!1}},dg=class{constructor(e){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,e=e||{};for(var t in hp)if(hp.hasOwnProperty(t)){var r=hp[t];this[t]=e[t]!==void 0?r.processor?r.processor(e[t]):e[t]:da(r)}}reportNonstrict(e,t,r){var i=this.strict;if(typeof i=="function"&&(i=i(e,t,r)),!(!i||i==="ignore")){if(i===!0||i==="error")throw new qr("LaTeX-incompatible input and strict mode is set to 'error': "+(t+" ["+e+"]"),r);i==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(t+" ["+e+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+i+"': "+t+" ["+e+"]"))}}useStrictBehavior(e,t,r){var i=this.strict;if(typeof i=="function")try{i=i(e,t,r)}catch{i="error"}return!i||i==="ignore"?!1:i===!0||i==="error"?!0:i==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(t+" ["+e+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+i+"': "+t+" ["+e+"]")),!1)}isTrusted(e){if(e.url&&!e.protocol){var t=hn.protocolFromUrl(e.url);if(t==null)return!1;e.protocol=t}var r=typeof this.trust=="function"?this.trust(e):this.trust;return!!r}},Sh=class{constructor(e,t,r){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=t,this.cramped=r}sup(){return bu[Fx[this.id]]}sub(){return bu[$x[this.id]]}fracNum(){return bu[zx[this.id]]}fracDen(){return bu[Aw[this.id]]}cramp(){return bu[Q8[this.id]]}text(){return bu[Mw[this.id]]}isTight(){return this.size>=2}},cp=0,dp=1,xu=2,eu=3,Fl=4,$l=5,rd=6,Lo=7,bu=[new Sh(cp,0,!1),new Sh(dp,0,!0),new Sh(xu,1,!1),new Sh(eu,1,!0),new Sh(Fl,2,!1),new Sh($l,2,!0),new Sh(rd,3,!1),new Sh(Lo,3,!0)],Fx=[Fl,$l,Fl,$l,rd,Lo,rd,Lo],$x=[$l,$l,$l,$l,Lo,Lo,Lo,Lo],zx=[xu,eu,Fl,$l,rd,Lo,rd,Lo],Aw=[eu,eu,$l,$l,Lo,Lo,Lo,Lo],Q8=[dp,dp,eu,eu,$l,$l,Lo,Lo],Mw=[cp,dp,xu,eu,xu,eu,xu,eu],kn={DISPLAY:bu[cp],TEXT:bu[xu],SCRIPT:bu[Fl],SCRIPTSCRIPT:bu[rd]},Gx=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}],pg=[],Gx.forEach(e=>e.blocks.forEach(t=>pg.push(...t))),Ah=80,Lw=function(e,t){return"M95,"+(622+e+t)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+e/2.075+" -"+e+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+e)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+e)+" "+t+"h400000v"+(40+e)+"h-400000z"},Rw=function(e,t){return"M263,"+(601+e+t)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+e/2.084+" -"+e+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+e)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+e)+" "+t+"h400000v"+(40+e)+"h-400000z"},Ux=function(e,t){return"M983 "+(10+e+t)+`
l`+e/3.13+" -"+e+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+e)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+e)+" "+t+"h400000v"+(40+e)+"h-400000z"},jx=function(e,t){return"M424,"+(2398+e+t)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+e/4.223+" -"+e+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+e)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+e)+" "+t+`
h400000v`+(40+e)+"h-400000z"},Dw=function(e,t){return"M473,"+(2713+e+t)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+e/5.298+" -"+e+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+e)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+e)+" "+t+"h400000v"+(40+e)+"H1017.7z"},Iw=function(e){var t=e/2;return"M400000 "+e+" H0 L"+t+" 0 l65 45 L145 "+(e-80)+" H400000z"},Nw=function(e,t,r){var i=r-54-t-e;return"M702 "+(e+t)+"H400000"+(40+e)+`
H742v`+i+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+t+"H400000v"+(40+e)+"H742z"},Hx=function(e,t,r){t=1e3*t;var i="";switch(e){case"sqrtMain":i=Lw(t,Ah);break;case"sqrtSize1":i=Rw(t,Ah);break;case"sqrtSize2":i=Ux(t,Ah);break;case"sqrtSize3":i=jx(t,Ah);break;case"sqrtSize4":i=Dw(t,Ah);break;case"sqrtTall":i=Nw(t,Ah,r)}return i},J8=function(e,t){switch(e){case"\u239C":return"M291 0 H417 V"+t+" H291z M291 0 H417 V"+t+" H291z";case"\u2223":return"M145 0 H188 V"+t+" H145z M145 0 H188 V"+t+" H145z";case"\u2225":return"M145 0 H188 V"+t+" H145z M145 0 H188 V"+t+" H145z"+("M367 0 H410 V"+t+" H367z M367 0 H410 V"+t+" H367z");case"\u239F":return"M457 0 H583 V"+t+" H457z M457 0 H583 V"+t+" H457z";case"\u23A2":return"M319 0 H403 V"+t+" H319z M319 0 H403 V"+t+" H319z";case"\u23A5":return"M263 0 H347 V"+t+" H263z M263 0 H347 V"+t+" H263z";case"\u23AA":return"M384 0 H504 V"+t+" H384z M384 0 H504 V"+t+" H384z";case"\u23D0":return"M312 0 H355 V"+t+" H312z M312 0 H355 V"+t+" H312z";case"\u2016":return"M257 0 H300 V"+t+" H257z M257 0 H300 V"+t+" H257z"+("M478 0 H521 V"+t+" H478z M478 0 H521 V"+t+" H478z");default:return""}},Vx={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},eA=function(e,t){switch(e){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+t+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+t+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+t+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+t+" v1759 h84z";case"vert":return"M145 15 v585 v"+t+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-t+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+t+" v585 h43z";case"doublevert":return"M145 15 v585 v"+t+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-t+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+t+` v585 h43z
M367 15 v585 v`+t+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-t+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+t+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+t+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+t+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+t+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+t+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+t+` v602 h84z
M403 1759 V0 H319 V1759 v`+t+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+t+` v602 h84z
M347 1759 V0 h-84 V1759 v`+t+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(t+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(t+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(t+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(t+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}},fg=class{constructor(e){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=e,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(e){return hn.contains(this.classes,e)}toNode(){for(var e=document.createDocumentFragment(),t=0;t<this.children.length;t++)e.appendChild(this.children[t].toNode());return e}toMarkup(){for(var e="",t=0;t<this.children.length;t++)e+=this.children[t].toMarkup();return e}toText(){var e=t=>t.toText();return this.children.map(e).join("")}},_u={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},ay={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},r0={\u00C5:"A",\u00D0:"D",\u00DE:"o",\u00E5:"a",\u00F0:"d",\u00FE:"o",\u0410:"A",\u0411:"B",\u0412:"B",\u0413:"F",\u0414:"A",\u0415:"E",\u0416:"K",\u0417:"3",\u0418:"N",\u0419:"N",\u041A:"K",\u041B:"N",\u041C:"M",\u041D:"H",\u041E:"O",\u041F:"N",\u0420:"P",\u0421:"C",\u0422:"T",\u0423:"y",\u0424:"O",\u0425:"X",\u0426:"U",\u0427:"h",\u0428:"W",\u0429:"W",\u042A:"B",\u042B:"X",\u042C:"B",\u042D:"3",\u042E:"X",\u042F:"R",\u0430:"a",\u0431:"b",\u0432:"a",\u0433:"r",\u0434:"y",\u0435:"e",\u0436:"m",\u0437:"e",\u0438:"n",\u0439:"n",\u043A:"n",\u043B:"n",\u043C:"m",\u043D:"n",\u043E:"o",\u043F:"n",\u0440:"p",\u0441:"c",\u0442:"o",\u0443:"y",\u0444:"b",\u0445:"x",\u0446:"n",\u0447:"n",\u0448:"w",\u0449:"w",\u044A:"a",\u044B:"m",\u044C:"a",\u044D:"e",\u044E:"m",\u044F:"r"},gg={},sy=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],Ow=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],oy=function(e,t){return t.size<2?e:sy[e-1][t.size-1]},wu=class Nx{constructor(t){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=t.style,this.color=t.color,this.size=t.size||Nx.BASESIZE,this.textSize=t.textSize||this.size,this.phantom=!!t.phantom,this.font=t.font||"",this.fontFamily=t.fontFamily||"",this.fontWeight=t.fontWeight||"",this.fontShape=t.fontShape||"",this.sizeMultiplier=Ow[this.size-1],this.maxSize=t.maxSize,this.minRuleThickness=t.minRuleThickness,this._fontMetrics=void 0}extend(t){var r={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var i in t)t.hasOwnProperty(i)&&(r[i]=t[i]);return new Nx(r)}havingStyle(t){return this.style===t?this:this.extend({style:t,size:oy(this.textSize,t)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(t){return this.size===t&&this.textSize===t?this:this.extend({style:this.style.text(),size:t,textSize:t,sizeMultiplier:Ow[t-1]})}havingBaseStyle(t){t=t||this.style.text();var r=oy(Nx.BASESIZE,t);return this.size===r&&this.textSize===Nx.BASESIZE&&this.style===t?this:this.extend({style:t,size:r})}havingBaseSizing(){var t;switch(this.style.id){case 4:case 5:t=3;break;case 6:case 7:t=1;break;default:t=6}return this.extend({style:this.style.text(),size:t})}withColor(t){return this.extend({color:t})}withPhantom(){return this.extend({phantom:!0})}withFont(t){return this.extend({font:t})}withTextFontFamily(t){return this.extend({fontFamily:t,font:""})}withTextFontWeight(t){return this.extend({fontWeight:t,font:""})}withTextFontShape(t){return this.extend({fontShape:t,font:""})}sizingClasses(t){return t.size!==this.size?["sizing","reset-size"+t.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==Nx.BASESIZE?["sizing","reset-size"+this.size,"size"+Nx.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=Ox(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}},wu.BASESIZE=6,pp={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},Wx={ex:!0,em:!0,mu:!0},Bw=function(e){return typeof e!="string"&&(e=e.unit),e in pp||e in Wx||e==="ex"},ys=function(e,t){var r;if(e.unit in pp)r=pp[e.unit]/t.fontMetrics().ptPerEm/t.sizeMultiplier;else if(e.unit==="mu")r=t.fontMetrics().cssEmPerMu;else{var i;if(t.style.isTight()?i=t.havingStyle(t.style.text()):i=t,e.unit==="ex")r=i.fontMetrics().xHeight;else if(e.unit==="em")r=i.fontMetrics().quad;else throw new qr("Invalid unit: '"+e.unit+"'");i!==t&&(r*=i.sizeMultiplier/t.sizeMultiplier)}return Math.min(e.number*r,t.maxSize)},ci=function(e){return+e.toFixed(4)+"em"},tl=function(e){return e.filter(t=>t).join(" ")},Yx=function(e,t,r){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=r||{},t){t.style.isTight()&&this.classes.push("mtight");var i=t.getColor();i&&(this.style.color=i)}},fp=function(e){var t=document.createElement(e);t.className=tl(this.classes);for(var r in this.style)this.style.hasOwnProperty(r)&&(t.style[r]=this.style[r]);for(var i in this.attributes)this.attributes.hasOwnProperty(i)&&t.setAttribute(i,this.attributes[i]);for(var n=0;n<this.children.length;n++)t.appendChild(this.children[n].toNode());return t},ly=function(e){var t="<"+e;this.classes.length&&(t+=' class="'+hn.escape(tl(this.classes))+'"');var r="";for(var i in this.style)this.style.hasOwnProperty(i)&&(r+=hn.hyphenate(i)+":"+this.style[i]+";");r&&(t+=' style="'+hn.escape(r)+'"');for(var n in this.attributes)this.attributes.hasOwnProperty(n)&&(t+=" "+n+'="'+hn.escape(this.attributes[n])+'"');t+=">";for(var a=0;a<this.children.length;a++)t+=this.children[a].toMarkup();return t+="</"+e+">",t},rl=class{constructor(e,t,r,i){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,Yx.call(this,e,r,i),this.children=t||[]}setAttribute(e,t){this.attributes[e]=t}hasClass(e){return hn.contains(this.classes,e)}toNode(){return fp.call(this,"span")}toMarkup(){return ly.call(this,"span")}},uy=class{constructor(e,t,r,i){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,Yx.call(this,t,i),this.children=r||[],this.setAttribute("href",e)}setAttribute(e,t){this.attributes[e]=t}hasClass(e){return hn.contains(this.classes,e)}toNode(){return fp.call(this,"a")}toMarkup(){return ly.call(this,"a")}},i0=class{constructor(e,t,r){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=t,this.src=e,this.classes=["mord"],this.style=r}hasClass(e){return hn.contains(this.classes,e)}toNode(){var e=document.createElement("img");e.src=this.src,e.alt=this.alt,e.className="mord";for(var t in this.style)this.style.hasOwnProperty(t)&&(e.style[t]=this.style[t]);return e}toMarkup(){var e='<img src="'+hn.escape(this.src)+'"'+(' alt="'+hn.escape(this.alt)+'"'),t="";for(var r in this.style)this.style.hasOwnProperty(r)&&(t+=hn.hyphenate(r)+":"+this.style[r]+";");return t&&(e+=' style="'+hn.escape(t)+'"'),e+="'/>",e}},Pw={\u00EE:"\u0131\u0302",\u00EF:"\u0131\u0308",\u00ED:"\u0131\u0301",\u00EC:"\u0131\u0300"},tu=class{constructor(e,t,r,i,n,a,s,u){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=t||0,this.depth=r||0,this.italic=i||0,this.skew=n||0,this.width=a||0,this.classes=s||[],this.style=u||{},this.maxFontSize=0;var h=$a(this.text.charCodeAt(0));h&&this.classes.push(h+"_fallback"),/[]/.test(this.text)&&(this.text=Pw[this.text])}hasClass(e){return hn.contains(this.classes,e)}toNode(){var e=document.createTextNode(this.text),t=null;this.italic>0&&(t=document.createElement("span"),t.style.marginRight=ci(this.italic)),this.classes.length>0&&(t=t||document.createElement("span"),t.className=tl(this.classes));for(var r in this.style)this.style.hasOwnProperty(r)&&(t=t||document.createElement("span"),t.style[r]=this.style[r]);return t?(t.appendChild(e),t):e}toMarkup(){var e=!1,t="<span";this.classes.length&&(e=!0,t+=' class="',t+=hn.escape(tl(this.classes)),t+='"');var r="";this.italic>0&&(r+="margin-right:"+this.italic+"em;");for(var i in this.style)this.style.hasOwnProperty(i)&&(r+=hn.hyphenate(i)+":"+this.style[i]+";");r&&(e=!0,t+=' style="'+hn.escape(r)+'"');var n=hn.escape(this.text);return e?(t+=">",t+=n,t+="</span>",t):n}},Mh=class{constructor(e,t){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=t||{}}toNode(){var e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"svg");for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&t.setAttribute(r,this.attributes[r]);for(var i=0;i<this.children.length;i++)t.appendChild(this.children[i].toNode());return t}toMarkup(){var e='<svg xmlns="http://www.w3.org/2000/svg"';for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="'+hn.escape(this.attributes[t])+'"');e+=">";for(var r=0;r<this.children.length;r++)e+=this.children[r].toMarkup();return e+="</svg>",e}},ru=class{constructor(e,t){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=t}toNode(){var e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"path");return this.alternate?t.setAttribute("d",this.alternate):t.setAttribute("d",Vx[this.pathName]),t}toMarkup(){return this.alternate?'<path d="'+hn.escape(this.alternate)+'"/>':'<path d="'+hn.escape(Vx[this.pathName])+'"/>'}},hy=class{constructor(e){this.attributes=void 0,this.attributes=e||{}}toNode(){var e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"line");for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&t.setAttribute(r,this.attributes[r]);return t}toMarkup(){var e="<line";for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="'+hn.escape(this.attributes[t])+'"');return e+="/>",e}},tA={bin:1,close:1,inner:1,open:1,punct:1,rel:1},Fw={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},Ja={math:{},text:{}},ie="math",Mr="text",ve="main",Je="ams",vs="accent-token",Ui="bin",Ro="close",gp="inner",Tn="mathord",Ys="op-token",pl="open",Ya="punct",Ye="rel",lo="spacing",_t="textord",Q(ie,ve,Ye,"\u2261","\\equiv",!0),Q(ie,ve,Ye,"\u227A","\\prec",!0),Q(ie,ve,Ye,"\u227B","\\succ",!0),Q(ie,ve,Ye,"\u223C","\\sim",!0),Q(ie,ve,Ye,"\u22A5","\\perp"),Q(ie,ve,Ye,"\u2AAF","\\preceq",!0),Q(ie,ve,Ye,"\u2AB0","\\succeq",!0),Q(ie,ve,Ye,"\u2243","\\simeq",!0),Q(ie,ve,Ye,"\u2223","\\mid",!0),Q(ie,ve,Ye,"\u226A","\\ll",!0),Q(ie,ve,Ye,"\u226B","\\gg",!0),Q(ie,ve,Ye,"\u224D","\\asymp",!0),Q(ie,ve,Ye,"\u2225","\\parallel"),Q(ie,ve,Ye,"\u22C8","\\bowtie",!0),Q(ie,ve,Ye,"\u2323","\\smile",!0),Q(ie,ve,Ye,"\u2291","\\sqsubseteq",!0),Q(ie,ve,Ye,"\u2292","\\sqsupseteq",!0),Q(ie,ve,Ye,"\u2250","\\doteq",!0),Q(ie,ve,Ye,"\u2322","\\frown",!0),Q(ie,ve,Ye,"\u220B","\\ni",!0),Q(ie,ve,Ye,"\u221D","\\propto",!0),Q(ie,ve,Ye,"\u22A2","\\vdash",!0),Q(ie,ve,Ye,"\u22A3","\\dashv",!0),Q(ie,ve,Ye,"\u220B","\\owns"),Q(ie,ve,Ya,".","\\ldotp"),Q(ie,ve,Ya,"\u22C5","\\cdotp"),Q(ie,ve,_t,"#","\\#"),Q(Mr,ve,_t,"#","\\#"),Q(ie,ve,_t,"&","\\&"),Q(Mr,ve,_t,"&","\\&"),Q(ie,ve,_t,"\u2135","\\aleph",!0),Q(ie,ve,_t,"\u2200","\\forall",!0),Q(ie,ve,_t,"\u210F","\\hbar",!0),Q(ie,ve,_t,"\u2203","\\exists",!0),Q(ie,ve,_t,"\u2207","\\nabla",!0),Q(ie,ve,_t,"\u266D","\\flat",!0),Q(ie,ve,_t,"\u2113","\\ell",!0),Q(ie,ve,_t,"\u266E","\\natural",!0),Q(ie,ve,_t,"\u2663","\\clubsuit",!0),Q(ie,ve,_t,"\u2118","\\wp",!0),Q(ie,ve,_t,"\u266F","\\sharp",!0),Q(ie,ve,_t,"\u2662","\\diamondsuit",!0),Q(ie,ve,_t,"\u211C","\\Re",!0),Q(ie,ve,_t,"\u2661","\\heartsuit",!0),Q(ie,ve,_t,"\u2111","\\Im",!0),Q(ie,ve,_t,"\u2660","\\spadesuit",!0),Q(ie,ve,_t,"\xA7","\\S",!0),Q(Mr,ve,_t,"\xA7","\\S"),Q(ie,ve,_t,"\xB6","\\P",!0),Q(Mr,ve,_t,"\xB6","\\P"),Q(ie,ve,_t,"\u2020","\\dag"),Q(Mr,ve,_t,"\u2020","\\dag"),Q(Mr,ve,_t,"\u2020","\\textdagger"),Q(ie,ve,_t,"\u2021","\\ddag"),Q(Mr,ve,_t,"\u2021","\\ddag"),Q(Mr,ve,_t,"\u2021","\\textdaggerdbl"),Q(ie,ve,Ro,"\u23B1","\\rmoustache",!0),Q(ie,ve,pl,"\u23B0","\\lmoustache",!0),Q(ie,ve,Ro,"\u27EF","\\rgroup",!0),Q(ie,ve,pl,"\u27EE","\\lgroup",!0),Q(ie,ve,Ui,"\u2213","\\mp",!0),Q(ie,ve,Ui,"\u2296","\\ominus",!0),Q(ie,ve,Ui,"\u228E","\\uplus",!0),Q(ie,ve,Ui,"\u2293","\\sqcap",!0),Q(ie,ve,Ui,"\u2217","\\ast"),Q(ie,ve,Ui,"\u2294","\\sqcup",!0),Q(ie,ve,Ui,"\u25EF","\\bigcirc",!0),Q(ie,ve,Ui,"\u2219","\\bullet",!0),Q(ie,ve,Ui,"\u2021","\\ddagger"),Q(ie,ve,Ui,"\u2240","\\wr",!0),Q(ie,ve,Ui,"\u2A3F","\\amalg"),Q(ie,ve,Ui,"&","\\And"),Q(ie,ve,Ye,"\u27F5","\\longleftarrow",!0),Q(ie,ve,Ye,"\u21D0","\\Leftarrow",!0),Q(ie,ve,Ye,"\u27F8","\\Longleftarrow",!0),Q(ie,ve,Ye,"\u27F6","\\longrightarrow",!0),Q(ie,ve,Ye,"\u21D2","\\Rightarrow",!0),Q(ie,ve,Ye,"\u27F9","\\Longrightarrow",!0),Q(ie,ve,Ye,"\u2194","\\leftrightarrow",!0),Q(ie,ve,Ye,"\u27F7","\\longleftrightarrow",!0),Q(ie,ve,Ye,"\u21D4","\\Leftrightarrow",!0),Q(ie,ve,Ye,"\u27FA","\\Longleftrightarrow",!0),Q(ie,ve,Ye,"\u21A6","\\mapsto",!0),Q(ie,ve,Ye,"\u27FC","\\longmapsto",!0),Q(ie,ve,Ye,"\u2197","\\nearrow",!0),Q(ie,ve,Ye,"\u21A9","\\hookleftarrow",!0),Q(ie,ve,Ye,"\u21AA","\\hookrightarrow",!0),Q(ie,ve,Ye,"\u2198","\\searrow",!0),Q(ie,ve,Ye,"\u21BC","\\leftharpoonup",!0),Q(ie,ve,Ye,"\u21C0","\\rightharpoonup",!0),Q(ie,ve,Ye,"\u2199","\\swarrow",!0),Q(ie,ve,Ye,"\u21BD","\\leftharpoondown",!0),Q(ie,ve,Ye,"\u21C1","\\rightharpoondown",!0),Q(ie,ve,Ye,"\u2196","\\nwarrow",!0),Q(ie,ve,Ye,"\u21CC","\\rightleftharpoons",!0),Q(ie,Je,Ye,"\u226E","\\nless",!0),Q(ie,Je,Ye,"\uE010","\\@nleqslant"),Q(ie,Je,Ye,"\uE011","\\@nleqq"),Q(ie,Je,Ye,"\u2A87","\\lneq",!0),Q(ie,Je,Ye,"\u2268","\\lneqq",!0),Q(ie,Je,Ye,"\uE00C","\\@lvertneqq"),Q(ie,Je,Ye,"\u22E6","\\lnsim",!0),Q(ie,Je,Ye,"\u2A89","\\lnapprox",!0),Q(ie,Je,Ye,"\u2280","\\nprec",!0),Q(ie,Je,Ye,"\u22E0","\\npreceq",!0),Q(ie,Je,Ye,"\u22E8","\\precnsim",!0),Q(ie,Je,Ye,"\u2AB9","\\precnapprox",!0),Q(ie,Je,Ye,"\u2241","\\nsim",!0),Q(ie,Je,Ye,"\uE006","\\@nshortmid"),Q(ie,Je,Ye,"\u2224","\\nmid",!0),Q(ie,Je,Ye,"\u22AC","\\nvdash",!0),Q(ie,Je,Ye,"\u22AD","\\nvDash",!0),Q(ie,Je,Ye,"\u22EA","\\ntriangleleft"),Q(ie,Je,Ye,"\u22EC","\\ntrianglelefteq",!0),Q(ie,Je,Ye,"\u228A","\\subsetneq",!0),Q(ie,Je,Ye,"\uE01A","\\@varsubsetneq"),Q(ie,Je,Ye,"\u2ACB","\\subsetneqq",!0),Q(ie,Je,Ye,"\uE017","\\@varsubsetneqq"),Q(ie,Je,Ye,"\u226F","\\ngtr",!0),Q(ie,Je,Ye,"\uE00F","\\@ngeqslant"),Q(ie,Je,Ye,"\uE00E","\\@ngeqq"),Q(ie,Je,Ye,"\u2A88","\\gneq",!0),Q(ie,Je,Ye,"\u2269","\\gneqq",!0),Q(ie,Je,Ye,"\uE00D","\\@gvertneqq"),Q(ie,Je,Ye,"\u22E7","\\gnsim",!0),Q(ie,Je,Ye,"\u2A8A","\\gnapprox",!0),Q(ie,Je,Ye,"\u2281","\\nsucc",!0),Q(ie,Je,Ye,"\u22E1","\\nsucceq",!0),Q(ie,Je,Ye,"\u22E9","\\succnsim",!0),Q(ie,Je,Ye,"\u2ABA","\\succnapprox",!0),Q(ie,Je,Ye,"\u2246","\\ncong",!0),Q(ie,Je,Ye,"\uE007","\\@nshortparallel"),Q(ie,Je,Ye,"\u2226","\\nparallel",!0),Q(ie,Je,Ye,"\u22AF","\\nVDash",!0),Q(ie,Je,Ye,"\u22EB","\\ntriangleright"),Q(ie,Je,Ye,"\u22ED","\\ntrianglerighteq",!0),Q(ie,Je,Ye,"\uE018","\\@nsupseteqq"),Q(ie,Je,Ye,"\u228B","\\supsetneq",!0),Q(ie,Je,Ye,"\uE01B","\\@varsupsetneq"),Q(ie,Je,Ye,"\u2ACC","\\supsetneqq",!0),Q(ie,Je,Ye,"\uE019","\\@varsupsetneqq"),Q(ie,Je,Ye,"\u22AE","\\nVdash",!0),Q(ie,Je,Ye,"\u2AB5","\\precneqq",!0),Q(ie,Je,Ye,"\u2AB6","\\succneqq",!0),Q(ie,Je,Ye,"\uE016","\\@nsubseteqq"),Q(ie,Je,Ui,"\u22B4","\\unlhd"),Q(ie,Je,Ui,"\u22B5","\\unrhd"),Q(ie,Je,Ye,"\u219A","\\nleftarrow",!0),Q(ie,Je,Ye,"\u219B","\\nrightarrow",!0),Q(ie,Je,Ye,"\u21CD","\\nLeftarrow",!0),Q(ie,Je,Ye,"\u21CF","\\nRightarrow",!0),Q(ie,Je,Ye,"\u21AE","\\nleftrightarrow",!0),Q(ie,Je,Ye,"\u21CE","\\nLeftrightarrow",!0),Q(ie,Je,Ye,"\u25B3","\\vartriangle"),Q(ie,Je,_t,"\u210F","\\hslash"),Q(ie,Je,_t,"\u25BD","\\triangledown"),Q(ie,Je,_t,"\u25CA","\\lozenge"),Q(ie,Je,_t,"\u24C8","\\circledS"),Q(ie,Je,_t,"\xAE","\\circledR"),Q(Mr,Je,_t,"\xAE","\\circledR"),Q(ie,Je,_t,"\u2221","\\measuredangle",!0),Q(ie,Je,_t,"\u2204","\\nexists"),Q(ie,Je,_t,"\u2127","\\mho"),Q(ie,Je,_t,"\u2132","\\Finv",!0),Q(ie,Je,_t,"\u2141","\\Game",!0),Q(ie,Je,_t,"\u2035","\\backprime"),Q(ie,Je,_t,"\u25B2","\\blacktriangle"),Q(ie,Je,_t,"\u25BC","\\blacktriangledown"),Q(ie,Je,_t,"\u25A0","\\blacksquare"),Q(ie,Je,_t,"\u29EB","\\blacklozenge"),Q(ie,Je,_t,"\u2605","\\bigstar"),Q(ie,Je,_t,"\u2222","\\sphericalangle",!0),Q(ie,Je,_t,"\u2201","\\complement",!0),Q(ie,Je,_t,"\xF0","\\eth",!0),Q(Mr,ve,_t,"\xF0","\xF0"),Q(ie,Je,_t,"\u2571","\\diagup"),Q(ie,Je,_t,"\u2572","\\diagdown"),Q(ie,Je,_t,"\u25A1","\\square"),Q(ie,Je,_t,"\u25A1","\\Box"),Q(ie,Je,_t,"\u25CA","\\Diamond"),Q(ie,Je,_t,"\xA5","\\yen",!0),Q(Mr,Je,_t,"\xA5","\\yen",!0),Q(ie,Je,_t,"\u2713","\\checkmark",!0),Q(Mr,Je,_t,"\u2713","\\checkmark"),Q(ie,Je,_t,"\u2136","\\beth",!0),Q(ie,Je,_t,"\u2138","\\daleth",!0),Q(ie,Je,_t,"\u2137","\\gimel",!0),Q(ie,Je,_t,"\u03DD","\\digamma",!0),Q(ie,Je,_t,"\u03F0","\\varkappa"),Q(ie,Je,pl,"\u250C","\\@ulcorner",!0),Q(ie,Je,Ro,"\u2510","\\@urcorner",!0),Q(ie,Je,pl,"\u2514","\\@llcorner",!0),Q(ie,Je,Ro,"\u2518","\\@lrcorner",!0),Q(ie,Je,Ye,"\u2266","\\leqq",!0),Q(ie,Je,Ye,"\u2A7D","\\leqslant",!0),Q(ie,Je,Ye,"\u2A95","\\eqslantless",!0),Q(ie,Je,Ye,"\u2272","\\lesssim",!0),Q(ie,Je,Ye,"\u2A85","\\lessapprox",!0),Q(ie,Je,Ye,"\u224A","\\approxeq",!0),Q(ie,Je,Ui,"\u22D6","\\lessdot"),Q(ie,Je,Ye,"\u22D8","\\lll",!0),Q(ie,Je,Ye,"\u2276","\\lessgtr",!0),Q(ie,Je,Ye,"\u22DA","\\lesseqgtr",!0),Q(ie,Je,Ye,"\u2A8B","\\lesseqqgtr",!0),Q(ie,Je,Ye,"\u2251","\\doteqdot"),Q(ie,Je,Ye,"\u2253","\\risingdotseq",!0),Q(ie,Je,Ye,"\u2252","\\fallingdotseq",!0),Q(ie,Je,Ye,"\u223D","\\backsim",!0),Q(ie,Je,Ye,"\u22CD","\\backsimeq",!0),Q(ie,Je,Ye,"\u2AC5","\\subseteqq",!0),Q(ie,Je,Ye,"\u22D0","\\Subset",!0),Q(ie,Je,Ye,"\u228F","\\sqsubset",!0),Q(ie,Je,Ye,"\u227C","\\preccurlyeq",!0),Q(ie,Je,Ye,"\u22DE","\\curlyeqprec",!0),Q(ie,Je,Ye,"\u227E","\\precsim",!0),Q(ie,Je,Ye,"\u2AB7","\\precapprox",!0),Q(ie,Je,Ye,"\u22B2","\\vartriangleleft"),Q(ie,Je,Ye,"\u22B4","\\trianglelefteq"),Q(ie,Je,Ye,"\u22A8","\\vDash",!0),Q(ie,Je,Ye,"\u22AA","\\Vvdash",!0),Q(ie,Je,Ye,"\u2323","\\smallsmile"),Q(ie,Je,Ye,"\u2322","\\smallfrown"),Q(ie,Je,Ye,"\u224F","\\bumpeq",!0),Q(ie,Je,Ye,"\u224E","\\Bumpeq",!0),Q(ie,Je,Ye,"\u2267","\\geqq",!0),Q(ie,Je,Ye,"\u2A7E","\\geqslant",!0),Q(ie,Je,Ye,"\u2A96","\\eqslantgtr",!0),Q(ie,Je,Ye,"\u2273","\\gtrsim",!0),Q(ie,Je,Ye,"\u2A86","\\gtrapprox",!0),Q(ie,Je,Ui,"\u22D7","\\gtrdot"),Q(ie,Je,Ye,"\u22D9","\\ggg",!0),Q(ie,Je,Ye,"\u2277","\\gtrless",!0),Q(ie,Je,Ye,"\u22DB","\\gtreqless",!0),Q(ie,Je,Ye,"\u2A8C","\\gtreqqless",!0),Q(ie,Je,Ye,"\u2256","\\eqcirc",!0),Q(ie,Je,Ye,"\u2257","\\circeq",!0),Q(ie,Je,Ye,"\u225C","\\triangleq",!0),Q(ie,Je,Ye,"\u223C","\\thicksim"),Q(ie,Je,Ye,"\u2248","\\thickapprox"),Q(ie,Je,Ye,"\u2AC6","\\supseteqq",!0),Q(ie,Je,Ye,"\u22D1","\\Supset",!0),Q(ie,Je,Ye,"\u2290","\\sqsupset",!0),Q(ie,Je,Ye,"\u227D","\\succcurlyeq",!0),Q(ie,Je,Ye,"\u22DF","\\curlyeqsucc",!0),Q(ie,Je,Ye,"\u227F","\\succsim",!0),Q(ie,Je,Ye,"\u2AB8","\\succapprox",!0),Q(ie,Je,Ye,"\u22B3","\\vartriangleright"),Q(ie,Je,Ye,"\u22B5","\\trianglerighteq"),Q(ie,Je,Ye,"\u22A9","\\Vdash",!0),Q(ie,Je,Ye,"\u2223","\\shortmid"),Q(ie,Je,Ye,"\u2225","\\shortparallel"),Q(ie,Je,Ye,"\u226C","\\between",!0),Q(ie,Je,Ye,"\u22D4","\\pitchfork",!0),Q(ie,Je,Ye,"\u221D","\\varpropto"),Q(ie,Je,Ye,"\u25C0","\\blacktriangleleft"),Q(ie,Je,Ye,"\u2234","\\therefore",!0),Q(ie,Je,Ye,"\u220D","\\backepsilon"),Q(ie,Je,Ye,"\u25B6","\\blacktriangleright"),Q(ie,Je,Ye,"\u2235","\\because",!0),Q(ie,Je,Ye,"\u22D8","\\llless"),Q(ie,Je,Ye,"\u22D9","\\gggtr"),Q(ie,Je,Ui,"\u22B2","\\lhd"),Q(ie,Je,Ui,"\u22B3","\\rhd"),Q(ie,Je,Ye,"\u2242","\\eqsim",!0),Q(ie,ve,Ye,"\u22C8","\\Join"),Q(ie,Je,Ye,"\u2251","\\Doteq",!0),Q(ie,Je,Ui,"\u2214","\\dotplus",!0),Q(ie,Je,Ui,"\u2216","\\smallsetminus"),Q(ie,Je,Ui,"\u22D2","\\Cap",!0),Q(ie,Je,Ui,"\u22D3","\\Cup",!0),Q(ie,Je,Ui,"\u2A5E","\\doublebarwedge",!0),Q(ie,Je,Ui,"\u229F","\\boxminus",!0),Q(ie,Je,Ui,"\u229E","\\boxplus",!0),Q(ie,Je,Ui,"\u22C7","\\divideontimes",!0),Q(ie,Je,Ui,"\u22C9","\\ltimes",!0),Q(ie,Je,Ui,"\u22CA","\\rtimes",!0),Q(ie,Je,Ui,"\u22CB","\\leftthreetimes",!0),Q(ie,Je,Ui,"\u22CC","\\rightthreetimes",!0),Q(ie,Je,Ui,"\u22CF","\\curlywedge",!0),Q(ie,Je,Ui,"\u22CE","\\curlyvee",!0),Q(ie,Je,Ui,"\u229D","\\circleddash",!0),Q(ie,Je,Ui,"\u229B","\\circledast",!0),Q(ie,Je,Ui,"\u22C5","\\centerdot"),Q(ie,Je,Ui,"\u22BA","\\intercal",!0),Q(ie,Je,Ui,"\u22D2","\\doublecap"),Q(ie,Je,Ui,"\u22D3","\\doublecup"),Q(ie,Je,Ui,"\u22A0","\\boxtimes",!0),Q(ie,Je,Ye,"\u21E2","\\dashrightarrow",!0),Q(ie,Je,Ye,"\u21E0","\\dashleftarrow",!0),Q(ie,Je,Ye,"\u21C7","\\leftleftarrows",!0),Q(ie,Je,Ye,"\u21C6","\\leftrightarrows",!0),Q(ie,Je,Ye,"\u21DA","\\Lleftarrow",!0),Q(ie,Je,Ye,"\u219E","\\twoheadleftarrow",!0),Q(ie,Je,Ye,"\u21A2","\\leftarrowtail",!0),Q(ie,Je,Ye,"\u21AB","\\looparrowleft",!0),Q(ie,Je,Ye,"\u21CB","\\leftrightharpoons",!0),Q(ie,Je,Ye,"\u21B6","\\curvearrowleft",!0),Q(ie,Je,Ye,"\u21BA","\\circlearrowleft",!0),Q(ie,Je,Ye,"\u21B0","\\Lsh",!0),Q(ie,Je,Ye,"\u21C8","\\upuparrows",!0),Q(ie,Je,Ye,"\u21BF","\\upharpoonleft",!0),Q(ie,Je,Ye,"\u21C3","\\downharpoonleft",!0),Q(ie,ve,Ye,"\u22B6","\\origof",!0),Q(ie,ve,Ye,"\u22B7","\\imageof",!0),Q(ie,Je,Ye,"\u22B8","\\multimap",!0),Q(ie,Je,Ye,"\u21AD","\\leftrightsquigarrow",!0),Q(ie,Je,Ye,"\u21C9","\\rightrightarrows",!0),Q(ie,Je,Ye,"\u21C4","\\rightleftarrows",!0),Q(ie,Je,Ye,"\u21A0","\\twoheadrightarrow",!0),Q(ie,Je,Ye,"\u21A3","\\rightarrowtail",!0),Q(ie,Je,Ye,"\u21AC","\\looparrowright",!0),Q(ie,Je,Ye,"\u21B7","\\curvearrowright",!0),Q(ie,Je,Ye,"\u21BB","\\circlearrowright",!0),Q(ie,Je,Ye,"\u21B1","\\Rsh",!0),Q(ie,Je,Ye,"\u21CA","\\downdownarrows",!0),Q(ie,Je,Ye,"\u21BE","\\upharpoonright",!0),Q(ie,Je,Ye,"\u21C2","\\downharpoonright",!0),Q(ie,Je,Ye,"\u21DD","\\rightsquigarrow",!0),Q(ie,Je,Ye,"\u21DD","\\leadsto"),Q(ie,Je,Ye,"\u21DB","\\Rrightarrow",!0),Q(ie,Je,Ye,"\u21BE","\\restriction"),Q(ie,ve,_t,"\u2018","`"),Q(ie,ve,_t,"$","\\$"),Q(Mr,ve,_t,"$","\\$"),Q(Mr,ve,_t,"$","\\textdollar"),Q(ie,ve,_t,"%","\\%"),Q(Mr,ve,_t,"%","\\%"),Q(ie,ve,_t,"_","\\_"),Q(Mr,ve,_t,"_","\\_"),Q(Mr,ve,_t,"_","\\textunderscore"),Q(ie,ve,_t,"\u2220","\\angle",!0),Q(ie,ve,_t,"\u221E","\\infty",!0),Q(ie,ve,_t,"\u2032","\\prime"),Q(ie,ve,_t,"\u25B3","\\triangle"),Q(ie,ve,_t,"\u0393","\\Gamma",!0),Q(ie,ve,_t,"\u0394","\\Delta",!0),Q(ie,ve,_t,"\u0398","\\Theta",!0),Q(ie,ve,_t,"\u039B","\\Lambda",!0),Q(ie,ve,_t,"\u039E","\\Xi",!0),Q(ie,ve,_t,"\u03A0","\\Pi",!0),Q(ie,ve,_t,"\u03A3","\\Sigma",!0),Q(ie,ve,_t,"\u03A5","\\Upsilon",!0),Q(ie,ve,_t,"\u03A6","\\Phi",!0),Q(ie,ve,_t,"\u03A8","\\Psi",!0),Q(ie,ve,_t,"\u03A9","\\Omega",!0),Q(ie,ve,_t,"A","\u0391"),Q(ie,ve,_t,"B","\u0392"),Q(ie,ve,_t,"E","\u0395"),Q(ie,ve,_t,"Z","\u0396"),Q(ie,ve,_t,"H","\u0397"),Q(ie,ve,_t,"I","\u0399"),Q(ie,ve,_t,"K","\u039A"),Q(ie,ve,_t,"M","\u039C"),Q(ie,ve,_t,"N","\u039D"),Q(ie,ve,_t,"O","\u039F"),Q(ie,ve,_t,"P","\u03A1"),Q(ie,ve,_t,"T","\u03A4"),Q(ie,ve,_t,"X","\u03A7"),Q(ie,ve,_t,"\xAC","\\neg",!0),Q(ie,ve,_t,"\xAC","\\lnot"),Q(ie,ve,_t,"\u22A4","\\top"),Q(ie,ve,_t,"\u22A5","\\bot"),Q(ie,ve,_t,"\u2205","\\emptyset"),Q(ie,Je,_t,"\u2205","\\varnothing"),Q(ie,ve,Tn,"\u03B1","\\alpha",!0),Q(ie,ve,Tn,"\u03B2","\\beta",!0),Q(ie,ve,Tn,"\u03B3","\\gamma",!0),Q(ie,ve,Tn,"\u03B4","\\delta",!0),Q(ie,ve,Tn,"\u03F5","\\epsilon",!0),Q(ie,ve,Tn,"\u03B6","\\zeta",!0),Q(ie,ve,Tn,"\u03B7","\\eta",!0),Q(ie,ve,Tn,"\u03B8","\\theta",!0),Q(ie,ve,Tn,"\u03B9","\\iota",!0),Q(ie,ve,Tn,"\u03BA","\\kappa",!0),Q(ie,ve,Tn,"\u03BB","\\lambda",!0),Q(ie,ve,Tn,"\u03BC","\\mu",!0),Q(ie,ve,Tn,"\u03BD","\\nu",!0),Q(ie,ve,Tn,"\u03BE","\\xi",!0),Q(ie,ve,Tn,"\u03BF","\\omicron",!0),Q(ie,ve,Tn,"\u03C0","\\pi",!0),Q(ie,ve,Tn,"\u03C1","\\rho",!0),Q(ie,ve,Tn,"\u03C3","\\sigma",!0),Q(ie,ve,Tn,"\u03C4","\\tau",!0),Q(ie,ve,Tn,"\u03C5","\\upsilon",!0),Q(ie,ve,Tn,"\u03D5","\\phi",!0),Q(ie,ve,Tn,"\u03C7","\\chi",!0),Q(ie,ve,Tn,"\u03C8","\\psi",!0),Q(ie,ve,Tn,"\u03C9","\\omega",!0),Q(ie,ve,Tn,"\u03B5","\\varepsilon",!0),Q(ie,ve,Tn,"\u03D1","\\vartheta",!0),Q(ie,ve,Tn,"\u03D6","\\varpi",!0),Q(ie,ve,Tn,"\u03F1","\\varrho",!0),Q(ie,ve,Tn,"\u03C2","\\varsigma",!0),Q(ie,ve,Tn,"\u03C6","\\varphi",!0),Q(ie,ve,Ui,"\u2217","*",!0),Q(ie,ve,Ui,"+","+"),Q(ie,ve,Ui,"\u2212","-",!0),Q(ie,ve,Ui,"\u22C5","\\cdot",!0),Q(ie,ve,Ui,"\u2218","\\circ",!0),Q(ie,ve,Ui,"\xF7","\\div",!0),Q(ie,ve,Ui,"\xB1","\\pm",!0),Q(ie,ve,Ui,"\xD7","\\times",!0),Q(ie,ve,Ui,"\u2229","\\cap",!0),Q(ie,ve,Ui,"\u222A","\\cup",!0),Q(ie,ve,Ui,"\u2216","\\setminus",!0),Q(ie,ve,Ui,"\u2227","\\land"),Q(ie,ve,Ui,"\u2228","\\lor"),Q(ie,ve,Ui,"\u2227","\\wedge",!0),Q(ie,ve,Ui,"\u2228","\\vee",!0),Q(ie,ve,_t,"\u221A","\\surd"),Q(ie,ve,pl,"\u27E8","\\langle",!0),Q(ie,ve,pl,"\u2223","\\lvert"),Q(ie,ve,pl,"\u2225","\\lVert"),Q(ie,ve,Ro,"?","?"),Q(ie,ve,Ro,"!","!"),Q(ie,ve,Ro,"\u27E9","\\rangle",!0),Q(ie,ve,Ro,"\u2223","\\rvert"),Q(ie,ve,Ro,"\u2225","\\rVert"),Q(ie,ve,Ye,"=","="),Q(ie,ve,Ye,":",":"),Q(ie,ve,Ye,"\u2248","\\approx",!0),Q(ie,ve,Ye,"\u2245","\\cong",!0),Q(ie,ve,Ye,"\u2265","\\ge"),Q(ie,ve,Ye,"\u2265","\\geq",!0),Q(ie,ve,Ye,"\u2190","\\gets"),Q(ie,ve,Ye,">","\\gt",!0),Q(ie,ve,Ye,"\u2208","\\in",!0),Q(ie,ve,Ye,"\uE020","\\@not"),Q(ie,ve,Ye,"\u2282","\\subset",!0),Q(ie,ve,Ye,"\u2283","\\supset",!0),Q(ie,ve,Ye,"\u2286","\\subseteq",!0),Q(ie,ve,Ye,"\u2287","\\supseteq",!0),Q(ie,Je,Ye,"\u2288","\\nsubseteq",!0),Q(ie,Je,Ye,"\u2289","\\nsupseteq",!0),Q(ie,ve,Ye,"\u22A8","\\models"),Q(ie,ve,Ye,"\u2190","\\leftarrow",!0),Q(ie,ve,Ye,"\u2264","\\le"),Q(ie,ve,Ye,"\u2264","\\leq",!0),Q(ie,ve,Ye,"<","\\lt",!0),Q(ie,ve,Ye,"\u2192","\\rightarrow",!0),Q(ie,ve,Ye,"\u2192","\\to"),Q(ie,Je,Ye,"\u2271","\\ngeq",!0),Q(ie,Je,Ye,"\u2270","\\nleq",!0),Q(ie,ve,lo,"\xA0","\\ "),Q(ie,ve,lo,"\xA0","\\space"),Q(ie,ve,lo,"\xA0","\\nobreakspace"),Q(Mr,ve,lo,"\xA0","\\ "),Q(Mr,ve,lo,"\xA0"," "),Q(Mr,ve,lo,"\xA0","\\space"),Q(Mr,ve,lo,"\xA0","\\nobreakspace"),Q(ie,ve,lo,null,"\\nobreak"),Q(ie,ve,lo,null,"\\allowbreak"),Q(ie,ve,Ya,",",","),Q(ie,ve,Ya,";",";"),Q(ie,Je,Ui,"\u22BC","\\barwedge",!0),Q(ie,Je,Ui,"\u22BB","\\veebar",!0),Q(ie,ve,Ui,"\u2299","\\odot",!0),Q(ie,ve,Ui,"\u2295","\\oplus",!0),Q(ie,ve,Ui,"\u2297","\\otimes",!0),Q(ie,ve,_t,"\u2202","\\partial",!0),Q(ie,ve,Ui,"\u2298","\\oslash",!0),Q(ie,Je,Ui,"\u229A","\\circledcirc",!0),Q(ie,Je,Ui,"\u22A1","\\boxdot",!0),Q(ie,ve,Ui,"\u25B3","\\bigtriangleup"),Q(ie,ve,Ui,"\u25BD","\\bigtriangledown"),Q(ie,ve,Ui,"\u2020","\\dagger"),Q(ie,ve,Ui,"\u22C4","\\diamond"),Q(ie,ve,Ui,"\u22C6","\\star"),Q(ie,ve,Ui,"\u25C3","\\triangleleft"),Q(ie,ve,Ui,"\u25B9","\\triangleright"),Q(ie,ve,pl,"{","\\{"),Q(Mr,ve,_t,"{","\\{"),Q(Mr,ve,_t,"{","\\textbraceleft"),Q(ie,ve,Ro,"}","\\}"),Q(Mr,ve,_t,"}","\\}"),Q(Mr,ve,_t,"}","\\textbraceright"),Q(ie,ve,pl,"{","\\lbrace"),Q(ie,ve,Ro,"}","\\rbrace"),Q(ie,ve,pl,"[","\\lbrack",!0),Q(Mr,ve,_t,"[","\\lbrack",!0),Q(ie,ve,Ro,"]","\\rbrack",!0),Q(Mr,ve,_t,"]","\\rbrack",!0),Q(ie,ve,pl,"(","\\lparen",!0),Q(ie,ve,Ro,")","\\rparen",!0),Q(Mr,ve,_t,"<","\\textless",!0),Q(Mr,ve,_t,">","\\textgreater",!0),Q(ie,ve,pl,"\u230A","\\lfloor",!0),Q(ie,ve,Ro,"\u230B","\\rfloor",!0),Q(ie,ve,pl,"\u2308","\\lceil",!0),Q(ie,ve,Ro,"\u2309","\\rceil",!0),Q(ie,ve,_t,"\\","\\backslash"),Q(ie,ve,_t,"\u2223","|"),Q(ie,ve,_t,"\u2223","\\vert"),Q(Mr,ve,_t,"|","\\textbar",!0),Q(ie,ve,_t,"\u2225","\\|"),Q(ie,ve,_t,"\u2225","\\Vert"),Q(Mr,ve,_t,"\u2225","\\textbardbl"),Q(Mr,ve,_t,"~","\\textasciitilde"),Q(Mr,ve,_t,"\\","\\textbackslash"),Q(Mr,ve,_t,"^","\\textasciicircum"),Q(ie,ve,Ye,"\u2191","\\uparrow",!0),Q(ie,ve,Ye,"\u21D1","\\Uparrow",!0),Q(ie,ve,Ye,"\u2193","\\downarrow",!0),Q(ie,ve,Ye,"\u21D3","\\Downarrow",!0),Q(ie,ve,Ye,"\u2195","\\updownarrow",!0),Q(ie,ve,Ye,"\u21D5","\\Updownarrow",!0),Q(ie,ve,Ys,"\u2210","\\coprod"),Q(ie,ve,Ys,"\u22C1","\\bigvee"),Q(ie,ve,Ys,"\u22C0","\\bigwedge"),Q(ie,ve,Ys,"\u2A04","\\biguplus"),Q(ie,ve,Ys,"\u22C2","\\bigcap"),Q(ie,ve,Ys,"\u22C3","\\bigcup"),Q(ie,ve,Ys,"\u222B","\\int"),Q(ie,ve,Ys,"\u222B","\\intop"),Q(ie,ve,Ys,"\u222C","\\iint"),Q(ie,ve,Ys,"\u222D","\\iiint"),Q(ie,ve,Ys,"\u220F","\\prod"),Q(ie,ve,Ys,"\u2211","\\sum"),Q(ie,ve,Ys,"\u2A02","\\bigotimes"),Q(ie,ve,Ys,"\u2A01","\\bigoplus"),Q(ie,ve,Ys,"\u2A00","\\bigodot"),Q(ie,ve,Ys,"\u222E","\\oint"),Q(ie,ve,Ys,"\u222F","\\oiint"),Q(ie,ve,Ys,"\u2230","\\oiiint"),Q(ie,ve,Ys,"\u2A06","\\bigsqcup"),Q(ie,ve,Ys,"\u222B","\\smallint"),Q(Mr,ve,gp,"\u2026","\\textellipsis"),Q(ie,ve,gp,"\u2026","\\mathellipsis"),Q(Mr,ve,gp,"\u2026","\\ldots",!0),Q(ie,ve,gp,"\u2026","\\ldots",!0),Q(ie,ve,gp,"\u22EF","\\@cdots",!0),Q(ie,ve,gp,"\u22F1","\\ddots",!0),Q(ie,ve,_t,"\u22EE","\\varvdots"),Q(ie,ve,vs,"\u02CA","\\acute"),Q(ie,ve,vs,"\u02CB","\\grave"),Q(ie,ve,vs,"\xA8","\\ddot"),Q(ie,ve,vs,"~","\\tilde"),Q(ie,ve,vs,"\u02C9","\\bar"),Q(ie,ve,vs,"\u02D8","\\breve"),Q(ie,ve,vs,"\u02C7","\\check"),Q(ie,ve,vs,"^","\\hat"),Q(ie,ve,vs,"\u20D7","\\vec"),Q(ie,ve,vs,"\u02D9","\\dot"),Q(ie,ve,vs,"\u02DA","\\mathring"),Q(ie,ve,Tn,"\uE131","\\@imath"),Q(ie,ve,Tn,"\uE237","\\@jmath"),Q(ie,ve,_t,"\u0131","\u0131"),Q(ie,ve,_t,"\u0237","\u0237"),Q(Mr,ve,_t,"\u0131","\\i",!0),Q(Mr,ve,_t,"\u0237","\\j",!0),Q(Mr,ve,_t,"\xDF","\\ss",!0),Q(Mr,ve,_t,"\xE6","\\ae",!0),Q(Mr,ve,_t,"\u0153","\\oe",!0),Q(Mr,ve,_t,"\xF8","\\o",!0),Q(Mr,ve,_t,"\xC6","\\AE",!0),Q(Mr,ve,_t,"\u0152","\\OE",!0),Q(Mr,ve,_t,"\xD8","\\O",!0),Q(Mr,ve,vs,"\u02CA","\\'"),Q(Mr,ve,vs,"\u02CB","\\`"),Q(Mr,ve,vs,"\u02C6","\\^"),Q(Mr,ve,vs,"\u02DC","\\~"),Q(Mr,ve,vs,"\u02C9","\\="),Q(Mr,ve,vs,"\u02D8","\\u"),Q(Mr,ve,vs,"\u02D9","\\."),Q(Mr,ve,vs,"\xB8","\\c"),Q(Mr,ve,vs,"\u02DA","\\r"),Q(Mr,ve,vs,"\u02C7","\\v"),Q(Mr,ve,vs,"\xA8",'\\"'),Q(Mr,ve,vs,"\u02DD","\\H"),Q(Mr,ve,vs,"\u25EF","\\textcircled"),$w={"--":!0,"---":!0,"``":!0,"''":!0},Q(Mr,ve,_t,"\u2013","--",!0),Q(Mr,ve,_t,"\u2013","\\textendash"),Q(Mr,ve,_t,"\u2014","---",!0),Q(Mr,ve,_t,"\u2014","\\textemdash"),Q(Mr,ve,_t,"\u2018","`",!0),Q(Mr,ve,_t,"\u2018","\\textquoteleft"),Q(Mr,ve,_t,"\u2019","'",!0),Q(Mr,ve,_t,"\u2019","\\textquoteright"),Q(Mr,ve,_t,"\u201C","``",!0),Q(Mr,ve,_t,"\u201C","\\textquotedblleft"),Q(Mr,ve,_t,"\u201D","''",!0),Q(Mr,ve,_t,"\u201D","\\textquotedblright"),Q(ie,ve,_t,"\xB0","\\degree",!0),Q(Mr,ve,_t,"\xB0","\\degree"),Q(Mr,ve,_t,"\xB0","\\textdegree",!0),Q(ie,ve,_t,"\xA3","\\pounds"),Q(ie,ve,_t,"\xA3","\\mathsterling",!0),Q(Mr,ve,_t,"\xA3","\\pounds"),Q(Mr,ve,_t,"\xA3","\\textsterling",!0),Q(ie,Je,_t,"\u2720","\\maltese"),Q(Mr,Je,_t,"\u2720","\\maltese"),zw='0123456789/@."',id=0;id<zw.length;id++)Gw=zw.charAt(id),Q(ie,ve,_t,Gw,Gw);for(qx='0123456789!@*()-=+";:?/.,',cy=0;cy<qx.length;cy++)nd=qx.charAt(cy),Q(Mr,ve,_t,nd,nd);for(mg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",Xx=0;Xx<mg.length;Xx++)dy=mg.charAt(Xx),Q(ie,ve,Tn,dy,dy),Q(Mr,ve,_t,dy,dy);for(Q(ie,Je,_t,"C","\u2102"),Q(Mr,Je,_t,"C","\u2102"),Q(ie,Je,_t,"H","\u210D"),Q(Mr,Je,_t,"H","\u210D"),Q(ie,Je,_t,"N","\u2115"),Q(Mr,Je,_t,"N","\u2115"),Q(ie,Je,_t,"P","\u2119"),Q(Mr,Je,_t,"P","\u2119"),Q(ie,Je,_t,"Q","\u211A"),Q(Mr,Je,_t,"Q","\u211A"),Q(ie,Je,_t,"R","\u211D"),Q(Mr,Je,_t,"R","\u211D"),Q(ie,Je,_t,"Z","\u2124"),Q(Mr,Je,_t,"Z","\u2124"),Q(ie,ve,Tn,"h","\u210E"),Q(Mr,ve,Tn,"h","\u210E"),An="",fl=0;fl<mg.length;fl++)Ds=mg.charAt(fl),An=String.fromCharCode(55349,56320+fl),Q(ie,ve,Tn,Ds,An),Q(Mr,ve,_t,Ds,An),An=String.fromCharCode(55349,56372+fl),Q(ie,ve,Tn,Ds,An),Q(Mr,ve,_t,Ds,An),An=String.fromCharCode(55349,56424+fl),Q(ie,ve,Tn,Ds,An),Q(Mr,ve,_t,Ds,An),An=String.fromCharCode(55349,56580+fl),Q(ie,ve,Tn,Ds,An),Q(Mr,ve,_t,Ds,An),An=String.fromCharCode(55349,56684+fl),Q(ie,ve,Tn,Ds,An),Q(Mr,ve,_t,Ds,An),An=String.fromCharCode(55349,56736+fl),Q(ie,ve,Tn,Ds,An),Q(Mr,ve,_t,Ds,An),An=String.fromCharCode(55349,56788+fl),Q(ie,ve,Tn,Ds,An),Q(Mr,ve,_t,Ds,An),An=String.fromCharCode(55349,56840+fl),Q(ie,ve,Tn,Ds,An),Q(Mr,ve,_t,Ds,An),An=String.fromCharCode(55349,56944+fl),Q(ie,ve,Tn,Ds,An),Q(Mr,ve,_t,Ds,An),fl<26&&(An=String.fromCharCode(55349,56632+fl),Q(ie,ve,Tn,Ds,An),Q(Mr,ve,_t,Ds,An),An=String.fromCharCode(55349,56476+fl),Q(ie,ve,Tn,Ds,An),Q(Mr,ve,_t,Ds,An));for(An="\u{1D55C}",Q(ie,ve,Tn,"k",An),Q(Mr,ve,_t,"k",An),n0=0;n0<10;n0++)Lh=n0.toString(),An=String.fromCharCode(55349,57294+n0),Q(ie,ve,Tn,Lh,An),Q(Mr,ve,_t,Lh,An),An=String.fromCharCode(55349,57314+n0),Q(ie,ve,Tn,Lh,An),Q(Mr,ve,_t,Lh,An),An=String.fromCharCode(55349,57324+n0),Q(ie,ve,Tn,Lh,An),Q(Mr,ve,_t,Lh,An),An=String.fromCharCode(55349,57334+n0),Q(ie,ve,Tn,Lh,An),Q(Mr,ve,_t,Lh,An);for(yg="\xD0\xDE\xFE",vg=0;vg<yg.length;vg++)py=yg.charAt(vg),Q(ie,ve,Tn,py,py),Q(Mr,ve,_t,py,py);mp=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],Uw=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],jw=function(e,t){var r=e.charCodeAt(0),i=e.charCodeAt(1),n=(r-55296)*1024+(i-56320)+65536,a=t==="math"?0:1;if(119808<=n&&n<120484){var s=Math.floor((n-119808)/26);return[mp[s][2],mp[s][a]]}else if(120782<=n&&n<=120831){var u=Math.floor((n-120782)/10);return[Uw[u][2],Uw[u][a]]}else{if(n===120485||n===120486)return[mp[0][2],mp[0][a]];if(120486<n&&n<120782)return["",""];throw new qr("Unsupported character: "+e)}},xg=function(e,t,r){return Ja[r][e]&&Ja[r][e].replace&&(e=Ja[r][e].replace),{value:e,metrics:xo(e,t,r)}},ku=function(e,t,r,i,n){var a=xg(e,t,r),s=a.metrics;e=a.value;var u;if(s){var h=s.italic;(r==="text"||i&&i.font==="mathit")&&(h=0),u=new tu(e,s.height,s.depth,h,s.skew,s.width,n)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+e+"' in style '"+t+"' and mode '"+r+"'")),u=new tu(e,0,0,0,0,0,n);if(i){u.maxFontSize=i.sizeMultiplier,i.style.isTight()&&u.classes.push("mtight");var d=i.getColor();d&&(u.style.color=d)}return u},rA=function(e,t,r,i){return i===void 0&&(i=[]),r.font==="boldsymbol"&&xg(e,"Main-Bold",t).metrics?ku(e,"Main-Bold",t,r,i.concat(["mathbf"])):e==="\\"||Ja[t][e].font==="main"?ku(e,"Main-Regular",t,r,i):ku(e,"AMS-Regular",t,r,i.concat(["amsrm"]))},Kx=function(e,t,r,i,n){return n!=="textord"&&xg(e,"Math-BoldItalic",t).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},fy=function(e,t,r){var i=e.mode,n=e.text,a=["mord"],s=i==="math"||i==="text"&&t.font,u=s?t.font:t.fontFamily,h="",d="";if(n.charCodeAt(0)===55349&&([h,d]=jw(n,i)),h.length>0)return ku(n,h,i,t,a.concat(d));if(u){var p,g;if(u==="boldsymbol"){var y=Kx(n,i,t,a,r);p=y.fontName,g=[y.fontClass]}else s?(p=yy[u].fontName,g=[u]):(p=my(u,t.fontWeight,t.fontShape),g=[u,t.fontWeight,t.fontShape]);if(xg(n,p,i).metrics)return ku(n,p,i,t,a.concat(g));if($w.hasOwnProperty(n)&&p.slice(0,10)==="Typewriter"){for(var m=[],x=0;x<n.length;x++)m.push(ku(n[x],p,i,t,a.concat(g)));return Jx(m)}}if(r==="mathord")return ku(n,"Math-Italic",i,t,a.concat(["mathnormal"]));if(r==="textord"){var _=Ja[i][n]&&Ja[i][n].font;if(_==="ams"){var E=my("amsrm",t.fontWeight,t.fontShape);return ku(n,E,i,t,a.concat("amsrm",t.fontWeight,t.fontShape))}else if(_==="main"||!_){var w=my("textrm",t.fontWeight,t.fontShape);return ku(n,w,i,t,a.concat(t.fontWeight,t.fontShape))}else{var C=my(_,t.fontWeight,t.fontShape);return ku(n,C,i,t,a.concat(C,t.fontWeight,t.fontShape))}}else throw new Error("unexpected type: "+r+" in makeOrd")},Zx=(e,t)=>{if(tl(e.classes)!==tl(t.classes)||e.skew!==t.skew||e.maxFontSize!==t.maxFontSize)return!1;if(e.classes.length===1){var r=e.classes[0];if(r==="mbin"||r==="mord")return!1}for(var i in e.style)if(e.style.hasOwnProperty(i)&&e.style[i]!==t.style[i])return!1;for(var n in t.style)if(t.style.hasOwnProperty(n)&&e.style[n]!==t.style[n])return!1;return!0},gy=e=>{for(var t=0;t<e.length-1;t++){var r=e[t],i=e[t+1];r instanceof tu&&i instanceof tu&&Zx(r,i)&&(r.text+=i.text,r.height=Math.max(r.height,i.height),r.depth=Math.max(r.depth,i.depth),r.italic=i.italic,e.splice(t+1,1),t--)}return e},bg=function(e){for(var t=0,r=0,i=0,n=0;n<e.children.length;n++){var a=e.children[n];a.height>t&&(t=a.height),a.depth>r&&(r=a.depth),a.maxFontSize>i&&(i=a.maxFontSize)}e.height=t,e.depth=r,e.maxFontSize=i},Do=function(e,t,r,i){var n=new rl(e,t,r,i);return bg(n),n},Qx=(e,t,r,i)=>new rl(e,t,r,i),Hw=function(e,t,r){var i=Do([e],[],t);return i.height=Math.max(r||t.fontMetrics().defaultRuleThickness,t.minRuleThickness),i.style.borderBottomWidth=ci(i.height),i.maxFontSize=1,i},Vw=function(e,t,r,i){var n=new uy(e,t,r,i);return bg(n),n},Jx=function(e){var t=new fg(e);return bg(t),t},Ww=function(e,t){return e instanceof fg?Do([],[e],t):e},Yw=function(e){if(e.positionType==="individualShift"){for(var t=e.children,r=[t[0]],i=-t[0].shift-t[0].elem.depth,n=i,a=1;a<t.length;a++){var s=-t[a].shift-n-t[a].elem.depth,u=s-(t[a-1].elem.height+t[a-1].elem.depth);n=n+s,r.push({type:"kern",size:u}),r.push(t[a])}return{children:r,depth:i}}var h;if(e.positionType==="top"){for(var d=e.positionData,p=0;p<e.children.length;p++){var g=e.children[p];d-=g.type==="kern"?g.size:g.elem.height+g.elem.depth}h=d}else if(e.positionType==="bottom")h=-e.positionData;else{var y=e.children[0];if(y.type!=="elem")throw new Error('First child must have type "elem".');if(e.positionType==="shift")h=-y.elem.depth-e.positionData;else if(e.positionType==="firstBaseline")h=-y.elem.depth;else throw new Error("Invalid positionType "+e.positionType+".")}return{children:e.children,depth:h}},qw=function(e,t){for(var{children:r,depth:i}=Yw(e),n=0,a=0;a<r.length;a++){var s=r[a];if(s.type==="elem"){var u=s.elem;n=Math.max(n,u.maxFontSize,u.height)}}n+=2;var h=Do(["pstrut"],[]);h.style.height=ci(n);for(var d=[],p=i,g=i,y=i,m=0;m<r.length;m++){var x=r[m];if(x.type==="kern")y+=x.size;else{var _=x.elem,E=x.wrapperClasses||[],w=x.wrapperStyle||{},C=Do(E,[h,_],void 0,w);C.style.top=ci(-n-y-_.depth),x.marginLeft&&(C.style.marginLeft=x.marginLeft),x.marginRight&&(C.style.marginRight=x.marginRight),d.push(C),y+=_.height+_.depth}p=Math.min(p,y),g=Math.max(g,y)}var A=Do(["vlist"],d);A.style.height=ci(g);var M;if(p<0){var N=Do([],[]),B=Do(["vlist"],[N]);B.style.height=ci(-p);var O=Do(["vlist-s"],[new tu("\u200B")]);M=[Do(["vlist-r"],[A,O]),Do(["vlist-r"],[B])]}else M=[Do(["vlist-r"],[A])];var L=Do(["vlist-t"],M);return M.length===2&&L.classes.push("vlist-t2"),L.height=g,L.depth=-p,L},eb=(e,t)=>{var r=Do(["mspace"],[],t),i=ys(e,t);return r.style.marginRight=ci(i),r},my=function(e,t,r){var i="";switch(e){case"amsrm":i="AMS";break;case"textrm":i="Main";break;case"textsf":i="SansSerif";break;case"texttt":i="Typewriter";break;default:i=e}var n;return t==="textbf"&&r==="textit"?n="BoldItalic":t==="textbf"?n="Bold":t==="textit"?n="Italic":n="Regular",i+"-"+n},yy={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},Xw={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},tb=function(e,t){var[r,i,n]=Xw[e],a=new ru(r),s=new Mh([a],{width:ci(i),height:ci(n),style:"width:"+ci(i),viewBox:"0 0 "+1e3*i+" "+1e3*n,preserveAspectRatio:"xMinYMin"}),u=Qx(["overlay"],[s],t);return u.height=n,u.style.height=ci(n),u.style.width=ci(i),u},Bt={fontMap:yy,makeSymbol:ku,mathsym:rA,makeSpan:Do,makeSvgSpan:Qx,makeLineSpan:Hw,makeAnchor:Vw,makeFragment:Jx,wrapFragment:Ww,makeVList:qw,makeOrd:fy,makeGlue:eb,staticSvg:tb,svgData:Xw,tryCombineChars:gy},Ra={number:3,unit:"mu"},eh={number:4,unit:"mu"},iu={number:5,unit:"mu"},rb={mord:{mop:Ra,mbin:eh,mrel:iu,minner:Ra},mop:{mord:Ra,mop:Ra,mrel:iu,minner:Ra},mbin:{mord:eh,mop:eh,mopen:eh,minner:eh},mrel:{mord:iu,mop:iu,mopen:iu,minner:iu},mopen:{},mclose:{mop:Ra,mbin:eh,mrel:iu,minner:Ra},mpunct:{mord:Ra,mop:Ra,mrel:iu,mopen:Ra,mclose:Ra,mpunct:Ra,minner:Ra},minner:{mord:Ra,mop:Ra,mbin:eh,mrel:iu,mopen:Ra,mpunct:Ra,minner:Ra}},iA={mord:{mop:Ra},mop:{mord:Ra,mop:Ra},mbin:{},mrel:{},mopen:{},mclose:{mop:Ra},mpunct:{},minner:{mop:Ra}},vy={},xy={},ad={},_g=function(e){return e.type==="ordgroup"&&e.body.length===1?e.body[0]:e},js=function(e){return e.type==="ordgroup"?e.body:[e]},Rh=Bt.makeSpan,Io=["leftmost","mbin","mopen","mrel","mop","mpunct"],by=["rightmost","mrel","mclose","mpunct"],Kw={display:kn.DISPLAY,text:kn.TEXT,script:kn.SCRIPT,scriptscript:kn.SCRIPTSCRIPT},nA={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},uo=function(e,t,r,i){i===void 0&&(i=[null,null]);for(var n=[],a=0;a<e.length;a++){var s=wa(e[a],t);if(s instanceof fg){var u=s.children;n.push(...u)}else n.push(s)}if(Bt.tryCombineChars(n),!r)return n;var h=t;if(e.length===1){var d=e[0];d.type==="sizing"?h=t.havingSize(d.size):d.type==="styling"&&(h=t.havingStyle(Kw[d.style]))}var p=Rh([i[0]||"leftmost"],[],t),g=Rh([i[1]||"rightmost"],[],t),y=r==="root";return wg(n,(m,x)=>{var _=x.classes[0],E=m.classes[0];_==="mbin"&&hn.contains(by,E)?x.classes[0]="mord":E==="mbin"&&hn.contains(Io,_)&&(m.classes[0]="mord")},{node:p},g,y),wg(n,(m,x)=>{var _=Tu(x),E=Tu(m),w=_&&E?m.hasClass("mtight")?iA[_][E]:rb[_][E]:null;if(w)return Bt.makeGlue(w,h)},{node:p},g,y),n},wg=function e(t,r,i,n,a){n&&t.push(n);for(var s=0;s<t.length;s++){var u=t[s],h=ib(u);if(h){e(h.children,r,i,null,a);continue}var d=!u.hasClass("mspace");if(d){var p=r(u,i.node);p&&(i.insertAfter?i.insertAfter(p):(t.unshift(p),s++))}d?i.node=u:a&&u.hasClass("newline")&&(i.node=Rh(["leftmost"])),i.insertAfter=(g=>y=>{t.splice(g+1,0,y),s++})(s)}n&&t.pop()},ib=function(e){return e instanceof fg||e instanceof uy||e instanceof rl&&e.hasClass("enclosing")?e:null},nb=function e(t,r){var i=ib(t);if(i){var n=i.children;if(n.length){if(r==="right")return e(n[n.length-1],"right");if(r==="left")return e(n[0],"left")}}return t},Tu=function(e,t){return e?(t&&(e=nb(e,t)),nA[e.classes[0]]||null):null},th=function(e,t){var r=["nulldelimiter"].concat(e.baseSizingClasses());return Rh(t.concat(r))},wa=function(e,t,r){if(!e)return Rh();if(xy[e.type]){var i=xy[e.type](e,t);if(r&&t.size!==r.size){i=Rh(t.sizingClasses(r),[i],t);var n=t.sizeMultiplier/r.sizeMultiplier;i.height*=n,i.depth*=n}return i}else throw new qr("Got group of unknown type: '"+e.type+"'")},gl=class{constructor(e,t,r){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=e,this.attributes={},this.children=t||[],this.classes=r||[]}setAttribute(e,t){this.attributes[e]=t}getAttribute(e){return this.attributes[e]}toNode(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&e.setAttribute(t,this.attributes[t]);this.classes.length>0&&(e.className=tl(this.classes));for(var r=0;r<this.children.length;r++)e.appendChild(this.children[r].toNode());return e}toMarkup(){var e="<"+this.type;for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="',e+=hn.escape(this.attributes[t]),e+='"');this.classes.length>0&&(e+=' class ="'+hn.escape(tl(this.classes))+'"'),e+=">";for(var r=0;r<this.children.length;r++)e+=this.children[r].toMarkup();return e+="</"+this.type+">",e}toText(){return this.children.map(e=>e.toText()).join("")}},yp=class{constructor(e){this.text=void 0,this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return hn.escape(this.toText())}toText(){return this.text}},aA=class{constructor(e){this.width=void 0,this.character=void 0,this.width=e,e>=.05555&&e<=.05556?this.character="\u200A":e>=.1666&&e<=.1667?this.character="\u2009":e>=.2222&&e<=.2223?this.character="\u2005":e>=.2777&&e<=.2778?this.character="\u2005\u200A":e>=-.05556&&e<=-.05555?this.character="\u200A\u2063":e>=-.1667&&e<=-.1666?this.character="\u2009\u2063":e>=-.2223&&e<=-.2222?this.character="\u205F\u2063":e>=-.2778&&e<=-.2777?this.character="\u2005\u2063":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",ci(this.width)),e}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+ci(this.width)+'"/>'}toText(){return this.character?this.character:" "}},Hr={MathNode:gl,TextNode:yp,SpaceNode:aA,newDocumentFragment:gs},nu=function(e,t,r){return Ja[t][e]&&Ja[t][e].replace&&e.charCodeAt(0)!==55349&&!($w.hasOwnProperty(e)&&r&&(r.fontFamily&&r.fontFamily.slice(4,6)==="tt"||r.font&&r.font.slice(4,6)==="tt"))&&(e=Ja[t][e].replace),new Hr.TextNode(e)},ab=function(e){return e.length===1?e[0]:new Hr.MathNode("mrow",e)},sd=function(e,t){if(t.fontFamily==="texttt")return"monospace";if(t.fontFamily==="textsf")return t.fontShape==="textit"&&t.fontWeight==="textbf"?"sans-serif-bold-italic":t.fontShape==="textit"?"sans-serif-italic":t.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(t.fontShape==="textit"&&t.fontWeight==="textbf")return"bold-italic";if(t.fontShape==="textit")return"italic";if(t.fontWeight==="textbf")return"bold";var r=t.font;if(!r||r==="mathnormal")return null;var i=e.mode;if(r==="mathit")return"italic";if(r==="boldsymbol")return e.type==="textord"?"bold":"bold-italic";if(r==="mathbf")return"bold";if(r==="mathbb")return"double-struck";if(r==="mathfrak")return"fraktur";if(r==="mathscr"||r==="mathcal")return"script";if(r==="mathsf")return"sans-serif";if(r==="mathtt")return"monospace";var n=e.text;if(hn.contains(["\\imath","\\jmath"],n))return null;Ja[i][n]&&Ja[i][n].replace&&(n=Ja[i][n].replace);var a=Bt.fontMap[r].fontName;return xo(n,a,i)?Bt.fontMap[r].variant:null},qs=function(e,t,r){if(e.length===1){var i=Va(e[0],t);return r&&i instanceof gl&&i.type==="mo"&&(i.setAttribute("lspace","0em"),i.setAttribute("rspace","0em")),[i]}for(var n=[],a,s=0;s<e.length;s++){var u=Va(e[s],t);if(u instanceof gl&&a instanceof gl){if(u.type==="mtext"&&a.type==="mtext"&&u.getAttribute("mathvariant")===a.getAttribute("mathvariant")){a.children.push(...u.children);continue}else if(u.type==="mn"&&a.type==="mn"){a.children.push(...u.children);continue}else if(u.type==="mi"&&u.children.length===1&&a.type==="mn"){var h=u.children[0];if(h instanceof yp&&h.text==="."){a.children.push(...u.children);continue}}else if(a.type==="mi"&&a.children.length===1){var d=a.children[0];if(d instanceof yp&&d.text==="\u0338"&&(u.type==="mo"||u.type==="mi"||u.type==="mn")){var p=u.children[0];p instanceof yp&&p.text.length>0&&(p.text=p.text.slice(0,1)+"\u0338"+p.text.slice(1),n.pop())}}}n.push(u),a=u}return n},au=function(e,t,r){return ab(qs(e,t,r))},Va=function(e,t){if(!e)return new Hr.MathNode("mrow");if(ad[e.type]){var r=ad[e.type](e,t);return r}else throw new qr("Got group of unknown type: '"+e.type+"'")},Zw=function(e){return new wu({style:e.displayMode?kn.DISPLAY:kn.TEXT,maxSize:e.maxSize,minRuleThickness:e.minRuleThickness})},_y=function(e,t){if(t.displayMode){var r=["katex-display"];t.leqno&&r.push("leqno"),t.fleqn&&r.push("fleqn"),e=Bt.makeSpan(r,[e])}return e},wy=function(e,t,r){var i=Zw(r),n;if(r.output==="mathml")return q8(e,t,i,r.displayMode,!0);if(r.output==="html"){var a=op(e,i);n=Bt.makeSpan(["katex"],[a])}else{var s=q8(e,t,i,r.displayMode,!1),u=op(e,i);n=Bt.makeSpan(["katex"],[s,u])}return _y(n,r)},sb=function(e,t,r){var i=Zw(r),n=op(e,i),a=Bt.makeSpan(["katex"],[n]);return _y(a,r)},a0={widehat:"^",widecheck:"\u02C7",widetilde:"~",utilde:"~",overleftarrow:"\u2190",underleftarrow:"\u2190",xleftarrow:"\u2190",overrightarrow:"\u2192",underrightarrow:"\u2192",xrightarrow:"\u2192",underbrace:"\u23DF",overbrace:"\u23DE",overgroup:"\u23E0",undergroup:"\u23E1",overleftrightarrow:"\u2194",underleftrightarrow:"\u2194",xleftrightarrow:"\u2194",Overrightarrow:"\u21D2",xRightarrow:"\u21D2",overleftharpoon:"\u21BC",xleftharpoonup:"\u21BC",overrightharpoon:"\u21C0",xrightharpoonup:"\u21C0",xLeftarrow:"\u21D0",xLeftrightarrow:"\u21D4",xhookleftarrow:"\u21A9",xhookrightarrow:"\u21AA",xmapsto:"\u21A6",xrightharpoondown:"\u21C1",xleftharpoondown:"\u21BD",xrightleftharpoons:"\u21CC",xleftrightharpoons:"\u21CB",xtwoheadleftarrow:"\u219E",xtwoheadrightarrow:"\u21A0",xlongequal:"=",xtofrom:"\u21C4",xrightleftarrows:"\u21C4",xrightequilibrium:"\u21CC",xleftequilibrium:"\u21CB","\\cdrightarrow":"\u2192","\\cdleftarrow":"\u2190","\\cdlongequal":"="},Qw=function(e){var t=new Hr.MathNode("mo",[new Hr.TextNode(a0[e.replace(/^\\/,"")])]);return t.setAttribute("stretchy","true"),t},ob={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},Jw=function(e){return e.type==="ordgroup"?e.body.length:1},e6=function(e,t){function r(){var s=4e5,u=e.label.slice(1);if(hn.contains(["widehat","widecheck","widetilde","utilde"],u)){var h=e,d=Jw(h.base),p,g,y;if(d>5)u==="widehat"||u==="widecheck"?(p=420,s=2364,y=.42,g=u+"4"):(p=312,s=2340,y=.34,g="tilde4");else{var m=[1,1,2,2,3,3][d];u==="widehat"||u==="widecheck"?(s=[0,1062,2364,2364,2364][m],p=[0,239,300,360,420][m],y=[0,.24,.3,.3,.36,.42][m],g=u+m):(s=[0,600,1033,2339,2340][m],p=[0,260,286,306,312][m],y=[0,.26,.286,.3,.306,.34][m],g="tilde"+m)}var x=new ru(g),_=new Mh([x],{width:"100%",height:ci(y),viewBox:"0 0 "+s+" "+p,preserveAspectRatio:"none"});return{span:Bt.makeSvgSpan([],[_],t),minWidth:0,height:y}}else{var E=[],w=ob[u],[C,A,M]=w,N=M/1e3,B=C.length,O,L;if(B===1){var $=w[3];O=["hide-tail"],L=[$]}else if(B===2)O=["halfarrow-left","halfarrow-right"],L=["xMinYMin","xMaxYMin"];else if(B===3)O=["brace-left","brace-center","brace-right"],L=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+B+" children.");for(var G=0;G<B;G++){var z=new ru(C[G]),F=new Mh([z],{width:"400em",height:ci(N),viewBox:"0 0 "+s+" "+M,preserveAspectRatio:L[G]+" slice"}),X=Bt.makeSvgSpan([O[G]],[F],t);if(B===1)return{span:X,minWidth:A,height:N};X.style.height=ci(N),E.push(X)}return{span:Bt.makeSpan(["stretchy"],E,t),minWidth:A,height:N}}}var{span:i,minWidth:n,height:a}=r();return i.height=a,i.style.height=ci(a),n>0&&(i.style.minWidth=ci(n)),i},Is=function(e,t,r,i,n){var a,s=e.height+e.depth+r+i;if(/fbox|color|angl/.test(t)){if(a=Bt.makeSpan(["stretchy",t],[],n),t==="fbox"){var u=n.color&&n.getColor();u&&(a.style.borderColor=u)}}else{var h=[];/^[bx]cancel$/.test(t)&&h.push(new hy({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(t)&&h.push(new hy({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var d=new Mh(h,{width:"100%",height:ci(s)});a=Bt.makeSvgSpan([],[d],n)}return a.height=s,a.style.height=ci(s),a},zl={encloseSpan:Is,mathMLnode:Qw,svgSpan:e6},s0=(e,t)=>{var r,i,n;e&&e.type==="supsub"?(i=Zn(e.base,"accent"),r=i.base,e.base=r,n=t0(wa(e,t)),e.base=i):(i=Zn(e,"accent"),r=i.base);var a=wa(r,t.havingCrampedStyle()),s=i.isShifty&&hn.isCharacterBox(r),u=0;if(s){var h=hn.getBaseElem(r),d=wa(h,t.havingCrampedStyle());u=Ql(d).skew}var p=i.label==="\\c",g=p?a.height+a.depth:Math.min(a.height,t.fontMetrics().xHeight),y;if(i.isStretchy)y=zl.svgSpan(i,t),y=Bt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"elem",elem:y,wrapperClasses:["svg-align"],wrapperStyle:u>0?{width:"calc(100% - "+ci(2*u)+")",marginLeft:ci(2*u)}:void 0}]},t);else{var m,x;i.label==="\\vec"?(m=Bt.staticSvg("vec",t),x=Bt.svgData.vec[1]):(m=Bt.makeOrd({mode:i.mode,text:i.label},t,"textord"),m=Ql(m),m.italic=0,x=m.width,p&&(g+=m.depth)),y=Bt.makeSpan(["accent-body"],[m]);var _=i.label==="\\textcircled";_&&(y.classes.push("accent-full"),g=a.height);var E=u;_||(E-=x/2),y.style.left=ci(E),i.label==="\\textcircled"&&(y.style.top=".2em"),y=Bt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"kern",size:-g},{type:"elem",elem:y}]},t)}var w=Bt.makeSpan(["mord","accent"],[y],t);return n?(n.children[0]=w,n.height=Math.max(w.height,n.height),n.classes[0]="mord",n):w},kg=(e,t)=>{var r=e.isStretchy?zl.mathMLnode(e.label):new Hr.MathNode("mo",[nu(e.label,e.mode)]),i=new Hr.MathNode("mover",[Va(e.base,t),r]);return i.setAttribute("accent","true"),i},t6=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(e=>"\\"+e).join("|")),wi({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(e,t)=>{var r=_g(t[0]),i=!t6.test(e.funcName),n=!i||e.funcName==="\\widehat"||e.funcName==="\\widetilde"||e.funcName==="\\widecheck";return{type:"accent",mode:e.parser.mode,label:e.funcName,isStretchy:i,isShifty:n,base:r}},htmlBuilder:s0,mathmlBuilder:kg}),wi({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(e,t)=>{var r=t[0],i=e.parser.mode;return i==="math"&&(e.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+e.funcName+" works only in text mode"),i="text"),{type:"accent",mode:i,label:e.funcName,isStretchy:!1,isShifty:!0,base:r}},htmlBuilder:s0,mathmlBuilder:kg}),wi({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(e,t)=>{var{parser:r,funcName:i}=e,n=t[0];return{type:"accentUnder",mode:r.mode,label:i,base:n}},htmlBuilder:(e,t)=>{var r=wa(e.base,t),i=zl.svgSpan(e,t),n=e.label==="\\utilde"?.12:0,a=Bt.makeVList({positionType:"top",positionData:r.height,children:[{type:"elem",elem:i,wrapperClasses:["svg-align"]},{type:"kern",size:n},{type:"elem",elem:r}]},t);return Bt.makeSpan(["mord","accentunder"],[a],t)},mathmlBuilder:(e,t)=>{var r=zl.mathMLnode(e.label),i=new Hr.MathNode("munder",[Va(e.base,t),r]);return i.setAttribute("accentunder","true"),i}}),ky=e=>{var t=new Hr.MathNode("mpadded",e?[e]:[]);return t.setAttribute("width","+0.6em"),t.setAttribute("lspace","0.3em"),t},wi({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(e,t,r){var{parser:i,funcName:n}=e;return{type:"xArrow",mode:i.mode,label:n,body:t[0],below:r[0]}},htmlBuilder(e,t){var r=t.style,i=t.havingStyle(r.sup()),n=Bt.wrapFragment(wa(e.body,i,t),t),a=e.label.slice(0,2)==="\\x"?"x":"cd";n.classes.push(a+"-arrow-pad");var s;e.below&&(i=t.havingStyle(r.sub()),s=Bt.wrapFragment(wa(e.below,i,t),t),s.classes.push(a+"-arrow-pad"));var u=zl.svgSpan(e,t),h=-t.fontMetrics().axisHeight+.5*u.height,d=-t.fontMetrics().axisHeight-.5*u.height-.111;(n.depth>.25||e.label==="\\xleftequilibrium")&&(d-=n.depth);var p;if(s){var g=-t.fontMetrics().axisHeight+s.height+.5*u.height+.111;p=Bt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:n,shift:d},{type:"elem",elem:u,shift:h},{type:"elem",elem:s,shift:g}]},t)}else p=Bt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:n,shift:d},{type:"elem",elem:u,shift:h}]},t);return p.children[0].children[0].children[1].classes.push("svg-align"),Bt.makeSpan(["mrel","x-arrow"],[p],t)},mathmlBuilder(e,t){var r=zl.mathMLnode(e.label);r.setAttribute("minsize",e.label.charAt(0)==="x"?"1.75em":"3.0em");var i;if(e.body){var n=ky(Va(e.body,t));if(e.below){var a=ky(Va(e.below,t));i=new Hr.MathNode("munderover",[r,a,n])}else i=new Hr.MathNode("mover",[r,n])}else if(e.below){var s=ky(Va(e.below,t));i=new Hr.MathNode("munder",[r,s])}else i=ky(),i=new Hr.MathNode("mover",[r,i]);return i}}),r6=Bt.makeSpan,wi({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(e,t){var{parser:r,funcName:i}=e,n=t[0];return{type:"mclass",mode:r.mode,mclass:"m"+i.slice(5),body:js(n),isCharacterBox:hn.isCharacterBox(n)}},htmlBuilder:Tw,mathmlBuilder:Bx}),Tg=e=>{var t=e.type==="ordgroup"&&e.body.length?e.body[0]:e;return t.type==="atom"&&(t.family==="bin"||t.family==="rel")?"m"+t.family:"mord"},wi({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(e,t){var{parser:r}=e;return{type:"mclass",mode:r.mode,mclass:Tg(t[0]),body:js(t[1]),isCharacterBox:hn.isCharacterBox(t[1])}}}),wi({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(e,t){var{parser:r,funcName:i}=e,n=t[1],a=t[0],s;i!=="\\stackrel"?s=Tg(n):s="mrel";var u={type:"op",mode:n.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:i!=="\\stackrel",body:js(n)},h={type:"supsub",mode:a.mode,base:u,sup:i==="\\underset"?null:a,sub:i==="\\underset"?a:null};return{type:"mclass",mode:r.mode,mclass:s,body:[h],isCharacterBox:hn.isCharacterBox(h)}},htmlBuilder:Tw,mathmlBuilder:Bx}),wi({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(e,t){var{parser:r}=e;return{type:"pmb",mode:r.mode,mclass:Tg(t[0]),body:js(t[0])}},htmlBuilder(e,t){var r=uo(e.body,t,!0),i=Bt.makeSpan([e.mclass],r,t);return i.style.textShadow="0.02em 0.01em 0.04px",i},mathmlBuilder(e,t){var r=qs(e.body,t),i=new Hr.MathNode("mstyle",r);return i.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),i}}),i6={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},Ty=()=>({type:"styling",body:[],mode:"math",style:"display"}),Eg=e=>e.type==="textord"&&e.text==="@",vp=(e,t)=>(e.type==="mathord"||e.type==="atom")&&e.text===t,wi({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(e,t){var{parser:r,funcName:i}=e;return{type:"cdlabel",mode:r.mode,side:i.slice(4),label:t[0]}},htmlBuilder(e,t){var r=t.havingStyle(t.style.sup()),i=Bt.wrapFragment(wa(e.label,r,t),t);return i.classes.push("cd-label-"+e.side),i.style.bottom=ci(.8-i.depth),i.height=0,i.depth=0,i},mathmlBuilder(e,t){var r=new Hr.MathNode("mrow",[Va(e.label,t)]);return r=new Hr.MathNode("mpadded",[r]),r.setAttribute("width","0"),e.side==="left"&&r.setAttribute("lspace","-1width"),r.setAttribute("voffset","0.7em"),r=new Hr.MathNode("mstyle",[r]),r.setAttribute("displaystyle","false"),r.setAttribute("scriptlevel","1"),r}}),wi({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(e,t){var{parser:r}=e;return{type:"cdlabelparent",mode:r.mode,fragment:t[0]}},htmlBuilder(e,t){var r=Bt.wrapFragment(wa(e.fragment,t),t);return r.classes.push("cd-vert-arrow"),r},mathmlBuilder(e,t){return new Hr.MathNode("mrow",[Va(e.fragment,t)])}}),wi({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(e,t){for(var{parser:r}=e,i=Zn(t[0],"ordgroup"),n=i.body,a="",s=0;s<n.length;s++){var u=Zn(n[s],"textord");a+=u.text}var h=parseInt(a),d;if(isNaN(h))throw new qr("\\@char has non-numeric argument "+a);if(h<0||h>=1114111)throw new qr("\\@char with invalid code point "+a);return h<=65535?d=String.fromCharCode(h):(h-=65536,d=String.fromCharCode((h>>10)+55296,(h&1023)+56320)),{type:"textord",mode:r.mode,text:d}}}),Ey=(e,t)=>{var r=uo(e.body,t.withColor(e.color),!1);return Bt.makeFragment(r)},lb=(e,t)=>{var r=qs(e.body,t.withColor(e.color)),i=new Hr.MathNode("mstyle",r);return i.setAttribute("mathcolor",e.color),i},wi({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(e,t){var{parser:r}=e,i=Zn(t[0],"color-token").color,n=t[1];return{type:"color",mode:r.mode,color:i,body:js(n)}},htmlBuilder:Ey,mathmlBuilder:lb}),wi({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(e,t){var{parser:r,breakOnTokenText:i}=e,n=Zn(t[0],"color-token").color;r.gullet.macros.set("\\current@color",n);var a=r.parseExpression(!0,i);return{type:"color",mode:r.mode,color:n,body:a}},htmlBuilder:Ey,mathmlBuilder:lb}),wi({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(e,t,r){var{parser:i}=e,n=i.gullet.future().text==="["?i.parseSizeGroup(!0):null,a=!i.settings.displayMode||!i.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:i.mode,newLine:a,size:n&&Zn(n,"size").value}},htmlBuilder(e,t){var r=Bt.makeSpan(["mspace"],[],t);return e.newLine&&(r.classes.push("newline"),e.size&&(r.style.marginTop=ci(ys(e.size,t)))),r},mathmlBuilder(e,t){var r=new Hr.MathNode("mspace");return e.newLine&&(r.setAttribute("linebreak","newline"),e.size&&r.setAttribute("height",ci(ys(e.size,t)))),r}}),ub={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},pa=e=>{var t=e.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(t))throw new qr("Expected a control sequence",e);return t},od=e=>{var t=e.gullet.popToken();return t.text==="="&&(t=e.gullet.popToken(),t.text===" "&&(t=e.gullet.popToken())),t},ml=(e,t,r,i)=>{var n=e.gullet.macros.get(r.text);n==null&&(r.noexpand=!0,n={tokens:[r],numArgs:0,unexpandable:!e.gullet.isExpandable(r.text)}),e.gullet.macros.set(t,n,i)},wi({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(e){var{parser:t,funcName:r}=e;t.consumeSpaces();var i=t.fetch();if(ub[i.text])return(r==="\\global"||r==="\\\\globallong")&&(i.text=ub[i.text]),Zn(t.parseFunction(),"internal");throw new qr("Invalid token after macro prefix",i)}}),wi({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:r}=e,i=t.gullet.popToken(),n=i.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(n))throw new qr("Expected a control sequence",i);for(var a=0,s,u=[[]];t.gullet.future().text!=="{";)if(i=t.gullet.popToken(),i.text==="#"){if(t.gullet.future().text==="{"){s=t.gullet.future(),u[a].push("{");break}if(i=t.gullet.popToken(),!/^[1-9]$/.test(i.text))throw new qr('Invalid argument number "'+i.text+'"');if(parseInt(i.text)!==a+1)throw new qr('Argument number "'+i.text+'" out of order');a++,u.push([])}else{if(i.text==="EOF")throw new qr("Expected a macro definition");u[a].push(i.text)}var{tokens:h}=t.gullet.consumeArg();return s&&h.unshift(s),(r==="\\edef"||r==="\\xdef")&&(h=t.gullet.expandTokens(h),h.reverse()),t.gullet.macros.set(n,{tokens:h,numArgs:a,delimiters:u},r===ub[r]),{type:"internal",mode:t.mode}}}),wi({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:r}=e,i=pa(t.gullet.popToken());t.gullet.consumeSpaces();var n=od(t);return ml(t,i,n,r==="\\\\globallet"),{type:"internal",mode:t.mode}}}),wi({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:r}=e,i=pa(t.gullet.popToken()),n=t.gullet.popToken(),a=t.gullet.popToken();return ml(t,i,a,r==="\\\\globalfuture"),t.gullet.pushToken(a),t.gullet.pushToken(n),{type:"internal",mode:t.mode}}}),rh=function(e,t,r){var i=Ja.math[e]&&Ja.math[e].replace,n=xo(i||e,t,r);if(!n)throw new Error("Unsupported symbol "+e+" and font size "+t+".");return n},Cy=function(e,t,r,i){var n=r.havingBaseStyle(t),a=Bt.makeSpan(i.concat(n.sizingClasses(r)),[e],r),s=n.sizeMultiplier/r.sizeMultiplier;return a.height*=s,a.depth*=s,a.maxFontSize=n.sizeMultiplier,a},n6=function(e,t,r){var i=t.havingBaseStyle(r),n=(1-t.sizeMultiplier/i.sizeMultiplier)*t.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=ci(n),e.height-=n,e.depth+=n},sA=function(e,t,r,i,n,a){var s=Bt.makeSymbol(e,"Main-Regular",n,i),u=Cy(s,t,i,a);return r&&n6(u,i,t),u},oA=function(e,t,r,i){return Bt.makeSymbol(e,"Size"+t+"-Regular",r,i)},a6=function(e,t,r,i,n,a){var s=oA(e,t,n,i),u=Cy(Bt.makeSpan(["delimsizing","size"+t],[s],i),kn.TEXT,i,a);return r&&n6(u,i,kn.TEXT),u},ld=function(e,t,r){var i;t==="Size1-Regular"?i="delim-size1":i="delim-size4";var n=Bt.makeSpan(["delimsizinginner",i],[Bt.makeSpan([],[Bt.makeSymbol(e,t,r)])]);return{type:"elem",elem:n}},o0=function(e,t,r){var i=_u["Size4-Regular"][e.charCodeAt(0)]?_u["Size4-Regular"][e.charCodeAt(0)][4]:_u["Size1-Regular"][e.charCodeAt(0)][4],n=new ru("inner",J8(e,Math.round(1e3*t))),a=new Mh([n],{width:ci(i),height:ci(t),style:"width:"+ci(i),viewBox:"0 0 "+1e3*i+" "+Math.round(1e3*t),preserveAspectRatio:"xMinYMin"}),s=Bt.makeSvgSpan([],[a],r);return s.height=t,s.style.height=ci(t),s.style.width=ci(i),{type:"elem",elem:s}},Sy=.008,Cg={type:"kern",size:-1*Sy},s6=["|","\\lvert","\\rvert","\\vert"],lA=["\\|","\\lVert","\\rVert","\\Vert"],xp=function(e,t,r,i,n,a){var s,u,h,d,p="",g=0;s=h=d=e,u=null;var y="Size1-Regular";e==="\\uparrow"?h=d="\u23D0":e==="\\Uparrow"?h=d="\u2016":e==="\\downarrow"?s=h="\u23D0":e==="\\Downarrow"?s=h="\u2016":e==="\\updownarrow"?(s="\\uparrow",h="\u23D0",d="\\downarrow"):e==="\\Updownarrow"?(s="\\Uparrow",h="\u2016",d="\\Downarrow"):hn.contains(s6,e)?(h="\u2223",p="vert",g=333):hn.contains(lA,e)?(h="\u2225",p="doublevert",g=556):e==="["||e==="\\lbrack"?(s="\u23A1",h="\u23A2",d="\u23A3",y="Size4-Regular",p="lbrack",g=667):e==="]"||e==="\\rbrack"?(s="\u23A4",h="\u23A5",d="\u23A6",y="Size4-Regular",p="rbrack",g=667):e==="\\lfloor"||e==="\u230A"?(h=s="\u23A2",d="\u23A3",y="Size4-Regular",p="lfloor",g=667):e==="\\lceil"||e==="\u2308"?(s="\u23A1",h=d="\u23A2",y="Size4-Regular",p="lceil",g=667):e==="\\rfloor"||e==="\u230B"?(h=s="\u23A5",d="\u23A6",y="Size4-Regular",p="rfloor",g=667):e==="\\rceil"||e==="\u2309"?(s="\u23A4",h=d="\u23A5",y="Size4-Regular",p="rceil",g=667):e==="("||e==="\\lparen"?(s="\u239B",h="\u239C",d="\u239D",y="Size4-Regular",p="lparen",g=875):e===")"||e==="\\rparen"?(s="\u239E",h="\u239F",d="\u23A0",y="Size4-Regular",p="rparen",g=875):e==="\\{"||e==="\\lbrace"?(s="\u23A7",u="\u23A8",d="\u23A9",h="\u23AA",y="Size4-Regular"):e==="\\}"||e==="\\rbrace"?(s="\u23AB",u="\u23AC",d="\u23AD",h="\u23AA",y="Size4-Regular"):e==="\\lgroup"||e==="\u27EE"?(s="\u23A7",d="\u23A9",h="\u23AA",y="Size4-Regular"):e==="\\rgroup"||e==="\u27EF"?(s="\u23AB",d="\u23AD",h="\u23AA",y="Size4-Regular"):e==="\\lmoustache"||e==="\u23B0"?(s="\u23A7",d="\u23AD",h="\u23AA",y="Size4-Regular"):(e==="\\rmoustache"||e==="\u23B1")&&(s="\u23AB",d="\u23A9",h="\u23AA",y="Size4-Regular");var m=rh(s,y,n),x=m.height+m.depth,_=rh(h,y,n),E=_.height+_.depth,w=rh(d,y,n),C=w.height+w.depth,A=0,M=1;if(u!==null){var N=rh(u,y,n);A=N.height+N.depth,M=2}var B=x+C+A,O=Math.max(0,Math.ceil((t-B)/(M*E))),L=B+O*M*E,$=i.fontMetrics().axisHeight;r&&($*=i.sizeMultiplier);var G=L/2-$,z=[];if(p.length>0){var F=L-x-C,X=Math.round(L*1e3),I=eA(p,Math.round(F*1e3)),j=new ru(p,I),H=(g/1e3).toFixed(3)+"em",V=(X/1e3).toFixed(3)+"em",P=new Mh([j],{width:H,height:V,viewBox:"0 0 "+g+" "+X}),q=Bt.makeSvgSpan([],[P],i);q.height=X/1e3,q.style.width=H,q.style.height=V,z.push({type:"elem",elem:q})}else{if(z.push(ld(d,y,n)),z.push(Cg),u===null){var Z=L-x-C+2*Sy;z.push(o0(h,Z,i))}else{var J=(L-x-C-A)/2+2*Sy;z.push(o0(h,J,i)),z.push(Cg),z.push(ld(u,y,n)),z.push(Cg),z.push(o0(h,J,i))}z.push(Cg),z.push(ld(s,y,n))}var ae=i.havingBaseStyle(kn.TEXT),ue=Bt.makeVList({positionType:"bottom",positionData:G,children:z},ae);return Cy(Bt.makeSpan(["delimsizing","mult"],[ue],ae),kn.TEXT,i,a)},bp=80,Sg=.08,_p=function(e,t,r,i,n){var a=Hx(e,i,r),s=new ru(e,a),u=new Mh([s],{width:"400em",height:ci(t),viewBox:"0 0 400000 "+r,preserveAspectRatio:"xMinYMin slice"});return Bt.makeSvgSpan(["hide-tail"],[u],n)},uA=function(e,t){var r=t.havingBaseSizing(),i=hb("\\surd",e*r.sizeMultiplier,l6,r),n=r.sizeMultiplier,a=Math.max(0,t.minRuleThickness-t.fontMetrics().sqrtRuleThickness),s,u=0,h=0,d=0,p;return i.type==="small"?(d=1e3+1e3*a+bp,e<1?n=1:e<1.4&&(n=.7),u=(1+a+Sg)/n,h=(1+a)/n,s=_p("sqrtMain",u,d,a,t),s.style.minWidth="0.853em",p=.833/n):i.type==="large"?(d=(1e3+bp)*Mg[i.size],h=(Mg[i.size]+a)/n,u=(Mg[i.size]+a+Sg)/n,s=_p("sqrtSize"+i.size,u,d,a,t),s.style.minWidth="1.02em",p=1/n):(u=e+a+Sg,h=e+a,d=Math.floor(1e3*e+a)+bp,s=_p("sqrtTall",u,d,a,t),s.style.minWidth="0.742em",p=1.056),s.height=h,s.style.height=ci(u),{span:s,advanceWidth:p,ruleWidth:(t.fontMetrics().sqrtRuleThickness+a)*n}},Ag=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","\u230A","\u230B","\\lceil","\\rceil","\u2308","\u2309","\\surd"],hA=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","\u27EE","\u27EF","\\lmoustache","\\rmoustache","\u23B0","\u23B1"],o6=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],Mg=[0,1.2,1.8,2.4,3],cA=function(e,t,r,i,n){if(e==="<"||e==="\\lt"||e==="\u27E8"?e="\\langle":(e===">"||e==="\\gt"||e==="\u27E9")&&(e="\\rangle"),hn.contains(Ag,e)||hn.contains(o6,e))return a6(e,t,!1,r,i,n);if(hn.contains(hA,e))return xp(e,Mg[t],!1,r,i,n);throw new qr("Illegal delimiter: '"+e+"'")},dA=[{type:"small",style:kn.SCRIPTSCRIPT},{type:"small",style:kn.SCRIPT},{type:"small",style:kn.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],pA=[{type:"small",style:kn.SCRIPTSCRIPT},{type:"small",style:kn.SCRIPT},{type:"small",style:kn.TEXT},{type:"stack"}],l6=[{type:"small",style:kn.SCRIPTSCRIPT},{type:"small",style:kn.SCRIPT},{type:"small",style:kn.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],fA=function(e){if(e.type==="small")return"Main-Regular";if(e.type==="large")return"Size"+e.size+"-Regular";if(e.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+e.type+"' here.")},hb=function(e,t,r,i){for(var n=Math.min(2,3-i.style.size),a=n;a<r.length&&r[a].type!=="stack";a++){var s=rh(e,fA(r[a]),"math"),u=s.height+s.depth;if(r[a].type==="small"){var h=i.havingBaseStyle(r[a].style);u*=h.sizeMultiplier}if(u>t)return r[a]}return r[r.length-1]},cb=function(e,t,r,i,n,a){e==="<"||e==="\\lt"||e==="\u27E8"?e="\\langle":(e===">"||e==="\\gt"||e==="\u27E9")&&(e="\\rangle");var s;hn.contains(o6,e)?s=dA:hn.contains(Ag,e)?s=l6:s=pA;var u=hb(e,t,s,i);return u.type==="small"?sA(e,u.style,r,i,n,a):u.type==="large"?a6(e,u.size,r,i,n,a):xp(e,t,r,i,n,a)},gA=function(e,t,r,i,n,a){var s=i.fontMetrics().axisHeight*i.sizeMultiplier,u=901,h=5/i.fontMetrics().ptPerEm,d=Math.max(t-s,r+s),p=Math.max(d/500*u,2*d-h);return cb(e,p,!0,i,n,a)},vc={sqrtImage:uA,sizedDelim:cA,sizeToMaxHeight:Mg,customSizedDelim:cb,leftRightDelim:gA},u6={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},Ay=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","\u230A","\u230B","\\lceil","\\rceil","\u2308","\u2309","<",">","\\langle","\u27E8","\\rangle","\u27E9","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","\u27EE","\u27EF","\\lmoustache","\\rmoustache","\u23B0","\u23B1","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."],wi({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(e,t)=>{var r=fn(t[0],e);return{type:"delimsizing",mode:e.parser.mode,size:u6[e.funcName].size,mclass:u6[e.funcName].mclass,delim:r.text}},htmlBuilder:(e,t)=>e.delim==="."?Bt.makeSpan([e.mclass]):vc.sizedDelim(e.delim,e.size,t,e.mode,[e.mclass]),mathmlBuilder:e=>{var t=[];e.delim!=="."&&t.push(nu(e.delim,e.mode));var r=new Hr.MathNode("mo",t);e.mclass==="mopen"||e.mclass==="mclose"?r.setAttribute("fence","true"):r.setAttribute("fence","false"),r.setAttribute("stretchy","true");var i=ci(vc.sizeToMaxHeight[e.size]);return r.setAttribute("minsize",i),r.setAttribute("maxsize",i),r}}),wi({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var r=e.parser.gullet.macros.get("\\current@color");if(r&&typeof r!="string")throw new qr("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:e.parser.mode,delim:fn(t[0],e).text,color:r}}}),wi({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var r=fn(t[0],e),i=e.parser;++i.leftrightDepth;var n=i.parseExpression(!1);--i.leftrightDepth,i.expect("\\right",!1);var a=Zn(i.parseFunction(),"leftright-right");return{type:"leftright",mode:i.mode,body:n,left:r.text,right:a.delim,rightColor:a.color}},htmlBuilder:(e,t)=>{os(e);for(var r=uo(e.body,t,!0,["mopen","mclose"]),i=0,n=0,a=!1,s=0;s<r.length;s++)r[s].isMiddle?a=!0:(i=Math.max(r[s].height,i),n=Math.max(r[s].depth,n));i*=t.sizeMultiplier,n*=t.sizeMultiplier;var u;if(e.left==="."?u=th(t,["mopen"]):u=vc.leftRightDelim(e.left,i,n,t,e.mode,["mopen"]),r.unshift(u),a)for(var h=1;h<r.length;h++){var d=r[h],p=d.isMiddle;p&&(r[h]=vc.leftRightDelim(p.delim,i,n,p.options,e.mode,[]))}var g;if(e.right===".")g=th(t,["mclose"]);else{var y=e.rightColor?t.withColor(e.rightColor):t;g=vc.leftRightDelim(e.right,i,n,y,e.mode,["mclose"])}return r.push(g),Bt.makeSpan(["minner"],r,t)},mathmlBuilder:(e,t)=>{os(e);var r=qs(e.body,t);if(e.left!=="."){var i=new Hr.MathNode("mo",[nu(e.left,e.mode)]);i.setAttribute("fence","true"),r.unshift(i)}if(e.right!=="."){var n=new Hr.MathNode("mo",[nu(e.right,e.mode)]);n.setAttribute("fence","true"),e.rightColor&&n.setAttribute("mathcolor",e.rightColor),r.push(n)}return ab(r)}}),wi({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var r=fn(t[0],e);if(!e.parser.leftrightDepth)throw new qr("\\middle without preceding \\left",r);return{type:"middle",mode:e.parser.mode,delim:r.text}},htmlBuilder:(e,t)=>{var r;if(e.delim===".")r=th(t,[]);else{r=vc.sizedDelim(e.delim,1,t,e.mode,[]);var i={delim:e.delim,options:t};r.isMiddle=i}return r},mathmlBuilder:(e,t)=>{var r=e.delim==="\\vert"||e.delim==="|"?nu("|","text"):nu(e.delim,e.mode),i=new Hr.MathNode("mo",[r]);return i.setAttribute("fence","true"),i.setAttribute("lspace","0.05em"),i.setAttribute("rspace","0.05em"),i}}),wp=(e,t)=>{var r=Bt.wrapFragment(wa(e.body,t),t),i=e.label.slice(1),n=t.sizeMultiplier,a,s=0,u=hn.isCharacterBox(e.body);if(i==="sout")a=Bt.makeSpan(["stretchy","sout"]),a.height=t.fontMetrics().defaultRuleThickness/n,s=-.5*t.fontMetrics().xHeight;else if(i==="phase"){var h=ys({number:.6,unit:"pt"},t),d=ys({number:.35,unit:"ex"},t),p=t.havingBaseSizing();n=n/p.sizeMultiplier;var g=r.height+r.depth+h+d;r.style.paddingLeft=ci(g/2+h);var y=Math.floor(1e3*g*n),m=Iw(y),x=new Mh([new ru("phase",m)],{width:"400em",height:ci(y/1e3),viewBox:"0 0 400000 "+y,preserveAspectRatio:"xMinYMin slice"});a=Bt.makeSvgSpan(["hide-tail"],[x],t),a.style.height=ci(g),s=r.depth+h+d}else{/cancel/.test(i)?u||r.classes.push("cancel-pad"):i==="angl"?r.classes.push("anglpad"):r.classes.push("boxpad");var _=0,E=0,w=0;/box/.test(i)?(w=Math.max(t.fontMetrics().fboxrule,t.minRuleThickness),_=t.fontMetrics().fboxsep+(i==="colorbox"?0:w),E=_):i==="angl"?(w=Math.max(t.fontMetrics().defaultRuleThickness,t.minRuleThickness),_=4*w,E=Math.max(0,.25-r.depth)):(_=u?.2:0,E=_),a=zl.encloseSpan(r,i,_,E,t),/fbox|boxed|fcolorbox/.test(i)?(a.style.borderStyle="solid",a.style.borderWidth=ci(w)):i==="angl"&&w!==.049&&(a.style.borderTopWidth=ci(w),a.style.borderRightWidth=ci(w)),s=r.depth+E,e.backgroundColor&&(a.style.backgroundColor=e.backgroundColor,e.borderColor&&(a.style.borderColor=e.borderColor))}var C;if(e.backgroundColor)C=Bt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:s},{type:"elem",elem:r,shift:0}]},t);else{var A=/cancel|phase/.test(i)?["svg-align"]:[];C=Bt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:0},{type:"elem",elem:a,shift:s,wrapperClasses:A}]},t)}return/cancel/.test(i)&&(C.height=r.height,C.depth=r.depth),/cancel/.test(i)&&!u?Bt.makeSpan(["mord","cancel-lap"],[C],t):Bt.makeSpan(["mord"],[C],t)},Lg=(e,t)=>{var r=0,i=new Hr.MathNode(e.label.indexOf("colorbox")>-1?"mpadded":"menclose",[Va(e.body,t)]);switch(e.label){case"\\cancel":i.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":i.setAttribute("notation","downdiagonalstrike");break;case"\\phase":i.setAttribute("notation","phasorangle");break;case"\\sout":i.setAttribute("notation","horizontalstrike");break;case"\\fbox":i.setAttribute("notation","box");break;case"\\angl":i.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(r=t.fontMetrics().fboxsep*t.fontMetrics().ptPerEm,i.setAttribute("width","+"+2*r+"pt"),i.setAttribute("height","+"+2*r+"pt"),i.setAttribute("lspace",r+"pt"),i.setAttribute("voffset",r+"pt"),e.label==="\\fcolorbox"){var n=Math.max(t.fontMetrics().fboxrule,t.minRuleThickness);i.setAttribute("style","border: "+n+"em solid "+String(e.borderColor))}break;case"\\xcancel":i.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return e.backgroundColor&&i.setAttribute("mathbackground",e.backgroundColor),i},wi({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(e,t,r){var{parser:i,funcName:n}=e,a=Zn(t[0],"color-token").color,s=t[1];return{type:"enclose",mode:i.mode,label:n,backgroundColor:a,body:s}},htmlBuilder:wp,mathmlBuilder:Lg}),wi({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(e,t,r){var{parser:i,funcName:n}=e,a=Zn(t[0],"color-token").color,s=Zn(t[1],"color-token").color,u=t[2];return{type:"enclose",mode:i.mode,label:n,backgroundColor:s,borderColor:a,body:u}},htmlBuilder:wp,mathmlBuilder:Lg}),wi({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(e,t){var{parser:r}=e;return{type:"enclose",mode:r.mode,label:"\\fbox",body:t[0]}}}),wi({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(e,t){var{parser:r,funcName:i}=e,n=t[0];return{type:"enclose",mode:r.mode,label:i,body:n}},htmlBuilder:wp,mathmlBuilder:Lg}),wi({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(e,t){var{parser:r}=e;return{type:"enclose",mode:r.mode,label:"\\angl",body:t[0]}}}),ud={},l0={},ih=e=>{var t=e.parser.settings;if(!t.displayMode)throw new qr("{"+e.envName+"} can be used only in display mode.")},Eu=function(e,t){var r,i,n=e.body.length,a=e.hLinesBeforeRow,s=0,u=new Array(n),h=[],d=Math.max(t.fontMetrics().arrayRuleWidth,t.minRuleThickness),p=1/t.fontMetrics().ptPerEm,g=5*p;if(e.colSeparationType&&e.colSeparationType==="small"){var y=t.havingStyle(kn.SCRIPT).sizeMultiplier;g=.2778*(y/t.sizeMultiplier)}var m=e.colSeparationType==="CD"?ys({number:3,unit:"ex"},t):12*p,x=3*p,_=e.arraystretch*m,E=.7*_,w=.3*_,C=0;function A(Et){for(var wt=0;wt<Et.length;++wt)wt>0&&(C+=.25),h.push({pos:C,isDashed:Et[wt]})}for(A(a[0]),r=0;r<e.body.length;++r){var M=e.body[r],N=E,B=w;s<M.length&&(s=M.length);var O=new Array(M.length);for(i=0;i<M.length;++i){var L=wa(M[i],t);B<L.depth&&(B=L.depth),N<L.height&&(N=L.height),O[i]=L}var $=e.rowGaps[r],G=0;$&&(G=ys($,t),G>0&&(G+=w,B<G&&(B=G),G=0)),e.addJot&&(B+=x),O.height=N,O.depth=B,C+=N,O.pos=C,C+=B+G,u[r]=O,A(a[r+1])}var z=C/2+t.fontMetrics().axisHeight,F=e.cols||[],X=[],I,j,H=[];if(e.tags&&e.tags.some(Et=>Et))for(r=0;r<n;++r){var V=u[r],P=V.pos-z,q=e.tags[r],Z=void 0;q===!0?Z=Bt.makeSpan(["eqn-num"],[],t):q===!1?Z=Bt.makeSpan([],[],t):Z=Bt.makeSpan([],uo(q,t,!0),t),Z.depth=V.depth,Z.height=V.height,H.push({type:"elem",elem:Z,shift:P})}for(i=0,j=0;i<s||j<F.length;++i,++j){for(var J=F[j]||{},ae=!0;J.type==="separator";){if(ae||(I=Bt.makeSpan(["arraycolsep"],[]),I.style.width=ci(t.fontMetrics().doubleRuleSep),X.push(I)),J.separator==="|"||J.separator===":"){var ue=J.separator==="|"?"solid":"dashed",be=Bt.makeSpan(["vertical-separator"],[],t);be.style.height=ci(C),be.style.borderRightWidth=ci(d),be.style.borderRightStyle=ue,be.style.margin="0 "+ci(-d/2);var Le=C-z;Le&&(be.style.verticalAlign=ci(-Le)),X.push(be)}else throw new qr("Invalid separator type: "+J.separator);j++,J=F[j]||{},ae=!1}if(!(i>=s)){var xe=void 0;(i>0||e.hskipBeforeAndAfter)&&(xe=hn.deflt(J.pregap,g),xe!==0&&(I=Bt.makeSpan(["arraycolsep"],[]),I.style.width=ci(xe),X.push(I)));var Ae=[];for(r=0;r<n;++r){var oe=u[r],he=oe[i];if(he){var le=oe.pos-z;he.depth=oe.depth,he.height=oe.height,Ae.push({type:"elem",elem:he,shift:le})}}Ae=Bt.makeVList({positionType:"individualShift",children:Ae},t),Ae=Bt.makeSpan(["col-align-"+(J.align||"c")],[Ae]),X.push(Ae),(i<s-1||e.hskipBeforeAndAfter)&&(xe=hn.deflt(J.postgap,g),xe!==0&&(I=Bt.makeSpan(["arraycolsep"],[]),I.style.width=ci(xe),X.push(I)))}}if(u=Bt.makeSpan(["mtable"],X),h.length>0){for(var ke=Bt.makeLineSpan("hline",t,d),pe=Bt.makeLineSpan("hdashline",t,d),qe=[{type:"elem",elem:u,shift:0}];h.length>0;){var me=h.pop(),st=me.pos-z;me.isDashed?qe.push({type:"elem",elem:pe,shift:st}):qe.push({type:"elem",elem:ke,shift:st})}u=Bt.makeVList({positionType:"individualShift",children:qe},t)}if(H.length===0)return Bt.makeSpan(["mord"],[u],t);var we=Bt.makeVList({positionType:"individualShift",children:H},t);return we=Bt.makeSpan(["tag"],[we],t),Bt.makeFragment([u,we])},kp={c:"center ",l:"left ",r:"right "},Dh=function(e,t){for(var r=[],i=new Hr.MathNode("mtd",[],["mtr-glue"]),n=new Hr.MathNode("mtd",[],["mml-eqn-num"]),a=0;a<e.body.length;a++){for(var s=e.body[a],u=[],h=0;h<s.length;h++)u.push(new Hr.MathNode("mtd",[Va(s[h],t)]));e.tags&&e.tags[a]&&(u.unshift(i),u.push(i),e.leqno?u.unshift(n):u.push(n)),r.push(new Hr.MathNode("mtr",u))}var d=new Hr.MathNode("mtable",r),p=e.arraystretch===.5?.1:.16+e.arraystretch-1+(e.addJot?.09:0);d.setAttribute("rowspacing",ci(p));var g="",y="";if(e.cols&&e.cols.length>0){var m=e.cols,x="",_=!1,E=0,w=m.length;m[0].type==="separator"&&(g+="top ",E=1),m[m.length-1].type==="separator"&&(g+="bottom ",w-=1);for(var C=E;C<w;C++)m[C].type==="align"?(y+=kp[m[C].align],_&&(x+="none "),_=!0):m[C].type==="separator"&&_&&(x+=m[C].separator==="|"?"solid ":"dashed ",_=!1);d.setAttribute("columnalign",y.trim()),/[sd]/.test(x)&&d.setAttribute("columnlines",x.trim())}if(e.colSeparationType==="align"){for(var A=e.cols||[],M="",N=1;N<A.length;N++)M+=N%2?"0em ":"1em ";d.setAttribute("columnspacing",M.trim())}else e.colSeparationType==="alignat"||e.colSeparationType==="gather"?d.setAttribute("columnspacing","0em"):e.colSeparationType==="small"?d.setAttribute("columnspacing","0.2778em"):e.colSeparationType==="CD"?d.setAttribute("columnspacing","0.5em"):d.setAttribute("columnspacing","1em");var B="",O=e.hLinesBeforeRow;g+=O[0].length>0?"left ":"",g+=O[O.length-1].length>0?"right ":"";for(var L=1;L<O.length-1;L++)B+=O[L].length===0?"none ":O[L][0]?"dashed ":"solid ";return/[sd]/.test(B)&&d.setAttribute("rowlines",B.trim()),g!==""&&(d=new Hr.MathNode("menclose",[d]),d.setAttribute("notation",g.trim())),e.arraystretch&&e.arraystretch<1&&(d=new Hr.MathNode("mstyle",[d]),d.setAttribute("scriptlevel","1")),d},db=function(e,t){e.envName.indexOf("ed")===-1&&ih(e);var r=[],i=e.envName.indexOf("at")>-1?"alignat":"align",n=e.envName==="split",a=td(e.parser,{cols:r,addJot:!0,autoTag:n?void 0:ed(e.envName),emptySingleRow:!0,colSeparationType:i,maxNumCols:n?2:void 0,leqno:e.parser.settings.leqno},"display"),s,u=0,h={type:"ordgroup",mode:e.mode,body:[]};if(t[0]&&t[0].type==="ordgroup"){for(var d="",p=0;p<t[0].body.length;p++){var g=Zn(t[0].body[p],"textord");d+=g.text}s=Number(d),u=s*2}var y=!u;a.body.forEach(function(E){for(var w=1;w<E.length;w+=2){var C=Zn(E[w],"styling"),A=Zn(C.body[0],"ordgroup");A.body.unshift(h)}if(y)u<E.length&&(u=E.length);else{var M=E.length/2;if(s<M)throw new qr("Too many math in a row: "+("expected "+s+", but got "+M),E[0])}});for(var m=0;m<u;++m){var x="r",_=0;m%2===1?x="l":m>0&&y&&(_=1),r[m]={type:"align",align:x,pregap:_,postgap:0}}return a.colSeparationType=y?"align":"alignat",a},Eh({type:"array",names:["array","darray"],props:{numArgs:1},handler(e,t){var r=lp(t[0]),i=r?[t[0]]:Zn(t[0],"ordgroup").body,n=i.map(function(s){var u=kw(s),h=u.text;if("lcr".indexOf(h)!==-1)return{type:"align",align:h};if(h==="|")return{type:"separator",separator:"|"};if(h===":")return{type:"separator",separator:":"};throw new qr("Unknown column alignment: "+h,s)}),a={cols:n,hskipBeforeAndAfter:!0,maxNumCols:n.length};return td(e.parser,a,Cw(e.envName))},htmlBuilder:Eu,mathmlBuilder:Dh}),Eh({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(e){var t={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[e.envName.replace("*","")],r="c",i={hskipBeforeAndAfter:!1,cols:[{type:"align",align:r}]};if(e.envName.charAt(e.envName.length-1)==="*"){var n=e.parser;if(n.consumeSpaces(),n.fetch().text==="["){if(n.consume(),n.consumeSpaces(),r=n.fetch().text,"lcr".indexOf(r)===-1)throw new qr("Expected l or c or r",n.nextToken);n.consume(),n.consumeSpaces(),n.expect("]"),n.consume(),i.cols=[{type:"align",align:r}]}}var a=td(e.parser,i,Cw(e.envName)),s=Math.max(0,...a.body.map(u=>u.length));return a.cols=new Array(s).fill({type:"align",align:r}),t?{type:"leftright",mode:e.mode,body:[a],left:t[0],right:t[1],rightColor:void 0}:a},htmlBuilder:Eu,mathmlBuilder:Dh}),Eh({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(e){var t={arraystretch:.5},r=td(e.parser,t,"script");return r.colSeparationType="small",r},htmlBuilder:Eu,mathmlBuilder:Dh}),Eh({type:"array",names:["subarray"],props:{numArgs:1},handler(e,t){var r=lp(t[0]),i=r?[t[0]]:Zn(t[0],"ordgroup").body,n=i.map(function(s){var u=kw(s),h=u.text;if("lc".indexOf(h)!==-1)return{type:"align",align:h};throw new qr("Unknown column alignment: "+h,s)});if(n.length>1)throw new qr("{subarray} can contain only one column");var a={cols:n,hskipBeforeAndAfter:!1,arraystretch:.5};if(a=td(e.parser,a,"script"),a.body.length>0&&a.body[0].length>1)throw new qr("{subarray} can contain only one column");return a},htmlBuilder:Eu,mathmlBuilder:Dh}),Eh({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(e){var t={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},r=td(e.parser,t,Cw(e.envName));return{type:"leftright",mode:e.mode,body:[r],left:e.envName.indexOf("r")>-1?".":"\\{",right:e.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:Eu,mathmlBuilder:Dh}),Eh({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:db,htmlBuilder:Eu,mathmlBuilder:Dh}),Eh({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(e){hn.contains(["gather","gather*"],e.envName)&&ih(e);var t={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:ed(e.envName),emptySingleRow:!0,leqno:e.parser.settings.leqno};return td(e.parser,t,"display")},htmlBuilder:Eu,mathmlBuilder:Dh}),Eh({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:db,htmlBuilder:Eu,mathmlBuilder:Dh}),Eh({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(e){ih(e);var t={autoTag:ed(e.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:e.parser.settings.leqno};return td(e.parser,t,"display")},htmlBuilder:Eu,mathmlBuilder:Dh}),Eh({type:"array",names:["CD"],props:{numArgs:0},handler(e){return ih(e),X8(e.parser)},htmlBuilder:Eu,mathmlBuilder:Dh}),Ne("\\nonumber","\\gdef\\@eqnsw{0}"),Ne("\\notag","\\nonumber"),wi({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(e,t){throw new qr(e.funcName+" valid only within array environment")}}),h6=ud,wi({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(e,t){var{parser:r,funcName:i}=e,n=t[0];if(n.type!=="ordgroup")throw new qr("Invalid environment name",n);for(var a="",s=0;s<n.body.length;++s)a+=Zn(n.body[s],"textord").text;if(i==="\\begin"){if(!h6.hasOwnProperty(a))throw new qr("No such environment: "+a,n);var u=h6[a],{args:h,optArgs:d}=r.parseArguments("\\begin{"+a+"}",u),p={mode:r.mode,envName:a,parser:r},g=u.handler(p,h,d);r.expect("\\end",!1);var y=r.nextToken,m=Zn(r.parseFunction(),"environment");if(m.name!==a)throw new qr("Mismatch: \\begin{"+a+"} matched by \\end{"+m.name+"}",y);return g}return{type:"environment",mode:r.mode,name:a,nameGroup:n}}}),My=(e,t)=>{var r=e.font,i=t.withFont(r);return wa(e.body,i)},c6=(e,t)=>{var r=e.font,i=t.withFont(r);return Va(e.body,i)},u0={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"},wi({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(e,t)=>{var{parser:r,funcName:i}=e,n=_g(t[0]),a=i;return a in u0&&(a=u0[a]),{type:"font",mode:r.mode,font:a.slice(1),body:n}},htmlBuilder:My,mathmlBuilder:c6}),wi({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(e,t)=>{var{parser:r}=e,i=t[0],n=hn.isCharacterBox(i);return{type:"mclass",mode:r.mode,mclass:Tg(i),body:[{type:"font",mode:r.mode,font:"boldsymbol",body:i}],isCharacterBox:n}}}),wi({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(e,t)=>{var{parser:r,funcName:i,breakOnTokenText:n}=e,{mode:a}=r,s=r.parseExpression(!0,n),u="math"+i.slice(1);return{type:"font",mode:a,font:u,body:{type:"ordgroup",mode:r.mode,body:s}}},htmlBuilder:My,mathmlBuilder:c6}),d6=(e,t)=>{var r=t;return e==="display"?r=r.id>=kn.SCRIPT.id?r.text():kn.DISPLAY:e==="text"&&r.size===kn.DISPLAY.size?r=kn.TEXT:e==="script"?r=kn.SCRIPT:e==="scriptscript"&&(r=kn.SCRIPTSCRIPT),r},pb=(e,t)=>{var r=d6(e.size,t.style),i=r.fracNum(),n=r.fracDen(),a;a=t.havingStyle(i);var s=wa(e.numer,a,t);if(e.continued){var u=8.5/t.fontMetrics().ptPerEm,h=3.5/t.fontMetrics().ptPerEm;s.height=s.height<u?u:s.height,s.depth=s.depth<h?h:s.depth}a=t.havingStyle(n);var d=wa(e.denom,a,t),p,g,y;e.hasBarLine?(e.barSize?(g=ys(e.barSize,t),p=Bt.makeLineSpan("frac-line",t,g)):p=Bt.makeLineSpan("frac-line",t),g=p.height,y=p.height):(p=null,g=0,y=t.fontMetrics().defaultRuleThickness);var m,x,_;r.size===kn.DISPLAY.size||e.size==="display"?(m=t.fontMetrics().num1,g>0?x=3*y:x=7*y,_=t.fontMetrics().denom1):(g>0?(m=t.fontMetrics().num2,x=y):(m=t.fontMetrics().num3,x=3*y),_=t.fontMetrics().denom2);var E;if(p){var w=t.fontMetrics().axisHeight;m-s.depth-(w+.5*g)<x&&(m+=x-(m-s.depth-(w+.5*g))),w-.5*g-(d.height-_)<x&&(_+=x-(w-.5*g-(d.height-_)));var C=-(w-.5*g);E=Bt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:d,shift:_},{type:"elem",elem:p,shift:C},{type:"elem",elem:s,shift:-m}]},t)}else{var A=m-s.depth-(d.height-_);A<x&&(m+=.5*(x-A),_+=.5*(x-A)),E=Bt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:d,shift:_},{type:"elem",elem:s,shift:-m}]},t)}a=t.havingStyle(r),E.height*=a.sizeMultiplier/t.sizeMultiplier,E.depth*=a.sizeMultiplier/t.sizeMultiplier;var M;r.size===kn.DISPLAY.size?M=t.fontMetrics().delim1:r.size===kn.SCRIPTSCRIPT.size?M=t.havingStyle(kn.SCRIPT).fontMetrics().delim2:M=t.fontMetrics().delim2;var N,B;return e.leftDelim==null?N=th(t,["mopen"]):N=vc.customSizedDelim(e.leftDelim,M,!0,t.havingStyle(r),e.mode,["mopen"]),e.continued?B=Bt.makeSpan([]):e.rightDelim==null?B=th(t,["mclose"]):B=vc.customSizedDelim(e.rightDelim,M,!0,t.havingStyle(r),e.mode,["mclose"]),Bt.makeSpan(["mord"].concat(a.sizingClasses(t)),[N,Bt.makeSpan(["mfrac"],[E]),B],t)},fb=(e,t)=>{var r=new Hr.MathNode("mfrac",[Va(e.numer,t),Va(e.denom,t)]);if(!e.hasBarLine)r.setAttribute("linethickness","0px");else if(e.barSize){var i=ys(e.barSize,t);r.setAttribute("linethickness",ci(i))}var n=d6(e.size,t.style);if(n.size!==t.style.size){r=new Hr.MathNode("mstyle",[r]);var a=n.size===kn.DISPLAY.size?"true":"false";r.setAttribute("displaystyle",a),r.setAttribute("scriptlevel","0")}if(e.leftDelim!=null||e.rightDelim!=null){var s=[];if(e.leftDelim!=null){var u=new Hr.MathNode("mo",[new Hr.TextNode(e.leftDelim.replace("\\",""))]);u.setAttribute("fence","true"),s.push(u)}if(s.push(r),e.rightDelim!=null){var h=new Hr.MathNode("mo",[new Hr.TextNode(e.rightDelim.replace("\\",""))]);h.setAttribute("fence","true"),s.push(h)}return ab(s)}return r},wi({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(e,t)=>{var{parser:r,funcName:i}=e,n=t[0],a=t[1],s,u=null,h=null,d="auto";switch(i){case"\\dfrac":case"\\frac":case"\\tfrac":s=!0;break;case"\\\\atopfrac":s=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":s=!1,u="(",h=")";break;case"\\\\bracefrac":s=!1,u="\\{",h="\\}";break;case"\\\\brackfrac":s=!1,u="[",h="]";break;default:throw new Error("Unrecognized genfrac command")}switch(i){case"\\dfrac":case"\\dbinom":d="display";break;case"\\tfrac":case"\\tbinom":d="text";break}return{type:"genfrac",mode:r.mode,continued:!1,numer:n,denom:a,hasBarLine:s,leftDelim:u,rightDelim:h,size:d,barSize:null}},htmlBuilder:pb,mathmlBuilder:fb}),wi({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(e,t)=>{var{parser:r,funcName:i}=e,n=t[0],a=t[1];return{type:"genfrac",mode:r.mode,continued:!0,numer:n,denom:a,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}}),wi({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(e){var{parser:t,funcName:r,token:i}=e,n;switch(r){case"\\over":n="\\frac";break;case"\\choose":n="\\binom";break;case"\\atop":n="\\\\atopfrac";break;case"\\brace":n="\\\\bracefrac";break;case"\\brack":n="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:t.mode,replaceWith:n,token:i}}}),p6=["display","text","script","scriptscript"],f6=function(e){var t=null;return e.length>0&&(t=e,t=t==="."?null:t),t},wi({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(e,t){var{parser:r}=e,i=t[4],n=t[5],a=_g(t[0]),s=a.type==="atom"&&a.family==="open"?f6(a.text):null,u=_g(t[1]),h=u.type==="atom"&&u.family==="close"?f6(u.text):null,d=Zn(t[2],"size"),p,g=null;d.isBlank?p=!0:(g=d.value,p=g.number>0);var y="auto",m=t[3];if(m.type==="ordgroup"){if(m.body.length>0){var x=Zn(m.body[0],"textord");y=p6[Number(x.text)]}}else m=Zn(m,"textord"),y=p6[Number(m.text)];return{type:"genfrac",mode:r.mode,numer:i,denom:n,continued:!1,hasBarLine:p,barSize:g,leftDelim:s,rightDelim:h,size:y}},htmlBuilder:pb,mathmlBuilder:fb}),wi({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(e,t){var{parser:r,funcName:i,token:n}=e;return{type:"infix",mode:r.mode,replaceWith:"\\\\abovefrac",size:Zn(t[0],"size").value,token:n}}}),wi({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(e,t)=>{var{parser:r,funcName:i}=e,n=t[0],a=Z8(Zn(t[1],"infix").size),s=t[2],u=a.number>0;return{type:"genfrac",mode:r.mode,numer:n,denom:s,continued:!1,hasBarLine:u,barSize:a,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:pb,mathmlBuilder:fb}),g6=(e,t)=>{var r=t.style,i,n;e.type==="supsub"?(i=e.sup?wa(e.sup,t.havingStyle(r.sup()),t):wa(e.sub,t.havingStyle(r.sub()),t),n=Zn(e.base,"horizBrace")):n=Zn(e,"horizBrace");var a=wa(n.base,t.havingBaseStyle(kn.DISPLAY)),s=zl.svgSpan(n,t),u;if(n.isOver?(u=Bt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"kern",size:.1},{type:"elem",elem:s}]},t),u.children[0].children[0].children[1].classes.push("svg-align")):(u=Bt.makeVList({positionType:"bottom",positionData:a.depth+.1+s.height,children:[{type:"elem",elem:s},{type:"kern",size:.1},{type:"elem",elem:a}]},t),u.children[0].children[0].children[0].classes.push("svg-align")),i){var h=Bt.makeSpan(["mord",n.isOver?"mover":"munder"],[u],t);n.isOver?u=Bt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:h},{type:"kern",size:.2},{type:"elem",elem:i}]},t):u=Bt.makeVList({positionType:"bottom",positionData:h.depth+.2+i.height+i.depth,children:[{type:"elem",elem:i},{type:"kern",size:.2},{type:"elem",elem:h}]},t)}return Bt.makeSpan(["mord",n.isOver?"mover":"munder"],[u],t)},mA=(e,t)=>{var r=zl.mathMLnode(e.label);return new Hr.MathNode(e.isOver?"mover":"munder",[Va(e.base,t),r])},wi({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(e,t){var{parser:r,funcName:i}=e;return{type:"horizBrace",mode:r.mode,label:i,isOver:/^\\over/.test(i),base:t[0]}},htmlBuilder:g6,mathmlBuilder:mA}),wi({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,i=t[1],n=Zn(t[0],"url").url;return r.settings.isTrusted({command:"\\href",url:n})?{type:"href",mode:r.mode,href:n,body:js(i)}:r.formatUnsupportedCmd("\\href")},htmlBuilder:(e,t)=>{var r=uo(e.body,t,!1);return Bt.makeAnchor(e.href,[],r,t)},mathmlBuilder:(e,t)=>{var r=au(e.body,t);return r instanceof gl||(r=new gl("mrow",[r])),r.setAttribute("href",e.href),r}}),wi({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,i=Zn(t[0],"url").url;if(!r.settings.isTrusted({command:"\\url",url:i}))return r.formatUnsupportedCmd("\\url");for(var n=[],a=0;a<i.length;a++){var s=i[a];s==="~"&&(s="\\textasciitilde"),n.push({type:"textord",mode:"text",text:s})}var u={type:"text",mode:r.mode,font:"\\texttt",body:n};return{type:"href",mode:r.mode,href:i,body:js(u)}}}),wi({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(e,t){var{parser:r}=e;return{type:"hbox",mode:r.mode,body:js(t[0])}},htmlBuilder(e,t){var r=uo(e.body,t,!1);return Bt.makeFragment(r)},mathmlBuilder(e,t){return new Hr.MathNode("mrow",qs(e.body,t))}}),wi({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(e,t)=>{var{parser:r,funcName:i,token:n}=e,a=Zn(t[0],"raw").string,s=t[1];r.settings.strict&&r.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var u,h={};switch(i){case"\\htmlClass":h.class=a,u={command:"\\htmlClass",class:a};break;case"\\htmlId":h.id=a,u={command:"\\htmlId",id:a};break;case"\\htmlStyle":h.style=a,u={command:"\\htmlStyle",style:a};break;case"\\htmlData":{for(var d=a.split(","),p=0;p<d.length;p++){var g=d[p].split("=");if(g.length!==2)throw new qr("Error parsing key-value for \\htmlData");h["data-"+g[0].trim()]=g[1].trim()}u={command:"\\htmlData",attributes:h};break}default:throw new Error("Unrecognized html command")}return r.settings.isTrusted(u)?{type:"html",mode:r.mode,attributes:h,body:js(s)}:r.formatUnsupportedCmd(i)},htmlBuilder:(e,t)=>{var r=uo(e.body,t,!1),i=["enclosing"];e.attributes.class&&i.push(...e.attributes.class.trim().split(/\s+/));var n=Bt.makeSpan(i,r,t);for(var a in e.attributes)a!=="class"&&e.attributes.hasOwnProperty(a)&&n.setAttribute(a,e.attributes[a]);return n},mathmlBuilder:(e,t)=>au(e.body,t)}),wi({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e;return{type:"htmlmathml",mode:r.mode,html:js(t[0]),mathml:js(t[1])}},htmlBuilder:(e,t)=>{var r=uo(e.html,t,!1);return Bt.makeFragment(r)},mathmlBuilder:(e,t)=>au(e.mathml,t)}),Tp=function(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};var t=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!t)throw new qr("Invalid size: '"+e+"' in \\includegraphics");var r={number:+(t[1]+t[2]),unit:t[3]};if(!Bw(r))throw new qr("Invalid unit: '"+r.unit+"' in \\includegraphics.");return r},wi({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(e,t,r)=>{var{parser:i}=e,n={number:0,unit:"em"},a={number:.9,unit:"em"},s={number:0,unit:"em"},u="";if(r[0])for(var h=Zn(r[0],"raw").string,d=h.split(","),p=0;p<d.length;p++){var g=d[p].split("=");if(g.length===2){var y=g[1].trim();switch(g[0].trim()){case"alt":u=y;break;case"width":n=Tp(y);break;case"height":a=Tp(y);break;case"totalheight":s=Tp(y);break;default:throw new qr("Invalid key: '"+g[0]+"' in \\includegraphics.")}}}var m=Zn(t[0],"url").url;return u===""&&(u=m,u=u.replace(/^.*[\\/]/,""),u=u.substring(0,u.lastIndexOf("."))),i.settings.isTrusted({command:"\\includegraphics",url:m})?{type:"includegraphics",mode:i.mode,alt:u,width:n,height:a,totalheight:s,src:m}:i.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(e,t)=>{var r=ys(e.height,t),i=0;e.totalheight.number>0&&(i=ys(e.totalheight,t)-r);var n=0;e.width.number>0&&(n=ys(e.width,t));var a={height:ci(r+i)};n>0&&(a.width=ci(n)),i>0&&(a.verticalAlign=ci(-i));var s=new i0(e.src,e.alt,a);return s.height=r,s.depth=i,s},mathmlBuilder:(e,t)=>{var r=new Hr.MathNode("mglyph",[]);r.setAttribute("alt",e.alt);var i=ys(e.height,t),n=0;if(e.totalheight.number>0&&(n=ys(e.totalheight,t)-i,r.setAttribute("valign",ci(-n))),r.setAttribute("height",ci(i+n)),e.width.number>0){var a=ys(e.width,t);r.setAttribute("width",ci(a))}return r.setAttribute("src",e.src),r}}),wi({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(e,t){var{parser:r,funcName:i}=e,n=Zn(t[0],"size");if(r.settings.strict){var a=i[1]==="m",s=n.value.unit==="mu";a?(s||r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+i+" supports only mu units, "+("not "+n.value.unit+" units")),r.mode!=="math"&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+i+" works only in math mode")):s&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+i+" doesn't support mu units")}return{type:"kern",mode:r.mode,dimension:n.value}},htmlBuilder(e,t){return Bt.makeGlue(e.dimension,t)},mathmlBuilder(e,t){var r=ys(e.dimension,t);return new Hr.SpaceNode(r)}}),wi({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r,funcName:i}=e,n=t[0];return{type:"lap",mode:r.mode,alignment:i.slice(5),body:n}},htmlBuilder:(e,t)=>{var r;e.alignment==="clap"?(r=Bt.makeSpan([],[wa(e.body,t)]),r=Bt.makeSpan(["inner"],[r],t)):r=Bt.makeSpan(["inner"],[wa(e.body,t)]);var i=Bt.makeSpan(["fix"],[]),n=Bt.makeSpan([e.alignment],[r,i],t),a=Bt.makeSpan(["strut"]);return a.style.height=ci(n.height+n.depth),n.depth&&(a.style.verticalAlign=ci(-n.depth)),n.children.unshift(a),n=Bt.makeSpan(["thinbox"],[n],t),Bt.makeSpan(["mord","vbox"],[n],t)},mathmlBuilder:(e,t)=>{var r=new Hr.MathNode("mpadded",[Va(e.body,t)]);if(e.alignment!=="rlap"){var i=e.alignment==="llap"?"-1":"-0.5";r.setAttribute("lspace",i+"width")}return r.setAttribute("width","0px"),r}}),wi({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(e,t){var{funcName:r,parser:i}=e,n=i.mode;i.switchMode("math");var a=r==="\\("?"\\)":"$",s=i.parseExpression(!1,a);return i.expect(a),i.switchMode(n),{type:"styling",mode:i.mode,style:"text",body:s}}}),wi({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(e,t){throw new qr("Mismatched "+e.funcName)}}),h0=(e,t)=>{switch(t.style.size){case kn.DISPLAY.size:return e.display;case kn.TEXT.size:return e.text;case kn.SCRIPT.size:return e.script;case kn.SCRIPTSCRIPT.size:return e.scriptscript;default:return e.text}},wi({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(e,t)=>{var{parser:r}=e;return{type:"mathchoice",mode:r.mode,display:js(t[0]),text:js(t[1]),script:js(t[2]),scriptscript:js(t[3])}},htmlBuilder:(e,t)=>{var r=h0(e,t),i=uo(r,t,!1);return Bt.makeFragment(i)},mathmlBuilder:(e,t)=>{var r=h0(e,t);return au(r,t)}}),Ep=(e,t,r,i,n,a,s)=>{e=Bt.makeSpan([],[e]);var u=r&&hn.isCharacterBox(r),h,d;if(t){var p=wa(t,i.havingStyle(n.sup()),i);d={elem:p,kern:Math.max(i.fontMetrics().bigOpSpacing1,i.fontMetrics().bigOpSpacing3-p.depth)}}if(r){var g=wa(r,i.havingStyle(n.sub()),i);h={elem:g,kern:Math.max(i.fontMetrics().bigOpSpacing2,i.fontMetrics().bigOpSpacing4-g.height)}}var y;if(d&&h){var m=i.fontMetrics().bigOpSpacing5+h.elem.height+h.elem.depth+h.kern+e.depth+s;y=Bt.makeVList({positionType:"bottom",positionData:m,children:[{type:"kern",size:i.fontMetrics().bigOpSpacing5},{type:"elem",elem:h.elem,marginLeft:ci(-a)},{type:"kern",size:h.kern},{type:"elem",elem:e},{type:"kern",size:d.kern},{type:"elem",elem:d.elem,marginLeft:ci(a)},{type:"kern",size:i.fontMetrics().bigOpSpacing5}]},i)}else if(h){var x=e.height-s;y=Bt.makeVList({positionType:"top",positionData:x,children:[{type:"kern",size:i.fontMetrics().bigOpSpacing5},{type:"elem",elem:h.elem,marginLeft:ci(-a)},{type:"kern",size:h.kern},{type:"elem",elem:e}]},i)}else if(d){var _=e.depth+s;y=Bt.makeVList({positionType:"bottom",positionData:_,children:[{type:"elem",elem:e},{type:"kern",size:d.kern},{type:"elem",elem:d.elem,marginLeft:ci(a)},{type:"kern",size:i.fontMetrics().bigOpSpacing5}]},i)}else return e;var E=[y];if(h&&a!==0&&!u){var w=Bt.makeSpan(["mspace"],[],i);w.style.marginRight=ci(a),E.unshift(w)}return Bt.makeSpan(["mop","op-limits"],E,i)},gb=["\\smallint"],Cp=(e,t)=>{var r,i,n=!1,a;e.type==="supsub"?(r=e.sup,i=e.sub,a=Zn(e.base,"op"),n=!0):a=Zn(e,"op");var s=t.style,u=!1;s.size===kn.DISPLAY.size&&a.symbol&&!hn.contains(gb,a.name)&&(u=!0);var h;if(a.symbol){var d=u?"Size2-Regular":"Size1-Regular",p="";if((a.name==="\\oiint"||a.name==="\\oiiint")&&(p=a.name.slice(1),a.name=p==="oiint"?"\\iint":"\\iiint"),h=Bt.makeSymbol(a.name,d,"math",t,["mop","op-symbol",u?"large-op":"small-op"]),p.length>0){var g=h.italic,y=Bt.staticSvg(p+"Size"+(u?"2":"1"),t);h=Bt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:h,shift:0},{type:"elem",elem:y,shift:u?.08:0}]},t),a.name="\\"+p,h.classes.unshift("mop"),h.italic=g}}else if(a.body){var m=uo(a.body,t,!0);m.length===1&&m[0]instanceof tu?(h=m[0],h.classes[0]="mop"):h=Bt.makeSpan(["mop"],m,t)}else{for(var x=[],_=1;_<a.name.length;_++)x.push(Bt.mathsym(a.name[_],a.mode,t));h=Bt.makeSpan(["mop"],x,t)}var E=0,w=0;return(h instanceof tu||a.name==="\\oiint"||a.name==="\\oiiint")&&!a.suppressBaseShift&&(E=(h.height-h.depth)/2-t.fontMetrics().axisHeight,w=h.italic),n?Ep(h,r,i,t,s,w,E):(E&&(h.style.position="relative",h.style.top=ci(E)),h)},Sp=(e,t)=>{var r;if(e.symbol)r=new gl("mo",[nu(e.name,e.mode)]),hn.contains(gb,e.name)&&r.setAttribute("largeop","false");else if(e.body)r=new gl("mo",qs(e.body,t));else{r=new gl("mi",[new yp(e.name.slice(1))]);var i=new gl("mo",[nu("\u2061","text")]);e.parentIsSupSub?r=new gl("mrow",[r,i]):r=gs([r,i])}return r},m6={"\u220F":"\\prod","\u2210":"\\coprod","\u2211":"\\sum","\u22C0":"\\bigwedge","\u22C1":"\\bigvee","\u22C2":"\\bigcap","\u22C3":"\\bigcup","\u2A00":"\\bigodot","\u2A01":"\\bigoplus","\u2A02":"\\bigotimes","\u2A04":"\\biguplus","\u2A06":"\\bigsqcup"},wi({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","\u220F","\u2210","\u2211","\u22C0","\u22C1","\u22C2","\u22C3","\u2A00","\u2A01","\u2A02","\u2A04","\u2A06"],props:{numArgs:0},handler:(e,t)=>{var{parser:r,funcName:i}=e,n=i;return n.length===1&&(n=m6[n]),{type:"op",mode:r.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:n}},htmlBuilder:Cp,mathmlBuilder:Sp}),wi({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var{parser:r}=e,i=t[0];return{type:"op",mode:r.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:js(i)}},htmlBuilder:Cp,mathmlBuilder:Sp}),yA={"\u222B":"\\int","\u222C":"\\iint","\u222D":"\\iiint","\u222E":"\\oint","\u222F":"\\oiint","\u2230":"\\oiiint"},wi({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(e){var{parser:t,funcName:r}=e;return{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:Cp,mathmlBuilder:Sp}),wi({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(e){var{parser:t,funcName:r}=e;return{type:"op",mode:t.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:Cp,mathmlBuilder:Sp}),wi({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","\u222B","\u222C","\u222D","\u222E","\u222F","\u2230"],props:{numArgs:0},handler(e){var{parser:t,funcName:r}=e,i=r;return i.length===1&&(i=yA[i]),{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:i}},htmlBuilder:Cp,mathmlBuilder:Sp}),mb=(e,t)=>{var r,i,n=!1,a;e.type==="supsub"?(r=e.sup,i=e.sub,a=Zn(e.base,"operatorname"),n=!0):a=Zn(e,"operatorname");var s;if(a.body.length>0){for(var u=a.body.map(g=>{var y=g.text;return typeof y=="string"?{type:"textord",mode:g.mode,text:y}:g}),h=uo(u,t.withFont("mathrm"),!0),d=0;d<h.length;d++){var p=h[d];p instanceof tu&&(p.text=p.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}s=Bt.makeSpan(["mop"],h,t)}else s=Bt.makeSpan(["mop"],[],t);return n?Ep(s,r,i,t,t.style,0,0):s},y6=(e,t)=>{for(var r=qs(e.body,t.withFont("mathrm")),i=!0,n=0;n<r.length;n++){var a=r[n];if(!(a instanceof Hr.SpaceNode))if(a instanceof Hr.MathNode)switch(a.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var s=a.children[0];a.children.length===1&&s instanceof Hr.TextNode?s.text=s.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):i=!1;break}default:i=!1}else i=!1}if(i){var u=r.map(p=>p.toText()).join("");r=[new Hr.TextNode(u)]}var h=new Hr.MathNode("mi",r);h.setAttribute("mathvariant","normal");var d=new Hr.MathNode("mo",[nu("\u2061","text")]);return e.parentIsSupSub?new Hr.MathNode("mrow",[h,d]):Hr.newDocumentFragment([h,d])},wi({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(e,t)=>{var{parser:r,funcName:i}=e,n=t[0];return{type:"operatorname",mode:r.mode,body:js(n),alwaysHandleSupSub:i==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:mb,mathmlBuilder:y6}),Ne("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@"),yc({type:"ordgroup",htmlBuilder(e,t){return e.semisimple?Bt.makeFragment(uo(e.body,t,!1)):Bt.makeSpan(["mord"],uo(e.body,t,!0),t)},mathmlBuilder(e,t){return au(e.body,t,!0)}}),wi({type:"overline",names:["\\overline"],props:{numArgs:1},handler(e,t){var{parser:r}=e,i=t[0];return{type:"overline",mode:r.mode,body:i}},htmlBuilder(e,t){var r=wa(e.body,t.havingCrampedStyle()),i=Bt.makeLineSpan("overline-line",t),n=t.fontMetrics().defaultRuleThickness,a=Bt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r},{type:"kern",size:3*n},{type:"elem",elem:i},{type:"kern",size:n}]},t);return Bt.makeSpan(["mord","overline"],[a],t)},mathmlBuilder(e,t){var r=new Hr.MathNode("mo",[new Hr.TextNode("\u203E")]);r.setAttribute("stretchy","true");var i=new Hr.MathNode("mover",[Va(e.body,t),r]);return i.setAttribute("accent","true"),i}}),wi({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,i=t[0];return{type:"phantom",mode:r.mode,body:js(i)}},htmlBuilder:(e,t)=>{var r=uo(e.body,t.withPhantom(),!1);return Bt.makeFragment(r)},mathmlBuilder:(e,t)=>{var r=qs(e.body,t);return new Hr.MathNode("mphantom",r)}}),wi({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,i=t[0];return{type:"hphantom",mode:r.mode,body:i}},htmlBuilder:(e,t)=>{var r=Bt.makeSpan([],[wa(e.body,t.withPhantom())]);if(r.height=0,r.depth=0,r.children)for(var i=0;i<r.children.length;i++)r.children[i].height=0,r.children[i].depth=0;return r=Bt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},t),Bt.makeSpan(["mord"],[r],t)},mathmlBuilder:(e,t)=>{var r=qs(js(e.body),t),i=new Hr.MathNode("mphantom",r),n=new Hr.MathNode("mpadded",[i]);return n.setAttribute("height","0px"),n.setAttribute("depth","0px"),n}}),wi({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,i=t[0];return{type:"vphantom",mode:r.mode,body:i}},htmlBuilder:(e,t)=>{var r=Bt.makeSpan(["inner"],[wa(e.body,t.withPhantom())]),i=Bt.makeSpan(["fix"],[]);return Bt.makeSpan(["mord","rlap"],[r,i],t)},mathmlBuilder:(e,t)=>{var r=qs(js(e.body),t),i=new Hr.MathNode("mphantom",r),n=new Hr.MathNode("mpadded",[i]);return n.setAttribute("width","0px"),n}}),wi({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(e,t){var{parser:r}=e,i=Zn(t[0],"size").value,n=t[1];return{type:"raisebox",mode:r.mode,dy:i,body:n}},htmlBuilder(e,t){var r=wa(e.body,t),i=ys(e.dy,t);return Bt.makeVList({positionType:"shift",positionData:-i,children:[{type:"elem",elem:r}]},t)},mathmlBuilder(e,t){var r=new Hr.MathNode("mpadded",[Va(e.body,t)]),i=e.dy.number+e.dy.unit;return r.setAttribute("voffset",i),r}}),wi({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0},handler(e){var{parser:t}=e;return{type:"internal",mode:t.mode}}}),wi({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,argTypes:["size","size","size"]},handler(e,t,r){var{parser:i}=e,n=r[0],a=Zn(t[0],"size"),s=Zn(t[1],"size");return{type:"rule",mode:i.mode,shift:n&&Zn(n,"size").value,width:a.value,height:s.value}},htmlBuilder(e,t){var r=Bt.makeSpan(["mord","rule"],[],t),i=ys(e.width,t),n=ys(e.height,t),a=e.shift?ys(e.shift,t):0;return r.style.borderRightWidth=ci(i),r.style.borderTopWidth=ci(n),r.style.bottom=ci(a),r.width=i,r.height=n+a,r.depth=-a,r.maxFontSize=n*1.125*t.sizeMultiplier,r},mathmlBuilder(e,t){var r=ys(e.width,t),i=ys(e.height,t),n=e.shift?ys(e.shift,t):0,a=t.color&&t.getColor()||"black",s=new Hr.MathNode("mspace");s.setAttribute("mathbackground",a),s.setAttribute("width",ci(r)),s.setAttribute("height",ci(i));var u=new Hr.MathNode("mpadded",[s]);return n>=0?u.setAttribute("height",ci(n)):(u.setAttribute("height",ci(n)),u.setAttribute("depth",ci(-n))),u.setAttribute("voffset",ci(n)),u}}),v6=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],x6=(e,t)=>{var r=t.havingSize(e.size);return K8(e.body,r,t)},wi({type:"sizing",names:v6,props:{numArgs:0,allowedInText:!0},handler:(e,t)=>{var{breakOnTokenText:r,funcName:i,parser:n}=e,a=n.parseExpression(!1,r);return{type:"sizing",mode:n.mode,size:v6.indexOf(i)+1,body:a}},htmlBuilder:x6,mathmlBuilder:(e,t)=>{var r=t.havingSize(e.size),i=qs(e.body,r),n=new Hr.MathNode("mstyle",i);return n.setAttribute("mathsize",ci(r.sizeMultiplier)),n}}),wi({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(e,t,r)=>{var{parser:i}=e,n=!1,a=!1,s=r[0]&&Zn(r[0],"ordgroup");if(s)for(var u="",h=0;h<s.body.length;++h){var d=s.body[h];if(u=d.text,u==="t")n=!0;else if(u==="b")a=!0;else{n=!1,a=!1;break}}else n=!0,a=!0;var p=t[0];return{type:"smash",mode:i.mode,body:p,smashHeight:n,smashDepth:a}},htmlBuilder:(e,t)=>{var r=Bt.makeSpan([],[wa(e.body,t)]);if(!e.smashHeight&&!e.smashDepth)return r;if(e.smashHeight&&(r.height=0,r.children))for(var i=0;i<r.children.length;i++)r.children[i].height=0;if(e.smashDepth&&(r.depth=0,r.children))for(var n=0;n<r.children.length;n++)r.children[n].depth=0;var a=Bt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},t);return Bt.makeSpan(["mord"],[a],t)},mathmlBuilder:(e,t)=>{var r=new Hr.MathNode("mpadded",[Va(e.body,t)]);return e.smashHeight&&r.setAttribute("height","0px"),e.smashDepth&&r.setAttribute("depth","0px"),r}}),wi({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(e,t,r){var{parser:i}=e,n=r[0],a=t[0];return{type:"sqrt",mode:i.mode,body:a,index:n}},htmlBuilder(e,t){var r=wa(e.body,t.havingCrampedStyle());r.height===0&&(r.height=t.fontMetrics().xHeight),r=Bt.wrapFragment(r,t);var i=t.fontMetrics(),n=i.defaultRuleThickness,a=n;t.style.id<kn.TEXT.id&&(a=t.fontMetrics().xHeight);var s=n+a/4,u=r.height+r.depth+s+n,{span:h,ruleWidth:d,advanceWidth:p}=vc.sqrtImage(u,t),g=h.height-d;g>r.height+r.depth+s&&(s=(s+g-r.height-r.depth)/2);var y=h.height-r.height-s-d;r.style.paddingLeft=ci(p);var m=Bt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:-(r.height+y)},{type:"elem",elem:h},{type:"kern",size:d}]},t);if(e.index){var x=t.havingStyle(kn.SCRIPTSCRIPT),_=wa(e.index,x,t),E=.6*(m.height-m.depth),w=Bt.makeVList({positionType:"shift",positionData:-E,children:[{type:"elem",elem:_}]},t),C=Bt.makeSpan(["root"],[w]);return Bt.makeSpan(["mord","sqrt"],[C,m],t)}else return Bt.makeSpan(["mord","sqrt"],[m],t)},mathmlBuilder(e,t){var{body:r,index:i}=e;return i?new Hr.MathNode("mroot",[Va(r,t),Va(i,t)]):new Hr.MathNode("msqrt",[Va(r,t)])}}),b6={display:kn.DISPLAY,text:kn.TEXT,script:kn.SCRIPT,scriptscript:kn.SCRIPTSCRIPT},wi({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e,t){var{breakOnTokenText:r,funcName:i,parser:n}=e,a=n.parseExpression(!0,r),s=i.slice(1,i.length-5);return{type:"styling",mode:n.mode,style:s,body:a}},htmlBuilder(e,t){var r=b6[e.style],i=t.havingStyle(r).withFont("");return K8(e.body,i,t)},mathmlBuilder(e,t){var r=b6[e.style],i=t.havingStyle(r),n=qs(e.body,i),a=new Hr.MathNode("mstyle",n),s={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},u=s[e.style];return a.setAttribute("scriptlevel",u[0]),a.setAttribute("displaystyle",u[1]),a}}),vA=function(e,t){var r=e.base;if(r)if(r.type==="op"){var i=r.limits&&(t.style.size===kn.DISPLAY.size||r.alwaysHandleSupSub);return i?Cp:null}else if(r.type==="operatorname"){var n=r.alwaysHandleSupSub&&(t.style.size===kn.DISPLAY.size||r.limits);return n?mb:null}else{if(r.type==="accent")return hn.isCharacterBox(r.base)?s0:null;if(r.type==="horizBrace"){var a=!e.sub;return a===r.isOver?g6:null}else return null}else return null},yc({type:"supsub",htmlBuilder(e,t){var r=vA(e,t);if(r)return r(e,t);var{base:i,sup:n,sub:a}=e,s=wa(i,t),u,h,d=t.fontMetrics(),p=0,g=0,y=i&&hn.isCharacterBox(i);if(n){var m=t.havingStyle(t.style.sup());u=wa(n,m,t),y||(p=s.height-m.fontMetrics().supDrop*m.sizeMultiplier/t.sizeMultiplier)}if(a){var x=t.havingStyle(t.style.sub());h=wa(a,x,t),y||(g=s.depth+x.fontMetrics().subDrop*x.sizeMultiplier/t.sizeMultiplier)}var _;t.style===kn.DISPLAY?_=d.sup1:t.style.cramped?_=d.sup3:_=d.sup2;var E=t.sizeMultiplier,w=ci(.5/d.ptPerEm/E),C=null;if(h){var A=e.base&&e.base.type==="op"&&e.base.name&&(e.base.name==="\\oiint"||e.base.name==="\\oiiint");(s instanceof tu||A)&&(C=ci(-s.italic))}var M;if(u&&h){p=Math.max(p,_,u.depth+.25*d.xHeight),g=Math.max(g,d.sub2);var N=d.defaultRuleThickness,B=4*N;if(p-u.depth-(h.height-g)<B){g=B-(p-u.depth)+h.height;var O=.8*d.xHeight-(p-u.depth);O>0&&(p+=O,g-=O)}var L=[{type:"elem",elem:h,shift:g,marginRight:w,marginLeft:C},{type:"elem",elem:u,shift:-p,marginRight:w}];M=Bt.makeVList({positionType:"individualShift",children:L},t)}else if(h){g=Math.max(g,d.sub1,h.height-.8*d.xHeight);var $=[{type:"elem",elem:h,marginLeft:C,marginRight:w}];M=Bt.makeVList({positionType:"shift",positionData:g,children:$},t)}else if(u)p=Math.max(p,_,u.depth+.25*d.xHeight),M=Bt.makeVList({positionType:"shift",positionData:-p,children:[{type:"elem",elem:u,marginRight:w}]},t);else throw new Error("supsub must have either sup or sub.");var G=Tu(s,"right")||"mord";return Bt.makeSpan([G],[s,Bt.makeSpan(["msupsub"],[M])],t)},mathmlBuilder(e,t){var r=!1,i,n;e.base&&e.base.type==="horizBrace"&&(n=!!e.sup,n===e.base.isOver&&(r=!0,i=e.base.isOver)),e.base&&(e.base.type==="op"||e.base.type==="operatorname")&&(e.base.parentIsSupSub=!0);var a=[Va(e.base,t)];e.sub&&a.push(Va(e.sub,t)),e.sup&&a.push(Va(e.sup,t));var s;if(r)s=i?"mover":"munder";else if(e.sub)if(e.sup){var u=e.base;u&&u.type==="op"&&u.limits&&t.style===kn.DISPLAY||u&&u.type==="operatorname"&&u.alwaysHandleSupSub&&(t.style===kn.DISPLAY||u.limits)?s="munderover":s="msubsup"}else{var h=e.base;h&&h.type==="op"&&h.limits&&(t.style===kn.DISPLAY||h.alwaysHandleSupSub)||h&&h.type==="operatorname"&&h.alwaysHandleSupSub&&(h.limits||t.style===kn.DISPLAY)?s="munder":s="msub"}else{var d=e.base;d&&d.type==="op"&&d.limits&&(t.style===kn.DISPLAY||d.alwaysHandleSupSub)||d&&d.type==="operatorname"&&d.alwaysHandleSupSub&&(d.limits||t.style===kn.DISPLAY)?s="mover":s="msup"}return new Hr.MathNode(s,a)}}),yc({type:"atom",htmlBuilder(e,t){return Bt.mathsym(e.text,e.mode,t,["m"+e.family])},mathmlBuilder(e,t){var r=new Hr.MathNode("mo",[nu(e.text,e.mode)]);if(e.family==="bin"){var i=sd(e,t);i==="bold-italic"&&r.setAttribute("mathvariant",i)}else e.family==="punct"?r.setAttribute("separator","true"):(e.family==="open"||e.family==="close")&&r.setAttribute("stretchy","false");return r}}),_6={mi:"italic",mn:"normal",mtext:"normal"},yc({type:"mathord",htmlBuilder(e,t){return Bt.makeOrd(e,t,"mathord")},mathmlBuilder(e,t){var r=new Hr.MathNode("mi",[nu(e.text,e.mode,t)]),i=sd(e,t)||"italic";return i!==_6[r.type]&&r.setAttribute("mathvariant",i),r}}),yc({type:"textord",htmlBuilder(e,t){return Bt.makeOrd(e,t,"textord")},mathmlBuilder(e,t){var r=nu(e.text,e.mode,t),i=sd(e,t)||"normal",n;return e.mode==="text"?n=new Hr.MathNode("mtext",[r]):/[0-9]/.test(e.text)?n=new Hr.MathNode("mn",[r]):e.text==="\\prime"?n=new Hr.MathNode("mo",[r]):n=new Hr.MathNode("mi",[r]),i!==_6[n.type]&&n.setAttribute("mathvariant",i),n}}),yb={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},Ly={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}},yc({type:"spacing",htmlBuilder(e,t){if(Ly.hasOwnProperty(e.text)){var r=Ly[e.text].className||"";if(e.mode==="text"){var i=Bt.makeOrd(e,t,"textord");return i.classes.push(r),i}else return Bt.makeSpan(["mspace",r],[Bt.mathsym(e.text,e.mode,t)],t)}else{if(yb.hasOwnProperty(e.text))return Bt.makeSpan(["mspace",yb[e.text]],[],t);throw new qr('Unknown type of space "'+e.text+'"')}},mathmlBuilder(e,t){var r;if(Ly.hasOwnProperty(e.text))r=new Hr.MathNode("mtext",[new Hr.TextNode("\xA0")]);else{if(yb.hasOwnProperty(e.text))return new Hr.MathNode("mspace");throw new qr('Unknown type of space "'+e.text+'"')}return r}}),w6=()=>{var e=new Hr.MathNode("mtd",[]);return e.setAttribute("width","50%"),e},yc({type:"tag",mathmlBuilder(e,t){var r=new Hr.MathNode("mtable",[new Hr.MathNode("mtr",[w6(),new Hr.MathNode("mtd",[au(e.body,t)]),w6(),new Hr.MathNode("mtd",[au(e.tag,t)])])]);return r.setAttribute("width","100%"),r}}),k6={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},T6={"\\textbf":"textbf","\\textmd":"textmd"},xA={"\\textit":"textit","\\textup":"textup"},vb=(e,t)=>{var r=e.font;if(r){if(k6[r])return t.withTextFontFamily(k6[r]);if(T6[r])return t.withTextFontWeight(T6[r]);if(r==="\\emph")return t.fontShape==="textit"?t.withTextFontShape("textup"):t.withTextFontShape("textit")}else return t;return t.withTextFontShape(xA[r])},wi({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(e,t){var{parser:r,funcName:i}=e,n=t[0];return{type:"text",mode:r.mode,body:js(n),font:i}},htmlBuilder(e,t){var r=vb(e,t),i=uo(e.body,r,!0);return Bt.makeSpan(["mord","text"],i,r)},mathmlBuilder(e,t){var r=vb(e,t);return au(e.body,r)}}),wi({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(e,t){var{parser:r}=e;return{type:"underline",mode:r.mode,body:t[0]}},htmlBuilder(e,t){var r=wa(e.body,t),i=Bt.makeLineSpan("underline-line",t),n=t.fontMetrics().defaultRuleThickness,a=Bt.makeVList({positionType:"top",positionData:r.height,children:[{type:"kern",size:n},{type:"elem",elem:i},{type:"kern",size:3*n},{type:"elem",elem:r}]},t);return Bt.makeSpan(["mord","underline"],[a],t)},mathmlBuilder(e,t){var r=new Hr.MathNode("mo",[new Hr.TextNode("\u203E")]);r.setAttribute("stretchy","true");var i=new Hr.MathNode("munder",[Va(e.body,t),r]);return i.setAttribute("accentunder","true"),i}}),wi({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(e,t){var{parser:r}=e;return{type:"vcenter",mode:r.mode,body:t[0]}},htmlBuilder(e,t){var r=wa(e.body,t),i=t.fontMetrics().axisHeight,n=.5*(r.height-i-(r.depth+i));return Bt.makeVList({positionType:"shift",positionData:n,children:[{type:"elem",elem:r}]},t)},mathmlBuilder(e,t){return new Hr.MathNode("mpadded",[Va(e.body,t)],["vcenter"])}}),wi({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(e,t,r){throw new qr("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(e,t){for(var r=xb(e),i=[],n=t.havingStyle(t.style.text()),a=0;a<r.length;a++){var s=r[a];s==="~"&&(s="\\textasciitilde"),i.push(Bt.makeSymbol(s,"Typewriter-Regular",e.mode,n,["mord","texttt"]))}return Bt.makeSpan(["mord","text"].concat(n.sizingClasses(t)),Bt.tryCombineChars(i),n)},mathmlBuilder(e,t){var r=new Hr.TextNode(xb(e)),i=new Hr.MathNode("mtext",[r]);return i.setAttribute("mathvariant","monospace"),i}}),xb=e=>e.body.replace(/ /g,e.star?"\u2423":"\xA0"),yl=vy,Rg=`[ \r
	]`,E6="\\\\[a-zA-Z@]+",bA="\\\\[^\uD800-\uDFFF]",C6="("+E6+")"+Rg+"*",S6=`\\\\(
|[ \r	]+
?)[ \r	]*`,Ry="[\u0300-\u036F]",A6=new RegExp(Ry+"+$"),_A="("+Rg+"+)|"+(S6+"|")+"([!-\\[\\]-\u2027\u202A-\uD7FF\uF900-\uFFFF]"+(Ry+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(Ry+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+C6)+("|"+bA+")"),bb=class{constructor(e,t){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=t,this.tokenRegex=new RegExp(_A,"g"),this.catcodes={"%":14,"~":13}}setCatcode(e,t){this.catcodes[e]=t}lex(){var e=this.input,t=this.tokenRegex.lastIndex;if(t===e.length)return new Jl("EOF",new Ju(this,t,t));var r=this.tokenRegex.exec(e);if(r===null||r.index!==t)throw new qr("Unexpected character: '"+e[t]+"'",new Jl(e[t],new Ju(this,t,t+1)));var i=r[6]||r[3]||(r[2]?"\\ ":" ");if(this.catcodes[i]===14){var n=e.indexOf(`
`,this.tokenRegex.lastIndex);return n===-1?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=n+1,this.lex()}return new Jl(i,new Ju(this,t,this.tokenRegex.lastIndex))}},M6=class{constructor(e,t){e===void 0&&(e={}),t===void 0&&(t={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=t,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new qr("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var t in e)e.hasOwnProperty(t)&&(e[t]==null?delete this.current[t]:this.current[t]=e[t])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)}get(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]}set(e,t,r){if(r===void 0&&(r=!1),r){for(var i=0;i<this.undefStack.length;i++)delete this.undefStack[i][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=t)}else{var n=this.undefStack[this.undefStack.length-1];n&&!n.hasOwnProperty(e)&&(n[e]=this.current[e])}t==null?delete this.current[e]:this.current[e]=t}},wA=l0,Ne("\\noexpand",function(e){var t=e.popToken();return e.isExpandable(t.text)&&(t.noexpand=!0,t.treatAsRelax=!0),{tokens:[t],numArgs:0}}),Ne("\\expandafter",function(e){var t=e.popToken();return e.expandOnce(!0),{tokens:[t],numArgs:0}}),Ne("\\@firstoftwo",function(e){var t=e.consumeArgs(2);return{tokens:t[0],numArgs:0}}),Ne("\\@secondoftwo",function(e){var t=e.consumeArgs(2);return{tokens:t[1],numArgs:0}}),Ne("\\@ifnextchar",function(e){var t=e.consumeArgs(3);e.consumeSpaces();var r=e.future();return t[0].length===1&&t[0][0].text===r.text?{tokens:t[1],numArgs:0}:{tokens:t[2],numArgs:0}}),Ne("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}"),Ne("\\TextOrMath",function(e){var t=e.consumeArgs(2);return e.mode==="text"?{tokens:t[0],numArgs:0}:{tokens:t[1],numArgs:0}}),Ap={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15},Ne("\\char",function(e){var t=e.popToken(),r,i="";if(t.text==="'")r=8,t=e.popToken();else if(t.text==='"')r=16,t=e.popToken();else if(t.text==="`")if(t=e.popToken(),t.text[0]==="\\")i=t.text.charCodeAt(1);else{if(t.text==="EOF")throw new qr("\\char` missing argument");i=t.text.charCodeAt(0)}else r=10;if(r){if(i=Ap[t.text],i==null||i>=r)throw new qr("Invalid base-"+r+" digit "+t.text);for(var n;(n=Ap[e.future().text])!=null&&n<r;)i*=r,i+=n,e.popToken()}return"\\@char{"+i+"}"}),c0=(e,t,r)=>{var i=e.consumeArg().tokens;if(i.length!==1)throw new qr("\\newcommand's first argument must be a macro name");var n=i[0].text,a=e.isDefined(n);if(a&&!t)throw new qr("\\newcommand{"+n+"} attempting to redefine "+(n+"; use \\renewcommand"));if(!a&&!r)throw new qr("\\renewcommand{"+n+"} when command "+n+" does not yet exist; use \\newcommand");var s=0;if(i=e.consumeArg().tokens,i.length===1&&i[0].text==="["){for(var u="",h=e.expandNextToken();h.text!=="]"&&h.text!=="EOF";)u+=h.text,h=e.expandNextToken();if(!u.match(/^\s*[0-9]+\s*$/))throw new qr("Invalid number of arguments: "+u);s=parseInt(u),i=e.consumeArg().tokens}return e.macros.set(n,{tokens:i,numArgs:s}),""},Ne("\\newcommand",e=>c0(e,!1,!0)),Ne("\\renewcommand",e=>c0(e,!0,!1)),Ne("\\providecommand",e=>c0(e,!0,!0)),Ne("\\message",e=>{var t=e.consumeArgs(1)[0];return console.log(t.reverse().map(r=>r.text).join("")),""}),Ne("\\errmessage",e=>{var t=e.consumeArgs(1)[0];return console.error(t.reverse().map(r=>r.text).join("")),""}),Ne("\\show",e=>{var t=e.popToken(),r=t.text;return console.log(t,e.macros.get(r),yl[r],Ja.math[r],Ja.text[r]),""}),Ne("\\bgroup","{"),Ne("\\egroup","}"),Ne("~","\\nobreakspace"),Ne("\\lq","`"),Ne("\\rq","'"),Ne("\\aa","\\r a"),Ne("\\AA","\\r A"),Ne("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`\xA9}"),Ne("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}"),Ne("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`\xAE}"),Ne("\u212C","\\mathscr{B}"),Ne("\u2130","\\mathscr{E}"),Ne("\u2131","\\mathscr{F}"),Ne("\u210B","\\mathscr{H}"),Ne("\u2110","\\mathscr{I}"),Ne("\u2112","\\mathscr{L}"),Ne("\u2133","\\mathscr{M}"),Ne("\u211B","\\mathscr{R}"),Ne("\u212D","\\mathfrak{C}"),Ne("\u210C","\\mathfrak{H}"),Ne("\u2128","\\mathfrak{Z}"),Ne("\\Bbbk","\\Bbb{k}"),Ne("\xB7","\\cdotp"),Ne("\\llap","\\mathllap{\\textrm{#1}}"),Ne("\\rlap","\\mathrlap{\\textrm{#1}}"),Ne("\\clap","\\mathclap{\\textrm{#1}}"),Ne("\\mathstrut","\\vphantom{(}"),Ne("\\underbar","\\underline{\\text{#1}}"),Ne("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}'),Ne("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`\u2260}}"),Ne("\\ne","\\neq"),Ne("\u2260","\\neq"),Ne("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`\u2209}}"),Ne("\u2209","\\notin"),Ne("\u2258","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`\u2258}}"),Ne("\u2259","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`\u2258}}"),Ne("\u225A","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`\u225A}}"),Ne("\u225B","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`\u225B}}"),Ne("\u225D","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`\u225D}}"),Ne("\u225E","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`\u225E}}"),Ne("\u225F","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`\u225F}}"),Ne("\u27C2","\\perp"),Ne("\u203C","\\mathclose{!\\mkern-0.8mu!}"),Ne("\u220C","\\notni"),Ne("\u231C","\\ulcorner"),Ne("\u231D","\\urcorner"),Ne("\u231E","\\llcorner"),Ne("\u231F","\\lrcorner"),Ne("\xA9","\\copyright"),Ne("\xAE","\\textregistered"),Ne("\uFE0F","\\textregistered"),Ne("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}'),Ne("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}'),Ne("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}'),Ne("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}'),Ne("\\vdots","\\mathord{\\varvdots\\rule{0pt}{15pt}}"),Ne("\u22EE","\\vdots"),Ne("\\varGamma","\\mathit{\\Gamma}"),Ne("\\varDelta","\\mathit{\\Delta}"),Ne("\\varTheta","\\mathit{\\Theta}"),Ne("\\varLambda","\\mathit{\\Lambda}"),Ne("\\varXi","\\mathit{\\Xi}"),Ne("\\varPi","\\mathit{\\Pi}"),Ne("\\varSigma","\\mathit{\\Sigma}"),Ne("\\varUpsilon","\\mathit{\\Upsilon}"),Ne("\\varPhi","\\mathit{\\Phi}"),Ne("\\varPsi","\\mathit{\\Psi}"),Ne("\\varOmega","\\mathit{\\Omega}"),Ne("\\substack","\\begin{subarray}{c}#1\\end{subarray}"),Ne("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax"),Ne("\\boxed","\\fbox{$\\displaystyle{#1}$}"),Ne("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;"),Ne("\\implies","\\DOTSB\\;\\Longrightarrow\\;"),Ne("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;"),hd={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"},Ne("\\dots",function(e){var t="\\dotso",r=e.expandAfterFuture().text;return r in hd?t=hd[r]:(r.slice(0,4)==="\\not"||r in Ja.math&&hn.contains(["bin","rel"],Ja.math[r].group))&&(t="\\dotsb"),t}),Mp={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0},Ne("\\dotso",function(e){var t=e.future().text;return t in Mp?"\\ldots\\,":"\\ldots"}),Ne("\\dotsc",function(e){var t=e.future().text;return t in Mp&&t!==","?"\\ldots\\,":"\\ldots"}),Ne("\\cdots",function(e){var t=e.future().text;return t in Mp?"\\@cdots\\,":"\\@cdots"}),Ne("\\dotsb","\\cdots"),Ne("\\dotsm","\\cdots"),Ne("\\dotsi","\\!\\cdots"),Ne("\\dotsx","\\ldots\\,"),Ne("\\DOTSI","\\relax"),Ne("\\DOTSB","\\relax"),Ne("\\DOTSX","\\relax"),Ne("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax"),Ne("\\,","\\tmspace+{3mu}{.1667em}"),Ne("\\thinspace","\\,"),Ne("\\>","\\mskip{4mu}"),Ne("\\:","\\tmspace+{4mu}{.2222em}"),Ne("\\medspace","\\:"),Ne("\\;","\\tmspace+{5mu}{.2777em}"),Ne("\\thickspace","\\;"),Ne("\\!","\\tmspace-{3mu}{.1667em}"),Ne("\\negthinspace","\\!"),Ne("\\negmedspace","\\tmspace-{4mu}{.2222em}"),Ne("\\negthickspace","\\tmspace-{5mu}{.277em}"),Ne("\\enspace","\\kern.5em "),Ne("\\enskip","\\hskip.5em\\relax"),Ne("\\quad","\\hskip1em\\relax"),Ne("\\qquad","\\hskip2em\\relax"),Ne("\\tag","\\@ifstar\\tag@literal\\tag@paren"),Ne("\\tag@paren","\\tag@literal{({#1})}"),Ne("\\tag@literal",e=>{if(e.macros.get("\\df@tag"))throw new qr("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"}),Ne("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}"),Ne("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)"),Ne("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}"),Ne("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1"),Ne("\\newline","\\\\\\relax"),Ne("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}"),Dg=ci(_u["Main-Regular"][84][1]-.7*_u["Main-Regular"][65][1]),Ne("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+Dg+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}"),Ne("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+Dg+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}"),Ne("\\hspace","\\@ifstar\\@hspacer\\@hspace"),Ne("\\@hspace","\\hskip #1\\relax"),Ne("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax"),Ne("\\ordinarycolon",":"),Ne("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}"),Ne("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}'),Ne("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}'),Ne("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}'),Ne("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}'),Ne("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}'),Ne("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}'),Ne("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}'),Ne("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}'),Ne("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}'),Ne("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}'),Ne("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}'),Ne("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}'),Ne("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}'),Ne("\u2237","\\dblcolon"),Ne("\u2239","\\eqcolon"),Ne("\u2254","\\coloneqq"),Ne("\u2255","\\eqqcolon"),Ne("\u2A74","\\Coloneqq"),Ne("\\ratio","\\vcentcolon"),Ne("\\coloncolon","\\dblcolon"),Ne("\\colonequals","\\coloneqq"),Ne("\\coloncolonequals","\\Coloneqq"),Ne("\\equalscolon","\\eqqcolon"),Ne("\\equalscoloncolon","\\Eqqcolon"),Ne("\\colonminus","\\coloneq"),Ne("\\coloncolonminus","\\Coloneq"),Ne("\\minuscolon","\\eqcolon"),Ne("\\minuscoloncolon","\\Eqcolon"),Ne("\\coloncolonapprox","\\Colonapprox"),Ne("\\coloncolonsim","\\Colonsim"),Ne("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),Ne("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}"),Ne("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),Ne("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}"),Ne("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`\u220C}}"),Ne("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}"),Ne("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}"),Ne("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}"),Ne("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}"),Ne("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}"),Ne("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}"),Ne("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}"),Ne("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}"),Ne("\\gvertneqq","\\html@mathml{\\@gvertneqq}{\u2269}"),Ne("\\lvertneqq","\\html@mathml{\\@lvertneqq}{\u2268}"),Ne("\\ngeqq","\\html@mathml{\\@ngeqq}{\u2271}"),Ne("\\ngeqslant","\\html@mathml{\\@ngeqslant}{\u2271}"),Ne("\\nleqq","\\html@mathml{\\@nleqq}{\u2270}"),Ne("\\nleqslant","\\html@mathml{\\@nleqslant}{\u2270}"),Ne("\\nshortmid","\\html@mathml{\\@nshortmid}{\u2224}"),Ne("\\nshortparallel","\\html@mathml{\\@nshortparallel}{\u2226}"),Ne("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{\u2288}"),Ne("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{\u2289}"),Ne("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{\u228A}"),Ne("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{\u2ACB}"),Ne("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{\u228B}"),Ne("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{\u2ACC}"),Ne("\\imath","\\html@mathml{\\@imath}{\u0131}"),Ne("\\jmath","\\html@mathml{\\@jmath}{\u0237}"),Ne("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`\u27E6}}"),Ne("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`\u27E7}}"),Ne("\u27E6","\\llbracket"),Ne("\u27E7","\\rrbracket"),Ne("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`\u2983}}"),Ne("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`\u2984}}"),Ne("\u2983","\\lBrace"),Ne("\u2984","\\rBrace"),Ne("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`\u29B5}}"),Ne("\u29B5","\\minuso"),Ne("\\darr","\\downarrow"),Ne("\\dArr","\\Downarrow"),Ne("\\Darr","\\Downarrow"),Ne("\\lang","\\langle"),Ne("\\rang","\\rangle"),Ne("\\uarr","\\uparrow"),Ne("\\uArr","\\Uparrow"),Ne("\\Uarr","\\Uparrow"),Ne("\\N","\\mathbb{N}"),Ne("\\R","\\mathbb{R}"),Ne("\\Z","\\mathbb{Z}"),Ne("\\alef","\\aleph"),Ne("\\alefsym","\\aleph"),Ne("\\Alpha","\\mathrm{A}"),Ne("\\Beta","\\mathrm{B}"),Ne("\\bull","\\bullet"),Ne("\\Chi","\\mathrm{X}"),Ne("\\clubs","\\clubsuit"),Ne("\\cnums","\\mathbb{C}"),Ne("\\Complex","\\mathbb{C}"),Ne("\\Dagger","\\ddagger"),Ne("\\diamonds","\\diamondsuit"),Ne("\\empty","\\emptyset"),Ne("\\Epsilon","\\mathrm{E}"),Ne("\\Eta","\\mathrm{H}"),Ne("\\exist","\\exists"),Ne("\\harr","\\leftrightarrow"),Ne("\\hArr","\\Leftrightarrow"),Ne("\\Harr","\\Leftrightarrow"),Ne("\\hearts","\\heartsuit"),Ne("\\image","\\Im"),Ne("\\infin","\\infty"),Ne("\\Iota","\\mathrm{I}"),Ne("\\isin","\\in"),Ne("\\Kappa","\\mathrm{K}"),Ne("\\larr","\\leftarrow"),Ne("\\lArr","\\Leftarrow"),Ne("\\Larr","\\Leftarrow"),Ne("\\lrarr","\\leftrightarrow"),Ne("\\lrArr","\\Leftrightarrow"),Ne("\\Lrarr","\\Leftrightarrow"),Ne("\\Mu","\\mathrm{M}"),Ne("\\natnums","\\mathbb{N}"),Ne("\\Nu","\\mathrm{N}"),Ne("\\Omicron","\\mathrm{O}"),Ne("\\plusmn","\\pm"),Ne("\\rarr","\\rightarrow"),Ne("\\rArr","\\Rightarrow"),Ne("\\Rarr","\\Rightarrow"),Ne("\\real","\\Re"),Ne("\\reals","\\mathbb{R}"),Ne("\\Reals","\\mathbb{R}"),Ne("\\Rho","\\mathrm{P}"),Ne("\\sdot","\\cdot"),Ne("\\sect","\\S"),Ne("\\spades","\\spadesuit"),Ne("\\sub","\\subset"),Ne("\\sube","\\subseteq"),Ne("\\supe","\\supseteq"),Ne("\\Tau","\\mathrm{T}"),Ne("\\thetasym","\\vartheta"),Ne("\\weierp","\\wp"),Ne("\\Zeta","\\mathrm{Z}"),Ne("\\argmin","\\DOTSB\\operatorname*{arg\\,min}"),Ne("\\argmax","\\DOTSB\\operatorname*{arg\\,max}"),Ne("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits"),Ne("\\bra","\\mathinner{\\langle{#1}|}"),Ne("\\ket","\\mathinner{|{#1}\\rangle}"),Ne("\\braket","\\mathinner{\\langle{#1}\\rangle}"),Ne("\\Bra","\\left\\langle#1\\right|"),Ne("\\Ket","\\left|#1\\right\\rangle"),Ig=e=>t=>{var r=t.consumeArg().tokens,i=t.consumeArg().tokens,n=t.consumeArg().tokens,a=t.consumeArg().tokens,s=t.macros.get("|"),u=t.macros.get("\\|");t.macros.beginGroup();var h=g=>y=>{e&&(y.macros.set("|",s),n.length&&y.macros.set("\\|",u));var m=g;if(!g&&n.length){var x=y.future();x.text==="|"&&(y.popToken(),m=!0)}return{tokens:m?n:i,numArgs:0}};t.macros.set("|",h(!1)),n.length&&t.macros.set("\\|",h(!0));var d=t.consumeArg().tokens,p=t.expandTokens([...a,...d,...r]);return t.macros.endGroup(),{tokens:p.reverse(),numArgs:0}},Ne("\\bra@ket",Ig(!1)),Ne("\\bra@set",Ig(!0)),Ne("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}"),Ne("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}"),Ne("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}"),Ne("\\angln","{\\angl n}"),Ne("\\blue","\\textcolor{##6495ed}{#1}"),Ne("\\orange","\\textcolor{##ffa500}{#1}"),Ne("\\pink","\\textcolor{##ff00af}{#1}"),Ne("\\red","\\textcolor{##df0030}{#1}"),Ne("\\green","\\textcolor{##28ae7b}{#1}"),Ne("\\gray","\\textcolor{gray}{#1}"),Ne("\\purple","\\textcolor{##9d38bd}{#1}"),Ne("\\blueA","\\textcolor{##ccfaff}{#1}"),Ne("\\blueB","\\textcolor{##80f6ff}{#1}"),Ne("\\blueC","\\textcolor{##63d9ea}{#1}"),Ne("\\blueD","\\textcolor{##11accd}{#1}"),Ne("\\blueE","\\textcolor{##0c7f99}{#1}"),Ne("\\tealA","\\textcolor{##94fff5}{#1}"),Ne("\\tealB","\\textcolor{##26edd5}{#1}"),Ne("\\tealC","\\textcolor{##01d1c1}{#1}"),Ne("\\tealD","\\textcolor{##01a995}{#1}"),Ne("\\tealE","\\textcolor{##208170}{#1}"),Ne("\\greenA","\\textcolor{##b6ffb0}{#1}"),Ne("\\greenB","\\textcolor{##8af281}{#1}"),Ne("\\greenC","\\textcolor{##74cf70}{#1}"),Ne("\\greenD","\\textcolor{##1fab54}{#1}"),Ne("\\greenE","\\textcolor{##0d923f}{#1}"),Ne("\\goldA","\\textcolor{##ffd0a9}{#1}"),Ne("\\goldB","\\textcolor{##ffbb71}{#1}"),Ne("\\goldC","\\textcolor{##ff9c39}{#1}"),Ne("\\goldD","\\textcolor{##e07d10}{#1}"),Ne("\\goldE","\\textcolor{##a75a05}{#1}"),Ne("\\redA","\\textcolor{##fca9a9}{#1}"),Ne("\\redB","\\textcolor{##ff8482}{#1}"),Ne("\\redC","\\textcolor{##f9685d}{#1}"),Ne("\\redD","\\textcolor{##e84d39}{#1}"),Ne("\\redE","\\textcolor{##bc2612}{#1}"),Ne("\\maroonA","\\textcolor{##ffbde0}{#1}"),Ne("\\maroonB","\\textcolor{##ff92c6}{#1}"),Ne("\\maroonC","\\textcolor{##ed5fa6}{#1}"),Ne("\\maroonD","\\textcolor{##ca337c}{#1}"),Ne("\\maroonE","\\textcolor{##9e034e}{#1}"),Ne("\\purpleA","\\textcolor{##ddd7ff}{#1}"),Ne("\\purpleB","\\textcolor{##c6b9fc}{#1}"),Ne("\\purpleC","\\textcolor{##aa87ff}{#1}"),Ne("\\purpleD","\\textcolor{##7854ab}{#1}"),Ne("\\purpleE","\\textcolor{##543b78}{#1}"),Ne("\\mintA","\\textcolor{##f5f9e8}{#1}"),Ne("\\mintB","\\textcolor{##edf2df}{#1}"),Ne("\\mintC","\\textcolor{##e0e5cc}{#1}"),Ne("\\grayA","\\textcolor{##f6f7f7}{#1}"),Ne("\\grayB","\\textcolor{##f0f1f2}{#1}"),Ne("\\grayC","\\textcolor{##e3e5e6}{#1}"),Ne("\\grayD","\\textcolor{##d6d8da}{#1}"),Ne("\\grayE","\\textcolor{##babec2}{#1}"),Ne("\\grayF","\\textcolor{##888d93}{#1}"),Ne("\\grayG","\\textcolor{##626569}{#1}"),Ne("\\grayH","\\textcolor{##3b3e40}{#1}"),Ne("\\grayI","\\textcolor{##21242c}{#1}"),Ne("\\kaBlue","\\textcolor{##314453}{#1}"),Ne("\\kaGreen","\\textcolor{##71B307}{#1}"),L6={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0},kA=class{constructor(e,t,r){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=t,this.expansionCount=0,this.feed(e),this.macros=new M6(wA,t.macros),this.mode=r,this.stack=[]}feed(e){this.lexer=new bb(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){var t,r,i;if(e){if(this.consumeSpaces(),this.future().text!=="[")return null;t=this.popToken(),{tokens:i,end:r}=this.consumeArg(["]"])}else({tokens:i,start:t,end:r}=this.consumeArg());return this.pushToken(new Jl("EOF",r.loc)),this.pushTokens(i),t.range(r,"")}consumeSpaces(){for(;;){var e=this.future();if(e.text===" ")this.stack.pop();else break}}consumeArg(e){var t=[],r=e&&e.length>0;r||this.consumeSpaces();var i=this.future(),n,a=0,s=0;do{if(n=this.popToken(),t.push(n),n.text==="{")++a;else if(n.text==="}"){if(--a,a===-1)throw new qr("Extra }",n)}else if(n.text==="EOF")throw new qr("Unexpected end of input in a macro argument, expected '"+(e&&r?e[s]:"}")+"'",n);if(e&&r)if((a===0||a===1&&e[s]==="{")&&n.text===e[s]){if(++s,s===e.length){t.splice(-s,s);break}}else s=0}while(a!==0||r);return i.text==="{"&&t[t.length-1].text==="}"&&(t.pop(),t.shift()),t.reverse(),{tokens:t,start:i,end:n}}consumeArgs(e,t){if(t){if(t.length!==e+1)throw new qr("The length of delimiters doesn't match the number of args!");for(var r=t[0],i=0;i<r.length;i++){var n=this.popToken();if(r[i]!==n.text)throw new qr("Use of the macro doesn't match its definition",n)}}for(var a=[],s=0;s<e;s++)a.push(this.consumeArg(t&&t[s+1]).tokens);return a}countExpansion(e){if(this.expansionCount+=e,this.expansionCount>this.settings.maxExpand)throw new qr("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(e){var t=this.popToken(),r=t.text,i=t.noexpand?null:this._getExpansion(r);if(i==null||e&&i.unexpandable){if(e&&i==null&&r[0]==="\\"&&!this.isDefined(r))throw new qr("Undefined control sequence: "+r);return this.pushToken(t),!1}this.countExpansion(1);var n=i.tokens,a=this.consumeArgs(i.numArgs,i.delimiters);if(i.numArgs){n=n.slice();for(var s=n.length-1;s>=0;--s){var u=n[s];if(u.text==="#"){if(s===0)throw new qr("Incomplete placeholder at end of macro body",u);if(u=n[--s],u.text==="#")n.splice(s+1,1);else if(/^[1-9]$/.test(u.text))n.splice(s,2,...a[+u.text-1]);else throw new qr("Not a valid argument number",u)}}}return this.pushTokens(n),n.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw new Error}expandMacro(e){return this.macros.has(e)?this.expandTokens([new Jl(e)]):void 0}expandTokens(e){var t=[],r=this.stack.length;for(this.pushTokens(e);this.stack.length>r;)if(this.expandOnce(!0)===!1){var i=this.stack.pop();i.treatAsRelax&&(i.noexpand=!1,i.treatAsRelax=!1),t.push(i)}return this.countExpansion(t.length),t}expandMacroAsText(e){var t=this.expandMacro(e);return t&&t.map(r=>r.text).join("")}_getExpansion(e){var t=this.macros.get(e);if(t==null)return t;if(e.length===1){var r=this.lexer.catcodes[e];if(r!=null&&r!==13)return}var i=typeof t=="function"?t(this):t;if(typeof i=="string"){var n=0;if(i.indexOf("#")!==-1)for(var a=i.replace(/##/g,"");a.indexOf("#"+(n+1))!==-1;)++n;for(var s=new bb(i,this.settings),u=[],h=s.lex();h.text!=="EOF";)u.push(h),h=s.lex();u.reverse();var d={tokens:u,numArgs:n};return d}return i}isDefined(e){return this.macros.has(e)||yl.hasOwnProperty(e)||Ja.math.hasOwnProperty(e)||Ja.text.hasOwnProperty(e)||L6.hasOwnProperty(e)}isExpandable(e){var t=this.macros.get(e);return t!=null?typeof t=="string"||typeof t=="function"||!t.unexpandable:yl.hasOwnProperty(e)&&!yl[e].primitive}},Dy=/^[]/,Iy=Object.freeze({"\u208A":"+","\u208B":"-","\u208C":"=","\u208D":"(","\u208E":")","\u2080":"0","\u2081":"1","\u2082":"2","\u2083":"3","\u2084":"4","\u2085":"5","\u2086":"6","\u2087":"7","\u2088":"8","\u2089":"9","\u2090":"a","\u2091":"e","\u2095":"h","\u1D62":"i","\u2C7C":"j","\u2096":"k","\u2097":"l","\u2098":"m","\u2099":"n","\u2092":"o","\u209A":"p","\u1D63":"r","\u209B":"s","\u209C":"t","\u1D64":"u","\u1D65":"v","\u2093":"x","\u1D66":"\u03B2","\u1D67":"\u03B3","\u1D68":"\u03C1","\u1D69":"\u03D5","\u1D6A":"\u03C7","\u207A":"+","\u207B":"-","\u207C":"=","\u207D":"(","\u207E":")","\u2070":"0","\xB9":"1","\xB2":"2","\xB3":"3","\u2074":"4","\u2075":"5","\u2076":"6","\u2077":"7","\u2078":"8","\u2079":"9","\u1D2C":"A","\u1D2E":"B","\u1D30":"D","\u1D31":"E","\u1D33":"G","\u1D34":"H","\u1D35":"I","\u1D36":"J","\u1D37":"K","\u1D38":"L","\u1D39":"M","\u1D3A":"N","\u1D3C":"O","\u1D3E":"P","\u1D3F":"R","\u1D40":"T","\u1D41":"U","\u2C7D":"V","\u1D42":"W","\u1D43":"a","\u1D47":"b","\u1D9C":"c","\u1D48":"d","\u1D49":"e","\u1DA0":"f","\u1D4D":"g",\u02B0:"h","\u2071":"i",\u02B2:"j","\u1D4F":"k",\u02E1:"l","\u1D50":"m",\u207F:"n","\u1D52":"o","\u1D56":"p",\u02B3:"r",\u02E2:"s","\u1D57":"t","\u1D58":"u","\u1D5B":"v",\u02B7:"w",\u02E3:"x",\u02B8:"y","\u1DBB":"z","\u1D5D":"\u03B2","\u1D5E":"\u03B3","\u1D5F":"\u03B4","\u1D60":"\u03D5","\u1D61":"\u03C7","\u1DBF":"\u03B8"}),Ng={"\u0301":{text:"\\'",math:"\\acute"},"\u0300":{text:"\\`",math:"\\grave"},"\u0308":{text:'\\"',math:"\\ddot"},"\u0303":{text:"\\~",math:"\\tilde"},"\u0304":{text:"\\=",math:"\\bar"},"\u0306":{text:"\\u",math:"\\breve"},"\u030C":{text:"\\v",math:"\\check"},"\u0302":{text:"\\^",math:"\\hat"},"\u0307":{text:"\\.",math:"\\dot"},"\u030A":{text:"\\r",math:"\\mathring"},"\u030B":{text:"\\H"},"\u0327":{text:"\\c"}},Og={\u00E1:"a\u0301",\u00E0:"a\u0300",\u00E4:"a\u0308",\u01DF:"a\u0308\u0304",\u00E3:"a\u0303",\u0101:"a\u0304",\u0103:"a\u0306",\u1EAF:"a\u0306\u0301",\u1EB1:"a\u0306\u0300",\u1EB5:"a\u0306\u0303",\u01CE:"a\u030C",\u00E2:"a\u0302",\u1EA5:"a\u0302\u0301",\u1EA7:"a\u0302\u0300",\u1EAB:"a\u0302\u0303",\u0227:"a\u0307",\u01E1:"a\u0307\u0304",\u00E5:"a\u030A",\u01FB:"a\u030A\u0301",\u1E03:"b\u0307",\u0107:"c\u0301",\u1E09:"c\u0327\u0301",\u010D:"c\u030C",\u0109:"c\u0302",\u010B:"c\u0307",\u00E7:"c\u0327",\u010F:"d\u030C",\u1E0B:"d\u0307",\u1E11:"d\u0327",\u00E9:"e\u0301",\u00E8:"e\u0300",\u00EB:"e\u0308",\u1EBD:"e\u0303",\u0113:"e\u0304",\u1E17:"e\u0304\u0301",\u1E15:"e\u0304\u0300",\u0115:"e\u0306",\u1E1D:"e\u0327\u0306",\u011B:"e\u030C",\u00EA:"e\u0302",\u1EBF:"e\u0302\u0301",\u1EC1:"e\u0302\u0300",\u1EC5:"e\u0302\u0303",\u0117:"e\u0307",\u0229:"e\u0327",\u1E1F:"f\u0307",\u01F5:"g\u0301",\u1E21:"g\u0304",\u011F:"g\u0306",\u01E7:"g\u030C",\u011D:"g\u0302",\u0121:"g\u0307",\u0123:"g\u0327",\u1E27:"h\u0308",\u021F:"h\u030C",\u0125:"h\u0302",\u1E23:"h\u0307",\u1E29:"h\u0327",\u00ED:"i\u0301",\u00EC:"i\u0300",\u00EF:"i\u0308",\u1E2F:"i\u0308\u0301",\u0129:"i\u0303",\u012B:"i\u0304",\u012D:"i\u0306",\u01D0:"i\u030C",\u00EE:"i\u0302",\u01F0:"j\u030C",\u0135:"j\u0302",\u1E31:"k\u0301",\u01E9:"k\u030C",\u0137:"k\u0327",\u013A:"l\u0301",\u013E:"l\u030C",\u013C:"l\u0327",\u1E3F:"m\u0301",\u1E41:"m\u0307",\u0144:"n\u0301",\u01F9:"n\u0300",\u00F1:"n\u0303",\u0148:"n\u030C",\u1E45:"n\u0307",\u0146:"n\u0327",\u00F3:"o\u0301",\u00F2:"o\u0300",\u00F6:"o\u0308",\u022B:"o\u0308\u0304",\u00F5:"o\u0303",\u1E4D:"o\u0303\u0301",\u1E4F:"o\u0303\u0308",\u022D:"o\u0303\u0304",\u014D:"o\u0304",\u1E53:"o\u0304\u0301",\u1E51:"o\u0304\u0300",\u014F:"o\u0306",\u01D2:"o\u030C",\u00F4:"o\u0302",\u1ED1:"o\u0302\u0301",\u1ED3:"o\u0302\u0300",\u1ED7:"o\u0302\u0303",\u022F:"o\u0307",\u0231:"o\u0307\u0304",\u0151:"o\u030B",\u1E55:"p\u0301",\u1E57:"p\u0307",\u0155:"r\u0301",\u0159:"r\u030C",\u1E59:"r\u0307",\u0157:"r\u0327",\u015B:"s\u0301",\u1E65:"s\u0301\u0307",\u0161:"s\u030C",\u1E67:"s\u030C\u0307",\u015D:"s\u0302",\u1E61:"s\u0307",\u015F:"s\u0327",\u1E97:"t\u0308",\u0165:"t\u030C",\u1E6B:"t\u0307",\u0163:"t\u0327",\u00FA:"u\u0301",\u00F9:"u\u0300",\u00FC:"u\u0308",\u01D8:"u\u0308\u0301",\u01DC:"u\u0308\u0300",\u01D6:"u\u0308\u0304",\u01DA:"u\u0308\u030C",\u0169:"u\u0303",\u1E79:"u\u0303\u0301",\u016B:"u\u0304",\u1E7B:"u\u0304\u0308",\u016D:"u\u0306",\u01D4:"u\u030C",\u00FB:"u\u0302",\u016F:"u\u030A",\u0171:"u\u030B",\u1E7D:"v\u0303",\u1E83:"w\u0301",\u1E81:"w\u0300",\u1E85:"w\u0308",\u0175:"w\u0302",\u1E87:"w\u0307",\u1E98:"w\u030A",\u1E8D:"x\u0308",\u1E8B:"x\u0307",\u00FD:"y\u0301",\u1EF3:"y\u0300",\u00FF:"y\u0308",\u1EF9:"y\u0303",\u0233:"y\u0304",\u0177:"y\u0302",\u1E8F:"y\u0307",\u1E99:"y\u030A",\u017A:"z\u0301",\u017E:"z\u030C",\u1E91:"z\u0302",\u017C:"z\u0307",\u00C1:"A\u0301",\u00C0:"A\u0300",\u00C4:"A\u0308",\u01DE:"A\u0308\u0304",\u00C3:"A\u0303",\u0100:"A\u0304",\u0102:"A\u0306",\u1EAE:"A\u0306\u0301",\u1EB0:"A\u0306\u0300",\u1EB4:"A\u0306\u0303",\u01CD:"A\u030C",\u00C2:"A\u0302",\u1EA4:"A\u0302\u0301",\u1EA6:"A\u0302\u0300",\u1EAA:"A\u0302\u0303",\u0226:"A\u0307",\u01E0:"A\u0307\u0304",\u00C5:"A\u030A",\u01FA:"A\u030A\u0301",\u1E02:"B\u0307",\u0106:"C\u0301",\u1E08:"C\u0327\u0301",\u010C:"C\u030C",\u0108:"C\u0302",\u010A:"C\u0307",\u00C7:"C\u0327",\u010E:"D\u030C",\u1E0A:"D\u0307",\u1E10:"D\u0327",\u00C9:"E\u0301",\u00C8:"E\u0300",\u00CB:"E\u0308",\u1EBC:"E\u0303",\u0112:"E\u0304",\u1E16:"E\u0304\u0301",\u1E14:"E\u0304\u0300",\u0114:"E\u0306",\u1E1C:"E\u0327\u0306",\u011A:"E\u030C",\u00CA:"E\u0302",\u1EBE:"E\u0302\u0301",\u1EC0:"E\u0302\u0300",\u1EC4:"E\u0302\u0303",\u0116:"E\u0307",\u0228:"E\u0327",\u1E1E:"F\u0307",\u01F4:"G\u0301",\u1E20:"G\u0304",\u011E:"G\u0306",\u01E6:"G\u030C",\u011C:"G\u0302",\u0120:"G\u0307",\u0122:"G\u0327",\u1E26:"H\u0308",\u021E:"H\u030C",\u0124:"H\u0302",\u1E22:"H\u0307",\u1E28:"H\u0327",\u00CD:"I\u0301",\u00CC:"I\u0300",\u00CF:"I\u0308",\u1E2E:"I\u0308\u0301",\u0128:"I\u0303",\u012A:"I\u0304",\u012C:"I\u0306",\u01CF:"I\u030C",\u00CE:"I\u0302",\u0130:"I\u0307",\u0134:"J\u0302",\u1E30:"K\u0301",\u01E8:"K\u030C",\u0136:"K\u0327",\u0139:"L\u0301",\u013D:"L\u030C",\u013B:"L\u0327",\u1E3E:"M\u0301",\u1E40:"M\u0307",\u0143:"N\u0301",\u01F8:"N\u0300",\u00D1:"N\u0303",\u0147:"N\u030C",\u1E44:"N\u0307",\u0145:"N\u0327",\u00D3:"O\u0301",\u00D2:"O\u0300",\u00D6:"O\u0308",\u022A:"O\u0308\u0304",\u00D5:"O\u0303",\u1E4C:"O\u0303\u0301",\u1E4E:"O\u0303\u0308",\u022C:"O\u0303\u0304",\u014C:"O\u0304",\u1E52:"O\u0304\u0301",\u1E50:"O\u0304\u0300",\u014E:"O\u0306",\u01D1:"O\u030C",\u00D4:"O\u0302",\u1ED0:"O\u0302\u0301",\u1ED2:"O\u0302\u0300",\u1ED6:"O\u0302\u0303",\u022E:"O\u0307",\u0230:"O\u0307\u0304",\u0150:"O\u030B",\u1E54:"P\u0301",\u1E56:"P\u0307",\u0154:"R\u0301",\u0158:"R\u030C",\u1E58:"R\u0307",\u0156:"R\u0327",\u015A:"S\u0301",\u1E64:"S\u0301\u0307",\u0160:"S\u030C",\u1E66:"S\u030C\u0307",\u015C:"S\u0302",\u1E60:"S\u0307",\u015E:"S\u0327",\u0164:"T\u030C",\u1E6A:"T\u0307",\u0162:"T\u0327",\u00DA:"U\u0301",\u00D9:"U\u0300",\u00DC:"U\u0308",\u01D7:"U\u0308\u0301",\u01DB:"U\u0308\u0300",\u01D5:"U\u0308\u0304",\u01D9:"U\u0308\u030C",\u0168:"U\u0303",\u1E78:"U\u0303\u0301",\u016A:"U\u0304",\u1E7A:"U\u0304\u0308",\u016C:"U\u0306",\u01D3:"U\u030C",\u00DB:"U\u0302",\u016E:"U\u030A",\u0170:"U\u030B",\u1E7C:"V\u0303",\u1E82:"W\u0301",\u1E80:"W\u0300",\u1E84:"W\u0308",\u0174:"W\u0302",\u1E86:"W\u0307",\u1E8C:"X\u0308",\u1E8A:"X\u0307",\u00DD:"Y\u0301",\u1EF2:"Y\u0300",\u0178:"Y\u0308",\u1EF8:"Y\u0303",\u0232:"Y\u0304",\u0176:"Y\u0302",\u1E8E:"Y\u0307",\u0179:"Z\u0301",\u017D:"Z\u030C",\u1E90:"Z\u0302",\u017B:"Z\u0307",\u03AC:"\u03B1\u0301",\u1F70:"\u03B1\u0300",\u1FB1:"\u03B1\u0304",\u1FB0:"\u03B1\u0306",\u03AD:"\u03B5\u0301",\u1F72:"\u03B5\u0300",\u03AE:"\u03B7\u0301",\u1F74:"\u03B7\u0300",\u03AF:"\u03B9\u0301",\u1F76:"\u03B9\u0300",\u03CA:"\u03B9\u0308",\u0390:"\u03B9\u0308\u0301",\u1FD2:"\u03B9\u0308\u0300",\u1FD1:"\u03B9\u0304",\u1FD0:"\u03B9\u0306",\u03CC:"\u03BF\u0301",\u1F78:"\u03BF\u0300",\u03CD:"\u03C5\u0301",\u1F7A:"\u03C5\u0300",\u03CB:"\u03C5\u0308",\u03B0:"\u03C5\u0308\u0301",\u1FE2:"\u03C5\u0308\u0300",\u1FE1:"\u03C5\u0304",\u1FE0:"\u03C5\u0306",\u03CE:"\u03C9\u0301",\u1F7C:"\u03C9\u0300",\u038E:"\u03A5\u0301",\u1FEA:"\u03A5\u0300",\u03AB:"\u03A5\u0308",\u1FE9:"\u03A5\u0304",\u1FE8:"\u03A5\u0306",\u038F:"\u03A9\u0301",\u1FFA:"\u03A9\u0300"},Bg=class nOe{constructor(t,r){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new kA(t,r,this.mode),this.settings=r,this.leftrightDepth=0}expect(t,r){if(r===void 0&&(r=!0),this.fetch().text!==t)throw new qr("Expected '"+t+"', got '"+this.fetch().text+"'",this.fetch());r&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(t){this.mode=t,this.gullet.switchMode(t)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var t=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),t}finally{this.gullet.endGroups()}}subparse(t){var r=this.nextToken;this.consume(),this.gullet.pushToken(new Jl("}")),this.gullet.pushTokens(t);var i=this.parseExpression(!1);return this.expect("}"),this.nextToken=r,i}parseExpression(t,r){for(var i=[];;){this.mode==="math"&&this.consumeSpaces();var n=this.fetch();if(nOe.endOfExpression.indexOf(n.text)!==-1||r&&n.text===r||t&&yl[n.text]&&yl[n.text].infix)break;var a=this.parseAtom(r);if(a){if(a.type==="internal")continue}else break;i.push(a)}return this.mode==="text"&&this.formLigatures(i),this.handleInfixNodes(i)}handleInfixNodes(t){for(var r=-1,i,n=0;n<t.length;n++)if(t[n].type==="infix"){if(r!==-1)throw new qr("only one infix operator per group",t[n].token);r=n,i=t[n].replaceWith}if(r!==-1&&i){var a,s,u=t.slice(0,r),h=t.slice(r+1);u.length===1&&u[0].type==="ordgroup"?a=u[0]:a={type:"ordgroup",mode:this.mode,body:u},h.length===1&&h[0].type==="ordgroup"?s=h[0]:s={type:"ordgroup",mode:this.mode,body:h};var d;return i==="\\\\abovefrac"?d=this.callFunction(i,[a,t[r],s],[]):d=this.callFunction(i,[a,s],[]),[d]}else return t}handleSupSubscript(t){var r=this.fetch(),i=r.text;this.consume(),this.consumeSpaces();var n=this.parseGroup(t);if(!n)throw new qr("Expected group after '"+i+"'",r);return n}formatUnsupportedCmd(t){for(var r=[],i=0;i<t.length;i++)r.push({type:"textord",mode:"text",text:t[i]});var n={type:"text",mode:this.mode,body:r},a={type:"color",mode:this.mode,color:this.settings.errorColor,body:[n]};return a}parseAtom(t){var r=this.parseGroup("atom",t);if(this.mode==="text")return r;for(var i,n;;){this.consumeSpaces();var a=this.fetch();if(a.text==="\\limits"||a.text==="\\nolimits"){if(r&&r.type==="op"){var s=a.text==="\\limits";r.limits=s,r.alwaysHandleSupSub=!0}else if(r&&r.type==="operatorname")r.alwaysHandleSupSub&&(r.limits=a.text==="\\limits");else throw new qr("Limit controls must follow a math operator",a);this.consume()}else if(a.text==="^"){if(i)throw new qr("Double superscript",a);i=this.handleSupSubscript("superscript")}else if(a.text==="_"){if(n)throw new qr("Double subscript",a);n=this.handleSupSubscript("subscript")}else if(a.text==="'"){if(i)throw new qr("Double superscript",a);var u={type:"textord",mode:this.mode,text:"\\prime"},h=[u];for(this.consume();this.fetch().text==="'";)h.push(u),this.consume();this.fetch().text==="^"&&h.push(this.handleSupSubscript("superscript")),i={type:"ordgroup",mode:this.mode,body:h}}else if(Iy[a.text]){var d=Dy.test(a.text),p=[];for(p.push(new Jl(Iy[a.text])),this.consume();;){var g=this.fetch().text;if(!Iy[g]||Dy.test(g)!==d)break;p.unshift(new Jl(Iy[g])),this.consume()}var y=this.subparse(p);d?n={type:"ordgroup",mode:"math",body:y}:i={type:"ordgroup",mode:"math",body:y}}else break}return i||n?{type:"supsub",mode:this.mode,base:r,sup:i,sub:n}:r}parseFunction(t,r){var i=this.fetch(),n=i.text,a=yl[n];if(!a)return null;if(this.consume(),r&&r!=="atom"&&!a.allowedInArgument)throw new qr("Got function '"+n+"' with no arguments"+(r?" as "+r:""),i);if(this.mode==="text"&&!a.allowedInText)throw new qr("Can't use function '"+n+"' in text mode",i);if(this.mode==="math"&&a.allowedInMath===!1)throw new qr("Can't use function '"+n+"' in math mode",i);var{args:s,optArgs:u}=this.parseArguments(n,a);return this.callFunction(n,s,u,i,t)}callFunction(t,r,i,n,a){var s={funcName:t,parser:this,token:n,breakOnTokenText:a},u=yl[t];if(u&&u.handler)return u.handler(s,r,i);throw new qr("No function handler for "+t)}parseArguments(t,r){var i=r.numArgs+r.numOptionalArgs;if(i===0)return{args:[],optArgs:[]};for(var n=[],a=[],s=0;s<i;s++){var u=r.argTypes&&r.argTypes[s],h=s<r.numOptionalArgs;(r.primitive&&u==null||r.type==="sqrt"&&s===1&&a[0]==null)&&(u="primitive");var d=this.parseGroupOfType("argument to '"+t+"'",u,h);if(h)a.push(d);else if(d!=null)n.push(d);else throw new qr("Null argument, please report this as a bug")}return{args:n,optArgs:a}}parseGroupOfType(t,r,i){switch(r){case"color":return this.parseColorGroup(i);case"size":return this.parseSizeGroup(i);case"url":return this.parseUrlGroup(i);case"math":case"text":return this.parseArgumentGroup(i,r);case"hbox":{var n=this.parseArgumentGroup(i,"text");return n!=null?{type:"styling",mode:n.mode,body:[n],style:"text"}:null}case"raw":{var a=this.parseStringGroup("raw",i);return a!=null?{type:"raw",mode:"text",string:a.text}:null}case"primitive":{if(i)throw new qr("A primitive argument cannot be optional");var s=this.parseGroup(t);if(s==null)throw new qr("Expected group as "+t,this.fetch());return s}case"original":case null:case void 0:return this.parseArgumentGroup(i);default:throw new qr("Unknown group type as "+t,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(t,r){var i=this.gullet.scanArgument(r);if(i==null)return null;for(var n="",a;(a=this.fetch()).text!=="EOF";)n+=a.text,this.consume();return this.consume(),i.text=n,i}parseRegexGroup(t,r){for(var i=this.fetch(),n=i,a="",s;(s=this.fetch()).text!=="EOF"&&t.test(a+s.text);)n=s,a+=n.text,this.consume();if(a==="")throw new qr("Invalid "+r+": '"+i.text+"'",i);return i.range(n,a)}parseColorGroup(t){var r=this.parseStringGroup("color",t);if(r==null)return null;var i=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i.exec(r.text);if(!i)throw new qr("Invalid color: '"+r.text+"'",r);var n=i[0];return/^[0-9a-f]{6}$/i.test(n)&&(n="#"+n),{type:"color-token",mode:this.mode,color:n}}parseSizeGroup(t){var r,i=!1;if(this.gullet.consumeSpaces(),!t&&this.gullet.future().text!=="{"?r=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):r=this.parseStringGroup("size",t),!r)return null;!t&&r.text.length===0&&(r.text="0pt",i=!0);var n=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(r.text);if(!n)throw new qr("Invalid size: '"+r.text+"'",r);var a={number:+(n[1]+n[2]),unit:n[3]};if(!Bw(a))throw new qr("Invalid unit: '"+a.unit+"'",r);return{type:"size",mode:this.mode,value:a,isBlank:i}}parseUrlGroup(t){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var r=this.parseStringGroup("url",t);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),r==null)return null;var i=r.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:i}}parseArgumentGroup(t,r){var i=this.gullet.scanArgument(t);if(i==null)return null;var n=this.mode;r&&this.switchMode(r),this.gullet.beginGroup();var a=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var s={type:"ordgroup",mode:this.mode,loc:i.loc,body:a};return r&&this.switchMode(n),s}parseGroup(t,r){var i=this.fetch(),n=i.text,a;if(n==="{"||n==="\\begingroup"){this.consume();var s=n==="{"?"}":"\\endgroup";this.gullet.beginGroup();var u=this.parseExpression(!1,s),h=this.fetch();this.expect(s),this.gullet.endGroup(),a={type:"ordgroup",mode:this.mode,loc:Ju.range(i,h),body:u,semisimple:n==="\\begingroup"||void 0}}else if(a=this.parseFunction(r,t)||this.parseSymbol(),a==null&&n[0]==="\\"&&!L6.hasOwnProperty(n)){if(this.settings.throwOnError)throw new qr("Undefined control sequence: "+n,i);a=this.formatUnsupportedCmd(n),this.consume()}return a}formLigatures(t){for(var r=t.length-1,i=0;i<r;++i){var n=t[i],a=n.text;a==="-"&&t[i+1].text==="-"&&(i+1<r&&t[i+2].text==="-"?(t.splice(i,3,{type:"textord",mode:"text",loc:Ju.range(n,t[i+2]),text:"---"}),r-=2):(t.splice(i,2,{type:"textord",mode:"text",loc:Ju.range(n,t[i+1]),text:"--"}),r-=1)),(a==="'"||a==="`")&&t[i+1].text===a&&(t.splice(i,2,{type:"textord",mode:"text",loc:Ju.range(n,t[i+1]),text:a+a}),r-=1)}}parseSymbol(){var t=this.fetch(),r=t.text;if(/^\\verb[^a-zA-Z]/.test(r)){this.consume();var i=r.slice(5),n=i.charAt(0)==="*";if(n&&(i=i.slice(1)),i.length<2||i.charAt(0)!==i.slice(-1))throw new qr(`\\verb assertion failed --
                    please report what input caused this bug`);return i=i.slice(1,-1),{type:"verb",mode:"text",body:i,star:n}}Og.hasOwnProperty(r[0])&&!Ja[this.mode][r[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+r[0]+'" used in math mode',t),r=Og[r[0]]+r.slice(1));var a=A6.exec(r);a&&(r=r.substring(0,a.index),r==="i"?r="\u0131":r==="j"&&(r="\u0237"));var s;if(Ja[this.mode][r]){this.settings.strict&&this.mode==="math"&&yg.indexOf(r)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+r[0]+'" used in math mode',t);var u=Ja[this.mode][r].group,h=Ju.range(t),d;if(tA.hasOwnProperty(u)){var p=u;d={type:"atom",mode:this.mode,family:p,loc:h,text:r}}else d={type:u,mode:this.mode,loc:h,text:r};s=d}else if(r.charCodeAt(0)>=128)this.settings.strict&&(ya(r.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+r[0]+'" used in math mode',t):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+r[0]+'"'+(" ("+r.charCodeAt(0)+")"),t)),s={type:"textord",mode:"text",loc:Ju.range(t),text:r};else return null;if(this.consume(),a)for(var g=0;g<a[0].length;g++){var y=a[0][g];if(!Ng[y])throw new qr("Unknown accent ' "+y+"'",t);var m=Ng[y][this.mode]||Ng[y].text;if(!m)throw new qr("Accent "+y+" unsupported in "+this.mode+" mode",t);s={type:"accent",mode:this.mode,loc:Ju.range(t),label:m,isStretchy:!1,isShifty:!0,base:s}}return s}},Bg.endOfExpression=["}","\\endgroup","\\end","\\right","&"],Lp=function(e,t){if(!(typeof e=="string"||e instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var r=new Bg(e,t);delete r.gullet.macros.current["\\df@tag"];var i=r.parse();if(delete r.gullet.macros.current["\\current@color"],delete r.gullet.macros.current["\\color"],r.gullet.macros.get("\\df@tag")){if(!t.displayMode)throw new qr("\\tag works only in display equations");i=[{type:"tag",mode:"text",body:i,tag:r.subparse([new Jl("\\df@tag")])}]}return i},d0=function(e,t,r){t.textContent="";var i=Oy(e,r).toNode();t.appendChild(i)},typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),d0=function(){throw new qr("KaTeX doesn't work in quirks mode.")}),Rp=function(e,t){var r=Oy(e,t).toMarkup();return r},p0=function(e,t){var r=new dg(t);return Lp(e,r)},Ny=function(e,t,r){if(r.throwOnError||!(e instanceof qr))throw e;var i=Bt.makeSpan(["katex-error"],[new tu(t)]);return i.setAttribute("title",e.toString()),i.setAttribute("style","color:"+r.errorColor),i},Oy=function(e,t){var r=new dg(t);try{var i=Lp(e,r);return wy(i,e,r)}catch(n){return Ny(n,e,r)}},TA=function(e,t){var r=new dg(t);try{var i=Lp(e,r);return sb(i,e,r)}catch(n){return Ny(n,e,r)}},EA={version:"0.16.11",render:d0,renderToString:Rp,ParseError:qr,SETTINGS_SCHEMA:hp,__parse:p0,__renderToDomTree:Oy,__renderToHTMLTree:TA,__setFontMetrics:Ha,__defineSymbol:Q,__defineFunction:wi,__defineMacro:Ne,__domTree:{Span:rl,Anchor:uy,SymbolNode:tu,SvgNode:Mh,PathNode:ru,LineNode:hy}}});function _b(){let e="data-temp-href-target";ar.addHook("beforeSanitizeAttributes",t=>{t instanceof Element&&t.tagName==="A"&&t.hasAttribute("target")&&t.setAttribute(e,t.getAttribute("target")??"")}),ar.addHook("afterSanitizeAttributes",t=>{t instanceof Element&&t.tagName==="A"&&t.hasAttribute(e)&&(t.setAttribute("target",t.getAttribute(e)??""),t.removeAttribute(e),t.getAttribute("target")==="_blank"&&t.setAttribute("rel","noopener"))})}var il,vl,k,By,nh,Ce,ah,Ns,sh,Dp,CA,Py,cd,Ip,wb,R6,SA,kb,Xs,Fy,Pg,bo,D6,Np,I6,N6,AA,Tb,MA,O6,f0,LA,xc,dd,B6,Eb,P6,ka,Fg,F6,g0,Gl,$6,Op,Bp,$y,RA,DA,z6,G6,Pp,cs,U6,j6,$g,zy,zg,Cb,Sb,bc,Gy,Uy,Gg,Ug,Da,jy,Cu,Ih,jg,Fp,Ab,es,H6,Hy,_c,Hg,IA,V6,Mb,Lb,No,Vg,Wg,zr,NA,OA,Oo,$p,Yg,BA,W6,PA,qg,Rb,Vy,Db,Xg,ho,Ks,Bo,_o,Po,Fo,$o,Ib,Kg,at,Wy,Y6,Nb,oh,Zg,Qg,Jg,Ob,FA,Qn=D(()=>{il=Ke(ba(),1),Ge(),Ge(),Ge(),Ge(),Ge(),Ge(),cr(),vl=Object.defineProperty,k=(e,t)=>vl(e,"name",{value:t,configurable:!0}),By=(e,t)=>{for(var r in t)vl(e,r,{get:t[r],enumerable:!0})},nh={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},Ce={trace:k((...e)=>{},"trace"),debug:k((...e)=>{},"debug"),info:k((...e)=>{},"info"),warn:k((...e)=>{},"warn"),error:k((...e)=>{},"error"),fatal:k((...e)=>{},"fatal")},ah=k(function(e="fatal"){let t=nh.fatal;typeof e=="string"?e.toLowerCase()in nh&&(t=nh[e]):typeof e=="number"&&(t=e),Ce.trace=()=>{},Ce.debug=()=>{},Ce.info=()=>{},Ce.warn=()=>{},Ce.error=()=>{},Ce.fatal=()=>{},t<=nh.fatal&&(Ce.fatal=console.error?console.error.bind(console,Ns("FATAL"),"color: orange"):console.log.bind(console,"\x1B[35m",Ns("FATAL"))),t<=nh.error&&(Ce.error=console.error?console.error.bind(console,Ns("ERROR"),"color: orange"):console.log.bind(console,"\x1B[31m",Ns("ERROR"))),t<=nh.warn&&(Ce.warn=console.warn?console.warn.bind(console,Ns("WARN"),"color: orange"):console.log.bind(console,"\x1B[33m",Ns("WARN"))),t<=nh.info&&(Ce.info=console.info?console.info.bind(console,Ns("INFO"),"color: lightblue"):console.log.bind(console,"\x1B[34m",Ns("INFO"))),t<=nh.debug&&(Ce.debug=console.debug?console.debug.bind(console,Ns("DEBUG"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",Ns("DEBUG"))),t<=nh.trace&&(Ce.trace=console.debug?console.debug.bind(console,Ns("TRACE"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",Ns("TRACE")))},"setLogLevel"),Ns=k(e=>`%c${(0,il.default)().format("ss.SSS")} : ${e} : `,"format"),sh=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s,Dp=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,CA=/\s*%%.*\n/gm,Py=class extends Error{static{k(this,"UnknownDiagramError")}constructor(e){super(e),this.name="UnknownDiagramError"}},cd={},Ip=k(function(e,t){e=e.replace(sh,"").replace(Dp,"").replace(CA,`
`);for(let[r,{detector:i}]of Object.entries(cd))if(i(e,t))return r;throw new Py(`No diagram type detected matching given configuration for text: ${e}`)},"detectType"),wb=k((...e)=>{for(let{id:t,detector:r,loader:i}of e)R6(t,r,i)},"registerLazyLoadedDiagrams"),R6=k((e,t,r)=>{cd[e]&&Ce.warn(`Detector with key ${e} already exists. Overwriting.`),cd[e]={detector:t,loader:r},Ce.debug(`Detector with key ${e} added${r?" with loader":""}`)},"addDetector"),SA=k(e=>cd[e].loader,"getDiagramLoader"),kb=k((e,t,{depth:r=2,clobber:i=!1}={})=>{let n={depth:r,clobber:i};return Array.isArray(t)&&!Array.isArray(e)?(t.forEach(a=>kb(e,a,n)),e):Array.isArray(t)&&Array.isArray(e)?(t.forEach(a=>{e.includes(a)||e.push(a)}),e):e===void 0||r<=0?e!=null&&typeof e=="object"&&typeof t=="object"?Object.assign(e,t):t:(t!==void 0&&typeof e=="object"&&typeof t=="object"&&Object.keys(t).forEach(a=>{typeof t[a]=="object"&&(e[a]===void 0||typeof e[a]=="object")?(e[a]===void 0&&(e[a]=Array.isArray(t[a])?[]:{}),e[a]=kb(e[a],t[a],{depth:r-1,clobber:i})):(i||typeof e[a]!="object"&&typeof t[a]!="object")&&(e[a]=t[a])}),e)},"assignWithDepth"),Xs=kb,Fy="#ffffff",Pg="#f2f2f2",bo=k((e,t)=>t?pt(e,{s:-40,l:10}):pt(e,{s:-40,l:-10}),"mkBorder"),D6=class{static{k(this,"Theme")}constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||pt(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||pt(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||bo(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||bo(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||bo(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||bo(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||ui(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||ui(this.tertiaryColor),this.lineColor=this.lineColor||ui(this.background),this.arrowheadColor=this.arrowheadColor||ui(this.background),this.textColor=this.textColor||this.primaryTextColor,this.border2=this.border2||this.tertiaryBorderColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?Fi(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||this.actorBorder,this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||Fi(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||ui(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||Cr(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||pt(this.primaryColor,{h:30}),this.cScale4=this.cScale4||pt(this.primaryColor,{h:60}),this.cScale5=this.cScale5||pt(this.primaryColor,{h:90}),this.cScale6=this.cScale6||pt(this.primaryColor,{h:120}),this.cScale7=this.cScale7||pt(this.primaryColor,{h:150}),this.cScale8=this.cScale8||pt(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||pt(this.primaryColor,{h:270}),this.cScale10=this.cScale10||pt(this.primaryColor,{h:300}),this.cScale11=this.cScale11||pt(this.primaryColor,{h:330}),this.darkMode)for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScale"+t]=Fi(this["cScale"+t],75);else for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScale"+t]=Fi(this["cScale"+t],25);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||ui(this["cScale"+t]);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this.darkMode?this["cScalePeer"+t]=this["cScalePeer"+t]||Cr(this["cScale"+t],10):this["cScalePeer"+t]=this["cScalePeer"+t]||Fi(this["cScale"+t],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.scaleLabelColor;let e=this.darkMode?-4:-1;for(let t=0;t<5;t++)this["surface"+t]=this["surface"+t]||pt(this.mainBkg,{h:180,s:-15,l:e*(5+t*3)}),this["surfacePeer"+t]=this["surfacePeer"+t]||pt(this.mainBkg,{h:180,s:-15,l:e*(8+t*3)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||pt(this.primaryColor,{h:64}),this.fillType3=this.fillType3||pt(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||pt(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||pt(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||pt(this.primaryColor,{h:128}),this.fillType7=this.fillType7||pt(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||pt(this.primaryColor,{l:-10}),this.pie5=this.pie5||pt(this.secondaryColor,{l:-10}),this.pie6=this.pie6||pt(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||pt(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||pt(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||pt(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||pt(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||pt(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||pt(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.archEdgeColor=this.archEdgeColor||"#777",this.archEdgeArrowColor=this.archEdgeArrowColor||"#777",this.archEdgeWidth=this.archEdgeWidth||"3",this.archGroupBorderColor=this.archGroupBorderColor||"#000",this.archGroupBorderWidth=this.archGroupBorderWidth||"2px",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||pt(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||pt(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||pt(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||pt(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||pt(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||pt(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Rs(this.quadrant1Fill)?Cr(this.quadrant1Fill):Fi(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#FFF4DD,#FFD8B1,#FFA07A,#ECEFF1,#D6DBDF,#C3E0A8,#FFB6A4,#FFD74D,#738FA7,#FFFFF0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?Fi(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||pt(this.primaryColor,{h:-30}),this.git4=this.git4||pt(this.primaryColor,{h:-60}),this.git5=this.git5||pt(this.primaryColor,{h:-90}),this.git6=this.git6||pt(this.primaryColor,{h:60}),this.git7=this.git7||pt(this.primaryColor,{h:120}),this.darkMode?(this.git0=Cr(this.git0,25),this.git1=Cr(this.git1,25),this.git2=Cr(this.git2,25),this.git3=Cr(this.git3,25),this.git4=Cr(this.git4,25),this.git5=Cr(this.git5,25),this.git6=Cr(this.git6,25),this.git7=Cr(this.git7,25)):(this.git0=Fi(this.git0,25),this.git1=Fi(this.git1,25),this.git2=Fi(this.git2,25),this.git3=Fi(this.git3,25),this.git4=Fi(this.git4,25),this.git5=Fi(this.git5,25),this.git6=Fi(this.git6,25),this.git7=Fi(this.git7,25)),this.gitInv0=this.gitInv0||ui(this.git0),this.gitInv1=this.gitInv1||ui(this.git1),this.gitInv2=this.gitInv2||ui(this.git2),this.gitInv3=this.gitInv3||ui(this.git3),this.gitInv4=this.gitInv4||ui(this.git4),this.gitInv5=this.gitInv5||ui(this.git5),this.gitInv6=this.gitInv6||ui(this.git6),this.gitInv7=this.gitInv7||ui(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Fy,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Pg}calculate(e){if(typeof e!="object"){this.updateColors();return}let t=Object.keys(e);t.forEach(r=>{this[r]=e[r]}),this.updateColors(),t.forEach(r=>{this[r]=e[r]})}},Np=k(e=>{let t=new D6;return t.calculate(e),t},"getThemeVariables"),I6=class{static{k(this,"Theme")}constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=Cr(this.primaryColor,16),this.tertiaryColor=pt(this.primaryColor,{h:-160}),this.primaryBorderColor=ui(this.background),this.secondaryBorderColor=bo(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=bo(this.tertiaryColor,this.darkMode),this.primaryTextColor=ui(this.primaryColor),this.secondaryTextColor=ui(this.secondaryColor),this.tertiaryTextColor=ui(this.tertiaryColor),this.lineColor=ui(this.background),this.textColor=ui(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=Cr(ui("#323D47"),10),this.lineColor="calculated",this.border1="#ccc",this.border2=Nn(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=Fi("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.excludeBkgColor=Fi(this.sectionBkgColor,10),this.taskBorderColor=Nn(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=Nn(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){this.secondBkg=Cr(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=Cr(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.actorBorder,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=Cr(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=pt(this.primaryColor,{h:64}),this.fillType3=pt(this.secondaryColor,{h:64}),this.fillType4=pt(this.primaryColor,{h:-64}),this.fillType5=pt(this.secondaryColor,{h:-64}),this.fillType6=pt(this.primaryColor,{h:128}),this.fillType7=pt(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||pt(this.primaryColor,{h:30}),this.cScale4=this.cScale4||pt(this.primaryColor,{h:60}),this.cScale5=this.cScale5||pt(this.primaryColor,{h:90}),this.cScale6=this.cScale6||pt(this.primaryColor,{h:120}),this.cScale7=this.cScale7||pt(this.primaryColor,{h:150}),this.cScale8=this.cScale8||pt(this.primaryColor,{h:210}),this.cScale9=this.cScale9||pt(this.primaryColor,{h:270}),this.cScale10=this.cScale10||pt(this.primaryColor,{h:300}),this.cScale11=this.cScale11||pt(this.primaryColor,{h:330});for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||ui(this["cScale"+e]);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScalePeer"+e]=this["cScalePeer"+e]||Cr(this["cScale"+e],10);for(let e=0;e<5;e++)this["surface"+e]=this["surface"+e]||pt(this.mainBkg,{h:30,s:-30,l:-(-10+e*4)}),this["surfacePeer"+e]=this["surfacePeer"+e]||pt(this.mainBkg,{h:30,s:-30,l:-(-7+e*4)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.scaleLabelColor;for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["pie"+e]=this["cScale"+e];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||pt(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||pt(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||pt(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||pt(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||pt(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||pt(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Rs(this.quadrant1Fill)?Cr(this.quadrant1Fill):Fi(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#3498db,#2ecc71,#e74c3c,#f1c40f,#bdc3c7,#ffffff,#34495e,#9b59b6,#1abc9c,#e67e22"},this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.background},this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?Fi(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=Cr(this.secondaryColor,20),this.git1=Cr(this.pie2||this.secondaryColor,20),this.git2=Cr(this.pie3||this.tertiaryColor,20),this.git3=Cr(this.pie4||pt(this.primaryColor,{h:-30}),20),this.git4=Cr(this.pie5||pt(this.primaryColor,{h:-60}),20),this.git5=Cr(this.pie6||pt(this.primaryColor,{h:-90}),10),this.git6=Cr(this.pie7||pt(this.primaryColor,{h:60}),10),this.git7=Cr(this.pie8||pt(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||ui(this.git0),this.gitInv1=this.gitInv1||ui(this.git1),this.gitInv2=this.gitInv2||ui(this.git2),this.gitInv3=this.gitInv3||ui(this.git3),this.gitInv4=this.gitInv4||ui(this.git4),this.gitInv5=this.gitInv5||ui(this.git5),this.gitInv6=this.gitInv6||ui(this.git6),this.gitInv7=this.gitInv7||ui(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||ui(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||ui(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Cr(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Cr(this.background,2),this.nodeBorder=this.nodeBorder||"#999"}calculate(e){if(typeof e!="object"){this.updateColors();return}let t=Object.keys(e);t.forEach(r=>{this[r]=e[r]}),this.updateColors(),t.forEach(r=>{this[r]=e[r]})}},N6=k(e=>{let t=new I6;return t.calculate(e),t},"getThemeVariables"),AA=class{static{k(this,"Theme")}constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=pt(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=pt(this.primaryColor,{h:-160}),this.primaryBorderColor=bo(this.primaryColor,this.darkMode),this.secondaryBorderColor=bo(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=bo(this.tertiaryColor,this.darkMode),this.primaryTextColor=ui(this.primaryColor),this.secondaryTextColor=ui(this.secondaryColor),this.tertiaryTextColor=ui(this.tertiaryColor),this.lineColor=ui(this.background),this.textColor=ui(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="rgba(232,232,232, 0.8)",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.sectionBkgColor=Nn(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||pt(this.primaryColor,{h:30}),this.cScale4=this.cScale4||pt(this.primaryColor,{h:60}),this.cScale5=this.cScale5||pt(this.primaryColor,{h:90}),this.cScale6=this.cScale6||pt(this.primaryColor,{h:120}),this.cScale7=this.cScale7||pt(this.primaryColor,{h:150}),this.cScale8=this.cScale8||pt(this.primaryColor,{h:210}),this.cScale9=this.cScale9||pt(this.primaryColor,{h:270}),this.cScale10=this.cScale10||pt(this.primaryColor,{h:300}),this.cScale11=this.cScale11||pt(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||Fi(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||Fi(this.tertiaryColor,40);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScale"+e]=Fi(this["cScale"+e],10),this["cScalePeer"+e]=this["cScalePeer"+e]||Fi(this["cScale"+e],25);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||pt(this["cScale"+e],{h:180});for(let e=0;e<5;e++)this["surface"+e]=this["surface"+e]||pt(this.mainBkg,{h:30,l:-(5+e*5)}),this["surfacePeer"+e]=this["surfacePeer"+e]||pt(this.mainBkg,{h:30,l:-(7+e*5)});if(this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,this.labelTextColor!=="calculated"){this.cScaleLabel0=this.cScaleLabel0||ui(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||ui(this.labelTextColor);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=Cr(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=pt(this.primaryColor,{h:64}),this.fillType3=pt(this.secondaryColor,{h:64}),this.fillType4=pt(this.primaryColor,{h:-64}),this.fillType5=pt(this.secondaryColor,{h:-64}),this.fillType6=pt(this.primaryColor,{h:128}),this.fillType7=pt(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||pt(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||pt(this.primaryColor,{l:-10}),this.pie5=this.pie5||pt(this.secondaryColor,{l:-30}),this.pie6=this.pie6||pt(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||pt(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||pt(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||pt(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||pt(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||pt(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||pt(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||pt(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||pt(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||pt(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||pt(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||pt(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||pt(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Rs(this.quadrant1Fill)?Cr(this.quadrant1Fill):Fi(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#ECECFF,#8493A6,#FFC3A0,#DCDDE1,#B8E994,#D1A36F,#C3CDE6,#FFB6C1,#496078,#F8F3E3"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||pt(this.primaryColor,{h:-30}),this.git4=this.git4||pt(this.primaryColor,{h:-60}),this.git5=this.git5||pt(this.primaryColor,{h:-90}),this.git6=this.git6||pt(this.primaryColor,{h:60}),this.git7=this.git7||pt(this.primaryColor,{h:120}),this.darkMode?(this.git0=Cr(this.git0,25),this.git1=Cr(this.git1,25),this.git2=Cr(this.git2,25),this.git3=Cr(this.git3,25),this.git4=Cr(this.git4,25),this.git5=Cr(this.git5,25),this.git6=Cr(this.git6,25),this.git7=Cr(this.git7,25)):(this.git0=Fi(this.git0,25),this.git1=Fi(this.git1,25),this.git2=Fi(this.git2,25),this.git3=Fi(this.git3,25),this.git4=Fi(this.git4,25),this.git5=Fi(this.git5,25),this.git6=Fi(this.git6,25),this.git7=Fi(this.git7,25)),this.gitInv0=this.gitInv0||Fi(ui(this.git0),25),this.gitInv1=this.gitInv1||ui(this.git1),this.gitInv2=this.gitInv2||ui(this.git2),this.gitInv3=this.gitInv3||ui(this.git3),this.gitInv4=this.gitInv4||ui(this.git4),this.gitInv5=this.gitInv5||ui(this.git5),this.gitInv6=this.gitInv6||ui(this.git6),this.gitInv7=this.gitInv7||ui(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||ui(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||ui(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Fy,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Pg}calculate(e){if(typeof e!="object"){this.updateColors();return}let t=Object.keys(e);t.forEach(r=>{this[r]=e[r]}),this.updateColors(),t.forEach(r=>{this[r]=e[r]})}},Tb=k(e=>{let t=new AA;return t.calculate(e),t},"getThemeVariables"),MA=class{static{k(this,"Theme")}constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=Cr("#cde498",10),this.primaryBorderColor=bo(this.primaryColor,this.darkMode),this.secondaryBorderColor=bo(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=bo(this.tertiaryColor,this.darkMode),this.primaryTextColor=ui(this.primaryColor),this.secondaryTextColor=ui(this.secondaryColor),this.tertiaryTextColor=ui(this.primaryColor),this.lineColor=ui(this.background),this.textColor=ui(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.actorBorder=Fi(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||pt(this.primaryColor,{h:30}),this.cScale4=this.cScale4||pt(this.primaryColor,{h:60}),this.cScale5=this.cScale5||pt(this.primaryColor,{h:90}),this.cScale6=this.cScale6||pt(this.primaryColor,{h:120}),this.cScale7=this.cScale7||pt(this.primaryColor,{h:150}),this.cScale8=this.cScale8||pt(this.primaryColor,{h:210}),this.cScale9=this.cScale9||pt(this.primaryColor,{h:270}),this.cScale10=this.cScale10||pt(this.primaryColor,{h:300}),this.cScale11=this.cScale11||pt(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||Fi(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||Fi(this.tertiaryColor,40);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScale"+e]=Fi(this["cScale"+e],10),this["cScalePeer"+e]=this["cScalePeer"+e]||Fi(this["cScale"+e],25);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||pt(this["cScale"+e],{h:180});this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.scaleLabelColor;for(let e=0;e<5;e++)this["surface"+e]=this["surface"+e]||pt(this.mainBkg,{h:30,s:-30,l:-(5+e*5)}),this["surfacePeer"+e]=this["surfacePeer"+e]||pt(this.mainBkg,{h:30,s:-30,l:-(8+e*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=pt(this.primaryColor,{h:64}),this.fillType3=pt(this.secondaryColor,{h:64}),this.fillType4=pt(this.primaryColor,{h:-64}),this.fillType5=pt(this.secondaryColor,{h:-64}),this.fillType6=pt(this.primaryColor,{h:128}),this.fillType7=pt(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||pt(this.primaryColor,{l:-30}),this.pie5=this.pie5||pt(this.secondaryColor,{l:-30}),this.pie6=this.pie6||pt(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||pt(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||pt(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||pt(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||pt(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||pt(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||pt(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||pt(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||pt(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||pt(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||pt(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||pt(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||pt(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Rs(this.quadrant1Fill)?Cr(this.quadrant1Fill):Fi(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.mainBkg},this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#CDE498,#FF6B6B,#A0D2DB,#D7BDE2,#F0F0F0,#FFC3A0,#7FD8BE,#FF9A8B,#FAF3E0,#FFF176"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||pt(this.primaryColor,{h:-30}),this.git4=this.git4||pt(this.primaryColor,{h:-60}),this.git5=this.git5||pt(this.primaryColor,{h:-90}),this.git6=this.git6||pt(this.primaryColor,{h:60}),this.git7=this.git7||pt(this.primaryColor,{h:120}),this.darkMode?(this.git0=Cr(this.git0,25),this.git1=Cr(this.git1,25),this.git2=Cr(this.git2,25),this.git3=Cr(this.git3,25),this.git4=Cr(this.git4,25),this.git5=Cr(this.git5,25),this.git6=Cr(this.git6,25),this.git7=Cr(this.git7,25)):(this.git0=Fi(this.git0,25),this.git1=Fi(this.git1,25),this.git2=Fi(this.git2,25),this.git3=Fi(this.git3,25),this.git4=Fi(this.git4,25),this.git5=Fi(this.git5,25),this.git6=Fi(this.git6,25),this.git7=Fi(this.git7,25)),this.gitInv0=this.gitInv0||ui(this.git0),this.gitInv1=this.gitInv1||ui(this.git1),this.gitInv2=this.gitInv2||ui(this.git2),this.gitInv3=this.gitInv3||ui(this.git3),this.gitInv4=this.gitInv4||ui(this.git4),this.gitInv5=this.gitInv5||ui(this.git5),this.gitInv6=this.gitInv6||ui(this.git6),this.gitInv7=this.gitInv7||ui(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||ui(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||ui(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Fy,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Pg}calculate(e){if(typeof e!="object"){this.updateColors();return}let t=Object.keys(e);t.forEach(r=>{this[r]=e[r]}),this.updateColors(),t.forEach(r=>{this[r]=e[r]})}},O6=k(e=>{let t=new MA;return t.calculate(e),t},"getThemeVariables"),f0=class{static{k(this,"Theme")}constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=Cr(this.contrast,55),this.background="#ffffff",this.tertiaryColor=pt(this.primaryColor,{h:-160}),this.primaryBorderColor=bo(this.primaryColor,this.darkMode),this.secondaryBorderColor=bo(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=bo(this.tertiaryColor,this.darkMode),this.primaryTextColor=ui(this.primaryColor),this.secondaryTextColor=ui(this.secondaryColor),this.tertiaryTextColor=ui(this.tertiaryColor),this.lineColor=ui(this.background),this.textColor=ui(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor=this.actorBorder,this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.secondBkg=Cr(this.contrast,55),this.border2=this.contrast,this.actorBorder=Cr(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.actorBorder,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||ui(this["cScale"+e]);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this.darkMode?this["cScalePeer"+e]=this["cScalePeer"+e]||Cr(this["cScale"+e],10):this["cScalePeer"+e]=this["cScalePeer"+e]||Fi(this["cScale"+e],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.scaleLabelColor;for(let e=0;e<5;e++)this["surface"+e]=this["surface"+e]||pt(this.mainBkg,{l:-(5+e*5)}),this["surfacePeer"+e]=this["surfacePeer"+e]||pt(this.mainBkg,{l:-(8+e*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.sectionBkgColor=Cr(this.contrast,30),this.sectionBkgColor2=Cr(this.contrast,30),this.taskBorderColor=Fi(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=Cr(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=Fi(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=pt(this.primaryColor,{h:64}),this.fillType3=pt(this.secondaryColor,{h:64}),this.fillType4=pt(this.primaryColor,{h:-64}),this.fillType5=pt(this.secondaryColor,{h:-64}),this.fillType6=pt(this.primaryColor,{h:128}),this.fillType7=pt(this.secondaryColor,{h:128});for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["pie"+e]=this["cScale"+e];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||pt(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||pt(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||pt(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||pt(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||pt(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||pt(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Rs(this.quadrant1Fill)?Cr(this.quadrant1Fill):Fi(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#EEE,#6BB8E4,#8ACB88,#C7ACD6,#E8DCC2,#FFB2A8,#FFF380,#7E8D91,#FFD8B1,#FAF3E0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=Fi(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||pt(this.primaryColor,{h:-30}),this.git4=this.pie5||pt(this.primaryColor,{h:-60}),this.git5=this.pie6||pt(this.primaryColor,{h:-90}),this.git6=this.pie7||pt(this.primaryColor,{h:60}),this.git7=this.pie8||pt(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||ui(this.git0),this.gitInv1=this.gitInv1||ui(this.git1),this.gitInv2=this.gitInv2||ui(this.git2),this.gitInv3=this.gitInv3||ui(this.git3),this.gitInv4=this.gitInv4||ui(this.git4),this.gitInv5=this.gitInv5||ui(this.git5),this.gitInv6=this.gitInv6||ui(this.git6),this.gitInv7=this.gitInv7||ui(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Fy,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Pg}calculate(e){if(typeof e!="object"){this.updateColors();return}let t=Object.keys(e);t.forEach(r=>{this[r]=e[r]}),this.updateColors(),t.forEach(r=>{this[r]=e[r]})}},LA=k(e=>{let t=new f0;return t.calculate(e),t},"getThemeVariables"),xc={base:{getThemeVariables:Np},dark:{getThemeVariables:N6},default:{getThemeVariables:Tb},forest:{getThemeVariables:O6},neutral:{getThemeVariables:LA}},dd={flowchart:{useMaxWidth:!0,titleTopMargin:25,subGraphTitleMargin:{top:0,bottom:0},diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,defaultRenderer:"dagre-wrapper",wrappingWidth:200},sequence:{useMaxWidth:!0,hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20},gantt:{useMaxWidth:!0,titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",topAxis:!1,displayMode:"",weekday:"sunday"},journey:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"]},class:{useMaxWidth:!0,titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,defaultRenderer:"dagre-wrapper",htmlLabels:!1,hideEmptyMembersBox:!1},state:{useMaxWidth:!0,titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,defaultRenderer:"dagre-wrapper"},er:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,stroke:"gray",fill:"honeydew",fontSize:12},pie:{useMaxWidth:!0,textPosition:.75},quadrantChart:{useMaxWidth:!0,chartWidth:500,chartHeight:500,titleFontSize:20,titlePadding:10,quadrantPadding:5,xAxisLabelPadding:5,yAxisLabelPadding:5,xAxisLabelFontSize:16,yAxisLabelFontSize:16,quadrantLabelFontSize:16,quadrantTextTopPadding:5,pointTextPadding:5,pointLabelFontSize:12,pointRadius:5,xAxisPosition:"top",yAxisPosition:"left",quadrantInternalBorderStrokeWidth:1,quadrantExternalBorderStrokeWidth:2},xyChart:{useMaxWidth:!0,width:700,height:500,titleFontSize:20,titlePadding:10,showTitle:!0,xAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},yAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},chartOrientation:"vertical",plotReservedSpacePercent:50},requirement:{useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200},kanban:{useMaxWidth:!0,padding:8,sectionWidth:200,ticketBaseUrl:""},timeline:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},gitGraph:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0,parallelCommits:!1,arrowMarkerAbsolute:!1},c4:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},sankey:{useMaxWidth:!0,width:600,height:400,linkColor:"gradient",nodeAlignment:"justify",showValues:!0,prefix:"",suffix:""},block:{useMaxWidth:!0,padding:8},packet:{useMaxWidth:!0,rowHeight:32,bitWidth:32,bitsPerRow:32,showBits:!0,paddingX:5,paddingY:5},architecture:{useMaxWidth:!0,padding:40,iconSize:80,fontSize:16},theme:"default",look:"classic",handDrawnSeed:0,layout:"dagre",maxTextSize:5e4,maxEdges:500,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize","suppressErrorRendering","maxEdges"],legacyMathML:!1,forceLegacyMathML:!1,deterministicIds:!1,fontSize:16,markdownAutoWrap:!0,suppressErrorRendering:!1},B6={...dd,deterministicIDSeed:void 0,elk:{mergeEdges:!1,nodePlacementStrategy:"BRANDES_KOEPF"},themeCSS:void 0,themeVariables:xc.default.getThemeVariables(),sequence:{...dd.sequence,messageFont:k(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont"),noteFont:k(function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},"noteFont"),actorFont:k(function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}},"actorFont")},class:{hideEmptyMembersBox:!1},gantt:{...dd.gantt,tickInterval:void 0,useWidth:void 0},c4:{...dd.c4,useWidth:void 0,personFont:k(function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},"personFont"),external_personFont:k(function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},"external_personFont"),systemFont:k(function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},"systemFont"),external_systemFont:k(function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},"external_systemFont"),system_dbFont:k(function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},"system_dbFont"),external_system_dbFont:k(function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},"external_system_dbFont"),system_queueFont:k(function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},"system_queueFont"),external_system_queueFont:k(function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},"external_system_queueFont"),containerFont:k(function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},"containerFont"),external_containerFont:k(function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},"external_containerFont"),container_dbFont:k(function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},"container_dbFont"),external_container_dbFont:k(function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},"external_container_dbFont"),container_queueFont:k(function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},"container_queueFont"),external_container_queueFont:k(function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},"external_container_queueFont"),componentFont:k(function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},"componentFont"),external_componentFont:k(function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},"external_componentFont"),component_dbFont:k(function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},"component_dbFont"),external_component_dbFont:k(function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},"external_component_dbFont"),component_queueFont:k(function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},"component_queueFont"),external_component_queueFont:k(function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},"external_component_queueFont"),boundaryFont:k(function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},"boundaryFont"),messageFont:k(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont")},pie:{...dd.pie,useWidth:984},xyChart:{...dd.xyChart,useWidth:void 0},requirement:{...dd.requirement,useWidth:void 0},packet:{...dd.packet}},Eb=k((e,t="")=>Object.keys(e).reduce((r,i)=>Array.isArray(e[i])?r:typeof e[i]=="object"&&e[i]!==null?[...r,t+i,...Eb(e[i],"")]:[...r,t+i],[]),"keyify"),P6=new Set(Eb(B6,"")),ka=B6,Fg=k(e=>{if(Ce.debug("sanitizeDirective called with",e),!(typeof e!="object"||e==null)){if(Array.isArray(e)){e.forEach(t=>Fg(t));return}for(let t of Object.keys(e)){if(Ce.debug("Checking key",t),t.startsWith("__")||t.includes("proto")||t.includes("constr")||!P6.has(t)||e[t]==null){Ce.debug("sanitize deleting key: ",t),delete e[t];continue}if(typeof e[t]=="object"){Ce.debug("sanitizing object",t),Fg(e[t]);continue}let r=["themeCSS","fontFamily","altFontFamily"];for(let i of r)t.includes(i)&&(Ce.debug("sanitizing css option",t),e[t]=F6(e[t]))}if(e.themeVariables)for(let t of Object.keys(e.themeVariables)){let r=e.themeVariables[t];r?.match&&!r.match(/^[\d "#%(),.;A-Za-z]+$/)&&(e.themeVariables[t]="")}Ce.debug("After sanitization",e)}},"sanitizeDirective"),F6=k(e=>{let t=0,r=0;for(let i of e){if(t<r)return"{ /* ERROR: Unbalanced CSS */ }";i==="{"?t++:i==="}"&&r++}return t!==r?"{ /* ERROR: Unbalanced CSS */ }":e},"sanitizeCss"),g0=Object.freeze(ka),Gl=Xs({},g0),Op=[],Bp=Xs({},g0),$y=k((e,t)=>{let r=Xs({},e),i={};for(let n of t)U6(n),i=Xs(i,n);if(r=Xs(r,i),i.theme&&i.theme in xc){let n=Xs({},$6),a=Xs(n.themeVariables||{},i.themeVariables);r.theme&&r.theme in xc&&(r.themeVariables=xc[r.theme].getThemeVariables(a))}return Bp=r,Sb(Bp),Bp},"updateCurrentConfig"),RA=k(e=>(Gl=Xs({},g0),Gl=Xs(Gl,e),e.theme&&xc[e.theme]&&(Gl.themeVariables=xc[e.theme].getThemeVariables(e.themeVariables)),$y(Gl,Op),Gl),"setSiteConfig"),DA=k(e=>{$6=Xs({},e)},"saveConfigFromInitialize"),z6=k(e=>(Gl=Xs(Gl,e),$y(Gl,Op),Gl),"updateSiteConfig"),G6=k(()=>Xs({},Gl),"getSiteConfig"),Pp=k(e=>(Sb(e),Xs(Bp,e),cs()),"setConfig"),cs=k(()=>Xs({},Bp),"getConfig"),U6=k(e=>{e&&(["secure",...Gl.secure??[]].forEach(t=>{Object.hasOwn(e,t)&&(Ce.debug(`Denied attempt to modify a secure key ${t}`,e[t]),delete e[t])}),Object.keys(e).forEach(t=>{t.startsWith("__")&&delete e[t]}),Object.keys(e).forEach(t=>{typeof e[t]=="string"&&(e[t].includes("<")||e[t].includes(">")||e[t].includes("url(data:"))&&delete e[t],typeof e[t]=="object"&&U6(e[t])}))},"sanitize"),j6=k(e=>{Fg(e),e.fontFamily&&!e.themeVariables?.fontFamily&&(e.themeVariables={...e.themeVariables,fontFamily:e.fontFamily}),Op.push(e),$y(Gl,Op)},"addDirective"),$g=k((e=Gl)=>{Op=[],$y(e,Op)},"reset"),zy={LAZY_LOAD_DEPRECATED:"The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead."},zg={},Cb=k(e=>{zg[e]||(Ce.warn(zy[e]),zg[e]=!0)},"issueWarning"),Sb=k(e=>{e&&(e.lazyLoadedDiagrams||e.loadExternalDiagramsAtStartup)&&Cb("LAZY_LOAD_DEPRECATED")},"checkConfig"),bc=/<br\s*\/?>/gi,Gy=k(e=>e?Fp(e).replace(/\\n/g,"#br#").split("#br#"):[""],"getRows"),Uy=(()=>{let e=!1;return()=>{e||(_b(),e=!0)}})(),k(_b,"setupDompurifyHooks"),Gg=k(e=>(Uy(),ar.sanitize(e)),"removeScript"),Ug=k((e,t)=>{if(t.flowchart?.htmlLabels!==!1){let r=t.securityLevel;r==="antiscript"||r==="strict"?e=Gg(e):r!=="loose"&&(e=Fp(e),e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"),e=e.replace(/=/g,"&equals;"),e=jg(e))}return e},"sanitizeMore"),Da=k((e,t)=>e&&(t.dompurifyConfig?e=ar.sanitize(Ug(e,t),t.dompurifyConfig).toString():e=ar.sanitize(Ug(e,t),{FORBID_TAGS:["style"]}).toString(),e),"sanitizeText"),jy=k((e,t)=>typeof e=="string"?Da(e,t):e.flat().map(r=>Da(r,t)),"sanitizeTextOrArray"),Cu=k(e=>bc.test(e),"hasBreaks"),Ih=k(e=>e.split(bc),"splitBreaks"),jg=k(e=>e.replace(/#br#/g,"<br/>"),"placeholderToBreak"),Fp=k(e=>e.replace(bc,"#br#"),"breakToPlaceholder"),Ab=k(e=>{let t="";return e&&(t=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,t=t.replaceAll(/\(/g,"\\("),t=t.replaceAll(/\)/g,"\\)")),t},"getUrl"),es=k(e=>!(e===!1||["false","null","0"].includes(String(e).trim().toLowerCase())),"evaluate"),H6=k(function(...e){let t=e.filter(r=>!isNaN(r));return Math.max(...t)},"getMax"),Hy=k(function(...e){let t=e.filter(r=>!isNaN(r));return Math.min(...t)},"getMin"),_c=k(function(e){let t=e.split(/(,)/),r=[];for(let i=0;i<t.length;i++){let n=t[i];if(n===","&&i>0&&i+1<t.length){let a=t[i-1],s=t[i+1];IA(a,s)&&(n=a+","+s,i++,r.pop())}r.push(V6(n))}return r.join("")},"parseGenericTypes"),Hg=k((e,t)=>Math.max(0,e.split(t).length-1),"countOccurrence"),IA=k((e,t)=>{let r=Hg(e,"~"),i=Hg(t,"~");return r===1&&i===1},"shouldCombineSets"),V6=k(e=>{let t=Hg(e,"~"),r=!1;if(t<=1)return e;t%2!==0&&e.startsWith("~")&&(e=e.substring(1),r=!0);let i=[...e],n=i.indexOf("~"),a=i.lastIndexOf("~");for(;n!==-1&&a!==-1&&n!==a;)i[n]="<",i[a]=">",n=i.indexOf("~"),a=i.lastIndexOf("~");return r&&i.unshift("~"),i.join("")},"processSet"),Mb=k(()=>window.MathMLElement!==void 0,"isMathMLSupported"),Lb=/\$\$(.*)\$\$/g,No=k(e=>(e.match(Lb)?.length??0)>0,"hasKatex"),Vg=k(async(e,t)=>{e=await Wg(e,t);let r=document.createElement("div");r.innerHTML=e,r.id="katex-temp",r.style.visibility="hidden",r.style.position="absolute",r.style.top="0",document.querySelector("body")?.insertAdjacentElement("beforeend",r);let i={width:r.clientWidth,height:r.clientHeight};return r.remove(),i},"calculateMathMLDimensions"),Wg=k(async(e,t)=>{if(!No(e))return e;if(!(Mb()||t.legacyMathML||t.forceLegacyMathML))return e.replace(Lb,"MathML is unsupported in this environment.");let{default:r}=await Promise.resolve().then(()=>(aF(),yi)),i=t.forceLegacyMathML||!Mb()&&t.legacyMathML?"htmlAndMathml":"mathml";return e.split(bc).map(n=>No(n)?`<div style="display: flex; align-items: center; justify-content: center; white-space: nowrap;">${n}</div>`:`<div>${n}</div>`).join("").replace(Lb,(n,a)=>r.renderToString(a,{throwOnError:!0,displayMode:!0,output:i}).replace(/\n/g," ").replace(/<annotation.*<\/annotation>/g,""))},"renderKatex"),zr={getRows:Gy,sanitizeText:Da,sanitizeTextOrArray:jy,hasBreaks:Cu,splitBreaks:Ih,lineBreakRegex:bc,removeScript:Gg,getUrl:Ab,evaluate:es,getMax:H6,getMin:Hy},NA=k(function(e,t){for(let r of t)e.attr(r[0],r[1])},"d3Attrs"),OA=k(function(e,t,r){let i=new Map;return r?(i.set("width","100%"),i.set("style",`max-width: ${t}px;`)):(i.set("height",e),i.set("width",t)),i},"calculateSvgSizeAttrs"),Oo=k(function(e,t,r,i){let n=OA(t,r,i);NA(e,n)},"configureSvgSize"),$p=k(function(e,t,r,i){let n=t.node().getBBox(),a=n.width,s=n.height;Ce.info(`SVG bounds: ${a}x${s}`,n);let u=0,h=0;Ce.info(`Graph bounds: ${u}x${h}`,e),u=a+r*2,h=s+r*2,Ce.info(`Calculated bounds: ${u}x${h}`),Oo(t,h,u,i);let d=`${n.x-r} ${n.y-r} ${n.width+2*r} ${n.height+2*r}`;t.attr("viewBox",d)},"setupGraphViewbox"),Yg={},BA=k((e,t,r)=>{let i="";return e in Yg&&Yg[e]?i=Yg[e](r):Ce.warn(`No theme found for ${e}`),` & {
    font-family: ${r.fontFamily};
    font-size: ${r.fontSize};
    fill: ${r.textColor}
  }

  /* Classes common for multiple diagrams */

  & .error-icon {
    fill: ${r.errorBkgColor};
  }
  & .error-text {
    fill: ${r.errorTextColor};
    stroke: ${r.errorTextColor};
  }

  & .edge-thickness-normal {
    stroke-width: 1px;
  }
  & .edge-thickness-thick {
    stroke-width: 3.5px
  }
  & .edge-pattern-solid {
    stroke-dasharray: 0;
  }
  & .edge-thickness-invisible {
    stroke-width: 0;
    fill: none;
  }
  & .edge-pattern-dashed{
    stroke-dasharray: 3;
  }
  .edge-pattern-dotted {
    stroke-dasharray: 2;
  }

  & .marker {
    fill: ${r.lineColor};
    stroke: ${r.lineColor};
  }
  & .marker.cross {
    stroke: ${r.lineColor};
  }

  & svg {
    font-family: ${r.fontFamily};
    font-size: ${r.fontSize};
  }
   & p {
    margin: 0
   }

  ${i}

  ${t}
`},"getStyles"),W6=k((e,t)=>{t!==void 0&&(Yg[e]=t)},"addStylesForDiagram"),PA=BA,qg={},By(qg,{clear:()=>ho,getAccDescription:()=>Po,getAccTitle:()=>Bo,getDiagramTitle:()=>$o,setAccDescription:()=>_o,setAccTitle:()=>Ks,setDiagramTitle:()=>Fo}),Rb="",Vy="",Db="",Xg=k(e=>Da(e,cs()),"sanitizeText"),ho=k(()=>{Rb="",Db="",Vy=""},"clear"),Ks=k(e=>{Rb=Xg(e).replace(/^\s+/g,"")},"setAccTitle"),Bo=k(()=>Rb,"getAccTitle"),_o=k(e=>{Db=Xg(e).replace(/\n\s+/g,`
`)},"setAccDescription"),Po=k(()=>Db,"getAccDescription"),Fo=k(e=>{Vy=Xg(e)},"setDiagramTitle"),$o=k(()=>Vy,"getDiagramTitle"),Ib=Ce,Kg=ah,at=cs,Wy=Pp,Y6=g0,Nb=k(e=>Da(e,at()),"sanitizeText"),oh=$p,Zg=k(()=>qg,"getCommonDb"),Qg={},Jg=k((e,t,r)=>{Qg[e]&&Ib.warn(`Diagram with id ${e} already registered. Overwriting.`),Qg[e]=t,r&&R6(e,r),W6(e,t.styles),t.injectUtils?.(Ib,Kg,at,Nb,oh,Zg(),()=>{})},"registerDiagram"),Ob=k(e=>{if(e in Qg)return Qg[e];throw new FA(e)},"getDiagram"),FA=class extends Error{static{k(this,"DiagramNotFoundError")}constructor(e){super(`Diagram ${e} not found.`)}}});function m0(e){return typeof e>"u"||e===null}function Bb(e){return typeof e=="object"&&e!==null}function Pb(e){return Array.isArray(e)?e:m0(e)?[]:[e]}function e1(e,t){var r,i,n,a;if(t)for(a=Object.keys(t),r=0,i=a.length;r<i;r+=1)n=a[r],e[n]=t[n];return e}function Fb(e,t){var r="",i;for(i=0;i<t;i+=1)r+=e;return r}function $A(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}function q6(e,t){var r="",i=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(r+='in "'+e.mark.name+'" '),r+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(r+=`

`+e.mark.snippet),i+" "+r):i}function zp(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=q6(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}function $b(e,t,r,i,n){var a="",s="",u=Math.floor(n/2)-1;return i-t>u&&(a=" ... ",t=i-u+a.length),r-i>u&&(s=" ...",r=i+u-s.length),{str:a+e.slice(t,r).replace(/\t/g,"\u2192")+s,pos:i-t+a.length}}function t1(e,t){return Qs.repeat(" ",t-e.length)+e}function X6(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var r=/\r?\n|\r|\0/g,i=[0],n=[],a,s=-1;a=r.exec(e.buffer);)n.push(a.index),i.push(a.index+a[0].length),e.position<=a.index&&s<0&&(s=i.length-2);s<0&&(s=i.length-1);var u="",h,d,p=Math.min(e.line+t.linesAfter,n.length).toString().length,g=t.maxLength-(t.indent+p+3);for(h=1;h<=t.linesBefore&&!(s-h<0);h++)d=$b(e.buffer,i[s-h],n[s-h],e.position-(i[s]-i[s-h]),g),u=Qs.repeat(" ",t.indent)+t1((e.line-h+1).toString(),p)+" | "+d.str+`
`+u;for(d=$b(e.buffer,i[s],n[s],e.position,g),u+=Qs.repeat(" ",t.indent)+t1((e.line+1).toString(),p)+" | "+d.str+`
`,u+=Qs.repeat("-",t.indent+p+3+d.pos)+`^
`,h=1;h<=t.linesAfter&&!(s+h>=n.length);h++)d=$b(e.buffer,i[s+h],n[s+h],e.position-(i[s]-i[s+h]),g),u+=Qs.repeat(" ",t.indent)+t1((e.line+h+1).toString(),p)+" | "+d.str+`
`;return u.replace(/\n$/,"")}function K6(e){var t={};return e!==null&&Object.keys(e).forEach(function(r){e[r].forEach(function(i){t[String(i)]=r})}),t}function zA(e,t){if(t=t||{},Object.keys(t).forEach(function(r){if(o4.indexOf(r)===-1)throw new bl('Unknown option "'+r+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(r){return r},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=K6(t.styleAliases||null),h9.indexOf(this.kind)===-1)throw new bl('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}function Z6(e,t){var r=[];return e[t].forEach(function(i){var n=r.length;r.forEach(function(a,s){a.tag===i.tag&&a.kind===i.kind&&a.multi===i.multi&&(n=s)}),r[n]=i}),r}function GA(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,r;function i(n){n.multi?(e.multi[n.kind].push(n),e.multi.fallback.push(n)):e[n.kind][n.tag]=e.fallback[n.tag]=n}for(k(i,"collectType"),t=0,r=arguments.length;t<r;t+=1)arguments[t].forEach(i);return e}function Gp(e){return this.extend(e)}function UA(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function r1(){return null}function Q6(e){return e===null}function jA(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function J6(e){return e==="true"||e==="True"||e==="TRUE"}function HA(e){return Object.prototype.toString.call(e)==="[object Boolean]"}function zb(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function ek(e){return 48<=e&&e<=55}function i1(e){return 48<=e&&e<=57}function tk(e){if(e===null)return!1;var t=e.length,r=0,i=!1,n;if(!t)return!1;if(n=e[r],(n==="-"||n==="+")&&(n=e[++r]),n==="0"){if(r+1===t)return!0;if(n=e[++r],n==="b"){for(r++;r<t;r++)if(n=e[r],n!=="_"){if(n!=="0"&&n!=="1")return!1;i=!0}return i&&n!=="_"}if(n==="x"){for(r++;r<t;r++)if(n=e[r],n!=="_"){if(!zb(e.charCodeAt(r)))return!1;i=!0}return i&&n!=="_"}if(n==="o"){for(r++;r<t;r++)if(n=e[r],n!=="_"){if(!ek(e.charCodeAt(r)))return!1;i=!0}return i&&n!=="_"}}if(n==="_")return!1;for(;r<t;r++)if(n=e[r],n!=="_"){if(!i1(e.charCodeAt(r)))return!1;i=!0}return!(!i||n==="_")}function Yy(e){var t=e,r=1,i;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),i=t[0],(i==="-"||i==="+")&&(i==="-"&&(r=-1),t=t.slice(1),i=t[0]),t==="0")return 0;if(i==="0"){if(t[1]==="b")return r*parseInt(t.slice(2),2);if(t[1]==="x")return r*parseInt(t.slice(2),16);if(t[1]==="o")return r*parseInt(t.slice(2),8)}return r*parseInt(t,10)}function y0(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!Qs.isNegativeZero(e)}function pd(e){return!(e===null||!Ek.test(e)||e[e.length-1]==="_")}function rk(e){var t,r;return t=e.replace(/_/g,"").toLowerCase(),r=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:r*parseFloat(t,10)}function VA(e,t){var r;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Qs.isNegativeZero(e))return"-0.0";return r=e.toString(10),l4.test(r)?r.replace("e",".e"):r}function WA(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||Qs.isNegativeZero(e))}function Gb(e){return e===null?!1:Ck.exec(e)!==null||Sk.exec(e)!==null}function ik(e){var t,r,i,n,a,s,u,h=0,d=null,p,g,y;if(t=Ck.exec(e),t===null&&(t=Sk.exec(e)),t===null)throw new Error("Date resolve error");if(r=+t[1],i=+t[2]-1,n=+t[3],!t[4])return new Date(Date.UTC(r,i,n));if(a=+t[4],s=+t[5],u=+t[6],t[7]){for(h=t[7].slice(0,3);h.length<3;)h+="0";h=+h}return t[9]&&(p=+t[10],g=+(t[11]||0),d=(p*60+g)*6e4,t[9]==="-"&&(d=-d)),y=new Date(Date.UTC(r,i,n,a,s,u,h)),d&&y.setTime(y.getTime()-d),y}function nk(e){return e.toISOString()}function ak(e){return e==="<<"||e===null}function sk(e){if(e===null)return!1;var t,r,i=0,n=e.length,a=o1;for(r=0;r<n;r++)if(t=a.indexOf(e.charAt(r)),!(t>64)){if(t<0)return!1;i+=6}return i%8===0}function Ub(e){var t,r,i=e.replace(/[\r\n=]/g,""),n=i.length,a=o1,s=0,u=[];for(t=0;t<n;t++)t%4===0&&t&&(u.push(s>>16&255),u.push(s>>8&255),u.push(s&255)),s=s<<6|a.indexOf(i.charAt(t));return r=n%4*6,r===0?(u.push(s>>16&255),u.push(s>>8&255),u.push(s&255)):r===18?(u.push(s>>10&255),u.push(s>>2&255)):r===12&&u.push(s>>4&255),new Uint8Array(u)}function YA(e){var t="",r=0,i,n,a=e.length,s=o1;for(i=0;i<a;i++)i%3===0&&i&&(t+=s[r>>18&63],t+=s[r>>12&63],t+=s[r>>6&63],t+=s[r&63]),r=(r<<8)+e[i];return n=a%3,n===0?(t+=s[r>>18&63],t+=s[r>>12&63],t+=s[r>>6&63],t+=s[r&63]):n===2?(t+=s[r>>10&63],t+=s[r>>4&63],t+=s[r<<2&63],t+=s[64]):n===1&&(t+=s[r>>2&63],t+=s[r<<4&63],t+=s[64],t+=s[64]),t}function ok(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}function lk(e){if(e===null)return!0;var t=[],r,i,n,a,s,u=e;for(r=0,i=u.length;r<i;r+=1){if(n=u[r],s=!1,y9.call(n)!=="[object Object]")return!1;for(a in n)if(Ak.call(n,a))if(!s)s=!0;else return!1;if(!s)return!1;if(t.indexOf(a)===-1)t.push(a);else return!1}return!0}function qA(e){return e!==null?e:[]}function XA(e){if(e===null)return!0;var t,r,i,n,a,s=e;for(a=new Array(s.length),t=0,r=s.length;t<r;t+=1){if(i=s[t],Lk.call(i)!=="[object Object]"||(n=Object.keys(i),n.length!==1))return!1;a[t]=[n[0],i[n[0]]]}return!0}function KA(e){if(e===null)return[];var t,r,i,n,a,s=e;for(a=new Array(s.length),t=0,r=s.length;t<r;t+=1)i=s[t],n=Object.keys(i),a[t]=[n[0],i[n[0]]];return a}function ZA(e){if(e===null)return!0;var t,r=e;for(t in r)if(p4.call(r,t)&&r[t]!==null)return!1;return!0}function Up(e){return e!==null?e:{}}function n1(e){return Object.prototype.toString.call(e)}function su(e){return e===10||e===13}function wc(e){return e===9||e===32}function xl(e){return e===9||e===32||e===10||e===13}function jp(e){return e===44||e===91||e===93||e===123||e===125}function QA(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function JA(e){return e===120?2:e===117?4:e===85?8:0}function e9(e){return 48<=e&&e<=57?e-48:-1}function jb(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"\x85":e===95?"\xA0":e===76?"\u2028":e===80?"\u2029":""}function uk(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}function t9(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||Rk,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Hp(e,t){var r={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return r.snippet=s4(r),new bl(t,r)}function Ji(e,t){throw Hp(e,t)}function a1(e,t){e.onWarning&&e.onWarning.call(null,Hp(e,t))}function fd(e,t,r,i){var n,a,s,u;if(t<r){if(u=e.input.slice(t,r),i)for(n=0,a=u.length;n<a;n+=1)s=u.charCodeAt(n),s===9||32<=s&&s<=1114111||Ji(e,"expected valid JSON character");else x9.test(u)&&Ji(e,"the stream contains non-printable characters");e.result+=u}}function Hb(e,t,r,i){var n,a,s,u;for(Qs.isObject(r)||Ji(e,"cannot merge mappings; the provided source object is unacceptable"),n=Object.keys(r),s=0,u=n.length;s<u;s+=1)a=n[s],Ec.call(t,a)||(t[a]=r[a],i[a]=!0)}function Cs(e,t,r,i,n,a,s,u,h){var d,p;if(Array.isArray(n))for(n=Array.prototype.slice.call(n),d=0,p=n.length;d<p;d+=1)Array.isArray(n[d])&&Ji(e,"nested arrays are not supported inside keys"),typeof n=="object"&&n1(n[d])==="[object Object]"&&(n[d]="[object Object]");if(typeof n=="object"&&n1(n)==="[object Object]"&&(n="[object Object]"),n=String(n),t===null&&(t={}),i==="tag:yaml.org,2002:merge")if(Array.isArray(a))for(d=0,p=a.length;d<p;d+=1)Hb(e,t,a[d],r);else Hb(e,t,a,r);else!e.json&&!Ec.call(r,n)&&Ec.call(t,n)&&(e.line=s||e.line,e.lineStart=u||e.lineStart,e.position=h||e.position,Ji(e,"duplicated mapping key")),n==="__proto__"?Object.defineProperty(t,n,{configurable:!0,enumerable:!0,writable:!0,value:a}):t[n]=a,delete r[n];return t}function Vb(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):Ji(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function Zs(e,t,r){for(var i=0,n=e.input.charCodeAt(e.position);n!==0;){for(;wc(n);)n===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),n=e.input.charCodeAt(++e.position);if(t&&n===35)do n=e.input.charCodeAt(++e.position);while(n!==10&&n!==13&&n!==0);if(su(n))for(Vb(e),n=e.input.charCodeAt(e.position),i++,e.lineIndent=0;n===32;)e.lineIndent++,n=e.input.charCodeAt(++e.position);else break}return r!==-1&&i!==0&&e.lineIndent<r&&a1(e,"deficient indentation"),i}function qy(e){var t=e.position,r;return r=e.input.charCodeAt(t),!!((r===45||r===46)&&r===e.input.charCodeAt(t+1)&&r===e.input.charCodeAt(t+2)&&(t+=3,r=e.input.charCodeAt(t),r===0||xl(r)))}function Xy(e,t){t===1?e.result+=" ":t>1&&(e.result+=Qs.repeat(`
`,t-1))}function hk(e,t,r){var i,n,a,s,u,h,d,p,g=e.kind,y=e.result,m;if(m=e.input.charCodeAt(e.position),xl(m)||jp(m)||m===35||m===38||m===42||m===33||m===124||m===62||m===39||m===34||m===37||m===64||m===96||(m===63||m===45)&&(n=e.input.charCodeAt(e.position+1),xl(n)||r&&jp(n)))return!1;for(e.kind="scalar",e.result="",a=s=e.position,u=!1;m!==0;){if(m===58){if(n=e.input.charCodeAt(e.position+1),xl(n)||r&&jp(n))break}else if(m===35){if(i=e.input.charCodeAt(e.position-1),xl(i))break}else{if(e.position===e.lineStart&&qy(e)||r&&jp(m))break;if(su(m))if(h=e.line,d=e.lineStart,p=e.lineIndent,Zs(e,!1,-1),e.lineIndent>=t){u=!0,m=e.input.charCodeAt(e.position);continue}else{e.position=s,e.line=h,e.lineStart=d,e.lineIndent=p;break}}u&&(fd(e,a,s,!1),Xy(e,e.line-h),a=s=e.position,u=!1),wc(m)||(s=e.position+1),m=e.input.charCodeAt(++e.position)}return fd(e,a,s,!1),e.result?!0:(e.kind=g,e.result=y,!1)}function r9(e,t){var r,i,n;if(r=e.input.charCodeAt(e.position),r!==39)return!1;for(e.kind="scalar",e.result="",e.position++,i=n=e.position;(r=e.input.charCodeAt(e.position))!==0;)if(r===39)if(fd(e,i,e.position,!0),r=e.input.charCodeAt(++e.position),r===39)i=e.position,e.position++,n=e.position;else return!0;else su(r)?(fd(e,i,n,!0),Xy(e,Zs(e,!1,t)),i=n=e.position):e.position===e.lineStart&&qy(e)?Ji(e,"unexpected end of the document within a single quoted scalar"):(e.position++,n=e.position);Ji(e,"unexpected end of the stream within a single quoted scalar")}function ck(e,t){var r,i,n,a,s,u;if(u=e.input.charCodeAt(e.position),u!==34)return!1;for(e.kind="scalar",e.result="",e.position++,r=i=e.position;(u=e.input.charCodeAt(e.position))!==0;){if(u===34)return fd(e,r,e.position,!0),e.position++,!0;if(u===92){if(fd(e,r,e.position,!0),u=e.input.charCodeAt(++e.position),su(u))Zs(e,!1,t);else if(u<256&&Fk[u])e.result+=$k[u],e.position++;else if((s=JA(u))>0){for(n=s,a=0;n>0;n--)u=e.input.charCodeAt(++e.position),(s=QA(u))>=0?a=(a<<4)+s:Ji(e,"expected hexadecimal character");e.result+=uk(a),e.position++}else Ji(e,"unknown escape sequence");r=i=e.position}else su(u)?(fd(e,r,i,!0),Xy(e,Zs(e,!1,t)),r=i=e.position):e.position===e.lineStart&&qy(e)?Ji(e,"unexpected end of the document within a double quoted scalar"):(e.position++,i=e.position)}Ji(e,"unexpected end of the stream within a double quoted scalar")}function dk(e,t){var r=!0,i,n,a,s=e.tag,u,h=e.anchor,d,p,g,y,m,x=Object.create(null),_,E,w,C;if(C=e.input.charCodeAt(e.position),C===91)p=93,m=!1,u=[];else if(C===123)p=125,m=!0,u={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=u),C=e.input.charCodeAt(++e.position);C!==0;){if(Zs(e,!0,t),C=e.input.charCodeAt(e.position),C===p)return e.position++,e.tag=s,e.anchor=h,e.kind=m?"mapping":"sequence",e.result=u,!0;r?C===44&&Ji(e,"expected the node content, but found ','"):Ji(e,"missed comma between flow collection entries"),E=_=w=null,g=y=!1,C===63&&(d=e.input.charCodeAt(e.position+1),xl(d)&&(g=y=!0,e.position++,Zs(e,!0,t))),i=e.line,n=e.lineStart,a=e.position,kc(e,t,a2,!1,!0),E=e.tag,_=e.result,Zs(e,!0,t),C=e.input.charCodeAt(e.position),(y||e.line===i)&&C===58&&(g=!0,C=e.input.charCodeAt(++e.position),Zs(e,!0,t),kc(e,t,a2,!1,!0),w=e.result),m?Cs(e,u,x,E,_,w,i,n,a):g?u.push(Cs(e,null,x,E,_,w,i,n,a)):u.push(_),Zs(e,!0,t),C=e.input.charCodeAt(e.position),C===44?(r=!0,C=e.input.charCodeAt(++e.position)):r=!1}Ji(e,"unexpected end of the stream within a flow collection")}function i9(e,t){var r,i,n=g4,a=!1,s=!1,u=t,h=0,d=!1,p,g;if(g=e.input.charCodeAt(e.position),g===124)i=!1;else if(g===62)i=!0;else return!1;for(e.kind="scalar",e.result="";g!==0;)if(g=e.input.charCodeAt(++e.position),g===43||g===45)g4===n?n=g===43?Ok:Nk:Ji(e,"repeat of a chomping mode identifier");else if((p=e9(g))>=0)p===0?Ji(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?Ji(e,"repeat of an indentation width identifier"):(u=t+p-1,s=!0);else break;if(wc(g)){do g=e.input.charCodeAt(++e.position);while(wc(g));if(g===35)do g=e.input.charCodeAt(++e.position);while(!su(g)&&g!==0)}for(;g!==0;){for(Vb(e),e.lineIndent=0,g=e.input.charCodeAt(e.position);(!s||e.lineIndent<u)&&g===32;)e.lineIndent++,g=e.input.charCodeAt(++e.position);if(!s&&e.lineIndent>u&&(u=e.lineIndent),su(g)){h++;continue}if(e.lineIndent<u){n===Ok?e.result+=Qs.repeat(`
`,a?1+h:h):n===g4&&a&&(e.result+=`
`);break}for(i?wc(g)?(d=!0,e.result+=Qs.repeat(`
`,a?1+h:h)):d?(d=!1,e.result+=Qs.repeat(`
`,h+1)):h===0?a&&(e.result+=" "):e.result+=Qs.repeat(`
`,h):e.result+=Qs.repeat(`
`,a?1+h:h),a=!0,s=!0,h=0,r=e.position;!su(g)&&g!==0;)g=e.input.charCodeAt(++e.position);fd(e,r,e.position,!1)}return!0}function gd(e,t){var r,i=e.tag,n=e.anchor,a=[],s,u=!1,h;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=a),h=e.input.charCodeAt(e.position);h!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,Ji(e,"tab characters must not be used in indentation")),!(h!==45||(s=e.input.charCodeAt(e.position+1),!xl(s))));){if(u=!0,e.position++,Zs(e,!0,-1)&&e.lineIndent<=t){a.push(null),h=e.input.charCodeAt(e.position);continue}if(r=e.line,kc(e,t,Ik,!1,!0),a.push(e.result),Zs(e,!0,-1),h=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&h!==0)Ji(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return u?(e.tag=i,e.anchor=n,e.kind="sequence",e.result=a,!0):!1}function Ky(e,t,r){var i,n,a,s,u,h,d=e.tag,p=e.anchor,g={},y=Object.create(null),m=null,x=null,_=null,E=!1,w=!1,C;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=g),C=e.input.charCodeAt(e.position);C!==0;){if(!E&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,Ji(e,"tab characters must not be used in indentation")),i=e.input.charCodeAt(e.position+1),a=e.line,(C===63||C===58)&&xl(i))C===63?(E&&(Cs(e,g,y,m,x,null,s,u,h),m=x=_=null),w=!0,E=!0,n=!0):E?(E=!1,n=!0):Ji(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,C=i;else{if(s=e.line,u=e.lineStart,h=e.position,!kc(e,r,Dk,!1,!0))break;if(e.line===a){for(C=e.input.charCodeAt(e.position);wc(C);)C=e.input.charCodeAt(++e.position);if(C===58)C=e.input.charCodeAt(++e.position),xl(C)||Ji(e,"a whitespace character is expected after the key-value separator within a block mapping"),E&&(Cs(e,g,y,m,x,null,s,u,h),m=x=_=null),w=!0,E=!1,n=!1,m=e.tag,x=e.result;else if(w)Ji(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=d,e.anchor=p,!0}else if(w)Ji(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=d,e.anchor=p,!0}if((e.line===a||e.lineIndent>t)&&(E&&(s=e.line,u=e.lineStart,h=e.position),kc(e,t,s2,!0,n)&&(E?x=e.result:_=e.result),E||(Cs(e,g,y,m,x,_,s,u,h),m=x=_=null),Zs(e,!0,-1),C=e.input.charCodeAt(e.position)),(e.line===a||e.lineIndent>t)&&C!==0)Ji(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return E&&Cs(e,g,y,m,x,null,s,u,h),w&&(e.tag=d,e.anchor=p,e.kind="mapping",e.result=g),w}function pk(e){var t,r=!1,i=!1,n,a,s;if(s=e.input.charCodeAt(e.position),s!==33)return!1;if(e.tag!==null&&Ji(e,"duplication of a tag property"),s=e.input.charCodeAt(++e.position),s===60?(r=!0,s=e.input.charCodeAt(++e.position)):s===33?(i=!0,n="!!",s=e.input.charCodeAt(++e.position)):n="!",t=e.position,r){do s=e.input.charCodeAt(++e.position);while(s!==0&&s!==62);e.position<e.length?(a=e.input.slice(t,e.position),s=e.input.charCodeAt(++e.position)):Ji(e,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!xl(s);)s===33&&(i?Ji(e,"tag suffix cannot contain exclamation marks"):(n=e.input.slice(t-1,e.position+1),Bk.test(n)||Ji(e,"named tag handle cannot contain such characters"),i=!0,t=e.position+1)),s=e.input.charCodeAt(++e.position);a=e.input.slice(t,e.position),b9.test(a)&&Ji(e,"tag suffix cannot contain flow indicator characters")}a&&!Pk.test(a)&&Ji(e,"tag name cannot contain such characters: "+a);try{a=decodeURIComponent(a)}catch{Ji(e,"tag name is malformed: "+a)}return r?e.tag=a:Ec.call(e.tagMap,n)?e.tag=e.tagMap[n]+a:n==="!"?e.tag="!"+a:n==="!!"?e.tag="tag:yaml.org,2002:"+a:Ji(e,'undeclared tag handle "'+n+'"'),!0}function fk(e){var t,r;if(r=e.input.charCodeAt(e.position),r!==38)return!1;for(e.anchor!==null&&Ji(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!xl(r)&&!jp(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&Ji(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function Wb(e){var t,r,i;if(i=e.input.charCodeAt(e.position),i!==42)return!1;for(i=e.input.charCodeAt(++e.position),t=e.position;i!==0&&!xl(i)&&!jp(i);)i=e.input.charCodeAt(++e.position);return e.position===t&&Ji(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),Ec.call(e.anchorMap,r)||Ji(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],Zs(e,!0,-1),!0}function kc(e,t,r,i,n){var a,s,u,h=1,d=!1,p=!1,g,y,m,x,_,E;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,a=s=u=s2===r||Ik===r,i&&Zs(e,!0,-1)&&(d=!0,e.lineIndent>t?h=1:e.lineIndent===t?h=0:e.lineIndent<t&&(h=-1)),h===1)for(;pk(e)||fk(e);)Zs(e,!0,-1)?(d=!0,u=a,e.lineIndent>t?h=1:e.lineIndent===t?h=0:e.lineIndent<t&&(h=-1)):u=!1;if(u&&(u=d||n),(h===1||s2===r)&&(a2===r||Dk===r?_=t:_=t+1,E=e.position-e.lineStart,h===1?u&&(gd(e,E)||Ky(e,E,_))||dk(e,_)?p=!0:(s&&i9(e,_)||r9(e,_)||ck(e,_)?p=!0:Wb(e)?(p=!0,(e.tag!==null||e.anchor!==null)&&Ji(e,"alias node should not have any properties")):hk(e,_,a2===r)&&(p=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):h===0&&(p=u&&gd(e,E))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&Ji(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),g=0,y=e.implicitTypes.length;g<y;g+=1)if(x=e.implicitTypes[g],x.resolve(e.result)){e.result=x.construct(e.result),e.tag=x.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(Ec.call(e.typeMap[e.kind||"fallback"],e.tag))x=e.typeMap[e.kind||"fallback"][e.tag];else for(x=null,m=e.typeMap.multi[e.kind||"fallback"],g=0,y=m.length;g<y;g+=1)if(e.tag.slice(0,m[g].tag.length)===m[g].tag){x=m[g];break}x||Ji(e,"unknown tag !<"+e.tag+">"),e.result!==null&&x.kind!==e.kind&&Ji(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+x.kind+'", not "'+e.kind+'"'),x.resolve(e.result,e.tag)?(e.result=x.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):Ji(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||p}function Su(e){var t=e.position,r,i,n,a=!1,s;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(s=e.input.charCodeAt(e.position))!==0&&(Zs(e,!0,-1),s=e.input.charCodeAt(e.position),!(e.lineIndent>0||s!==37));){for(a=!0,s=e.input.charCodeAt(++e.position),r=e.position;s!==0&&!xl(s);)s=e.input.charCodeAt(++e.position);for(i=e.input.slice(r,e.position),n=[],i.length<1&&Ji(e,"directive name must not be less than one character in length");s!==0;){for(;wc(s);)s=e.input.charCodeAt(++e.position);if(s===35){do s=e.input.charCodeAt(++e.position);while(s!==0&&!su(s));break}if(su(s))break;for(r=e.position;s!==0&&!xl(s);)s=e.input.charCodeAt(++e.position);n.push(e.input.slice(r,e.position))}s!==0&&Vb(e),Ec.call(zk,i)?zk[i](e,i,n):a1(e,'unknown document directive "'+i+'"')}if(Zs(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,Zs(e,!0,-1)):a&&Ji(e,"directives end mark is expected"),kc(e,e.lineIndent-1,s2,!1,!0),Zs(e,!0,-1),e.checkLineBreaks&&l1.test(e.input.slice(t,e.position))&&a1(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&qy(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,Zs(e,!0,-1));return}if(e.position<e.length-1)Ji(e,"end of the stream or a document separator is expected");else return}function Yb(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var r=new t9(e,t),i=e.indexOf("\0");for(i!==-1&&(r.position=i,Ji(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)Su(r);return r.documents}function gk(e,t,r){t!==null&&typeof t=="object"&&typeof r>"u"&&(r=t,t=null);var i=Yb(e,r);if(typeof t!="function")return i;for(var n=0,a=i.length;n<a;n+=1)t(i[n])}function mk(e,t){var r=Yb(e,t);if(r.length!==0){if(r.length===1)return r[0];throw new bl("expected a single document in the stream, but found more")}}function n9(e,t){var r,i,n,a,s,u,h;if(t===null)return{};for(r={},i=Object.keys(t),n=0,a=i.length;n<a;n+=1)s=i[n],u=String(t[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),h=e.compiledTypeMap.fallback[s],h&&jk.call(h.styleAliases,u)&&(u=h.styleAliases[u]),r[s]=u;return r}function a9(e){var t,r,i;if(t=e.toString(16).toUpperCase(),e<=255)r="x",i=2;else if(e<=65535)r="u",i=4;else if(e<=4294967295)r="U",i=8;else throw new bl("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+Qs.repeat("0",i-t.length)+t}function qb(e){this.schema=e.schema||Rk,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=Qs.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=n9(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?c1:Jk,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Xb(e,t){for(var r=Qs.repeat(" ",t),i=0,n=-1,a="",s,u=e.length;i<u;)n=e.indexOf(`
`,i),n===-1?(s=e.slice(i),i=u):(s=e.slice(i,n+1),i=n+1),s.length&&s!==`
`&&(a+=r),a+=s;return a}function Kb(e,t){return`
`+Qs.repeat(" ",e.indent*t)}function Zy(e,t){var r,i,n;for(r=0,i=e.implicitTypes.length;r<i;r+=1)if(n=e.implicitTypes[r],n.resolve(t))return!0;return!1}function ou(e){return e===Yp||e===m4}function Tc(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==o2||65536<=e&&e<=1114111}function Zb(e){return Tc(e)&&e!==o2&&e!==y4&&e!==md}function Qb(e,t,r){var i=Zb(e),n=i&&!ou(e);return(r?i:i&&e!==u2&&e!==Xk&&e!==Kk&&e!==Zk&&e!==c2)&&e!==v0&&!(t===h2&&!n)||Zb(t)&&!ou(t)&&e===v0||t===h2&&n}function yk(e){return Tc(e)&&e!==o2&&!ou(e)&&e!==Yk&&e!==T9&&e!==h2&&e!==u2&&e!==Xk&&e!==Kk&&e!==Zk&&e!==c2&&e!==v0&&e!==Wk&&e!==v4&&e!==Hk&&e!==h1&&e!==qk&&e!==k9&&e!==w9&&e!==l2&&e!==Vk&&e!==E9&&e!==C9}function Qy(e){return!ou(e)&&e!==h2}function Vp(e,t){var r=e.charCodeAt(t),i;return r>=55296&&r<=56319&&t+1<e.length&&(i=e.charCodeAt(t+1),i>=56320&&i<=57343)?(r-55296)*1024+i-56320+65536:r}function Jy(e){var t=/^\n* /;return t.test(e)}function e2(e,t,r,i,n,a,s,u){var h,d=0,p=null,g=!1,y=!1,m=i!==-1,x=-1,_=yk(Vp(e,0))&&Qy(Vp(e,e.length-1));if(t||s)for(h=0;h<e.length;d>=65536?h+=2:h++){if(d=Vp(e,h),!Tc(d))return qp;_=_&&Qb(d,p,u),p=d}else{for(h=0;h<e.length;d>=65536?h+=2:h++){if(d=Vp(e,h),d===md)g=!0,m&&(y=y||h-x-1>i&&e[x+1]!==" ",x=h);else if(!Tc(d))return qp;_=_&&Qb(d,p,u),p=d}y=y||m&&h-x-1>i&&e[x+1]!==" "}return!g&&!y?_&&!s&&!n(e)?d2:a===c1?qp:p2:r>9&&Jy(e)?qp:s?a===c1?qp:p2:y?f2:eT}function Au(e,t,r,i,n){e.dump=function(){if(t.length===0)return e.quotingType===c1?'""':"''";if(!e.noCompatMode&&(Qk.indexOf(t)!==-1||x4.test(t)))return e.quotingType===c1?'"'+t+'"':"'"+t+"'";var a=e.indent*Math.max(1,r),s=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-a),u=i||e.flowLevel>-1&&r>=e.flowLevel;function h(d){return Zy(e,d)}switch(k(h,"testAmbiguity"),e2(t,u,e.indent,s,h,e.quotingType,e.forceQuotes&&!i,n)){case d2:return t;case p2:return"'"+t.replace(/'/g,"''")+"'";case eT:return"|"+lh(t,e.indent)+t2(Xb(t,a));case f2:return">"+lh(t,e.indent)+t2(Xb(r2(t,s),a));case qp:return'"'+e4(t)+'"';default:throw new bl("impossible error: invalid scalar style")}}()}function lh(e,t){var r=Jy(e)?String(t):"",i=e[e.length-1]===`
`,n=i&&(e[e.length-2]===`
`||e===`
`),a=n?"+":i?"":"-";return r+a+`
`}function t2(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function r2(e,t){for(var r=/(\n+)([^\n]*)/g,i=function(){var d=e.indexOf(`
`);return d=d!==-1?d:e.length,r.lastIndex=d,Jb(e.slice(0,d),t)}(),n=e[0]===`
`||e[0]===" ",a,s;s=r.exec(e);){var u=s[1],h=s[2];a=h[0]===" ",i+=u+(!n&&!a&&h!==""?`
`:"")+Jb(h,t),n=a}return i}function Jb(e,t){if(e===""||e[0]===" ")return e;for(var r=/ [^ ]/g,i,n=0,a,s=0,u=0,h="";i=r.exec(e);)u=i.index,u-n>t&&(a=s>n?s:u,h+=`
`+e.slice(n,a),n=a+1),s=u;return h+=`
`,e.length-n>t&&s>n?h+=e.slice(n,s)+`
`+e.slice(s+1):h+=e.slice(n),h.slice(1)}function e4(e){for(var t="",r=0,i,n=0;n<e.length;r>=65536?n+=2:n++)r=Vp(e,n),i=nl[r],!i&&Tc(r)?(t+=e[n],r>=65536&&(t+=e[n+1])):t+=i||a9(r);return t}function s9(e,t,r){var i="",n=e.tag,a,s,u;for(a=0,s=r.length;a<s;a+=1)u=r[a],e.replacer&&(u=e.replacer.call(r,String(a),u)),(Nh(e,t,u,!1,!1)||typeof u>"u"&&Nh(e,t,null,!1,!1))&&(i!==""&&(i+=","+(e.condenseFlow?"":" ")),i+=e.dump);e.tag=n,e.dump="["+i+"]"}function t4(e,t,r,i){var n="",a=e.tag,s,u,h;for(s=0,u=r.length;s<u;s+=1)h=r[s],e.replacer&&(h=e.replacer.call(r,String(s),h)),(Nh(e,t+1,h,!0,!0,!1,!0)||typeof h>"u"&&Nh(e,t+1,null,!0,!0,!1,!0))&&((!i||n!=="")&&(n+=Kb(e,t)),e.dump&&md===e.dump.charCodeAt(0)?n+="-":n+="- ",n+=e.dump);e.tag=a,e.dump=n||"[]"}function i2(e,t,r){var i="",n=e.tag,a=Object.keys(r),s,u,h,d,p;for(s=0,u=a.length;s<u;s+=1)p="",i!==""&&(p+=", "),e.condenseFlow&&(p+='"'),h=a[s],d=r[h],e.replacer&&(d=e.replacer.call(r,h,d)),Nh(e,t,h,!1,!1)&&(e.dump.length>1024&&(p+="? "),p+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),Nh(e,t,d,!1,!1)&&(p+=e.dump,i+=p));e.tag=n,e.dump="{"+i+"}"}function vk(e,t,r,i){var n="",a=e.tag,s=Object.keys(r),u,h,d,p,g,y;if(e.sortKeys===!0)s.sort();else if(typeof e.sortKeys=="function")s.sort(e.sortKeys);else if(e.sortKeys)throw new bl("sortKeys must be a boolean or a function");for(u=0,h=s.length;u<h;u+=1)y="",(!i||n!=="")&&(y+=Kb(e,t)),d=s[u],p=r[d],e.replacer&&(p=e.replacer.call(r,d,p)),Nh(e,t+1,d,!0,!0,!0)&&(g=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,g&&(e.dump&&md===e.dump.charCodeAt(0)?y+="?":y+="? "),y+=e.dump,g&&(y+=Kb(e,t)),Nh(e,t+1,p,!0,g)&&(e.dump&&md===e.dump.charCodeAt(0)?y+=":":y+=": ",y+=e.dump,n+=y));e.tag=a,e.dump=n||"{}"}function r4(e,t,r){var i,n,a,s,u,h;for(n=r?e.explicitTypes:e.implicitTypes,a=0,s=n.length;a<s;a+=1)if(u=n[a],(u.instanceOf||u.predicate)&&(!u.instanceOf||typeof t=="object"&&t instanceof u.instanceOf)&&(!u.predicate||u.predicate(t))){if(r?u.multi&&u.representName?e.tag=u.representName(t):e.tag=u.tag:e.tag="?",u.represent){if(h=e.styleMap[u.tag]||u.defaultStyle,u1.call(u.represent)==="[object Function]")i=u.represent(t,h);else if(jk.call(u.represent,h))i=u.represent[h](t,h);else throw new bl("!<"+u.tag+'> tag resolver accepts not "'+h+'" style');e.dump=i}return!0}return!1}function Nh(e,t,r,i,n,a,s){e.tag=null,e.dump=r,r4(e,r,!1)||r4(e,r,!0);var u=u1.call(e.dump),h=i,d;i&&(i=e.flowLevel<0||e.flowLevel>t);var p=u==="[object Object]"||u==="[object Array]",g,y;if(p&&(g=e.duplicates.indexOf(r),y=g!==-1),(e.tag!==null&&e.tag!=="?"||y||e.indent!==2&&t>0)&&(n=!1),y&&e.usedDuplicates[g])e.dump="*ref_"+g;else{if(p&&y&&!e.usedDuplicates[g]&&(e.usedDuplicates[g]=!0),u==="[object Object]")i&&Object.keys(e.dump).length!==0?(vk(e,t,e.dump,n),y&&(e.dump="&ref_"+g+e.dump)):(i2(e,t,e.dump),y&&(e.dump="&ref_"+g+" "+e.dump));else if(u==="[object Array]")i&&e.dump.length!==0?(e.noArrayIndent&&!s&&t>0?t4(e,t-1,e.dump,n):t4(e,t,e.dump,n),y&&(e.dump="&ref_"+g+e.dump)):(s9(e,t,e.dump),y&&(e.dump="&ref_"+g+" "+e.dump));else if(u==="[object String]")e.tag!=="?"&&Au(e,e.dump,t,a,h);else{if(u==="[object Undefined]"||e.skipInvalid)return!1;throw new bl("unacceptable kind of an object to dump "+u)}e.tag!==null&&e.tag!=="?"&&(d=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?d="!"+d:d.slice(0,18)==="tag:yaml.org,2002:"?d="!!"+d.slice(18):d="!<"+d+">",e.dump=d+" "+e.dump)}return!0}function o9(e,t){var r=[],i=[],n,a;for(n2(e,r,i),n=0,a=i.length;n<a;n+=1)t.duplicates.push(r[i[n]]);t.usedDuplicates=new Array(a)}function n2(e,t,r){var i,n,a;if(e!==null&&typeof e=="object")if(n=t.indexOf(e),n!==-1)r.indexOf(n)===-1&&r.push(n);else if(t.push(e),Array.isArray(e))for(n=0,a=e.length;n<a;n+=1)n2(e[n],t,r);else for(i=Object.keys(e),n=0,a=i.length;n<a;n+=1)n2(e[i[n]],t,r)}function xk(e,t){t=t||{};var r=new qb(t);r.noRefs||o9(e,r);var i=e;return r.replacer&&(i=r.replacer.call({"":i},"",i)),Nh(r,0,i,!0,!0)?r.dump+`
`:""}function i4(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var n4,a4,bk,l9,_k,u9,Qs,bl,s4,o4,h9,zo,c9,d9,p9,wk,s1,kk,Tk,f9,Ek,l4,g9,u4,h4,Ck,Sk,m9,c4,o1,d4,Ak,y9,Mk,Lk,v9,p4,f4,Rk,Ec,a2,Dk,Ik,s2,g4,Nk,Ok,x9,l1,b9,Bk,Pk,Fk,$k,Wp,zk,_9,Gk,Uk,u1,jk,o2,m4,md,y4,Yp,Hk,l2,v0,Vk,Wk,w9,v4,u2,Yk,h2,qk,k9,T9,E9,Xk,Kk,C9,Zk,h1,c2,nl,Qk,x4,Jk,c1,d2,p2,eT,f2,qp,tT,b4,_4,w4,S9,A9,sF,oF,lF,k4=D(()=>{for(Qn(),k(m0,"isNothing"),k(Bb,"isObject"),k(Pb,"toArray"),k(e1,"extend"),k(Fb,"repeat"),k($A,"isNegativeZero"),n4=m0,a4=Bb,bk=Pb,l9=Fb,_k=$A,u9=e1,Qs={isNothing:n4,isObject:a4,toArray:bk,repeat:l9,isNegativeZero:_k,extend:u9},k(q6,"formatError"),k(zp,"YAMLException$1"),zp.prototype=Object.create(Error.prototype),zp.prototype.constructor=zp,zp.prototype.toString=k(function(e){return this.name+": "+q6(this,e)},"toString"),bl=zp,k($b,"getLine"),k(t1,"padStart"),k(X6,"makeSnippet"),s4=X6,o4=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],h9=["scalar","sequence","mapping"],k(K6,"compileStyleAliases"),k(zA,"Type$1"),zo=zA,k(Z6,"compileList"),k(GA,"compileMap"),k(Gp,"Schema$1"),Gp.prototype.extend=k(function(e){var t=[],r=[];if(e instanceof zo)r.push(e);else if(Array.isArray(e))r=r.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(t=t.concat(e.implicit)),e.explicit&&(r=r.concat(e.explicit));else throw new bl("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");t.forEach(function(n){if(!(n instanceof zo))throw new bl("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(n.loadKind&&n.loadKind!=="scalar")throw new bl("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(n.multi)throw new bl("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(n){if(!(n instanceof zo))throw new bl("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(Gp.prototype);return i.implicit=(this.implicit||[]).concat(t),i.explicit=(this.explicit||[]).concat(r),i.compiledImplicit=Z6(i,"implicit"),i.compiledExplicit=Z6(i,"explicit"),i.compiledTypeMap=GA(i.compiledImplicit,i.compiledExplicit),i},"extend"),c9=Gp,d9=new zo("tag:yaml.org,2002:str",{kind:"scalar",construct:k(function(e){return e!==null?e:""},"construct")}),p9=new zo("tag:yaml.org,2002:seq",{kind:"sequence",construct:k(function(e){return e!==null?e:[]},"construct")}),wk=new zo("tag:yaml.org,2002:map",{kind:"mapping",construct:k(function(e){return e!==null?e:{}},"construct")}),s1=new c9({explicit:[d9,p9,wk]}),k(UA,"resolveYamlNull"),k(r1,"constructYamlNull"),k(Q6,"isNull"),kk=new zo("tag:yaml.org,2002:null",{kind:"scalar",resolve:UA,construct:r1,predicate:Q6,represent:{canonical:k(function(){return"~"},"canonical"),lowercase:k(function(){return"null"},"lowercase"),uppercase:k(function(){return"NULL"},"uppercase"),camelcase:k(function(){return"Null"},"camelcase"),empty:k(function(){return""},"empty")},defaultStyle:"lowercase"}),k(jA,"resolveYamlBoolean"),k(J6,"constructYamlBoolean"),k(HA,"isBoolean"),Tk=new zo("tag:yaml.org,2002:bool",{kind:"scalar",resolve:jA,construct:J6,predicate:HA,represent:{lowercase:k(function(e){return e?"true":"false"},"lowercase"),uppercase:k(function(e){return e?"TRUE":"FALSE"},"uppercase"),camelcase:k(function(e){return e?"True":"False"},"camelcase")},defaultStyle:"lowercase"}),k(zb,"isHexCode"),k(ek,"isOctCode"),k(i1,"isDecCode"),k(tk,"resolveYamlInteger"),k(Yy,"constructYamlInteger"),k(y0,"isInteger"),f9=new zo("tag:yaml.org,2002:int",{kind:"scalar",resolve:tk,construct:Yy,predicate:y0,represent:{binary:k(function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},"binary"),octal:k(function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},"octal"),decimal:k(function(e){return e.toString(10)},"decimal"),hexadecimal:k(function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Ek=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),k(pd,"resolveYamlFloat"),k(rk,"constructYamlFloat"),l4=/^[-+]?[0-9]+e/,k(VA,"representYamlFloat"),k(WA,"isFloat"),g9=new zo("tag:yaml.org,2002:float",{kind:"scalar",resolve:pd,construct:rk,predicate:WA,represent:VA,defaultStyle:"lowercase"}),u4=s1.extend({implicit:[kk,Tk,f9,g9]}),h4=u4,Ck=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Sk=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$"),k(Gb,"resolveYamlTimestamp"),k(ik,"constructYamlTimestamp"),k(nk,"representYamlTimestamp"),m9=new zo("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:Gb,construct:ik,instanceOf:Date,represent:nk}),k(ak,"resolveYamlMerge"),c4=new zo("tag:yaml.org,2002:merge",{kind:"scalar",resolve:ak}),o1=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`,k(sk,"resolveYamlBinary"),k(Ub,"constructYamlBinary"),k(YA,"representYamlBinary"),k(ok,"isBinary"),d4=new zo("tag:yaml.org,2002:binary",{kind:"scalar",resolve:sk,construct:Ub,predicate:ok,represent:YA}),Ak=Object.prototype.hasOwnProperty,y9=Object.prototype.toString,k(lk,"resolveYamlOmap"),k(qA,"constructYamlOmap"),Mk=new zo("tag:yaml.org,2002:omap",{kind:"sequence",resolve:lk,construct:qA}),Lk=Object.prototype.toString,k(XA,"resolveYamlPairs"),k(KA,"constructYamlPairs"),v9=new zo("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:XA,construct:KA}),p4=Object.prototype.hasOwnProperty,k(ZA,"resolveYamlSet"),k(Up,"constructYamlSet"),f4=new zo("tag:yaml.org,2002:set",{kind:"mapping",resolve:ZA,construct:Up}),Rk=h4.extend({implicit:[m9,c4],explicit:[d4,Mk,v9,f4]}),Ec=Object.prototype.hasOwnProperty,a2=1,Dk=2,Ik=3,s2=4,g4=1,Nk=2,Ok=3,x9=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,l1=/[\x85\u2028\u2029]/,b9=/[,\[\]\{\}]/,Bk=/^(?:!|!!|![a-z\-]+!)$/i,Pk=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i,k(n1,"_class"),k(su,"is_EOL"),k(wc,"is_WHITE_SPACE"),k(xl,"is_WS_OR_EOL"),k(jp,"is_FLOW_INDICATOR"),k(QA,"fromHexCode"),k(JA,"escapedHexLen"),k(e9,"fromDecimalCode"),k(jb,"simpleEscapeSequence"),k(uk,"charFromCodepoint"),Fk=new Array(256),$k=new Array(256),Wp=0;Wp<256;Wp++)Fk[Wp]=jb(Wp)?1:0,$k[Wp]=jb(Wp);k(t9,"State$1"),k(Hp,"generateError"),k(Ji,"throwError"),k(a1,"throwWarning"),zk={YAML:k(function(e,t,r){var i,n,a;e.version!==null&&Ji(e,"duplication of %YAML directive"),r.length!==1&&Ji(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(r[0]),i===null&&Ji(e,"ill-formed argument of the YAML directive"),n=parseInt(i[1],10),a=parseInt(i[2],10),n!==1&&Ji(e,"unacceptable YAML version of the document"),e.version=r[0],e.checkLineBreaks=a<2,a!==1&&a!==2&&a1(e,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:k(function(e,t,r){var i,n;r.length!==2&&Ji(e,"TAG directive accepts exactly two arguments"),i=r[0],n=r[1],Bk.test(i)||Ji(e,"ill-formed tag handle (first argument) of the TAG directive"),Ec.call(e.tagMap,i)&&Ji(e,'there is a previously declared suffix for "'+i+'" tag handle'),Pk.test(n)||Ji(e,"ill-formed tag prefix (second argument) of the TAG directive");try{n=decodeURIComponent(n)}catch{Ji(e,"tag prefix is malformed: "+n)}e.tagMap[i]=n},"handleTagDirective")},k(fd,"captureSegment"),k(Hb,"mergeMappings"),k(Cs,"storeMappingPair"),k(Vb,"readLineBreak"),k(Zs,"skipSeparationSpace"),k(qy,"testDocumentSeparator"),k(Xy,"writeFoldedLines"),k(hk,"readPlainScalar"),k(r9,"readSingleQuotedScalar"),k(ck,"readDoubleQuotedScalar"),k(dk,"readFlowCollection"),k(i9,"readBlockScalar"),k(gd,"readBlockSequence"),k(Ky,"readBlockMapping"),k(pk,"readTagProperty"),k(fk,"readAnchorProperty"),k(Wb,"readAlias"),k(kc,"composeNode"),k(Su,"readDocument"),k(Yb,"loadDocuments"),k(gk,"loadAll$1"),k(mk,"load$1"),_9=gk,Gk=mk,Uk={loadAll:_9,load:Gk},u1=Object.prototype.toString,jk=Object.prototype.hasOwnProperty,o2=65279,m4=9,md=10,y4=13,Yp=32,Hk=33,l2=34,v0=35,Vk=37,Wk=38,w9=39,v4=42,u2=44,Yk=45,h2=58,qk=61,k9=62,T9=63,E9=64,Xk=91,Kk=93,C9=96,Zk=123,h1=124,c2=125,nl={},nl[0]="\\0",nl[7]="\\a",nl[8]="\\b",nl[9]="\\t",nl[10]="\\n",nl[11]="\\v",nl[12]="\\f",nl[13]="\\r",nl[27]="\\e",nl[34]='\\"',nl[92]="\\\\",nl[133]="\\N",nl[160]="\\_",nl[8232]="\\L",nl[8233]="\\P",Qk=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],x4=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/,k(n9,"compileStyleMap"),k(a9,"encodeHex"),Jk=1,c1=2,k(qb,"State"),k(Xb,"indentString"),k(Kb,"generateNextLine"),k(Zy,"testImplicitResolving"),k(ou,"isWhitespace"),k(Tc,"isPrintable"),k(Zb,"isNsCharOrWhitespace"),k(Qb,"isPlainSafe"),k(yk,"isPlainSafeFirst"),k(Qy,"isPlainSafeLast"),k(Vp,"codePointAt"),k(Jy,"needIndentIndicator"),d2=1,p2=2,eT=3,f2=4,qp=5,k(e2,"chooseScalarStyle"),k(Au,"writeScalar"),k(lh,"blockHeader"),k(t2,"dropEndingNewline"),k(r2,"foldString"),k(Jb,"foldLine"),k(e4,"escapeString"),k(s9,"writeFlowSequence"),k(t4,"writeBlockSequence"),k(i2,"writeFlowMapping"),k(vk,"writeBlockMapping"),k(r4,"detectType"),k(Nh,"writeNode"),k(o9,"getDuplicateReferences"),k(n2,"inspectNode"),k(xk,"dump$1"),tT=xk,b4={dump:tT},k(i4,"renamed"),_4=u4,w4=Uk.load,S9=Uk.loadAll,A9=b4.dump,sF=i4("safeLoad","load"),oF=i4("safeLoadAll","loadAll"),lF=i4("safeDump","dump")}),T4,g2,E4,M9,rT=D(()=>{T4=Object.freeze({left:0,top:0,width:16,height:16}),g2=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),E4=Object.freeze({...T4,...g2}),M9=Object.freeze({...E4,body:"",hidden:!1})}),L9,R9,iT=D(()=>{rT(),L9=Object.freeze({width:null,height:null}),R9=Object.freeze({...L9,...g2})}),m2,D9,C4,S4=D(()=>{m2=/^[a-z0-9]+(-[a-z0-9]+)*$/,D9=(e,t,r,i="")=>{let n=e.split(":");if(e.slice(0,1)==="@"){if(n.length<2||n.length>3)return null;i=n.shift().slice(1)}if(n.length>3||!n.length)return null;if(n.length>1){let u=n.pop(),h=n.pop(),d={provider:n.length>0?n[0]:i,prefix:h,name:u};return t&&!C4(d)?null:d}let a=n[0],s=a.split("-");if(s.length>1){let u={provider:i,prefix:s.shift(),name:s.join("-")};return t&&!C4(u)?null:u}if(r&&i===""){let u={provider:i,prefix:"",name:a};return t&&!C4(u,r)?null:u}return null},C4=(e,t)=>e?!!((e.provider===""||e.provider.match(m2))&&(t&&e.prefix===""||e.prefix.match(m2))&&e.name.match(m2)):!1});function uF(e,t){let r={};!e.hFlip!=!t.hFlip&&(r.hFlip=!0),!e.vFlip!=!t.vFlip&&(r.vFlip=!0);let i=((e.rotate||0)+(t.rotate||0))%4;return i&&(r.rotate=i),r}var I9=D(()=>{});function d1(e,t){let r=uF(e,t);for(let i in M9)i in g2?i in e&&!(i in r)&&(r[i]=g2[i]):i in t?r[i]=t[i]:i in e&&(r[i]=e[i]);return r}var N9=D(()=>{rT(),I9()});function lu(e,t){let r=e.icons,i=e.aliases||Object.create(null),n=Object.create(null);function a(s){if(r[s])return n[s]=[];if(!(s in n)){n[s]=null;let u=i[s]&&i[s].parent,h=u&&a(u);h&&(n[s]=[u].concat(h))}return n[s]}return(t||Object.keys(r).concat(Object.keys(i))).forEach(a),n}var y2=D(()=>{});function A4(e,t,r){let i=e.icons,n=e.aliases||Object.create(null),a={};function s(u){a=d1(i[u]||n[u],a)}return s(t),r.forEach(s),d1(e,a)}function O9(e,t){if(e.icons[t])return A4(e,t,[]);let r=lu(e,[t])[t];return r?A4(e,t,r):null}var B9=D(()=>{N9(),y2()});function M4(e,t,r){if(t===1)return e;if(r=r||100,typeof e=="number")return Math.ceil(e*t*r)/r;if(typeof e!="string")return e;let i=e.split(p1);if(i===null||!i.length)return e;let n=[],a=i.shift(),s=v2.test(a);for(;;){if(s){let u=parseFloat(a);isNaN(u)?n.push(a):n.push(Math.ceil(u*t*r)/r)}else n.push(a);if(a=i.shift(),a===void 0)return n.join("");s=!s}}var p1,v2,nT=D(()=>{p1=/(-?[0-9.]*[0-9]+[0-9.]*)/g,v2=/^-?[0-9.]*[0-9]+[0-9.]*$/g});function hF(e,t="defs"){let r="",i=e.indexOf("<"+t);for(;i>=0;){let n=e.indexOf(">",i),a=e.indexOf("</"+t);if(n===-1||a===-1)break;let s=e.indexOf(">",a);if(s===-1)break;r+=e.slice(n+1,a).trim(),e=e.slice(0,i).trim()+e.slice(s+1)}return{defs:r,content:e}}function P9(e,t){return e?"<defs>"+e+"</defs>"+t:t}function F9(e,t,r){let i=hF(e);return P9(i.defs,t+i.content+r)}var $9=D(()=>{});function aT(e,t){let r={...E4,...e},i={...R9,...t},n={left:r.left,top:r.top,width:r.width,height:r.height},a=r.body;[r,i].forEach(_=>{let E=[],w=_.hFlip,C=_.vFlip,A=_.rotate;w?C?A+=2:(E.push("translate("+(n.width+n.left).toString()+" "+(0-n.top).toString()+")"),E.push("scale(-1 1)"),n.top=n.left=0):C&&(E.push("translate("+(0-n.left).toString()+" "+(n.height+n.top).toString()+")"),E.push("scale(1 -1)"),n.top=n.left=0);let M;switch(A<0&&(A-=Math.floor(A/4)*4),A=A%4,A){case 1:M=n.height/2+n.top,E.unshift("rotate(90 "+M.toString()+" "+M.toString()+")");break;case 2:E.unshift("rotate(180 "+(n.width/2+n.left).toString()+" "+(n.height/2+n.top).toString()+")");break;case 3:M=n.width/2+n.left,E.unshift("rotate(-90 "+M.toString()+" "+M.toString()+")");break}A%2===1&&(n.left!==n.top&&(M=n.left,n.left=n.top,n.top=M),n.width!==n.height&&(M=n.width,n.width=n.height,n.height=M)),E.length&&(a=F9(a,'<g transform="'+E.join(" ")+'">',"</g>"))});let s=i.width,u=i.height,h=n.width,d=n.height,p,g;s===null?(g=u===null?"1em":u==="auto"?d:u,p=M4(g,h/d)):(p=s==="auto"?h:s,g=u===null?M4(p,d/h):u==="auto"?d:u);let y={},m=(_,E)=>{z9(E)||(y[_]=E.toString())};m("width",p),m("height",g);let x=[n.left,n.top,h,d];return y.viewBox=x.join(" "),{attributes:y,viewBox:x,body:a}}var z9,x2=D(()=>{rT(),iT(),nT(),$9(),z9=e=>e==="unset"||e==="undefined"||e==="none"});function sT(e,t=L4){let r=[],i;for(;i=G9.exec(e);)r.push(i[1]);if(!r.length)return e;let n="suffix"+(Math.random()*16777216|Date.now()).toString(16);return r.forEach(a=>{let s=typeof t=="function"?t(a):t+(U9++).toString(),u=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");e=e.replace(new RegExp('([#;"])('+u+')([")]|\\.[a-z])',"g"),"$1"+s+n+"$3")}),e=e.replace(new RegExp(n,"g"),""),e}var G9,L4,U9,oT=D(()=>{G9=/\sid="(\S+)"/g,L4="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16),U9=0});function j9(e,t){let r=e.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(let i in t)r+=" "+i+'="'+t[i]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+r+">"+e+"</svg>"}var H9=D(()=>{}),lT=hi((e,t)=>{var r=1e3,i=r*60,n=i*60,a=n*24,s=a*7,u=a*365.25;t.exports=function(y,m){m=m||{};var x=typeof y;if(x==="string"&&y.length>0)return h(y);if(x==="number"&&isFinite(y))return m.long?p(y):d(y);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(y))};function h(y){if(y=String(y),!(y.length>100)){var m=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(y);if(m){var x=parseFloat(m[1]),_=(m[2]||"ms").toLowerCase();switch(_){case"years":case"year":case"yrs":case"yr":case"y":return x*u;case"weeks":case"week":case"w":return x*s;case"days":case"day":case"d":return x*a;case"hours":case"hour":case"hrs":case"hr":case"h":return x*n;case"minutes":case"minute":case"mins":case"min":case"m":return x*i;case"seconds":case"second":case"secs":case"sec":case"s":return x*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return x;default:return}}}}function d(y){var m=Math.abs(y);return m>=a?Math.round(y/a)+"d":m>=n?Math.round(y/n)+"h":m>=i?Math.round(y/i)+"m":m>=r?Math.round(y/r)+"s":y+"ms"}function p(y){var m=Math.abs(y);return m>=a?g(y,m,a,"day"):m>=n?g(y,m,n,"hour"):m>=i?g(y,m,i,"minute"):m>=r?g(y,m,r,"second"):y+" ms"}function g(y,m,x,_){var E=m>=x*1.5;return Math.round(y/x)+" "+_+(E?"s":"")}}),cF=hi((e,t)=>{function r(i){a.debug=a,a.default=a,a.coerce=g,a.disable=h,a.enable=u,a.enabled=d,a.humanize=lT(),a.destroy=y,Object.keys(i).forEach(m=>{a[m]=i[m]}),a.names=[],a.skips=[],a.formatters={};function n(m){let x=0;for(let _=0;_<m.length;_++)x=(x<<5)-x+m.charCodeAt(_),x|=0;return a.colors[Math.abs(x)%a.colors.length]}a.selectColor=n;function a(m){let x,_=null,E,w;function C(...A){if(!C.enabled)return;let M=C,N=Number(new Date),B=N-(x||N);M.diff=B,M.prev=x,M.curr=N,x=N,A[0]=a.coerce(A[0]),typeof A[0]!="string"&&A.unshift("%O");let O=0;A[0]=A[0].replace(/%([a-zA-Z%])/g,(L,$)=>{if(L==="%%")return"%";O++;let G=a.formatters[$];if(typeof G=="function"){let z=A[O];L=G.call(M,z),A.splice(O,1),O--}return L}),a.formatArgs.call(M,A),(M.log||a.log).apply(M,A)}return C.namespace=m,C.useColors=a.useColors(),C.color=a.selectColor(m),C.extend=s,C.destroy=a.destroy,Object.defineProperty(C,"enabled",{enumerable:!0,configurable:!1,get:()=>_!==null?_:(E!==a.namespaces&&(E=a.namespaces,w=a.enabled(m)),w),set:A=>{_=A}}),typeof a.init=="function"&&a.init(C),C}function s(m,x){let _=a(this.namespace+(typeof x>"u"?":":x)+m);return _.log=this.log,_}function u(m){a.save(m),a.namespaces=m,a.names=[],a.skips=[];let x,_=(typeof m=="string"?m:"").split(/[\s,]+/),E=_.length;for(x=0;x<E;x++)_[x]&&(m=_[x].replace(/\*/g,".*?"),m[0]==="-"?a.skips.push(new RegExp("^"+m.slice(1)+"$")):a.names.push(new RegExp("^"+m+"$")))}function h(){let m=[...a.names.map(p),...a.skips.map(p).map(x=>"-"+x)].join(",");return a.enable(""),m}function d(m){if(m[m.length-1]==="*")return!0;let x,_;for(x=0,_=a.skips.length;x<_;x++)if(a.skips[x].test(m))return!1;for(x=0,_=a.names.length;x<_;x++)if(a.names[x].test(m))return!0;return!1}function p(m){return m.toString().substring(2,m.toString().length-2).replace(/\.\*\?$/,"*")}function g(m){return m instanceof Error?m.stack||m.message:m}function y(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return a.enable(a.load()),a}t.exports=r}),dF=hi((e,t)=>{e.formatArgs=i,e.save=n,e.load=a,e.useColors=r,e.storage=s(),e.destroy=(()=>{let h=!1;return()=>{h||(h=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let h;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(h=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(h[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function i(h){if(h[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+h[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;let d="color: "+this.color;h.splice(1,0,d,"color: inherit");let p=0,g=0;h[0].replace(/%[a-zA-Z%]/g,y=>{y!=="%%"&&(p++,y==="%c"&&(g=p))}),h.splice(g,0,d)}e.log=console.debug||console.log||(()=>{});function n(h){try{h?e.storage.setItem("debug",h):e.storage.removeItem("debug")}catch{}}function a(){let h;try{h=e.storage.getItem("debug")}catch{}return!h&&typeof process<"u"&&"env"in process&&(h=process.env.DEBUG),h}function s(){try{return localStorage}catch{}}t.exports=cF()(e);var{formatters:u}=t.exports;u.j=function(h){try{return JSON.stringify(h)}catch(d){return"[UnexpectedJSONParseError]: "+d.message}}}),R4,pF=D(()=>{S4(),B9(),x2(),oT(),H9(),R4=Ke(dF(),1)}),D4,f1,b2,I4,uT,x0,Oh=D(()=>{Qn(),pF(),D4={body:'<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/><text transform="translate(21.16 64.67)" style="fill: #fff; font-family: ArialMT, Arial; font-size: 67.75px;"><tspan x="0" y="0">?</tspan></text></g>',height:80,width:80},f1=new Map,b2=new Map,I4=k(e=>{for(let t of e){if(!t.name)throw new Error('Invalid icon loader. Must have a "name" property with non-empty string value.');if(Ce.debug("Registering icon pack:",t.name),"loader"in t)b2.set(t.name,t.loader);else if("icons"in t)f1.set(t.name,t.icons);else throw Ce.error("Invalid icon loader:",t),new Error('Invalid icon loader. Must have either "icons" or "loader" property.')}},"registerIconPacks"),uT=k(async(e,t)=>{let r=D9(e,!0,t!==void 0);if(!r)throw new Error(`Invalid icon name: ${e}`);let i=r.prefix||t;if(!i)throw new Error(`Icon name must contain a prefix: ${e}`);let n=f1.get(i);if(!n){let s=b2.get(i);if(!s)throw new Error(`Icon set not found: ${r.prefix}`);try{n={...await s(),prefix:i},f1.set(i,n)}catch(u){throw Ce.error(u),new Error(`Failed to load icon set: ${r.prefix}`)}}let a=O9(n,r.name);if(!a)throw new Error(`Icon not found: ${e}`);return a},"getRegisteredIconData"),x0=k(async(e,t)=>{let r;try{r=await uT(e,t?.fallbackPrefix)}catch(n){Ce.error(n),r=D4}let i=aT(r,t);return j9(sT(i.body),i.attributes)},"getIconSVG")}),Xp,uh=D(()=>{Qn(),Xp=k(({flowchart:e})=>{let t=e?.subGraphTitleMargin?.top??0,r=e?.subGraphTitleMargin?.bottom??0,i=t+r;return{subGraphTitleTopMargin:t,subGraphTitleBottomMargin:r,subGraphTitleTotalMargin:i}},"getSubGraphTitleMargins")}),hT=hi(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BLANK_URL=e.relativeFirstCharacters=e.whitespaceEscapeCharsRegex=e.urlSchemeRegex=e.ctrlCharactersRegex=e.htmlCtrlEntityRegex=e.htmlEntitiesRegex=e.invalidProtocolRegex=void 0,e.invalidProtocolRegex=/^([^\w]*)(javascript|data|vbscript)/im,e.htmlEntitiesRegex=/&#(\w+)(^\w|;)?/g,e.htmlCtrlEntityRegex=/&(newline|tab);/gi,e.ctrlCharactersRegex=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,e.urlSchemeRegex=/^.+(:|&colon;)/gim,e.whitespaceEscapeCharsRegex=/(\\|%5[cC])((%(6[eE]|72|74))|[nrt])/g,e.relativeFirstCharacters=[".","/"],e.BLANK_URL="about:blank"}),_2=hi(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sanitizeUrl=void 0;var t=hT();function r(u){return t.relativeFirstCharacters.indexOf(u[0])>-1}function i(u){var h=u.replace(t.ctrlCharactersRegex,"");return h.replace(t.htmlEntitiesRegex,function(d,p){return String.fromCharCode(p)})}function n(u){return URL.canParse(u)}function a(u){try{return decodeURIComponent(u)}catch{return u}}function s(u){if(!u)return t.BLANK_URL;var h,d=a(u.trim());do d=i(d).replace(t.htmlCtrlEntityRegex,"").replace(t.ctrlCharactersRegex,"").replace(t.whitespaceEscapeCharsRegex,"").trim(),d=a(d),h=d.match(t.ctrlCharactersRegex)||d.match(t.htmlEntitiesRegex)||d.match(t.htmlCtrlEntityRegex)||d.match(t.whitespaceEscapeCharsRegex);while(h&&h.length>0);var p=d;if(!p)return t.BLANK_URL;if(r(p))return p;var g=p.trimStart(),y=g.match(t.urlSchemeRegex);if(!y)return p;var m=y[0].toLowerCase().trim();if(t.invalidProtocolRegex.test(m))return t.BLANK_URL;var x=g.replace(/\\/g,"/");if(m==="mailto:"||m.includes("://"))return x;if(m==="http:"||m==="https:"){if(!n(x))return t.BLANK_URL;var _=new URL(x);return _.protocol=_.protocol.toLowerCase(),_.hostname=_.hostname.toLowerCase(),_.toString()}return x}e.sanitizeUrl=s});function N4(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}var V9=D(()=>{});function W9(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}var cT=D(()=>{});function dT(e){let t,r,i;e.length!==2?(t=N4,r=(u,h)=>N4(e(u),h),i=(u,h)=>e(u)-h):(t=e===N4||e===W9?e:pT,r=e,i=e);function n(u,h,d=0,p=u.length){if(d<p){if(t(h,h)!==0)return p;do{let g=d+p>>>1;r(u[g],h)<0?d=g+1:p=g}while(d<p)}return d}function a(u,h,d=0,p=u.length){if(d<p){if(t(h,h)!==0)return p;do{let g=d+p>>>1;r(u[g],h)<=0?d=g+1:p=g}while(d<p)}return d}function s(u,h,d=0,p=u.length){let g=n(u,h,d,p-1);return g>d&&i(u[g-1],h)>-i(u[g],h)?g-1:g}return{left:n,center:s,right:a}}function pT(){return 0}var Y9=D(()=>{V9(),cT()});function w2(e){return e===null?NaN:+e}var q9=D(()=>{}),k2,O4,X9,B4,P4,fF=D(()=>{V9(),Y9(),q9(),k2=dT(N4),O4=k2.right,X9=k2.left,B4=dT(w2).center,P4=O4});function fT({_intern:e,_key:t},r){let i=t(r);return e.has(i)?e.get(i):r}function gF({_intern:e,_key:t},r){let i=t(r);return e.has(i)?e.get(i):(e.set(i,r),r)}function K9({_intern:e,_key:t},r){let i=t(r);return e.has(i)&&(r=e.get(i),e.delete(i)),r}function mF(e){return e!==null&&typeof e=="object"?e.valueOf():e}var T2,yF=D(()=>{T2=class extends Map{constructor(e,t=mF){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),e!=null)for(let[r,i]of e)this.set(r,i)}get(e){return super.get(fT(this,e))}has(e){return super.has(fT(this,e))}set(e,t){return super.set(gF(this,e),t)}delete(e){return super.delete(K9(this,e))}}});function E2(e,t,r){let i=(t-e)/Math.max(0,r),n=Math.floor(Math.log10(i)),a=i/Math.pow(10,n),s=a>=z4?10:a>=Z9?5:a>=G4?2:1,u,h,d;return n<0?(d=Math.pow(10,-n)/s,u=Math.round(e*d),h=Math.round(t*d),u/d<e&&++u,h/d>t&&--h,d=-d):(d=Math.pow(10,n)*s,u=Math.round(e/d),h=Math.round(t/d),u*d<e&&++u,h*d>t&&--h),h<u&&.5<=r&&r<2?E2(e,t,r*2):[u,h,d]}function vF(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];let i=t<e,[n,a,s]=i?E2(t,e,r):E2(e,t,r);if(!(a>=n))return[];let u=a-n+1,h=new Array(u);if(i)if(s<0)for(let d=0;d<u;++d)h[d]=(a-d)/-s;else for(let d=0;d<u;++d)h[d]=(a-d)*s;else if(s<0)for(let d=0;d<u;++d)h[d]=(n+d)/-s;else for(let d=0;d<u;++d)h[d]=(n+d)*s;return h}function F4(e,t,r){return t=+t,e=+e,r=+r,E2(e,t,r)[2]}function $4(e,t,r){t=+t,e=+e,r=+r;let i=t<e,n=i?F4(t,e,r):F4(e,t,r);return(i?-1:1)*(n<0?1/-n:n)}var z4,Z9,G4,xF=D(()=>{z4=Math.sqrt(50),Z9=Math.sqrt(10),G4=Math.sqrt(2)});function gT(e,t){let r;if(t===void 0)for(let i of e)i!=null&&(r<i||r===void 0&&i>=i)&&(r=i);else{let i=-1;for(let n of e)(n=t(n,++i,e))!=null&&(r<n||r===void 0&&n>=n)&&(r=n)}return r}var bF=D(()=>{});function U4(e,t){let r;if(t===void 0)for(let i of e)i!=null&&(r>i||r===void 0&&i>=i)&&(r=i);else{let i=-1;for(let n of e)(n=t(n,++i,e))!=null&&(r>n||r===void 0&&n>=n)&&(r=n)}return r}var Q9=D(()=>{});function _F(e,t,r){e=+e,t=+t,r=(n=arguments.length)<2?(t=e,e=0,1):n<3?1:+r;for(var i=-1,n=Math.max(0,Math.ceil((t-e)/r))|0,a=new Array(n);++i<n;)a[i]=e+i*r;return a}var g1=D(()=>{}),yd=D(()=>{fF(),Y9(),bF(),Q9(),g1(),xF(),yF()});function wF(e){return e}var j4=D(()=>{});function H4(e){return"translate("+e+",0)"}function J9(e){return"translate(0,"+e+")"}function kF(e){return t=>+e(t)}function eM(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),r=>+e(r)+t}function TF(){return!this.__axis}function mT(e,t){var r=[],i=null,n=null,a=6,s=6,u=3,h=typeof window<"u"&&window.devicePixelRatio>1?0:.5,d=e===Kp||e===C2?-1:1,p=e===C2||e===V4?"x":"y",g=e===Kp||e===m1?H4:J9;function y(m){var x=i??(t.ticks?t.ticks.apply(t,r):t.domain()),_=n??(t.tickFormat?t.tickFormat.apply(t,r):wF),E=Math.max(a,0)+u,w=t.range(),C=+w[0]+h,A=+w[w.length-1]+h,M=(t.bandwidth?eM:kF)(t.copy(),h),N=m.selection?m.selection():m,B=N.selectAll(".domain").data([null]),O=N.selectAll(".tick").data(x,t).order(),L=O.exit(),$=O.enter().append("g").attr("class","tick"),G=O.select("line"),z=O.select("text");B=B.merge(B.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),O=O.merge($),G=G.merge($.append("line").attr("stroke","currentColor").attr(p+"2",d*a)),z=z.merge($.append("text").attr("fill","currentColor").attr(p,d*E).attr("dy",e===Kp?"0em":e===m1?"0.71em":"0.32em")),m!==N&&(B=B.transition(m),O=O.transition(m),G=G.transition(m),z=z.transition(m),L=L.transition(m).attr("opacity",W4).attr("transform",function(F){return isFinite(F=M(F))?g(F+h):this.getAttribute("transform")}),$.attr("opacity",W4).attr("transform",function(F){var X=this.parentNode.__axis;return g((X&&isFinite(X=X(F))?X:M(F))+h)})),L.remove(),B.attr("d",e===C2||e===V4?s?"M"+d*s+","+C+"H"+h+"V"+A+"H"+d*s:"M"+h+","+C+"V"+A:s?"M"+C+","+d*s+"V"+h+"H"+A+"V"+d*s:"M"+C+","+h+"H"+A),O.attr("opacity",1).attr("transform",function(F){return g(M(F)+h)}),G.attr(p+"2",d*a),z.attr(p,d*E).text(_),N.filter(TF).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===V4?"start":e===C2?"end":"middle"),N.each(function(){this.__axis=M})}return y.scale=function(m){return arguments.length?(t=m,y):t},y.ticks=function(){return r=Array.from(arguments),y},y.tickArguments=function(m){return arguments.length?(r=m==null?[]:Array.from(m),y):r.slice()},y.tickValues=function(m){return arguments.length?(i=m==null?null:Array.from(m),y):i&&i.slice()},y.tickFormat=function(m){return arguments.length?(n=m,y):n},y.tickSize=function(m){return arguments.length?(a=s=+m,y):a},y.tickSizeInner=function(m){return arguments.length?(a=+m,y):a},y.tickSizeOuter=function(m){return arguments.length?(s=+m,y):s},y.tickPadding=function(m){return arguments.length?(u=+m,y):u},y.offset=function(m){return arguments.length?(h=+m,y):h},y}function tM(e){return mT(Kp,e)}function rM(e){return mT(m1,e)}var Kp,V4,m1,C2,W4,yT=D(()=>{j4(),Kp=1,V4=2,m1=3,C2=4,W4=1e-6}),EF=D(()=>{yT()});function iM(){for(var e=0,t=arguments.length,r={},i;e<t;++e){if(!(i=arguments[e]+"")||i in r||/[\s.]/.test(i))throw new Error("illegal type: "+i);r[i]=[]}return new y1(r)}function y1(e){this._=e}function CF(e,t){return e.trim().split(/^|\s+/).map(function(r){var i="",n=r.indexOf(".");if(n>=0&&(i=r.slice(n+1),r=r.slice(0,n)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:i}})}function Y4(e,t){for(var r=0,i=e.length,n;r<i;++r)if((n=e[r]).name===t)return n.value}function nM(e,t,r){for(var i=0,n=e.length;i<n;++i)if(e[i].name===t){e[i]=aM,e=e.slice(0,i).concat(e.slice(i+1));break}return r!=null&&e.push({name:t,value:r}),e}var aM,sM,SF=D(()=>{aM={value:()=>{}},y1.prototype=iM.prototype={constructor:y1,on:function(e,t){var r=this._,i=CF(e+"",r),n,a=-1,s=i.length;if(arguments.length<2){for(;++a<s;)if((n=(e=i[a]).type)&&(n=Y4(r[n],e.name)))return n;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<s;)if(n=(e=i[a]).type)r[n]=nM(r[n],e.name,t);else if(t==null)for(n in r)r[n]=nM(r[n],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new y1(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var r=new Array(n),i=0,n,a;i<n;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],i=0,n=a.length;i<n;++i)a[i].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],n=0,a=i.length;n<a;++n)i[n].value.apply(t,r)}},sM=iM}),S2=D(()=>{SF()}),A2,vT,M2=D(()=>{A2="http://www.w3.org/1999/xhtml",vT={svg:"http://www.w3.org/2000/svg",xhtml:A2,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}});function L2(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),vT.hasOwnProperty(t)?{space:vT[t],local:e}:e}var xT=D(()=>{M2()});function bT(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===A2&&t.documentElement.namespaceURI===A2?t.createElement(e):t.createElementNS(r,e)}}function q4(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function _T(e){var t=L2(e);return(t.local?q4:bT)(t)}var wT=D(()=>{xT(),M2()});function v1(){}function X4(e){return e==null?v1:function(){return this.querySelector(e)}}var x1=D(()=>{});function oM(e){typeof e!="function"&&(e=X4(e));for(var t=this._groups,r=t.length,i=new Array(r),n=0;n<r;++n)for(var a=t[n],s=a.length,u=i[n]=new Array(s),h,d,p=0;p<s;++p)(h=a[p])&&(d=e.call(h,h.__data__,p,a))&&("__data__"in h&&(d.__data__=h.__data__),u[p]=d);return new Mu(i,this._parents)}var AF=D(()=>{Bh(),x1()});function kT(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}var TT=D(()=>{});function lM(){return[]}function K4(e){return e==null?lM:function(){return this.querySelectorAll(e)}}var uM=D(()=>{});function ET(e){return function(){return kT(e.apply(this,arguments))}}function MF(e){typeof e=="function"?e=ET(e):e=K4(e);for(var t=this._groups,r=t.length,i=[],n=[],a=0;a<r;++a)for(var s=t[a],u=s.length,h,d=0;d<u;++d)(h=s[d])&&(i.push(e.call(h,h.__data__,d,s)),n.push(h));return new Mu(i,n)}var CT=D(()=>{Bh(),TT(),uM()});function hM(e){return function(){return this.matches(e)}}function R2(e){return function(t){return t.matches(e)}}var Z4=D(()=>{});function ST(e){return function(){return cM.call(this.children,e)}}function LF(){return this.firstElementChild}function AT(e){return this.select(e==null?LF:ST(typeof e=="function"?e:R2(e)))}var cM,MT=D(()=>{Z4(),cM=Array.prototype.find});function dM(){return Array.from(this.children)}function RF(e){return function(){return LT.call(this.children,e)}}function D2(e){return this.selectAll(e==null?dM:RF(typeof e=="function"?e:R2(e)))}var LT,b0=D(()=>{Z4(),LT=Array.prototype.filter});function pM(e){typeof e!="function"&&(e=hM(e));for(var t=this._groups,r=t.length,i=new Array(r),n=0;n<r;++n)for(var a=t[n],s=a.length,u=i[n]=[],h,d=0;d<s;++d)(h=a[d])&&e.call(h,h.__data__,d,a)&&u.push(h);return new Mu(i,this._parents)}var fM=D(()=>{Bh(),Z4()});function RT(e){return new Array(e.length)}var Zp=D(()=>{});function DT(){return new Mu(this._enter||this._groups.map(RT),this._parents)}function I2(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}var IT=D(()=>{Zp(),Bh(),I2.prototype={constructor:I2,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}}});function DF(e){return function(){return e}}var IF=D(()=>{});function NF(e,t,r,i,n,a){for(var s=0,u,h=t.length,d=a.length;s<d;++s)(u=t[s])?(u.__data__=a[s],i[s]=u):r[s]=new I2(e,a[s]);for(;s<h;++s)(u=t[s])&&(n[s]=u)}function OF(e,t,r,i,n,a,s){var u,h,d=new Map,p=t.length,g=a.length,y=new Array(p),m;for(u=0;u<p;++u)(h=t[u])&&(y[u]=m=s.call(h,h.__data__,u,t)+"",d.has(m)?n[u]=h:d.set(m,h));for(u=0;u<g;++u)m=s.call(e,a[u],u,a)+"",(h=d.get(m))?(i[u]=h,h.__data__=a[u],d.delete(m)):r[u]=new I2(e,a[u]);for(u=0;u<p;++u)(h=t[u])&&d.get(y[u])===h&&(n[u]=h)}function NT(e){return e.__data__}function BF(e,t){if(!arguments.length)return Array.from(this,NT);var r=t?OF:NF,i=this._parents,n=this._groups;typeof e!="function"&&(e=DF(e));for(var a=n.length,s=new Array(a),u=new Array(a),h=new Array(a),d=0;d<a;++d){var p=i[d],g=n[d],y=g.length,m=Q4(e.call(p,p&&p.__data__,d,i)),x=m.length,_=u[d]=new Array(x),E=s[d]=new Array(x),w=h[d]=new Array(y);r(p,g,_,E,w,m,t);for(var C=0,A=0,M,N;C<x;++C)if(M=_[C]){for(C>=A&&(A=C+1);!(N=E[A])&&++A<x;);M._next=N||null}}return s=new Mu(s,i),s._enter=u,s._exit=h,s}function Q4(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}var OT=D(()=>{Bh(),IT(),IF()});function gM(){return new Mu(this._exit||this._groups.map(RT),this._parents)}var PF=D(()=>{Zp(),Bh()});function vd(e,t,r){var i=this.enter(),n=this,a=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(n=t(n),n&&(n=n.selection())),r==null?a.remove():r(a),i&&n?i.merge(n).order():n}var BT=D(()=>{});function FF(e){for(var t=e.selection?e.selection():e,r=this._groups,i=t._groups,n=r.length,a=i.length,s=Math.min(n,a),u=new Array(n),h=0;h<s;++h)for(var d=r[h],p=i[h],g=d.length,y=u[h]=new Array(g),m,x=0;x<g;++x)(m=d[x]||p[x])&&(y[x]=m);for(;h<n;++h)u[h]=r[h];return new Mu(u,this._parents)}var mM=D(()=>{Bh()});function $F(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var i=e[t],n=i.length-1,a=i[n],s;--n>=0;)(s=i[n])&&(a&&s.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(s,a),a=s);return this}var yM=D(()=>{});function xd(e){e||(e=vM);function t(g,y){return g&&y?e(g.__data__,y.__data__):!g-!y}for(var r=this._groups,i=r.length,n=new Array(i),a=0;a<i;++a){for(var s=r[a],u=s.length,h=n[a]=new Array(u),d,p=0;p<u;++p)(d=s[p])&&(h[p]=d);h.sort(t)}return new Mu(n,this._parents).order()}function vM(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}var zF=D(()=>{Bh()});function GF(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}var xM=D(()=>{});function PT(){return Array.from(this)}var UF=D(()=>{});function jF(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var i=e[t],n=0,a=i.length;n<a;++n){var s=i[n];if(s)return s}return null}var HF=D(()=>{});function VF(){let e=0;for(let t of this)++e;return e}var WF=D(()=>{});function FT(){return!this.node()}var bM=D(()=>{});function _M(e){for(var t=this._groups,r=0,i=t.length;r<i;++r)for(var n=t[r],a=0,s=n.length,u;a<s;++a)(u=n[a])&&e.call(u,u.__data__,a,n);return this}var YF=D(()=>{});function wM(e){return function(){this.removeAttribute(e)}}function qF(e){return function(){this.removeAttributeNS(e.space,e.local)}}function $T(e,t){return function(){this.setAttribute(e,t)}}function XF(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function zT(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function KF(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function Ul(e,t){var r=L2(e);if(arguments.length<2){var i=this.node();return r.local?i.getAttributeNS(r.space,r.local):i.getAttribute(r)}return this.each((t==null?r.local?qF:wM:typeof t=="function"?r.local?KF:zT:r.local?XF:$T)(r,t))}var ZF=D(()=>{xT()});function J4(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}var kM=D(()=>{});function TM(e){return function(){this.style.removeProperty(e)}}function QF(e,t,r){return function(){this.style.setProperty(e,t,r)}}function GT(e,t,r){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,r)}}function EM(e,t,r){return arguments.length>1?this.each((t==null?TM:typeof t=="function"?GT:QF)(e,t,r??"")):Qp(this.node(),e)}function Qp(e,t){return e.style.getPropertyValue(t)||J4(e).getComputedStyle(e,null).getPropertyValue(t)}var CM=D(()=>{kM()});function UT(e){return function(){delete this[e]}}function SM(e,t){return function(){this[e]=t}}function AM(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function JF(e,t){return arguments.length>1?this.each((t==null?UT:typeof t=="function"?AM:SM)(e,t)):this.node()[e]}var MM=D(()=>{});function LM(e){return e.trim().split(/^|\s+/)}function N2(e){return e.classList||new RM(e)}function RM(e){this._node=e,this._names=LM(e.getAttribute("class")||"")}function jT(e,t){for(var r=N2(e),i=-1,n=t.length;++i<n;)r.add(t[i])}function HT(e,t){for(var r=N2(e),i=-1,n=t.length;++i<n;)r.remove(t[i])}function DM(e){return function(){jT(this,e)}}function IM(e){return function(){HT(this,e)}}function VT(e,t){return function(){(t.apply(this,arguments)?jT:HT)(this,e)}}function WT(e,t){var r=LM(e+"");if(arguments.length<2){for(var i=N2(this.node()),n=-1,a=r.length;++n<a;)if(!i.contains(r[n]))return!1;return!0}return this.each((typeof t=="function"?VT:t?DM:IM)(r,t))}var YT=D(()=>{RM.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}}});function NM(){this.textContent=""}function e$(e){return function(){this.textContent=e}}function qT(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function t$(e){return arguments.length?this.each(e==null?NM:(typeof e=="function"?qT:e$)(e)):this.node().textContent}var XT=D(()=>{});function r$(){this.innerHTML=""}function KT(e){return function(){this.innerHTML=e}}function i$(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function O2(e){return arguments.length?this.each(e==null?r$:(typeof e=="function"?i$:KT)(e)):this.node().innerHTML}var n$=D(()=>{});function OM(){this.nextSibling&&this.parentNode.appendChild(this)}function a$(){return this.each(OM)}var ZT=D(()=>{});function s$(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function e3(){return this.each(s$)}var BM=D(()=>{});function o$(e){var t=typeof e=="function"?e:_T(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}var t3=D(()=>{wT()});function QT(){return null}function La(e,t){var r=typeof e=="function"?e:_T(e),i=t==null?QT:typeof t=="function"?t:X4(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),i.apply(this,arguments)||null)})}var PM=D(()=>{wT(),x1()});function l$(){var e=this.parentNode;e&&e.removeChild(this)}function JT(){return this.each(l$)}var u$=D(()=>{});function FM(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function eE(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function h$(e){return this.select(e?eE:FM)}var $M=D(()=>{});function r3(e){return arguments.length?this.property("__data__",e):this.node().__data__}var zM=D(()=>{});function c$(e){return function(t){e.call(this,t,this.__data__)}}function tE(e){return e.trim().split(/^|\s+/).map(function(t){var r="",i=t.indexOf(".");return i>=0&&(r=t.slice(i+1),t=t.slice(0,i)),{type:t,name:r}})}function d$(e){return function(){var t=this.__on;if(t){for(var r=0,i=-1,n=t.length,a;r<n;++r)a=t[r],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++i]=a;++i?t.length=i:delete this.__on}}}function rE(e,t,r){return function(){var i=this.__on,n,a=c$(t);if(i){for(var s=0,u=i.length;s<u;++s)if((n=i[s]).type===e.type&&n.name===e.name){this.removeEventListener(n.type,n.listener,n.options),this.addEventListener(n.type,n.listener=a,n.options=r),n.value=t;return}}this.addEventListener(e.type,a,r),n={type:e.type,name:e.name,value:t,listener:a,options:r},i?i.push(n):this.__on=[n]}}function p$(e,t,r){var i=tE(e+""),n,a=i.length,s;if(arguments.length<2){var u=this.node().__on;if(u){for(var h=0,d=u.length,p;h<d;++h)for(n=0,p=u[h];n<a;++n)if((s=i[n]).type===p.type&&s.name===p.name)return p.value}return}for(u=t?rE:d$,n=0;n<a;++n)this.each(u(i[n],t,r));return this}var iE=D(()=>{});function GM(e,t,r){var i=J4(e),n=i.CustomEvent;typeof n=="function"?n=new n(t,r):(n=i.document.createEvent("Event"),r?(n.initEvent(t,r.bubbles,r.cancelable),n.detail=r.detail):n.initEvent(t,!1,!1)),e.dispatchEvent(n)}function f$(e,t){return function(){return GM(this,e,t)}}function nE(e,t){return function(){return GM(this,e,t.apply(this,arguments))}}function UM(e,t){return this.each((typeof t=="function"?nE:f$)(e,t))}var g$=D(()=>{kM()});function*m$(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var i=e[t],n=0,a=i.length,s;n<a;++n)(s=i[n])&&(yield s)}var y$=D(()=>{});function Mu(e,t){this._groups=e,this._parents=t}function i3(){return new Mu([[document.documentElement]],n3)}function v$(){return this}var n3,b1,Bh=D(()=>{AF(),CT(),MT(),b0(),fM(),OT(),IT(),PF(),BT(),mM(),yM(),zF(),xM(),UF(),HF(),WF(),bM(),YF(),ZF(),CM(),MM(),YT(),XT(),n$(),ZT(),BM(),t3(),PM(),u$(),$M(),zM(),iE(),g$(),y$(),n3=[null],Mu.prototype=i3.prototype={constructor:Mu,select:oM,selectAll:MF,selectChild:AT,selectChildren:D2,filter:pM,data:BF,enter:DT,exit:gM,join:vd,merge:FF,selection:v$,order:$F,sort:xd,call:GF,nodes:PT,node:jF,size:VF,empty:FT,each:_M,attr:Ul,style:EM,property:JF,classed:WT,text:t$,html:O2,raise:a$,lower:e3,append:o$,insert:La,remove:JT,clone:h$,datum:r3,on:p$,dispatch:UM,[Symbol.iterator]:m$},b1=i3});function Nr(e){return typeof e=="string"?new Mu([[document.querySelector(e)]],[document.documentElement]):new Mu([[e]],n3)}var aE=D(()=>{Bh()}),Cc=D(()=>{Z4(),xT(),aE(),Bh(),x1(),uM(),CM()}),x$=D(()=>{});function B2(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function P2(e,t){var r=Object.create(e.prototype);for(var i in t)r[i]=t[i];return r}var jM=D(()=>{});function _0(){}function HM(){return this.rgb().formatHex()}function sE(){return this.rgb().formatHex8()}function VM(){return XM(this).formatHsl()}function oE(){return this.rgb().formatRgb()}function w0(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=ZM.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?WM(t):r===3?new al(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?k0(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?k0(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=o3.exec(e))?new al(t[1],t[2],t[3],1):(t=QM.exec(e))?new al(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=JM.exec(e))?k0(t[1],t[2],t[3],t[4]):(t=eL.exec(e))?k0(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=uE.exec(e))?lE(t[1],t[2]/100,t[3]/100,1):(t=hE.exec(e))?lE(t[1],t[2]/100,t[3]/100,t[4]):l3.hasOwnProperty(e)?WM(l3[e]):e==="transparent"?new al(NaN,NaN,NaN,0):null}function WM(e){return new al(e>>16&255,e>>8&255,e&255,1)}function k0(e,t,r,i){return i<=0&&(e=t=r=NaN),new al(e,t,r,i)}function a3(e){return e instanceof _0||(e=w0(e)),e?(e=e.rgb(),new al(e.r,e.g,e.b,e.opacity)):new al}function F2(e,t,r,i){return arguments.length===1?a3(e):new al(e,t,r,i??1)}function al(e,t,r,i){this.r=+e,this.g=+t,this.b=+r,this.opacity=+i}function YM(){return`#${ef(this.r)}${ef(this.g)}${ef(this.b)}`}function b$(){return`#${ef(this.r)}${ef(this.g)}${ef(this.b)}${ef((isNaN(this.opacity)?1:this.opacity)*255)}`}function qM(){let e=s3(this.opacity);return`${e===1?"rgb(":"rgba("}${Jp(this.r)}, ${Jp(this.g)}, ${Jp(this.b)}${e===1?")":`, ${e})`}`}function s3(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Jp(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ef(e){return e=Jp(e),(e<16?"0":"")+e.toString(16)}function lE(e,t,r,i){return i<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Ph(e,t,r,i)}function XM(e){if(e instanceof Ph)return new Ph(e.h,e.s,e.l,e.opacity);if(e instanceof _0||(e=w0(e)),!e)return new Ph;if(e instanceof Ph)return e;e=e.rgb();var t=e.r/255,r=e.g/255,i=e.b/255,n=Math.min(t,r,i),a=Math.max(t,r,i),s=NaN,u=a-n,h=(a+n)/2;return u?(t===a?s=(r-i)/u+(r<i)*6:r===a?s=(i-t)/u+2:s=(t-r)/u+4,u/=h<.5?a+n:2-a-n,s*=60):u=h>0&&h<1?0:s,new Ph(s,u,h,e.opacity)}function _$(e,t,r,i){return arguments.length===1?XM(e):new Ph(e,t,r,i??1)}function Ph(e,t,r,i){this.h=+e,this.s=+t,this.l=+r,this.opacity=+i}function KM(e){return e=(e||0)%360,e<0?e+360:e}function T0(e){return Math.max(0,Math.min(1,e||0))}function $2(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}var _1,w1,E0,k1,Fh,ZM,o3,QM,JM,eL,uE,hE,l3,cE=D(()=>{jM(),_1=.7,w1=1/_1,E0="\\s*([+-]?\\d+)\\s*",k1="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Fh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ZM=/^#([0-9a-f]{3,8})$/,o3=new RegExp(`^rgb\\(${E0},${E0},${E0}\\)$`),QM=new RegExp(`^rgb\\(${Fh},${Fh},${Fh}\\)$`),JM=new RegExp(`^rgba\\(${E0},${E0},${E0},${k1}\\)$`),eL=new RegExp(`^rgba\\(${Fh},${Fh},${Fh},${k1}\\)$`),uE=new RegExp(`^hsl\\(${k1},${Fh},${Fh}\\)$`),hE=new RegExp(`^hsla\\(${k1},${Fh},${Fh},${k1}\\)$`),l3={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},B2(_0,w0,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:HM,formatHex:HM,formatHex8:sE,formatHsl:VM,formatRgb:oE,toString:oE}),B2(al,F2,P2(_0,{brighter(e){return e=e==null?w1:Math.pow(w1,e),new al(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?_1:Math.pow(_1,e),new al(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new al(Jp(this.r),Jp(this.g),Jp(this.b),s3(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:YM,formatHex:YM,formatHex8:b$,formatRgb:qM,toString:qM})),B2(Ph,_$,P2(_0,{brighter(e){return e=e==null?w1:Math.pow(w1,e),new Ph(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?_1:Math.pow(_1,e),new Ph(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*t,n=2*r-i;return new al($2(e>=240?e-240:e+120,n,i),$2(e,n,i),$2(e<120?e+240:e-120,n,i),this.opacity)},clamp(){return new Ph(KM(this.h),T0(this.s),T0(this.l),s3(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=s3(this.opacity);return`${e===1?"hsl(":"hsla("}${KM(this.h)}, ${T0(this.s)*100}%, ${T0(this.l)*100}%${e===1?")":`, ${e})`}`}}))}),dE,pE,fE=D(()=>{dE=Math.PI/180,pE=180/Math.PI});function gE(e){if(e instanceof $h)return new $h(e.l,e.a,e.b,e.opacity);if(e instanceof zh)return xE(e);e instanceof al||(e=a3(e));var t=h3(e.r),r=h3(e.g),i=h3(e.b),n=mE((.2225045*t+.7168786*r+.0606169*i)/z2),a,s;return t===r&&r===i?a=s=n:(a=mE((.4360747*t+.3850649*r+.1430804*i)/bE),s=mE((.0139322*t+.0971045*r+.7141733*i)/c3)),new $h(116*n-16,500*(a-n),200*(n-s),e.opacity)}function w$(e,t,r,i){return arguments.length===1?gE(e):new $h(e,t,r,i??1)}function $h(e,t,r,i){this.l=+e,this.a=+t,this.b=+r,this.opacity=+i}function mE(e){return e>wE?Math.pow(e,1/3):e/_E+E1}function u3(e){return e>C0?e*e*e:_E*(e-E1)}function yE(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function h3(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function tL(e){if(e instanceof zh)return new zh(e.h,e.c,e.l,e.opacity);if(e instanceof $h||(e=gE(e)),e.a===0&&e.b===0)return new zh(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*pE;return new zh(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function vE(e,t,r,i){return arguments.length===1?tL(e):new zh(e,t,r,i??1)}function zh(e,t,r,i){this.h=+e,this.c=+t,this.l=+r,this.opacity=+i}function xE(e){if(isNaN(e.h))return new $h(e.l,0,0,e.opacity);var t=e.h*dE;return new $h(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}var T1,bE,z2,c3,E1,C0,_E,wE,k$=D(()=>{jM(),cE(),fE(),T1=18,bE=.96422,z2=1,c3=.82521,E1=4/29,C0=6/29,_E=3*C0*C0,wE=C0*C0*C0,B2($h,w$,P2(_0,{brighter(e){return new $h(this.l+T1*(e??1),this.a,this.b,this.opacity)},darker(e){return new $h(this.l-T1*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,r=isNaN(this.b)?e:e-this.b/200;return t=bE*u3(t),e=z2*u3(e),r=c3*u3(r),new al(yE(3.1338561*t-1.6168667*e-.4906146*r),yE(-.9787684*t+1.9161415*e+.033454*r),yE(.0719453*t-.2289914*e+1.4052427*r),this.opacity)}})),B2(zh,vE,P2(_0,{brighter(e){return new zh(this.h,this.c,this.l+T1*(e??1),this.opacity)},darker(e){return new zh(this.h,this.c,this.l-T1*(e??1),this.opacity)},rgb(){return xE(this).rgb()}}))}),G2=D(()=>{cE(),k$()});function rL(e,t,r,i,n){var a=e*e,s=a*e;return((1-3*e+3*a-s)*t+(4-6*a+3*s)*r+(1+3*e+3*a-3*s)*i+s*n)/6}function T$(e){var t=e.length-1;return function(r){var i=r<=0?r=0:r>=1?(r=1,t-1):Math.floor(r*t),n=e[i],a=e[i+1],s=i>0?e[i-1]:2*n-a,u=i<t-1?e[i+2]:2*a-n;return rL((r-i/t)*t,s,n,a,u)}}var iL=D(()=>{});function E$(e){var t=e.length;return function(r){var i=Math.floor(((r%=1)<0?++r:r)*t),n=e[(i+t-1)%t],a=e[i%t],s=e[(i+1)%t],u=e[(i+2)%t];return rL((r-i/t)*t,n,a,s,u)}}var C$=D(()=>{iL()}),C1,d3=D(()=>{C1=e=>()=>e});function nL(e,t){return function(r){return e+r*t}}function aL(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(i){return Math.pow(e+i*t,r)}}function sL(e,t){var r=t-e;return r?nL(e,r>180||r<-180?r-360*Math.round(r/360):r):C1(isNaN(e)?t:e)}function oL(e){return(e=+e)==1?tf:function(t,r){return r-t?aL(t,r,e):C1(isNaN(t)?r:t)}}function tf(e,t){var r=t-e;return r?nL(e,r):C1(isNaN(e)?t:e)}var p3=D(()=>{d3()});function f3(e){return function(t){var r=t.length,i=new Array(r),n=new Array(r),a=new Array(r),s,u;for(s=0;s<r;++s)u=F2(t[s]),i[s]=u.r||0,n[s]=u.g||0,a[s]=u.b||0;return i=e(i),n=e(n),a=e(a),u.opacity=1,function(h){return u.r=i(h),u.g=n(h),u.b=a(h),u+""}}}var rf,lL,S$,uL=D(()=>{G2(),iL(),C$(),p3(),rf=function e(t){var r=oL(t);function i(n,a){var s=r((n=F2(n)).r,(a=F2(a)).r),u=r(n.g,a.g),h=r(n.b,a.b),d=tf(n.opacity,a.opacity);return function(p){return n.r=s(p),n.g=u(p),n.b=h(p),n.opacity=d(p),n+""}}return i.gamma=e,i}(1),lL=f3(T$),S$=f3(E$)});function A$(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,i=t.slice(),n;return function(a){for(n=0;n<r;++n)i[n]=e[n]*(1-a)+t[n]*a;return i}}function hL(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}var g3=D(()=>{});function M$(e,t){var r=t?t.length:0,i=e?Math.min(r,e.length):0,n=new Array(i),a=new Array(r),s;for(s=0;s<i;++s)n[s]=kE(e[s],t[s]);for(;s<r;++s)a[s]=t[s];return function(u){for(s=0;s<i;++s)a[s]=n[s](u);return a}}var L$=D(()=>{x3()});function cL(e,t){var r=new Date;return e=+e,t=+t,function(i){return r.setTime(e*(1-i)+t*i),r}}var m3=D(()=>{});function Lu(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}var U2=D(()=>{});function y3(e,t){var r={},i={},n;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(n in t)n in e?r[n]=kE(e[n],t[n]):i[n]=t[n];return function(a){for(n in r)i[n]=r[n](a);return i}}var R$=D(()=>{x3()});function D$(e){return function(){return e}}function dL(e){return function(t){return e(t)+""}}function pL(e,t){var r=S1.lastIndex=v3.lastIndex=0,i,n,a,s=-1,u=[],h=[];for(e=e+"",t=t+"";(i=S1.exec(e))&&(n=v3.exec(t));)(a=n.index)>r&&(a=t.slice(r,a),u[s]?u[s]+=a:u[++s]=a),(i=i[0])===(n=n[0])?u[s]?u[s]+=n:u[++s]=n:(u[++s]=null,h.push({i:s,x:Lu(i,n)})),r=v3.lastIndex;return r<t.length&&(a=t.slice(r),u[s]?u[s]+=a:u[++s]=a),u.length<2?h[0]?dL(h[0].x):D$(t):(t=h.length,function(d){for(var p=0,g;p<t;++p)u[(g=h[p]).i]=g.x(d);return u.join("")})}var S1,v3,fL=D(()=>{U2(),S1=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,v3=new RegExp(S1.source,"g")});function kE(e,t){var r=typeof t,i;return t==null||r==="boolean"?C1(t):(r==="number"?Lu:r==="string"?(i=w0(t))?(t=i,rf):pL:t instanceof w0?rf:t instanceof Date?cL:hL(t)?A$:Array.isArray(t)?M$:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?y3:Lu)(e,t)}var x3=D(()=>{G2(),uL(),L$(),m3(),U2(),R$(),fL(),d3(),g3()});function I$(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}var N$=D(()=>{});function TE(e,t,r,i,n,a){var s,u,h;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(h=e*r+t*i)&&(r-=e*h,i-=t*h),(u=Math.sqrt(r*r+i*i))&&(r/=u,i/=u,h/=u),e*i<t*r&&(e=-e,t=-t,h=-h,s=-s),{translateX:n,translateY:a,rotate:Math.atan2(t,e)*b3,skewX:Math.atan(h)*b3,scaleX:s,scaleY:u}}var b3,_3,O$=D(()=>{b3=180/Math.PI,_3={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1}});function B$(e){let t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?_3:TE(t.a,t.b,t.c,t.d,t.e,t.f)}function P$(e){return e==null?_3:(w3||(w3=document.createElementNS("http://www.w3.org/2000/svg","g")),w3.setAttribute("transform",e),(e=w3.transform.baseVal.consolidate())?(e=e.matrix,TE(e.a,e.b,e.c,e.d,e.e,e.f)):_3)}var w3,F$=D(()=>{O$()});function gL(e,t,r,i){function n(d){return d.length?d.pop()+" ":""}function a(d,p,g,y,m,x){if(d!==g||p!==y){var _=m.push("translate(",null,t,null,r);x.push({i:_-4,x:Lu(d,g)},{i:_-2,x:Lu(p,y)})}else(g||y)&&m.push("translate("+g+t+y+r)}function s(d,p,g,y){d!==p?(d-p>180?p+=360:p-d>180&&(d+=360),y.push({i:g.push(n(g)+"rotate(",null,i)-2,x:Lu(d,p)})):p&&g.push(n(g)+"rotate("+p+i)}function u(d,p,g,y){d!==p?y.push({i:g.push(n(g)+"skewX(",null,i)-2,x:Lu(d,p)}):p&&g.push(n(g)+"skewX("+p+i)}function h(d,p,g,y,m,x){if(d!==g||p!==y){var _=m.push(n(m)+"scale(",null,",",null,")");x.push({i:_-4,x:Lu(d,g)},{i:_-2,x:Lu(p,y)})}else(g!==1||y!==1)&&m.push(n(m)+"scale("+g+","+y+")")}return function(d,p){var g=[],y=[];return d=e(d),p=e(p),a(d.translateX,d.translateY,p.translateX,p.translateY,g,y),s(d.rotate,p.rotate,g,y),u(d.skewX,p.skewX,g,y),h(d.scaleX,d.scaleY,p.scaleX,p.scaleY,g,y),d=p=null,function(m){for(var x=-1,_=y.length,E;++x<_;)g[(E=y[x]).i]=E.x(m);return g.join("")}}}var mL,yL,vL=D(()=>{U2(),F$(),mL=gL(B$,"px, ","px)","deg)"),yL=gL(P$,", ",")",")")});function xL(e){return function(t,r){var i=e((t=vE(t)).h,(r=vE(r)).h),n=tf(t.c,r.c),a=tf(t.l,r.l),s=tf(t.opacity,r.opacity);return function(u){return t.h=i(u),t.c=n(u),t.l=a(u),t.opacity=s(u),t+""}}}var j2,$$,z$=D(()=>{G2(),p3(),j2=xL(sL),$$=xL(tf)}),H2=D(()=>{x3(),U2(),N$(),fL(),vL(),uL(),z$()});function EE(){return S0||(AE(G$),S0=L1.now()+Y2)}function G$(){S0=0}function k3(){this._call=this._time=this._next=null}function bL(e,t,r){var i=new k3;return i.restart(e,t,r),i}function U$(){EE(),++nf;for(var e=T3,t;e;)(t=S0-e._time)>=0&&e._call.call(void 0,t),e=e._next;--nf}function _L(){S0=(W2=L1.now())+Y2,nf=A1=0;try{U$()}finally{nf=0,H$(),S0=0}}function j$(){var e=L1.now(),t=e-W2;t>SE&&(Y2-=t,W2=e)}function H$(){for(var e,t=T3,r,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:T3=r);V2=e,CE(i)}function CE(e){if(!nf){A1&&(A1=clearTimeout(A1));var t=e-S0;t>24?(e<1/0&&(A1=setTimeout(_L,e-L1.now()-Y2)),M1&&(M1=clearInterval(M1))):(M1||(W2=L1.now(),M1=setInterval(j$,SE)),nf=1,AE(_L))}}var nf,A1,M1,SE,T3,V2,W2,S0,Y2,L1,AE,wL=D(()=>{nf=0,A1=0,M1=0,SE=1e3,W2=0,S0=0,Y2=0,L1=typeof performance=="object"&&performance.now?performance:Date,AE=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)},k3.prototype=bL.prototype={constructor:k3,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?EE():+r)+(t==null?0:+t),!this._next&&V2!==this&&(V2?V2._next=this:T3=this,V2=this),this._call=e,this._time=r,CE()},stop:function(){this._call&&(this._call=null,this._time=1/0,CE())}}});function kL(e,t,r){var i=new k3;return t=t==null?0:+t,i.restart(n=>{i.stop(),e(n+t)},t,r),i}var TL=D(()=>{wL()}),ME=D(()=>{wL(),TL()});function E3(e,t,r,i,n,a){var s=e.__transition;if(!s)e.__transition={};else if(r in s)return;V$(e,r,{name:t,index:i,group:n,on:EL,tween:CL,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:RE})}function LE(e,t){var r=_l(e,t);if(r.state>RE)throw new Error("too late; already scheduled");return r}function Sc(e,t){var r=_l(e,t);if(r.state>D1)throw new Error("too late; already running");return r}function _l(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function V$(e,t,r){var i=e.__transition,n;i[t]=r,r.timer=bL(a,0,r.time);function a(d){r.state=C3,r.timer.restart(s,r.delay,r.time),r.delay<=d&&s(d-r.delay)}function s(d){var p,g,y,m;if(r.state!==C3)return h();for(p in i)if(m=i[p],m.name===r.name){if(m.state===D1)return kL(s);m.state===S3?(m.state=X2,m.timer.stop(),m.on.call("interrupt",e,e.__data__,m.index,m.group),delete i[p]):+p<t&&(m.state=X2,m.timer.stop(),m.on.call("cancel",e,e.__data__,m.index,m.group),delete i[p])}if(kL(function(){r.state===D1&&(r.state=S3,r.timer.restart(u,r.delay,r.time),u(d))}),r.state=R1,r.on.call("start",e,e.__data__,r.index,r.group),r.state===R1){for(r.state=D1,n=new Array(y=r.tween.length),p=0,g=-1;p<y;++p)(m=r.tween[p].value.call(e,e.__data__,r.index,r.group))&&(n[++g]=m);n.length=g+1}}function u(d){for(var p=d<r.duration?r.ease.call(null,d/r.duration):(r.timer.restart(h),r.state=q2,1),g=-1,y=n.length;++g<y;)n[g].call(e,p);r.state===q2&&(r.on.call("end",e,e.__data__,r.index,r.group),h())}function h(){r.state=X2,r.timer.stop(),delete i[t];for(var d in i)return;delete e.__transition}}var EL,CL,RE,C3,R1,D1,S3,q2,X2,Ru=D(()=>{S2(),ME(),EL=sM("start","end","cancel","interrupt"),CL=[],RE=0,C3=1,R1=2,D1=3,S3=4,q2=5,X2=6});function W$(e,t){var r=e.__transition,i,n,a=!0,s;if(r){t=t==null?null:t+"";for(s in r){if((i=r[s]).name!==t){a=!1;continue}n=i.state>R1&&i.state<q2,i.state=X2,i.timer.stop(),i.on.call(n?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete r[s]}a&&delete e.__transition}}var Y$=D(()=>{Ru()});function q$(e){return this.each(function(){W$(this,e)})}var X$=D(()=>{Y$()});function K$(e,t){var r,i;return function(){var n=Sc(this,e),a=n.tween;if(a!==r){i=r=a;for(var s=0,u=i.length;s<u;++s)if(i[s].name===t){i=i.slice(),i.splice(s,1);break}}n.tween=i}}function Z$(e,t,r){var i,n;if(typeof r!="function")throw new Error;return function(){var a=Sc(this,e),s=a.tween;if(s!==i){n=(i=s).slice();for(var u={name:t,value:r},h=0,d=n.length;h<d;++h)if(n[h].name===t){n[h]=u;break}h===d&&n.push(u)}a.tween=n}}function Q$(e,t){var r=this._id;if(e+="",arguments.length<2){for(var i=_l(this.node(),r).tween,n=0,a=i.length,s;n<a;++n)if((s=i[n]).name===e)return s.value;return null}return this.each((t==null?K$:Z$)(r,e,t))}function DE(e,t,r){var i=e._id;return e.each(function(){var n=Sc(this,i);(n.value||(n.value={}))[t]=r.apply(this,arguments)}),function(n){return _l(n,i).value[t]}}var A3=D(()=>{Ru()});function SL(e,t){var r;return(typeof t=="number"?Lu:t instanceof w0?rf:(r=w0(t))?(t=r,rf):pL)(e,t)}var AL=D(()=>{G2(),H2()});function J$(e){return function(){this.removeAttribute(e)}}function ez(e){return function(){this.removeAttributeNS(e.space,e.local)}}function tz(e,t,r){var i,n=r+"",a;return function(){var s=this.getAttribute(e);return s===n?null:s===i?a:a=t(i=s,r)}}function rz(e,t,r){var i,n=r+"",a;return function(){var s=this.getAttributeNS(e.space,e.local);return s===n?null:s===i?a:a=t(i=s,r)}}function iz(e,t,r){var i,n,a;return function(){var s,u=r(this),h;return u==null?void this.removeAttribute(e):(s=this.getAttribute(e),h=u+"",s===h?null:s===i&&h===n?a:(n=h,a=t(i=s,u)))}}function nz(e,t,r){var i,n,a;return function(){var s,u=r(this),h;return u==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),h=u+"",s===h?null:s===i&&h===n?a:(n=h,a=t(i=s,u)))}}function az(e,t){var r=L2(e),i=r==="transform"?yL:SL;return this.attrTween(e,typeof t=="function"?(r.local?nz:iz)(r,i,DE(this,"attr."+e,t)):t==null?(r.local?ez:J$)(r):(r.local?rz:tz)(r,i,t))}var sz=D(()=>{H2(),Cc(),A3(),AL()});function oz(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function lz(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function uz(e,t){var r,i;function n(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&lz(e,a)),r}return n._value=t,n}function hz(e,t){var r,i;function n(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&oz(e,a)),r}return n._value=t,n}function cz(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var i=L2(e);return this.tween(r,(i.local?uz:hz)(i,t))}var dz=D(()=>{Cc()});function pz(e,t){return function(){LE(this,e).delay=+t.apply(this,arguments)}}function fz(e,t){return t=+t,function(){LE(this,e).delay=t}}function gz(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?pz:fz)(t,e)):_l(this.node(),t).delay}var ML=D(()=>{Ru()});function mz(e,t){return function(){Sc(this,e).duration=+t.apply(this,arguments)}}function yz(e,t){return t=+t,function(){Sc(this,e).duration=t}}function vz(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?mz:yz)(t,e)):_l(this.node(),t).duration}var xz=D(()=>{Ru()});function LL(e,t){if(typeof t!="function")throw new Error;return function(){Sc(this,e).ease=t}}function Du(e){var t=this._id;return arguments.length?this.each(LL(t,e)):_l(this.node(),t).ease}var RL=D(()=>{Ru()});function bz(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;Sc(this,e).ease=r}}function K2(e){if(typeof e!="function")throw new Error;return this.each(bz(this._id,e))}var Gh=D(()=>{Ru()});function _z(e){typeof e!="function"&&(e=hM(e));for(var t=this._groups,r=t.length,i=new Array(r),n=0;n<r;++n)for(var a=t[n],s=a.length,u=i[n]=[],h,d=0;d<s;++d)(h=a[d])&&e.call(h,h.__data__,d,a)&&u.push(h);return new Mc(i,this._parents,this._name,this._id)}var bd=D(()=>{Cc(),hh()});function wz(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,i=t.length,n=r.length,a=Math.min(i,n),s=new Array(i),u=0;u<a;++u)for(var h=t[u],d=r[u],p=h.length,g=s[u]=new Array(p),y,m=0;m<p;++m)(y=h[m]||d[m])&&(g[m]=y);for(;u<i;++u)s[u]=t[u];return new Mc(s,this._parents,this._name,this._id)}var Z2=D(()=>{hh()});function IE(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function I1(e,t,r){var i,n,a=IE(t)?LE:Sc;return function(){var s=a(this,e),u=s.on;u!==i&&(n=(i=u).copy()).on(t,r),s.on=n}}function DL(e,t){var r=this._id;return arguments.length<2?_l(this.node(),r).on.on(e):this.each(I1(r,e,t))}var IL=D(()=>{Ru()});function M3(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function NE(){return this.on("end.remove",M3(this._id))}var kz=D(()=>{});function Tz(e){var t=this._name,r=this._id;typeof e!="function"&&(e=X4(e));for(var i=this._groups,n=i.length,a=new Array(n),s=0;s<n;++s)for(var u=i[s],h=u.length,d=a[s]=new Array(h),p,g,y=0;y<h;++y)(p=u[y])&&(g=e.call(p,p.__data__,y,u))&&("__data__"in p&&(g.__data__=p.__data__),d[y]=g,E3(d[y],t,r,y,d,_l(p,r)));return new Mc(a,this._parents,t,r)}var Ez=D(()=>{Cc(),hh(),Ru()});function Cz(e){var t=this._name,r=this._id;typeof e!="function"&&(e=K4(e));for(var i=this._groups,n=i.length,a=[],s=[],u=0;u<n;++u)for(var h=i[u],d=h.length,p,g=0;g<d;++g)if(p=h[g]){for(var y=e.call(p,p.__data__,g,h),m,x=_l(p,r),_=0,E=y.length;_<E;++_)(m=y[_])&&E3(m,t,r,_,y,x);a.push(y),s.push(p)}return new Mc(a,s,t,r)}var Sz=D(()=>{Cc(),hh(),Ru()});function OE(){return new BE(this._groups,this._parents)}var BE,Q2=D(()=>{Cc(),BE=b1.prototype.constructor});function J2(e,t){var r,i,n;return function(){var a=Qp(this,e),s=(this.style.removeProperty(e),Qp(this,e));return a===s?null:a===r&&s===i?n:n=t(r=a,i=s)}}function ev(e){return function(){this.style.removeProperty(e)}}function N1(e,t,r){var i,n=r+"",a;return function(){var s=Qp(this,e);return s===n?null:s===i?a:a=t(i=s,r)}}function tv(e,t,r){var i,n,a;return function(){var s=Qp(this,e),u=r(this),h=u+"";return u==null&&(h=u=(this.style.removeProperty(e),Qp(this,e))),s===h?null:s===i&&h===n?a:(n=h,a=t(i=s,u))}}function Ac(e,t){var r,i,n,a="style."+t,s="end."+a,u;return function(){var h=Sc(this,e),d=h.on,p=h.value[a]==null?u||(u=ev(t)):void 0;(d!==r||n!==p)&&(i=(r=d).copy()).on(s,n=p),h.on=i}}function Az(e,t,r){var i=(e+="")=="transform"?mL:SL;return t==null?this.styleTween(e,J2(e,i)).on("end.style."+e,ev(e)):typeof t=="function"?this.styleTween(e,tv(e,i,DE(this,"style."+e,t))).each(Ac(this._id,e)):this.styleTween(e,N1(e,i,t),r).on("end.style."+e,null)}var Mz=D(()=>{H2(),Cc(),Ru(),A3(),AL()});function Lz(e,t,r){return function(i){this.style.setProperty(e,t.call(this,i),r)}}function Rz(e,t,r){var i,n;function a(){var s=t.apply(this,arguments);return s!==n&&(i=(n=s)&&Lz(e,s,r)),i}return a._value=t,a}function Dz(e,t,r){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,Rz(e,t,r??""))}var Iz=D(()=>{});function Nz(e){return function(){this.textContent=e}}function NL(e){return function(){var t=e(this);this.textContent=t??""}}function OL(e){return this.tween("text",typeof e=="function"?NL(DE(this,"text",e)):Nz(e==null?"":e+""))}var Oz=D(()=>{A3()});function Bz(e){return function(t){this.textContent=e.call(this,t)}}function BL(e){var t,r;function i(){var n=e.apply(this,arguments);return n!==r&&(t=(r=n)&&Bz(n)),t}return i._value=e,i}function rv(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,BL(e))}var PL=D(()=>{});function L3(){for(var e=this._name,t=this._id,r=PE(),i=this._groups,n=i.length,a=0;a<n;++a)for(var s=i[a],u=s.length,h,d=0;d<u;++d)if(h=s[d]){var p=_l(h,t);E3(h,e,r,d,s,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new Mc(i,this._parents,e,r)}var Pz=D(()=>{hh(),Ru()});function R3(){var e,t,r=this,i=r._id,n=r.size();return new Promise(function(a,s){var u={value:s},h={value:function(){--n===0&&a()}};r.each(function(){var d=Sc(this,i),p=d.on;p!==e&&(t=(e=p).copy(),t._.cancel.push(u),t._.interrupt.push(u),t._.end.push(h)),d.on=t}),n===0&&a()})}var uu=D(()=>{Ru()});function Mc(e,t,r,i){this._groups=e,this._parents=t,this._name=r,this._id=i}function Fz(e){return b1().transition(e)}function PE(){return++iv}var iv,wl,hh=D(()=>{Cc(),sz(),dz(),ML(),xz(),RL(),Gh(),bd(),Z2(),IL(),kz(),Ez(),Sz(),Q2(),Mz(),Iz(),Oz(),PL(),Pz(),A3(),uu(),iv=0,wl=b1.prototype,Mc.prototype=Fz.prototype={constructor:Mc,select:Tz,selectAll:Cz,selectChild:wl.selectChild,selectChildren:wl.selectChildren,filter:_z,merge:wz,selection:OE,transition:L3,call:wl.call,nodes:wl.nodes,node:wl.node,size:wl.size,empty:wl.empty,each:wl.each,on:DL,attr:az,attrTween:cz,style:Az,styleTween:Dz,text:OL,textTween:rv,remove:NE,tween:Q$,delay:gz,duration:vz,ease:Du,easeVarying:K2,end:R3,[Symbol.iterator]:wl[Symbol.iterator]}});function FL(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var $L=D(()=>{}),zL=D(()=>{$L()});function Uh(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function GL(e){var t,r;e instanceof Mc?(t=e._id,e=e._name):(t=PE(),(r=nv).time=EE(),e=e==null?null:e+"");for(var i=this._groups,n=i.length,a=0;a<n;++a)for(var s=i[a],u=s.length,h,d=0;d<u;++d)(h=s[d])&&E3(h,e,t,d,s,r||Uh(h,t));return new Mc(i,this._parents,e,t)}var nv,FE=D(()=>{hh(),Ru(),zL(),ME(),nv={time:null,delay:0,duration:250,ease:FL}}),UL=D(()=>{Cc(),X$(),FE(),b1.prototype.interrupt=q$,b1.prototype.transition=GL}),$E=D(()=>{UL()}),$z=D(()=>{}),jL=D(()=>{}),zz=D(()=>{});function HL(e){return[+e[0],+e[1]]}function Gz(e){return[HL(e[0]),HL(e[1])]}function D3(e){return{type:e}}var VL,WL,Mte,Lte,A0,zE,GE=D(()=>{$E(),$z(),jL(),zz(),{abs:VL,max:WL,min:Mte}=Math,Lte={name:"x",handles:["w","e"].map(D3),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},A0={name:"y",handles:["n","s"].map(D3),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},zE={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(D3),input:function(e){return e==null?null:Gz(e)},output:function(e){return e}}}),Uz=D(()=>{GE()});function YL(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function jz(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return YL;let r=10**t;return function(i){this._+=i[0];for(let n=1,a=i.length;n<a;++n)this._+=Math.round(arguments[n]*r)/r+i[n]}}function qL(){return new I3}var O1,av,jh,XL,I3,KL=D(()=>{O1=Math.PI,av=2*O1,jh=1e-6,XL=av-jh,I3=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?YL:jz(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,r,i){this._append`Q${+e},${+t},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,t,r,i,n,a){this._append`C${+e},${+t},${+r},${+i},${this._x1=+n},${this._y1=+a}`}arcTo(e,t,r,i,n){if(e=+e,t=+t,r=+r,i=+i,n=+n,n<0)throw new Error(`negative radius: ${n}`);let a=this._x1,s=this._y1,u=r-e,h=i-t,d=a-e,p=s-t,g=d*d+p*p;if(this._x1===null)this._append`M${this._x1=e},${this._y1=t}`;else if(g>jh)if(!(Math.abs(p*u-h*d)>jh)||!n)this._append`L${this._x1=e},${this._y1=t}`;else{let y=r-a,m=i-s,x=u*u+h*h,_=y*y+m*m,E=Math.sqrt(x),w=Math.sqrt(g),C=n*Math.tan((O1-Math.acos((x+g-_)/(2*E*w)))/2),A=C/w,M=C/E;Math.abs(A-1)>jh&&this._append`L${e+A*d},${t+A*p}`,this._append`A${n},${n},0,0,${+(p*y>d*m)},${this._x1=e+M*u},${this._y1=t+M*h}`}}arc(e,t,r,i,n,a){if(e=+e,t=+t,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),u=r*Math.sin(i),h=e+s,d=t+u,p=1^a,g=a?i-n:n-i;this._x1===null?this._append`M${h},${d}`:(Math.abs(this._x1-h)>jh||Math.abs(this._y1-d)>jh)&&this._append`L${h},${d}`,r&&(g<0&&(g=g%av+av),g>XL?this._append`A${r},${r},0,1,${p},${e-s},${t-u}A${r},${r},0,1,${p},${this._x1=h},${this._y1=d}`:g>jh&&this._append`A${r},${r},0,${+(g>=O1)},${p},${this._x1=e+r*Math.cos(n)},${this._y1=t+r*Math.sin(n)}`)}rect(e,t,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}},qL.prototype=I3.prototype}),ZL=D(()=>{KL()}),Hz=D(()=>{}),Vz=D(()=>{}),QL=D(()=>{}),Wz=D(()=>{}),Yz=D(()=>{}),qz=D(()=>{}),B1=D(()=>{});function sv(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function M0(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,i=e.slice(0,r);return[i.length>1?i[0]+i.slice(2):i,+e.slice(r+1)]}var ov=D(()=>{});function _d(e){return e=M0(Math.abs(e)),e?e[1]:NaN}var L0=D(()=>{ov()});function N3(e,t){return function(r,i){for(var n=r.length,a=[],s=0,u=e[0],h=0;n>0&&u>0&&(h+u+1>i&&(u=Math.max(1,i-h)),a.push(r.substring(n-=u,n+u)),!((h+=u+1)>i));)u=e[s=(s+1)%e.length];return a.reverse().join(t)}}var af=D(()=>{});function O3(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var lv=D(()=>{});function uv(e){if(!(t=JL.exec(e)))throw new Error("invalid format: "+e);var t;return new hv({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function hv(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}var JL,cv=D(()=>{JL=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i,uv.prototype=hv.prototype,hv.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type}});function UE(e){e:for(var t=e.length,r=1,i=-1,n;r<t;++r)switch(e[r]){case".":i=n=r;break;case"0":i===0&&(i=r),n=r;break;default:if(!+e[r])break e;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(n+1):e}var Xz=D(()=>{});function eR(e,t){var r=M0(e,t);if(!r)return e+"";var i=r[0],n=r[1],a=n-(tR=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,s=i.length;return a===s?i:a>s?i+new Array(a-s+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+M0(e,Math.max(0,t+a-1))[0]}var tR,rR=D(()=>{ov()});function B3(e,t){var r=M0(e,t);if(!r)return e+"";var i=r[0],n=r[1];return n<0?"0."+new Array(-n).join("0")+i:i.length>n+1?i.slice(0,n+1)+"."+i.slice(n+1):i+new Array(n-i.length+2).join("0")}var iR=D(()=>{ov()}),jE,Kz=D(()=>{ov(),rR(),iR(),jE={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:sv,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>B3(e*100,t),r:B3,s:eR,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)}});function HE(e){return e}var nR=D(()=>{});function VE(e){var t=e.grouping===void 0||e.thousands===void 0?HE:N3(P1.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",n=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?HE:O3(P1.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"\u2212":e.minus+"",h=e.nan===void 0?"NaN":e.nan+"";function d(g){g=uv(g);var y=g.fill,m=g.align,x=g.sign,_=g.symbol,E=g.zero,w=g.width,C=g.comma,A=g.precision,M=g.trim,N=g.type;N==="n"?(C=!0,N="g"):jE[N]||(A===void 0&&(A=12),M=!0,N="g"),(E||y==="0"&&m==="=")&&(E=!0,y="0",m="=");var B=_==="$"?r:_==="#"&&/[boxX]/.test(N)?"0"+N.toLowerCase():"",O=_==="$"?i:/[%p]/.test(N)?s:"",L=jE[N],$=/[defgprs%]/.test(N);A=A===void 0?6:/[gprs]/.test(N)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function G(z){var F=B,X=O,I,j,H;if(N==="c")X=L(z)+X,z="";else{z=+z;var V=z<0||1/z<0;if(z=isNaN(z)?h:L(Math.abs(z),A),M&&(z=UE(z)),V&&+z==0&&x!=="+"&&(V=!1),F=(V?x==="("?x:u:x==="-"||x==="("?"":x)+F,X=(N==="s"?P3[8+tR/3]:"")+X+(V&&x==="("?")":""),$){for(I=-1,j=z.length;++I<j;)if(H=z.charCodeAt(I),48>H||H>57){X=(H===46?n+z.slice(I+1):z.slice(I))+X,z=z.slice(0,I);break}}}C&&!E&&(z=t(z,1/0));var P=F.length+z.length+X.length,q=P<w?new Array(w-P+1).join(y):"";switch(C&&E&&(z=t(q+z,q.length?w-X.length:1/0),q=""),m){case"<":z=F+z+X+q;break;case"=":z=F+q+z+X;break;case"^":z=q.slice(0,P=q.length>>1)+F+z+X+q.slice(P);break;default:z=q+F+z+X;break}return a(z)}return G.toString=function(){return g+""},G}function p(g,y){var m=d((g=uv(g),g.type="f",g)),x=Math.max(-8,Math.min(8,Math.floor(_d(y)/3)))*3,_=Math.pow(10,-x),E=P3[8+x/3];return function(w){return m(_*w)+E}}return{format:d,formatPrefix:p}}var P1,P3,WE=D(()=>{L0(),af(),lv(),cv(),Xz(),Kz(),rR(),nR(),P1=Array.prototype.map,P3=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"]});function F3(e){return sf=VE(e),$3=sf.format,Hh=sf.formatPrefix,sf}var sf,$3,Hh,Vh=D(()=>{WE(),F3({thousands:",",grouping:[3],currency:["$",""]})});function Zz(e){return Math.max(0,-_d(Math.abs(e)))}var z3=D(()=>{L0()});function Qz(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(_d(t)/3)))*3-_d(Math.abs(e)))}var Jz=D(()=>{L0()});function eG(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,_d(t)-_d(e))+1}var tG=D(()=>{L0()}),G3=D(()=>{Vh(),cv(),z3(),Jz(),tG()}),aR=D(()=>{}),rG=D(()=>{}),iG=D(()=>{}),nG=D(()=>{});function U3(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}var j3=D(()=>{});function H3(){var e=new T2,t=[],r=[],i=YE;function n(a){let s=e.get(a);if(s===void 0){if(i!==YE)return i;e.set(a,s=t.push(a)-1)}return r[s%r.length]}return n.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new T2;for(let s of a)e.has(s)||e.set(s,t.push(s)-1);return n},n.range=function(a){return arguments.length?(r=Array.from(a),n):r.slice()},n.unknown=function(a){return arguments.length?(i=a,n):i},n.copy=function(){return H3(t,r).unknown(i)},U3.apply(n,arguments),n}var YE,sR=D(()=>{yd(),j3(),YE=Symbol("implicit")});function qE(){var e=H3().unknown(void 0),t=e.domain,r=e.range,i=0,n=1,a,s,u=!1,h=0,d=0,p=.5;delete e.unknown;function g(){var y=t().length,m=n<i,x=m?n:i,_=m?i:n;a=(_-x)/Math.max(1,y-h+d*2),u&&(a=Math.floor(a)),x+=(_-x-a*(y-h))*p,s=a*(1-h),u&&(x=Math.round(x),s=Math.round(s));var E=_F(y).map(function(w){return x+a*w});return r(m?E.reverse():E)}return e.domain=function(y){return arguments.length?(t(y),g()):t()},e.range=function(y){return arguments.length?([i,n]=y,i=+i,n=+n,g()):[i,n]},e.rangeRound=function(y){return[i,n]=y,i=+i,n=+n,u=!0,g()},e.bandwidth=function(){return s},e.step=function(){return a},e.round=function(y){return arguments.length?(u=!!y,g()):u},e.padding=function(y){return arguments.length?(h=Math.min(1,d=+y),g()):h},e.paddingInner=function(y){return arguments.length?(h=Math.min(1,y),g()):h},e.paddingOuter=function(y){return arguments.length?(d=+y,g()):d},e.align=function(y){return arguments.length?(p=Math.max(0,Math.min(1,y)),g()):p},e.copy=function(){return qE(t(),[i,n]).round(u).paddingInner(h).paddingOuter(d).align(p)},U3.apply(g(),arguments)}var aG=D(()=>{yd(),j3(),sR()});function sG(e){return function(){return e}}var oG=D(()=>{});function lG(e){return+e}var uG=D(()=>{});function F1(e){return e}function XE(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:sG(isNaN(t)?NaN:.5)}function hG(e,t){var r;return e>t&&(r=e,e=t,t=r),function(i){return Math.max(e,Math.min(t,i))}}function cG(e,t,r){var i=e[0],n=e[1],a=t[0],s=t[1];return n<i?(i=XE(n,i),a=r(s,a)):(i=XE(i,n),a=r(a,s)),function(u){return a(i(u))}}function dG(e,t,r){var i=Math.min(e.length,t.length)-1,n=new Array(i),a=new Array(i),s=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<i;)n[s]=XE(e[s],e[s+1]),a[s]=r(t[s],t[s+1]);return function(u){var h=P4(e,u,1,i)-1;return a[h](n[h](u))}}function oR(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function pG(){var e=KE,t=KE,r=kE,i,n,a,s=F1,u,h,d;function p(){var y=Math.min(e.length,t.length);return s!==F1&&(s=hG(e[0],e[y-1])),u=y>2?dG:cG,h=d=null,g}function g(y){return y==null||isNaN(y=+y)?a:(h||(h=u(e.map(i),t,r)))(i(s(y)))}return g.invert=function(y){return s(n((d||(d=u(t,e.map(i),Lu)))(y)))},g.domain=function(y){return arguments.length?(e=Array.from(y,lG),p()):e.slice()},g.range=function(y){return arguments.length?(t=Array.from(y),p()):t.slice()},g.rangeRound=function(y){return t=Array.from(y),r=I$,p()},g.clamp=function(y){return arguments.length?(s=y?!0:F1,p()):s!==F1},g.interpolate=function(y){return arguments.length?(r=y,p()):r},g.unknown=function(y){return arguments.length?(a=y,g):a},function(y,m){return i=y,n=m,p()}}function lR(){return pG()(F1,F1)}var KE,uR=D(()=>{yd(),H2(),oG(),uG(),KE=[0,1]});function fG(e,t,r,i){var n=$4(e,t,r),a;switch(i=uv(i??",f"),i.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(a=Qz(n,s))&&(i.precision=a),Hh(i,s)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(a=eG(n,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=a-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(a=Zz(n))&&(i.precision=a-(i.type==="%")*2);break}}return $3(i)}var gG=D(()=>{yd(),G3()});function mG(e){var t=e.domain;return e.ticks=function(r){var i=t();return vF(i[0],i[i.length-1],r??10)},e.tickFormat=function(r,i){var n=t();return fG(n[0],n[n.length-1],r??10,i)},e.nice=function(r){r==null&&(r=10);var i=t(),n=0,a=i.length-1,s=i[n],u=i[a],h,d,p=10;for(u<s&&(d=s,s=u,u=d,d=n,n=a,a=d);p-- >0;){if(d=F4(s,u,r),d===h)return i[n]=s,i[a]=u,t(i);if(d>0)s=Math.floor(s/d)*d,u=Math.ceil(u/d)*d;else if(d<0)s=Math.ceil(s*d)/d,u=Math.floor(u*d)/d;else break;h=d}return e},e}function $1(){var e=lR();return e.copy=function(){return oR(e,$1())},U3.apply(e,arguments),mG(e)}var yG=D(()=>{yd(),uR(),j3(),gG()});function vG(e,t){e=e.slice();var r=0,i=e.length-1,n=e[r],a=e[i],s;return a<n&&(s=r,r=i,i=s,s=n,n=a,a=s),e[r]=t.floor(n),e[i]=t.ceil(a),e}var xG=D(()=>{});function wo(e,t,r,i){function n(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return n.floor=a=>(e(a=new Date(+a)),a),n.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),n.round=a=>{let s=n(a),u=n.ceil(a);return a-s<u-a?s:u},n.offset=(a,s)=>(t(a=new Date(+a),s==null?1:Math.floor(s)),a),n.range=(a,s,u)=>{let h=[];if(a=n.ceil(a),u=u==null?1:Math.floor(u),!(a<s)||!(u>0))return h;let d;do h.push(d=new Date(+a)),t(a,u),e(a);while(d<a&&a<s);return h},n.filter=a=>wo(s=>{if(s>=s)for(;e(s),!a(s);)s.setTime(s-1)},(s,u)=>{if(s>=s)if(u<0)for(;++u<=0;)for(;t(s,-1),!a(s););else for(;--u>=0;)for(;t(s,1),!a(s););}),r&&(n.count=(a,s)=>(V3.setTime(+a),W3.setTime(+s),e(V3),e(W3),Math.floor(r(V3,W3))),n.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?n.filter(i?s=>i(s)%a===0:s=>n.count(0,s)%a===0):n)),n}var V3,W3,wd=D(()=>{V3=new Date,W3=new Date}),of,bG,hR=D(()=>{wd(),of=wo(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e),of.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?wo(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):of),bG=of.range}),kd,_G,cR=D(()=>{wd(),kd=wo(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*1e3)},(e,t)=>(t-e)/1e3,e=>e.getUTCSeconds()),_G=kd.range}),z1,wG,ZE,kG,dR=D(()=>{wd(),z1=wo(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*1e3)},(e,t)=>{e.setTime(+e+t*6e4)},(e,t)=>(t-e)/6e4,e=>e.getMinutes()),wG=z1.range,ZE=wo(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*6e4)},(e,t)=>(t-e)/6e4,e=>e.getUTCMinutes()),kG=ZE.range}),G1,TG,QE,EG,pR=D(()=>{wd(),G1=wo(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*1e3-e.getMinutes()*6e4)},(e,t)=>{e.setTime(+e+t*36e5)},(e,t)=>(t-e)/36e5,e=>e.getHours()),TG=G1.range,QE=wo(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*36e5)},(e,t)=>(t-e)/36e5,e=>e.getUTCHours()),EG=QE.range}),kl,CG,dv,Td,JE,SG,fR=D(()=>{wd(),kl=wo(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*6e4)/864e5,e=>e.getDate()-1),CG=kl.range,dv=wo(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/864e5,e=>e.getUTCDate()-1),Td=dv.range,JE=wo(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/864e5,e=>Math.floor(e/864e5)),SG=JE.range});function lf(e){return wo(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/6048e5)}function U1(e){return wo(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/6048e5)}var pv,fv,Y3,eC,uf,gR,mR,tC,AG,MG,yR,LG,RG,DG,q3,ko,vR,xR,hf,bR,_R,IG,NG,OG,BG,PG,FG,rC,X3=D(()=>{wd(),pv=lf(0),fv=lf(1),Y3=lf(2),eC=lf(3),uf=lf(4),gR=lf(5),mR=lf(6),tC=pv.range,AG=fv.range,MG=Y3.range,yR=eC.range,LG=uf.range,RG=gR.range,DG=mR.range,q3=U1(0),ko=U1(1),vR=U1(2),xR=U1(3),hf=U1(4),bR=U1(5),_R=U1(6),IG=q3.range,NG=ko.range,OG=vR.range,BG=xR.range,PG=hf.range,FG=bR.range,rC=_R.range}),cf,jl,Ed,R0,wR=D(()=>{wd(),cf=wo(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth()),jl=cf.range,Ed=wo(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth()),R0=Ed.range}),Lc,$G,Cd,kR,TR=D(()=>{wd(),Lc=wo(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear()),Lc.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:wo(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)}),$G=Lc.range,Cd=wo(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear()),Cd.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:wo(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)}),kR=Cd.range});function ER(e,t,r,i,n,a){let s=[[kd,1,1e3],[kd,5,5e3],[kd,15,15e3],[kd,30,3e4],[a,1,6e4],[a,5,3e5],[a,15,9e5],[a,30,18e5],[n,1,36e5],[n,3,108e5],[n,6,216e5],[n,12,432e5],[i,1,864e5],[i,2,1728e5],[r,1,6048e5],[t,1,2592e6],[t,3,7776e6],[e,1,31536e6]];function u(d,p,g){let y=p<d;y&&([d,p]=[p,d]);let m=g&&typeof g.range=="function"?g:h(d,p,g),x=m?m.range(d,+p+1):[];return y?x.reverse():x}function h(d,p,g){let y=Math.abs(p-d)/g,m=dT(([,,E])=>E).right(s,y);if(m===s.length)return e.every($4(d/31536e6,p/31536e6,g));if(m===0)return of.every(Math.max($4(d,p,g),1));let[x,_]=s[y/s[m-1][2]<s[m][2]/y?m-1:m];return x.every(_)}return[u,h]}var zG,GG,CR,SR,UG=D(()=>{yd(),hR(),cR(),dR(),pR(),fR(),X3(),wR(),TR(),[zG,GG]=ER(Cd,Ed,q3,JE,QE,ZE),[CR,SR]=ER(Lc,cf,pv,kl,G1,z1)}),iC=D(()=>{hR(),cR(),dR(),pR(),fR(),X3(),wR(),TR(),UG()});function j1(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function nC(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Iu(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function K3(e){var t=e.dateTime,r=e.date,i=e.time,n=e.periods,a=e.days,s=e.shortDays,u=e.months,h=e.shortMonths,d=Sd(n),p=gv(n),g=Sd(a),y=gv(a),m=Sd(s),x=gv(s),_=Sd(u),E=gv(u),w=Sd(h),C=gv(h),A={a:V,A:P,b:q,B:Z,c:null,d:H1,e:H1,f:uC,g:Fte,G:yv,H:mv,I:Q3,j:V1,L:lC,m:J3,M:Dte,p:J,q:ae,Q:K,s:ee,S:Rc,u:Ite,U:Nte,V:Ote,w:Bte,W:Pte,x:null,X:null,y:tU,Y:rU,Z:iU,"%":W},M={a:ue,A:be,b:Le,B:xe,c:null,d:hC,e:hC,f:oU,g:T,G:R,H:nU,I:aU,j:sU,L:IR,m:lU,M:NR,p:Ae,q:oe,Q:K,s:ee,S:OR,u:uU,U:hU,V:l,w:f,W:v,x:null,X:null,y:b,Y:S,Z:U,"%":W},N={a:G,A:z,b:F,B:X,c:I,d:Z3,e:Z3,f:ZG,g:LR,G:MR,H:oC,I:oC,j:XG,L:DR,m:qG,M:KG,p:$,q:sC,Q:JG,s:Rte,S:RR,u:AR,U:HG,V:VG,w:jG,W:WG,x:j,X:H,y:LR,Y:MR,Z:YG,"%":QG};A.x=B(r,A),A.X=B(i,A),A.c=B(t,A),M.x=B(r,M),M.X=B(i,M),M.c=B(t,M);function B(he,le){return function(ke){var pe=[],qe=-1,me=0,st=he.length,we,Et,wt;for(ke instanceof Date||(ke=new Date(+ke));++qe<st;)he.charCodeAt(qe)===37&&(pe.push(he.slice(me,qe)),(Et=se[we=he.charAt(++qe)])!=null?we=he.charAt(++qe):Et=we==="e"?" ":"0",(wt=le[we])&&(we=wt(ke,Et)),pe.push(we),me=qe+1);return pe.push(he.slice(me,qe)),pe.join("")}}function O(he,le){return function(ke){var pe=Iu(1900,void 0,1),qe=L(pe,he,ke+="",0),me,st;if(qe!=ke.length)return null;if("Q"in pe)return new Date(pe.Q);if("s"in pe)return new Date(pe.s*1e3+("L"in pe?pe.L:0));if(le&&!("Z"in pe)&&(pe.Z=0),"p"in pe&&(pe.H=pe.H%12+pe.p*12),pe.m===void 0&&(pe.m="q"in pe?pe.q:0),"V"in pe){if(pe.V<1||pe.V>53)return null;"w"in pe||(pe.w=1),"Z"in pe?(me=nC(Iu(pe.y,0,1)),st=me.getUTCDay(),me=st>4||st===0?ko.ceil(me):ko(me),me=dv.offset(me,(pe.V-1)*7),pe.y=me.getUTCFullYear(),pe.m=me.getUTCMonth(),pe.d=me.getUTCDate()+(pe.w+6)%7):(me=j1(Iu(pe.y,0,1)),st=me.getDay(),me=st>4||st===0?fv.ceil(me):fv(me),me=kl.offset(me,(pe.V-1)*7),pe.y=me.getFullYear(),pe.m=me.getMonth(),pe.d=me.getDate()+(pe.w+6)%7)}else("W"in pe||"U"in pe)&&("w"in pe||(pe.w="u"in pe?pe.u%7:"W"in pe?1:0),st="Z"in pe?nC(Iu(pe.y,0,1)).getUTCDay():j1(Iu(pe.y,0,1)).getDay(),pe.m=0,pe.d="W"in pe?(pe.w+6)%7+pe.W*7-(st+5)%7:pe.w+pe.U*7-(st+6)%7);return"Z"in pe?(pe.H+=pe.Z/100|0,pe.M+=pe.Z%100,nC(pe)):j1(pe)}}function L(he,le,ke,pe){for(var qe=0,me=le.length,st=ke.length,we,Et;qe<me;){if(pe>=st)return-1;if(we=le.charCodeAt(qe++),we===37){if(we=le.charAt(qe++),Et=N[we in se?le.charAt(qe++):we],!Et||(pe=Et(he,ke,pe))<0)return-1}else if(we!=ke.charCodeAt(pe++))return-1}return pe}function $(he,le,ke){var pe=d.exec(le.slice(ke));return pe?(he.p=p.get(pe[0].toLowerCase()),ke+pe[0].length):-1}function G(he,le,ke){var pe=m.exec(le.slice(ke));return pe?(he.w=x.get(pe[0].toLowerCase()),ke+pe[0].length):-1}function z(he,le,ke){var pe=g.exec(le.slice(ke));return pe?(he.w=y.get(pe[0].toLowerCase()),ke+pe[0].length):-1}function F(he,le,ke){var pe=w.exec(le.slice(ke));return pe?(he.m=C.get(pe[0].toLowerCase()),ke+pe[0].length):-1}function X(he,le,ke){var pe=_.exec(le.slice(ke));return pe?(he.m=E.get(pe[0].toLowerCase()),ke+pe[0].length):-1}function I(he,le,ke){return L(he,t,le,ke)}function j(he,le,ke){return L(he,r,le,ke)}function H(he,le,ke){return L(he,i,le,ke)}function V(he){return s[he.getDay()]}function P(he){return a[he.getDay()]}function q(he){return h[he.getMonth()]}function Z(he){return u[he.getMonth()]}function J(he){return n[+(he.getHours()>=12)]}function ae(he){return 1+~~(he.getMonth()/3)}function ue(he){return s[he.getUTCDay()]}function be(he){return a[he.getUTCDay()]}function Le(he){return h[he.getUTCMonth()]}function xe(he){return u[he.getUTCMonth()]}function Ae(he){return n[+(he.getUTCHours()>=12)]}function oe(he){return 1+~~(he.getUTCMonth()/3)}return{format:function(he){var le=B(he+="",A);return le.toString=function(){return he},le},parse:function(he){var le=O(he+="",!1);return le.toString=function(){return he},le},utcFormat:function(he){var le=B(he+="",M);return le.toString=function(){return he},le},utcParse:function(he){var le=O(he+="",!0);return le.toString=function(){return he},le}}}function Ia(e,t,r){var i=e<0?"-":"",n=(i?-e:e)+"",a=n.length;return i+(a<r?new Array(r-a+1).join(t)+n:n)}function aC(e){return e.replace(Ie,"\\$&")}function Sd(e){return new RegExp("^(?:"+e.map(aC).join("|")+")","i")}function gv(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function jG(e,t,r){var i=re.exec(t.slice(r,r+1));return i?(e.w=+i[0],r+i[0].length):-1}function AR(e,t,r){var i=re.exec(t.slice(r,r+1));return i?(e.u=+i[0],r+i[0].length):-1}function HG(e,t,r){var i=re.exec(t.slice(r,r+2));return i?(e.U=+i[0],r+i[0].length):-1}function VG(e,t,r){var i=re.exec(t.slice(r,r+2));return i?(e.V=+i[0],r+i[0].length):-1}function WG(e,t,r){var i=re.exec(t.slice(r,r+2));return i?(e.W=+i[0],r+i[0].length):-1}function MR(e,t,r){var i=re.exec(t.slice(r,r+4));return i?(e.y=+i[0],r+i[0].length):-1}function LR(e,t,r){var i=re.exec(t.slice(r,r+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),r+i[0].length):-1}function YG(e,t,r){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),r+i[0].length):-1}function sC(e,t,r){var i=re.exec(t.slice(r,r+1));return i?(e.q=i[0]*3-3,r+i[0].length):-1}function qG(e,t,r){var i=re.exec(t.slice(r,r+2));return i?(e.m=i[0]-1,r+i[0].length):-1}function Z3(e,t,r){var i=re.exec(t.slice(r,r+2));return i?(e.d=+i[0],r+i[0].length):-1}function XG(e,t,r){var i=re.exec(t.slice(r,r+3));return i?(e.m=0,e.d=+i[0],r+i[0].length):-1}function oC(e,t,r){var i=re.exec(t.slice(r,r+2));return i?(e.H=+i[0],r+i[0].length):-1}function KG(e,t,r){var i=re.exec(t.slice(r,r+2));return i?(e.M=+i[0],r+i[0].length):-1}function RR(e,t,r){var i=re.exec(t.slice(r,r+2));return i?(e.S=+i[0],r+i[0].length):-1}function DR(e,t,r){var i=re.exec(t.slice(r,r+3));return i?(e.L=+i[0],r+i[0].length):-1}function ZG(e,t,r){var i=re.exec(t.slice(r,r+6));return i?(e.L=Math.floor(i[0]/1e3),r+i[0].length):-1}function QG(e,t,r){var i=Me.exec(t.slice(r,r+1));return i?r+i[0].length:-1}function JG(e,t,r){var i=re.exec(t.slice(r));return i?(e.Q=+i[0],r+i[0].length):-1}function Rte(e,t,r){var i=re.exec(t.slice(r));return i?(e.s=+i[0],r+i[0].length):-1}function H1(e,t){return Ia(e.getDate(),t,2)}function mv(e,t){return Ia(e.getHours(),t,2)}function Q3(e,t){return Ia(e.getHours()%12||12,t,2)}function V1(e,t){return Ia(1+kl.count(Lc(e),e),t,3)}function lC(e,t){return Ia(e.getMilliseconds(),t,3)}function uC(e,t){return lC(e,t)+"000"}function J3(e,t){return Ia(e.getMonth()+1,t,2)}function Dte(e,t){return Ia(e.getMinutes(),t,2)}function Rc(e,t){return Ia(e.getSeconds(),t,2)}function Ite(e){var t=e.getDay();return t===0?7:t}function Nte(e,t){return Ia(pv.count(Lc(e)-1,e),t,2)}function eU(e){var t=e.getDay();return t>=4||t===0?uf(e):uf.ceil(e)}function Ote(e,t){return e=eU(e),Ia(uf.count(Lc(e),e)+(Lc(e).getDay()===4),t,2)}function Bte(e){return e.getDay()}function Pte(e,t){return Ia(fv.count(Lc(e)-1,e),t,2)}function tU(e,t){return Ia(e.getFullYear()%100,t,2)}function Fte(e,t){return e=eU(e),Ia(e.getFullYear()%100,t,2)}function rU(e,t){return Ia(e.getFullYear()%1e4,t,4)}function yv(e,t){var r=e.getDay();return e=r>=4||r===0?uf(e):uf.ceil(e),Ia(e.getFullYear()%1e4,t,4)}function iU(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ia(t/60|0,"0",2)+Ia(t%60,"0",2)}function hC(e,t){return Ia(e.getUTCDate(),t,2)}function nU(e,t){return Ia(e.getUTCHours(),t,2)}function aU(e,t){return Ia(e.getUTCHours()%12||12,t,2)}function sU(e,t){return Ia(1+dv.count(Cd(e),e),t,3)}function IR(e,t){return Ia(e.getUTCMilliseconds(),t,3)}function oU(e,t){return IR(e,t)+"000"}function lU(e,t){return Ia(e.getUTCMonth()+1,t,2)}function NR(e,t){return Ia(e.getUTCMinutes(),t,2)}function OR(e,t){return Ia(e.getUTCSeconds(),t,2)}function uU(e){var t=e.getUTCDay();return t===0?7:t}function hU(e,t){return Ia(q3.count(Cd(e)-1,e),t,2)}function o(e){var t=e.getUTCDay();return t>=4||t===0?hf(e):hf.ceil(e)}function l(e,t){return e=o(e),Ia(hf.count(Cd(e),e)+(Cd(e).getUTCDay()===4),t,2)}function f(e){return e.getUTCDay()}function v(e,t){return Ia(ko.count(Cd(e)-1,e),t,2)}function b(e,t){return Ia(e.getUTCFullYear()%100,t,2)}function T(e,t){return e=o(e),Ia(e.getUTCFullYear()%100,t,2)}function S(e,t){return Ia(e.getUTCFullYear()%1e4,t,4)}function R(e,t){var r=e.getUTCDay();return e=r>=4||r===0?hf(e):hf.ceil(e),Ia(e.getUTCFullYear()%1e4,t,4)}function U(){return"+0000"}function W(){return"%"}function K(e){return+e}function ee(e){return Math.floor(+e/1e3)}var se,re,Me,Ie,Ee=D(()=>{iC(),se={"-":"",_:" ",0:"0"},re=/^\s*\d+/,Me=/^%/,Ie=/[\\^$*+?|[\]().{}]/g});function Oe(e){return et=K3(e),kt=et.format,it=et.parse,Lt=et.utcFormat,Dt=et.utcParse,et}var et,kt,it,Lt,Dt,Pt=D(()=>{Ee(),Oe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})}),Jr=D(()=>{Pt()});function di(e){return new Date(e)}function Ur(e){return e instanceof Date?+e:+new Date(+e)}function $r(e,t,r,i,n,a,s,u,h,d){var p=lR(),g=p.invert,y=p.domain,m=d(".%L"),x=d(":%S"),_=d("%I:%M"),E=d("%I %p"),w=d("%a %d"),C=d("%b %d"),A=d("%B"),M=d("%Y");function N(B){return(h(B)<B?m:u(B)<B?x:s(B)<B?_:a(B)<B?E:i(B)<B?n(B)<B?w:C:r(B)<B?A:M)(B)}return p.invert=function(B){return new Date(g(B))},p.domain=function(B){return arguments.length?y(Array.from(B,Ur)):y().map(di)},p.ticks=function(B){var O=y();return e(O[0],O[O.length-1],B??10)},p.tickFormat=function(B,O){return O==null?N:d(O)},p.nice=function(B){var O=y();return(!B||typeof B.range!="function")&&(B=t(O[0],O[O.length-1],B??10)),B?y(vG(O,B)):p},p.copy=function(){return oR(p,$r(e,t,r,i,n,a,s,u,h,d))},p}function Ki(){return U3.apply($r(CR,SR,Lc,cf,pv,kl,G1,z1,kd,kt).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}var gn=D(()=>{iC(),Jr(),uR(),j3(),xG()}),Ft=D(()=>{aG(),yG(),sR(),gn()});function Ri(e){for(var t=e.length/6|0,r=new Array(t),i=0;i<t;)r[i]="#"+e.slice(i*6,++i*6);return r}var Yt=D(()=>{}),Tr,We=D(()=>{Yt(),Tr=Ri("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab")}),ot=D(()=>{We()});function Ze(e){return function(){return e}}var Xt=D(()=>{});function Qt(e){return e>1?0:e<-1?Jn:Math.acos(e)}function yr(e){return e>=1?co:e<=-1?-co:Math.asin(e)}var mr,Lr,zi,Oi,jn,Dn,Yn,ua,Jn,co,To,lr=D(()=>{mr=Math.abs,Lr=Math.atan2,zi=Math.cos,Oi=Math.max,jn=Math.min,Dn=Math.sin,Yn=Math.sqrt,ua=1e-12,Jn=Math.PI,co=Jn/2,To=2*Jn});function pi(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{let i=Math.floor(r);if(!(i>=0))throw new RangeError(`invalid digits: ${r}`);t=i}return e},()=>new I3(t)}var Ti=D(()=>{ZL()});function Yi(e){return e.innerRadius}function Eo(e){return e.outerRadius}function BR(e){return e.startAngle}function cU(e){return e.endAngle}function dU(e){return e&&e.padAngle}function uOe(e,t,r,i,n,a,s,u){var h=r-e,d=i-t,p=s-n,g=u-a,y=g*h-p*d;if(!(y*y<ua))return y=(p*(t-a)-g*(e-n))/y,[e+y*h,t+y*d]}function PR(e,t,r,i,n,a,s){var u=e-r,h=t-i,d=(s?a:-a)/Yn(u*u+h*h),p=d*h,g=-d*u,y=e+p,m=t+g,x=r+p,_=i+g,E=(y+x)/2,w=(m+_)/2,C=x-y,A=_-m,M=C*C+A*A,N=n-a,B=y*_-x*m,O=(A<0?-1:1)*Yn(Oi(0,N*N*M-B*B)),L=(B*A-C*O)/M,$=(-B*C-A*O)/M,G=(B*A+C*O)/M,z=(-B*C+A*O)/M,F=L-E,X=$-w,I=G-E,j=z-w;return F*F+X*X>I*I+j*j&&(L=G,$=z),{cx:L,cy:$,x01:-p,y01:-g,x11:L*(n/N-1),y11:$*(n/N-1)}}function e_(){var e=Yi,t=Eo,r=Ze(0),i=null,n=BR,a=cU,s=dU,u=null,h=pi(d);function d(){var p,g,y=+e.apply(this,arguments),m=+t.apply(this,arguments),x=n.apply(this,arguments)-co,_=a.apply(this,arguments)-co,E=mr(_-x),w=_>x;if(u||(u=p=h()),m<y&&(g=m,m=y,y=g),!(m>ua))u.moveTo(0,0);else if(E>To-ua)u.moveTo(m*zi(x),m*Dn(x)),u.arc(0,0,m,x,_,!w),y>ua&&(u.moveTo(y*zi(_),y*Dn(_)),u.arc(0,0,y,_,x,w));else{var C=x,A=_,M=x,N=_,B=E,O=E,L=s.apply(this,arguments)/2,$=L>ua&&(i?+i.apply(this,arguments):Yn(y*y+m*m)),G=jn(mr(m-y)/2,+r.apply(this,arguments)),z=G,F=G,X,I;if($>ua){var j=yr($/y*Dn(L)),H=yr($/m*Dn(L));(B-=j*2)>ua?(j*=w?1:-1,M+=j,N-=j):(B=0,M=N=(x+_)/2),(O-=H*2)>ua?(H*=w?1:-1,C+=H,A-=H):(O=0,C=A=(x+_)/2)}var V=m*zi(C),P=m*Dn(C),q=y*zi(N),Z=y*Dn(N);if(G>ua){var J=m*zi(A),ae=m*Dn(A),ue=y*zi(M),be=y*Dn(M),Le;if(E<Jn)if(Le=uOe(V,P,ue,be,J,ae,q,Z)){var xe=V-Le[0],Ae=P-Le[1],oe=J-Le[0],he=ae-Le[1],le=1/Dn(Qt((xe*oe+Ae*he)/(Yn(xe*xe+Ae*Ae)*Yn(oe*oe+he*he)))/2),ke=Yn(Le[0]*Le[0]+Le[1]*Le[1]);z=jn(G,(y-ke)/(le-1)),F=jn(G,(m-ke)/(le+1))}else z=F=0}O>ua?F>ua?(X=PR(ue,be,V,P,m,F,w),I=PR(J,ae,q,Z,m,F,w),u.moveTo(X.cx+X.x01,X.cy+X.y01),F<G?u.arc(X.cx,X.cy,F,Lr(X.y01,X.x01),Lr(I.y01,I.x01),!w):(u.arc(X.cx,X.cy,F,Lr(X.y01,X.x01),Lr(X.y11,X.x11),!w),u.arc(0,0,m,Lr(X.cy+X.y11,X.cx+X.x11),Lr(I.cy+I.y11,I.cx+I.x11),!w),u.arc(I.cx,I.cy,F,Lr(I.y11,I.x11),Lr(I.y01,I.x01),!w))):(u.moveTo(V,P),u.arc(0,0,m,C,A,!w)):u.moveTo(V,P),!(y>ua)||!(B>ua)?u.lineTo(q,Z):z>ua?(X=PR(q,Z,J,ae,y,-z,w),I=PR(V,P,ue,be,y,-z,w),u.lineTo(X.cx+X.x01,X.cy+X.y01),z<G?u.arc(X.cx,X.cy,z,Lr(X.y01,X.x01),Lr(I.y01,I.x01),!w):(u.arc(X.cx,X.cy,z,Lr(X.y01,X.x01),Lr(X.y11,X.x11),!w),u.arc(0,0,y,Lr(X.cy+X.y11,X.cx+X.x11),Lr(I.cy+I.y11,I.cx+I.x11),w),u.arc(I.cx,I.cy,z,Lr(I.y11,I.x11),Lr(I.y01,I.x01),!w))):u.arc(0,0,y,N,M,w)}if(u.closePath(),p)return u=null,p+""||null}return d.centroid=function(){var p=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,g=(+n.apply(this,arguments)+ +a.apply(this,arguments))/2-Jn/2;return[zi(g)*p,Dn(g)*p]},d.innerRadius=function(p){return arguments.length?(e=typeof p=="function"?p:Ze(+p),d):e},d.outerRadius=function(p){return arguments.length?(t=typeof p=="function"?p:Ze(+p),d):t},d.cornerRadius=function(p){return arguments.length?(r=typeof p=="function"?p:Ze(+p),d):r},d.padRadius=function(p){return arguments.length?(i=p==null?null:typeof p=="function"?p:Ze(+p),d):i},d.startAngle=function(p){return arguments.length?(n=typeof p=="function"?p:Ze(+p),d):n},d.endAngle=function(p){return arguments.length?(a=typeof p=="function"?p:Ze(+p),d):a},d.padAngle=function(p){return arguments.length?(s=typeof p=="function"?p:Ze(+p),d):s},d.context=function(p){return arguments.length?(u=p??null,d):u},d}var hOe=D(()=>{Xt(),lr(),Ti()});function $te(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}var cOe,zte=D(()=>{cOe=Array.prototype.slice});function Gte(e){this._context=e}function Ute(e){return new Gte(e)}var jte=D(()=>{Gte.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}}});function dOe(e){return e[0]}function pOe(e){return e[1]}var fOe=D(()=>{});function vv(e,t){var r=Ze(!0),i=null,n=Ute,a=null,s=pi(u);e=typeof e=="function"?e:e===void 0?dOe:Ze(e),t=typeof t=="function"?t:t===void 0?pOe:Ze(t);function u(h){var d,p=(h=$te(h)).length,g,y=!1,m;for(i==null&&(a=n(m=s())),d=0;d<=p;++d)!(d<p&&r(g=h[d],d,h))===y&&((y=!y)?a.lineStart():a.lineEnd()),y&&a.point(+e(g,d,h),+t(g,d,h));if(m)return a=null,m+""||null}return u.x=function(h){return arguments.length?(e=typeof h=="function"?h:Ze(+h),u):e},u.y=function(h){return arguments.length?(t=typeof h=="function"?h:Ze(+h),u):t},u.defined=function(h){return arguments.length?(r=typeof h=="function"?h:Ze(!!h),u):r},u.curve=function(h){return arguments.length?(n=h,i!=null&&(a=n(i)),u):n},u.context=function(h){return arguments.length?(h==null?i=a=null:a=n(i=h),u):i},u}var gOe=D(()=>{zte(),Xt(),jte(),Ti(),fOe()});function mOe(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}var yOe=D(()=>{});function vOe(e){return e}var xOe=D(()=>{});function bOe(){var e=vOe,t=mOe,r=null,i=Ze(0),n=Ze(To),a=Ze(0);function s(u){var h,d=(u=$te(u)).length,p,g,y=0,m=new Array(d),x=new Array(d),_=+i.apply(this,arguments),E=Math.min(To,Math.max(-To,n.apply(this,arguments)-_)),w,C=Math.min(Math.abs(E)/d,a.apply(this,arguments)),A=C*(E<0?-1:1),M;for(h=0;h<d;++h)(M=x[m[h]=h]=+e(u[h],h,u))>0&&(y+=M);for(t!=null?m.sort(function(N,B){return t(x[N],x[B])}):r!=null&&m.sort(function(N,B){return r(u[N],u[B])}),h=0,g=y?(E-d*A)/y:0;h<d;++h,_=w)p=m[h],M=x[p],w=_+(M>0?M*g:0)+A,x[p]={data:u[p],index:h,value:M,startAngle:_,endAngle:w,padAngle:C};return x}return s.value=function(u){return arguments.length?(e=typeof u=="function"?u:Ze(+u),s):e},s.sortValues=function(u){return arguments.length?(t=u,r=null,s):t},s.sort=function(u){return arguments.length?(r=u,t=null,s):r},s.startAngle=function(u){return arguments.length?(i=typeof u=="function"?u:Ze(+u),s):i},s.endAngle=function(u){return arguments.length?(n=typeof u=="function"?u:Ze(+u),s):n},s.padAngle=function(u){return arguments.length?(a=typeof u=="function"?u:Ze(+u),s):a},s}var _Oe=D(()=>{zte(),Xt(),yOe(),xOe(),lr()});function wOe(e){return new pU(e,!0)}function kOe(e){return new pU(e,!1)}var pU,TOe=D(()=>{pU=class{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t);break}}this._x0=e,this._y0=t}}});function W1(){}var FR=D(()=>{});function $R(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function zR(e){this._context=e}function cC(e){return new zR(e)}var GR=D(()=>{zR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:$R(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:$R(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}}});function Hte(e){this._context=e}function EOe(e){return new Hte(e)}var COe=D(()=>{FR(),GR(),Hte.prototype={areaStart:W1,areaEnd:W1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:$R(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}}});function Vte(e){this._context=e}function SOe(e){return new Vte(e)}var AOe=D(()=>{GR(),Vte.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,i):this._context.moveTo(r,i);break;case 3:this._point=4;default:$R(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}}});function Wte(e,t){this._basis=new zR(e),this._beta=t}var Yte,MOe=D(()=>{GR(),Wte.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,r=e.length-1;if(r>0)for(var i=e[0],n=t[0],a=e[r]-i,s=t[r]-n,u=-1,h;++u<=r;)h=u/r,this._basis.point(this._beta*e[u]+(1-this._beta)*(i+h*a),this._beta*t[u]+(1-this._beta)*(n+h*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}},Yte=function e(t){function r(i){return t===1?new zR(i):new Wte(i,t)}return r.beta=function(i){return e(+i)},r}(.85)});function UR(e,t,r){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-r),e._x2,e._y2)}function fU(e,t){this._context=e,this._k=(1-t)/6}var qte,jR=D(()=>{fU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:UR(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:UR(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}},qte=function e(t){function r(i){return new fU(i,t)}return r.tension=function(i){return e(+i)},r}(0)});function gU(e,t){this._context=e,this._k=(1-t)/6}var Xte,Kte=D(()=>{FR(),jR(),gU.prototype={areaStart:W1,areaEnd:W1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:UR(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}},Xte=function e(t){function r(i){return new gU(i,t)}return r.tension=function(i){return e(+i)},r}(0)});function mU(e,t){this._context=e,this._k=(1-t)/6}var Zte,Qte=D(()=>{jR(),mU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:UR(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}},Zte=function e(t){function r(i){return new mU(i,t)}return r.tension=function(i){return e(+i)},r}(0)});function yU(e,t,r){var i=e._x1,n=e._y1,a=e._x2,s=e._y2;if(e._l01_a>ua){var u=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,h=3*e._l01_a*(e._l01_a+e._l12_a);i=(i*u-e._x0*e._l12_2a+e._x2*e._l01_2a)/h,n=(n*u-e._y0*e._l12_2a+e._y2*e._l01_2a)/h}if(e._l23_a>ua){var d=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,p=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*d+e._x1*e._l23_2a-t*e._l12_2a)/p,s=(s*d+e._y1*e._l23_2a-r*e._l12_2a)/p}e._context.bezierCurveTo(i,n,a,s,e._x2,e._y2)}function Jte(e,t){this._context=e,this._alpha=t}var ere,vU=D(()=>{lr(),jR(),Jte.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:yU(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}},ere=function e(t){function r(i){return t?new Jte(i,t):new fU(i,0)}return r.alpha=function(i){return e(+i)},r}(.5)});function tre(e,t){this._context=e,this._alpha=t}var rre,LOe=D(()=>{Kte(),FR(),vU(),tre.prototype={areaStart:W1,areaEnd:W1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:yU(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}},rre=function e(t){function r(i){return t?new tre(i,t):new gU(i,0)}return r.alpha=function(i){return e(+i)},r}(.5)});function ire(e,t){this._context=e,this._alpha=t}var nre,ROe=D(()=>{Qte(),vU(),ire.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:yU(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}},nre=function e(t){function r(i){return t?new ire(i,t):new mU(i,0)}return r.alpha=function(i){return e(+i)},r}(.5)});function are(e){this._context=e}function DOe(e){return new are(e)}var IOe=D(()=>{FR(),are.prototype={areaStart:W1,areaEnd:W1,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}}});function sre(e){return e<0?-1:1}function ore(e,t,r){var i=e._x1-e._x0,n=t-e._x1,a=(e._y1-e._y0)/(i||n<0&&-0),s=(r-e._y1)/(n||i<0&&-0),u=(a*n+s*i)/(i+n);return(sre(a)+sre(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(u))||0}function lre(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function xU(e,t,r){var i=e._x0,n=e._y0,a=e._x1,s=e._y1,u=(a-i)/3;e._context.bezierCurveTo(i+u,n+u*t,a-u,s-u*r,a,s)}function HR(e){this._context=e}function ure(e){this._context=new hre(e)}function hre(e){this._context=e}function NOe(e){return new HR(e)}function OOe(e){return new ure(e)}var BOe=D(()=>{HR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:xU(this,this._t0,lre(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,xU(this,lre(this,r=ore(this,e,t)),r);break;default:xU(this,this._t0,r=ore(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}},(ure.prototype=Object.create(HR.prototype)).point=function(e,t){HR.prototype.point.call(this,t,e)},hre.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,i,n,a){this._context.bezierCurveTo(t,e,i,r,a,n)}}});function cre(e){this._context=e}function dre(e){var t,r=e.length-1,i,n=new Array(r),a=new Array(r),s=new Array(r);for(n[0]=0,a[0]=2,s[0]=e[0]+2*e[1],t=1;t<r-1;++t)n[t]=1,a[t]=4,s[t]=4*e[t]+2*e[t+1];for(n[r-1]=2,a[r-1]=7,s[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)i=n[t]/a[t-1],a[t]-=i,s[t]-=i*s[t-1];for(n[r-1]=s[r-1]/a[r-1],t=r-2;t>=0;--t)n[t]=(s[t]-n[t+1])/a[t];for(a[r-1]=(e[r]+n[r-1])/2,t=0;t<r-1;++t)a[t]=2*e[t+1]-n[t+1];return[n,a]}function POe(e){return new cre(e)}var FOe=D(()=>{cre.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var i=dre(e),n=dre(t),a=0,s=1;s<r;++a,++s)this._context.bezierCurveTo(i[0][a],n[0][a],i[1][a],n[1][a],e[s],t[s]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}}});function VR(e,t){this._context=e,this._t=t}function $Oe(e){return new VR(e,.5)}function zOe(e){return new VR(e,0)}function GOe(e){return new VR(e,1)}var UOe=D(()=>{VR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}}}),jOe=D(()=>{hOe(),gOe(),_Oe(),COe(),AOe(),GR(),TOe(),MOe(),Kte(),Qte(),jR(),LOe(),ROe(),vU(),IOe(),jte(),BOe(),FOe(),UOe()}),HOe=D(()=>{}),VOe=D(()=>{});function t_(e,t,r){this.k=e,this.x=t,this.y=r}function WOe(e){for(;!e.__zoom;)if(!(e=e.parentNode))return pre;return e.__zoom}var pre,fre=D(()=>{t_.prototype={constructor:t_,scale:function(e){return e===1?this:new t_(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new t_(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},pre=new t_(1,0,0),WOe.prototype=t_.prototype}),YOe=D(()=>{}),qOe=D(()=>{$E(),HOe(),VOe(),fre(),YOe()}),XOe=D(()=>{qOe(),fre()}),ha=D(()=>{yd(),EF(),Uz(),Hz(),G2(),Vz(),QL(),S2(),x$(),Wz(),zL(),Yz(),B1(),G3(),aR(),rG(),H2(),ZL(),iG(),qz(),nG(),Ft(),ot(),Cc(),jOe(),iC(),Jr(),ME(),$E(),XOe()}),gre,bU,mre=D(()=>{gre=typeof global=="object"&&global&&global.Object===Object&&global,bU=gre}),yre,vre,Dc,Ad=D(()=>{mre(),yre=typeof self=="object"&&self&&self.Object===Object&&self,vre=bU||yre||Function("return this")(),Dc=vre}),xre,Wh,r_=D(()=>{Ad(),xre=Dc.Symbol,Wh=xre});function KOe(e){var t=bre.call(e,i_),r=e[i_];try{e[i_]=void 0;var i=!0}catch{}var n=_re.call(e);return i&&(t?e[i_]=r:delete e[i_]),n}var _U,bre,_re,i_,wre,ZOe=D(()=>{r_(),_U=Object.prototype,bre=_U.hasOwnProperty,_re=_U.toString,i_=Wh?Wh.toStringTag:void 0,wre=KOe});function QOe(e){return Tre.call(e)}var kre,Tre,Ere,JOe=D(()=>{kre=Object.prototype,Tre=kre.toString,Ere=QOe});function eBe(e){return e==null?e===void 0?Sre:Cre:wU&&wU in Object(e)?wre(e):Ere(e)}var Cre,Sre,wU,D0,Y1=D(()=>{r_(),ZOe(),JOe(),Cre="[object Null]",Sre="[object Undefined]",wU=Wh?Wh.toStringTag:void 0,D0=eBe});function tBe(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Nu,Ic=D(()=>{Nu=tBe});function rBe(e){if(!Nu(e))return!1;var t=D0(e);return t==Mre||t==Lre||t==Are||t==Rre}var Are,Mre,Lre,Rre,Yh,WR=D(()=>{Y1(),Ic(),Are="[object AsyncFunction]",Mre="[object Function]",Lre="[object GeneratorFunction]",Rre="[object Proxy]",Yh=rBe}),Dre,YR,iBe=D(()=>{Ad(),Dre=Dc["__core-js_shared__"],YR=Dre});function nBe(e){return!!kU&&kU in e}var kU,Ire,aBe=D(()=>{iBe(),kU=function(){var e=/[^.]+$/.exec(YR&&YR.keys&&YR.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Ire=nBe});function sBe(e){if(e!=null){try{return Ore.call(e)}catch{}try{return e+""}catch{}}return""}var Nre,Ore,q1,Bre=D(()=>{Nre=Function.prototype,Ore=Nre.toString,q1=sBe});function oBe(e){if(!Nu(e)||Ire(e))return!1;var t=Yh(e)?jre:Fre;return t.test(q1(e))}var Pre,Fre,$re,zre,Gre,Ure,jre,Hre,lBe=D(()=>{WR(),aBe(),Ic(),Bre(),Pre=/[\\^$.*+?()[\]{}|]/g,Fre=/^\[object .+?Constructor\]$/,$re=Function.prototype,zre=Object.prototype,Gre=$re.toString,Ure=zre.hasOwnProperty,jre=RegExp("^"+Gre.call(Ure).replace(Pre,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Hre=oBe});function uBe(e,t){return e?.[t]}var Vre,hBe=D(()=>{Vre=uBe});function cBe(e,t){var r=Vre(e,t);return Hre(r)?r:void 0}var X1,xv=D(()=>{lBe(),hBe(),X1=cBe}),Wre,n_,qR=D(()=>{xv(),Wre=X1(Object,"create"),n_=Wre});function dBe(){this.__data__=n_?n_(null):{},this.size=0}var Yre,pBe=D(()=>{qR(),Yre=dBe});function fBe(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var qre,gBe=D(()=>{qre=fBe});function mBe(e){var t=this.__data__;if(n_){var r=t[e];return r===Xre?void 0:r}return Zre.call(t,e)?t[e]:void 0}var Xre,Kre,Zre,Qre,yBe=D(()=>{qR(),Xre="__lodash_hash_undefined__",Kre=Object.prototype,Zre=Kre.hasOwnProperty,Qre=mBe});function vBe(e){var t=this.__data__;return n_?t[e]!==void 0:eie.call(t,e)}var Jre,eie,tie,xBe=D(()=>{qR(),Jre=Object.prototype,eie=Jre.hasOwnProperty,tie=vBe});function bBe(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=n_&&t===void 0?rie:t,this}var rie,iie,_Be=D(()=>{qR(),rie="__lodash_hash_undefined__",iie=bBe});function a_(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}var TU,wBe=D(()=>{pBe(),gBe(),yBe(),xBe(),_Be(),a_.prototype.clear=Yre,a_.prototype.delete=qre,a_.prototype.get=Qre,a_.prototype.has=tie,a_.prototype.set=iie,TU=a_});function kBe(){this.__data__=[],this.size=0}var nie,TBe=D(()=>{nie=kBe});function EBe(e,t){return e===t||e!==e&&t!==t}var bv,s_=D(()=>{bv=EBe});function CBe(e,t){for(var r=e.length;r--;)if(bv(e[r][0],t))return r;return-1}var dC,XR=D(()=>{s_(),dC=CBe});function SBe(e){var t=this.__data__,r=dC(t,e);if(r<0)return!1;var i=t.length-1;return r==i?t.pop():sie.call(t,r,1),--this.size,!0}var aie,sie,oie,ABe=D(()=>{XR(),aie=Array.prototype,sie=aie.splice,oie=SBe});function MBe(e){var t=this.__data__,r=dC(t,e);return r<0?void 0:t[r][1]}var lie,LBe=D(()=>{XR(),lie=MBe});function RBe(e){return dC(this.__data__,e)>-1}var uie,DBe=D(()=>{XR(),uie=RBe});function IBe(e,t){var r=this.__data__,i=dC(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this}var hie,NBe=D(()=>{XR(),hie=IBe});function o_(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}var pC,KR=D(()=>{TBe(),ABe(),LBe(),DBe(),NBe(),o_.prototype.clear=nie,o_.prototype.delete=oie,o_.prototype.get=lie,o_.prototype.has=uie,o_.prototype.set=hie,pC=o_}),cie,l_,EU=D(()=>{xv(),Ad(),cie=X1(Dc,"Map"),l_=cie});function OBe(){this.size=0,this.__data__={hash:new TU,map:new(l_||pC),string:new TU}}var die,BBe=D(()=>{wBe(),KR(),EU(),die=OBe});function PBe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var pie,FBe=D(()=>{pie=PBe});function $Be(e,t){var r=e.__data__;return pie(t)?r[typeof t=="string"?"string":"hash"]:r.map}var fC,ZR=D(()=>{FBe(),fC=$Be});function zBe(e){var t=fC(this,e).delete(e);return this.size-=t?1:0,t}var fie,GBe=D(()=>{ZR(),fie=zBe});function UBe(e){return fC(this,e).get(e)}var gie,jBe=D(()=>{ZR(),gie=UBe});function HBe(e){return fC(this,e).has(e)}var mie,VBe=D(()=>{ZR(),mie=HBe});function WBe(e,t){var r=fC(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this}var yie,YBe=D(()=>{ZR(),yie=WBe});function u_(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}var gC,CU=D(()=>{BBe(),GBe(),jBe(),VBe(),YBe(),u_.prototype.clear=die,u_.prototype.delete=fie,u_.prototype.get=gie,u_.prototype.has=mie,u_.prototype.set=yie,gC=u_});function SU(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(vie);var r=function(){var i=arguments,n=t?t.apply(this,i):i[0],a=r.cache;if(a.has(n))return a.get(n);var s=e.apply(this,i);return r.cache=a.set(n,s)||a,s};return r.cache=new(SU.Cache||gC),r}var vie,mC,xie=D(()=>{CU(),vie="Expected a function",SU.Cache=gC,mC=SU});function qBe(){this.__data__=new pC,this.size=0}var bie,XBe=D(()=>{KR(),bie=qBe});function KBe(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var _ie,ZBe=D(()=>{_ie=KBe});function QBe(e){return this.__data__.get(e)}var wie,JBe=D(()=>{wie=QBe});function ePe(e){return this.__data__.has(e)}var kie,tPe=D(()=>{kie=ePe});function rPe(e,t){var r=this.__data__;if(r instanceof pC){var i=r.__data__;if(!l_||i.length<Tie-1)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new gC(i)}return r.set(e,t),this.size=r.size,this}var Tie,Eie,iPe=D(()=>{KR(),EU(),CU(),Tie=200,Eie=rPe});function h_(e){var t=this.__data__=new pC(e);this.size=t.size}var _v,QR=D(()=>{KR(),XBe(),ZBe(),JBe(),tPe(),iPe(),h_.prototype.clear=bie,h_.prototype.delete=_ie,h_.prototype.get=wie,h_.prototype.has=kie,h_.prototype.set=Eie,_v=h_}),Cie,yC,Sie=D(()=>{xv(),Cie=function(){try{var e=X1(Object,"defineProperty");return e({},"",{}),e}catch{}}(),yC=Cie});function nPe(e,t,r){t=="__proto__"&&yC?yC(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var c_,vC=D(()=>{Sie(),c_=nPe});function aPe(e,t,r){(r!==void 0&&!bv(e[t],r)||r===void 0&&!(t in e))&&c_(e,t,r)}var JR,Aie=D(()=>{vC(),s_(),JR=aPe});function sPe(e){return function(t,r,i){for(var n=-1,a=Object(t),s=i(t),u=s.length;u--;){var h=s[e?u:++n];if(r(a[h],h,a)===!1)break}return t}}var Mie,oPe=D(()=>{Mie=sPe}),Lie,eD,AU=D(()=>{oPe(),Lie=Mie(),eD=Lie});function lPe(e,t){if(t)return e.slice();var r=e.length,i=DU?DU(r):new e.constructor(r);return e.copy(i),i}var MU,LU,Rie,RU,DU,IU,Die=D(()=>{Ad(),MU=typeof exports=="object"&&exports&&!exports.nodeType&&exports,LU=MU&&typeof module=="object"&&module&&!module.nodeType&&module,Rie=LU&&LU.exports===MU,RU=Rie?Dc.Buffer:void 0,DU=RU?RU.allocUnsafe:void 0,IU=lPe}),Iie,xC,Nie=D(()=>{Ad(),Iie=Dc.Uint8Array,xC=Iie});function uPe(e){var t=new e.constructor(e.byteLength);return new xC(t).set(new xC(e)),t}var tD,NU=D(()=>{Nie(),tD=uPe});function hPe(e,t){var r=t?tD(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var OU,Oie=D(()=>{NU(),OU=hPe});function cPe(e,t){var r=-1,i=e.length;for(t||(t=Array(i));++r<i;)t[r]=e[r];return t}var BU,Bie=D(()=>{BU=cPe}),PU,Pie,Fie,dPe=D(()=>{Ic(),PU=Object.create,Pie=function(){function e(){}return function(t){if(!Nu(t))return{};if(PU)return PU(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),Fie=Pie});function pPe(e,t){return function(r){return e(t(r))}}var FU,$ie=D(()=>{FU=pPe}),zie,rD,$U=D(()=>{$ie(),zie=FU(Object.getPrototypeOf,Object),rD=zie});function fPe(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Gie;return e===r}var Gie,d_,bC=D(()=>{Gie=Object.prototype,d_=fPe});function gPe(e){return typeof e.constructor=="function"&&!d_(e)?Fie(rD(e)):{}}var zU,Uie=D(()=>{dPe(),$U(),bC(),zU=gPe});function mPe(e){return e!=null&&typeof e=="object"}var qh,Md=D(()=>{qh=mPe});function yPe(e){return qh(e)&&D0(e)==jie}var jie,GU,vPe=D(()=>{Y1(),Md(),jie="[object Arguments]",GU=yPe}),UU,Hie,Vie,Wie,wv,_C=D(()=>{vPe(),Md(),UU=Object.prototype,Hie=UU.hasOwnProperty,Vie=UU.propertyIsEnumerable,Wie=GU(function(){return arguments}())?GU:function(e){return qh(e)&&Hie.call(e,"callee")&&!Vie.call(e,"callee")},wv=Wie}),Yie,va,Js=D(()=>{Yie=Array.isArray,va=Yie});function xPe(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=qie}var qie,iD,jU=D(()=>{qie=9007199254740991,iD=xPe});function bPe(e){return e!=null&&iD(e.length)&&!Yh(e)}var Nc,Ld=D(()=>{WR(),jU(),Nc=bPe});function _Pe(e){return qh(e)&&Nc(e)}var wC,HU=D(()=>{Ld(),Md(),wC=_Pe});function wPe(){return!1}var Xie,kPe=D(()=>{Xie=wPe}),VU,WU,Kie,YU,Zie,Qie,kv,kC=D(()=>{Ad(),kPe(),VU=typeof exports=="object"&&exports&&!exports.nodeType&&exports,WU=VU&&typeof module=="object"&&module&&!module.nodeType&&module,Kie=WU&&WU.exports===VU,YU=Kie?Dc.Buffer:void 0,Zie=YU?YU.isBuffer:void 0,Qie=Zie||Xie,kv=Qie});function TPe(e){if(!qh(e)||D0(e)!=Jie)return!1;var t=rD(e);if(t===null)return!0;var r=rne.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&qU.call(r)==ine}var Jie,ene,tne,qU,rne,ine,nne,EPe=D(()=>{Y1(),$U(),Md(),Jie="[object Object]",ene=Function.prototype,tne=Object.prototype,qU=ene.toString,rne=tne.hasOwnProperty,ine=qU.call(Object),nne=TPe});function CPe(e){return qh(e)&&iD(e.length)&&!!Ss[D0(e)]}var ane,sne,one,lne,une,hne,cne,dne,pne,fne,gne,mne,yne,vne,xne,bne,_ne,wne,kne,Tne,Ene,Cne,Sne,Ane,Ss,Mne,SPe=D(()=>{Y1(),jU(),Md(),ane="[object Arguments]",sne="[object Array]",one="[object Boolean]",lne="[object Date]",une="[object Error]",hne="[object Function]",cne="[object Map]",dne="[object Number]",pne="[object Object]",fne="[object RegExp]",gne="[object Set]",mne="[object String]",yne="[object WeakMap]",vne="[object ArrayBuffer]",xne="[object DataView]",bne="[object Float32Array]",_ne="[object Float64Array]",wne="[object Int8Array]",kne="[object Int16Array]",Tne="[object Int32Array]",Ene="[object Uint8Array]",Cne="[object Uint8ClampedArray]",Sne="[object Uint16Array]",Ane="[object Uint32Array]",Ss={},Ss[bne]=Ss[_ne]=Ss[wne]=Ss[kne]=Ss[Tne]=Ss[Ene]=Ss[Cne]=Ss[Sne]=Ss[Ane]=!0,Ss[ane]=Ss[sne]=Ss[vne]=Ss[one]=Ss[xne]=Ss[lne]=Ss[une]=Ss[hne]=Ss[cne]=Ss[dne]=Ss[pne]=Ss[fne]=Ss[gne]=Ss[mne]=Ss[yne]=!1,Mne=CPe});function APe(e){return function(t){return e(t)}}var Tv,p_=D(()=>{Tv=APe}),XU,f_,Lne,nD,Rne,df,aD=D(()=>{mre(),XU=typeof exports=="object"&&exports&&!exports.nodeType&&exports,f_=XU&&typeof module=="object"&&module&&!module.nodeType&&module,Lne=f_&&f_.exports===XU,nD=Lne&&bU.process,Rne=function(){try{var e=f_&&f_.require&&f_.require("util").types;return e||nD&&nD.binding&&nD.binding("util")}catch{}}(),df=Rne}),KU,Dne,TC,sD=D(()=>{SPe(),p_(),aD(),KU=df&&df.isTypedArray,Dne=KU?Tv(KU):Mne,TC=Dne});function MPe(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var oD,Ine=D(()=>{oD=MPe});function LPe(e,t,r){var i=e[t];(!(One.call(e,t)&&bv(i,r))||r===void 0&&!(t in e))&&c_(e,t,r)}var Nne,One,g_,EC=D(()=>{vC(),s_(),Nne=Object.prototype,One=Nne.hasOwnProperty,g_=LPe});function RPe(e,t,r,i){var n=!r;r||(r={});for(var a=-1,s=t.length;++a<s;){var u=t[a],h=i?i(r[u],e[u],u,r,e):void 0;h===void 0&&(h=e[u]),n?c_(r,u,h):g_(r,u,h)}return r}var Ev,m_=D(()=>{EC(),vC(),Ev=RPe});function DPe(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}var Bne,IPe=D(()=>{Bne=DPe});function NPe(e,t){var r=typeof e;return t=t??Pne,!!t&&(r=="number"||r!="symbol"&&Fne.test(e))&&e>-1&&e%1==0&&e<t}var Pne,Fne,CC,lD=D(()=>{Pne=9007199254740991,Fne=/^(?:0|[1-9]\d*)$/,CC=NPe});function OPe(e,t){var r=va(e),i=!r&&wv(e),n=!r&&!i&&kv(e),a=!r&&!i&&!n&&TC(e),s=r||i||n||a,u=s?Bne(e.length,String):[],h=u.length;for(var d in e)(t||zne.call(e,d))&&!(s&&(d=="length"||n&&(d=="offset"||d=="parent")||a&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||CC(d,h)))&&u.push(d);return u}var $ne,zne,ZU,Gne=D(()=>{IPe(),_C(),Js(),kC(),lD(),sD(),$ne=Object.prototype,zne=$ne.hasOwnProperty,ZU=OPe});function BPe(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var Une,PPe=D(()=>{Une=BPe});function FPe(e){if(!Nu(e))return Une(e);var t=d_(e),r=[];for(var i in e)i=="constructor"&&(t||!Hne.call(e,i))||r.push(i);return r}var jne,Hne,Vne,$Pe=D(()=>{Ic(),bC(),PPe(),jne=Object.prototype,Hne=jne.hasOwnProperty,Vne=FPe});function zPe(e){return Nc(e)?ZU(e,!0):Vne(e)}var K1,Cv=D(()=>{Gne(),$Pe(),Ld(),K1=zPe});function GPe(e){return Ev(e,K1(e))}var Wne,UPe=D(()=>{m_(),Cv(),Wne=GPe});function jPe(e,t,r,i,n,a,s){var u=oD(e,r),h=oD(t,r),d=s.get(h);if(d){JR(e,r,d);return}var p=a?a(u,h,r+"",e,t,s):void 0,g=p===void 0;if(g){var y=va(h),m=!y&&kv(h),x=!y&&!m&&TC(h);p=h,y||m||x?va(u)?p=u:wC(u)?p=BU(u):m?(g=!1,p=IU(h,!0)):x?(g=!1,p=OU(h,!0)):p=[]:nne(h)||wv(h)?(p=u,wv(u)?p=Wne(u):(!Nu(u)||Yh(u))&&(p=zU(h))):g=!1}g&&(s.set(h,p),n(p,h,i,a,s),s.delete(h)),JR(e,r,p)}var Yne,HPe=D(()=>{Aie(),Die(),Oie(),Bie(),Uie(),_C(),Js(),HU(),kC(),WR(),Ic(),EPe(),sD(),Ine(),UPe(),Yne=jPe});function qne(e,t,r,i,n){e!==t&&eD(t,function(a,s){if(n||(n=new _v),Nu(a))Yne(e,t,s,r,qne,i,n);else{var u=i?i(oD(e,s),a,s+"",e,t,n):void 0;u===void 0&&(u=a),JR(e,s,u)}},K1)}var Xne,VPe=D(()=>{QR(),Aie(),AU(),HPe(),Ic(),Cv(),Ine(),Xne=qne});function WPe(e){return e}var I0,Z1=D(()=>{I0=WPe});function YPe(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var Kne,qPe=D(()=>{Kne=YPe});function XPe(e,t,r){return t=QU(t===void 0?e.length-1:t,0),function(){for(var i=arguments,n=-1,a=QU(i.length-t,0),s=Array(a);++n<a;)s[n]=i[t+n];n=-1;for(var u=Array(t+1);++n<t;)u[n]=i[n];return u[t]=r(s),Kne(e,this,u)}}var QU,JU,Zne=D(()=>{qPe(),QU=Math.max,JU=XPe});function KPe(e){return function(){return e}}var pf,Qne=D(()=>{pf=KPe}),Jne,eae,ZPe=D(()=>{Qne(),Sie(),Z1(),Jne=yC?function(e,t){return yC(e,"toString",{configurable:!0,enumerable:!1,value:pf(t),writable:!0})}:I0,eae=Jne});function QPe(e){var t=0,r=0;return function(){var i=iae(),n=rae-(i-r);if(r=i,n>0){if(++t>=tae)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var tae,rae,iae,nae,JPe=D(()=>{tae=800,rae=16,iae=Date.now,nae=QPe}),aae,ej,sae=D(()=>{ZPe(),JPe(),aae=nae(eae),ej=aae});function eFe(e,t){return ej(JU(e,t,I0),e+"")}var y_,SC=D(()=>{Z1(),Zne(),sae(),y_=eFe});function tFe(e,t,r){if(!Nu(r))return!1;var i=typeof t;return(i=="number"?Nc(r)&&CC(t,r.length):i=="string"&&t in r)?bv(r[t],e):!1}var Q1,v_=D(()=>{s_(),Ld(),lD(),Ic(),Q1=tFe});function rFe(e){return y_(function(t,r){var i=-1,n=r.length,a=n>1?r[n-1]:void 0,s=n>2?r[2]:void 0;for(a=e.length>3&&typeof a=="function"?(n--,a):void 0,s&&Q1(r[0],r[1],s)&&(a=n<3?void 0:a,n=1),t=Object(t);++i<n;){var u=r[i];u&&e(t,u,i,a)}return t})}var tj,oae=D(()=>{SC(),v_(),tj=rFe}),lae,AC,uae=D(()=>{VPe(),oae(),lae=tj(function(e,t,r){Xne(e,t,r)}),AC=lae});function rj(e,t){if(!e)return t;let r=`curve${e.charAt(0).toUpperCase()+e.slice(1)}`;return mae[r]??t}function hae(e,t){let r=e.trim();if(r)return t.securityLevel!=="loose"?(0,gae.sanitizeUrl)(r):r}function ij(e,t){return!e||!t?0:Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function cae(e){let t,r=0;e.forEach(n=>{r+=ij(n,t),t=n});let i=r/2;return hD(e,i)}function dae(e){return e.length===1?e[0]:cae(e)}function pae(e,t,r){let i=structuredClone(r);Ce.info("our points",i),t!=="start_left"&&t!=="start_right"&&i.reverse();let n=25+e,a=hD(i,n),s=10+e*.5,u=Math.atan2(i[0].y-a.y,i[0].x-a.x),h={x:0,y:0};return t==="start_left"?(h.x=Math.sin(u+Math.PI)*s+(i[0].x+a.x)/2,h.y=-Math.cos(u+Math.PI)*s+(i[0].y+a.y)/2):t==="end_right"?(h.x=Math.sin(u-Math.PI)*s+(i[0].x+a.x)/2-5,h.y=-Math.cos(u-Math.PI)*s+(i[0].y+a.y)/2-5):t==="end_left"?(h.x=Math.sin(u)*s+(i[0].x+a.x)/2-5,h.y=-Math.cos(u)*s+(i[0].y+a.y)/2-5):(h.x=Math.sin(u)*s+(i[0].x+a.x)/2,h.y=-Math.cos(u)*s+(i[0].y+a.y)/2),h}function nj(e){let t="",r="";for(let i of e)i!==void 0&&(i.startsWith("color:")||i.startsWith("text-align:")?r=r+i+";":t=t+i+";");return{style:t,labelStyle:r}}function fae(e){let t="",r="0123456789abcdef",i=r.length;for(let n=0;n<e;n++)t+=r.charAt(Math.floor(Math.random()*i));return t}function uD(e,t){return cD(e,t).height}function Oc(e,t){return cD(e,t).width}function aj(e){return"str"in e}function ff(e,t){return AC({},e,t)}function Ou(e){return e??null}var gae,sj,mae,yae,vae,oj,xae,bae,_ae,lj,hD,wae,uj,hj,cj,kae,Tae,dj,Eae,cD,Cae,dD,Sae,Aae,gf,qn,Mae,N0,pj,Os=D(()=>{Qn(),gae=Ke(_2(),1),ha(),xie(),uae(),sj="\u200B",mae={curveBasis:cC,curveBasisClosed:EOe,curveBasisOpen:SOe,curveBumpX:wOe,curveBumpY:kOe,curveBundle:Yte,curveCardinalClosed:Xte,curveCardinalOpen:Zte,curveCardinal:qte,curveCatmullRomClosed:rre,curveCatmullRomOpen:nre,curveCatmullRom:ere,curveLinear:Ute,curveLinearClosed:DOe,curveMonotoneX:NOe,curveMonotoneY:OOe,curveNatural:POe,curveStep:$Oe,curveStepAfter:GOe,curveStepBefore:zOe},yae=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,vae=k(function(e,t){let r=oj(e,/(?:init\b)|(?:initialize\b)/),i={};if(Array.isArray(r)){let s=r.map(u=>u.args);Fg(s),i=Xs(i,[...s])}else i=r.args;if(!i)return;let n=Ip(e,t),a="config";return i[a]!==void 0&&(n==="flowchart-v2"&&(n="flowchart"),i[n]=i[a],delete i[a]),i},"detectInit"),oj=k(function(e,t=null){try{let r=new RegExp(`[%]{2}(?![{]${yae.source})(?=[}][%]{2}).*
`,"ig");e=e.trim().replace(r,"").replace(/'/gm,'"'),Ce.debug(`Detecting diagram directive${t!==null?" type:"+t:""} based on the text:${e}`);let i,n=[];for(;(i=Dp.exec(e))!==null;)if(i.index===Dp.lastIndex&&Dp.lastIndex++,i&&!t||t&&i[1]?.match(t)||t&&i[2]?.match(t)){let a=i[1]?i[1]:i[2],s=i[3]?i[3].trim():i[4]?JSON.parse(i[4].trim()):null;n.push({type:a,args:s})}return n.length===0?{type:e,args:null}:n.length===1?n[0]:n}catch(r){return Ce.error(`ERROR: ${r.message} - Unable to parse directive type: '${t}' based on the text: '${e}'`),{type:void 0,args:null}}},"detectDirective"),xae=k(function(e){return e.replace(Dp,"")},"removeDirectives"),bae=k(function(e,t){for(let[r,i]of t.entries())if(i.match(e))return r;return-1},"isSubstringInArray"),k(rj,"interpolateToCurve"),k(hae,"formatUrl"),_ae=k((e,...t)=>{let r=e.split("."),i=r.length-1,n=r[i],a=window;for(let s=0;s<i;s++)if(a=a[r[s]],!a){Ce.error(`Function name: ${e} not found in window`);return}a[n](...t)},"runFunc"),k(ij,"distance"),k(cae,"traverseEdge"),k(dae,"calcLabelPosition"),lj=k((e,t=2)=>{let r=Math.pow(10,t);return Math.round(e*r)/r},"roundNumber"),hD=k((e,t)=>{let r,i=t;for(let n of e){if(r){let a=ij(n,r);if(a<i)i-=a;else{let s=i/a;if(s<=0)return r;if(s>=1)return{x:n.x,y:n.y};if(s>0&&s<1)return{x:lj((1-s)*r.x+s*n.x,5),y:lj((1-s)*r.y+s*n.y,5)}}}r=n}throw new Error("Could not find a suitable point for the given distance")},"calculatePoint"),wae=k((e,t,r)=>{Ce.info(`our points ${JSON.stringify(t)}`),t[0]!==r&&(t=t.reverse());let i=hD(t,25),n=e?10:5,a=Math.atan2(t[0].y-i.y,t[0].x-i.x),s={x:0,y:0};return s.x=Math.sin(a)*n+(t[0].x+i.x)/2,s.y=-Math.cos(a)*n+(t[0].y+i.y)/2,s},"calcCardinalityPosition"),k(pae,"calcTerminalLabelPosition"),k(nj,"getStylesFromArray"),uj=0,hj=k(()=>(uj++,"id-"+Math.random().toString(36).substr(2,12)+"-"+uj),"generateId"),k(fae,"makeRandomHex"),cj=k(e=>fae(e.length),"random"),kae=k(function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""}},"getTextObj"),Tae=k(function(e,t){let r=t.text.replace(zr.lineBreakRegex," "),[,i]=gf(t.fontSize),n=e.append("text");n.attr("x",t.x),n.attr("y",t.y),n.style("text-anchor",t.anchor),n.style("font-family",t.fontFamily),n.style("font-size",i),n.style("font-weight",t.fontWeight),n.attr("fill",t.fill),t.class!==void 0&&n.attr("class",t.class);let a=n.append("tspan");return a.attr("x",t.x+t.textMargin*2),a.attr("fill",t.fill),a.text(r),n},"drawSimpleText"),dj=mC((e,t,r)=>{if(!e||(r=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},r),zr.lineBreakRegex.test(e)))return e;let i=e.split(" ").filter(Boolean),n=[],a="";return i.forEach((s,u)=>{let h=Oc(`${s} `,r),d=Oc(a,r);if(h>t){let{hyphenatedStrings:p,remainingWord:g}=Eae(s,t,"-",r);n.push(a,...p),a=g}else d+h>=t?(n.push(a),a=s):a=[a,s].filter(Boolean).join(" ");u+1===i.length&&n.push(a)}),n.filter(s=>s!=="").join(r.joinWith)},(e,t,r)=>`${e}${t}${r.fontSize}${r.fontWeight}${r.fontFamily}${r.joinWith}`),Eae=mC((e,t,r="-",i)=>{i=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},i);let n=[...e],a=[],s="";return n.forEach((u,h)=>{let d=`${s}${u}`;if(Oc(d,i)>=t){let p=h+1,g=n.length===p,y=`${d}${r}`;a.push(g?d:y),s=""}else s=d}),{hyphenatedStrings:a,remainingWord:s}},(e,t,r="-",i)=>`${e}${t}${r}${i.fontSize}${i.fontWeight}${i.fontFamily}`),k(uD,"calculateTextHeight"),k(Oc,"calculateTextWidth"),cD=mC((e,t)=>{let{fontSize:r=12,fontFamily:i="Arial",fontWeight:n=400}=t;if(!e)return{width:0,height:0};let[,a]=gf(r),s=["sans-serif",i],u=e.split(zr.lineBreakRegex),h=[],d=Nr("body");if(!d.remove)return{width:0,height:0,lineHeight:0};let p=d.append("svg");for(let y of s){let m=0,x={width:0,height:0,lineHeight:0};for(let _ of u){let E=kae();E.text=_||sj;let w=Tae(p,E).style("font-size",a).style("font-weight",n).style("font-family",y),C=(w._groups||w)[0][0].getBBox();if(C.width===0&&C.height===0)throw new Error("svg element not in render tree");x.width=Math.round(Math.max(x.width,C.width)),m=Math.round(C.height),x.height+=m,x.lineHeight=Math.round(Math.max(x.lineHeight,m))}h.push(x)}p.remove();let g=isNaN(h[1].height)||isNaN(h[1].width)||isNaN(h[1].lineHeight)||h[0].height>h[1].height&&h[0].width>h[1].width&&h[0].lineHeight>h[1].lineHeight?0:1;return h[g]},(e,t)=>`${e}${t.fontSize}${t.fontWeight}${t.fontFamily}`),Cae=class{constructor(e=!1,t){this.count=0,this.count=t?t.length:0,this.next=e?()=>this.count++:()=>Date.now()}static{k(this,"InitIDGenerator")}},Sae=k(function(e){return dD=dD||document.createElement("div"),e=escape(e).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),dD.innerHTML=e,unescape(dD.textContent)},"entityDecode"),k(aj,"isDetailedError"),Aae=k((e,t,r,i)=>{if(!i)return;let n=e.node()?.getBBox();n&&e.append("text").text(i).attr("text-anchor","middle").attr("x",n.x+n.width/2).attr("y",-r).attr("class",t)},"insertTitle"),gf=k(e=>{if(typeof e=="number")return[e,e+"px"];let t=parseInt(e??"",10);return Number.isNaN(t)?[void 0,void 0]:e===String(t)?[t,e+"px"]:[t,e]},"parseFontSize"),k(ff,"cleanAndMerge"),qn={assignWithDepth:Xs,wrapLabel:dj,calculateTextHeight:uD,calculateTextWidth:Oc,calculateTextDimensions:cD,cleanAndMerge:ff,detectInit:vae,detectDirective:oj,isSubstringInArray:bae,interpolateToCurve:rj,calcLabelPosition:dae,calcCardinalityPosition:wae,calcTerminalLabelPosition:pae,formatUrl:hae,getStylesFromArray:nj,generateId:hj,random:cj,runFunc:_ae,entityDecode:Sae,insertTitle:Aae,parseFontSize:gf,InitIDGenerator:Cae},Mae=k(function(e){let t=e;return t=t.replace(/style.*:\S*#.*;/g,function(r){return r.substring(0,r.length-1)}),t=t.replace(/classDef.*:\S*#.*;/g,function(r){return r.substring(0,r.length-1)}),t=t.replace(/#\w+;/g,function(r){let i=r.substring(1,r.length-1);return/^\+?\d+$/.test(i)?"\uFB02\xB0\xB0"+i+"\xB6\xDF":"\uFB02\xB0"+i+"\xB6\xDF"}),t},"encodeEntities"),N0=k(function(e){return e.replace(//g,"&#").replace(//g,"&").replace(//g,";")},"decodeEntities"),pj=k((e,t,{counter:r=0,prefix:i,suffix:n})=>`${i?`${i}_`:""}${e}_${t}_${r}${n?`_${n}`:""}`,"getEdgeId"),k(Ou,"handleUndefinedAttr")});function fj(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}function Lae(e){J1=e}function Xh(e,t){if(t){if(gj.test(e))return e.replace(Nae,yj)}else if(mj.test(e))return e.replace(Oae,yj);return e}function iFe(e){return e.replace(Pae,(t,r)=>(r=r.toLowerCase(),r==="colon"?":":r.charAt(0)==="#"?r.charAt(1)==="x"?String.fromCharCode(parseInt(r.substring(2),16)):String.fromCharCode(+r.substring(1)):""))}function ds(e,t){let r=typeof e=="string"?e:e.source;t=t||"";let i={replace:(n,a)=>{let s=typeof a=="string"?a:a.source;return s=s.replace(Fae,"$1"),r=r.replace(n,s),i},getRegex:()=>new RegExp(r,t)};return i}function Rae(e){try{e=encodeURI(e).replace(/%25/g,"%")}catch{return null}return e}function Dae(e,t){let r=e.replace(/\|/g,(a,s,u)=>{let h=!1,d=s;for(;--d>=0&&u[d]==="\\";)h=!h;return h?"|":" |"}),i=r.split(/ \|/),n=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),t)if(i.length>t)i.splice(t);else for(;i.length<t;)i.push("");for(;n<i.length;n++)i[n]=i[n].trim().replace(/\\\|/g,"|");return i}function MC(e,t,r){let i=e.length;if(i===0)return"";let n=0;for(;n<i;){let a=e.charAt(i-n-1);if(a===t&&!r)n++;else if(a!==t&&r)n++;else break}return e.slice(0,i-n)}function nFe(e,t){if(e.indexOf(t[1])===-1)return-1;let r=0;for(let i=0;i<e.length;i++)if(e[i]==="\\")i++;else if(e[i]===t[0])r++;else if(e[i]===t[1]&&(r--,r<0))return i;return-1}function Iae(e,t,r,i){let n=t.href,a=t.title?Xh(t.title):null,s=e[1].replace(/\\([\[\]])/g,"$1");if(e[0].charAt(0)!=="!"){i.state.inLink=!0;let u={type:"link",raw:r,href:n,title:a,text:s,tokens:i.inlineTokens(s)};return i.state.inLink=!1,u}return{type:"image",raw:r,href:n,title:a,text:Xh(s)}}function aFe(e,t){let r=e.match(/^(\s+)(?:```)/);if(r===null)return t;let i=r[1];return t.split(`
`).map(n=>{let a=n.match(/^\s+/);if(a===null)return n;let[s]=a;return s.length>=i.length?n.slice(i.length):n}).join(`
`)}function ts(e,t){return rm.parse(e,t)}var J1,gj,Nae,mj,Oae,Bae,yj,Pae,Fae,x_,LC,$ae,zae,Gae,b_,Uae,vj,xj,pD,jae,fD,Hae,Vae,RC,gD,Wae,bj,Yae,mD,_j,qae,Xae,wj,Kae,kj,Zae,__,Qae,Jae,ese,tse,rse,ise,nse,ase,sse,DC,ose,Tj,Ej,lse,yD,use,vD,hse,IC,w_,em,NC,xD,tm,OC,cse,rm,sFe,oFe,lFe,uFe,hFe,cFe,dFe,pFe=D(()=>{J1=fj(),gj=/[&<>"']/,Nae=new RegExp(gj.source,"g"),mj=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,Oae=new RegExp(mj.source,"g"),Bae={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},yj=e=>Bae[e],Pae=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,Fae=/(^|[^\[])\^/g,x_={exec:()=>null},LC=class{options;rules;lexer;constructor(e){this.options=e||J1}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let r=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?r:MC(r,`
`)}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let r=t[0],i=aFe(r,t[3]||"");return{type:"code",raw:r,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:i}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let r=t[2].trim();if(/#$/.test(r)){let i=MC(r,"#");(this.options.pedantic||!i||/ $/.test(i))&&(r=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:MC(t[0],`
`)}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let r=MC(t[0],`
`).split(`
`),i="",n="",a=[];for(;r.length>0;){let s=!1,u=[],h;for(h=0;h<r.length;h++)if(/^ {0,3}>/.test(r[h]))u.push(r[h]),s=!0;else if(!s)u.push(r[h]);else break;r=r.slice(h);let d=u.join(`
`),p=d.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,"");i=i?`${i}
${d}`:d,n=n?`${n}
${p}`:p;let g=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(p,a,!0),this.lexer.state.top=g,r.length===0)break;let y=a[a.length-1];if(y?.type==="code")break;if(y?.type==="blockquote"){let m=y,x=m.raw+`
`+r.join(`
`),_=this.blockquote(x);a[a.length-1]=_,i=i.substring(0,i.length-m.raw.length)+_.raw,n=n.substring(0,n.length-m.text.length)+_.text;break}else if(y?.type==="list"){let m=y,x=m.raw+`
`+r.join(`
`),_=this.list(x);a[a.length-1]=_,i=i.substring(0,i.length-y.raw.length)+_.raw,n=n.substring(0,n.length-m.raw.length)+_.raw,r=x.substring(a[a.length-1].raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:a,text:n}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r=t[1].trim(),i=r.length>1,n={type:"list",raw:"",ordered:i,start:i?+r.slice(0,-1):"",loose:!1,items:[]};r=i?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=i?r:"[*+-]");let a=new RegExp(`^( {0,3}${r})((?:[	 ][^\\n]*)?(?:\\n|$))`),s=!1;for(;e;){let u=!1,h="",d="";if(!(t=a.exec(e))||this.rules.block.hr.test(e))break;h=t[0],e=e.substring(h.length);let p=t[2].split(`
`,1)[0].replace(/^\t+/,E=>" ".repeat(3*E.length)),g=e.split(`
`,1)[0],y=!p.trim(),m=0;if(this.options.pedantic?(m=2,d=p.trimStart()):y?m=t[1].length+1:(m=t[2].search(/[^ ]/),m=m>4?1:m,d=p.slice(m),m+=t[1].length),y&&/^ *$/.test(g)&&(h+=g+`
`,e=e.substring(g.length+1),u=!0),!u){let E=new RegExp(`^ {0,${Math.min(3,m-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),w=new RegExp(`^ {0,${Math.min(3,m-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),C=new RegExp(`^ {0,${Math.min(3,m-1)}}(?:\`\`\`|~~~)`),A=new RegExp(`^ {0,${Math.min(3,m-1)}}#`);for(;e;){let M=e.split(`
`,1)[0];if(g=M,this.options.pedantic&&(g=g.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),C.test(g)||A.test(g)||E.test(g)||w.test(e))break;if(g.search(/[^ ]/)>=m||!g.trim())d+=`
`+g.slice(m);else{if(y||p.search(/[^ ]/)>=4||C.test(p)||A.test(p)||w.test(p))break;d+=`
`+g}!y&&!g.trim()&&(y=!0),h+=M+`
`,e=e.substring(M.length+1),p=g.slice(m)}}n.loose||(s?n.loose=!0:/\n *\n *$/.test(h)&&(s=!0));let x=null,_;this.options.gfm&&(x=/^\[[ xX]\] /.exec(d),x&&(_=x[0]!=="[ ] ",d=d.replace(/^\[[ xX]\] +/,""))),n.items.push({type:"list_item",raw:h,task:!!x,checked:_,loose:!1,text:d,tokens:[]}),n.raw+=h}n.items[n.items.length-1].raw=n.items[n.items.length-1].raw.trimEnd(),n.items[n.items.length-1].text=n.items[n.items.length-1].text.trimEnd(),n.raw=n.raw.trimEnd();for(let u=0;u<n.items.length;u++)if(this.lexer.state.top=!1,n.items[u].tokens=this.lexer.blockTokens(n.items[u].text,[]),!n.loose){let h=n.items[u].tokens.filter(p=>p.type==="space"),d=h.length>0&&h.some(p=>/\n.*\n/.test(p.raw));n.loose=d}if(n.loose)for(let u=0;u<n.items.length;u++)n.items[u].loose=!0;return n}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let r=t[1].toLowerCase().replace(/\s+/g," "),i=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",n=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:r,raw:t[0],href:i,title:n}}}table(e){let t=this.rules.block.table.exec(e);if(!t||!/[:|]/.test(t[2]))return;let r=Dae(t[1]),i=t[2].replace(/^\||\| *$/g,"").split("|"),n=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[],a={type:"table",raw:t[0],header:[],align:[],rows:[]};if(r.length===i.length){for(let s of i)/^ *-+: *$/.test(s)?a.align.push("right"):/^ *:-+: *$/.test(s)?a.align.push("center"):/^ *:-+ *$/.test(s)?a.align.push("left"):a.align.push(null);for(let s=0;s<r.length;s++)a.header.push({text:r[s],tokens:this.lexer.inline(r[s]),header:!0,align:a.align[s]});for(let s of n)a.rows.push(Dae(s,a.header.length).map((u,h)=>({text:u,tokens:this.lexer.inline(u),header:!1,align:a.align[h]})));return a}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let r=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:r,tokens:this.lexer.inline(r)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:Xh(t[1])}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let r=t[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;let a=MC(r.slice(0,-1),"\\");if((r.length-a.length)%2===0)return}else{let a=nFe(t[2],"()");if(a>-1){let s=(t[0].indexOf("!")===0?5:4)+t[1].length+a;t[2]=t[2].substring(0,a),t[0]=t[0].substring(0,s).trim(),t[3]=""}}let i=t[2],n="";if(this.options.pedantic){let a=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);a&&(i=a[1],n=a[3])}else n=t[3]?t[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(this.options.pedantic&&!/>$/.test(r)?i=i.slice(1):i=i.slice(1,-1)),Iae(t,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:n&&n.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){let i=(r[2]||r[1]).replace(/\s+/g," "),n=t[i.toLowerCase()];if(!n){let a=r[0].charAt(0);return{type:"text",raw:a,text:a}}return Iae(r,n,r[0],this.lexer)}}emStrong(e,t,r=""){let i=this.rules.inline.emStrongLDelim.exec(e);if(!(!i||i[3]&&r.match(/[\p{L}\p{N}]/u))&&(!(i[1]||i[2])||!r||this.rules.inline.punctuation.exec(r))){let n=[...i[0]].length-1,a,s,u=n,h=0,d=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(d.lastIndex=0,t=t.slice(-1*e.length+n);(i=d.exec(t))!=null;){if(a=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!a)continue;if(s=[...a].length,i[3]||i[4]){u+=s;continue}else if((i[5]||i[6])&&n%3&&!((n+s)%3)){h+=s;continue}if(u-=s,u>0)continue;s=Math.min(s,s+u+h);let p=[...i[0]][0].length,g=e.slice(0,n+i.index+p+s);if(Math.min(n,s)%2){let m=g.slice(1,-1);return{type:"em",raw:g,text:m,tokens:this.lexer.inlineTokens(m)}}let y=g.slice(2,-2);return{type:"strong",raw:g,text:y,tokens:this.lexer.inlineTokens(y)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let r=t[2].replace(/\n/g," "),i=/[^ ]/.test(r),n=/^ /.test(r)&&/ $/.test(r);return i&&n&&(r=r.substring(1,r.length-1)),r=Xh(r,!0),{type:"codespan",raw:t[0],text:r}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let r,i;return t[2]==="@"?(r=Xh(t[1]),i="mailto:"+r):(r=Xh(t[1]),i=r),{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let r,i;if(t[2]==="@")r=Xh(t[0]),i="mailto:"+r;else{let n;do n=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??"";while(n!==t[0]);r=Xh(t[0]),t[1]==="www."?i="http://"+t[0]:i=t[0]}return{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let r;return this.lexer.state.inRawBlock?r=t[0]:r=Xh(t[0]),{type:"text",raw:t[0],text:r}}}},$ae=/^(?: *(?:\n|$))+/,zae=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,Gae=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,b_=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Uae=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,vj=/(?:[*+-]|\d{1,9}[.)])/,xj=ds(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,vj).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),pD=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,jae=/^[^\n]+/,fD=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Hae=ds(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",fD).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Vae=ds(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,vj).getRegex(),RC="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",gD=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Wae=ds("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",gD).replace("tag",RC).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),bj=ds(pD).replace("hr",b_).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",RC).getRegex(),Yae=ds(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",bj).getRegex(),mD={blockquote:Yae,code:zae,def:Hae,fences:Gae,heading:Uae,hr:b_,html:Wae,lheading:xj,list:Vae,newline:$ae,paragraph:bj,table:x_,text:jae},_j=ds("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",b_).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",RC).getRegex(),qae={...mD,table:_j,paragraph:ds(pD).replace("hr",b_).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",_j).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",RC).getRegex()},Xae={...mD,html:ds(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",gD).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:x_,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:ds(pD).replace("hr",b_).replace("heading",` *#{1,6} *[^
]`).replace("lheading",xj).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},wj=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Kae=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,kj=/^( {2,}|\\)\n(?!\s*$)/,Zae=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,__="\\p{P}\\p{S}",Qae=ds(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,__).getRegex(),Jae=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,ese=ds(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,__).getRegex(),tse=ds("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,__).getRegex(),rse=ds("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,__).getRegex(),ise=ds(/\\([punct])/,"gu").replace(/punct/g,__).getRegex(),nse=ds(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),ase=ds(gD).replace("(?:-->|$)","-->").getRegex(),sse=ds("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",ase).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),DC=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,ose=ds(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",DC).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Tj=ds(/^!?\[(label)\]\[(ref)\]/).replace("label",DC).replace("ref",fD).getRegex(),Ej=ds(/^!?\[(ref)\](?:\[\])?/).replace("ref",fD).getRegex(),lse=ds("reflink|nolink(?!\\()","g").replace("reflink",Tj).replace("nolink",Ej).getRegex(),yD={_backpedal:x_,anyPunctuation:ise,autolink:nse,blockSkip:Jae,br:kj,code:Kae,del:x_,emStrongLDelim:ese,emStrongRDelimAst:tse,emStrongRDelimUnd:rse,escape:wj,link:ose,nolink:Ej,punctuation:Qae,reflink:Tj,reflinkSearch:lse,tag:sse,text:Zae,url:x_},use={...yD,link:ds(/^!?\[(label)\]\((.*?)\)/).replace("label",DC).getRegex(),reflink:ds(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",DC).getRegex()},vD={...yD,escape:ds(wj).replace("])","~|])").getRegex(),url:ds(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},hse={...vD,br:ds(kj).replace("{2,}","*").getRegex(),text:ds(vD.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},IC={normal:mD,gfm:qae,pedantic:Xae},w_={normal:yD,gfm:vD,breaks:hse,pedantic:use},em=class Ete{tokens;options;state;tokenizer;inlineQueue;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||J1,this.options.tokenizer=this.options.tokenizer||new LC,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let r={block:IC.normal,inline:w_.normal};this.options.pedantic?(r.block=IC.pedantic,r.inline=w_.pedantic):this.options.gfm&&(r.block=IC.gfm,this.options.breaks?r.inline=w_.breaks:r.inline=w_.gfm),this.tokenizer.rules=r}static get rules(){return{block:IC,inline:w_}}static lex(t,r){return new Ete(r).lex(t)}static lexInline(t,r){return new Ete(r).inlineTokens(t)}lex(t){t=t.replace(/\r\n|\r/g,`
`),this.blockTokens(t,this.tokens);for(let r=0;r<this.inlineQueue.length;r++){let i=this.inlineQueue[r];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,r=[],i=!1){this.options.pedantic?t=t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t=t.replace(/^( *)(\t+)/gm,(u,h,d)=>h+"    ".repeat(d.length));let n,a,s;for(;t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(u=>(n=u.call({lexer:this},t,r))?(t=t.substring(n.raw.length),r.push(n),!0):!1))){if(n=this.tokenizer.space(t)){t=t.substring(n.raw.length),n.raw.length===1&&r.length>0?r[r.length-1].raw+=`
`:r.push(n);continue}if(n=this.tokenizer.code(t)){t=t.substring(n.raw.length),a=r[r.length-1],a&&(a.type==="paragraph"||a.type==="text")?(a.raw+=`
`+n.raw,a.text+=`
`+n.text,this.inlineQueue[this.inlineQueue.length-1].src=a.text):r.push(n);continue}if(n=this.tokenizer.fences(t)){t=t.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.heading(t)){t=t.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.hr(t)){t=t.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.blockquote(t)){t=t.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.list(t)){t=t.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.html(t)){t=t.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.def(t)){t=t.substring(n.raw.length),a=r[r.length-1],a&&(a.type==="paragraph"||a.type==="text")?(a.raw+=`
`+n.raw,a.text+=`
`+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=a.text):this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title});continue}if(n=this.tokenizer.table(t)){t=t.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.lheading(t)){t=t.substring(n.raw.length),r.push(n);continue}if(s=t,this.options.extensions&&this.options.extensions.startBlock){let u=1/0,h=t.slice(1),d;this.options.extensions.startBlock.forEach(p=>{d=p.call({lexer:this},h),typeof d=="number"&&d>=0&&(u=Math.min(u,d))}),u<1/0&&u>=0&&(s=t.substring(0,u+1))}if(this.state.top&&(n=this.tokenizer.paragraph(s))){a=r[r.length-1],i&&a?.type==="paragraph"?(a.raw+=`
`+n.raw,a.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=a.text):r.push(n),i=s.length!==t.length,t=t.substring(n.raw.length);continue}if(n=this.tokenizer.text(t)){t=t.substring(n.raw.length),a=r[r.length-1],a&&a.type==="text"?(a.raw+=`
`+n.raw,a.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=a.text):r.push(n);continue}if(t){let u="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return this.state.top=!0,r}inline(t,r=[]){return this.inlineQueue.push({src:t,tokens:r}),r}inlineTokens(t,r=[]){let i,n,a,s=t,u,h,d;if(this.tokens.links){let p=Object.keys(this.tokens.links);if(p.length>0)for(;(u=this.tokenizer.rules.inline.reflinkSearch.exec(s))!=null;)p.includes(u[0].slice(u[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,u.index)+"["+"a".repeat(u[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(u=this.tokenizer.rules.inline.blockSkip.exec(s))!=null;)s=s.slice(0,u.index)+"["+"a".repeat(u[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(u=this.tokenizer.rules.inline.anyPunctuation.exec(s))!=null;)s=s.slice(0,u.index)+"++"+s.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;t;)if(h||(d=""),h=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(p=>(i=p.call({lexer:this},t,r))?(t=t.substring(i.raw.length),r.push(i),!0):!1))){if(i=this.tokenizer.escape(t)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.tag(t)){t=t.substring(i.raw.length),n=r[r.length-1],n&&i.type==="text"&&n.type==="text"?(n.raw+=i.raw,n.text+=i.text):r.push(i);continue}if(i=this.tokenizer.link(t)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(i.raw.length),n=r[r.length-1],n&&i.type==="text"&&n.type==="text"?(n.raw+=i.raw,n.text+=i.text):r.push(i);continue}if(i=this.tokenizer.emStrong(t,s,d)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.codespan(t)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.br(t)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.del(t)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.autolink(t)){t=t.substring(i.raw.length),r.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(t))){t=t.substring(i.raw.length),r.push(i);continue}if(a=t,this.options.extensions&&this.options.extensions.startInline){let p=1/0,g=t.slice(1),y;this.options.extensions.startInline.forEach(m=>{y=m.call({lexer:this},g),typeof y=="number"&&y>=0&&(p=Math.min(p,y))}),p<1/0&&p>=0&&(a=t.substring(0,p+1))}if(i=this.tokenizer.inlineText(a)){t=t.substring(i.raw.length),i.raw.slice(-1)!=="_"&&(d=i.raw.slice(-1)),h=!0,n=r[r.length-1],n&&n.type==="text"?(n.raw+=i.raw,n.text+=i.text):r.push(i);continue}if(t){let p="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(p);break}else throw new Error(p)}}return r}},NC=class{options;parser;constructor(e){this.options=e||J1}space(e){return""}code({text:e,lang:t,escaped:r}){let i=(t||"").match(/^\S*/)?.[0],n=e.replace(/\n$/,"")+`
`;return i?'<pre><code class="language-'+Xh(i)+'">'+(r?n:Xh(n,!0))+`</code></pre>
`:"<pre><code>"+(r?n:Xh(n,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){let t=e.ordered,r=e.start,i="";for(let s=0;s<e.items.length;s++){let u=e.items[s];i+=this.listitem(u)}let n=t?"ol":"ul",a=t&&r!==1?' start="'+r+'"':"";return"<"+n+a+`>
`+i+"</"+n+`>
`}listitem(e){let t="";if(e.task){let r=this.checkbox({checked:!!e.checked});e.loose?e.tokens.length>0&&e.tokens[0].type==="paragraph"?(e.tokens[0].text=r+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=r+" "+e.tokens[0].tokens[0].text)):e.tokens.unshift({type:"text",raw:r+" ",text:r+" "}):t+=r+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",r="";for(let n=0;n<e.header.length;n++)r+=this.tablecell(e.header[n]);t+=this.tablerow({text:r});let i="";for(let n=0;n<e.rows.length;n++){let a=e.rows[n];r="";for(let s=0;s<a.length;s++)r+=this.tablecell(a[s]);i+=this.tablerow({text:r})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+i+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){let t=this.parser.parseInline(e.tokens),r=e.header?"th":"td";return(e.align?`<${r} align="${e.align}">`:`<${r}>`)+t+`</${r}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${e}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:r}){let i=this.parser.parseInline(r),n=Rae(e);if(n===null)return i;e=n;let a='<a href="'+e+'"';return t&&(a+=' title="'+t+'"'),a+=">"+i+"</a>",a}image({href:e,title:t,text:r}){let i=Rae(e);if(i===null)return r;e=i;let n=`<img src="${e}" alt="${r}"`;return t&&(n+=` title="${t}"`),n+=">",n}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):e.text}},xD=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},tm=class Cte{options;renderer;textRenderer;constructor(t){this.options=t||J1,this.options.renderer=this.options.renderer||new NC,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new xD}static parse(t,r){return new Cte(r).parse(t)}static parseInline(t,r){return new Cte(r).parseInline(t)}parse(t,r=!0){let i="";for(let n=0;n<t.length;n++){let a=t[n];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[a.type]){let u=a,h=this.options.extensions.renderers[u.type].call({parser:this},u);if(h!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(u.type)){i+=h||"";continue}}let s=a;switch(s.type){case"space":{i+=this.renderer.space(s);continue}case"hr":{i+=this.renderer.hr(s);continue}case"heading":{i+=this.renderer.heading(s);continue}case"code":{i+=this.renderer.code(s);continue}case"table":{i+=this.renderer.table(s);continue}case"blockquote":{i+=this.renderer.blockquote(s);continue}case"list":{i+=this.renderer.list(s);continue}case"html":{i+=this.renderer.html(s);continue}case"paragraph":{i+=this.renderer.paragraph(s);continue}case"text":{let u=s,h=this.renderer.text(u);for(;n+1<t.length&&t[n+1].type==="text";)u=t[++n],h+=`
`+this.renderer.text(u);r?i+=this.renderer.paragraph({type:"paragraph",raw:h,text:h,tokens:[{type:"text",raw:h,text:h}]}):i+=h;continue}default:{let u='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(u),"";throw new Error(u)}}}return i}parseInline(t,r){r=r||this.renderer;let i="";for(let n=0;n<t.length;n++){let a=t[n];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[a.type]){let u=this.options.extensions.renderers[a.type].call({parser:this},a);if(u!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){i+=u||"";continue}}let s=a;switch(s.type){case"escape":{i+=r.text(s);break}case"html":{i+=r.html(s);break}case"link":{i+=r.link(s);break}case"image":{i+=r.image(s);break}case"strong":{i+=r.strong(s);break}case"em":{i+=r.em(s);break}case"codespan":{i+=r.codespan(s);break}case"br":{i+=r.br(s);break}case"del":{i+=r.del(s);break}case"text":{i+=r.text(s);break}default:{let u='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(u),"";throw new Error(u)}}}return i}},OC=class{options;constructor(e){this.options=e||J1}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}},cse=class{defaults=fj();options=this.setOptions;parse=this.#e(em.lex,tm.parse);parseInline=this.#e(em.lexInline,tm.parseInline);Parser=tm;Renderer=NC;TextRenderer=xD;Lexer=em;Tokenizer=LC;Hooks=OC;constructor(...e){this.use(...e)}walkTokens(e,t){let r=[];for(let i of e)switch(r=r.concat(t.call(this,i)),i.type){case"table":{let n=i;for(let a of n.header)r=r.concat(this.walkTokens(a.tokens,t));for(let a of n.rows)for(let s of a)r=r.concat(this.walkTokens(s.tokens,t));break}case"list":{let n=i;r=r.concat(this.walkTokens(n.items,t));break}default:{let n=i;this.defaults.extensions?.childTokens?.[n.type]?this.defaults.extensions.childTokens[n.type].forEach(a=>{let s=n[a].flat(1/0);r=r.concat(this.walkTokens(s,t))}):n.tokens&&(r=r.concat(this.walkTokens(n.tokens,t)))}}return r}use(...e){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(r=>{let i={...r};if(i.async=this.defaults.async||i.async||!1,r.extensions&&(r.extensions.forEach(n=>{if(!n.name)throw new Error("extension name required");if("renderer"in n){let a=t.renderers[n.name];a?t.renderers[n.name]=function(...s){let u=n.renderer.apply(this,s);return u===!1&&(u=a.apply(this,s)),u}:t.renderers[n.name]=n.renderer}if("tokenizer"in n){if(!n.level||n.level!=="block"&&n.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let a=t[n.level];a?a.unshift(n.tokenizer):t[n.level]=[n.tokenizer],n.start&&(n.level==="block"?t.startBlock?t.startBlock.push(n.start):t.startBlock=[n.start]:n.level==="inline"&&(t.startInline?t.startInline.push(n.start):t.startInline=[n.start]))}"childTokens"in n&&n.childTokens&&(t.childTokens[n.name]=n.childTokens)}),i.extensions=t),r.renderer){let n=this.defaults.renderer||new NC(this.defaults);for(let a in r.renderer){if(!(a in n))throw new Error(`renderer '${a}' does not exist`);if(["options","parser"].includes(a))continue;let s=a,u=r.renderer[s];r.useNewRenderer||(u=this.#t(u,s,n));let h=n[s];n[s]=(...d)=>{let p=u.apply(n,d);return p===!1&&(p=h.apply(n,d)),p||""}}i.renderer=n}if(r.tokenizer){let n=this.defaults.tokenizer||new LC(this.defaults);for(let a in r.tokenizer){if(!(a in n))throw new Error(`tokenizer '${a}' does not exist`);if(["options","rules","lexer"].includes(a))continue;let s=a,u=r.tokenizer[s],h=n[s];n[s]=(...d)=>{let p=u.apply(n,d);return p===!1&&(p=h.apply(n,d)),p}}i.tokenizer=n}if(r.hooks){let n=this.defaults.hooks||new OC;for(let a in r.hooks){if(!(a in n))throw new Error(`hook '${a}' does not exist`);if(a==="options")continue;let s=a,u=r.hooks[s],h=n[s];OC.passThroughHooks.has(a)?n[s]=d=>{if(this.defaults.async)return Promise.resolve(u.call(n,d)).then(g=>h.call(n,g));let p=u.call(n,d);return h.call(n,p)}:n[s]=(...d)=>{let p=u.apply(n,d);return p===!1&&(p=h.apply(n,d)),p}}i.hooks=n}if(r.walkTokens){let n=this.defaults.walkTokens,a=r.walkTokens;i.walkTokens=function(s){let u=[];return u.push(a.call(this,s)),n&&(u=u.concat(n.call(this,s))),u}}this.defaults={...this.defaults,...i}}),this}#t(e,t,r){switch(t){case"heading":return function(i){return!i.type||i.type!==t?e.apply(this,arguments):e.call(this,r.parser.parseInline(i.tokens),i.depth,iFe(r.parser.parseInline(i.tokens,r.parser.textRenderer)))};case"code":return function(i){return!i.type||i.type!==t?e.apply(this,arguments):e.call(this,i.text,i.lang,!!i.escaped)};case"table":return function(i){if(!i.type||i.type!==t)return e.apply(this,arguments);let n="",a="";for(let u=0;u<i.header.length;u++)a+=this.tablecell({text:i.header[u].text,tokens:i.header[u].tokens,header:!0,align:i.align[u]});n+=this.tablerow({text:a});let s="";for(let u=0;u<i.rows.length;u++){let h=i.rows[u];a="";for(let d=0;d<h.length;d++)a+=this.tablecell({text:h[d].text,tokens:h[d].tokens,header:!1,align:i.align[d]});s+=this.tablerow({text:a})}return e.call(this,n,s)};case"blockquote":return function(i){if(!i.type||i.type!==t)return e.apply(this,arguments);let n=this.parser.parse(i.tokens);return e.call(this,n)};case"list":return function(i){if(!i.type||i.type!==t)return e.apply(this,arguments);let n=i.ordered,a=i.start,s=i.loose,u="";for(let h=0;h<i.items.length;h++){let d=i.items[h],p=d.checked,g=d.task,y="";if(d.task){let m=this.checkbox({checked:!!p});s?d.tokens.length>0&&d.tokens[0].type==="paragraph"?(d.tokens[0].text=m+" "+d.tokens[0].text,d.tokens[0].tokens&&d.tokens[0].tokens.length>0&&d.tokens[0].tokens[0].type==="text"&&(d.tokens[0].tokens[0].text=m+" "+d.tokens[0].tokens[0].text)):d.tokens.unshift({type:"text",text:m+" "}):y+=m+" "}y+=this.parser.parse(d.tokens,s),u+=this.listitem({type:"list_item",raw:y,text:y,task:g,checked:!!p,loose:s,tokens:d.tokens})}return e.call(this,u,n,a)};case"html":return function(i){return!i.type||i.type!==t?e.apply(this,arguments):e.call(this,i.text,i.block)};case"paragraph":return function(i){return!i.type||i.type!==t?e.apply(this,arguments):e.call(this,this.parser.parseInline(i.tokens))};case"escape":return function(i){return!i.type||i.type!==t?e.apply(this,arguments):e.call(this,i.text)};case"link":return function(i){return!i.type||i.type!==t?e.apply(this,arguments):e.call(this,i.href,i.title,this.parser.parseInline(i.tokens))};case"image":return function(i){return!i.type||i.type!==t?e.apply(this,arguments):e.call(this,i.href,i.title,i.text)};case"strong":return function(i){return!i.type||i.type!==t?e.apply(this,arguments):e.call(this,this.parser.parseInline(i.tokens))};case"em":return function(i){return!i.type||i.type!==t?e.apply(this,arguments):e.call(this,this.parser.parseInline(i.tokens))};case"codespan":return function(i){return!i.type||i.type!==t?e.apply(this,arguments):e.call(this,i.text)};case"del":return function(i){return!i.type||i.type!==t?e.apply(this,arguments):e.call(this,this.parser.parseInline(i.tokens))};case"text":return function(i){return!i.type||i.type!==t?e.apply(this,arguments):e.call(this,i.text)}}return e}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return em.lex(e,t??this.defaults)}parser(e,t){return tm.parse(e,t??this.defaults)}#e(e,t){return(r,i)=>{let n={...i},a={...this.defaults,...n};this.defaults.async===!0&&n.async===!1&&(a.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),a.async=!0);let s=this.#r(!!a.silent,!!a.async);if(typeof r>"u"||r===null)return s(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return s(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));if(a.hooks&&(a.hooks.options=a),a.async)return Promise.resolve(a.hooks?a.hooks.preprocess(r):r).then(u=>e(u,a)).then(u=>a.hooks?a.hooks.processAllTokens(u):u).then(u=>a.walkTokens?Promise.all(this.walkTokens(u,a.walkTokens)).then(()=>u):u).then(u=>t(u,a)).then(u=>a.hooks?a.hooks.postprocess(u):u).catch(s);try{a.hooks&&(r=a.hooks.preprocess(r));let u=e(r,a);a.hooks&&(u=a.hooks.processAllTokens(u)),a.walkTokens&&this.walkTokens(u,a.walkTokens);let h=t(u,a);return a.hooks&&(h=a.hooks.postprocess(h)),h}catch(u){return s(u)}}}#r(e,t){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e){let i="<p>An error occurred:</p><pre>"+Xh(r.message+"",!0)+"</pre>";return t?Promise.resolve(i):i}if(t)return Promise.reject(r);throw r}}},rm=new cse,ts.options=ts.setOptions=function(e){return rm.setOptions(e),ts.defaults=rm.defaults,Lae(ts.defaults),ts},ts.getDefaults=fj,ts.defaults=J1,ts.use=function(...e){return rm.use(...e),ts.defaults=rm.defaults,Lae(ts.defaults),ts},ts.walkTokens=function(e,t){return rm.walkTokens(e,t)},ts.parseInline=rm.parseInline,ts.Parser=tm,ts.parser=tm.parse,ts.Renderer=NC,ts.TextRenderer=xD,ts.Lexer=em,ts.lexer=em.lex,ts.Tokenizer=LC,ts.Hooks=OC,ts.parse=ts,sFe=ts.options,oFe=ts.setOptions,lFe=ts.use,uFe=ts.walkTokens,hFe=ts.parseInline,cFe=tm.parse,dFe=em.lex});function dse(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=Array.from(typeof e=="string"?[e]:e);i[i.length-1]=i[i.length-1].replace(/\r?\n([\t ]*)$/,"");var n=i.reduce(function(u,h){var d=h.match(/\n([\t ]+|(?!\s).)/g);return d?u.concat(d.map(function(p){var g,y;return(y=(g=p.match(/[\t ]/g))===null||g===void 0?void 0:g.length)!==null&&y!==void 0?y:0})):u},[]);if(n.length){var a=new RegExp(`
[	 ]{`+Math.min.apply(Math,n)+"}","g");i=i.map(function(u){return u.replace(a,`
`)})}i[0]=i[0].replace(/^\r?\n/,"");var s=i[0];return t.forEach(function(u,h){var d=s.match(/(?:^|\n)( *)$/),p=d?d[1]:"",g=u;typeof u=="string"&&u.includes(`
`)&&(g=String(u).split(`
`).map(function(y,m){return m===0?y:""+p+y}).join(`
`)),s+=g+i[h+1]}),s}var pse=D(()=>{});function fse(e,{markdownAutoWrap:t}){let r=e.replace(/<br\/>/g,`
`).replace(/\n{2,}/g,`
`),i=dse(r);return t===!1?i.replace(/ /g,"&nbsp;"):i}function gse(e,t={}){let r=fse(e,t),i=ts.lexer(r),n=[[]],a=0;function s(u,h="normal"){u.type==="text"?u.text.split(`
`).forEach((d,p)=>{p!==0&&(a++,n.push([])),d.split(" ").forEach(g=>{g=g.replace(/&#39;/g,"'"),g&&n[a].push({content:g,type:h})})}):u.type==="strong"||u.type==="em"?u.tokens.forEach(d=>{s(d,u.type)}):u.type==="html"&&n[a].push({content:u.text,type:"normal"})}return k(s,"processNode"),i.forEach(u=>{u.type==="paragraph"?u.tokens?.forEach(h=>{s(h)}):u.type==="html"&&n[a].push({content:u.text,type:"normal"})}),n}function mse(e,{markdownAutoWrap:t}={}){let r=ts.lexer(e);function i(n){return n.type==="text"?t===!1?n.text.replace(/\n */g,"<br/>").replace(/ /g,"&nbsp;"):n.text.replace(/\n */g,"<br/>"):n.type==="strong"?`<strong>${n.tokens?.map(i).join("")}</strong>`:n.type==="em"?`<em>${n.tokens?.map(i).join("")}</em>`:n.type==="paragraph"?`<p>${n.tokens?.map(i).join("")}</p>`:n.type==="space"?"":n.type==="html"?`${n.text}`:n.type==="escape"?n.text:`Unsupported markdown: ${n.type}`}return k(i,"output"),r.map(i).join("")}function yse(e){return Intl.Segmenter?[...new Intl.Segmenter().segment(e)].map(t=>t.segment):[...e]}function vse(e,t){let r=yse(t.content);return Cj(e,[],r,t.type)}function Cj(e,t,r,i){if(r.length===0)return[{content:t.join(""),type:i},{content:"",type:i}];let[n,...a]=r,s=[...t,n];return e([{content:s.join(""),type:i}])?Cj(e,s,a,i):(t.length===0&&n&&(t.push(n),r.shift()),[{content:t.join(""),type:i},{content:r.join(""),type:i}])}function xse(e,t){if(e.some(({content:r})=>r.includes(`
`)))throw new Error("splitLineToFitWidth does not support newlines in the line");return bD(e,t)}function bD(e,t,r=[],i=[]){if(e.length===0)return i.length>0&&r.push(i),r.length>0?r:[];let n="";e[0].content===" "&&(n=" ",e.shift());let a=e.shift()??{content:" ",type:"normal"},s=[...i];if(n!==""&&s.push({content:n,type:"normal"}),s.push(a),t(s))return bD(e,t,r,s);if(i.length>0)r.push(i),e.unshift(a);else if(a.content){let[u,h]=vse(t,a);r.push([u]),h.content&&e.unshift(h)}return bD(e,t,r)}function Sj(e,t){t&&e.attr("style",t)}async function bse(e,t,r,i,n=!1){let a=e.append("foreignObject");a.attr("width",`${10*r}px`),a.attr("height",`${10*r}px`);let s=a.append("xhtml:div"),u=t.label;t.label&&No(t.label)&&(u=await Wg(t.label.replace(zr.lineBreakRegex,`
`),at()));let h=t.isNode?"nodeLabel":"edgeLabel",d=s.append("span");d.html(u),Sj(d,t.labelStyle),d.attr("class",`${h} ${i}`),Sj(s,t.labelStyle),s.style("display","table-cell"),s.style("white-space","nowrap"),s.style("line-height","1.5"),s.style("max-width",r+"px"),s.style("text-align","center"),s.attr("xmlns","http://www.w3.org/1999/xhtml"),n&&s.attr("class","labelBkg");let p=s.node().getBoundingClientRect();return p.width===r&&(s.style("display","table"),s.style("white-space","break-spaces"),s.style("width",r+"px"),p=s.node().getBoundingClientRect()),a.node()}function _D(e,t,r){return e.append("tspan").attr("class","text-outer-tspan").attr("x",0).attr("y",t*r-.1+"em").attr("dy",r+"em")}function _se(e,t,r){let i=e.append("text"),n=_D(i,1,t);wD(n,r);let a=n.node().getComputedTextLength();return i.remove(),a}function wse(e,t,r){let i=e.append("text"),n=_D(i,1,t);wD(n,[{content:r,type:"normal"}]);let a=n.node()?.getBoundingClientRect();return a&&i.remove(),a}function kse(e,t,r,i=!1){let n=t.append("g"),a=n.insert("rect").attr("class","background").attr("style","stroke: none"),s=n.append("text").attr("y","-10.1"),u=0;for(let h of r){let d=k(g=>_se(n,1.1,g)<=e,"checkWidth"),p=d(h)?[h]:xse(h,d);for(let g of p){let y=_D(s,u,1.1);wD(y,g),u++}}if(i){let h=s.node().getBBox(),d=2;return a.attr("x",h.x-d).attr("y",h.y-d).attr("width",h.width+2*d).attr("height",h.height+2*d),n.node()}else return s.node()}function wD(e,t){e.text(""),t.forEach((r,i)=>{let n=e.append("tspan").attr("font-style",r.type==="em"?"italic":"normal").attr("class","text-inner-tspan").attr("font-weight",r.type==="strong"?"bold":"normal");i===0?n.text(r.content):n.text(" "+r.content)})}function Aj(e){return e.replace(/fa[bklrs]?:fa-[\w-]+/g,t=>`<i class='${t.replace(":"," ")}'></i>`)}var Kh,ch=D(()=>{Os(),Qn(),ha(),pFe(),pse(),k(fse,"preprocessMarkdown"),k(gse,"markdownToLines"),k(mse,"markdownToHTML"),k(yse,"splitTextToChars"),k(vse,"splitWordToFitWidth"),k(Cj,"splitWordToFitWidthRecursion"),k(xse,"splitLineToFitWidth"),k(bD,"splitLineToFitWidthRecursion"),k(Sj,"applyStyle"),k(bse,"addHtmlSpan"),k(_D,"createTspan"),k(_se,"computeWidthOfText"),k(wse,"computeDimensionOfText"),k(kse,"createFormattedText"),k(wD,"updateTextContentAndStyles"),k(Aj,"replaceIconSubstring"),Kh=k(async(e,t="",{style:r="",isTitle:i=!1,classes:n="",useHtmlLabels:a=!0,isNode:s=!0,width:u=200,addSvgBackground:h=!1}={},d)=>{if(Ce.debug("XYZ createText",t,r,i,n,a,s,"addSvgBackground: ",h),a){let p=mse(t,d),g=Aj(N0(p)),y=t.replace(/\\\\/g,"\\"),m={isNode:s,label:No(t)?y:g,labelStyle:r.replace("fill:","color:")};return await bse(e,m,u,n,h)}else{let p=t.replace(/<br\s*\/?>/g,"<br/>"),g=gse(p.replace("<br>","<br/>"),d),y=kse(u,e,g,t?h:!1);if(s){/stroke:/.exec(r)&&(r=r.replace("stroke:","lineColor:"));let m=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");Nr(y).attr("style",m)}else{let m=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/background:/g,"fill:");Nr(y).select("rect").attr("style",m.replace(/background:/g,"fill:"));let x=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");Nr(y).select("text").attr("style",x)}return y}},"createText")});function Mj(e,t,r){if(e&&e.length){let[i,n]=t,a=Math.PI/180*r,s=Math.cos(a),u=Math.sin(a);for(let h of e){let[d,p]=h;h[0]=(d-i)*s-(p-n)*u+i,h[1]=(d-i)*u+(p-n)*s+n}}}function fFe(e,t){return e[0]===t[0]&&e[1]===t[1]}function gFe(e,t,r,i=1){let n=r,a=Math.max(t,.1),s=e[0]&&e[0][0]&&typeof e[0][0]=="number"?[e]:e,u=[0,0];if(n)for(let d of s)Mj(d,u,n);let h=function(d,p,g){let y=[];for(let C of d){let A=[...C];fFe(A[0],A[A.length-1])||A.push([A[0][0],A[0][1]]),A.length>2&&y.push(A)}let m=[];p=Math.max(p,.1);let x=[];for(let C of y)for(let A=0;A<C.length-1;A++){let M=C[A],N=C[A+1];if(M[1]!==N[1]){let B=Math.min(M[1],N[1]);x.push({ymin:B,ymax:Math.max(M[1],N[1]),x:B===M[1]?M[0]:N[0],islope:(N[0]-M[0])/(N[1]-M[1])})}}if(x.sort((C,A)=>C.ymin<A.ymin?-1:C.ymin>A.ymin?1:C.x<A.x?-1:C.x>A.x?1:C.ymax===A.ymax?0:(C.ymax-A.ymax)/Math.abs(C.ymax-A.ymax)),!x.length)return m;let _=[],E=x[0].ymin,w=0;for(;_.length||x.length;){if(x.length){let C=-1;for(let A=0;A<x.length&&!(x[A].ymin>E);A++)C=A;x.splice(0,C+1).forEach(A=>{_.push({s:E,edge:A})})}if(_=_.filter(C=>!(C.edge.ymax<=E)),_.sort((C,A)=>C.edge.x===A.edge.x?0:(C.edge.x-A.edge.x)/Math.abs(C.edge.x-A.edge.x)),(g!==1||w%p==0)&&_.length>1)for(let C=0;C<_.length;C+=2){let A=C+1;if(A>=_.length)break;let M=_[C].edge,N=_[A].edge;m.push([[Math.round(M.x),E],[Math.round(N.x),E]])}E+=g,_.forEach(C=>{C.edge.x=C.edge.x+g*C.edge.islope}),w++}return m}(s,a,i);if(n){for(let d of s)Mj(d,u,-n);(function(d,p,g){let y=[];d.forEach(m=>y.push(...m)),Mj(y,p,g)})(h,u,-n)}return h}function BC(e,t){var r;let i=t.hachureAngle+90,n=t.hachureGap;n<0&&(n=4*t.strokeWidth),n=Math.round(Math.max(n,.1));let a=1;return t.roughness>=1&&(((r=t.randomizer)===null||r===void 0?void 0:r.next())||Math.random())>.7&&(a=n),gFe(e,n,i,a||1)}function kD(e){let t=e[0],r=e[1];return Math.sqrt(Math.pow(t[0]-r[0],2)+Math.pow(t[1]-r[1],2))}function Lj(e,t){return e.type===t}function Rj(e){let t=[],r=function(s){let u=new Array;for(;s!=="";)if(s.match(/^([ \t\r\n,]+)/))s=s.substr(RegExp.$1.length);else if(s.match(/^([aAcChHlLmMqQsStTvVzZ])/))u[u.length]={type:jse,text:RegExp.$1},s=s.substr(RegExp.$1.length);else{if(!s.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];u[u.length]={type:RD,text:`${parseFloat(RegExp.$1)}`},s=s.substr(RegExp.$1.length)}return u[u.length]={type:Pj,text:""},u}(e),i="BOD",n=0,a=r[n];for(;!Lj(a,Pj);){let s=0,u=[];if(i==="BOD"){if(a.text!=="M"&&a.text!=="m")return Rj("M0,0"+e);n++,s=$C[a.text],i=a.text}else Lj(a,RD)?s=$C[i]:(n++,s=$C[a.text],i=a.text);if(!(n+s<r.length))throw new Error("Path data ended short");for(let h=n;h<n+s;h++){let d=r[h];if(!Lj(d,RD))throw new Error("Param not a number: "+i+","+d.text);u[u.length]=+d.text}if(typeof $C[i]!="number")throw new Error("Bad segment: "+i);{let h={key:i,data:u};t.push(h),n+=s,a=r[n],i==="M"&&(i="L"),i==="m"&&(i="l")}}return t}function Tse(e){let t=0,r=0,i=0,n=0,a=[];for(let{key:s,data:u}of e)switch(s){case"M":a.push({key:"M",data:[...u]}),[t,r]=u,[i,n]=u;break;case"m":t+=u[0],r+=u[1],a.push({key:"M",data:[t,r]}),i=t,n=r;break;case"L":a.push({key:"L",data:[...u]}),[t,r]=u;break;case"l":t+=u[0],r+=u[1],a.push({key:"L",data:[t,r]});break;case"C":a.push({key:"C",data:[...u]}),t=u[4],r=u[5];break;case"c":{let h=u.map((d,p)=>p%2?d+r:d+t);a.push({key:"C",data:h}),t=h[4],r=h[5];break}case"Q":a.push({key:"Q",data:[...u]}),t=u[2],r=u[3];break;case"q":{let h=u.map((d,p)=>p%2?d+r:d+t);a.push({key:"Q",data:h}),t=h[2],r=h[3];break}case"A":a.push({key:"A",data:[...u]}),t=u[5],r=u[6];break;case"a":t+=u[5],r+=u[6],a.push({key:"A",data:[u[0],u[1],u[2],u[3],u[4],t,r]});break;case"H":a.push({key:"H",data:[...u]}),t=u[0];break;case"h":t+=u[0],a.push({key:"H",data:[t]});break;case"V":a.push({key:"V",data:[...u]}),r=u[0];break;case"v":r+=u[0],a.push({key:"V",data:[r]});break;case"S":a.push({key:"S",data:[...u]}),t=u[2],r=u[3];break;case"s":{let h=u.map((d,p)=>p%2?d+r:d+t);a.push({key:"S",data:h}),t=h[2],r=h[3];break}case"T":a.push({key:"T",data:[...u]}),t=u[0],r=u[1];break;case"t":t+=u[0],r+=u[1],a.push({key:"T",data:[t,r]});break;case"Z":case"z":a.push({key:"Z",data:[]}),t=i,r=n}return a}function Ese(e){let t=[],r="",i=0,n=0,a=0,s=0,u=0,h=0;for(let{key:d,data:p}of e){switch(d){case"M":t.push({key:"M",data:[...p]}),[i,n]=p,[a,s]=p;break;case"C":t.push({key:"C",data:[...p]}),i=p[4],n=p[5],u=p[2],h=p[3];break;case"L":t.push({key:"L",data:[...p]}),[i,n]=p;break;case"H":i=p[0],t.push({key:"L",data:[i,n]});break;case"V":n=p[0],t.push({key:"L",data:[i,n]});break;case"S":{let g=0,y=0;r==="C"||r==="S"?(g=i+(i-u),y=n+(n-h)):(g=i,y=n),t.push({key:"C",data:[g,y,...p]}),u=p[0],h=p[1],i=p[2],n=p[3];break}case"T":{let[g,y]=p,m=0,x=0;r==="Q"||r==="T"?(m=i+(i-u),x=n+(n-h)):(m=i,x=n);let _=i+2*(m-i)/3,E=n+2*(x-n)/3,w=g+2*(m-g)/3,C=y+2*(x-y)/3;t.push({key:"C",data:[_,E,w,C,g,y]}),u=m,h=x,i=g,n=y;break}case"Q":{let[g,y,m,x]=p,_=i+2*(g-i)/3,E=n+2*(y-n)/3,w=m+2*(g-m)/3,C=x+2*(y-x)/3;t.push({key:"C",data:[_,E,w,C,m,x]}),u=g,h=y,i=m,n=x;break}case"A":{let g=Math.abs(p[0]),y=Math.abs(p[1]),m=p[2],x=p[3],_=p[4],E=p[5],w=p[6];g===0||y===0?(t.push({key:"C",data:[i,n,E,w,E,w]}),i=E,n=w):(i!==E||n!==w)&&(Cse(i,n,E,w,g,y,m,x,_).forEach(function(C){t.push({key:"C",data:C})}),i=E,n=w);break}case"Z":t.push({key:"Z",data:[]}),i=a,n=s}r=d}return t}function PC(e,t,r){return[e*Math.cos(r)-t*Math.sin(r),e*Math.sin(r)+t*Math.cos(r)]}function Cse(e,t,r,i,n,a,s,u,h,d){let p=(g=s,Math.PI*g/180);var g;let y=[],m=0,x=0,_=0,E=0;if(d)[m,x,_,E]=d;else{[e,t]=PC(e,t,-p),[r,i]=PC(r,i,-p);let X=(e-r)/2,I=(t-i)/2,j=X*X/(n*n)+I*I/(a*a);j>1&&(j=Math.sqrt(j),n*=j,a*=j);let H=n*n,V=a*a,P=H*V-H*I*I-V*X*X,q=H*I*I+V*X*X,Z=(u===h?-1:1)*Math.sqrt(Math.abs(P/q));_=Z*n*I/a+(e+r)/2,E=Z*-a*X/n+(t+i)/2,m=Math.asin(parseFloat(((t-E)/a).toFixed(9))),x=Math.asin(parseFloat(((i-E)/a).toFixed(9))),e<_&&(m=Math.PI-m),r<_&&(x=Math.PI-x),m<0&&(m=2*Math.PI+m),x<0&&(x=2*Math.PI+x),h&&m>x&&(m-=2*Math.PI),!h&&x>m&&(x-=2*Math.PI)}let w=x-m;if(Math.abs(w)>120*Math.PI/180){let X=x,I=r,j=i;x=h&&x>m?m+120*Math.PI/180*1:m+120*Math.PI/180*-1,y=Cse(r=_+n*Math.cos(x),i=E+a*Math.sin(x),I,j,n,a,s,0,h,[x,X,_,E])}w=x-m;let C=Math.cos(m),A=Math.sin(m),M=Math.cos(x),N=Math.sin(x),B=Math.tan(w/4),O=4/3*n*B,L=4/3*a*B,$=[e,t],G=[e+O*A,t-L*C],z=[r+O*N,i-L*M],F=[r,i];if(G[0]=2*$[0]-G[0],G[1]=2*$[1]-G[1],d)return[G,z,F].concat(y);{y=[G,z,F].concat(y);let X=[];for(let I=0;I<y.length;I+=3){let j=PC(y[I][0],y[I][1],p),H=PC(y[I+1][0],y[I+1][1],p),V=PC(y[I+2][0],y[I+2][1],p);X.push([j[0],j[1],H[0],H[1],V[0],V[1]])}return X}}function Sse(e,t,r,i,n){return{type:"path",ops:im(e,t,r,i,n)}}function TD(e,t,r){let i=(e||[]).length;if(i>2){let n=[];for(let a=0;a<i-1;a++)n.push(...im(e[a][0],e[a][1],e[a+1][0],e[a+1][1],r));return t&&n.push(...im(e[i-1][0],e[i-1][1],e[0][0],e[0][1],r)),{type:"path",ops:n}}return i===2?Sse(e[0][0],e[0][1],e[1][0],e[1][1],r):{type:"path",ops:[]}}function mFe(e,t,r,i,n){return function(a,s){return TD(a,!0,s)}([[e,t],[e+r,t],[e+r,t+i],[e,t+i]],n)}function Ase(e,t){if(e.length){let r=typeof e[0][0]=="number"?[e]:e,i=CD(r[0],1*(1+.2*t.roughness),t),n=t.disableMultiStroke?[]:CD(r[0],1.5*(1+.22*t.roughness),Dse(t));for(let a=1;a<r.length;a++){let s=r[a];if(s.length){let u=CD(s,1*(1+.2*t.roughness),t),h=t.disableMultiStroke?[]:CD(s,1.5*(1+.22*t.roughness),Dse(t));for(let d of u)d.op!=="move"&&i.push(d);for(let d of h)d.op!=="move"&&n.push(d)}}return{type:"path",ops:i.concat(n)}}return{type:"path",ops:[]}}function Mse(e,t,r){let i=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(e/2,2)+Math.pow(t/2,2))/2)),n=Math.ceil(Math.max(r.curveStepCount,r.curveStepCount/Math.sqrt(200)*i)),a=2*Math.PI/n,s=Math.abs(e/2),u=Math.abs(t/2),h=1-r.curveFitting;return s+=In(s*h,r),u+=In(u*h,r),{increment:a,rx:s,ry:u}}function Dj(e,t,r,i){let[n,a]=Nse(i.increment,e,t,i.rx,i.ry,1,i.increment*ED(.1,ED(.4,1,r),r),r),s=SD(n,null,r);if(!r.disableMultiStroke&&r.roughness!==0){let[u]=Nse(i.increment,e,t,i.rx,i.ry,1.5,0,r),h=SD(u,null,r);s=s.concat(h)}return{estimatedPoints:a,opset:{type:"path",ops:s}}}function Lse(e,t,r,i,n,a,s,u,h){let d=e,p=t,g=Math.abs(r/2),y=Math.abs(i/2);g+=In(.01*g,h),y+=In(.01*y,h);let m=n,x=a;for(;m<0;)m+=2*Math.PI,x+=2*Math.PI;x-m>2*Math.PI&&(m=0,x=2*Math.PI);let _=2*Math.PI/h.curveStepCount,E=Math.min(_/2,(x-m)/2),w=Ose(E,d,p,g,y,m,x,1,h);if(!h.disableMultiStroke){let C=Ose(E,d,p,g,y,m,x,1.5,h);w.push(...C)}return s&&(u?w.push(...im(d,p,d+g*Math.cos(m),p+y*Math.sin(m),h),...im(d,p,d+g*Math.cos(x),p+y*Math.sin(x),h)):w.push({op:"lineTo",data:[d,p]},{op:"lineTo",data:[d+g*Math.cos(m),p+y*Math.sin(m)]})),{type:"path",ops:w}}function Rse(e,t){let r=Ese(Tse(Rj(e))),i=[],n=[0,0],a=[0,0];for(let{key:s,data:u}of r)switch(s){case"M":a=[u[0],u[1]],n=[u[0],u[1]];break;case"L":i.push(...im(a[0],a[1],u[0],u[1],t)),a=[u[0],u[1]];break;case"C":{let[h,d,p,g,y,m]=u;i.push(...yFe(h,d,p,g,y,m,a,t)),a=[y,m];break}case"Z":i.push(...im(a[0],a[1],n[0],n[1],t)),a=[n[0],n[1]]}return{type:"path",ops:i}}function Ij(e,t){let r=[];for(let i of e)if(i.length){let n=t.maxRandomnessOffset||0,a=i.length;if(a>2){r.push({op:"move",data:[i[0][0]+In(n,t),i[0][1]+In(n,t)]});for(let s=1;s<a;s++)r.push({op:"lineTo",data:[i[s][0]+In(n,t),i[s][1]+In(n,t)]})}}return{type:"fillPath",ops:r}}function k_(e,t){return function(r,i){let n=r.fillStyle||"hachure";if(!Bu[n])switch(n){case"zigzag":Bu[n]||(Bu[n]=new Pse(i));break;case"cross-hatch":Bu[n]||(Bu[n]=new Fse(i));break;case"dots":Bu[n]||(Bu[n]=new $se(i));break;case"dashed":Bu[n]||(Bu[n]=new zse(i));break;case"zigzag-line":Bu[n]||(Bu[n]=new Gse(i));break;default:n="hachure",Bu[n]||(Bu[n]=new LD(i))}return Bu[n]}(t,Hse).fillPolygons(e,t)}function Dse(e){let t=Object.assign({},e);return t.randomizer=void 0,e.seed&&(t.seed=e.seed+1),t}function Ise(e){return e.randomizer||(e.randomizer=new Use(e.seed||0)),e.randomizer.next()}function ED(e,t,r,i=1){return r.roughness*i*(Ise(r)*(t-e)+e)}function In(e,t,r=1){return ED(-e,e,t,r)}function im(e,t,r,i,n,a=!1){let s=a?n.disableMultiStrokeFill:n.disableMultiStroke,u=Nj(e,t,r,i,n,!0,!1);if(s)return u;let h=Nj(e,t,r,i,n,!0,!0);return u.concat(h)}function Nj(e,t,r,i,n,a,s){let u=Math.pow(e-r,2)+Math.pow(t-i,2),h=Math.sqrt(u),d=1;d=h<200?1:h>500?.4:-.0016668*h+1.233334;let p=n.maxRandomnessOffset||0;p*p*100>u&&(p=h/10);let g=p/2,y=.2+.2*Ise(n),m=n.bowing*n.maxRandomnessOffset*(i-t)/200,x=n.bowing*n.maxRandomnessOffset*(e-r)/200;m=In(m,n,d),x=In(x,n,d);let _=[],E=()=>In(g,n,d),w=()=>In(p,n,d),C=n.preserveVertices;return a&&(s?_.push({op:"move",data:[e+(C?0:E()),t+(C?0:E())]}):_.push({op:"move",data:[e+(C?0:In(p,n,d)),t+(C?0:In(p,n,d))]})),s?_.push({op:"bcurveTo",data:[m+e+(r-e)*y+E(),x+t+(i-t)*y+E(),m+e+2*(r-e)*y+E(),x+t+2*(i-t)*y+E(),r+(C?0:E()),i+(C?0:E())]}):_.push({op:"bcurveTo",data:[m+e+(r-e)*y+w(),x+t+(i-t)*y+w(),m+e+2*(r-e)*y+w(),x+t+2*(i-t)*y+w(),r+(C?0:w()),i+(C?0:w())]}),_}function CD(e,t,r){if(!e.length)return[];let i=[];i.push([e[0][0]+In(t,r),e[0][1]+In(t,r)]),i.push([e[0][0]+In(t,r),e[0][1]+In(t,r)]);for(let n=1;n<e.length;n++)i.push([e[n][0]+In(t,r),e[n][1]+In(t,r)]),n===e.length-1&&i.push([e[n][0]+In(t,r),e[n][1]+In(t,r)]);return SD(i,null,r)}function SD(e,t,r){let i=e.length,n=[];if(i>3){let a=[],s=1-r.curveTightness;n.push({op:"move",data:[e[1][0],e[1][1]]});for(let u=1;u+2<i;u++){let h=e[u];a[0]=[h[0],h[1]],a[1]=[h[0]+(s*e[u+1][0]-s*e[u-1][0])/6,h[1]+(s*e[u+1][1]-s*e[u-1][1])/6],a[2]=[e[u+1][0]+(s*e[u][0]-s*e[u+2][0])/6,e[u+1][1]+(s*e[u][1]-s*e[u+2][1])/6],a[3]=[e[u+1][0],e[u+1][1]],n.push({op:"bcurveTo",data:[a[1][0],a[1][1],a[2][0],a[2][1],a[3][0],a[3][1]]})}if(t&&t.length===2){let u=r.maxRandomnessOffset;n.push({op:"lineTo",data:[t[0]+In(u,r),t[1]+In(u,r)]})}}else i===3?(n.push({op:"move",data:[e[1][0],e[1][1]]}),n.push({op:"bcurveTo",data:[e[1][0],e[1][1],e[2][0],e[2][1],e[2][0],e[2][1]]})):i===2&&n.push(...Nj(e[0][0],e[0][1],e[1][0],e[1][1],r,!0,!0));return n}function Nse(e,t,r,i,n,a,s,u){let h=[],d=[];if(u.roughness===0){e/=4,d.push([t+i*Math.cos(-e),r+n*Math.sin(-e)]);for(let p=0;p<=2*Math.PI;p+=e){let g=[t+i*Math.cos(p),r+n*Math.sin(p)];h.push(g),d.push(g)}d.push([t+i*Math.cos(0),r+n*Math.sin(0)]),d.push([t+i*Math.cos(e),r+n*Math.sin(e)])}else{let p=In(.5,u)-Math.PI/2;d.push([In(a,u)+t+.9*i*Math.cos(p-e),In(a,u)+r+.9*n*Math.sin(p-e)]);let g=2*Math.PI+p-.01;for(let y=p;y<g;y+=e){let m=[In(a,u)+t+i*Math.cos(y),In(a,u)+r+n*Math.sin(y)];h.push(m),d.push(m)}d.push([In(a,u)+t+i*Math.cos(p+2*Math.PI+.5*s),In(a,u)+r+n*Math.sin(p+2*Math.PI+.5*s)]),d.push([In(a,u)+t+.98*i*Math.cos(p+s),In(a,u)+r+.98*n*Math.sin(p+s)]),d.push([In(a,u)+t+.9*i*Math.cos(p+.5*s),In(a,u)+r+.9*n*Math.sin(p+.5*s)])}return[d,h]}function Ose(e,t,r,i,n,a,s,u,h){let d=a+In(.1,h),p=[];p.push([In(u,h)+t+.9*i*Math.cos(d-e),In(u,h)+r+.9*n*Math.sin(d-e)]);for(let g=d;g<=s;g+=e)p.push([In(u,h)+t+i*Math.cos(g),In(u,h)+r+n*Math.sin(g)]);return p.push([t+i*Math.cos(s),r+n*Math.sin(s)]),p.push([t+i*Math.cos(s),r+n*Math.sin(s)]),SD(p,null,h)}function yFe(e,t,r,i,n,a,s,u){let h=[],d=[u.maxRandomnessOffset||1,(u.maxRandomnessOffset||1)+.3],p=[0,0],g=u.disableMultiStroke?1:2,y=u.preserveVertices;for(let m=0;m<g;m++)m===0?h.push({op:"move",data:[s[0],s[1]]}):h.push({op:"move",data:[s[0]+(y?0:In(d[0],u)),s[1]+(y?0:In(d[0],u))]}),p=y?[n,a]:[n+In(d[m],u),a+In(d[m],u)],h.push({op:"bcurveTo",data:[e+In(d[m],u),t+In(d[m],u),r+In(d[m],u),i+In(d[m],u),p[0],p[1]]});return h}function FC(e){return[...e]}function Bse(e,t=0){let r=e.length;if(r<3)throw new Error("A curve must have at least three points.");let i=[];if(r===3)i.push(FC(e[0]),FC(e[1]),FC(e[2]),FC(e[2]));else{let n=[];n.push(e[0],e[0]);for(let u=1;u<e.length;u++)n.push(e[u]),u===e.length-1&&n.push(e[u]);let a=[],s=1-t;i.push(FC(n[0]));for(let u=1;u+2<n.length;u++){let h=n[u];a[0]=[h[0],h[1]],a[1]=[h[0]+(s*n[u+1][0]-s*n[u-1][0])/6,h[1]+(s*n[u+1][1]-s*n[u-1][1])/6],a[2]=[n[u+1][0]+(s*n[u][0]-s*n[u+2][0])/6,n[u+1][1]+(s*n[u][1]-s*n[u+2][1])/6],a[3]=[n[u+1][0],n[u+1][1]],i.push(a[1],a[2],a[3])}}return i}function AD(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function vFe(e,t,r){let i=AD(t,r);if(i===0)return AD(e,t);let n=((e[0]-t[0])*(r[0]-t[0])+(e[1]-t[1])*(r[1]-t[1]))/i;return n=Math.max(0,Math.min(1,n)),AD(e,Sv(t,r,n))}function Sv(e,t,r){return[e[0]+(t[0]-e[0])*r,e[1]+(t[1]-e[1])*r]}function Oj(e,t,r,i){let n=i||[];if(function(u,h){let d=u[h+0],p=u[h+1],g=u[h+2],y=u[h+3],m=3*p[0]-2*d[0]-y[0];m*=m;let x=3*p[1]-2*d[1]-y[1];x*=x;let _=3*g[0]-2*y[0]-d[0];_*=_;let E=3*g[1]-2*y[1]-d[1];return E*=E,m<_&&(m=_),x<E&&(x=E),m+x}(e,t)<r){let u=e[t+0];n.length?(a=n[n.length-1],s=u,Math.sqrt(AD(a,s))>1&&n.push(u)):n.push(u),n.push(e[t+3])}else{let u=e[t+0],h=e[t+1],d=e[t+2],p=e[t+3],g=Sv(u,h,.5),y=Sv(h,d,.5),m=Sv(d,p,.5),x=Sv(g,y,.5),_=Sv(y,m,.5),E=Sv(x,_,.5);Oj([u,g,x,E],0,r,n),Oj([E,_,m,p],0,r,n)}var a,s;return n}function xFe(e,t){return MD(e,0,e.length,t)}function MD(e,t,r,i,n){let a=n||[],s=e[t],u=e[r-1],h=0,d=1;for(let p=t+1;p<r-1;++p){let g=vFe(e[p],s,u);g>h&&(h=g,d=p)}return Math.sqrt(h)>i?(MD(e,t,d+1,i,a),MD(e,d,r,i,a)):(a.length||a.push(s),a.push(u)),a}function Bj(e,t=.15,r){let i=[],n=(e.length-1)/3;for(let a=0;a<n;a++)Oj(e,3*a,t,i);return r&&r>0?MD(i,0,i.length,r):i}var LD,Pse,Fse,$se,zse,Gse,Bu,Use,jse,RD,Pj,$C,Hse,dh,zC,Vse,GC,Wse,cn,En=D(()=>{LD=class{constructor(e){this.helper=e}fillPolygons(e,t){return this._fillPolygons(e,t)}_fillPolygons(e,t){let r=BC(e,t);return{type:"fillSketch",ops:this.renderLines(r,t)}}renderLines(e,t){let r=[];for(let i of e)r.push(...this.helper.doubleLineOps(i[0][0],i[0][1],i[1][0],i[1][1],t));return r}},Pse=class extends LD{fillPolygons(e,t){let r=t.hachureGap;r<0&&(r=4*t.strokeWidth),r=Math.max(r,.1);let i=BC(e,Object.assign({},t,{hachureGap:r})),n=Math.PI/180*t.hachureAngle,a=[],s=.5*r*Math.cos(n),u=.5*r*Math.sin(n);for(let[h,d]of i)kD([h,d])&&a.push([[h[0]-s,h[1]+u],[...d]],[[h[0]+s,h[1]-u],[...d]]);return{type:"fillSketch",ops:this.renderLines(a,t)}}},Fse=class extends LD{fillPolygons(e,t){let r=this._fillPolygons(e,t),i=Object.assign({},t,{hachureAngle:t.hachureAngle+90}),n=this._fillPolygons(e,i);return r.ops=r.ops.concat(n.ops),r}},$se=class{constructor(e){this.helper=e}fillPolygons(e,t){let r=BC(e,t=Object.assign({},t,{hachureAngle:0}));return this.dotsOnLines(r,t)}dotsOnLines(e,t){let r=[],i=t.hachureGap;i<0&&(i=4*t.strokeWidth),i=Math.max(i,.1);let n=t.fillWeight;n<0&&(n=t.strokeWidth/2);let a=i/4;for(let s of e){let u=kD(s),h=u/i,d=Math.ceil(h)-1,p=u-d*i,g=(s[0][0]+s[1][0])/2-i/4,y=Math.min(s[0][1],s[1][1]);for(let m=0;m<d;m++){let x=y+p+m*i,_=g-a+2*Math.random()*a,E=x-a+2*Math.random()*a,w=this.helper.ellipse(_,E,n,n,t);r.push(...w.ops)}}return{type:"fillSketch",ops:r}}},zse=class{constructor(e){this.helper=e}fillPolygons(e,t){let r=BC(e,t);return{type:"fillSketch",ops:this.dashedLine(r,t)}}dashedLine(e,t){let r=t.dashOffset<0?t.hachureGap<0?4*t.strokeWidth:t.hachureGap:t.dashOffset,i=t.dashGap<0?t.hachureGap<0?4*t.strokeWidth:t.hachureGap:t.dashGap,n=[];return e.forEach(a=>{let s=kD(a),u=Math.floor(s/(r+i)),h=(s+i-u*(r+i))/2,d=a[0],p=a[1];d[0]>p[0]&&(d=a[1],p=a[0]);let g=Math.atan((p[1]-d[1])/(p[0]-d[0]));for(let y=0;y<u;y++){let m=y*(r+i),x=m+r,_=[d[0]+m*Math.cos(g)+h*Math.cos(g),d[1]+m*Math.sin(g)+h*Math.sin(g)],E=[d[0]+x*Math.cos(g)+h*Math.cos(g),d[1]+x*Math.sin(g)+h*Math.sin(g)];n.push(...this.helper.doubleLineOps(_[0],_[1],E[0],E[1],t))}}),n}},Gse=class{constructor(e){this.helper=e}fillPolygons(e,t){let r=t.hachureGap<0?4*t.strokeWidth:t.hachureGap,i=t.zigzagOffset<0?r:t.zigzagOffset,n=BC(e,t=Object.assign({},t,{hachureGap:r+i}));return{type:"fillSketch",ops:this.zigzagLines(n,i,t)}}zigzagLines(e,t,r){let i=[];return e.forEach(n=>{let a=kD(n),s=Math.round(a/(2*t)),u=n[0],h=n[1];u[0]>h[0]&&(u=n[1],h=n[0]);let d=Math.atan((h[1]-u[1])/(h[0]-u[0]));for(let p=0;p<s;p++){let g=2*p*t,y=2*(p+1)*t,m=Math.sqrt(2*Math.pow(t,2)),x=[u[0]+g*Math.cos(d),u[1]+g*Math.sin(d)],_=[u[0]+y*Math.cos(d),u[1]+y*Math.sin(d)],E=[x[0]+m*Math.cos(d+Math.PI/4),x[1]+m*Math.sin(d+Math.PI/4)];i.push(...this.helper.doubleLineOps(x[0],x[1],E[0],E[1],r),...this.helper.doubleLineOps(E[0],E[1],_[0],_[1],r))}}),i}},Bu={},Use=class{constructor(e){this.seed=e}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}},jse=0,RD=1,Pj=2,$C={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0},Hse={randOffset:function(e,t){return In(e,t)},randOffsetWithRange:function(e,t,r){return ED(e,t,r)},ellipse:function(e,t,r,i,n){let a=Mse(r,i,n);return Dj(e,t,n,a).opset},doubleLineOps:function(e,t,r,i,n){return im(e,t,r,i,n,!0)}},dh="none",zC=class{constructor(e){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=e||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(Math.random()*2**31)}_o(e){return e?Object.assign({},this.defaultOptions,e):this.defaultOptions}_d(e,t,r){return{shape:e,sets:t||[],options:r||this.defaultOptions}}line(e,t,r,i,n){let a=this._o(n);return this._d("line",[Sse(e,t,r,i,a)],a)}rectangle(e,t,r,i,n){let a=this._o(n),s=[],u=mFe(e,t,r,i,a);if(a.fill){let h=[[e,t],[e+r,t],[e+r,t+i],[e,t+i]];a.fillStyle==="solid"?s.push(Ij([h],a)):s.push(k_([h],a))}return a.stroke!==dh&&s.push(u),this._d("rectangle",s,a)}ellipse(e,t,r,i,n){let a=this._o(n),s=[],u=Mse(r,i,a),h=Dj(e,t,a,u);if(a.fill)if(a.fillStyle==="solid"){let d=Dj(e,t,a,u).opset;d.type="fillPath",s.push(d)}else s.push(k_([h.estimatedPoints],a));return a.stroke!==dh&&s.push(h.opset),this._d("ellipse",s,a)}circle(e,t,r,i){let n=this.ellipse(e,t,r,r,i);return n.shape="circle",n}linearPath(e,t){let r=this._o(t);return this._d("linearPath",[TD(e,!1,r)],r)}arc(e,t,r,i,n,a,s=!1,u){let h=this._o(u),d=[],p=Lse(e,t,r,i,n,a,s,!0,h);if(s&&h.fill)if(h.fillStyle==="solid"){let g=Object.assign({},h);g.disableMultiStroke=!0;let y=Lse(e,t,r,i,n,a,!0,!1,g);y.type="fillPath",d.push(y)}else d.push(function(g,y,m,x,_,E,w){let C=g,A=y,M=Math.abs(m/2),N=Math.abs(x/2);M+=In(.01*M,w),N+=In(.01*N,w);let B=_,O=E;for(;B<0;)B+=2*Math.PI,O+=2*Math.PI;O-B>2*Math.PI&&(B=0,O=2*Math.PI);let L=(O-B)/w.curveStepCount,$=[];for(let G=B;G<=O;G+=L)$.push([C+M*Math.cos(G),A+N*Math.sin(G)]);return $.push([C+M*Math.cos(O),A+N*Math.sin(O)]),$.push([C,A]),k_([$],w)}(e,t,r,i,n,a,h));return h.stroke!==dh&&d.push(p),this._d("arc",d,h)}curve(e,t){let r=this._o(t),i=[],n=Ase(e,r);if(r.fill&&r.fill!==dh)if(r.fillStyle==="solid"){let a=Ase(e,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));i.push({type:"fillPath",ops:this._mergedShape(a.ops)})}else{let a=[],s=e;if(s.length){let u=typeof s[0][0]=="number"?[s]:s;for(let h of u)h.length<3?a.push(...h):h.length===3?a.push(...Bj(Bse([h[0],h[0],h[1],h[2]]),10,(1+r.roughness)/2)):a.push(...Bj(Bse(h),10,(1+r.roughness)/2))}a.length&&i.push(k_([a],r))}return r.stroke!==dh&&i.push(n),this._d("curve",i,r)}polygon(e,t){let r=this._o(t),i=[],n=TD(e,!0,r);return r.fill&&(r.fillStyle==="solid"?i.push(Ij([e],r)):i.push(k_([e],r))),r.stroke!==dh&&i.push(n),this._d("polygon",i,r)}path(e,t){let r=this._o(t),i=[];if(!e)return this._d("path",i,r);e=(e||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");let n=r.fill&&r.fill!=="transparent"&&r.fill!==dh,a=r.stroke!==dh,s=!!(r.simplification&&r.simplification<1),u=function(d,p,g){let y=Ese(Tse(Rj(d))),m=[],x=[],_=[0,0],E=[],w=()=>{E.length>=4&&x.push(...Bj(E,p)),E=[]},C=()=>{w(),x.length&&(m.push(x),x=[])};for(let{key:M,data:N}of y)switch(M){case"M":C(),_=[N[0],N[1]],x.push(_);break;case"L":w(),x.push([N[0],N[1]]);break;case"C":if(!E.length){let B=x.length?x[x.length-1]:_;E.push([B[0],B[1]])}E.push([N[0],N[1]]),E.push([N[2],N[3]]),E.push([N[4],N[5]]);break;case"Z":w(),x.push([_[0],_[1]])}if(C(),!g)return m;let A=[];for(let M of m){let N=xFe(M,g);N.length&&A.push(N)}return A}(e,1,s?4-4*(r.simplification||1):(1+r.roughness)/2),h=Rse(e,r);if(n)if(r.fillStyle==="solid")if(u.length===1){let d=Rse(e,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));i.push({type:"fillPath",ops:this._mergedShape(d.ops)})}else i.push(Ij(u,r));else i.push(k_(u,r));return a&&(s?u.forEach(d=>{i.push(TD(d,!1,r))}):i.push(h)),this._d("path",i,r)}opsToPath(e,t){let r="";for(let i of e.ops){let n=typeof t=="number"&&t>=0?i.data.map(a=>+a.toFixed(t)):i.data;switch(i.op){case"move":r+=`M${n[0]} ${n[1]} `;break;case"bcurveTo":r+=`C${n[0]} ${n[1]}, ${n[2]} ${n[3]}, ${n[4]} ${n[5]} `;break;case"lineTo":r+=`L${n[0]} ${n[1]} `}}return r.trim()}toPaths(e){let t=e.sets||[],r=e.options||this.defaultOptions,i=[];for(let n of t){let a=null;switch(n.type){case"path":a={d:this.opsToPath(n),stroke:r.stroke,strokeWidth:r.strokeWidth,fill:dh};break;case"fillPath":a={d:this.opsToPath(n),stroke:dh,strokeWidth:0,fill:r.fill||dh};break;case"fillSketch":a=this.fillSketch(n,r)}a&&i.push(a)}return i}fillSketch(e,t){let r=t.fillWeight;return r<0&&(r=t.strokeWidth/2),{d:this.opsToPath(e),stroke:t.fill||dh,strokeWidth:r,fill:dh}}_mergedShape(e){return e.filter((t,r)=>r===0||t.op!=="move")}},Vse=class{constructor(e,t){this.canvas=e,this.ctx=this.canvas.getContext("2d"),this.gen=new zC(t)}draw(e){let t=e.sets||[],r=e.options||this.getDefaultOptions(),i=this.ctx,n=e.options.fixedDecimalPlaceDigits;for(let a of t)switch(a.type){case"path":i.save(),i.strokeStyle=r.stroke==="none"?"transparent":r.stroke,i.lineWidth=r.strokeWidth,r.strokeLineDash&&i.setLineDash(r.strokeLineDash),r.strokeLineDashOffset&&(i.lineDashOffset=r.strokeLineDashOffset),this._drawToContext(i,a,n),i.restore();break;case"fillPath":{i.save(),i.fillStyle=r.fill||"";let s=e.shape==="curve"||e.shape==="polygon"||e.shape==="path"?"evenodd":"nonzero";this._drawToContext(i,a,n,s),i.restore();break}case"fillSketch":this.fillSketch(i,a,r)}}fillSketch(e,t,r){let i=r.fillWeight;i<0&&(i=r.strokeWidth/2),e.save(),r.fillLineDash&&e.setLineDash(r.fillLineDash),r.fillLineDashOffset&&(e.lineDashOffset=r.fillLineDashOffset),e.strokeStyle=r.fill||"",e.lineWidth=i,this._drawToContext(e,t,r.fixedDecimalPlaceDigits),e.restore()}_drawToContext(e,t,r,i="nonzero"){e.beginPath();for(let n of t.ops){let a=typeof r=="number"&&r>=0?n.data.map(s=>+s.toFixed(r)):n.data;switch(n.op){case"move":e.moveTo(a[0],a[1]);break;case"bcurveTo":e.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5]);break;case"lineTo":e.lineTo(a[0],a[1])}}t.type==="fillPath"?e.fill(i):e.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(e,t,r,i,n){let a=this.gen.line(e,t,r,i,n);return this.draw(a),a}rectangle(e,t,r,i,n){let a=this.gen.rectangle(e,t,r,i,n);return this.draw(a),a}ellipse(e,t,r,i,n){let a=this.gen.ellipse(e,t,r,i,n);return this.draw(a),a}circle(e,t,r,i){let n=this.gen.circle(e,t,r,i);return this.draw(n),n}linearPath(e,t){let r=this.gen.linearPath(e,t);return this.draw(r),r}polygon(e,t){let r=this.gen.polygon(e,t);return this.draw(r),r}arc(e,t,r,i,n,a,s=!1,u){let h=this.gen.arc(e,t,r,i,n,a,s,u);return this.draw(h),h}curve(e,t){let r=this.gen.curve(e,t);return this.draw(r),r}path(e,t){let r=this.gen.path(e,t);return this.draw(r),r}},GC="http://www.w3.org/2000/svg",Wse=class{constructor(e,t){this.svg=e,this.gen=new zC(t)}draw(e){let t=e.sets||[],r=e.options||this.getDefaultOptions(),i=this.svg.ownerDocument||window.document,n=i.createElementNS(GC,"g"),a=e.options.fixedDecimalPlaceDigits;for(let s of t){let u=null;switch(s.type){case"path":u=i.createElementNS(GC,"path"),u.setAttribute("d",this.opsToPath(s,a)),u.setAttribute("stroke",r.stroke),u.setAttribute("stroke-width",r.strokeWidth+""),u.setAttribute("fill","none"),r.strokeLineDash&&u.setAttribute("stroke-dasharray",r.strokeLineDash.join(" ").trim()),r.strokeLineDashOffset&&u.setAttribute("stroke-dashoffset",`${r.strokeLineDashOffset}`);break;case"fillPath":u=i.createElementNS(GC,"path"),u.setAttribute("d",this.opsToPath(s,a)),u.setAttribute("stroke","none"),u.setAttribute("stroke-width","0"),u.setAttribute("fill",r.fill||""),e.shape!=="curve"&&e.shape!=="polygon"||u.setAttribute("fill-rule","evenodd");break;case"fillSketch":u=this.fillSketch(i,s,r)}u&&n.appendChild(u)}return n}fillSketch(e,t,r){let i=r.fillWeight;i<0&&(i=r.strokeWidth/2);let n=e.createElementNS(GC,"path");return n.setAttribute("d",this.opsToPath(t,r.fixedDecimalPlaceDigits)),n.setAttribute("stroke",r.fill||""),n.setAttribute("stroke-width",i+""),n.setAttribute("fill","none"),r.fillLineDash&&n.setAttribute("stroke-dasharray",r.fillLineDash.join(" ").trim()),r.fillLineDashOffset&&n.setAttribute("stroke-dashoffset",`${r.fillLineDashOffset}`),n}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(e,t){return this.gen.opsToPath(e,t)}line(e,t,r,i,n){let a=this.gen.line(e,t,r,i,n);return this.draw(a)}rectangle(e,t,r,i,n){let a=this.gen.rectangle(e,t,r,i,n);return this.draw(a)}ellipse(e,t,r,i,n){let a=this.gen.ellipse(e,t,r,i,n);return this.draw(a)}circle(e,t,r,i){let n=this.gen.circle(e,t,r,i);return this.draw(n)}linearPath(e,t){let r=this.gen.linearPath(e,t);return this.draw(r)}polygon(e,t){let r=this.gen.polygon(e,t);return this.draw(r)}arc(e,t,r,i,n,a,s=!1,u){let h=this.gen.arc(e,t,r,i,n,a,s,u);return this.draw(h)}curve(e,t){let r=this.gen.curve(e,t);return this.draw(r)}path(e,t){let r=this.gen.path(e,t);return this.draw(r)}},cn={canvas:(e,t)=>new Vse(e,t),svg:(e,t)=>new Wse(e,t),generator:e=>new zC(e),newSeed:()=>zC.newSeed()}});function Na(e){let t=e.map((r,i)=>`${i===0?"M":"L"}${r.x},${r.y}`);return t.push("Z"),t.join(" ")}function nm(e,t,r,i,n,a){let s=[],u=r-e,h=i-t,d=u/a,p=2*Math.PI/d,g=t+h/2;for(let y=0;y<=50;y++){let m=y/50,x=e+m*u,_=g+n*Math.sin(p*(x-e));s.push({x,y:_})}return s}function Fj(e,t,r,i,n,a){let s=[],u=n*Math.PI/180,h=(a*Math.PI/180-u)/(i-1);for(let d=0;d<i;d++){let p=u+d*h,g=e+r*Math.cos(p),y=t+r*Math.sin(p);s.push({x:-g,y:-y})}return s}function Yse(e,t){t&&e.attr("style",t)}async function qse(e){let t=Nr(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),r=t.append("xhtml:div"),i=e.label;e.label&&No(e.label)&&(i=await Wg(e.label.replace(zr.lineBreakRegex,`
`),at()));let n=e.isNode?"nodeLabel":"edgeLabel";return r.html('<span class="'+n+'" '+(e.labelStyle?'style="'+e.labelStyle+'"':"")+">"+i+"</span>"),Yse(r,e.labelStyle),r.style("display","inline-block"),r.style("padding-right","1px"),r.style("white-space","nowrap"),r.attr("xmlns","http://www.w3.org/1999/xhtml"),t.node()}function Xse(e,t){return e.intersect(t)}function Kse(e,t,r,i){var n=e.x,a=e.y,s=n-i.x,u=a-i.y,h=Math.sqrt(t*t*u*u+r*r*s*s),d=Math.abs(t*r*s/h);i.x<n&&(d=-d);var p=Math.abs(t*r*u/h);return i.y<a&&(p=-p),{x:n+d,y:a+p}}function Zse(e,t,r){return jj(e,t,t,r)}function Qse(e,t,r,i){var n,a,s,u,h,d,p,g,y,m,x,_,E,w,C;if(n=t.y-e.y,s=e.x-t.x,h=t.x*e.y-e.x*t.y,y=n*r.x+s*r.y+h,m=n*i.x+s*i.y+h,!(y!==0&&m!==0&&$j(y,m))&&(a=i.y-r.y,u=r.x-i.x,d=i.x*r.y-r.x*i.y,p=a*e.x+u*e.y+d,g=a*t.x+u*t.y+d,!(p!==0&&g!==0&&$j(p,g))&&(x=n*u-a*s,x!==0)))return _=Math.abs(x/2),E=s*d-u*h,w=E<0?(E-_)/x:(E+_)/x,E=a*h-n*d,C=E<0?(E-_)/x:(E+_)/x,{x:w,y:C}}function $j(e,t){return e*t>0}function Jse(e,t,r){let i=e.x,n=e.y,a=[],s=Number.POSITIVE_INFINITY,u=Number.POSITIVE_INFINITY;typeof t.forEach=="function"?t.forEach(function(p){s=Math.min(s,p.x),u=Math.min(u,p.y)}):(s=Math.min(s,t.x),u=Math.min(u,t.y));let h=i-e.width/2-s,d=n-e.height/2-u;for(let p=0;p<t.length;p++){let g=t[p],y=t[p<t.length-1?p+1:0],m=ble(e,r,{x:h+g.x,y:d+g.y},{x:h+y.x,y:d+y.y});m&&a.push(m)}return a.length?(a.length>1&&a.sort(function(p,g){let y=p.x-r.x,m=p.y-r.y,x=Math.sqrt(y*y+m*m),_=g.x-r.x,E=g.y-r.y,w=Math.sqrt(_*_+E*E);return x<w?-1:x===w?0:1}),a[0]):e}function eoe(e,t){let{labelStyles:r}=_n(t);t.labelStyle=r;let i=Pn(t),n=i;i||(n="anchor");let a=e.insert("g").attr("class",n).attr("id",t.domId||t.id),s=1,{cssStyles:u}=t,h=cn.svg(a),d=mn(t,{fill:"black",stroke:"none",fillStyle:"solid"});t.look!=="handDrawn"&&(d.roughness=0);let p=h.circle(0,0,s*2,d),g=a.insert(()=>p,":first-child");return g.attr("class","anchor").attr("style",Ou(u)),yn(t,g),t.intersect=function(y){return Ce.info("Circle intersect",t,s,y),tn.circle(t,s,y)},a}function zj(e,t,r,i,n,a,s){let u=(e+r)/2,h=(t+i)/2,d=Math.atan2(i-t,r-e),p=(r-e)/2,g=(i-t)/2,y=p/n,m=g/a,x=Math.sqrt(y**2+m**2);if(x>1)throw new Error("The given radii are too small to create an arc between the points.");let _=Math.sqrt(1-x**2),E=u+_*a*Math.sin(d)*(s?-1:1),w=h-_*n*Math.cos(d)*(s?-1:1),C=Math.atan2((t-w)/a,(e-E)/n),A=Math.atan2((i-w)/a,(r-E)/n)-C;s&&A<0&&(A+=2*Math.PI),!s&&A>0&&(A-=2*Math.PI);let M=[];for(let N=0;N<20;N++){let B=N/19,O=C+B*A,L=E+n*Math.cos(O),$=w+a*Math.sin(O);M.push({x:L,y:$})}return M}async function toe(e,t){let{labelStyles:r,nodeStyles:i}=_n(t);t.labelStyle=r;let{shapeSvg:n,bbox:a}=await Bn(e,t,Pn(t)),s=a.width+t.padding+20,u=a.height+t.padding,h=u/2,d=h/(2.5+u/50),{cssStyles:p}=t,g=[{x:s/2,y:-u/2},{x:-s/2,y:-u/2},...zj(-s/2,-u/2,-s/2,u/2,d,h,!1),{x:s/2,y:u/2},...zj(s/2,u/2,s/2,-u/2,d,h,!0)],y=cn.svg(n),m=mn(t,{});t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");let x=Na(g),_=y.path(x,m),E=n.insert(()=>_,":first-child");return E.attr("class","basic label-container"),p&&t.look!=="handDrawn"&&E.selectAll("path").attr("style",p),i&&t.look!=="handDrawn"&&E.selectAll("path").attr("style",i),E.attr("transform",`translate(${d/2}, 0)`),yn(t,E),t.intersect=function(w){return tn.polygon(t,g,w)},n}function mf(e,t,r,i){return e.insert("polygon",":first-child").attr("points",i.map(function(n){return n.x+","+n.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-t/2+","+r/2+")")}async function roe(e,t){let{labelStyles:r,nodeStyles:i}=_n(t);t.labelStyle=r;let{shapeSvg:n,bbox:a}=await Bn(e,t,Pn(t)),s=a.height+t.padding,u=12,h=a.width+t.padding+u,d=0,p=h,g=-s,y=0,m=[{x:d+u,y:g},{x:p,y:g},{x:p,y},{x:d,y},{x:d,y:g+u},{x:d+u,y:g}],x,{cssStyles:_}=t;if(t.look==="handDrawn"){let E=cn.svg(n),w=mn(t,{}),C=Na(m),A=E.path(C,w);x=n.insert(()=>A,":first-child").attr("transform",`translate(${-h/2}, ${s/2})`),_&&x.attr("style",_)}else x=mf(n,h,s,m);return i&&x.attr("style",i),yn(t,x),t.intersect=function(E){return tn.polygon(t,m,E)},n}function ioe(e,t){let{nodeStyles:r}=_n(t);t.label="";let i=e.insert("g").attr("class",Pn(t)).attr("id",t.domId??t.id),{cssStyles:n}=t,a=Math.max(28,t.width??0),s=[{x:0,y:a/2},{x:a/2,y:0},{x:0,y:-a/2},{x:-a/2,y:0}],u=cn.svg(i),h=mn(t,{});t.look!=="handDrawn"&&(h.roughness=0,h.fillStyle="solid");let d=Na(s),p=u.path(d,h),g=i.insert(()=>p,":first-child");return n&&t.look!=="handDrawn"&&g.selectAll("path").attr("style",n),r&&t.look!=="handDrawn"&&g.selectAll("path").attr("style",r),t.width=28,t.height=28,t.intersect=function(y){return tn.polygon(t,s,y)},i}async function noe(e,t){let{labelStyles:r,nodeStyles:i}=_n(t);t.labelStyle=r;let{shapeSvg:n,bbox:a,halfPadding:s}=await Bn(e,t,Pn(t)),u=a.width/2+s,h,{cssStyles:d}=t;if(t.look==="handDrawn"){let p=cn.svg(n),g=mn(t,{}),y=p.circle(0,0,u*2,g);h=n.insert(()=>y,":first-child"),h.attr("class","basic label-container").attr("style",Ou(d))}else h=n.insert("circle",":first-child").attr("class","basic label-container").attr("style",i).attr("r",u).attr("cx",0).attr("cy",0);return yn(t,h),t.intersect=function(p){return Ce.info("Circle intersect",t,u,p),tn.circle(t,u,p)},n}function aoe(e){let t=Math.cos(Math.PI/4),r=Math.sin(Math.PI/4),i=e*2,n={x:i/2*t,y:i/2*r},a={x:-(i/2)*t,y:i/2*r},s={x:-(i/2)*t,y:-(i/2)*r},u={x:i/2*t,y:-(i/2)*r};return`M ${a.x},${a.y} L ${u.x},${u.y}
                   M ${n.x},${n.y} L ${s.x},${s.y}`}function soe(e,t){let{labelStyles:r,nodeStyles:i}=_n(t);t.labelStyle=r,t.label="";let n=e.insert("g").attr("class",Pn(t)).attr("id",t.domId??t.id),a=Math.max(30,t?.width??0),{cssStyles:s}=t,u=cn.svg(n),h=mn(t,{});t.look!=="handDrawn"&&(h.roughness=0,h.fillStyle="solid");let d=u.circle(0,0,a*2,h),p=aoe(a),g=u.path(p,h),y=n.insert(()=>d,":first-child");return y.insert(()=>g),s&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",s),i&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",i),yn(t,y),t.intersect=function(m){return Ce.info("crossedCircle intersect",t,{radius:a,point:m}),tn.circle(t,a,m)},n}function yf(e,t,r,i=100,n=0,a=180){let s=[],u=n*Math.PI/180,h=(a*Math.PI/180-u)/(i-1);for(let d=0;d<i;d++){let p=u+d*h,g=e+r*Math.cos(p),y=t+r*Math.sin(p);s.push({x:-g,y:-y})}return s}async function ooe(e,t){let{labelStyles:r,nodeStyles:i}=_n(t);t.labelStyle=r;let{shapeSvg:n,bbox:a,label:s}=await Bn(e,t,Pn(t)),u=a.width+(t.padding??0),h=a.height+(t.padding??0),d=Math.max(5,h*.1),{cssStyles:p}=t,g=[...yf(u/2,-h/2,d,30,-90,0),{x:-u/2-d,y:d},...yf(u/2+d*2,-d,d,20,-180,-270),...yf(u/2+d*2,d,d,20,-90,-180),{x:-u/2-d,y:-h/2},...yf(u/2,h/2,d,20,0,90)],y=[{x:u/2,y:-h/2-d},{x:-u/2,y:-h/2-d},...yf(u/2,-h/2,d,20,-90,0),{x:-u/2-d,y:-d},...yf(u/2+u*.1,-d,d,20,-180,-270),...yf(u/2+u*.1,d,d,20,-90,-180),{x:-u/2-d,y:h/2},...yf(u/2,h/2,d,20,0,90),{x:-u/2,y:h/2+d},{x:u/2,y:h/2+d}],m=cn.svg(n),x=mn(t,{fill:"none"});t.look!=="handDrawn"&&(x.roughness=0,x.fillStyle="solid");let _=Na(g).replace("Z",""),E=m.path(_,x),w=Na(y),C=m.path(w,{...x}),A=n.insert("g",":first-child");return A.insert(()=>C,":first-child").attr("stroke-opacity",0),A.insert(()=>E,":first-child"),A.attr("class","text"),p&&t.look!=="handDrawn"&&A.selectAll("path").attr("style",p),i&&t.look!=="handDrawn"&&A.selectAll("path").attr("style",i),A.attr("transform",`translate(${d}, 0)`),s.attr("transform",`translate(${-u/2+d-(a.x-(a.left??0))},${-h/2+(t.padding??0)/2-(a.y-(a.top??0))})`),yn(t,A),t.intersect=function(M){return tn.polygon(t,y,M)},n}function vf(e,t,r,i=100,n=0,a=180){let s=[],u=n*Math.PI/180,h=(a*Math.PI/180-u)/(i-1);for(let d=0;d<i;d++){let p=u+d*h,g=e+r*Math.cos(p),y=t+r*Math.sin(p);s.push({x:g,y})}return s}async function loe(e,t){let{labelStyles:r,nodeStyles:i}=_n(t);t.labelStyle=r;let{shapeSvg:n,bbox:a,label:s}=await Bn(e,t,Pn(t)),u=a.width+(t.padding??0),h=a.height+(t.padding??0),d=Math.max(5,h*.1),{cssStyles:p}=t,g=[...vf(u/2,-h/2,d,20,-90,0),{x:u/2+d,y:-d},...vf(u/2+d*2,-d,d,20,-180,-270),...vf(u/2+d*2,d,d,20,-90,-180),{x:u/2+d,y:h/2},...vf(u/2,h/2,d,20,0,90)],y=[{x:-u/2,y:-h/2-d},{x:u/2,y:-h/2-d},...vf(u/2,-h/2,d,20,-90,0),{x:u/2+d,y:-d},...vf(u/2+d*2,-d,d,20,-180,-270),...vf(u/2+d*2,d,d,20,-90,-180),{x:u/2+d,y:h/2},...vf(u/2,h/2,d,20,0,90),{x:u/2,y:h/2+d},{x:-u/2,y:h/2+d}],m=cn.svg(n),x=mn(t,{fill:"none"});t.look!=="handDrawn"&&(x.roughness=0,x.fillStyle="solid");let _=Na(g).replace("Z",""),E=m.path(_,x),w=Na(y),C=m.path(w,{...x}),A=n.insert("g",":first-child");return A.insert(()=>C,":first-child").attr("stroke-opacity",0),A.insert(()=>E,":first-child"),A.attr("class","text"),p&&t.look!=="handDrawn"&&A.selectAll("path").attr("style",p),i&&t.look!=="handDrawn"&&A.selectAll("path").attr("style",i),A.attr("transform",`translate(${-d}, 0)`),s.attr("transform",`translate(${-u/2+(t.padding??0)/2-(a.x-(a.left??0))},${-h/2+(t.padding??0)/2-(a.y-(a.top??0))})`),yn(t,A),t.intersect=function(M){return tn.polygon(t,y,M)},n}function Hl(e,t,r,i=100,n=0,a=180){let s=[],u=n*Math.PI/180,h=(a*Math.PI/180-u)/(i-1);for(let d=0;d<i;d++){let p=u+d*h,g=e+r*Math.cos(p),y=t+r*Math.sin(p);s.push({x:-g,y:-y})}return s}async function uoe(e,t){let{labelStyles:r,nodeStyles:i}=_n(t);t.labelStyle=r;let{shapeSvg:n,bbox:a,label:s}=await Bn(e,t,Pn(t)),u=a.width+(t.padding??0),h=a.height+(t.padding??0),d=Math.max(5,h*.1),{cssStyles:p}=t,g=[...Hl(u/2,-h/2,d,30,-90,0),{x:-u/2-d,y:d},...Hl(u/2+d*2,-d,d,20,-180,-270),...Hl(u/2+d*2,d,d,20,-90,-180),{x:-u/2-d,y:-h/2},...Hl(u/2,h/2,d,20,0,90)],y=[...Hl(-u/2+d+d/2,-h/2,d,20,-90,-180),{x:u/2-d/2,y:d},...Hl(-u/2-d/2,-d,d,20,0,90),...Hl(-u/2-d/2,d,d,20,-90,0),{x:u/2-d/2,y:-d},...Hl(-u/2+d+d/2,h/2,d,30,-180,-270)],m=[{x:u/2,y:-h/2-d},{x:-u/2,y:-h/2-d},...Hl(u/2,-h/2,d,20,-90,0),{x:-u/2-d,y:-d},...Hl(u/2+d*2,-d,d,20,-180,-270),...Hl(u/2+d*2,d,d,20,-90,-180),{x:-u/2-d,y:h/2},...Hl(u/2,h/2,d,20,0,90),{x:-u/2,y:h/2+d},{x:u/2-d-d/2,y:h/2+d},...Hl(-u/2+d+d/2,-h/2,d,20,-90,-180),{x:u/2-d/2,y:d},...Hl(-u/2-d/2,-d,d,20,0,90),...Hl(-u/2-d/2,d,d,20,-90,0),{x:u/2-d/2,y:-d},...Hl(-u/2+d+d/2,h/2,d,30,-180,-270)],x=cn.svg(n),_=mn(t,{fill:"none"});t.look!=="handDrawn"&&(_.roughness=0,_.fillStyle="solid");let E=Na(g).replace("Z",""),w=x.path(E,_),C=Na(y).replace("Z",""),A=x.path(C,_),M=Na(m),N=x.path(M,{..._}),B=n.insert("g",":first-child");return B.insert(()=>N,":first-child").attr("stroke-opacity",0),B.insert(()=>w,":first-child"),B.insert(()=>A,":first-child"),B.attr("class","text"),p&&t.look!=="handDrawn"&&B.selectAll("path").attr("style",p),i&&t.look!=="handDrawn"&&B.selectAll("path").attr("style",i),B.attr("transform",`translate(${d-d/4}, 0)`),s.attr("transform",`translate(${-u/2+(t.padding??0)/2-(a.x-(a.left??0))},${-h/2+(t.padding??0)/2-(a.y-(a.top??0))})`),yn(t,B),t.intersect=function(O){return tn.polygon(t,m,O)},n}async function hoe(e,t){let{labelStyles:r,nodeStyles:i}=_n(t);t.labelStyle=r;let{shapeSvg:n,bbox:a}=await Bn(e,t,Pn(t)),s=80,u=20,h=Math.max(s,(a.width+(t.padding??0)*2)*1.25,t?.width??0),d=Math.max(u,a.height+(t.padding??0)*2,t?.height??0),p=d/2,{cssStyles:g}=t,y=cn.svg(n),m=mn(t,{});t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");let x=h,_=d,E=x-p,w=_/4,C=[{x:E,y:0},{x:w,y:0},{x:0,y:_/2},{x:w,y:_},{x:E,y:_},...Fj(-E,-_/2,p,50,270,90)],A=Na(C),M=y.path(A,m),N=n.insert(()=>M,":first-child");return N.attr("class","basic label-container"),g&&t.look!=="handDrawn"&&N.selectChildren("path").attr("style",g),i&&t.look!=="handDrawn"&&N.selectChildren("path").attr("style",i),N.attr("transform",`translate(${-h/2}, ${-d/2})`),yn(t,N),t.intersect=function(B){return tn.polygon(t,C,B)},n}async function coe(e,t){let{labelStyles:r,nodeStyles:i}=_n(t);t.labelStyle=r;let{shapeSvg:n,bbox:a,label:s}=await Bn(e,t,Pn(t)),u=Math.max(a.width+t.padding,t.width??0),h=u/2,d=h/(2.5+u/50),p=Math.max(a.height+d+t.padding,t.height??0),g,{cssStyles:y}=t;if(t.look==="handDrawn"){let m=cn.svg(n),x=kle(0,0,u,p,h,d),_=Tle(0,d,u,p,h,d),E=m.path(x,mn(t,{})),w=m.path(_,mn(t,{fill:"none"}));g=n.insert(()=>w,":first-child"),g=n.insert(()=>E,":first-child"),g.attr("class","basic label-container"),y&&g.attr("style",y)}else{let m=wle(0,0,u,p,h,d);g=n.insert("path",":first-child").attr("d",m).attr("class","basic label-container").attr("style",Ou(y)).attr("style",i)}return g.attr("label-offset-y",d),g.attr("transform",`translate(${-u/2}, ${-(p/2+d)})`),yn(t,g),s.attr("transform",`translate(${-(a.width/2)-(a.x-(a.left??0))}, ${-(a.height/2)+(t.padding??0)/1.5-(a.y-(a.top??0))})`),t.intersect=function(m){let x=tn.rect(t,m),_=x.x-(t.x??0);if(h!=0&&(Math.abs(_)<(t.width??0)/2||Math.abs(_)==(t.width??0)/2&&Math.abs(x.y-(t.y??0))>(t.height??0)/2-d)){let E=d*d*(1-_*_/(h*h));E>0&&(E=Math.sqrt(E)),E=d-E,m.y-(t.y??0)>0&&(E=-E),x.y+=E}return x},n}async function doe(e,t){let{labelStyles:r,nodeStyles:i}=_n(t);t.labelStyle=r;let{shapeSvg:n,bbox:a,label:s}=await Bn(e,t,Pn(t)),u=a.width+t.padding,h=a.height+t.padding,d=h*.2,p=-u/2,g=-h/2-d/2,{cssStyles:y}=t,m=cn.svg(n),x=mn(t,{});t.look!=="handDrawn"&&(x.roughness=0,x.fillStyle="solid");let _=[{x:p,y:g+d},{x:-p,y:g+d},{x:-p,y:-g},{x:p,y:-g},{x:p,y:g},{x:-p,y:g},{x:-p,y:g+d}],E=m.polygon(_.map(C=>[C.x,C.y]),x),w=n.insert(()=>E,":first-child");return w.attr("class","basic label-container"),y&&t.look!=="handDrawn"&&w.selectAll("path").attr("style",y),i&&t.look!=="handDrawn"&&w.selectAll("path").attr("style",i),s.attr("transform",`translate(${p+(t.padding??0)/2-(a.x-(a.left??0))}, ${g+d+(t.padding??0)/2-(a.y-(a.top??0))})`),yn(t,w),t.intersect=function(C){return tn.rect(t,C)},n}async function poe(e,t){let{labelStyles:r,nodeStyles:i}=_n(t);t.labelStyle=r;let{shapeSvg:n,bbox:a,halfPadding:s}=await Bn(e,t,Pn(t)),u=a.width/2+s+5,h=a.width/2+s,d,{cssStyles:p}=t;if(t.look==="handDrawn"){let g=cn.svg(n),y=mn(t,{roughness:.2,strokeWidth:2.5}),m=mn(t,{roughness:.2,strokeWidth:1.5}),x=g.circle(0,0,u*2,y),_=g.circle(0,0,h*2,m);d=n.insert("g",":first-child"),d.attr("class",Ou(t.cssClasses)).attr("style",Ou(p)),d.node()?.appendChild(x),d.node()?.appendChild(_)}else{d=n.insert("g",":first-child");let g=d.insert("circle",":first-child"),y=d.insert("circle");d.attr("class","basic label-container").attr("style",i),g.attr("class","outer-circle").attr("style",i).attr("r",u).attr("cx",0).attr("cy",0),y.attr("class","inner-circle").attr("style",i).attr("r",h).attr("cx",0).attr("cy",0)}return yn(t,d),t.intersect=function(g){return Ce.info("DoubleCircle intersect",t,u,g),tn.circle(t,u,g)},n}function foe(e,t,{config:{themeVariables:r}}){let{labelStyles:i,nodeStyles:n}=_n(t);t.label="",t.labelStyle=i;let a=e.insert("g").attr("class",Pn(t)).attr("id",t.domId??t.id),s=7,{cssStyles:u}=t,h=cn.svg(a),{nodeBorder:d}=r,p=mn(t,{fillStyle:"solid"});t.look!=="handDrawn"&&(p.roughness=0);let g=h.circle(0,0,s*2,p),y=a.insert(()=>g,":first-child");return y.selectAll("path").attr("style",`fill: ${d} !important;`),u&&u.length>0&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",u),n&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",n),yn(t,y),t.intersect=function(m){return Ce.info("filledCircle intersect",t,{radius:s,point:m}),tn.circle(t,s,m)},a}async function goe(e,t){let{labelStyles:r,nodeStyles:i}=_n(t);t.labelStyle=r;let{shapeSvg:n,bbox:a,label:s}=await Bn(e,t,Pn(t)),u=a.width+(t.padding??0),h=u+a.height,d=u+a.height,p=[{x:0,y:-h},{x:d,y:-h},{x:d/2,y:0}],{cssStyles:g}=t,y=cn.svg(n),m=mn(t,{});t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");let x=Na(p),_=y.path(x,m),E=n.insert(()=>_,":first-child").attr("transform",`translate(${-h/2}, ${h/2})`);return g&&t.look!=="handDrawn"&&E.selectChildren("path").attr("style",g),i&&t.look!=="handDrawn"&&E.selectChildren("path").attr("style",i),t.width=u,t.height=h,yn(t,E),s.attr("transform",`translate(${-a.width/2-(a.x-(a.left??0))}, ${-h/2+(t.padding??0)/2+(a.y-(a.top??0))})`),t.intersect=function(w){return Ce.info("Triangle intersect",t,p,w),tn.polygon(t,p,w)},n}function moe(e,t,{dir:r,config:{state:i,themeVariables:n}}){let{nodeStyles:a}=_n(t);t.label="";let s=e.insert("g").attr("class",Pn(t)).attr("id",t.domId??t.id),{cssStyles:u}=t,h=Math.max(70,t?.width??0),d=Math.max(10,t?.height??0);r==="LR"&&(h=Math.max(10,t?.width??0),d=Math.max(70,t?.height??0));let p=-1*h/2,g=-1*d/2,y=cn.svg(s),m=mn(t,{stroke:n.lineColor,fill:n.lineColor});t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");let x=y.rectangle(p,g,h,d,m),_=s.insert(()=>x,":first-child");u&&t.look!=="handDrawn"&&_.selectAll("path").attr("style",u),a&&t.look!=="handDrawn"&&_.selectAll("path").attr("style",a),yn(t,_);let E=i?.padding??0;return t.width&&t.height&&(t.width+=E/2||0,t.height+=E/2||0),t.intersect=function(w){return tn.rect(t,w)},s}async function yoe(e,t){let{labelStyles:r,nodeStyles:i}=_n(t);t.labelStyle=r;let n=80,a=50,{shapeSvg:s,bbox:u}=await Bn(e,t,Pn(t)),h=Math.max(n,u.width+(t.padding??0)*2,t?.width??0),d=Math.max(a,u.height+(t.padding??0)*2,t?.height??0),p=d/2,{cssStyles:g}=t,y=cn.svg(s),m=mn(t,{});t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");let x=[{x:-h/2,y:-d/2},{x:h/2-p,y:-d/2},...Fj(-h/2+p,0,p,50,90,270),{x:h/2-p,y:d/2},{x:-h/2,y:d/2}],_=Na(x),E=y.path(_,m),w=s.insert(()=>E,":first-child");return w.attr("class","basic label-container"),g&&t.look!=="handDrawn"&&w.selectChildren("path").attr("style",g),i&&t.look!=="handDrawn"&&w.selectChildren("path").attr("style",i),yn(t,w),t.intersect=function(C){return Ce.info("Pill intersect",t,{radius:p,point:C}),tn.polygon(t,x,C)},s}async function voe(e,t){let{labelStyles:r,nodeStyles:i}=_n(t);t.labelStyle=r;let{shapeSvg:n,bbox:a}=await Bn(e,t,Pn(t)),s=4,u=a.height+t.padding,h=u/s,d=a.width+2*h+t.padding,p=[{x:h,y:0},{x:d-h,y:0},{x:d,y:-u/2},{x:d-h,y:-u},{x:h,y:-u},{x:0,y:-u/2}],g,{cssStyles:y}=t;if(t.look==="handDrawn"){let m=cn.svg(n),x=mn(t,{}),_=Ele(0,0,d,u,h),E=m.path(_,x);g=n.insert(()=>E,":first-child").attr("transform",`translate(${-d/2}, ${u/2})`),y&&g.attr("style",y)}else g=mf(n,d,u,p);return i&&g.attr("style",i),t.width=d,t.height=u,yn(t,g),t.intersect=function(m){return tn.polygon(t,p,m)},n}async function xoe(e,t){let{labelStyles:r,nodeStyles:i}=_n(t);t.label="",t.labelStyle=r;let{shapeSvg:n}=await Bn(e,t,Pn(t)),a=Math.max(30,t?.width??0),s=Math.max(30,t?.height??0),{cssStyles:u}=t,h=cn.svg(n),d=mn(t,{});t.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");let p=[{x:0,y:0},{x:a,y:0},{x:0,y:s},{x:a,y:s}],g=Na(p),y=h.path(g,d),m=n.insert(()=>y,":first-child");return m.attr("class","basic label-container"),u&&t.look!=="handDrawn"&&m.selectChildren("path").attr("style",u),i&&t.look!=="handDrawn"&&m.selectChildren("path").attr("style",i),m.attr("transform",`translate(${-a/2}, ${-s/2})`),yn(t,m),t.intersect=function(x){return Ce.info("Pill intersect",t,{points:p}),tn.polygon(t,p,x)},n}async function boe(e,t,{config:{themeVariables:r,flowchart:i}}){let{labelStyles:n}=_n(t);t.labelStyle=n;let a=t.assetHeight??48,s=t.assetWidth??48,u=Math.max(a,s),h=i?.wrappingWidth;t.width=Math.max(u,h??0);let{shapeSvg:d,bbox:p,label:g}=await Bn(e,t,"icon-shape default"),y=t.pos==="t",m=u,x=u,{nodeBorder:_}=r,{stylesMap:E}=Mv(t),w=-x/2,C=-m/2,A=t.label?8:0,M=cn.svg(d),N=mn(t,{stroke:"none",fill:"none"});t.look!=="handDrawn"&&(N.roughness=0,N.fillStyle="solid");let B=M.rectangle(w,C,x,m,N),O=Math.max(x,p.width),L=m+p.height+A,$=M.rectangle(-O/2,-L/2,O,L,{...N,fill:"transparent",stroke:"none"}),G=d.insert(()=>B,":first-child"),z=d.insert(()=>$);if(t.icon){let F=d.append("g");F.html(`<g>${await x0(t.icon,{height:u,width:u,fallbackPrefix:""})}</g>`);let X=F.node().getBBox(),I=X.width,j=X.height,H=X.x,V=X.y;F.attr("transform",`translate(${-I/2-H},${y?p.height/2+A/2-j/2-V:-p.height/2-A/2-j/2-V})`),F.attr("style",`color: ${E.get("stroke")??_};`)}return g.attr("transform",`translate(${-p.width/2-(p.x-(p.left??0))},${y?-L/2:L/2-p.height})`),G.attr("transform",`translate(0,${y?p.height/2+A/2:-p.height/2-A/2})`),yn(t,z),t.intersect=function(F){if(Ce.info("iconSquare intersect",t,F),!t.label)return tn.rect(t,F);let X=t.x??0,I=t.y??0,j=t.height??0,H=[];return y?H=[{x:X-p.width/2,y:I-j/2},{x:X+p.width/2,y:I-j/2},{x:X+p.width/2,y:I-j/2+p.height+A},{x:X+x/2,y:I-j/2+p.height+A},{x:X+x/2,y:I+j/2},{x:X-x/2,y:I+j/2},{x:X-x/2,y:I-j/2+p.height+A},{x:X-p.width/2,y:I-j/2+p.height+A}]:H=[{x:X-x/2,y:I-j/2},{x:X+x/2,y:I-j/2},{x:X+x/2,y:I-j/2+m},{x:X+p.width/2,y:I-j/2+m},{x:X+p.width/2/2,y:I+j/2},{x:X-p.width/2,y:I+j/2},{x:X-p.width/2,y:I-j/2+m},{x:X-x/2,y:I-j/2+m}],tn.polygon(t,H,F)},d}async function _oe(e,t,{config:{themeVariables:r,flowchart:i}}){let{labelStyles:n}=_n(t);t.labelStyle=n;let a=t.assetHeight??48,s=t.assetWidth??48,u=Math.max(a,s),h=i?.wrappingWidth;t.width=Math.max(u,h??0);let{shapeSvg:d,bbox:p,label:g}=await Bn(e,t,"icon-shape default"),y=20,m=t.label?8:0,x=t.pos==="t",{nodeBorder:_,mainBkg:E}=r,{stylesMap:w}=Mv(t),C=cn.svg(d),A=mn(t,{});t.look!=="handDrawn"&&(A.roughness=0,A.fillStyle="solid");let M=w.get("fill");A.stroke=M??E;let N=d.append("g");t.icon&&N.html(`<g>${await x0(t.icon,{height:u,width:u,fallbackPrefix:""})}</g>`);let B=N.node().getBBox(),O=B.width,L=B.height,$=B.x,G=B.y,z=Math.max(O,L)*Math.SQRT2+y*2,F=C.circle(0,0,z,A),X=Math.max(z,p.width),I=z+p.height+m,j=C.rectangle(-X/2,-I/2,X,I,{...A,fill:"transparent",stroke:"none"}),H=d.insert(()=>F,":first-child"),V=d.insert(()=>j);return N.attr("transform",`translate(${-O/2-$},${x?p.height/2+m/2-L/2-G:-p.height/2-m/2-L/2-G})`),N.attr("style",`color: ${w.get("stroke")??_};`),g.attr("transform",`translate(${-p.width/2-(p.x-(p.left??0))},${x?-I/2:I/2-p.height})`),H.attr("transform",`translate(0,${x?p.height/2+m/2:-p.height/2-m/2})`),yn(t,V),t.intersect=function(P){return Ce.info("iconSquare intersect",t,P),tn.rect(t,P)},d}async function woe(e,t,{config:{themeVariables:r,flowchart:i}}){let{labelStyles:n}=_n(t);t.labelStyle=n;let a=t.assetHeight??48,s=t.assetWidth??48,u=Math.max(a,s),h=i?.wrappingWidth;t.width=Math.max(u,h??0);let{shapeSvg:d,bbox:p,halfPadding:g,label:y}=await Bn(e,t,"icon-shape default"),m=t.pos==="t",x=u+g*2,_=u+g*2,{nodeBorder:E,mainBkg:w}=r,{stylesMap:C}=Mv(t),A=-_/2,M=-x/2,N=t.label?8:0,B=cn.svg(d),O=mn(t,{});t.look!=="handDrawn"&&(O.roughness=0,O.fillStyle="solid");let L=C.get("fill");O.stroke=L??w;let $=B.path(O0(A,M,_,x,5),O),G=Math.max(_,p.width),z=x+p.height+N,F=B.rectangle(-G/2,-z/2,G,z,{...O,fill:"transparent",stroke:"none"}),X=d.insert(()=>$,":first-child").attr("class","icon-shape2"),I=d.insert(()=>F);if(t.icon){let j=d.append("g");j.html(`<g>${await x0(t.icon,{height:u,width:u,fallbackPrefix:""})}</g>`);let H=j.node().getBBox(),V=H.width,P=H.height,q=H.x,Z=H.y;j.attr("transform",`translate(${-V/2-q},${m?p.height/2+N/2-P/2-Z:-p.height/2-N/2-P/2-Z})`),j.attr("style",`color: ${C.get("stroke")??E};`)}return y.attr("transform",`translate(${-p.width/2-(p.x-(p.left??0))},${m?-z/2:z/2-p.height})`),X.attr("transform",`translate(0,${m?p.height/2+N/2:-p.height/2-N/2})`),yn(t,I),t.intersect=function(j){if(Ce.info("iconSquare intersect",t,j),!t.label)return tn.rect(t,j);let H=t.x??0,V=t.y??0,P=t.height??0,q=[];return m?q=[{x:H-p.width/2,y:V-P/2},{x:H+p.width/2,y:V-P/2},{x:H+p.width/2,y:V-P/2+p.height+N},{x:H+_/2,y:V-P/2+p.height+N},{x:H+_/2,y:V+P/2},{x:H-_/2,y:V+P/2},{x:H-_/2,y:V-P/2+p.height+N},{x:H-p.width/2,y:V-P/2+p.height+N}]:q=[{x:H-_/2,y:V-P/2},{x:H+_/2,y:V-P/2},{x:H+_/2,y:V-P/2+x},{x:H+p.width/2,y:V-P/2+x},{x:H+p.width/2/2,y:V+P/2},{x:H-p.width/2,y:V+P/2},{x:H-p.width/2,y:V-P/2+x},{x:H-_/2,y:V-P/2+x}],tn.polygon(t,q,j)},d}async function koe(e,t,{config:{themeVariables:r,flowchart:i}}){let{labelStyles:n}=_n(t);t.labelStyle=n;let a=t.assetHeight??48,s=t.assetWidth??48,u=Math.max(a,s),h=i?.wrappingWidth;t.width=Math.max(u,h??0);let{shapeSvg:d,bbox:p,halfPadding:g,label:y}=await Bn(e,t,"icon-shape default"),m=t.pos==="t",x=u+g*2,_=u+g*2,{nodeBorder:E,mainBkg:w}=r,{stylesMap:C}=Mv(t),A=-_/2,M=-x/2,N=t.label?8:0,B=cn.svg(d),O=mn(t,{});t.look!=="handDrawn"&&(O.roughness=0,O.fillStyle="solid");let L=C.get("fill");O.stroke=L??w;let $=B.path(O0(A,M,_,x,.1),O),G=Math.max(_,p.width),z=x+p.height+N,F=B.rectangle(-G/2,-z/2,G,z,{...O,fill:"transparent",stroke:"none"}),X=d.insert(()=>$,":first-child"),I=d.insert(()=>F);if(t.icon){let j=d.append("g");j.html(`<g>${await x0(t.icon,{height:u,width:u,fallbackPrefix:""})}</g>`);let H=j.node().getBBox(),V=H.width,P=H.height,q=H.x,Z=H.y;j.attr("transform",`translate(${-V/2-q},${m?p.height/2+N/2-P/2-Z:-p.height/2-N/2-P/2-Z})`),j.attr("style",`color: ${C.get("stroke")??E};`)}return y.attr("transform",`translate(${-p.width/2-(p.x-(p.left??0))},${m?-z/2:z/2-p.height})`),X.attr("transform",`translate(0,${m?p.height/2+N/2:-p.height/2-N/2})`),yn(t,I),t.intersect=function(j){if(Ce.info("iconSquare intersect",t,j),!t.label)return tn.rect(t,j);let H=t.x??0,V=t.y??0,P=t.height??0,q=[];return m?q=[{x:H-p.width/2,y:V-P/2},{x:H+p.width/2,y:V-P/2},{x:H+p.width/2,y:V-P/2+p.height+N},{x:H+_/2,y:V-P/2+p.height+N},{x:H+_/2,y:V+P/2},{x:H-_/2,y:V+P/2},{x:H-_/2,y:V-P/2+p.height+N},{x:H-p.width/2,y:V-P/2+p.height+N}]:q=[{x:H-_/2,y:V-P/2},{x:H+_/2,y:V-P/2},{x:H+_/2,y:V-P/2+x},{x:H+p.width/2,y:V-P/2+x},{x:H+p.width/2/2,y:V+P/2},{x:H-p.width/2,y:V+P/2},{x:H-p.width/2,y:V-P/2+x},{x:H-_/2,y:V-P/2+x}],tn.polygon(t,q,j)},d}async function Toe(e,t,{config:{flowchart:r}}){let i=new Image;i.src=t?.img??"",await i.decode();let n=Number(i.naturalWidth.toString().replace("px","")),a=Number(i.naturalHeight.toString().replace("px",""));t.imageAspectRatio=n/a;let{labelStyles:s}=_n(t);t.labelStyle=s;let u=r?.wrappingWidth;t.defaultWidth=r?.wrappingWidth;let h=Math.max(t.label?u??0:0,t?.assetWidth??n),d=t.constraint==="on"&&t?.assetHeight?t.assetHeight*t.imageAspectRatio:h,p=t.constraint==="on"?d/t.imageAspectRatio:t?.assetHeight??a;t.width=Math.max(d,u??0);let{shapeSvg:g,bbox:y,label:m}=await Bn(e,t,"image-shape default"),x=t.pos==="t",_=-d/2,E=-p/2,w=t.label?8:0,C=cn.svg(g),A=mn(t,{});t.look!=="handDrawn"&&(A.roughness=0,A.fillStyle="solid");let M=C.rectangle(_,E,d,p,A),N=Math.max(d,y.width),B=p+y.height+w,O=C.rectangle(-N/2,-B/2,N,B,{...A,fill:"none",stroke:"none"}),L=g.insert(()=>M,":first-child"),$=g.insert(()=>O);if(t.img){let G=g.append("image");G.attr("href",t.img),G.attr("width",d),G.attr("height",p),G.attr("preserveAspectRatio","none"),G.attr("transform",`translate(${-d/2},${x?B/2-p:-B/2})`)}return m.attr("transform",`translate(${-y.width/2-(y.x-(y.left??0))},${x?-p/2-y.height/2-w/2:p/2-y.height/2+w/2})`),L.attr("transform",`translate(0,${x?y.height/2+w/2:-y.height/2-w/2})`),yn(t,$),t.intersect=function(G){if(Ce.info("iconSquare intersect",t,G),!t.label)return tn.rect(t,G);let z=t.x??0,F=t.y??0,X=t.height??0,I=[];return x?I=[{x:z-y.width/2,y:F-X/2},{x:z+y.width/2,y:F-X/2},{x:z+y.width/2,y:F-X/2+y.height+w},{x:z+d/2,y:F-X/2+y.height+w},{x:z+d/2,y:F+X/2},{x:z-d/2,y:F+X/2},{x:z-d/2,y:F-X/2+y.height+w},{x:z-y.width/2,y:F-X/2+y.height+w}]:I=[{x:z-d/2,y:F-X/2},{x:z+d/2,y:F-X/2},{x:z+d/2,y:F-X/2+p},{x:z+y.width/2,y:F-X/2+p},{x:z+y.width/2/2,y:F+X/2},{x:z-y.width/2,y:F+X/2},{x:z-y.width/2,y:F-X/2+p},{x:z-d/2,y:F-X/2+p}],tn.polygon(t,I,G)},g}async function Eoe(e,t){let{labelStyles:r,nodeStyles:i}=_n(t);t.labelStyle=r;let{shapeSvg:n,bbox:a}=await Bn(e,t,Pn(t)),s=Math.max(a.width+(t.padding??0)*2,t?.width??0),u=Math.max(a.height+(t.padding??0)*2,t?.height??0),h=[{x:0,y:0},{x:s,y:0},{x:s+3*u/6,y:-u},{x:-3*u/6,y:-u}],d,{cssStyles:p}=t;if(t.look==="handDrawn"){let g=cn.svg(n),y=mn(t,{}),m=Na(h),x=g.path(m,y);d=n.insert(()=>x,":first-child").attr("transform",`translate(${-s/2}, ${u/2})`),p&&d.attr("style",p)}else d=mf(n,s,u,h);return i&&d.attr("style",i),t.width=s,t.height=u,yn(t,d),t.intersect=function(g){return tn.polygon(t,h,g)},n}async function DD(e,t,r){let{labelStyles:i,nodeStyles:n}=_n(t);t.labelStyle=i;let{shapeSvg:a,bbox:s}=await Bn(e,t,Pn(t)),u=Math.max(s.width+r.labelPaddingX*2,t?.width||0),h=Math.max(s.height+r.labelPaddingY*2,t?.height||0),d=-u/2,p=-h/2,g,{rx:y,ry:m}=t,{cssStyles:x}=t;if(r?.rx&&r.ry&&(y=r.rx,m=r.ry),t.look==="handDrawn"){let _=cn.svg(a),E=mn(t,{}),w=y||m?_.path(O0(d,p,u,h,y||0),E):_.rectangle(d,p,u,h,E);g=a.insert(()=>w,":first-child"),g.attr("class","basic label-container").attr("style",Ou(x))}else g=a.insert("rect",":first-child"),g.attr("class","basic label-container").attr("style",n).attr("rx",Ou(y)).attr("ry",Ou(m)).attr("x",d).attr("y",p).attr("width",u).attr("height",h);return yn(t,g),t.intersect=function(_){return tn.rect(t,_)},a}async function Coe(e,t){let{shapeSvg:r,bbox:i,label:n}=await Bn(e,t,"label"),a=r.insert("rect",":first-child");return a.attr("width",.1).attr("height",.1),r.attr("class","label edgeLabel"),n.attr("transform",`translate(${-(i.width/2)-(i.x-(i.left??0))}, ${-(i.height/2)-(i.y-(i.top??0))})`),yn(t,a),t.intersect=function(s){return tn.rect(t,s)},r}async function Soe(e,t){let{labelStyles:r,nodeStyles:i}=_n(t);t.labelStyle=r;let{shapeSvg:n,bbox:a}=await Bn(e,t,Pn(t)),s=Math.max(a.width+(t.padding??0),t?.width??0),u=Math.max(a.height+(t.padding??0),t?.height??0),h=[{x:0,y:0},{x:s+3*u/6,y:0},{x:s,y:-u},{x:-(3*u)/6,y:-u}],d,{cssStyles:p}=t;if(t.look==="handDrawn"){let g=cn.svg(n),y=mn(t,{}),m=Na(h),x=g.path(m,y);d=n.insert(()=>x,":first-child").attr("transform",`translate(${-s/2}, ${u/2})`),p&&d.attr("style",p)}else d=mf(n,s,u,h);return i&&d.attr("style",i),t.width=s,t.height=u,yn(t,d),t.intersect=function(g){return tn.polygon(t,h,g)},n}async function Aoe(e,t){let{labelStyles:r,nodeStyles:i}=_n(t);t.labelStyle=r;let{shapeSvg:n,bbox:a}=await Bn(e,t,Pn(t)),s=Math.max(a.width+(t.padding??0),t?.width??0),u=Math.max(a.height+(t.padding??0),t?.height??0),h=[{x:-3*u/6,y:0},{x:s,y:0},{x:s+3*u/6,y:-u},{x:0,y:-u}],d,{cssStyles:p}=t;if(t.look==="handDrawn"){let g=cn.svg(n),y=mn(t,{}),m=Na(h),x=g.path(m,y);d=n.insert(()=>x,":first-child").attr("transform",`translate(${-s/2}, ${u/2})`),p&&d.attr("style",p)}else d=mf(n,s,u,h);return i&&d.attr("style",i),t.width=s,t.height=u,yn(t,d),t.intersect=function(g){return tn.polygon(t,h,g)},n}function Moe(e,t){let{labelStyles:r,nodeStyles:i}=_n(t);t.label="",t.labelStyle=r;let n=e.insert("g").attr("class",Pn(t)).attr("id",t.domId??t.id),{cssStyles:a}=t,s=Math.max(35,t?.width??0),u=Math.max(35,t?.height??0),h=7,d=[{x:s,y:0},{x:0,y:u+h/2},{x:s-2*h,y:u+h/2},{x:0,y:2*u},{x:s,y:u-h/2},{x:2*h,y:u-h/2}],p=cn.svg(n),g=mn(t,{});t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");let y=Na(d),m=p.path(y,g),x=n.insert(()=>m,":first-child");return a&&t.look!=="handDrawn"&&x.selectAll("path").attr("style",a),i&&t.look!=="handDrawn"&&x.selectAll("path").attr("style",i),x.attr("transform",`translate(-${s/2},${-u})`),yn(t,x),t.intersect=function(_){return Ce.info("lightningBolt intersect",t,_),tn.polygon(t,d,_)},n}async function Loe(e,t){let{labelStyles:r,nodeStyles:i}=_n(t);t.labelStyle=r;let{shapeSvg:n,bbox:a,label:s}=await Bn(e,t,Pn(t)),u=Math.max(a.width+(t.padding??0),t.width??0),h=u/2,d=h/(2.5+u/50),p=Math.max(a.height+d+(t.padding??0),t.height??0),g=p*.1,y,{cssStyles:m}=t;if(t.look==="handDrawn"){let x=cn.svg(n),_=Sle(0,0,u,p,h,d,g),E=Ale(0,d,u,p,h,d),w=mn(t,{}),C=x.path(_,w),A=x.path(E,w);n.insert(()=>A,":first-child").attr("class","line"),y=n.insert(()=>C,":first-child"),y.attr("class","basic label-container"),m&&y.attr("style",m)}else{let x=Cle(0,0,u,p,h,d,g);y=n.insert("path",":first-child").attr("d",x).attr("class","basic label-container").attr("style",Ou(m)).attr("style",i)}return y.attr("label-offset-y",d),y.attr("transform",`translate(${-u/2}, ${-(p/2+d)})`),yn(t,y),s.attr("transform",`translate(${-(a.width/2)-(a.x-(a.left??0))}, ${-(a.height/2)+d-(a.y-(a.top??0))})`),t.intersect=function(x){let _=tn.rect(t,x),E=_.x-(t.x??0);if(h!=0&&(Math.abs(E)<(t.width??0)/2||Math.abs(E)==(t.width??0)/2&&Math.abs(_.y-(t.y??0))>(t.height??0)/2-d)){let w=d*d*(1-E*E/(h*h));w>0&&(w=Math.sqrt(w)),w=d-w,x.y-(t.y??0)>0&&(w=-w),_.y+=w}return _},n}async function Roe(e,t){let{labelStyles:r,nodeStyles:i}=_n(t);t.labelStyle=r;let{shapeSvg:n,bbox:a,label:s}=await Bn(e,t,Pn(t)),u=Math.max(a.width+(t.padding??0)*2,t?.width??0),h=Math.max(a.height+(t.padding??0)*2,t?.height??0),d=h/4,p=h+d,{cssStyles:g}=t,y=cn.svg(n),m=mn(t,{});t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");let x=[{x:-u/2-u/2*.1,y:-p/2},{x:-u/2-u/2*.1,y:p/2},...nm(-u/2-u/2*.1,p/2,u/2+u/2*.1,p/2,d,.8),{x:u/2+u/2*.1,y:-p/2},{x:-u/2-u/2*.1,y:-p/2},{x:-u/2,y:-p/2},{x:-u/2,y:p/2*1.1},{x:-u/2,y:-p/2}],_=y.polygon(x.map(w=>[w.x,w.y]),m),E=n.insert(()=>_,":first-child");return E.attr("class","basic label-container"),g&&t.look!=="handDrawn"&&E.selectAll("path").attr("style",g),i&&t.look!=="handDrawn"&&E.selectAll("path").attr("style",i),E.attr("transform",`translate(0,${-d/2})`),s.attr("transform",`translate(${-u/2+(t.padding??0)+u/2*.1/2-(a.x-(a.left??0))},${-h/2+(t.padding??0)-d/2-(a.y-(a.top??0))})`),yn(t,E),t.intersect=function(w){return tn.polygon(t,x,w)},n}async function Doe(e,t){let{labelStyles:r,nodeStyles:i}=_n(t);t.labelStyle=r;let{shapeSvg:n,bbox:a,label:s}=await Bn(e,t,Pn(t)),u=Math.max(a.width+(t.padding??0)*2,t?.width??0),h=Math.max(a.height+(t.padding??0)*2,t?.height??0),d=5,p=-u/2,g=-h/2,{cssStyles:y}=t,m=cn.svg(n),x=mn(t,{}),_=[{x:p-d,y:g+d},{x:p-d,y:g+h+d},{x:p+u-d,y:g+h+d},{x:p+u-d,y:g+h},{x:p+u,y:g+h},{x:p+u,y:g+h-d},{x:p+u+d,y:g+h-d},{x:p+u+d,y:g-d},{x:p+d,y:g-d},{x:p+d,y:g},{x:p,y:g},{x:p,y:g+d}],E=[{x:p,y:g+d},{x:p+u-d,y:g+d},{x:p+u-d,y:g+h},{x:p+u,y:g+h},{x:p+u,y:g},{x:p,y:g}];t.look!=="handDrawn"&&(x.roughness=0,x.fillStyle="solid");let w=Na(_),C=m.path(w,x),A=Na(E),M=m.path(A,{...x,fill:"none"}),N=n.insert(()=>M,":first-child");return N.insert(()=>C,":first-child"),N.attr("class","basic label-container"),y&&t.look!=="handDrawn"&&N.selectAll("path").attr("style",y),i&&t.look!=="handDrawn"&&N.selectAll("path").attr("style",i),s.attr("transform",`translate(${-(a.width/2)-d-(a.x-(a.left??0))}, ${-(a.height/2)+d-(a.y-(a.top??0))})`),yn(t,N),t.intersect=function(B){return tn.polygon(t,_,B)},n}async function Ioe(e,t){let{labelStyles:r,nodeStyles:i}=_n(t);t.labelStyle=r;let{shapeSvg:n,bbox:a,label:s}=await Bn(e,t,Pn(t)),u=Math.max(a.width+(t.padding??0)*2,t?.width??0),h=Math.max(a.height+(t.padding??0)*2,t?.height??0),d=h/4,p=h+d,g=-u/2,y=-p/2,m=5,{cssStyles:x}=t,_=nm(g-m,y+p+m,g+u-m,y+p+m,d,.8),E=_?.[_.length-1],w=[{x:g-m,y:y+m},{x:g-m,y:y+p+m},..._,{x:g+u-m,y:E.y-m},{x:g+u,y:E.y-m},{x:g+u,y:E.y-2*m},{x:g+u+m,y:E.y-2*m},{x:g+u+m,y:y-m},{x:g+m,y:y-m},{x:g+m,y},{x:g,y},{x:g,y:y+m}],C=[{x:g,y:y+m},{x:g+u-m,y:y+m},{x:g+u-m,y:E.y-m},{x:g+u,y:E.y-m},{x:g+u,y},{x:g,y}],A=cn.svg(n),M=mn(t,{});t.look!=="handDrawn"&&(M.roughness=0,M.fillStyle="solid");let N=Na(w),B=A.path(N,M),O=Na(C),L=A.path(O,M),$=n.insert(()=>B,":first-child");return $.insert(()=>L),$.attr("class","basic label-container"),x&&t.look!=="handDrawn"&&$.selectAll("path").attr("style",x),i&&t.look!=="handDrawn"&&$.selectAll("path").attr("style",i),$.attr("transform",`translate(0,${-d/2})`),s.attr("transform",`translate(${-(a.width/2)-m-(a.x-(a.left??0))}, ${-(a.height/2)+m-d/2-(a.y-(a.top??0))})`),yn(t,$),t.intersect=function(G){return tn.polygon(t,w,G)},n}async function Noe(e,t,{config:{themeVariables:r}}){let{labelStyles:i,nodeStyles:n}=_n(t);t.labelStyle=i,t.useHtmlLabels||cs().flowchart?.htmlLabels!==!1||(t.centerLabel=!0);let{shapeSvg:a,bbox:s}=await Bn(e,t,Pn(t)),u=Math.max(s.width+(t.padding??0)*2,t?.width??0),h=Math.max(s.height+(t.padding??0)*2,t?.height??0),d=-u/2,p=-h/2,{cssStyles:g}=t,y=cn.svg(a),m=mn(t,{fill:r.noteBkgColor,stroke:r.noteBorderColor});t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");let x=y.rectangle(d,p,u,h,m),_=a.insert(()=>x,":first-child");return _.attr("class","basic label-container"),g&&t.look!=="handDrawn"&&_.selectAll("path").attr("style",g),n&&t.look!=="handDrawn"&&_.selectAll("path").attr("style",n),yn(t,_),t.intersect=function(E){return tn.rect(t,E)},a}async function Ooe(e,t){let{labelStyles:r,nodeStyles:i}=_n(t);t.labelStyle=r;let{shapeSvg:n,bbox:a}=await Bn(e,t,Pn(t)),s=a.width+t.padding,u=a.height+t.padding,h=s+u,d=[{x:h/2,y:0},{x:h,y:-h/2},{x:h/2,y:-h},{x:0,y:-h/2}],p,{cssStyles:g}=t;if(t.look==="handDrawn"){let y=cn.svg(n),m=mn(t,{}),x=Mle(0,0,h),_=y.path(x,m);p=n.insert(()=>_,":first-child").attr("transform",`translate(${-h/2}, ${h/2})`),g&&p.attr("style",g)}else p=mf(n,h,h,d);return i&&p.attr("style",i),yn(t,p),t.intersect=function(y){return Ce.debug(`APA12 Intersect called SPLIT
point:`,y,`
node:
`,t,`
res:`,tn.polygon(t,d,y)),tn.polygon(t,d,y)},n}async function Boe(e,t){let{labelStyles:r,nodeStyles:i}=_n(t);t.labelStyle=r;let{shapeSvg:n,bbox:a,label:s}=await Bn(e,t,Pn(t)),u=Math.max(a.width+(t.padding??0),t?.width??0),h=Math.max(a.height+(t.padding??0),t?.height??0),d=-u/2,p=-h/2,g=p/2,y=[{x:d+g,y:p},{x:d,y:0},{x:d+g,y:-p},{x:-d,y:-p},{x:-d,y:p}],{cssStyles:m}=t,x=cn.svg(n),_=mn(t,{});t.look!=="handDrawn"&&(_.roughness=0,_.fillStyle="solid");let E=Na(y),w=x.path(E,_),C=n.insert(()=>w,":first-child");return C.attr("class","basic label-container"),m&&t.look!=="handDrawn"&&C.selectAll("path").attr("style",m),i&&t.look!=="handDrawn"&&C.selectAll("path").attr("style",i),C.attr("transform",`translate(${-g/2},0)`),s.attr("transform",`translate(${-g/2-a.width/2-(a.x-(a.left??0))}, ${-(a.height/2)-(a.y-(a.top??0))})`),yn(t,C),t.intersect=function(A){return tn.polygon(t,y,A)},n}async function Poe(e,t){let{labelStyles:r,nodeStyles:i}=_n(t);t.labelStyle=r;let n;t.cssClasses?n="node "+t.cssClasses:n="node default";let a=e.insert("g").attr("class",n).attr("id",t.domId||t.id),s=a.insert("g"),u=a.insert("g").attr("class","label").attr("style",i),h=t.description,d=t.label,p=u.node().appendChild(await am(d,t.labelStyle,!0,!0)),g={width:0,height:0};if(es(at()?.flowchart?.htmlLabels)){let L=p.children[0],$=Nr(p);g=L.getBoundingClientRect(),$.attr("width",g.width),$.attr("height",g.height)}Ce.info("Text 2",h);let y=h||[],m=p.getBBox(),x=u.node().appendChild(await am(y.join?y.join("<br/>"):y,t.labelStyle,!0,!0)),_=x.children[0],E=Nr(x);g=_.getBoundingClientRect(),E.attr("width",g.width),E.attr("height",g.height);let w=(t.padding||0)/2;Nr(x).attr("transform","translate( "+(g.width>m.width?0:(m.width-g.width)/2)+", "+(m.height+w+5)+")"),Nr(p).attr("transform","translate( "+(g.width<m.width?0:-(m.width-g.width)/2)+", 0)"),g=u.node().getBBox(),u.attr("transform","translate("+-g.width/2+", "+(-g.height/2-w+3)+")");let C=g.width+(t.padding||0),A=g.height+(t.padding||0),M=-g.width/2-w,N=-g.height/2-w,B,O;if(t.look==="handDrawn"){let L=cn.svg(a),$=mn(t,{}),G=L.path(O0(M,N,C,A,t.rx||0),$),z=L.line(-g.width/2-w,-g.height/2-w+m.height+w,g.width/2+w,-g.height/2-w+m.height+w,$);O=a.insert(()=>(Ce.debug("Rough node insert CXC",G),z),":first-child"),B=a.insert(()=>(Ce.debug("Rough node insert CXC",G),G),":first-child")}else B=s.insert("rect",":first-child"),O=s.insert("line"),B.attr("class","outer title-state").attr("style",i).attr("x",-g.width/2-w).attr("y",-g.height/2-w).attr("width",g.width+(t.padding||0)).attr("height",g.height+(t.padding||0)),O.attr("class","divider").attr("x1",-g.width/2-w).attr("x2",g.width/2+w).attr("y1",-g.height/2-w+m.height+w).attr("y2",-g.height/2-w+m.height+w);return yn(t,B),t.intersect=function(L){return tn.rect(t,L)},a}async function Foe(e,t){let r={rx:5,ry:5,classes:"",labelPaddingX:(t?.padding||0)*1,labelPaddingY:(t?.padding||0)*1};return DD(e,t,r)}async function $oe(e,t){let{labelStyles:r,nodeStyles:i}=_n(t);t.labelStyle=r;let{shapeSvg:n,bbox:a,label:s}=await Bn(e,t,Pn(t)),u=t?.padding??0,h=Math.max(a.width+(t.padding??0)*2,t?.width??0),d=Math.max(a.height+(t.padding??0)*2,t?.height??0),p=-a.width/2-u,g=-a.height/2-u,{cssStyles:y}=t,m=cn.svg(n),x=mn(t,{});t.look!=="handDrawn"&&(x.roughness=0,x.fillStyle="solid");let _=[{x:p,y:g},{x:p+h+8,y:g},{x:p+h+8,y:g+d},{x:p-8,y:g+d},{x:p-8,y:g},{x:p,y:g},{x:p,y:g+d}],E=m.polygon(_.map(C=>[C.x,C.y]),x),w=n.insert(()=>E,":first-child");return w.attr("class","basic label-container").attr("style",Ou(y)),i&&t.look!=="handDrawn"&&w.selectAll("path").attr("style",i),y&&t.look!=="handDrawn"&&w.selectAll("path").attr("style",i),s.attr("transform",`translate(${-h/2+4+(t.padding??0)-(a.x-(a.left??0))},${-d/2+(t.padding??0)-(a.y-(a.top??0))})`),yn(t,w),t.intersect=function(C){return tn.rect(t,C)},n}async function zoe(e,t){let{labelStyles:r,nodeStyles:i}=_n(t);t.labelStyle=r;let{shapeSvg:n,bbox:a,label:s}=await Bn(e,t,Pn(t)),u=Math.max(a.width+(t.padding??0)*2,t?.width??0),h=Math.max(a.height+(t.padding??0)*2,t?.height??0),d=-u/2,p=-h/2,{cssStyles:g}=t,y=cn.svg(n),m=mn(t,{});t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");let x=[{x:d,y:p},{x:d,y:p+h},{x:d+u,y:p+h},{x:d+u,y:p-h/2}],_=Na(x),E=y.path(_,m),w=n.insert(()=>E,":first-child");return w.attr("class","basic label-container"),g&&t.look!=="handDrawn"&&w.selectChildren("path").attr("style",g),i&&t.look!=="handDrawn"&&w.selectChildren("path").attr("style",i),w.attr("transform",`translate(0, ${h/4})`),s.attr("transform",`translate(${-u/2+(t.padding??0)-(a.x-(a.left??0))}, ${-h/4+(t.padding??0)-(a.y-(a.top??0))})`),yn(t,w),t.intersect=function(C){return tn.polygon(t,x,C)},n}async function Goe(e,t){let r={rx:0,ry:0,classes:"",labelPaddingX:(t?.padding||0)*2,labelPaddingY:(t?.padding||0)*1};return DD(e,t,r)}async function Uoe(e,t){let{labelStyles:r,nodeStyles:i}=_n(t);t.labelStyle=r;let{shapeSvg:n,bbox:a}=await Bn(e,t,Pn(t)),s=a.height+t.padding,u=a.width+s/4+t.padding,h,{cssStyles:d}=t;if(t.look==="handDrawn"){let p=cn.svg(n),g=mn(t,{}),y=O0(-u/2,-s/2,u,s,s/2),m=p.path(y,g);h=n.insert(()=>m,":first-child"),h.attr("class","basic label-container").attr("style",Ou(d))}else h=n.insert("rect",":first-child"),h.attr("class","basic label-container").attr("style",i).attr("rx",s/2).attr("ry",s/2).attr("x",-u/2).attr("y",-s/2).attr("width",u).attr("height",s);return yn(t,h),t.intersect=function(p){return tn.rect(t,p)},n}async function joe(e,t){return DD(e,t,{rx:5,ry:5,classes:"flowchart-node"})}function Hoe(e,t,{config:{themeVariables:r}}){let{labelStyles:i,nodeStyles:n}=_n(t);t.labelStyle=i;let{cssStyles:a}=t,{lineColor:s,stateBorder:u,nodeBorder:h}=r,d=e.insert("g").attr("class","node default").attr("id",t.domId||t.id),p=cn.svg(d),g=mn(t,{});t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");let y=p.circle(0,0,14,{...g,stroke:s,strokeWidth:2}),m=u??h,x=p.circle(0,0,5,{...g,fill:m,stroke:m,strokeWidth:2,fillStyle:"solid"}),_=d.insert(()=>y,":first-child");return _.insert(()=>x),a&&_.selectAll("path").attr("style",a),n&&_.selectAll("path").attr("style",n),yn(t,_),t.intersect=function(E){return tn.circle(t,7,E)},d}function Voe(e,t,{config:{themeVariables:r}}){let{lineColor:i}=r,n=e.insert("g").attr("class","node default").attr("id",t.domId||t.id),a;if(t.look==="handDrawn"){let s=cn.svg(n).circle(0,0,14,ule(i));a=n.insert(()=>s),a.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14)}else a=n.insert("circle",":first-child"),a.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14);return yn(t,a),t.intersect=function(s){return tn.circle(t,7,s)},n}async function Woe(e,t){let{labelStyles:r,nodeStyles:i}=_n(t);t.labelStyle=r;let{shapeSvg:n,bbox:a}=await Bn(e,t,Pn(t)),s=(t?.padding||0)/2,u=a.width+t.padding,h=a.height+t.padding,d=-a.width/2-s,p=-a.height/2-s,g=[{x:0,y:0},{x:u,y:0},{x:u,y:-h},{x:0,y:-h},{x:0,y:0},{x:-8,y:0},{x:u+8,y:0},{x:u+8,y:-h},{x:-8,y:-h},{x:-8,y:0}];if(t.look==="handDrawn"){let y=cn.svg(n),m=mn(t,{}),x=y.rectangle(d-8,p,u+16,h,m),_=y.line(d,p,d,p+h,m),E=y.line(d+u,p,d+u,p+h,m);n.insert(()=>_,":first-child"),n.insert(()=>E,":first-child");let w=n.insert(()=>x,":first-child"),{cssStyles:C}=t;w.attr("class","basic label-container").attr("style",Ou(C)),yn(t,w)}else{let y=mf(n,u,h,g);i&&y.attr("style",i),yn(t,y)}return t.intersect=function(y){return tn.polygon(t,g,y)},n}async function Yoe(e,t){let{labelStyles:r,nodeStyles:i}=_n(t);t.labelStyle=r;let{shapeSvg:n,bbox:a}=await Bn(e,t,Pn(t)),s=Math.max(a.width+(t.padding??0)*2,t?.width??0),u=Math.max(a.height+(t.padding??0)*2,t?.height??0),h=-s/2,d=-u/2,p=.2*u,g=.2*u,{cssStyles:y}=t,m=cn.svg(n),x=mn(t,{}),_=[{x:h-p/2,y:d},{x:h+s+p/2,y:d},{x:h+s+p/2,y:d+u},{x:h-p/2,y:d+u}],E=[{x:h+s-p/2,y:d+u},{x:h+s+p/2,y:d+u},{x:h+s+p/2,y:d+u-g}];t.look!=="handDrawn"&&(x.roughness=0,x.fillStyle="solid");let w=Na(_),C=m.path(w,x),A=Na(E),M=m.path(A,{...x,fillStyle:"solid"}),N=n.insert(()=>M,":first-child");return N.insert(()=>C,":first-child"),N.attr("class","basic label-container"),y&&t.look!=="handDrawn"&&N.selectAll("path").attr("style",y),i&&t.look!=="handDrawn"&&N.selectAll("path").attr("style",i),yn(t,N),t.intersect=function(B){return tn.polygon(t,_,B)},n}async function qoe(e,t){let{labelStyles:r,nodeStyles:i}=_n(t);t.labelStyle=r;let{shapeSvg:n,bbox:a,label:s}=await Bn(e,t,Pn(t)),u=Math.max(a.width+(t.padding??0)*2,t?.width??0),h=Math.max(a.height+(t.padding??0)*2,t?.height??0),d=h/4,p=.2*u,g=.2*h,y=h+d,{cssStyles:m}=t,x=cn.svg(n),_=mn(t,{});t.look!=="handDrawn"&&(_.roughness=0,_.fillStyle="solid");let E=[{x:-u/2-u/2*.1,y:y/2},...nm(-u/2-u/2*.1,y/2,u/2+u/2*.1,y/2,d,.8),{x:u/2+u/2*.1,y:-y/2},{x:-u/2-u/2*.1,y:-y/2}],w=-u/2+u/2*.1,C=-y/2-g*.4,A=[{x:w+u-p,y:(C+h)*1.4},{x:w+u,y:C+h-g},{x:w+u,y:(C+h)*.9},...nm(w+u,(C+h)*1.3,w+u-p,(C+h)*1.5,-h*.03,.5)],M=Na(E),N=x.path(M,_),B=Na(A),O=x.path(B,{..._,fillStyle:"solid"}),L=n.insert(()=>O,":first-child");return L.insert(()=>N,":first-child"),L.attr("class","basic label-container"),m&&t.look!=="handDrawn"&&L.selectAll("path").attr("style",m),i&&t.look!=="handDrawn"&&L.selectAll("path").attr("style",i),L.attr("transform",`translate(0,${-d/2})`),s.attr("transform",`translate(${-u/2+(t.padding??0)-(a.x-(a.left??0))},${-h/2+(t.padding??0)-d/2-(a.y-(a.top??0))})`),yn(t,L),t.intersect=function($){return tn.polygon(t,E,$)},n}async function Xoe(e,t){let{labelStyles:r,nodeStyles:i}=_n(t);t.labelStyle=r;let{shapeSvg:n,bbox:a}=await Bn(e,t,Pn(t)),s=Math.max(a.width+t.padding,t?.width||0),u=Math.max(a.height+t.padding,t?.height||0),h=-s/2,d=-u/2,p=n.insert("rect",":first-child");return p.attr("class","text").attr("style",i).attr("rx",0).attr("ry",0).attr("x",h).attr("y",d).attr("width",s).attr("height",u),yn(t,p),t.intersect=function(g){return tn.rect(t,g)},n}async function Koe(e,t){let{labelStyles:r,nodeStyles:i}=_n(t);t.labelStyle=r;let{shapeSvg:n,bbox:a,label:s,halfPadding:u}=await Bn(e,t,Pn(t)),h=t.look==="neo"?u*2:u,d=a.height+h,p=d/2,g=p/(2.5+d/50),y=a.width+g+h,{cssStyles:m}=t,x;if(t.look==="handDrawn"){let _=cn.svg(n),E=Rle(0,0,y,d,g,p),w=Dle(0,0,y,d,g,p),C=_.path(E,mn(t,{})),A=_.path(w,mn(t,{fill:"none"}));x=n.insert(()=>A,":first-child"),x=n.insert(()=>C,":first-child"),x.attr("class","basic label-container"),m&&x.attr("style",m)}else{let _=Lle(0,0,y,d,g,p);x=n.insert("path",":first-child").attr("d",_).attr("class","basic label-container").attr("style",Ou(m)).attr("style",i),x.attr("class","basic label-container"),m&&x.selectAll("path").attr("style",m),i&&x.selectAll("path").attr("style",i)}return x.attr("label-offset-x",g),x.attr("transform",`translate(${-y/2}, ${d/2} )`),s.attr("transform",`translate(${-(a.width/2)-g-(a.x-(a.left??0))}, ${-(a.height/2)-(a.y-(a.top??0))})`),yn(t,x),t.intersect=function(_){let E=tn.rect(t,_),w=E.y-(t.y??0);if(p!=0&&(Math.abs(w)<(t.height??0)/2||Math.abs(w)==(t.height??0)/2&&Math.abs(E.x-(t.x??0))>(t.width??0)/2-g)){let C=g*g*(1-w*w/(p*p));C!=0&&(C=Math.sqrt(Math.abs(C))),C=g-C,_.x-(t.x??0)>0&&(C=-C),E.x+=C}return E},n}async function Zoe(e,t){let{labelStyles:r,nodeStyles:i}=_n(t);t.labelStyle=r;let{shapeSvg:n,bbox:a}=await Bn(e,t,Pn(t)),s=a.width+t.padding,u=a.height+t.padding,h=[{x:-3*u/6,y:0},{x:s+3*u/6,y:0},{x:s,y:-u},{x:0,y:-u}],d,{cssStyles:p}=t;if(t.look==="handDrawn"){let g=cn.svg(n),y=mn(t,{}),m=Na(h),x=g.path(m,y);d=n.insert(()=>x,":first-child").attr("transform",`translate(${-s/2}, ${u/2})`),p&&d.attr("style",p)}else d=mf(n,s,u,h);return i&&d.attr("style",i),t.width=s,t.height=u,yn(t,d),t.intersect=function(g){return tn.polygon(t,h,g)},n}async function Qoe(e,t){let{labelStyles:r,nodeStyles:i}=_n(t);t.labelStyle=r;let{shapeSvg:n,bbox:a}=await Bn(e,t,Pn(t)),s=60,u=20,h=Math.max(s,a.width+(t.padding??0)*2,t?.width??0),d=Math.max(u,a.height+(t.padding??0)*2,t?.height??0),{cssStyles:p}=t,g=cn.svg(n),y=mn(t,{});t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");let m=[{x:-h/2*.8,y:-d/2},{x:h/2*.8,y:-d/2},{x:h/2,y:-d/2*.6},{x:h/2,y:d/2},{x:-h/2,y:d/2},{x:-h/2,y:-d/2*.6}],x=Na(m),_=g.path(x,y),E=n.insert(()=>_,":first-child");return E.attr("class","basic label-container"),p&&t.look!=="handDrawn"&&E.selectChildren("path").attr("style",p),i&&t.look!=="handDrawn"&&E.selectChildren("path").attr("style",i),yn(t,E),t.intersect=function(w){return tn.polygon(t,m,w)},n}async function Joe(e,t){let{labelStyles:r,nodeStyles:i}=_n(t);t.labelStyle=r;let{shapeSvg:n,bbox:a,label:s}=await Bn(e,t,Pn(t)),u=es(at().flowchart?.htmlLabels),h=a.width+(t.padding??0),d=h+a.height,p=h+a.height,g=[{x:0,y:0},{x:p,y:0},{x:p/2,y:-d}],{cssStyles:y}=t,m=cn.svg(n),x=mn(t,{});t.look!=="handDrawn"&&(x.roughness=0,x.fillStyle="solid");let _=Na(g),E=m.path(_,x),w=n.insert(()=>E,":first-child").attr("transform",`translate(${-d/2}, ${d/2})`);return y&&t.look!=="handDrawn"&&w.selectChildren("path").attr("style",y),i&&t.look!=="handDrawn"&&w.selectChildren("path").attr("style",i),t.width=h,t.height=d,yn(t,w),s.attr("transform",`translate(${-a.width/2-(a.x-(a.left??0))}, ${d/2-(a.height+(t.padding??0)/(u?2:1)-(a.y-(a.top??0)))})`),t.intersect=function(C){return Ce.info("Triangle intersect",t,g,C),tn.polygon(t,g,C)},n}async function ele(e,t){let{labelStyles:r,nodeStyles:i}=_n(t);t.labelStyle=r;let{shapeSvg:n,bbox:a,label:s}=await Bn(e,t,Pn(t)),u=Math.max(a.width+(t.padding??0)*2,t?.width??0),h=Math.max(a.height+(t.padding??0)*2,t?.height??0),d=h/8,p=h+d,{cssStyles:g}=t,y=70-u,m=y>0?y/2:0,x=cn.svg(n),_=mn(t,{});t.look!=="handDrawn"&&(_.roughness=0,_.fillStyle="solid");let E=[{x:-u/2-m,y:p/2},...nm(-u/2-m,p/2,u/2+m,p/2,d,.8),{x:u/2+m,y:-p/2},{x:-u/2-m,y:-p/2}],w=Na(E),C=x.path(w,_),A=n.insert(()=>C,":first-child");return A.attr("class","basic label-container"),g&&t.look!=="handDrawn"&&A.selectAll("path").attr("style",g),i&&t.look!=="handDrawn"&&A.selectAll("path").attr("style",i),A.attr("transform",`translate(0,${-d/2})`),s.attr("transform",`translate(${-u/2+(t.padding??0)-(a.x-(a.left??0))},${-h/2+(t.padding??0)-d-(a.y-(a.top??0))})`),yn(t,A),t.intersect=function(M){return tn.polygon(t,E,M)},n}async function tle(e,t){let{labelStyles:r,nodeStyles:i}=_n(t);t.labelStyle=r;let{shapeSvg:n,bbox:a}=await Bn(e,t,Pn(t)),s=100,u=50,h=Math.max(a.width+(t.padding??0)*2,t?.width??0),d=Math.max(a.height+(t.padding??0)*2,t?.height??0),p=h/d,g=h,y=d;g>y*p?y=g/p:g=y*p,g=Math.max(g,s),y=Math.max(y,u);let m=Math.min(y*.2,y/4),x=y+m*2,{cssStyles:_}=t,E=cn.svg(n),w=mn(t,{});t.look!=="handDrawn"&&(w.roughness=0,w.fillStyle="solid");let C=[{x:-g/2,y:x/2},...nm(-g/2,x/2,g/2,x/2,m,1),{x:g/2,y:-x/2},...nm(g/2,-x/2,-g/2,-x/2,m,-1)],A=Na(C),M=E.path(A,w),N=n.insert(()=>M,":first-child");return N.attr("class","basic label-container"),_&&t.look!=="handDrawn"&&N.selectAll("path").attr("style",_),i&&t.look!=="handDrawn"&&N.selectAll("path").attr("style",i),yn(t,N),t.intersect=function(B){return tn.polygon(t,C,B)},n}async function rle(e,t){let{labelStyles:r,nodeStyles:i}=_n(t);t.labelStyle=r;let{shapeSvg:n,bbox:a,label:s}=await Bn(e,t,Pn(t)),u=Math.max(a.width+(t.padding??0)*2,t?.width??0),h=Math.max(a.height+(t.padding??0)*2,t?.height??0),d=5,p=-u/2,g=-h/2,{cssStyles:y}=t,m=cn.svg(n),x=mn(t,{}),_=[{x:p-d,y:g-d},{x:p-d,y:g+h},{x:p+u,y:g+h},{x:p+u,y:g-d}],E=`M${p-d},${g-d} L${p+u},${g-d} L${p+u},${g+h} L${p-d},${g+h} L${p-d},${g-d}
                M${p-d},${g} L${p+u},${g}
                M${p},${g-d} L${p},${g+h}`;t.look!=="handDrawn"&&(x.roughness=0,x.fillStyle="solid");let w=m.path(E,x),C=n.insert(()=>w,":first-child");return C.attr("transform",`translate(${d/2}, ${d/2})`),C.attr("class","basic label-container"),y&&t.look!=="handDrawn"&&C.selectAll("path").attr("style",y),i&&t.look!=="handDrawn"&&C.selectAll("path").attr("style",i),s.attr("transform",`translate(${-(a.width/2)+d/2-(a.x-(a.left??0))}, ${-(a.height/2)+d/2-(a.y-(a.top??0))})`),yn(t,C),t.intersect=function(A){return tn.polygon(t,_,A)},n}async function ile(e,t,r,i,n=r.class.padding??12){let a=i?0:3,s=e.insert("g").attr("class",Pn(t)).attr("id",t.domId||t.id),u=null,h=null,d=null,p=null,g=0,y=0,m=0;if(u=s.insert("g").attr("class","annotation-group text"),t.annotations.length>0){let C=t.annotations[0];await UC(u,{text:`\xAB${C}\xBB`},0),g=u.node().getBBox().height}h=s.insert("g").attr("class","label-group text"),await UC(h,t,0,["font-weight: bolder"]);let x=h.node().getBBox();y=x.height,d=s.insert("g").attr("class","members-group text");let _=0;for(let C of t.members){let A=await UC(d,C,_,[C.parseClassifier()]);_+=A+a}m=d.node().getBBox().height,m<=0&&(m=n/2),p=s.insert("g").attr("class","methods-group text");let E=0;for(let C of t.methods){let A=await UC(p,C,E,[C.parseClassifier()]);E+=A+a}let w=s.node().getBBox();if(u!==null){let C=u.node().getBBox();u.attr("transform",`translate(${-C.width/2})`)}return h.attr("transform",`translate(${-x.width/2}, ${g})`),w=s.node().getBBox(),d.attr("transform",`translate(0, ${g+y+n*2})`),w=s.node().getBBox(),p.attr("transform",`translate(0, ${g+y+(m?m+n*4:n*2)})`),w=s.node().getBBox(),{shapeSvg:s,bbox:w}}async function UC(e,t,r,i=[]){let n=e.insert("g").attr("class","label").attr("style",i.join("; ")),a=cs(),s="useHtmlLabels"in t?t.useHtmlLabels:es(a.htmlLabels)??!0,u="";"text"in t?u=t.text:u=t.label,!s&&u.startsWith("\\")&&(u=u.substring(1)),No(u)&&(s=!0);let h=await Kh(n,Nb(N0(u)),{width:Oc(u,a)+50,classes:"markdown-node-label",useHtmlLabels:s},a),d,p=1;if(s){let g=h.children[0],y=Nr(h);p=g.innerHTML.split("<br>").length,g.innerHTML.includes("</math>")&&(p+=g.innerHTML.split("<mrow>").length-1);let m=g.getElementsByTagName("img");if(m){let x=u.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...m].map(_=>new Promise(E=>{function w(){if(_.style.display="flex",_.style.flexDirection="column",x){let C=a.fontSize?.toString()??window.getComputedStyle(document.body).fontSize,A=parseInt(C,10)*5+"px";_.style.minWidth=A,_.style.maxWidth=A}else _.style.width="100%";E(_)}k(w,"setupImage"),setTimeout(()=>{_.complete&&w()}),_.addEventListener("error",w),_.addEventListener("load",w)})))}d=g.getBoundingClientRect(),y.attr("width",d.width),y.attr("height",d.height)}else{i.includes("font-weight: bolder")&&Nr(h).selectAll("tspan").attr("font-weight",""),p=h.children.length;let g=h.children[0];(h.textContent===""||h.textContent.includes("&gt"))&&(g.textContent=u[0]+u.substring(1).replaceAll("&gt;",">").replaceAll("&lt;","<").trim(),u[1]===" "&&(g.textContent=g.textContent[0]+" "+g.textContent.substring(1))),g.textContent==="undefined"&&(g.textContent=""),d=h.getBBox()}return n.attr("transform","translate(0,"+(-d.height/(2*p)+r)+")"),d.height}async function nle(e,t){let r=at(),i=r.class.padding??12,n=i,a=t.useHtmlLabels??es(r.htmlLabels)??!0,s=t;s.annotations=s.annotations??[],s.members=s.members??[],s.methods=s.methods??[];let{shapeSvg:u,bbox:h}=await ile(e,t,r,a,n),{labelStyles:d,nodeStyles:p}=_n(t);t.labelStyle=d,t.cssStyles=s.styles||"";let g=s.styles?.join(";")||p||"";t.cssStyles||(t.cssStyles=g.replaceAll("!important","").split(";"));let y=s.members.length===0&&s.methods.length===0&&!r.class?.hideEmptyMembersBox,m=cn.svg(u),x=mn(t,{});t.look!=="handDrawn"&&(x.roughness=0,x.fillStyle="solid");let _=h.width,E=h.height;s.members.length===0&&s.methods.length===0?E+=n:s.members.length>0&&s.methods.length===0&&(E+=n*2);let w=-_/2,C=-E/2,A=m.rectangle(w-i,C-i-(y?i:s.members.length===0&&s.methods.length===0?-i/2:0),_+2*i,E+2*i+(y?i*2:s.members.length===0&&s.methods.length===0?-i:0),x),M=u.insert(()=>A,":first-child");M.attr("class","basic label-container");let N=M.node().getBBox();u.selectAll(".text").each(($,G,z)=>{let F=Nr(z[G]),X=F.attr("transform"),I=0;if(X){let V=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(X);V&&(I=parseFloat(V[2]))}let j=I+C+i-(y?i:s.members.length===0&&s.methods.length===0?-i/2:0);a||(j-=4);let H=w;(F.attr("class").includes("label-group")||F.attr("class").includes("annotation-group"))&&(H=-F.node()?.getBBox().width/2||0,u.selectAll("text").each(function(V,P,q){window.getComputedStyle(q[P]).textAnchor==="middle"&&(H=0)})),F.attr("transform",`translate(${H}, ${j})`)});let B=u.select(".annotation-group").node().getBBox().height-(y?i/2:0)||0,O=u.select(".label-group").node().getBBox().height-(y?i/2:0)||0,L=u.select(".members-group").node().getBBox().height-(y?i/2:0)||0;if(s.members.length>0||s.methods.length>0||y){let $=m.line(N.x,B+O+C+i,N.x+N.width,B+O+C+i,x);u.insert(()=>$).attr("class","divider").attr("style",g)}if(y||s.members.length>0||s.methods.length>0){let $=m.line(N.x,B+O+L+C+n*2+i,N.x+N.width,B+O+L+C+i+n*2,x);u.insert(()=>$).attr("class","divider").attr("style",g)}if(s.look!=="handDrawn"&&u.selectAll("path").attr("style",g),M.select(":nth-child(2)").attr("style",g),u.selectAll(".divider").select("path").attr("style",g),t.labelStyle?u.selectAll("span").attr("style",t.labelStyle):u.selectAll("span").attr("style",g),!a){let $=RegExp(/color\s*:\s*([^;]*)/),G=$.exec(g);if(G){let z=G[0].replace("color","fill");u.selectAll("tspan").attr("style",z)}else if(d){let z=$.exec(d);if(z){let F=z[0].replace("color","fill");u.selectAll("tspan").attr("style",F)}}}return yn(t,M),t.intersect=function($){return tn.rect(t,$)},u}async function ale(e,t,{config:r}){let{labelStyles:i,nodeStyles:n}=_n(t);t.labelStyle=i||"";let a=10,s=t.width;t.width=(t.width??200)-10;let{shapeSvg:u,bbox:h,label:d}=await Bn(e,t,Pn(t)),p=t.padding||10,g="",y;"ticket"in t&&t.ticket&&r?.kanban?.ticketBaseUrl&&(g=r?.kanban?.ticketBaseUrl.replace("#TICKET#",t.ticket),y=u.insert("svg:a",":first-child").attr("class","kanban-ticket-link").attr("xlink:href",g).attr("target","_blank"));let m={useHtmlLabels:t.useHtmlLabels,labelStyle:t.labelStyle||"",width:t.width,img:t.img,padding:t.padding||8,centerLabel:!1},x,_;y?{label:x,bbox:_}=await ND(y,"ticket"in t&&t.ticket||"",m):{label:x,bbox:_}=await ND(u,"ticket"in t&&t.ticket||"",m);let{label:E,bbox:w}=await ND(u,"assigned"in t&&t.assigned||"",m);t.width=s;let C=10,A=t?.width||0,M=Math.max(_.height,w.height)/2,N=Math.max(h.height+C*2,t?.height||0)+M,B=-A/2,O=-N/2;d.attr("transform","translate("+(p-A/2)+", "+(-M-h.height/2)+")"),x.attr("transform","translate("+(p-A/2)+", "+(-M+h.height/2)+")"),E.attr("transform","translate("+(p+A/2-w.width-2*a)+", "+(-M+h.height/2)+")");let L,{rx:$,ry:G}=t,{cssStyles:z}=t;if(t.look==="handDrawn"){let F=cn.svg(u),X=mn(t,{}),I=$||G?F.path(O0(B,O,A,N,$||0),X):F.rectangle(B,O,A,N,X);L=u.insert(()=>I,":first-child"),L.attr("class","basic label-container").attr("style",z||null)}else{L=u.insert("rect",":first-child"),L.attr("class","basic label-container __APA__").attr("style",n).attr("rx",$??5).attr("ry",G??5).attr("x",B).attr("y",O).attr("width",A).attr("height",N);let F="priority"in t&&t.priority;if(F){let X=u.append("line"),I=B+2,j=O+Math.floor(($??0)/2),H=O+N-Math.floor(($??0)/2);X.attr("x1",I).attr("y1",j).attr("x2",I).attr("y2",H).attr("stroke-width","4").attr("stroke",Ile(F))}}return yn(t,L),t.height=N,t.intersect=function(F){return tn.rect(t,F)},u}function sle(e){return e in Hj}async function ID(e,t,r){let i,n;t.shape==="rect"&&(t.rx&&t.ry?t.shape="roundedRect":t.shape="squareRect");let a=t.shape?Hj[t.shape]:void 0;if(!a)throw new Error(`No such shape: ${t.shape}. Please check your syntax.`);if(t.link){let s;r.config.securityLevel==="sandbox"?s="_top":t.linkTarget&&(s=t.linkTarget||"_blank"),i=e.insert("svg:a").attr("xlink:href",t.link).attr("target",s??null),n=await a(i,t,r)}else n=await a(e,t,r),i=n;return t.tooltip&&n.attr("title",t.tooltip),jC.set(t.id,i),t.haveCallback&&i.attr("class",i.attr("class")+" clickable"),i}var Bn,ND,yn,Pn,ole,Av,lle,am,O0,ule,Mv,hle,_n,mn,Gj,cle,dle,ple,fle,gle,mle,Uj,OD,yle,vle,jj,xle,ble,_le,tn,wle,kle,Tle,Ele,Cle,Sle,Ale,Mle,Lle,Rle,Dle,Ile,Nle,Ole,Hj,jC,Ble,Ple,BD,B0=D(()=>{Oh(),uh(),ch(),Os(),Qn(),ha(),ha(),En(),ha(),En(),En(),En(),En(),En(),En(),En(),En(),En(),En(),En(),En(),En(),En(),En(),En(),En(),En(),En(),En(),En(),En(),En(),En(),En(),En(),En(),En(),En(),En(),En(),En(),En(),En(),En(),En(),ha(),En(),En(),En(),En(),En(),En(),En(),En(),En(),En(),En(),En(),En(),En(),En(),En(),ha(),En(),ha(),En(),Bn=k(async(e,t,r)=>{let i,n=t.useHtmlLabels||es(at()?.htmlLabels);r?i=r:i="node default";let a=e.insert("g").attr("class",i).attr("id",t.domId||t.id),s=a.insert("g").attr("class","label").attr("style",Ou(t.labelStyle)),u;t.label===void 0?u="":u=typeof t.label=="string"?t.label:t.label[0];let h=await Kh(s,Da(N0(u),at()),{useHtmlLabels:n,width:t.width||at().flowchart?.wrappingWidth,cssClasses:"markdown-node-label",style:t.labelStyle,addSvgBackground:!!t.icon||!!t.img}),d=h.getBBox(),p=(t?.padding??0)/2;if(n){let g=h.children[0],y=Nr(h),m=g.getElementsByTagName("img");if(m){let x=u.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...m].map(_=>new Promise(E=>{function w(){if(_.style.display="flex",_.style.flexDirection="column",x){let C=at().fontSize?at().fontSize:window.getComputedStyle(document.body).fontSize,A=5,[M=ka.fontSize]=gf(C),N=M*A+"px";_.style.minWidth=N,_.style.maxWidth=N}else _.style.width="100%";E(_)}k(w,"setupImage"),setTimeout(()=>{_.complete&&w()}),_.addEventListener("error",w),_.addEventListener("load",w)})))}d=g.getBoundingClientRect(),y.attr("width",d.width),y.attr("height",d.height)}return n?s.attr("transform","translate("+-d.width/2+", "+-d.height/2+")"):s.attr("transform","translate(0, "+-d.height/2+")"),t.centerLabel&&s.attr("transform","translate("+-d.width/2+", "+-d.height/2+")"),s.insert("rect",":first-child"),{shapeSvg:a,bbox:d,halfPadding:p,label:s}},"labelHelper"),ND=k(async(e,t,r)=>{let i=r.useHtmlLabels||es(at()?.flowchart?.htmlLabels),n=e.insert("g").attr("class","label").attr("style",r.labelStyle||""),a=await Kh(n,Da(N0(t),at()),{useHtmlLabels:i,width:r.width||at()?.flowchart?.wrappingWidth,style:r.labelStyle,addSvgBackground:!!r.icon||!!r.img}),s=a.getBBox(),u=r.padding/2;if(es(at()?.flowchart?.htmlLabels)){let h=a.children[0],d=Nr(a);s=h.getBoundingClientRect(),d.attr("width",s.width),d.attr("height",s.height)}return i?n.attr("transform","translate("+-s.width/2+", "+-s.height/2+")"):n.attr("transform","translate(0, "+-s.height/2+")"),r.centerLabel&&n.attr("transform","translate("+-s.width/2+", "+-s.height/2+")"),n.insert("rect",":first-child"),{shapeSvg:e,bbox:s,halfPadding:u,label:n}},"insertLabel"),yn=k((e,t)=>{let r=t.node().getBBox();e.width=r.width,e.height=r.height},"updateNodeBounds"),Pn=k((e,t)=>(e.look==="handDrawn"?"rough-node":"node")+" "+e.cssClasses+" "+(t||""),"getNodeClasses"),k(Na,"createPathFromPoints"),k(nm,"generateFullSineWavePoints"),k(Fj,"generateCirclePoints"),ole=k((e,t)=>{var r=e.x,i=e.y,n=t.x-r,a=t.y-i,s=e.width/2,u=e.height/2,h,d;return Math.abs(a)*s>Math.abs(n)*u?(a<0&&(u=-u),h=a===0?0:u*n/a,d=u):(n<0&&(s=-s),h=s,d=n===0?0:s*a/n),{x:r+h,y:i+d}},"intersectRect"),Av=ole,k(Yse,"applyStyle"),k(qse,"addHtmlLabel"),lle=k(async(e,t,r,i)=>{let n=e||"";if(typeof n=="object"&&(n=n[0]),es(at().flowchart.htmlLabels)){n=n.replace(/\\n|\n/g,"<br />"),Ce.info("vertexText"+n);let a={isNode:i,label:N0(n).replace(/fa[blrs]?:fa-[\w-]+/g,s=>`<i class='${s.replace(":"," ")}'></i>`),labelStyle:t&&t.replace("fill:","color:")};return await qse(a)}else{let a=document.createElementNS("http://www.w3.org/2000/svg","text");a.setAttribute("style",t.replace("color:","fill:"));let s=[];typeof n=="string"?s=n.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(n)?s=n:s=[];for(let u of s){let h=document.createElementNS("http://www.w3.org/2000/svg","tspan");h.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),h.setAttribute("dy","1em"),h.setAttribute("x","0"),r?h.setAttribute("class","title-row"):h.setAttribute("class","row"),h.textContent=u.trim(),a.appendChild(h)}return a}},"createLabel"),am=lle,O0=k((e,t,r,i,n)=>["M",e+n,t,"H",e+r-n,"A",n,n,0,0,1,e+r,t+n,"V",t+i-n,"A",n,n,0,0,1,e+r-n,t+i,"H",e+n,"A",n,n,0,0,1,e,t+i-n,"V",t+n,"A",n,n,0,0,1,e+n,t,"Z"].join(" "),"createRoundedRectPathD"),ule=k(e=>{let{handDrawnSeed:t}=at();return{fill:e,hachureAngle:120,hachureGap:4,fillWeight:2,roughness:.7,stroke:e,seed:t}},"solidStateFill"),Mv=k(e=>{let t=hle([...e.cssCompiledStyles||[],...e.cssStyles||[]]);return{stylesMap:t,stylesArray:[...t]}},"compileStyles"),hle=k(e=>{let t=new Map;return e.forEach(r=>{let[i,n]=r.split(":");t.set(i.trim(),n?.trim())}),t},"styles2Map"),_n=k(e=>{let{stylesArray:t}=Mv(e),r=[],i=[],n=[],a=[];return t.forEach(s=>{let u=s[0];u==="color"||u==="font-size"||u==="font-family"||u==="font-weight"||u==="font-style"||u==="text-decoration"||u==="text-align"||u==="text-transform"||u==="line-height"||u==="letter-spacing"||u==="word-spacing"||u==="text-shadow"||u==="text-overflow"||u==="white-space"||u==="word-wrap"||u==="word-break"||u==="overflow-wrap"||u==="hyphens"?r.push(s.join(":")+" !important"):(i.push(s.join(":")+" !important"),u.includes("stroke")&&n.push(s.join(":")+" !important"),u==="fill"&&a.push(s.join(":")+" !important"))}),{labelStyles:r.join(";"),nodeStyles:i.join(";"),stylesArray:t,borderStyles:n,backgroundStyles:a}},"styles2String"),mn=k((e,t)=>{let{themeVariables:r,handDrawnSeed:i}=at(),{nodeBorder:n,mainBkg:a}=r,{stylesMap:s}=Mv(e);return Object.assign({roughness:.7,fill:s.get("fill")||a,fillStyle:"hachure",fillWeight:4,hachureGap:5.2,stroke:s.get("stroke")||n,seed:i,strokeWidth:s.get("stroke-width")?.replace("px","")||1.3,fillLineDash:[0,0]},t)},"userNodeOverrides"),Gj=k(async(e,t)=>{Ce.info("Creating subgraph rect for ",t.id,t);let r=at(),{themeVariables:i,handDrawnSeed:n}=r,{clusterBkg:a,clusterBorder:s}=i,{labelStyles:u,nodeStyles:h,borderStyles:d,backgroundStyles:p}=_n(t),g=e.insert("g").attr("class","cluster "+t.cssClasses).attr("id",t.id).attr("data-look",t.look),y=es(r.flowchart.htmlLabels),m=g.insert("g").attr("class","cluster-label "),x=await Kh(m,t.label,{style:t.labelStyle,useHtmlLabels:y,isNode:!0}),_=x.getBBox();if(es(r.flowchart.htmlLabels)){let O=x.children[0],L=Nr(x);_=O.getBoundingClientRect(),L.attr("width",_.width),L.attr("height",_.height)}let E=t.width<=_.width+t.padding?_.width+t.padding:t.width;t.width<=_.width+t.padding?t.diff=(E-t.width)/2-t.padding:t.diff=-t.padding;let w=t.height,C=t.x-E/2,A=t.y-w/2;Ce.trace("Data ",t,JSON.stringify(t));let M;if(t.look==="handDrawn"){let O=cn.svg(g),L=mn(t,{roughness:.7,fill:a,stroke:s,fillWeight:3,seed:n}),$=O.path(O0(C,A,E,w,0),L);M=g.insert(()=>(Ce.debug("Rough node insert CXC",$),$),":first-child"),M.select("path:nth-child(2)").attr("style",d.join(";")),M.select("path").attr("style",p.join(";").replace("fill","stroke"))}else M=g.insert("rect",":first-child"),M.attr("style",h).attr("rx",t.rx).attr("ry",t.ry).attr("x",C).attr("y",A).attr("width",E).attr("height",w);let{subGraphTitleTopMargin:N}=Xp(r);if(m.attr("transform",`translate(${t.x-_.width/2}, ${t.y-t.height/2+N})`),u){let O=m.select("span");O&&O.attr("style",u)}let B=M.node().getBBox();return t.offsetX=0,t.width=B.width,t.height=B.height,t.offsetY=_.height-t.padding/2,t.intersect=function(O){return Av(t,O)},{cluster:g,labelBBox:_}},"rect"),cle=k((e,t)=>{let r=e.insert("g").attr("class","note-cluster").attr("id",t.id),i=r.insert("rect",":first-child"),n=0*t.padding,a=n/2;i.attr("rx",t.rx).attr("ry",t.ry).attr("x",t.x-t.width/2-a).attr("y",t.y-t.height/2-a).attr("width",t.width+n).attr("height",t.height+n).attr("fill","none");let s=i.node().getBBox();return t.width=s.width,t.height=s.height,t.intersect=function(u){return Av(t,u)},{cluster:r,labelBBox:{width:0,height:0}}},"noteGroup"),dle=k(async(e,t)=>{let r=at(),{themeVariables:i,handDrawnSeed:n}=r,{altBackground:a,compositeBackground:s,compositeTitleBackground:u,nodeBorder:h}=i,d=e.insert("g").attr("class",t.cssClasses).attr("id",t.id).attr("data-id",t.id).attr("data-look",t.look),p=d.insert("g",":first-child"),g=d.insert("g").attr("class","cluster-label"),y=d.append("rect"),m=g.node().appendChild(await am(t.label,t.labelStyle,void 0,!0)),x=m.getBBox();if(es(r.flowchart.htmlLabels)){let $=m.children[0],G=Nr(m);x=$.getBoundingClientRect(),G.attr("width",x.width),G.attr("height",x.height)}let _=0*t.padding,E=_/2,w=(t.width<=x.width+t.padding?x.width+t.padding:t.width)+_;t.width<=x.width+t.padding?t.diff=(w-t.width)/2-t.padding:t.diff=-t.padding;let C=t.height+_,A=t.height+_-x.height-6,M=t.x-w/2,N=t.y-C/2;t.width=w;let B=t.y-t.height/2-E+x.height+2,O;if(t.look==="handDrawn"){let $=t.cssClasses.includes("statediagram-cluster-alt"),G=cn.svg(d),z=t.rx||t.ry?G.path(O0(M,N,w,C,10),{roughness:.7,fill:u,fillStyle:"solid",stroke:h,seed:n}):G.rectangle(M,N,w,C,{seed:n});O=d.insert(()=>z,":first-child");let F=G.rectangle(M,B,w,A,{fill:$?a:s,fillStyle:$?"hachure":"solid",stroke:h,seed:n});O=d.insert(()=>z,":first-child"),y=d.insert(()=>F)}else O=p.insert("rect",":first-child"),O.attr("class","outer").attr("x",M).attr("y",N).attr("width",w).attr("height",C).attr("data-look",t.look),y.attr("class","inner").attr("x",M).attr("y",B).attr("width",w).attr("height",A);g.attr("transform",`translate(${t.x-x.width/2}, ${N+1-(es(r.flowchart.htmlLabels)?0:3)})`);let L=O.node().getBBox();return t.height=L.height,t.offsetX=0,t.offsetY=x.height-t.padding/2,t.labelBBox=x,t.intersect=function($){return Av(t,$)},{cluster:d,labelBBox:x}},"roundedWithTitle"),ple=k(async(e,t)=>{Ce.info("Creating subgraph rect for ",t.id,t);let r=at(),{themeVariables:i,handDrawnSeed:n}=r,{clusterBkg:a,clusterBorder:s}=i,{labelStyles:u,nodeStyles:h,borderStyles:d,backgroundStyles:p}=_n(t),g=e.insert("g").attr("class","cluster "+t.cssClasses).attr("id",t.id).attr("data-look",t.look),y=es(r.flowchart.htmlLabels),m=g.insert("g").attr("class","cluster-label "),x=await Kh(m,t.label,{style:t.labelStyle,useHtmlLabels:y,isNode:!0,width:t.width}),_=x.getBBox();if(es(r.flowchart.htmlLabels)){let O=x.children[0],L=Nr(x);_=O.getBoundingClientRect(),L.attr("width",_.width),L.attr("height",_.height)}let E=t.width<=_.width+t.padding?_.width+t.padding:t.width;t.width<=_.width+t.padding?t.diff=(E-t.width)/2-t.padding:t.diff=-t.padding;let w=t.height,C=t.x-E/2,A=t.y-w/2;Ce.trace("Data ",t,JSON.stringify(t));let M;if(t.look==="handDrawn"){let O=cn.svg(g),L=mn(t,{roughness:.7,fill:a,stroke:s,fillWeight:4,seed:n}),$=O.path(O0(C,A,E,w,t.rx),L);M=g.insert(()=>(Ce.debug("Rough node insert CXC",$),$),":first-child"),M.select("path:nth-child(2)").attr("style",d.join(";")),M.select("path").attr("style",p.join(";").replace("fill","stroke"))}else M=g.insert("rect",":first-child"),M.attr("style",h).attr("rx",t.rx).attr("ry",t.ry).attr("x",C).attr("y",A).attr("width",E).attr("height",w);let{subGraphTitleTopMargin:N}=Xp(r);if(m.attr("transform",`translate(${t.x-_.width/2}, ${t.y-t.height/2+N})`),u){let O=m.select("span");O&&O.attr("style",u)}let B=M.node().getBBox();return t.offsetX=0,t.width=B.width,t.height=B.height,t.offsetY=_.height-t.padding/2,t.intersect=function(O){return Av(t,O)},{cluster:g,labelBBox:_}},"kanbanSection"),fle=k((e,t)=>{let r=at(),{themeVariables:i,handDrawnSeed:n}=r,{nodeBorder:a}=i,s=e.insert("g").attr("class",t.cssClasses).attr("id",t.id).attr("data-look",t.look),u=s.insert("g",":first-child"),h=0*t.padding,d=t.width+h;t.diff=-t.padding;let p=t.height+h,g=t.x-d/2,y=t.y-p/2;t.width=d;let m;if(t.look==="handDrawn"){let _=cn.svg(s).rectangle(g,y,d,p,{fill:"lightgrey",roughness:.5,strokeLineDash:[5],stroke:a,seed:n});m=s.insert(()=>_,":first-child")}else m=u.insert("rect",":first-child"),m.attr("class","divider").attr("x",g).attr("y",y).attr("width",d).attr("height",p).attr("data-look",t.look);let x=m.node().getBBox();return t.height=x.height,t.offsetX=0,t.offsetY=0,t.intersect=function(_){return Av(t,_)},{cluster:s,labelBBox:{}}},"divider"),gle=Gj,mle={rect:Gj,squareRect:gle,roundedWithTitle:dle,noteGroup:cle,divider:fle,kanbanSection:ple},Uj=new Map,OD=k(async(e,t)=>{let r=t.shape||"rect",i=await mle[r](e,t);return Uj.set(t.id,i),i},"insertCluster"),yle=k(()=>{Uj=new Map},"clear"),k(Xse,"intersectNode"),vle=Xse,k(Kse,"intersectEllipse"),jj=Kse,k(Zse,"intersectCircle"),xle=Zse,k(Qse,"intersectLine"),k($j,"sameSign"),ble=Qse,k(Jse,"intersectPolygon"),_le=Jse,tn={node:vle,circle:xle,ellipse:jj,polygon:_le,rect:Av},k(eoe,"anchor"),k(zj,"generateArcPoints"),k(toe,"bowTieRect"),k(mf,"insertPolygonShape"),k(roe,"card"),k(ioe,"choice"),k(noe,"circle"),k(aoe,"createLine"),k(soe,"crossedCircle"),k(yf,"generateCirclePoints"),k(ooe,"curlyBraceLeft"),k(vf,"generateCirclePoints"),k(loe,"curlyBraceRight"),k(Hl,"generateCirclePoints"),k(uoe,"curlyBraces"),k(hoe,"curvedTrapezoid"),wle=k((e,t,r,i,n,a)=>[`M${e},${t+a}`,`a${n},${a} 0,0,0 ${r},0`,`a${n},${a} 0,0,0 ${-r},0`,`l0,${i}`,`a${n},${a} 0,0,0 ${r},0`,`l0,${-i}`].join(" "),"createCylinderPathD"),kle=k((e,t,r,i,n,a)=>[`M${e},${t+a}`,`M${e+r},${t+a}`,`a${n},${a} 0,0,0 ${-r},0`,`l0,${i}`,`a${n},${a} 0,0,0 ${r},0`,`l0,${-i}`].join(" "),"createOuterCylinderPathD"),Tle=k((e,t,r,i,n,a)=>[`M${e-r/2},${-i/2}`,`a${n},${a} 0,0,0 ${r},0`].join(" "),"createInnerCylinderPathD"),k(coe,"cylinder"),k(doe,"dividedRectangle"),k(poe,"doublecircle"),k(foe,"filledCircle"),k(goe,"flippedTriangle"),k(moe,"forkJoin"),k(yoe,"halfRoundedRectangle"),Ele=k((e,t,r,i,n)=>[`M${e+n},${t}`,`L${e+r-n},${t}`,`L${e+r},${t-i/2}`,`L${e+r-n},${t-i}`,`L${e+n},${t-i}`,`L${e},${t-i/2}`,"Z"].join(" "),"createHexagonPathD"),k(voe,"hexagon"),k(xoe,"hourglass"),k(boe,"icon"),k(_oe,"iconCircle"),k(woe,"iconRounded"),k(koe,"iconSquare"),k(Toe,"imageSquare"),k(Eoe,"inv_trapezoid"),k(DD,"drawRect"),k(Coe,"labelRect"),k(Soe,"lean_left"),k(Aoe,"lean_right"),k(Moe,"lightningBolt"),Cle=k((e,t,r,i,n,a,s)=>[`M${e},${t+a}`,`a${n},${a} 0,0,0 ${r},0`,`a${n},${a} 0,0,0 ${-r},0`,`l0,${i}`,`a${n},${a} 0,0,0 ${r},0`,`l0,${-i}`,`M${e},${t+a+s}`,`a${n},${a} 0,0,0 ${r},0`].join(" "),"createCylinderPathD"),Sle=k((e,t,r,i,n,a,s)=>[`M${e},${t+a}`,`M${e+r},${t+a}`,`a${n},${a} 0,0,0 ${-r},0`,`l0,${i}`,`a${n},${a} 0,0,0 ${r},0`,`l0,${-i}`,`M${e},${t+a+s}`,`a${n},${a} 0,0,0 ${r},0`].join(" "),"createOuterCylinderPathD"),Ale=k((e,t,r,i,n,a)=>[`M${e-r/2},${-i/2}`,`a${n},${a} 0,0,0 ${r},0`].join(" "),"createInnerCylinderPathD"),k(Loe,"linedCylinder"),k(Roe,"linedWaveEdgedRect"),k(Doe,"multiRect"),k(Ioe,"multiWaveEdgedRectangle"),k(Noe,"note"),Mle=k((e,t,r)=>[`M${e+r/2},${t}`,`L${e+r},${t-r/2}`,`L${e+r/2},${t-r}`,`L${e},${t-r/2}`,"Z"].join(" "),"createDecisionBoxPathD"),k(Ooe,"question"),k(Boe,"rect_left_inv_arrow"),k(Poe,"rectWithTitle"),k(Foe,"roundedRect"),k($oe,"shadedProcess"),k(zoe,"slopedRect"),k(Goe,"squareRect"),k(Uoe,"stadium"),k(joe,"state"),k(Hoe,"stateEnd"),k(Voe,"stateStart"),k(Woe,"subroutine"),k(Yoe,"taggedRect"),k(qoe,"taggedWaveEdgedRectangle"),k(Xoe,"text"),Lle=k((e,t,r,i,n,a)=>`M${e},${t}
    a${n},${a} 0,0,1 0,${-i}
    l${r},0
    a${n},${a} 0,0,1 0,${i}
    M${r},${-i}
    a${n},${a} 0,0,0 0,${i}
    l${-r},0`,"createCylinderPathD"),Rle=k((e,t,r,i,n,a)=>[`M${e},${t}`,`M${e+r},${t}`,`a${n},${a} 0,0,0 0,${-i}`,`l${-r},0`,`a${n},${a} 0,0,0 0,${i}`,`l${r},0`].join(" "),"createOuterCylinderPathD"),Dle=k((e,t,r,i,n,a)=>[`M${e+r/2},${-i/2}`,`a${n},${a} 0,0,0 0,${i}`].join(" "),"createInnerCylinderPathD"),k(Koe,"tiltedCylinder"),k(Zoe,"trapezoid"),k(Qoe,"trapezoidalPentagon"),k(Joe,"triangle"),k(ele,"waveEdgedRectangle"),k(tle,"waveRectangle"),k(rle,"windowPane"),k(ile,"textHelper"),k(UC,"addText"),k(nle,"classBox"),Ile=k(e=>{switch(e){case"Very High":return"red";case"High":return"orange";case"Medium":return null;case"Low":return"blue";case"Very Low":return"lightblue"}},"colorFromPriority"),k(ale,"kanbanItem"),Nle=[{semanticName:"Process",name:"Rectangle",shortName:"rect",description:"Standard process shape",aliases:["proc","process","rectangle"],internalAliases:["squareRect"],handler:Goe},{semanticName:"Event",name:"Rounded Rectangle",shortName:"rounded",description:"Represents an event",aliases:["event"],internalAliases:["roundedRect"],handler:Foe},{semanticName:"Terminal Point",name:"Stadium",shortName:"stadium",description:"Terminal point",aliases:["terminal","pill"],handler:Uoe},{semanticName:"Subprocess",name:"Framed Rectangle",shortName:"fr-rect",description:"Subprocess",aliases:["subprocess","subproc","framed-rectangle","subroutine"],handler:Woe},{semanticName:"Database",name:"Cylinder",shortName:"cyl",description:"Database storage",aliases:["db","database","cylinder"],handler:coe},{semanticName:"Start",name:"Circle",shortName:"circle",description:"Starting point",aliases:["circ"],handler:noe},{semanticName:"Decision",name:"Diamond",shortName:"diam",description:"Decision-making step",aliases:["decision","diamond","question"],handler:Ooe},{semanticName:"Prepare Conditional",name:"Hexagon",shortName:"hex",description:"Preparation or condition step",aliases:["hexagon","prepare"],handler:voe},{semanticName:"Data Input/Output",name:"Lean Right",shortName:"lean-r",description:"Represents input or output",aliases:["lean-right","in-out"],internalAliases:["lean_right"],handler:Aoe},{semanticName:"Data Input/Output",name:"Lean Left",shortName:"lean-l",description:"Represents output or input",aliases:["lean-left","out-in"],internalAliases:["lean_left"],handler:Soe},{semanticName:"Priority Action",name:"Trapezoid Base Bottom",shortName:"trap-b",description:"Priority action",aliases:["priority","trapezoid-bottom","trapezoid"],handler:Zoe},{semanticName:"Manual Operation",name:"Trapezoid Base Top",shortName:"trap-t",description:"Represents a manual task",aliases:["manual","trapezoid-top","inv-trapezoid"],internalAliases:["inv_trapezoid"],handler:Eoe},{semanticName:"Stop",name:"Double Circle",shortName:"dbl-circ",description:"Represents a stop point",aliases:["double-circle"],internalAliases:["doublecircle"],handler:poe},{semanticName:"Text Block",name:"Text Block",shortName:"text",description:"Text block",handler:Xoe},{semanticName:"Card",name:"Notched Rectangle",shortName:"notch-rect",description:"Represents a card",aliases:["card","notched-rectangle"],handler:roe},{semanticName:"Lined/Shaded Process",name:"Lined Rectangle",shortName:"lin-rect",description:"Lined process shape",aliases:["lined-rectangle","lined-process","lin-proc","shaded-process"],handler:$oe},{semanticName:"Start",name:"Small Circle",shortName:"sm-circ",description:"Small starting point",aliases:["start","small-circle"],internalAliases:["stateStart"],handler:Voe},{semanticName:"Stop",name:"Framed Circle",shortName:"fr-circ",description:"Stop point",aliases:["stop","framed-circle"],internalAliases:["stateEnd"],handler:Hoe},{semanticName:"Fork/Join",name:"Filled Rectangle",shortName:"fork",description:"Fork or join in process flow",aliases:["join"],internalAliases:["forkJoin"],handler:moe},{semanticName:"Collate",name:"Hourglass",shortName:"hourglass",description:"Represents a collate operation",aliases:["hourglass","collate"],handler:xoe},{semanticName:"Comment",name:"Curly Brace",shortName:"brace",description:"Adds a comment",aliases:["comment","brace-l"],handler:ooe},{semanticName:"Comment Right",name:"Curly Brace",shortName:"brace-r",description:"Adds a comment",handler:loe},{semanticName:"Comment with braces on both sides",name:"Curly Braces",shortName:"braces",description:"Adds a comment",handler:uoe},{semanticName:"Com Link",name:"Lightning Bolt",shortName:"bolt",description:"Communication link",aliases:["com-link","lightning-bolt"],handler:Moe},{semanticName:"Document",name:"Document",shortName:"doc",description:"Represents a document",aliases:["doc","document"],handler:ele},{semanticName:"Delay",name:"Half-Rounded Rectangle",shortName:"delay",description:"Represents a delay",aliases:["half-rounded-rectangle"],handler:yoe},{semanticName:"Direct Access Storage",name:"Horizontal Cylinder",shortName:"h-cyl",description:"Direct access storage",aliases:["das","horizontal-cylinder"],handler:Koe},{semanticName:"Disk Storage",name:"Lined Cylinder",shortName:"lin-cyl",description:"Disk storage",aliases:["disk","lined-cylinder"],handler:Loe},{semanticName:"Display",name:"Curved Trapezoid",shortName:"curv-trap",description:"Represents a display",aliases:["curved-trapezoid","display"],handler:hoe},{semanticName:"Divided Process",name:"Divided Rectangle",shortName:"div-rect",description:"Divided process shape",aliases:["div-proc","divided-rectangle","divided-process"],handler:doe},{semanticName:"Extract",name:"Triangle",shortName:"tri",description:"Extraction process",aliases:["extract","triangle"],handler:Joe},{semanticName:"Internal Storage",name:"Window Pane",shortName:"win-pane",description:"Internal storage",aliases:["internal-storage","window-pane"],handler:rle},{semanticName:"Junction",name:"Filled Circle",shortName:"f-circ",description:"Junction point",aliases:["junction","filled-circle"],handler:foe},{semanticName:"Loop Limit",name:"Trapezoidal Pentagon",shortName:"notch-pent",description:"Loop limit step",aliases:["loop-limit","notched-pentagon"],handler:Qoe},{semanticName:"Manual File",name:"Flipped Triangle",shortName:"flip-tri",description:"Manual file operation",aliases:["manual-file","flipped-triangle"],handler:goe},{semanticName:"Manual Input",name:"Sloped Rectangle",shortName:"sl-rect",description:"Manual input step",aliases:["manual-input","sloped-rectangle"],handler:zoe},{semanticName:"Multi-Document",name:"Stacked Document",shortName:"docs",description:"Multiple documents",aliases:["documents","st-doc","stacked-document"],handler:Ioe},{semanticName:"Multi-Process",name:"Stacked Rectangle",shortName:"st-rect",description:"Multiple processes",aliases:["procs","processes","stacked-rectangle"],handler:Doe},{semanticName:"Stored Data",name:"Bow Tie Rectangle",shortName:"bow-rect",description:"Stored data",aliases:["stored-data","bow-tie-rectangle"],handler:toe},{semanticName:"Summary",name:"Crossed Circle",shortName:"cross-circ",description:"Summary",aliases:["summary","crossed-circle"],handler:soe},{semanticName:"Tagged Document",name:"Tagged Document",shortName:"tag-doc",description:"Tagged document",aliases:["tag-doc","tagged-document"],handler:qoe},{semanticName:"Tagged Process",name:"Tagged Rectangle",shortName:"tag-rect",description:"Tagged process",aliases:["tagged-rectangle","tag-proc","tagged-process"],handler:Yoe},{semanticName:"Paper Tape",name:"Flag",shortName:"flag",description:"Paper tape",aliases:["paper-tape"],handler:tle},{semanticName:"Odd",name:"Odd",shortName:"odd",description:"Odd shape",internalAliases:["rect_left_inv_arrow"],handler:Boe},{semanticName:"Lined Document",name:"Lined Document",shortName:"lin-doc",description:"Lined document",aliases:["lined-document"],handler:Roe}],Ole=k(()=>{let e=[...Object.entries({state:joe,choice:ioe,note:Noe,rectWithTitle:Poe,labelRect:Coe,iconSquare:koe,iconCircle:_oe,icon:boe,iconRounded:woe,imageSquare:Toe,anchor:eoe,kanbanItem:ale,classBox:nle}),...Nle.flatMap(t=>[t.shortName,..."aliases"in t?t.aliases:[],..."internalAliases"in t?t.internalAliases:[]].map(r=>[r,t.handler]))];return Object.fromEntries(e)},"generateShapeMap"),Hj=Ole(),k(sle,"isValidShape"),jC=new Map,k(ID,"insertNode"),Ble=k((e,t)=>{jC.set(t.id,e)},"setNodeElem"),Ple=k(()=>{jC.clear()},"clear"),BD=k(e=>{let t=jC.get(e.id);Ce.trace("Transforming node",e.diff,e,"translate("+(e.x-e.width/2-5)+", "+e.width/2+")");let r=8,i=e.diff||0;return e.clusterNode?t.attr("transform","translate("+(e.x+i-e.width/2)+", "+(e.y-e.height/2-r)+")"):t.attr("transform","translate("+e.x+", "+e.y+")"),i},"positionNode")});function HC(e,t){if(e===void 0||t===void 0)return{angle:0,deltaX:0,deltaY:0};e=Bs(e),t=Bs(t);let[r,i]=[e.x,e.y],[n,a]=[t.x,t.y],s=n-r,u=a-i;return{angle:Math.atan(u/s),deltaX:s,deltaY:u}}var Zh,Bs,Vj,xf=D(()=>{Qn(),Zh={aggregation:18,extension:18,composition:18,dependency:6,lollipop:13.5,arrow_point:4},k(HC,"calculateDeltaAndAngle"),Bs=k(e=>Array.isArray(e)?{x:e[0],y:e[1]}:e,"pointTransformer"),Vj=k(e=>({x:k(function(t,r,i){let n=0,a=Bs(i[0]).x<Bs(i[i.length-1]).x?"left":"right";if(r===0&&Object.hasOwn(Zh,e.arrowTypeStart)){let{angle:m,deltaX:x}=HC(i[0],i[1]);n=Zh[e.arrowTypeStart]*Math.cos(m)*(x>=0?1:-1)}else if(r===i.length-1&&Object.hasOwn(Zh,e.arrowTypeEnd)){let{angle:m,deltaX:x}=HC(i[i.length-1],i[i.length-2]);n=Zh[e.arrowTypeEnd]*Math.cos(m)*(x>=0?1:-1)}let s=Math.abs(Bs(t).x-Bs(i[i.length-1]).x),u=Math.abs(Bs(t).y-Bs(i[i.length-1]).y),h=Math.abs(Bs(t).x-Bs(i[0]).x),d=Math.abs(Bs(t).y-Bs(i[0]).y),p=Zh[e.arrowTypeStart],g=Zh[e.arrowTypeEnd],y=1;if(s<g&&s>0&&u<g){let m=g+y-s;m*=a==="right"?-1:1,n-=m}if(h<p&&h>0&&d<p){let m=p+y-h;m*=a==="right"?-1:1,n+=m}return Bs(t).x+n},"x"),y:k(function(t,r,i){let n=0,a=Bs(i[0]).y<Bs(i[i.length-1]).y?"down":"up";if(r===0&&Object.hasOwn(Zh,e.arrowTypeStart)){let{angle:m,deltaY:x}=HC(i[0],i[1]);n=Zh[e.arrowTypeStart]*Math.abs(Math.sin(m))*(x>=0?1:-1)}else if(r===i.length-1&&Object.hasOwn(Zh,e.arrowTypeEnd)){let{angle:m,deltaY:x}=HC(i[i.length-1],i[i.length-2]);n=Zh[e.arrowTypeEnd]*Math.abs(Math.sin(m))*(x>=0?1:-1)}let s=Math.abs(Bs(t).y-Bs(i[i.length-1]).y),u=Math.abs(Bs(t).x-Bs(i[i.length-1]).x),h=Math.abs(Bs(t).y-Bs(i[0]).y),d=Math.abs(Bs(t).x-Bs(i[0]).x),p=Zh[e.arrowTypeStart],g=Zh[e.arrowTypeEnd],y=1;if(s<g&&s>0&&u<g){let m=g+y-s;m*=a==="up"?-1:1,n-=m}if(h<p&&h>0&&d<p){let m=p+y-h;m*=a==="up"?-1:1,n+=m}return Bs(t).y+n},"y")}),"getLineFunctionsWithOffset")});function VC(e,t){at().flowchart.htmlLabels&&e&&(e.style.width=t.length*9+"px",e.style.height="12px")}function Fle(e){let t=[],r=[];for(let i=1;i<e.length-1;i++){let n=e[i-1],a=e[i],s=e[i+1];(n.x===a.x&&a.y===s.y&&Math.abs(a.x-s.x)>5&&Math.abs(a.y-n.y)>5||n.y===a.y&&a.x===s.x&&Math.abs(a.x-n.x)>5&&Math.abs(a.y-s.y)>5)&&(t.push(a),r.push(i))}return{cornerPoints:t,cornerPointPositions:r}}var $le,zle,Wj,WC,Tl,Gle,T_,Yj,qj,Ule,jle,Xj,Kj,Hle,Zj,Vle,Wle,Yle,qle,Xle,Kle,Zle,Qle,Jle,eue,tue,Qj,sm=D(()=>{B0(),xf(),uh(),ch(),Os(),Qn(),ha(),En(),$le=k((e,t,r,i,n)=>{t.arrowTypeStart&&Wj(e,"start",t.arrowTypeStart,r,i,n),t.arrowTypeEnd&&Wj(e,"end",t.arrowTypeEnd,r,i,n)},"addEdgeMarkers"),zle={arrow_cross:"cross",arrow_point:"point",arrow_barb:"barb",arrow_circle:"circle",aggregation:"aggregation",extension:"extension",composition:"composition",dependency:"dependency",lollipop:"lollipop"},Wj=k((e,t,r,i,n,a)=>{let s=zle[r];if(!s){Ce.warn(`Unknown arrow type: ${r}`);return}let u=t==="start"?"Start":"End";e.attr(`marker-${t}`,`url(${i}#${n}_${a}-${s}${u})`)},"addEdgeMarker"),WC=new Map,Tl=new Map,Gle=k(()=>{WC.clear(),Tl.clear()},"clear"),T_=k(e=>e?e.reduce((t,r)=>t+";"+r,""):"","getLabelStyles"),Yj=k(async(e,t)=>{let r=es(at().flowchart.htmlLabels),i=await Kh(e,t.label,{style:T_(t.labelStyle),useHtmlLabels:r,addSvgBackground:!0,isNode:!1});Ce.info("abc82",t,t.labelType);let n=e.insert("g").attr("class","edgeLabel"),a=n.insert("g").attr("class","label");a.node().appendChild(i);let s=i.getBBox();if(r){let h=i.children[0],d=Nr(i);s=h.getBoundingClientRect(),d.attr("width",s.width),d.attr("height",s.height)}a.attr("transform","translate("+-s.width/2+", "+-s.height/2+")"),WC.set(t.id,n),t.width=s.width,t.height=s.height;let u;if(t.startLabelLeft){let h=await am(t.startLabelLeft,T_(t.labelStyle)),d=e.insert("g").attr("class","edgeTerminals"),p=d.insert("g").attr("class","inner");u=p.node().appendChild(h);let g=h.getBBox();p.attr("transform","translate("+-g.width/2+", "+-g.height/2+")"),Tl.get(t.id)||Tl.set(t.id,{}),Tl.get(t.id).startLeft=d,VC(u,t.startLabelLeft)}if(t.startLabelRight){let h=await am(t.startLabelRight,T_(t.labelStyle)),d=e.insert("g").attr("class","edgeTerminals"),p=d.insert("g").attr("class","inner");u=d.node().appendChild(h),p.node().appendChild(h);let g=h.getBBox();p.attr("transform","translate("+-g.width/2+", "+-g.height/2+")"),Tl.get(t.id)||Tl.set(t.id,{}),Tl.get(t.id).startRight=d,VC(u,t.startLabelRight)}if(t.endLabelLeft){let h=await am(t.endLabelLeft,T_(t.labelStyle)),d=e.insert("g").attr("class","edgeTerminals"),p=d.insert("g").attr("class","inner");u=p.node().appendChild(h);let g=h.getBBox();p.attr("transform","translate("+-g.width/2+", "+-g.height/2+")"),d.node().appendChild(h),Tl.get(t.id)||Tl.set(t.id,{}),Tl.get(t.id).endLeft=d,VC(u,t.endLabelLeft)}if(t.endLabelRight){let h=await am(t.endLabelRight,T_(t.labelStyle)),d=e.insert("g").attr("class","edgeTerminals"),p=d.insert("g").attr("class","inner");u=p.node().appendChild(h);let g=h.getBBox();p.attr("transform","translate("+-g.width/2+", "+-g.height/2+")"),d.node().appendChild(h),Tl.get(t.id)||Tl.set(t.id,{}),Tl.get(t.id).endRight=d,VC(u,t.endLabelRight)}return i},"insertEdgeLabel"),k(VC,"setTerminalWidth"),qj=k((e,t)=>{Ce.debug("Moving label abc88 ",e.id,e.label,WC.get(e.id),t);let r=t.updatedPath?t.updatedPath:t.originalPath,i=at(),{subGraphTitleTotalMargin:n}=Xp(i);if(e.label){let a=WC.get(e.id),s=e.x,u=e.y;if(r){let h=qn.calcLabelPosition(r);Ce.debug("Moving label "+e.label+" from (",s,",",u,") to (",h.x,",",h.y,") abc88"),t.updatedPath&&(s=h.x,u=h.y)}a.attr("transform",`translate(${s}, ${u+n/2})`)}if(e.startLabelLeft){let a=Tl.get(e.id).startLeft,s=e.x,u=e.y;if(r){let h=qn.calcTerminalLabelPosition(e.arrowTypeStart?10:0,"start_left",r);s=h.x,u=h.y}a.attr("transform",`translate(${s}, ${u})`)}if(e.startLabelRight){let a=Tl.get(e.id).startRight,s=e.x,u=e.y;if(r){let h=qn.calcTerminalLabelPosition(e.arrowTypeStart?10:0,"start_right",r);s=h.x,u=h.y}a.attr("transform",`translate(${s}, ${u})`)}if(e.endLabelLeft){let a=Tl.get(e.id).endLeft,s=e.x,u=e.y;if(r){let h=qn.calcTerminalLabelPosition(e.arrowTypeEnd?10:0,"end_left",r);s=h.x,u=h.y}a.attr("transform",`translate(${s}, ${u})`)}if(e.endLabelRight){let a=Tl.get(e.id).endRight,s=e.x,u=e.y;if(r){let h=qn.calcTerminalLabelPosition(e.arrowTypeEnd?10:0,"end_right",r);s=h.x,u=h.y}a.attr("transform",`translate(${s}, ${u})`)}},"positionEdgeLabel"),Ule=k((e,t)=>{let r=e.x,i=e.y,n=Math.abs(t.x-r),a=Math.abs(t.y-i),s=e.width/2,u=e.height/2;return n>=s||a>=u},"outsideNode"),jle=k((e,t,r)=>{Ce.debug(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(t)}
  insidePoint : ${JSON.stringify(r)}
  node        : x:${e.x} y:${e.y} w:${e.width} h:${e.height}`);let i=e.x,n=e.y,a=Math.abs(i-r.x),s=e.width/2,u=r.x<t.x?s-a:s+a,h=e.height/2,d=Math.abs(t.y-r.y),p=Math.abs(t.x-r.x);if(Math.abs(n-t.y)*s>Math.abs(i-t.x)*h){let g=r.y<t.y?t.y-h-n:n-h-t.y;u=p*g/d;let y={x:r.x<t.x?r.x+u:r.x-p+u,y:r.y<t.y?r.y+d-g:r.y-d+g};return u===0&&(y.x=t.x,y.y=t.y),p===0&&(y.x=t.x),d===0&&(y.y=t.y),Ce.debug(`abc89 top/bottom calc, Q ${d}, q ${g}, R ${p}, r ${u}`,y),y}else{r.x<t.x?u=t.x-s-i:u=i-s-t.x;let g=d*u/p,y=r.x<t.x?r.x+p-u:r.x-p+u,m=r.y<t.y?r.y+g:r.y-g;return Ce.debug(`sides calc abc89, Q ${d}, q ${g}, R ${p}, r ${u}`,{_x:y,_y:m}),u===0&&(y=t.x,m=t.y),p===0&&(y=t.x),d===0&&(m=t.y),{x:y,y:m}}},"intersection"),Xj=k((e,t)=>{Ce.warn("abc88 cutPathAtIntersect",e,t);let r=[],i=e[0],n=!1;return e.forEach(a=>{if(Ce.info("abc88 checking point",a,t),!Ule(t,a)&&!n){let s=jle(t,i,a);Ce.debug("abc88 inside",a,i,s),Ce.debug("abc88 intersection",s,t);let u=!1;r.forEach(h=>{u=u||h.x===s.x&&h.y===s.y}),r.some(h=>h.x===s.x&&h.y===s.y)?Ce.warn("abc88 no intersect",s,r):r.push(s),n=!0}else Ce.warn("abc88 outside",a,i),i=a,n||r.push(a)}),Ce.debug("returning points",r),r},"cutPathAtIntersect"),k(Fle,"extractCornerPoints"),Kj=k(function(e,t,r){let i=t.x-e.x,n=t.y-e.y,a=Math.sqrt(i*i+n*n),s=r/a;return{x:t.x-s*i,y:t.y-s*n}},"findAdjacentPoint"),Hle=k(function(e){let{cornerPointPositions:t}=Fle(e),r=[];for(let i=0;i<e.length;i++)if(t.includes(i)){let n=e[i-1],a=e[i+1],s=e[i],u=Kj(n,s,5),h=Kj(a,s,5),d=h.x-u.x,p=h.y-u.y;r.push(u);let g=Math.sqrt(2)*2,y={x:s.x,y:s.y};if(Math.abs(a.x-n.x)>10&&Math.abs(a.y-n.y)>=10){Ce.debug("Corner point fixing",Math.abs(a.x-n.x),Math.abs(a.y-n.y));let m=5;s.x===u.x?y={x:d<0?u.x-m+g:u.x+m-g,y:p<0?u.y-g:u.y+g}:y={x:d<0?u.x-g:u.x+g,y:p<0?u.y-m+g:u.y+m-g}}else Ce.debug("Corner point skipping fixing",Math.abs(a.x-n.x),Math.abs(a.y-n.y));r.push(y,h)}else r.push(e[i]);return r},"fixCorners"),Zj=k(function(e,t,r,i,n,a,s){let{handDrawnSeed:u}=at(),h=t.points,d=!1,p=n;var g=a;g.intersect&&p.intersect&&(h=h.slice(1,t.points.length-1),h.unshift(p.intersect(h[0])),Ce.debug("Last point APA12",t.start,"-->",t.end,h[h.length-1],g,g.intersect(h[h.length-1])),h.push(g.intersect(h[h.length-1]))),t.toCluster&&(Ce.info("to cluster abc88",r.get(t.toCluster)),h=Xj(t.points,r.get(t.toCluster).node),d=!0),t.fromCluster&&(Ce.debug("from cluster abc88",r.get(t.fromCluster),JSON.stringify(h,null,2)),h=Xj(h.reverse(),r.get(t.fromCluster).node).reverse(),d=!0);let y=h.filter(O=>!Number.isNaN(O.y));y=Hle(y);let m=cC;t.curve&&(m=t.curve);let{x,y:_}=Vj(t),E=vv().x(x).y(_).curve(m),w;switch(t.thickness){case"normal":w="edge-thickness-normal";break;case"thick":w="edge-thickness-thick";break;case"invisible":w="edge-thickness-invisible";break;default:w="edge-thickness-normal"}switch(t.pattern){case"solid":w+=" edge-pattern-solid";break;case"dotted":w+=" edge-pattern-dotted";break;case"dashed":w+=" edge-pattern-dashed";break;default:w+=" edge-pattern-solid"}let C,A=E(y),M=Array.isArray(t.style)?t.style:[t.style];if(t.look==="handDrawn"){let O=cn.svg(e);Object.assign([],y);let L=O.path(A,{roughness:.3,seed:u});w+=" transition",C=Nr(L).select("path").attr("id",t.id).attr("class"," "+w+(t.classes?" "+t.classes:"")).attr("style",M?M.reduce((G,z)=>G+";"+z,""):"");let $=C.attr("d");C.attr("d",$),e.node().appendChild(C.node())}else C=e.append("path").attr("d",A).attr("id",t.id).attr("class"," "+w+(t.classes?" "+t.classes:"")).attr("style",M?M.reduce((O,L)=>O+";"+L,""):"");let N="";(at().flowchart.arrowMarkerAbsolute||at().state.arrowMarkerAbsolute)&&(N=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,N=N.replace(/\(/g,"\\(").replace(/\)/g,"\\)")),Ce.info("arrowTypeStart",t.arrowTypeStart),Ce.info("arrowTypeEnd",t.arrowTypeEnd),$le(C,t,N,s,i);let B={};return d&&(B.updatedPath=h),B.originalPath=t.points,B},"insertEdge"),Vle=k((e,t,r,i)=>{t.forEach(n=>{tue[n](e,r,i)})},"insertMarkers"),Wle=k((e,t,r)=>{Ce.trace("Making markers for ",r),e.append("defs").append("marker").attr("id",r+"_"+t+"-extensionStart").attr("class","marker extension "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-extensionEnd").attr("class","marker extension "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},"extension"),Yle=k((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-compositionStart").attr("class","marker composition "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-compositionEnd").attr("class","marker composition "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"composition"),qle=k((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-aggregationStart").attr("class","marker aggregation "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-aggregationEnd").attr("class","marker aggregation "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"aggregation"),Xle=k((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-dependencyStart").attr("class","marker dependency "+t).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-dependencyEnd").attr("class","marker dependency "+t).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"dependency"),Kle=k((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-lollipopStart").attr("class","marker lollipop "+t).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),e.append("defs").append("marker").attr("id",r+"_"+t+"-lollipopEnd").attr("class","marker lollipop "+t).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},"lollipop"),Zle=k((e,t,r)=>{e.append("marker").attr("id",r+"_"+t+"-pointEnd").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),e.append("marker").attr("id",r+"_"+t+"-pointStart").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"point"),Qle=k((e,t,r)=>{e.append("marker").attr("id",r+"_"+t+"-circleEnd").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),e.append("marker").attr("id",r+"_"+t+"-circleStart").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"circle"),Jle=k((e,t,r)=>{e.append("marker").attr("id",r+"_"+t+"-crossEnd").attr("class","marker cross "+t).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),e.append("marker").attr("id",r+"_"+t+"-crossStart").attr("class","marker cross "+t).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},"cross"),eue=k((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","userSpaceOnUse").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"barb"),tue={extension:Wle,composition:Yle,aggregation:qle,dependency:Xle,lollipop:Kle,point:Zle,circle:Qle,cross:Jle,barb:eue},Qj=Vle});function bFe(e){return typeof e=="symbol"||qh(e)&&D0(e)==rue}var rue,om,E_=D(()=>{Y1(),Md(),rue="[object Symbol]",om=bFe});function _Fe(e,t){for(var r=-1,i=e==null?0:e.length,n=Array(i);++r<i;)n[r]=t(e[r],r,e);return n}var bf,C_=D(()=>{bf=_Fe});function iue(e){if(typeof e=="string")return e;if(va(e))return bf(e,iue)+"";if(om(e))return eH?eH.call(e):"";var t=e+"";return t=="0"&&1/e==-nue?"-0":t}var nue,Jj,eH,aue,wFe=D(()=>{r_(),C_(),Js(),E_(),nue=1/0,Jj=Wh?Wh.prototype:void 0,eH=Jj?Jj.toString:void 0,aue=iue});function kFe(e){for(var t=e.length;t--&&sue.test(e.charAt(t)););return t}var sue,oue,TFe=D(()=>{sue=/\s/,oue=kFe});function EFe(e){return e&&e.slice(0,oue(e)+1).replace(lue,"")}var lue,uue,CFe=D(()=>{TFe(),lue=/^\s+/,uue=EFe});function SFe(e){if(typeof e=="number")return e;if(om(e))return tH;if(Nu(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Nu(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=uue(e);var r=cue.test(e);return r||due.test(e)?pue(e.slice(2),r?2:8):hue.test(e)?tH:+e}var tH,hue,cue,due,pue,fue,AFe=D(()=>{CFe(),Ic(),E_(),tH=NaN,hue=/^[-+]0x[0-9a-f]+$/i,cue=/^0b[01]+$/i,due=/^0o[0-7]+$/i,pue=parseInt,fue=SFe});function MFe(e){if(!e)return e===0?e:0;if(e=fue(e),e===rH||e===-rH){var t=e<0?-1:1;return t*gue}return e===e?e:0}var rH,gue,YC,mue=D(()=>{AFe(),rH=1/0,gue=17976931348623157e292,YC=MFe});function LFe(e){var t=YC(e),r=t%1;return t===t?r?t-r:t:0}var S_,qC=D(()=>{mue(),S_=LFe}),yue,PD,RFe=D(()=>{xv(),Ad(),yue=X1(Dc,"WeakMap"),PD=yue});function DFe(){}var Go,vue=D(()=>{Go=DFe});function IFe(e,t){for(var r=-1,i=e==null?0:e.length;++r<i&&t(e[r],r,e)!==!1;);return e}var iH,xue=D(()=>{iH=IFe});function NFe(e,t,r,i){for(var n=e.length,a=r+(i?1:-1);i?a--:++a<n;)if(t(e[a],a,e))return a;return-1}var nH,bue=D(()=>{nH=NFe});function OFe(e){return e!==e}var _ue,BFe=D(()=>{_ue=OFe});function PFe(e,t,r){for(var i=r-1,n=e.length;++i<n;)if(e[i]===t)return i;return-1}var wue,FFe=D(()=>{wue=PFe});function $Fe(e,t,r){return t===t?wue(e,t,r):nH(e,_ue,r)}var FD,aH=D(()=>{bue(),BFe(),FFe(),FD=$Fe});function zFe(e,t){var r=e==null?0:e.length;return!!r&&FD(e,t,0)>-1}var sH,kue=D(()=>{aH(),sH=zFe}),Tue,Eue,GFe=D(()=>{$ie(),Tue=FU(Object.keys,Object),Eue=Tue});function UFe(e){if(!d_(e))return Eue(e);var t=[];for(var r in Object(e))Sue.call(e,r)&&r!="constructor"&&t.push(r);return t}var Cue,Sue,$D,oH=D(()=>{bC(),GFe(),Cue=Object.prototype,Sue=Cue.hasOwnProperty,$D=UFe});function jFe(e){return Nc(e)?ZU(e):$D(e)}var Uo,_f=D(()=>{Gne(),oH(),Ld(),Uo=jFe}),Aue,Mue,Lue,ph,HFe=D(()=>{EC(),m_(),oae(),Ld(),bC(),_f(),Aue=Object.prototype,Mue=Aue.hasOwnProperty,Lue=tj(function(e,t){if(d_(t)||Nc(t)){Ev(t,Uo(t),e);return}for(var r in t)Mue.call(t,r)&&g_(e,r,t[r])}),ph=Lue});function VFe(e,t){if(va(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||om(e)?!0:Due.test(e)||!Rue.test(e)||t!=null&&e in Object(t)}var Rue,Due,zD,lH=D(()=>{Js(),E_(),Rue=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Due=/^\w*$/,zD=VFe});function WFe(e){var t=mC(e,function(i){return r.size===Iue&&r.clear(),i}),r=t.cache;return t}var Iue,Nue,YFe=D(()=>{xie(),Iue=500,Nue=WFe}),Oue,Bue,Pue,Fue,qFe=D(()=>{YFe(),Oue=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Bue=/\\(\\)?/g,Pue=Nue(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Oue,function(r,i,n,a){t.push(n?a.replace(Bue,"$1"):i||r)}),t}),Fue=Pue});function XFe(e){return e==null?"":aue(e)}var uH,$ue=D(()=>{wFe(),uH=XFe});function KFe(e,t){return va(e)?e:zD(e,t)?[e]:Fue(uH(e))}var XC,GD=D(()=>{Js(),lH(),qFe(),$ue(),XC=KFe});function ZFe(e){if(typeof e=="string"||om(e))return e;var t=e+"";return t=="0"&&1/e==-zue?"-0":t}var zue,A_,KC=D(()=>{E_(),zue=1/0,A_=ZFe});function QFe(e,t){t=XC(t,e);for(var r=0,i=t.length;e!=null&&r<i;)e=e[A_(t[r++])];return r&&r==i?e:void 0}var ZC,UD=D(()=>{GD(),KC(),ZC=QFe});function JFe(e,t,r){var i=e==null?void 0:ZC(e,t);return i===void 0?r:i}var Gue,e$e=D(()=>{UD(),Gue=JFe});function t$e(e,t){for(var r=-1,i=t.length,n=e.length;++r<i;)e[n+r]=t[r];return e}var jD,hH=D(()=>{jD=t$e});function r$e(e){return va(e)||wv(e)||!!(cH&&e&&e[cH])}var cH,Uue,i$e=D(()=>{r_(),_C(),Js(),cH=Wh?Wh.isConcatSpreadable:void 0,Uue=r$e});function jue(e,t,r,i,n){var a=-1,s=e.length;for(r||(r=Uue),n||(n=[]);++a<s;){var u=e[a];t>0&&r(u)?t>1?jue(u,t-1,r,i,n):jD(n,u):i||(n[n.length]=u)}return n}var M_,QC=D(()=>{hH(),i$e(),M_=jue});function n$e(e){var t=e==null?0:e.length;return t?M_(e,1):[]}var sl,dH=D(()=>{QC(),sl=n$e});function a$e(e){return ej(JU(e,void 0,sl),e+"")}var Hue,s$e=D(()=>{dH(),Zne(),sae(),Hue=a$e});function o$e(e,t,r){var i=-1,n=e.length;t<0&&(t=-t>n?0:n+t),r=r>n?n:r,r<0&&(r+=n),n=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(n);++i<n;)a[i]=e[i+t];return a}var pH,Vue=D(()=>{pH=o$e});function l$e(e){return Jue.test(e)}var Wue,Yue,que,Xue,Kue,Zue,Que,Jue,ehe,u$e=D(()=>{Wue="\\ud800-\\udfff",Yue="\\u0300-\\u036f",que="\\ufe20-\\ufe2f",Xue="\\u20d0-\\u20ff",Kue=Yue+que+Xue,Zue="\\ufe0e\\ufe0f",Que="\\u200d",Jue=RegExp("["+Que+Wue+Kue+Zue+"]"),ehe=l$e});function h$e(e,t,r,i){var n=-1,a=e==null?0:e.length;for(i&&a&&(r=e[++n]);++n<a;)r=t(r,e[n],n,e);return r}var the,c$e=D(()=>{the=h$e});function d$e(e,t){return e&&Ev(t,Uo(t),e)}var rhe,p$e=D(()=>{m_(),_f(),rhe=d$e});function f$e(e,t){return e&&Ev(t,K1(t),e)}var ihe,g$e=D(()=>{m_(),Cv(),ihe=f$e});function m$e(e,t){for(var r=-1,i=e==null?0:e.length,n=0,a=[];++r<i;){var s=e[r];t(s,r,e)&&(a[n++]=s)}return a}var HD,fH=D(()=>{HD=m$e});function y$e(){return[]}var gH,nhe=D(()=>{gH=y$e}),ahe,she,mH,ohe,VD,yH=D(()=>{fH(),nhe(),ahe=Object.prototype,she=ahe.propertyIsEnumerable,mH=Object.getOwnPropertySymbols,ohe=mH?function(e){return e==null?[]:(e=Object(e),HD(mH(e),function(t){return she.call(e,t)}))}:gH,VD=ohe});function v$e(e,t){return Ev(e,VD(e),t)}var lhe,x$e=D(()=>{m_(),yH(),lhe=v$e}),uhe,hhe,vH,che=D(()=>{hH(),$U(),yH(),nhe(),uhe=Object.getOwnPropertySymbols,hhe=uhe?function(e){for(var t=[];e;)jD(t,VD(e)),e=rD(e);return t}:gH,vH=hhe});function b$e(e,t){return Ev(e,vH(e),t)}var dhe,_$e=D(()=>{m_(),che(),dhe=b$e});function w$e(e,t,r){var i=t(e);return va(e)?i:jD(i,r(e))}var xH,phe=D(()=>{hH(),Js(),xH=w$e});function k$e(e){return xH(e,Uo,VD)}var WD,fhe=D(()=>{phe(),yH(),_f(),WD=k$e});function T$e(e){return xH(e,K1,vH)}var bH,ghe=D(()=>{phe(),che(),Cv(),bH=T$e}),mhe,YD,E$e=D(()=>{xv(),Ad(),mhe=X1(Dc,"DataView"),YD=mhe}),yhe,qD,C$e=D(()=>{xv(),Ad(),yhe=X1(Dc,"Promise"),qD=yhe}),vhe,Lv,xhe=D(()=>{xv(),Ad(),vhe=X1(Dc,"Set"),Lv=vhe}),_H,bhe,wH,kH,TH,EH,_he,whe,khe,The,Ehe,lm,um,L_=D(()=>{E$e(),EU(),C$e(),xhe(),RFe(),Y1(),Bre(),_H="[object Map]",bhe="[object Object]",wH="[object Promise]",kH="[object Set]",TH="[object WeakMap]",EH="[object DataView]",_he=q1(YD),whe=q1(l_),khe=q1(qD),The=q1(Lv),Ehe=q1(PD),lm=D0,(YD&&lm(new YD(new ArrayBuffer(1)))!=EH||l_&&lm(new l_)!=_H||qD&&lm(qD.resolve())!=wH||Lv&&lm(new Lv)!=kH||PD&&lm(new PD)!=TH)&&(lm=function(e){var t=D0(e),r=t==bhe?e.constructor:void 0,i=r?q1(r):"";if(i)switch(i){case _he:return EH;case whe:return _H;case khe:return wH;case The:return kH;case Ehe:return TH}return t}),um=lm});function S$e(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&She.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var Che,She,Ahe,A$e=D(()=>{Che=Object.prototype,She=Che.hasOwnProperty,Ahe=S$e});function M$e(e,t){var r=t?tD(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var Mhe,L$e=D(()=>{NU(),Mhe=M$e});function R$e(e){var t=new e.constructor(e.source,Lhe.exec(e));return t.lastIndex=e.lastIndex,t}var Lhe,Rhe,D$e=D(()=>{Lhe=/\w*$/,Rhe=R$e});function I$e(e){return SH?Object(SH.call(e)):{}}var CH,SH,Dhe,N$e=D(()=>{r_(),CH=Wh?Wh.prototype:void 0,SH=CH?CH.valueOf:void 0,Dhe=I$e});function O$e(e,t,r){var i=e.constructor;switch(t){case Ghe:return tD(e);case Ihe:case Nhe:return new i(+e);case Uhe:return Mhe(e,r);case jhe:case Hhe:case Vhe:case Whe:case Yhe:case qhe:case Xhe:case Khe:case Zhe:return OU(e,r);case Ohe:return new i;case Bhe:case $he:return new i(e);case Phe:return Rhe(e);case Fhe:return new i;case zhe:return Dhe(e)}}var Ihe,Nhe,Ohe,Bhe,Phe,Fhe,$he,zhe,Ghe,Uhe,jhe,Hhe,Vhe,Whe,Yhe,qhe,Xhe,Khe,Zhe,Qhe,B$e=D(()=>{NU(),L$e(),D$e(),N$e(),Oie(),Ihe="[object Boolean]",Nhe="[object Date]",Ohe="[object Map]",Bhe="[object Number]",Phe="[object RegExp]",Fhe="[object Set]",$he="[object String]",zhe="[object Symbol]",Ghe="[object ArrayBuffer]",Uhe="[object DataView]",jhe="[object Float32Array]",Hhe="[object Float64Array]",Vhe="[object Int8Array]",Whe="[object Int16Array]",Yhe="[object Int32Array]",qhe="[object Uint8Array]",Xhe="[object Uint8ClampedArray]",Khe="[object Uint16Array]",Zhe="[object Uint32Array]",Qhe=O$e});function P$e(e){return qh(e)&&um(e)==Jhe}var Jhe,ece,F$e=D(()=>{L_(),Md(),Jhe="[object Map]",ece=P$e}),AH,tce,rce,$$e=D(()=>{F$e(),p_(),aD(),AH=df&&df.isMap,tce=AH?Tv(AH):ece,rce=tce});function z$e(e){return qh(e)&&um(e)==ice}var ice,nce,G$e=D(()=>{L_(),Md(),ice="[object Set]",nce=z$e}),MH,ace,sce,U$e=D(()=>{G$e(),p_(),aD(),MH=df&&df.isSet,ace=MH?Tv(MH):nce,sce=ace});function XD(e,t,r,i,n,a){var s,u=t&oce,h=t&lce,d=t&uce;if(r&&(s=n?r(e,i,n,a):r(e)),s!==void 0)return s;if(!Nu(e))return e;var p=va(e);if(p){if(s=Ahe(e),!u)return BU(e,s)}else{var g=um(e),y=g==RH||g==fce;if(kv(e))return IU(e,u);if(g==DH||g==LH||y&&!n){if(s=h||y?{}:zU(e),!u)return h?dhe(e,ihe(s,e)):lhe(e,rhe(s,e))}else{if(!xs[g])return n?e:{};s=Qhe(e,g,u)}}a||(a=new _v);var m=a.get(e);if(m)return m;a.set(e,s),sce(e)?e.forEach(function(E){s.add(XD(E,t,r,E,e,a))}):rce(e)&&e.forEach(function(E,w){s.set(w,XD(E,t,r,w,e,a))});var x=d?h?bH:WD:h?K1:Uo,_=p?void 0:x(e);return iH(_||e,function(E,w){_&&(w=E,E=e[w]),g_(s,w,XD(E,t,r,w,e,a))}),s}var oce,lce,uce,LH,hce,cce,dce,pce,RH,fce,gce,mce,DH,yce,vce,xce,bce,_ce,wce,kce,Tce,Ece,Cce,Sce,Ace,Mce,Lce,Rce,Dce,xs,IH,Ice=D(()=>{QR(),xue(),EC(),p$e(),g$e(),Die(),Bie(),x$e(),_$e(),fhe(),ghe(),L_(),A$e(),B$e(),Uie(),Js(),kC(),$$e(),Ic(),U$e(),_f(),Cv(),oce=1,lce=2,uce=4,LH="[object Arguments]",hce="[object Array]",cce="[object Boolean]",dce="[object Date]",pce="[object Error]",RH="[object Function]",fce="[object GeneratorFunction]",gce="[object Map]",mce="[object Number]",DH="[object Object]",yce="[object RegExp]",vce="[object Set]",xce="[object String]",bce="[object Symbol]",_ce="[object WeakMap]",wce="[object ArrayBuffer]",kce="[object DataView]",Tce="[object Float32Array]",Ece="[object Float64Array]",Cce="[object Int8Array]",Sce="[object Int16Array]",Ace="[object Int32Array]",Mce="[object Uint8Array]",Lce="[object Uint8ClampedArray]",Rce="[object Uint16Array]",Dce="[object Uint32Array]",xs={},xs[LH]=xs[hce]=xs[wce]=xs[kce]=xs[cce]=xs[dce]=xs[Tce]=xs[Ece]=xs[Cce]=xs[Sce]=xs[Ace]=xs[gce]=xs[mce]=xs[DH]=xs[yce]=xs[vce]=xs[xce]=xs[bce]=xs[Mce]=xs[Lce]=xs[Rce]=xs[Dce]=!0,xs[pce]=xs[RH]=xs[_ce]=!1,IH=XD});function j$e(e){return IH(e,Nce)}var Nce,jo,Oce=D(()=>{Ice(),Nce=4,jo=j$e});function H$e(e){return IH(e,Bce|Pce)}var Bce,Pce,Fce,V$e=D(()=>{Ice(),Bce=1,Pce=4,Fce=H$e});function W$e(e){for(var t=-1,r=e==null?0:e.length,i=0,n=[];++t<r;){var a=e[t];a&&(n[i++]=a)}return n}var R_,Y$e=D(()=>{R_=W$e});function q$e(e){return this.__data__.set(e,$ce),this}var $ce,zce,X$e=D(()=>{$ce="__lodash_hash_undefined__",zce=q$e});function K$e(e){return this.__data__.has(e)}var Gce,Z$e=D(()=>{Gce=K$e});function KD(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new gC;++t<r;)this.add(e[t])}var ZD,NH=D(()=>{CU(),X$e(),Z$e(),KD.prototype.add=KD.prototype.push=zce,KD.prototype.has=Gce,ZD=KD});function Q$e(e,t){for(var r=-1,i=e==null?0:e.length;++r<i;)if(t(e[r],r,e))return!0;return!1}var OH,Uce=D(()=>{OH=Q$e});function J$e(e,t){return e.has(t)}var QD,BH=D(()=>{QD=J$e});function eze(e,t,r,i,n,a){var s=r&jce,u=e.length,h=t.length;if(u!=h&&!(s&&h>u))return!1;var d=a.get(e),p=a.get(t);if(d&&p)return d==t&&p==e;var g=-1,y=!0,m=r&Hce?new ZD:void 0;for(a.set(e,t),a.set(t,e);++g<u;){var x=e[g],_=t[g];if(i)var E=s?i(_,x,g,t,e,a):i(x,_,g,e,t,a);if(E!==void 0){if(E)continue;y=!1;break}if(m){if(!OH(t,function(w,C){if(!QD(m,C)&&(x===w||n(x,w,r,i,a)))return m.push(C)})){y=!1;break}}else if(!(x===_||n(x,_,r,i,a))){y=!1;break}}return a.delete(e),a.delete(t),y}var jce,Hce,PH,Vce=D(()=>{NH(),Uce(),BH(),jce=1,Hce=2,PH=eze});function tze(e){var t=-1,r=Array(e.size);return e.forEach(function(i,n){r[++t]=[n,i]}),r}var Wce,rze=D(()=>{Wce=tze});function ize(e){var t=-1,r=Array(e.size);return e.forEach(function(i){r[++t]=i}),r}var JD,FH=D(()=>{JD=ize});function nze(e,t,r,i,n,a,s){switch(r){case ade:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case nde:return!(e.byteLength!=t.byteLength||!a(new xC(e),new xC(t)));case Xce:case Kce:case Jce:return bv(+e,+t);case Zce:return e.name==t.name&&e.message==t.message;case ede:case rde:return e==t+"";case Qce:var u=Wce;case tde:var h=i&Yce;if(u||(u=JD),e.size!=t.size&&!h)return!1;var d=s.get(e);if(d)return d==t;i|=qce,s.set(e,t);var p=PH(u(e),u(t),i,n,a,s);return s.delete(e),p;case ide:if(eI)return eI.call(e)==eI.call(t)}return!1}var Yce,qce,Xce,Kce,Zce,Qce,Jce,ede,tde,rde,ide,nde,ade,$H,eI,sde,aze=D(()=>{r_(),Nie(),s_(),Vce(),rze(),FH(),Yce=1,qce=2,Xce="[object Boolean]",Kce="[object Date]",Zce="[object Error]",Qce="[object Map]",Jce="[object Number]",ede="[object RegExp]",tde="[object Set]",rde="[object String]",ide="[object Symbol]",nde="[object ArrayBuffer]",ade="[object DataView]",$H=Wh?Wh.prototype:void 0,eI=$H?$H.valueOf:void 0,sde=nze});function sze(e,t,r,i,n,a){var s=r&ode,u=WD(e),h=u.length,d=WD(t),p=d.length;if(h!=p&&!s)return!1;for(var g=h;g--;){var y=u[g];if(!(s?y in t:ude.call(t,y)))return!1}var m=a.get(e),x=a.get(t);if(m&&x)return m==t&&x==e;var _=!0;a.set(e,t),a.set(t,e);for(var E=s;++g<h;){y=u[g];var w=e[y],C=t[y];if(i)var A=s?i(C,w,y,t,e,a):i(w,C,y,e,t,a);if(!(A===void 0?w===C||n(w,C,r,i,a):A)){_=!1;break}E||(E=y=="constructor")}if(_&&!E){var M=e.constructor,N=t.constructor;M!=N&&"constructor"in e&&"constructor"in t&&!(typeof M=="function"&&M instanceof M&&typeof N=="function"&&N instanceof N)&&(_=!1)}return a.delete(e),a.delete(t),_}var ode,lde,ude,hde,oze=D(()=>{fhe(),ode=1,lde=Object.prototype,ude=lde.hasOwnProperty,hde=sze});function lze(e,t,r,i,n,a){var s=va(e),u=va(t),h=s?GH:um(e),d=u?GH:um(t);h=h==zH?JC:h,d=d==zH?JC:d;var p=h==JC,g=d==JC,y=h==d;if(y&&kv(e)){if(!kv(t))return!1;s=!0,p=!1}if(y&&!p)return a||(a=new _v),s||TC(e)?PH(e,t,r,i,n,a):sde(e,t,h,r,i,n,a);if(!(r&cde)){var m=p&&UH.call(e,"__wrapped__"),x=g&&UH.call(t,"__wrapped__");if(m||x){var _=m?e.value():e,E=x?t.value():t;return a||(a=new _v),n(_,E,r,i,a)}}return y?(a||(a=new _v),hde(e,t,r,i,n,a)):!1}var cde,zH,GH,JC,dde,UH,pde,uze=D(()=>{QR(),Vce(),aze(),oze(),L_(),Js(),kC(),sD(),cde=1,zH="[object Arguments]",GH="[object Array]",JC="[object Object]",dde=Object.prototype,UH=dde.hasOwnProperty,pde=lze});function fde(e,t,r,i,n){return e===t?!0:e==null||t==null||!qh(e)&&!qh(t)?e!==e&&t!==t:pde(e,t,r,i,fde,n)}var jH,gde=D(()=>{uze(),Md(),jH=fde});function hze(e,t,r,i){var n=r.length,a=n,s=!i;if(e==null)return!a;for(e=Object(e);n--;){var u=r[n];if(s&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++n<a;){u=r[n];var h=u[0],d=e[h],p=u[1];if(s&&u[2]){if(d===void 0&&!(h in e))return!1}else{var g=new _v;if(i)var y=i(d,p,h,e,t,g);if(!(y===void 0?jH(p,d,mde|yde,i,g):y))return!1}}return!0}var mde,yde,vde,cze=D(()=>{QR(),gde(),mde=1,yde=2,vde=hze});function dze(e){return e===e&&!Nu(e)}var HH,xde=D(()=>{Ic(),HH=dze});function pze(e){for(var t=Uo(e),r=t.length;r--;){var i=t[r],n=e[i];t[r]=[i,n,HH(n)]}return t}var bde,fze=D(()=>{xde(),_f(),bde=pze});function gze(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var VH,_de=D(()=>{VH=gze});function mze(e){var t=bde(e);return t.length==1&&t[0][2]?VH(t[0][0],t[0][1]):function(r){return r===e||vde(r,e,t)}}var wde,yze=D(()=>{cze(),fze(),_de(),wde=mze});function vze(e,t){return e!=null&&t in Object(e)}var kde,xze=D(()=>{kde=vze});function bze(e,t,r){t=XC(t,e);for(var i=-1,n=t.length,a=!1;++i<n;){var s=A_(t[i]);if(!(a=e!=null&&r(e,s)))break;e=e[s]}return a||++i!=n?a:(n=e==null?0:e.length,!!n&&iD(n)&&CC(s,n)&&(va(e)||wv(e)))}var WH,Tde=D(()=>{GD(),_C(),Js(),lD(),jU(),KC(),WH=bze});function _ze(e,t){return e!=null&&WH(e,t,kde)}var YH,Ede=D(()=>{xze(),Tde(),YH=_ze});function wze(e,t){return zD(e)&&HH(t)?VH(A_(e),t):function(r){var i=Gue(r,e);return i===void 0&&i===t?YH(r,e):jH(t,i,Cde|Sde)}}var Cde,Sde,Ade,kze=D(()=>{gde(),e$e(),Ede(),lH(),xde(),_de(),KC(),Cde=1,Sde=2,Ade=wze});function Tze(e){return function(t){return t?.[e]}}var qH,Mde=D(()=>{qH=Tze});function Eze(e){return function(t){return ZC(t,e)}}var Lde,Cze=D(()=>{UD(),Lde=Eze});function Sze(e){return zD(e)?qH(A_(e)):Lde(e)}var Rde,Aze=D(()=>{Mde(),Cze(),lH(),KC(),Rde=Sze});function Mze(e){return typeof e=="function"?e:e==null?I0:typeof e=="object"?va(e)?Ade(e[0],e[1]):wde(e):Rde(e)}var Pu,fh=D(()=>{yze(),kze(),Z1(),Js(),Aze(),Pu=Mze});function Lze(e,t,r,i){for(var n=-1,a=e==null?0:e.length;++n<a;){var s=e[n];t(i,s,r(s),e)}return i}var Dde,Rze=D(()=>{Dde=Lze});function Dze(e,t){return e&&eD(e,t,Uo)}var tI,XH=D(()=>{AU(),_f(),tI=Dze});function Ize(e,t){return function(r,i){if(r==null)return r;if(!Nc(r))return e(r,i);for(var n=r.length,a=t?n:-1,s=Object(r);(t?a--:++a<n)&&i(s[a],a,s)!==!1;);return r}}var Ide,Nze=D(()=>{Ld(),Ide=Ize}),Nde,hm,Rv=D(()=>{XH(),Nze(),Nde=Ide(tI),hm=Nde});function Oze(e,t,r,i){return hm(e,function(n,a,s){t(i,n,r(n),s)}),i}var Ode,Bze=D(()=>{Rv(),Ode=Oze});function Pze(e,t){return function(r,i){var n=va(r)?Dde:Ode,a=t?t():{};return n(r,e,Pu(i,2),a)}}var Bde,Fze=D(()=>{Rze(),Bze(),fh(),Js(),Bde=Pze}),Pde,KH,$ze=D(()=>{Ad(),Pde=function(){return Dc.Date.now()},KH=Pde}),ZH,Fde,$de,e7,zze=D(()=>{SC(),s_(),v_(),Cv(),ZH=Object.prototype,Fde=ZH.hasOwnProperty,$de=y_(function(e,t){e=Object(e);var r=-1,i=t.length,n=i>2?t[2]:void 0;for(n&&Q1(t[0],t[1],n)&&(i=1);++r<i;)for(var a=t[r],s=K1(a),u=-1,h=s.length;++u<h;){var d=s[u],p=e[d];(p===void 0||bv(p,ZH[d])&&!Fde.call(e,d))&&(e[d]=a[d])}return e}),e7=$de});function Gze(e,t,r){for(var i=-1,n=e==null?0:e.length;++i<n;)if(r(t,e[i]))return!0;return!1}var QH,zde=D(()=>{QH=Gze});function Uze(e,t,r,i){var n=-1,a=sH,s=!0,u=e.length,h=[],d=t.length;if(!u)return h;r&&(t=bf(t,Tv(r))),i?(a=QH,s=!1):t.length>=Gde&&(a=QD,s=!1,t=new ZD(t));e:for(;++n<u;){var p=e[n],g=r==null?p:r(p);if(p=i||p!==0?p:0,s&&g===g){for(var y=d;y--;)if(t[y]===g)continue e;h.push(p)}else a(t,g,i)||h.push(p)}return h}var Gde,Ude,jze=D(()=>{NH(),kue(),zde(),C_(),p_(),BH(),Gde=200,Ude=Uze}),jde,t7,Hze=D(()=>{jze(),QC(),SC(),HU(),jde=y_(function(e,t){return wC(e)?Ude(e,M_(t,1,wC,!0)):[]}),t7=jde});function Vze(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var Rd,Wze=D(()=>{Rd=Vze});function Yze(e,t,r){var i=e==null?0:e.length;return i?(t=r||t===void 0?1:S_(t),pH(e,t<0?0:t,i)):[]}var El,qze=D(()=>{Vue(),qC(),El=Yze});function Xze(e,t,r){var i=e==null?0:e.length;return i?(t=r||t===void 0?1:S_(t),t=i-t,pH(e,0,t<0?0:t)):[]}var D_,Kze=D(()=>{Vue(),qC(),D_=Xze});function Zze(e){return typeof e=="function"?e:I0}var rI,JH=D(()=>{Z1(),rI=Zze});function Qze(e,t){var r=va(e)?iH:hm;return r(e,rI(t))}var Rt,eV=D(()=>{xue(),Rv(),JH(),Js(),Rt=Qze}),Jze=D(()=>{eV()});function eGe(e,t){for(var r=-1,i=e==null?0:e.length;++r<i;)if(!t(e[r],r,e))return!1;return!0}var Hde,tGe=D(()=>{Hde=eGe});function rGe(e,t){var r=!0;return hm(e,function(i,n,a){return r=!!t(i,n,a),r}),r}var Vde,iGe=D(()=>{Rv(),Vde=rGe});function nGe(e,t,r){var i=va(e)?Hde:Vde;return r&&Q1(e,t,r)&&(t=void 0),i(e,Pu(t,3))}var Bc,aGe=D(()=>{tGe(),iGe(),fh(),Js(),v_(),Bc=nGe});function sGe(e,t){var r=[];return hm(e,function(i,n,a){t(i,n,a)&&r.push(i)}),r}var tV,Wde=D(()=>{Rv(),tV=sGe});function oGe(e,t){var r=va(e)?HD:tV;return r(e,Pu(t,3))}var eo,Yde=D(()=>{fH(),Wde(),fh(),Js(),eo=oGe});function lGe(e){return function(t,r,i){var n=Object(t);if(!Nc(t)){var a=Pu(r,3);t=Uo(t),r=function(u){return a(n[u],u,n)}}var s=e(t,r,i);return s>-1?n[a?t[s]:s]:void 0}}var qde,uGe=D(()=>{fh(),Ld(),_f(),qde=lGe});function hGe(e,t,r){var i=e==null?0:e.length;if(!i)return-1;var n=r==null?0:S_(r);return n<0&&(n=Xde(i+n,0)),nH(e,Pu(t,3),n)}var Xde,Kde,cGe=D(()=>{bue(),fh(),qC(),Xde=Math.max,Kde=hGe}),Zde,P0,dGe=D(()=>{uGe(),cGe(),Zde=qde(Kde),P0=Zde});function pGe(e){return e&&e.length?e[0]:void 0}var Pc,fGe=D(()=>{Pc=pGe}),gGe=D(()=>{fGe()});function mGe(e,t){var r=-1,i=Nc(e)?Array(e.length):[];return hm(e,function(n,a,s){i[++r]=t(n,a,s)}),i}var rV,Qde=D(()=>{Rv(),Ld(),rV=mGe});function yGe(e,t){var r=va(e)?bf:rV;return r(e,Pu(t,3))}var fi,r7=D(()=>{C_(),fh(),Qde(),Js(),fi=yGe});function vGe(e,t){return M_(fi(e,t),1)}var gh,Jde=D(()=>{QC(),r7(),gh=vGe});function xGe(e,t){return e==null?e:eD(e,rI(t),K1)}var e0e,bGe=D(()=>{AU(),JH(),Cv(),e0e=xGe});function _Ge(e,t){return e&&tI(e,rI(t))}var t0e,wGe=D(()=>{XH(),JH(),t0e=_Ge}),r0e,i0e,n0e,a0e,kGe=D(()=>{vC(),Fze(),r0e=Object.prototype,i0e=r0e.hasOwnProperty,n0e=Bde(function(e,t,r){i0e.call(e,r)?e[r].push(t):c_(e,r,[t])}),a0e=n0e});function TGe(e,t){return e>t}var s0e,EGe=D(()=>{s0e=TGe});function CGe(e,t){return e!=null&&l0e.call(e,t)}var o0e,l0e,u0e,SGe=D(()=>{o0e=Object.prototype,l0e=o0e.hasOwnProperty,u0e=CGe});function AGe(e,t){return e!=null&&WH(e,t,u0e)}var Cn,MGe=D(()=>{SGe(),Tde(),Cn=AGe});function LGe(e){return typeof e=="string"||!va(e)&&qh(e)&&D0(e)==h0e}var h0e,hu,iV=D(()=>{Y1(),Js(),Md(),h0e="[object String]",hu=LGe});function RGe(e,t){return bf(t,function(r){return e[r]})}var c0e,DGe=D(()=>{C_(),c0e=RGe});function IGe(e){return e==null?[]:c0e(e,Uo(e))}var ls,d0e=D(()=>{DGe(),_f(),ls=IGe});function NGe(e,t,r,i){e=Nc(e)?e:ls(e),r=r&&!i?S_(r):0;var n=e.length;return r<0&&(r=p0e(n+r,0)),hu(e)?r<=n&&e.indexOf(t,r)>-1:!!n&&FD(e,t,r)>-1}var p0e,cu,OGe=D(()=>{aH(),Ld(),iV(),qC(),d0e(),p0e=Math.max,cu=NGe});function BGe(e,t,r){var i=e==null?0:e.length;if(!i)return-1;var n=r==null?0:S_(r);return n<0&&(n=f0e(i+n,0)),FD(e,t,n)}var f0e,nV,PGe=D(()=>{aH(),qC(),f0e=Math.max,nV=BGe});function FGe(e){if(e==null)return!0;if(Nc(e)&&(va(e)||typeof e=="string"||typeof e.splice=="function"||kv(e)||TC(e)||wv(e)))return!e.length;var t=um(e);if(t==g0e||t==m0e)return!e.size;if(d_(e))return!$D(e).length;for(var r in e)if(v0e.call(e,r))return!1;return!0}var g0e,m0e,y0e,v0e,Wa,aV=D(()=>{oH(),L_(),_C(),Js(),Ld(),kC(),bC(),sD(),g0e="[object Map]",m0e="[object Set]",y0e=Object.prototype,v0e=y0e.hasOwnProperty,Wa=FGe});function $Ge(e){return qh(e)&&D0(e)==x0e}var x0e,b0e,zGe=D(()=>{Y1(),Md(),x0e="[object RegExp]",b0e=$Ge}),sV,_0e,F0,GGe=D(()=>{zGe(),p_(),aD(),sV=df&&df.isRegExp,_0e=sV?Tv(sV):b0e,F0=_0e});function UGe(e){return e===void 0}var qa,jGe=D(()=>{qa=UGe});function HGe(e,t){return e<t}var oV,w0e=D(()=>{oV=HGe});function VGe(e,t){var r={};return t=Pu(t,3),tI(e,function(i,n,a){c_(r,n,t(i,n,a))}),r}var i7,WGe=D(()=>{vC(),XH(),fh(),i7=VGe});function YGe(e,t,r){for(var i=-1,n=e.length;++i<n;){var a=e[i],s=t(a);if(s!=null&&(u===void 0?s===s&&!om(s):r(s,u)))var u=s,h=a}return h}var iI,lV=D(()=>{E_(),iI=YGe});function qGe(e){return e&&e.length?iI(e,I0,s0e):void 0}var cm,XGe=D(()=>{lV(),EGe(),Z1(),cm=qGe});function KGe(e){return e&&e.length?iI(e,I0,oV):void 0}var Dv,k0e=D(()=>{lV(),w0e(),Z1(),Dv=KGe});function ZGe(e,t){return e&&e.length?iI(e,Pu(t,2),oV):void 0}var nI,QGe=D(()=>{lV(),fh(),w0e(),nI=ZGe});function JGe(e){if(typeof e!="function")throw new TypeError(T0e);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}var T0e,E0e,eUe=D(()=>{T0e="Expected a function",E0e=JGe});function tUe(e,t,r,i){if(!Nu(e))return e;t=XC(t,e);for(var n=-1,a=t.length,s=a-1,u=e;u!=null&&++n<a;){var h=A_(t[n]),d=r;if(h==="__proto__"||h==="constructor"||h==="prototype")return e;if(n!=s){var p=u[h];d=i?i(p,h,u):void 0,d===void 0&&(d=Nu(p)?p:CC(t[n+1])?[]:{})}g_(u,h,d),u=u[h]}return e}var C0e,rUe=D(()=>{EC(),GD(),lD(),Ic(),KC(),C0e=tUe});function iUe(e,t,r){for(var i=-1,n=t.length,a={};++i<n;){var s=t[i],u=ZC(e,s);r(u,s)&&C0e(a,XC(s,e),u)}return a}var uV,S0e=D(()=>{UD(),rUe(),GD(),uV=iUe});function nUe(e,t){if(e==null)return{};var r=bf(bH(e),function(i){return[i]});return t=Pu(t),uV(e,r,function(i,n){return t(i,n[0])})}var Fc,aUe=D(()=>{C_(),fh(),S0e(),ghe(),Fc=nUe});function sUe(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var A0e,oUe=D(()=>{A0e=sUe});function lUe(e,t){if(e!==t){var r=e!==void 0,i=e===null,n=e===e,a=om(e),s=t!==void 0,u=t===null,h=t===t,d=om(t);if(!u&&!d&&!a&&e>t||a&&s&&h&&!u&&!d||i&&s&&h||!r&&h||!n)return 1;if(!i&&!a&&!d&&e<t||d&&r&&n&&!i&&!a||u&&r&&n||!s&&n||!h)return-1}return 0}var M0e,uUe=D(()=>{E_(),M0e=lUe});function hUe(e,t,r){for(var i=-1,n=e.criteria,a=t.criteria,s=n.length,u=r.length;++i<s;){var h=M0e(n[i],a[i]);if(h){if(i>=u)return h;var d=r[i];return h*(d=="desc"?-1:1)}}return e.index-t.index}var L0e,cUe=D(()=>{uUe(),L0e=hUe});function dUe(e,t,r){t.length?t=bf(t,function(a){return va(a)?function(s){return ZC(s,a.length===1?a[0]:a)}:a}):t=[I0];var i=-1;t=bf(t,Tv(Pu));var n=rV(e,function(a,s,u){var h=bf(t,function(d){return d(a)});return{criteria:h,index:++i,value:a}});return A0e(n,function(a,s){return L0e(a,s,r)})}var R0e,pUe=D(()=>{C_(),UD(),fh(),Qde(),oUe(),p_(),cUe(),Z1(),Js(),R0e=dUe}),D0e,I0e,fUe=D(()=>{Mde(),D0e=qH("length"),I0e=D0e});function gUe(e){for(var t=mV.lastIndex=0;mV.test(e);)++t;return t}var hV,N0e,O0e,B0e,P0e,F0e,$0e,aI,sI,z0e,cV,dV,pV,G0e,fV,gV,U0e,j0e,H0e,mV,V0e,mUe=D(()=>{hV="\\ud800-\\udfff",N0e="\\u0300-\\u036f",O0e="\\ufe20-\\ufe2f",B0e="\\u20d0-\\u20ff",P0e=N0e+O0e+B0e,F0e="\\ufe0e\\ufe0f",$0e="["+hV+"]",aI="["+P0e+"]",sI="\\ud83c[\\udffb-\\udfff]",z0e="(?:"+aI+"|"+sI+")",cV="[^"+hV+"]",dV="(?:\\ud83c[\\udde6-\\uddff]){2}",pV="[\\ud800-\\udbff][\\udc00-\\udfff]",G0e="\\u200d",fV=z0e+"?",gV="["+F0e+"]?",U0e="(?:"+G0e+"(?:"+[cV,dV,pV].join("|")+")"+gV+fV+")*",j0e=gV+fV+U0e,H0e="(?:"+[cV+aI+"?",aI,dV,pV,$0e].join("|")+")",mV=RegExp(sI+"(?="+sI+")|"+H0e+j0e,"g"),V0e=gUe});function yUe(e){return ehe(e)?V0e(e):I0e(e)}var W0e,vUe=D(()=>{fUe(),u$e(),mUe(),W0e=yUe});function xUe(e,t){return uV(e,t,function(r,i){return YH(e,i)})}var Y0e,bUe=D(()=>{S0e(),Ede(),Y0e=xUe}),q0e,n7,_Ue=D(()=>{bUe(),s$e(),q0e=Hue(function(e,t){return e==null?{}:Y0e(e,t)}),n7=q0e});function wUe(e,t,r,i){for(var n=-1,a=K0e(X0e((t-e)/(r||1)),0),s=Array(a);a--;)s[i?a:++n]=e,e+=r;return s}var X0e,K0e,Z0e,kUe=D(()=>{X0e=Math.ceil,K0e=Math.max,Z0e=wUe});function TUe(e){return function(t,r,i){return i&&typeof i!="number"&&Q1(t,r,i)&&(r=i=void 0),t=YC(t),r===void 0?(r=t,t=0):r=YC(r),i=i===void 0?t<r?1:-1:YC(i),Z0e(t,r,i,e)}}var Q0e,EUe=D(()=>{kUe(),v_(),mue(),Q0e=TUe}),J0e,Iv,CUe=D(()=>{EUe(),J0e=Q0e(),Iv=J0e});function SUe(e,t,r,i,n){return n(e,function(a,s,u){r=i?(i=!1,a):t(r,a,s,u)}),r}var epe,AUe=D(()=>{epe=SUe});function MUe(e,t,r){var i=va(e)?the:epe,n=arguments.length<3;return i(e,Pu(t,4),r,n,hm)}var Co,tpe=D(()=>{c$e(),Rv(),fh(),AUe(),Js(),Co=MUe});function LUe(e,t){var r=va(e)?HD:tV;return r(e,E0e(Pu(t,3)))}var a7,RUe=D(()=>{fH(),Wde(),fh(),Js(),eUe(),a7=LUe});function DUe(e){if(e==null)return 0;if(Nc(e))return hu(e)?W0e(e):e.length;var t=um(e);return t==rpe||t==ipe?e.size:$D(e).length}var rpe,ipe,npe,IUe=D(()=>{oH(),L_(),Ld(),iV(),vUe(),rpe="[object Map]",ipe="[object Set]",npe=DUe});function NUe(e,t){var r;return hm(e,function(i,n,a){return r=t(i,n,a),!r}),!!r}var ape,OUe=D(()=>{Rv(),ape=NUe});function BUe(e,t,r){var i=va(e)?OH:ape;return r&&Q1(e,t,r)&&(t=void 0),i(e,Pu(t,3))}var yV,PUe=D(()=>{Uce(),fh(),OUe(),Js(),v_(),yV=BUe}),spe,I_,FUe=D(()=>{QC(),pUe(),SC(),v_(),spe=y_(function(e,t){if(e==null)return[];var r=t.length;return r>1&&Q1(e,t[0],t[1])?t=[]:r>2&&Q1(t[0],t[1],t[2])&&(t=[t[0]]),R0e(e,M_(t,1),[])}),I_=spe}),ope,lpe,upe,$Ue=D(()=>{xhe(),vue(),FH(),ope=1/0,lpe=Lv&&1/JD(new Lv([,-0]))[1]==ope?function(e){return new Lv(e)}:Go,upe=lpe});function zUe(e,t,r){var i=-1,n=sH,a=e.length,s=!0,u=[],h=u;if(r)s=!1,n=QH;else if(a>=hpe){var d=t?null:upe(e);if(d)return JD(d);s=!1,n=QD,h=new ZD}else h=t?[]:u;e:for(;++i<a;){var p=e[i],g=t?t(p):p;if(p=r||p!==0?p:0,s&&g===g){for(var y=h.length;y--;)if(h[y]===g)continue e;t&&h.push(g),u.push(p)}else n(h,g,r)||(h!==u&&h.push(g),u.push(p))}return u}var hpe,oI,vV=D(()=>{NH(),kue(),zde(),BH(),$Ue(),FH(),hpe=200,oI=zUe}),cpe,dpe,GUe=D(()=>{QC(),SC(),vV(),HU(),cpe=y_(function(e){return oI(M_(e,1,wC,!0))}),dpe=cpe});function UUe(e){return e&&e.length?oI(e):[]}var lI,jUe=D(()=>{vV(),lI=UUe});function HUe(e,t){return e&&e.length?oI(e,Pu(t,2)):[]}var ppe,VUe=D(()=>{fh(),vV(),ppe=HUe});function WUe(e){var t=++fpe;return uH(e)+t}var fpe,uI,YUe=D(()=>{$ue(),fpe=0,uI=WUe});function qUe(e,t,r){for(var i=-1,n=e.length,a=t.length,s={};++i<n;){var u=i<a?t[i]:void 0;r(s,e[i],u)}return s}var gpe,XUe=D(()=>{gpe=qUe});function KUe(e,t){return gpe(e||[],t||[],g_)}var mpe,ZUe=D(()=>{EC(),XUe(),mpe=KUe}),vn=D(()=>{HFe(),Oce(),V$e(),Y$e(),Qne(),zze(),Hze(),qze(),Kze(),Jze(),aGe(),Yde(),dGe(),gGe(),Jde(),dH(),eV(),bGe(),wGe(),kGe(),MGe(),Z1(),OGe(),PGe(),Js(),aV(),WR(),Ic(),GGe(),iV(),jGe(),_f(),Wze(),r7(),WGe(),XGe(),uae(),k0e(),QGe(),vue(),$ze(),_Ue(),aUe(),CUe(),tpe(),RUe(),IUe(),PUe(),FUe(),GUe(),jUe(),YUe(),d0e(),ZUe()});function ype(e,t){e[t]?e[t]++:e[t]=1}function vpe(e,t){--e[t]||delete e[t]}function s7(e,t,r,i){var n=""+t,a=""+r;if(!e&&n>a){var s=n;n=a,a=s}return n+bV+a+bV+(qa(i)?xpe:i)}function QUe(e,t,r,i){var n=""+t,a=""+r;if(!e&&n>a){var s=n;n=a,a=s}var u={v:n,w:a};return i&&(u.name=i),u}function xV(e,t){return s7(e,t.v,t.w,t.name)}var xpe,dm,bV,Vl,_V=D(()=>{vn(),xpe="\0",dm="\0",bV="",Vl=class{constructor(e={}){this._isDirected=Object.prototype.hasOwnProperty.call(e,"directed")?e.directed:!0,this._isMultigraph=Object.prototype.hasOwnProperty.call(e,"multigraph")?e.multigraph:!1,this._isCompound=Object.prototype.hasOwnProperty.call(e,"compound")?e.compound:!1,this._label=void 0,this._defaultNodeLabelFn=pf(void 0),this._defaultEdgeLabelFn=pf(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[dm]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(e){return this._label=e,this}graph(){return this._label}setDefaultNodeLabel(e){return Yh(e)||(e=pf(e)),this._defaultNodeLabelFn=e,this}nodeCount(){return this._nodeCount}nodes(){return Uo(this._nodes)}sources(){var e=this;return eo(this.nodes(),function(t){return Wa(e._in[t])})}sinks(){var e=this;return eo(this.nodes(),function(t){return Wa(e._out[t])})}setNodes(e,t){var r=arguments,i=this;return Rt(e,function(n){r.length>1?i.setNode(n,t):i.setNode(n)}),this}setNode(e,t){return Object.prototype.hasOwnProperty.call(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=t),this):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]=dm,this._children[e]={},this._children[dm][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)}node(e){return this._nodes[e]}hasNode(e){return Object.prototype.hasOwnProperty.call(this._nodes,e)}removeNode(e){if(Object.prototype.hasOwnProperty.call(this._nodes,e)){var t=r=>this.removeEdge(this._edgeObjs[r]);delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],Rt(this.children(e),r=>{this.setParent(r)}),delete this._children[e]),Rt(Uo(this._in[e]),t),delete this._in[e],delete this._preds[e],Rt(Uo(this._out[e]),t),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this}setParent(e,t){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(qa(t))t=dm;else{t+="";for(var r=t;!qa(r);r=this.parent(r))if(r===e)throw new Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this}_removeFromParentsChildList(e){delete this._children[this._parent[e]][e]}parent(e){if(this._isCompound){var t=this._parent[e];if(t!==dm)return t}}children(e){if(qa(e)&&(e=dm),this._isCompound){var t=this._children[e];if(t)return Uo(t)}else{if(e===dm)return this.nodes();if(this.hasNode(e))return[]}}predecessors(e){var t=this._preds[e];if(t)return Uo(t)}successors(e){var t=this._sucs[e];if(t)return Uo(t)}neighbors(e){var t=this.predecessors(e);if(t)return dpe(t,this.successors(e))}isLeaf(e){var t;return this.isDirected()?t=this.successors(e):t=this.neighbors(e),t.length===0}filterNodes(e){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var r=this;Rt(this._nodes,function(a,s){e(s)&&t.setNode(s,a)}),Rt(this._edgeObjs,function(a){t.hasNode(a.v)&&t.hasNode(a.w)&&t.setEdge(a,r.edge(a))});var i={};function n(a){var s=r.parent(a);return s===void 0||t.hasNode(s)?(i[a]=s,s):s in i?i[s]:n(s)}return this._isCompound&&Rt(t.nodes(),function(a){t.setParent(a,n(a))}),t}setDefaultEdgeLabel(e){return Yh(e)||(e=pf(e)),this._defaultEdgeLabelFn=e,this}edgeCount(){return this._edgeCount}edges(){return ls(this._edgeObjs)}setPath(e,t){var r=this,i=arguments;return Co(e,function(n,a){return i.length>1?r.setEdge(n,a,t):r.setEdge(n,a),a}),this}setEdge(){var e,t,r,i,n=!1,a=arguments[0];typeof a=="object"&&a!==null&&"v"in a?(e=a.v,t=a.w,r=a.name,arguments.length===2&&(i=arguments[1],n=!0)):(e=a,t=arguments[1],r=arguments[3],arguments.length>2&&(i=arguments[2],n=!0)),e=""+e,t=""+t,qa(r)||(r=""+r);var s=s7(this._isDirected,e,t,r);if(Object.prototype.hasOwnProperty.call(this._edgeLabels,s))return n&&(this._edgeLabels[s]=i),this;if(!qa(r)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this._edgeLabels[s]=n?i:this._defaultEdgeLabelFn(e,t,r);var u=QUe(this._isDirected,e,t,r);return e=u.v,t=u.w,Object.freeze(u),this._edgeObjs[s]=u,ype(this._preds[t],e),ype(this._sucs[e],t),this._in[t][s]=u,this._out[e][s]=u,this._edgeCount++,this}edge(e,t,r){var i=arguments.length===1?xV(this._isDirected,arguments[0]):s7(this._isDirected,e,t,r);return this._edgeLabels[i]}hasEdge(e,t,r){var i=arguments.length===1?xV(this._isDirected,arguments[0]):s7(this._isDirected,e,t,r);return Object.prototype.hasOwnProperty.call(this._edgeLabels,i)}removeEdge(e,t,r){var i=arguments.length===1?xV(this._isDirected,arguments[0]):s7(this._isDirected,e,t,r),n=this._edgeObjs[i];return n&&(e=n.v,t=n.w,delete this._edgeLabels[i],delete this._edgeObjs[i],vpe(this._preds[t],e),vpe(this._sucs[e],t),delete this._in[t][i],delete this._out[e][i],this._edgeCount--),this}inEdges(e,t){var r=this._in[e];if(r){var i=ls(r);return t?eo(i,function(n){return n.v===t}):i}}outEdges(e,t){var r=this._out[e];if(r){var i=ls(r);return t?eo(i,function(n){return n.w===t}):i}}nodeEdges(e,t){var r=this.inEdges(e,t);if(r)return r.concat(this.outEdges(e,t))}},Vl.prototype._nodeCount=0,Vl.prototype._edgeCount=0}),Qh=D(()=>{_V()});function bpe(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function JUe(e,t){if(e!=="_next"&&e!=="_prev")return t}var _pe,eje=D(()=>{_pe=class{constructor(){var e={};e._next=e._prev=e,this._sentinel=e}dequeue(){var e=this._sentinel,t=e._prev;if(t!==e)return bpe(t),t}enqueue(e){var t=this._sentinel;e._prev&&e._next&&bpe(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t}toString(){for(var e=[],t=this._sentinel,r=t._prev;r!==t;)e.push(JSON.stringify(r,JUe)),r=r._prev;return"["+e.join(", ")+"]"}}});function tje(e,t){if(e.nodeCount()<=1)return[];var r=ije(e,t||wpe),i=rje(r.graph,r.buckets,r.zeroIdx);return sl(fi(i,function(n){return e.outEdges(n.v,n.w)}))}function rje(e,t,r){for(var i=[],n=t[t.length-1],a=t[0],s;e.nodeCount();){for(;s=a.dequeue();)wV(e,t,r,s);for(;s=n.dequeue();)wV(e,t,r,s);if(e.nodeCount()){for(var u=t.length-2;u>0;--u)if(s=t[u].dequeue(),s){i=i.concat(wV(e,t,r,s,!0));break}}}return i}function wV(e,t,r,i,n){var a=n?[]:void 0;return Rt(e.inEdges(i.v),function(s){var u=e.edge(s),h=e.node(s.v);n&&a.push({v:s.v,w:s.w}),h.out-=u,kV(t,r,h)}),Rt(e.outEdges(i.v),function(s){var u=e.edge(s),h=s.w,d=e.node(h);d.in-=u,kV(t,r,d)}),e.removeNode(i.v),a}function ije(e,t){var r=new Vl,i=0,n=0;Rt(e.nodes(),function(u){r.setNode(u,{v:u,in:0,out:0})}),Rt(e.edges(),function(u){var h=r.edge(u.v,u.w)||0,d=t(u),p=h+d;r.setEdge(u.v,u.w,p),n=Math.max(n,r.node(u.v).out+=d),i=Math.max(i,r.node(u.w).in+=d)});var a=Iv(n+i+3).map(function(){return new _pe}),s=i+1;return Rt(r.nodes(),function(u){kV(a,s,r.node(u))}),{graph:r,buckets:a,zeroIdx:s}}function kV(e,t,r){r.out?r.in?e[r.out-r.in+t].enqueue(r):e[e.length-1].enqueue(r):e[0].enqueue(r)}var wpe,nje=D(()=>{vn(),Qh(),eje(),wpe=pf(1)});function aje(e){var t=e.graph().acyclicer==="greedy"?tje(e,r(e)):sje(e);Rt(t,function(i){var n=e.edge(i);e.removeEdge(i),n.forwardName=i.name,n.reversed=!0,e.setEdge(i.w,i.v,n,uI("rev"))});function r(i){return function(n){return i.edge(n).weight}}}function sje(e){var t=[],r={},i={};function n(a){Object.prototype.hasOwnProperty.call(i,a)||(i[a]=!0,r[a]=!0,Rt(e.outEdges(a),function(s){Object.prototype.hasOwnProperty.call(r,s.w)?t.push(s):n(s.w)}),delete r[a])}return Rt(e.nodes(),n),t}function oje(e){Rt(e.edges(),function(t){var r=e.edge(t);if(r.reversed){e.removeEdge(t);var i=r.forwardName;delete r.reversed,delete r.forwardName,e.setEdge(t.w,t.v,r,i)}})}var kpe=D(()=>{vn(),nje()});function N_(e,t,r,i){var n;do n=uI(i);while(e.hasNode(n));return r.dummy=t,e.setNode(n,r),n}function lje(e){var t=new Vl().setGraph(e.graph());return Rt(e.nodes(),function(r){t.setNode(r,e.node(r))}),Rt(e.edges(),function(r){var i=t.edge(r.v,r.w)||{weight:0,minlen:1},n=e.edge(r);t.setEdge(r.v,r.w,{weight:i.weight+n.weight,minlen:Math.max(i.minlen,n.minlen)})}),t}function Tpe(e){var t=new Vl({multigraph:e.isMultigraph()}).setGraph(e.graph());return Rt(e.nodes(),function(r){e.children(r).length||t.setNode(r,e.node(r))}),Rt(e.edges(),function(r){t.setEdge(r,e.edge(r))}),t}function Epe(e,t){var r=e.x,i=e.y,n=t.x-r,a=t.y-i,s=e.width/2,u=e.height/2;if(!n&&!a)throw new Error("Not possible to find intersection inside of the rectangle");var h,d;return Math.abs(a)*s>Math.abs(n)*u?(a<0&&(u=-u),h=u*n/a,d=u):(n<0&&(s=-s),h=s,d=s*a/n),{x:r+h,y:i+d}}function hI(e){var t=fi(Iv(Spe(e)+1),function(){return[]});return Rt(e.nodes(),function(r){var i=e.node(r),n=i.rank;qa(n)||(t[n][i.order]=r)}),t}function uje(e){var t=Dv(fi(e.nodes(),function(r){return e.node(r).rank}));Rt(e.nodes(),function(r){var i=e.node(r);Cn(i,"rank")&&(i.rank-=t)})}function hje(e){var t=Dv(fi(e.nodes(),function(a){return e.node(a).rank})),r=[];Rt(e.nodes(),function(a){var s=e.node(a).rank-t;r[s]||(r[s]=[]),r[s].push(a)});var i=0,n=e.graph().nodeRankFactor;Rt(r,function(a,s){qa(a)&&s%n!==0?--i:i&&Rt(a,function(u){e.node(u).rank+=i})})}function Cpe(e,t,r,i){var n={width:0,height:0};return arguments.length>=4&&(n.rank=r,n.order=i),N_(e,"border",n,t)}function Spe(e){return cm(fi(e.nodes(),function(t){var r=e.node(t).rank;if(!qa(r))return r}))}function cje(e,t){var r={lhs:[],rhs:[]};return Rt(e,function(i){t(i)?r.lhs.push(i):r.rhs.push(i)}),r}function dje(e,t){var r=KH();try{return t()}finally{console.log(e+" time: "+(KH()-r)+"ms")}}function pje(e,t){return t()}var wf=D(()=>{vn(),Qh()});function fje(e){function t(r){var i=e.children(r),n=e.node(r);if(i.length&&Rt(i,t),Object.prototype.hasOwnProperty.call(n,"minRank")){n.borderLeft=[],n.borderRight=[];for(var a=n.minRank,s=n.maxRank+1;a<s;++a)Ape(e,"borderLeft","_bl",r,n,a),Ape(e,"borderRight","_br",r,n,a)}}Rt(e.children(),t)}function Ape(e,t,r,i,n,a){var s={width:0,height:0,rank:a,borderType:t},u=n[t][a-1],h=N_(e,"border",s,r);n[t][a]=h,e.setParent(h,i),u&&e.setEdge(u,h,{weight:1})}var gje=D(()=>{vn(),wf()});function mje(e){var t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&Mpe(e)}function yje(e){var t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&vje(e),(t==="lr"||t==="rl")&&(xje(e),Mpe(e))}function Mpe(e){Rt(e.nodes(),function(t){Lpe(e.node(t))}),Rt(e.edges(),function(t){Lpe(e.edge(t))})}function Lpe(e){var t=e.width;e.width=e.height,e.height=t}function vje(e){Rt(e.nodes(),function(t){TV(e.node(t))}),Rt(e.edges(),function(t){var r=e.edge(t);Rt(r.points,TV),Object.prototype.hasOwnProperty.call(r,"y")&&TV(r)})}function TV(e){e.y=-e.y}function xje(e){Rt(e.nodes(),function(t){EV(e.node(t))}),Rt(e.edges(),function(t){var r=e.edge(t);Rt(r.points,EV),Object.prototype.hasOwnProperty.call(r,"x")&&EV(r)})}function EV(e){var t=e.x;e.x=e.y,e.y=t}var bje=D(()=>{vn()});function _je(e){e.graph().dummyChains=[],Rt(e.edges(),function(t){wje(e,t)})}function wje(e,t){var r=t.v,i=e.node(r).rank,n=t.w,a=e.node(n).rank,s=t.name,u=e.edge(t),h=u.labelRank;if(a!==i+1){e.removeEdge(t);var d=void 0,p,g;for(g=0,++i;i<a;++g,++i)u.points=[],d={width:0,height:0,edgeLabel:u,edgeObj:t,rank:i},p=N_(e,"edge",d,"_d"),i===h&&(d.width=u.width,d.height=u.height,d.dummy="edge-label",d.labelpos=u.labelpos),e.setEdge(r,p,{weight:u.weight},s),g===0&&e.graph().dummyChains.push(p),r=p;e.setEdge(r,n,{weight:u.weight},s)}}function kje(e){Rt(e.graph().dummyChains,function(t){var r=e.node(t),i=r.edgeLabel,n;for(e.setEdge(r.edgeObj,i);r.dummy;)n=e.successors(t)[0],e.removeNode(t),i.points.push({x:r.x,y:r.y}),r.dummy==="edge-label"&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),t=n,r=e.node(t)})}var Rpe=D(()=>{vn(),wf()});function CV(e){var t={};function r(i){var n=e.node(i);if(Object.prototype.hasOwnProperty.call(t,i))return n.rank;t[i]=!0;var a=Dv(fi(e.outEdges(i),function(s){return r(s.w)-e.edge(s).minlen}));return(a===Number.POSITIVE_INFINITY||a===void 0||a===null)&&(a=0),n.rank=a}Rt(e.sources(),r)}function o7(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}var SV=D(()=>{vn()});function Dpe(e){var t=new Vl({directed:!1}),r=e.nodes()[0],i=e.nodeCount();t.setNode(r,{});for(var n,a;Tje(t,e)<i;)n=Eje(t,e),a=t.hasNode(n.v)?o7(e,n):-o7(e,n),Cje(t,e,a);return t}function Tje(e,t){function r(i){Rt(t.nodeEdges(i),function(n){var a=n.v,s=i===a?n.w:a;!e.hasNode(s)&&!o7(t,n)&&(e.setNode(s,{}),e.setEdge(i,s,{}),r(s))})}return Rt(e.nodes(),r),e.nodeCount()}function Eje(e,t){return nI(t.edges(),function(r){if(e.hasNode(r.v)!==e.hasNode(r.w))return o7(t,r)})}function Cje(e,t,r){Rt(e.nodes(),function(i){t.node(i).rank+=r})}var Ipe=D(()=>{vn(),Qh(),SV()}),Sje=D(()=>{}),Npe=D(()=>{}),Aje,Ope=D(()=>{vn(),Npe(),Aje=pf(1)}),Mje=D(()=>{Ope()}),Bpe=D(()=>{}),Lje=D(()=>{Bpe()}),Rje,Dje=D(()=>{vn(),Rje=pf(1)});function Ije(e){var t={},r={},i=[];function n(a){if(Object.prototype.hasOwnProperty.call(r,a))throw new cI;Object.prototype.hasOwnProperty.call(t,a)||(r[a]=!0,t[a]=!0,Rt(e.predecessors(a),n),delete r[a],i.push(a))}if(Rt(e.sinks(),n),npe(t)!==e.nodeCount())throw new cI;return i}function cI(){}var Ppe=D(()=>{vn(),Ije.CycleException=cI,cI.prototype=new Error}),Nje=D(()=>{Ppe()});function Fpe(e,t,r){va(t)||(t=[t]);var i=(e.isDirected()?e.successors:e.neighbors).bind(e),n=[],a={};return Rt(t,function(s){if(!e.hasNode(s))throw new Error("Graph does not have node: "+s);$pe(e,s,r==="post",a,i,n)}),n}function $pe(e,t,r,i,n,a){Object.prototype.hasOwnProperty.call(i,t)||(i[t]=!0,r||a.push(t),Rt(n(t),function(s){$pe(e,s,r,i,n,a)}),r&&a.push(t))}var zpe=D(()=>{vn()});function Oje(e,t){return Fpe(e,t,"post")}var Bje=D(()=>{zpe()});function Pje(e,t){return Fpe(e,t,"pre")}var Fje=D(()=>{zpe()}),$je=D(()=>{Npe(),_V()}),zje=D(()=>{Sje(),Ope(),Mje(),Lje(),Dje(),Nje(),Bje(),Fje(),$je(),Bpe(),Ppe()});function Nv(e){e=lje(e),CV(e);var t=Dpe(e);MV(t),AV(t,e);for(var r,i;r=jpe(t);)i=Hpe(t,e,r),Vpe(t,e,r,i)}function AV(e,t){var r=Oje(e,e.nodes());r=r.slice(0,r.length-1),Rt(r,function(i){Gje(e,t,i)})}function Gje(e,t,r){var i=e.node(r),n=i.parent;e.edge(r,n).cutvalue=Gpe(e,t,r)}function Gpe(e,t,r){var i=e.node(r),n=i.parent,a=!0,s=t.edge(r,n),u=0;return s||(a=!1,s=t.edge(n,r)),u=s.weight,Rt(t.nodeEdges(r),function(h){var d=h.v===r,p=d?h.w:h.v;if(p!==n){var g=d===a,y=t.edge(h).weight;if(u+=g?y:-y,jje(e,r,p)){var m=e.edge(r,p).cutvalue;u+=g?-m:m}}}),u}function MV(e,t){arguments.length<2&&(t=e.nodes()[0]),Upe(e,{},1,t)}function Upe(e,t,r,i,n){var a=r,s=e.node(i);return t[i]=!0,Rt(e.neighbors(i),function(u){Object.prototype.hasOwnProperty.call(t,u)||(r=Upe(e,t,r,u,i))}),s.low=a,s.lim=r++,n?s.parent=n:delete s.parent,r}function jpe(e){return P0(e.edges(),function(t){return e.edge(t).cutvalue<0})}function Hpe(e,t,r){var i=r.v,n=r.w;t.hasEdge(i,n)||(i=r.w,n=r.v);var a=e.node(i),s=e.node(n),u=a,h=!1;a.lim>s.lim&&(u=s,h=!0);var d=eo(t.edges(),function(p){return h===Wpe(e,e.node(p.v),u)&&h!==Wpe(e,e.node(p.w),u)});return nI(d,function(p){return o7(t,p)})}function Vpe(e,t,r,i){var n=r.v,a=r.w;e.removeEdge(n,a),e.setEdge(i.v,i.w,{}),MV(e),AV(e,t),Uje(e,t)}function Uje(e,t){var r=P0(e.nodes(),function(n){return!t.node(n).parent}),i=Pje(e,r);i=i.slice(1),Rt(i,function(n){var a=e.node(n).parent,s=t.edge(n,a),u=!1;s||(s=t.edge(a,n),u=!0),t.node(n).rank=t.node(a).rank+(u?s.minlen:-s.minlen)})}function jje(e,t,r){return e.hasEdge(t,r)}function Wpe(e,t,r){return r.low<=t.lim&&t.lim<=r.lim}var Hje=D(()=>{vn(),zje(),wf(),Ipe(),SV(),Nv.initLowLimValues=MV,Nv.initCutValues=AV,Nv.calcCutValue=Gpe,Nv.leaveEdge=jpe,Nv.enterEdge=Hpe,Nv.exchangeEdges=Vpe});function Vje(e){switch(e.graph().ranker){case"network-simplex":Ype(e);break;case"tight-tree":Wje(e);break;case"longest-path":qpe(e);break;default:Ype(e)}}function Wje(e){CV(e),Dpe(e)}function Ype(e){Nv(e)}var qpe,Xpe=D(()=>{Ipe(),Hje(),SV(),qpe=CV});function Yje(e){var t=N_(e,"root",{},"_root"),r=qje(e),i=cm(ls(r))-1,n=2*i+1;e.graph().nestingRoot=t,Rt(e.edges(),function(s){e.edge(s).minlen*=n});var a=Xje(e)+1;Rt(e.children(),function(s){Kpe(e,t,n,a,i,r,s)}),e.graph().nodeRankFactor=n}function Kpe(e,t,r,i,n,a,s){var u=e.children(s);if(!u.length){s!==t&&e.setEdge(t,s,{weight:0,minlen:r});return}var h=Cpe(e,"_bt"),d=Cpe(e,"_bb"),p=e.node(s);e.setParent(h,s),p.borderTop=h,e.setParent(d,s),p.borderBottom=d,Rt(u,function(g){Kpe(e,t,r,i,n,a,g);var y=e.node(g),m=y.borderTop?y.borderTop:g,x=y.borderBottom?y.borderBottom:g,_=y.borderTop?i:2*i,E=m!==x?1:n-a[s]+1;e.setEdge(h,m,{weight:_,minlen:E,nestingEdge:!0}),e.setEdge(x,d,{weight:_,minlen:E,nestingEdge:!0})}),e.parent(s)||e.setEdge(t,h,{weight:0,minlen:n+a[s]})}function qje(e){var t={};function r(i,n){var a=e.children(i);a&&a.length&&Rt(a,function(s){r(s,n+1)}),t[i]=n}return Rt(e.children(),function(i){r(i,1)}),t}function Xje(e){return Co(e.edges(),function(t,r){return t+e.edge(r).weight},0)}function Kje(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,Rt(e.edges(),function(r){var i=e.edge(r);i.nestingEdge&&e.removeEdge(r)})}var Zje=D(()=>{vn(),wf()});function Qje(e,t,r){var i={},n;Rt(r,function(a){for(var s=e.parent(a),u,h;s;){if(u=e.parent(s),u?(h=i[u],i[u]=s):(h=n,n=s),h&&h!==s){t.setEdge(h,s);return}s=u}})}var Jje=D(()=>{vn()});function eHe(e,t,r){var i=tHe(e),n=new Vl({compound:!0}).setGraph({root:i}).setDefaultNodeLabel(function(a){return e.node(a)});return Rt(e.nodes(),function(a){var s=e.node(a),u=e.parent(a);(s.rank===t||s.minRank<=t&&t<=s.maxRank)&&(n.setNode(a),n.setParent(a,u||i),Rt(e[r](a),function(h){var d=h.v===a?h.w:h.v,p=n.edge(d,a),g=qa(p)?0:p.weight;n.setEdge(d,a,{weight:e.edge(h).weight+g})}),Object.prototype.hasOwnProperty.call(s,"minRank")&&n.setNode(a,{borderLeft:s.borderLeft[t],borderRight:s.borderRight[t]}))}),n}function tHe(e){for(var t;e.hasNode(t=uI("_root")););return t}var rHe=D(()=>{vn(),Qh()});function iHe(e,t){for(var r=0,i=1;i<t.length;++i)r+=nHe(e,t[i-1],t[i]);return r}function nHe(e,t,r){for(var i=mpe(r,fi(r,function(d,p){return p})),n=sl(fi(t,function(d){return I_(fi(e.outEdges(d),function(p){return{pos:i[p.w],weight:e.edge(p).weight}}),"pos")})),a=1;a<r.length;)a<<=1;var s=2*a-1;a-=1;var u=fi(new Array(s),function(){return 0}),h=0;return Rt(n.forEach(function(d){var p=d.pos+a;u[p]+=d.weight;for(var g=0;p>0;)p%2&&(g+=u[p+1]),p=p-1>>1,u[p]+=d.weight;h+=d.weight*g})),h}var aHe=D(()=>{vn()});function sHe(e){var t={},r=eo(e.nodes(),function(u){return!e.children(u).length}),i=cm(fi(r,function(u){return e.node(u).rank})),n=fi(Iv(i+1),function(){return[]});function a(u){if(!Cn(t,u)){t[u]=!0;var h=e.node(u);n[h.rank].push(u),Rt(e.successors(u),a)}}var s=I_(r,function(u){return e.node(u).rank});return Rt(s,a),n}var oHe=D(()=>{vn()});function lHe(e,t){return fi(t,function(r){var i=e.inEdges(r);if(i.length){var n=Co(i,function(a,s){var u=e.edge(s),h=e.node(s.v);return{sum:a.sum+u.weight*h.order,weight:a.weight+u.weight}},{sum:0,weight:0});return{v:r,barycenter:n.sum/n.weight,weight:n.weight}}else return{v:r}})}var uHe=D(()=>{vn()});function hHe(e,t){var r={};Rt(e,function(n,a){var s=r[n.v]={indegree:0,in:[],out:[],vs:[n.v],i:a};qa(n.barycenter)||(s.barycenter=n.barycenter,s.weight=n.weight)}),Rt(t.edges(),function(n){var a=r[n.v],s=r[n.w];!qa(a)&&!qa(s)&&(s.indegree++,a.out.push(r[n.w]))});var i=eo(r,function(n){return!n.indegree});return cHe(i)}function cHe(e){var t=[];function r(a){return function(s){s.merged||(qa(s.barycenter)||qa(a.barycenter)||s.barycenter>=a.barycenter)&&dHe(a,s)}}function i(a){return function(s){s.in.push(a),--s.indegree===0&&e.push(s)}}for(;e.length;){var n=e.pop();t.push(n),Rt(n.in.reverse(),r(n)),Rt(n.out,i(n))}return fi(eo(t,function(a){return!a.merged}),function(a){return n7(a,["vs","i","barycenter","weight"])})}function dHe(e,t){var r=0,i=0;e.weight&&(r+=e.barycenter*e.weight,i+=e.weight),t.weight&&(r+=t.barycenter*t.weight,i+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=r/i,e.weight=i,e.i=Math.min(t.i,e.i),t.merged=!0}var pHe=D(()=>{vn()});function fHe(e,t){var r=cje(e,function(p){return Object.prototype.hasOwnProperty.call(p,"barycenter")}),i=r.lhs,n=I_(r.rhs,function(p){return-p.i}),a=[],s=0,u=0,h=0;i.sort(gHe(!!t)),h=Zpe(a,n,h),Rt(i,function(p){h+=p.vs.length,a.push(p.vs),s+=p.barycenter*p.weight,u+=p.weight,h=Zpe(a,n,h)});var d={vs:sl(a)};return u&&(d.barycenter=s/u,d.weight=u),d}function Zpe(e,t,r){for(var i;t.length&&(i=Rd(t)).i<=r;)t.pop(),e.push(i.vs),r++;return r}function gHe(e){return function(t,r){return t.barycenter<r.barycenter?-1:t.barycenter>r.barycenter?1:e?r.i-t.i:t.i-r.i}}var mHe=D(()=>{vn(),wf()});function Qpe(e,t,r,i){var n=e.children(t),a=e.node(t),s=a?a.borderLeft:void 0,u=a?a.borderRight:void 0,h={};s&&(n=eo(n,function(x){return x!==s&&x!==u}));var d=lHe(e,n);Rt(d,function(x){if(e.children(x.v).length){var _=Qpe(e,x.v,r,i);h[x.v]=_,Object.prototype.hasOwnProperty.call(_,"barycenter")&&vHe(x,_)}});var p=hHe(d,r);yHe(p,h);var g=fHe(p,i);if(s&&(g.vs=sl([s,g.vs,u]),e.predecessors(s).length)){var y=e.node(e.predecessors(s)[0]),m=e.node(e.predecessors(u)[0]);Object.prototype.hasOwnProperty.call(g,"barycenter")||(g.barycenter=0,g.weight=0),g.barycenter=(g.barycenter*g.weight+y.order+m.order)/(g.weight+2),g.weight+=2}return g}function yHe(e,t){Rt(e,function(r){r.vs=sl(r.vs.map(function(i){return t[i]?t[i].vs:i}))})}function vHe(e,t){qa(e.barycenter)?(e.barycenter=t.barycenter,e.weight=t.weight):(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight)}var xHe=D(()=>{vn(),uHe(),pHe(),mHe()});function bHe(e){var t=Spe(e),r=Jpe(e,Iv(1,t+1),"inEdges"),i=Jpe(e,Iv(t-1,-1,-1),"outEdges"),n=sHe(e);efe(e,n);for(var a=Number.POSITIVE_INFINITY,s,u=0,h=0;h<4;++u,++h){_He(u%2?r:i,u%4>=2),n=hI(e);var d=iHe(e,n);d<a&&(h=0,s=Fce(n),a=d)}efe(e,s)}function Jpe(e,t,r){return fi(t,function(i){return eHe(e,i,r)})}function _He(e,t){var r=new Vl;Rt(e,function(i){var n=i.graph().root,a=Qpe(i,n,r,t);Rt(a.vs,function(s,u){i.node(s).order=u}),Qje(i,r,a.vs)})}function efe(e,t){Rt(t,function(r){Rt(r,function(i,n){e.node(i).order=n})})}var wHe=D(()=>{vn(),Qh(),wf(),Jje(),rHe(),aHe(),oHe(),xHe()});function kHe(e){var t=EHe(e);Rt(e.graph().dummyChains,function(r){for(var i=e.node(r),n=i.edgeObj,a=THe(e,t,n.v,n.w),s=a.path,u=a.lca,h=0,d=s[h],p=!0;r!==n.w;){if(i=e.node(r),p){for(;(d=s[h])!==u&&e.node(d).maxRank<i.rank;)h++;d===u&&(p=!1)}if(!p){for(;h<s.length-1&&e.node(d=s[h+1]).minRank<=i.rank;)h++;d=s[h]}e.setParent(r,d),r=e.successors(r)[0]}})}function THe(e,t,r,i){var n=[],a=[],s=Math.min(t[r].low,t[i].low),u=Math.max(t[r].lim,t[i].lim),h,d;h=r;do h=e.parent(h),n.push(h);while(h&&(t[h].low>s||u>t[h].lim));for(d=h,h=i;(h=e.parent(h))!==d;)a.push(h);return{path:n.concat(a.reverse()),lca:d}}function EHe(e){var t={},r=0;function i(n){var a=r;Rt(e.children(n),i),t[n]={low:a,lim:r++}}return Rt(e.children(),i),t}var CHe=D(()=>{vn()});function SHe(e,t){var r={};function i(n,a){var s=0,u=0,h=n.length,d=Rd(a);return Rt(a,function(p,g){var y=MHe(e,p),m=y?e.node(y).order:h;(y||p===d)&&(Rt(a.slice(u,g+1),function(x){Rt(e.predecessors(x),function(_){var E=e.node(_),w=E.order;(w<s||m<w)&&!(E.dummy&&e.node(x).dummy)&&tfe(r,_,x)})}),u=g+1,s=m)}),a}return Co(t,i),r}function AHe(e,t){var r={};function i(a,s,u,h,d){var p;Rt(Iv(s,u),function(g){p=a[g],e.node(p).dummy&&Rt(e.predecessors(p),function(y){var m=e.node(y);m.dummy&&(m.order<h||m.order>d)&&tfe(r,y,p)})})}function n(a,s){var u=-1,h,d=0;return Rt(s,function(p,g){if(e.node(p).dummy==="border"){var y=e.predecessors(p);y.length&&(h=e.node(y[0]).order,i(s,d,g,u,h),d=g,u=h)}i(s,d,s.length,h,a.length)}),s}return Co(t,n),r}function MHe(e,t){if(e.node(t).dummy)return P0(e.predecessors(t),function(r){return e.node(r).dummy})}function tfe(e,t,r){if(t>r){var i=t;t=r,r=i}var n=e[t];n||(e[t]=n={}),n[r]=!0}function LHe(e,t,r){if(t>r){var i=t;t=r,r=i}return!!e[t]&&Object.prototype.hasOwnProperty.call(e[t],r)}function RHe(e,t,r,i){var n={},a={},s={};return Rt(t,function(u){Rt(u,function(h,d){n[h]=h,a[h]=h,s[h]=d})}),Rt(t,function(u){var h=-1;Rt(u,function(d){var p=i(d);if(p.length){p=I_(p,function(_){return s[_]});for(var g=(p.length-1)/2,y=Math.floor(g),m=Math.ceil(g);y<=m;++y){var x=p[y];a[d]===d&&h<s[x]&&!LHe(r,d,x)&&(a[x]=d,a[d]=n[d]=n[x],h=s[x])}}})}),{root:n,align:a}}function DHe(e,t,r,i,n){var a={},s=IHe(e,t,r,n),u=n?"borderLeft":"borderRight";function h(g,y){for(var m=s.nodes(),x=m.pop(),_={};x;)_[x]?g(x):(_[x]=!0,m.push(x),m=m.concat(y(x))),x=m.pop()}function d(g){a[g]=s.inEdges(g).reduce(function(y,m){return Math.max(y,a[m.v]+s.edge(m))},0)}function p(g){var y=s.outEdges(g).reduce(function(x,_){return Math.min(x,a[_.w]-s.edge(_))},Number.POSITIVE_INFINITY),m=e.node(g);y!==Number.POSITIVE_INFINITY&&m.borderType!==u&&(a[g]=Math.max(a[g],y))}return h(d,s.predecessors.bind(s)),h(p,s.successors.bind(s)),Rt(i,function(g){a[g]=a[r[g]]}),a}function IHe(e,t,r,i){var n=new Vl,a=e.graph(),s=FHe(a.nodesep,a.edgesep,i);return Rt(t,function(u){var h;Rt(u,function(d){var p=r[d];if(n.setNode(p),h){var g=r[h],y=n.edge(g,p);n.setEdge(g,p,Math.max(s(e,d,h),y||0))}h=d})}),n}function NHe(e,t){return nI(ls(t),function(r){var i=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY;return e0e(r,function(a,s){var u=$He(e,s)/2;i=Math.max(a+u,i),n=Math.min(a-u,n)}),i-n})}function OHe(e,t){var r=ls(t),i=Dv(r),n=cm(r);Rt(["u","d"],function(a){Rt(["l","r"],function(s){var u=a+s,h=e[u],d;if(h!==t){var p=ls(h);d=s==="l"?i-Dv(p):n-cm(p),d&&(e[u]=i7(h,function(g){return g+d}))}})})}function BHe(e,t){return i7(e.ul,function(r,i){if(t)return e[t.toLowerCase()][i];var n=I_(fi(e,i));return(n[1]+n[2])/2})}function PHe(e){var t=hI(e),r=AC(SHe(e,t),AHe(e,t)),i={},n;Rt(["u","d"],function(s){n=s==="u"?t:ls(t).reverse(),Rt(["l","r"],function(u){u==="r"&&(n=fi(n,function(g){return ls(g).reverse()}));var h=(s==="u"?e.predecessors:e.successors).bind(e),d=RHe(e,n,r,h),p=DHe(e,n,d.root,d.align,u==="r");u==="r"&&(p=i7(p,function(g){return-g})),i[s+u]=p})});var a=NHe(e,i);return OHe(i,a),BHe(i,e.graph().align)}function FHe(e,t,r){return function(i,n,a){var s=i.node(n),u=i.node(a),h=0,d;if(h+=s.width/2,Object.prototype.hasOwnProperty.call(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":d=-s.width/2;break;case"r":d=s.width/2;break}if(d&&(h+=r?d:-d),d=0,h+=(s.dummy?t:e)/2,h+=(u.dummy?t:e)/2,h+=u.width/2,Object.prototype.hasOwnProperty.call(u,"labelpos"))switch(u.labelpos.toLowerCase()){case"l":d=u.width/2;break;case"r":d=-u.width/2;break}return d&&(h+=r?d:-d),d=0,h}}function $He(e,t){return e.node(t).width}var zHe=D(()=>{vn(),Qh(),wf()});function GHe(e){e=Tpe(e),UHe(e),t0e(PHe(e),function(t,r){e.node(r).x=t})}function UHe(e){var t=hI(e),r=e.graph().ranksep,i=0;Rt(t,function(n){var a=cm(fi(n,function(s){return e.node(s).height}));Rt(n,function(s){e.node(s).y=i+a/2}),i+=a+r})}var jHe=D(()=>{vn(),wf(),zHe()});function dI(e,t){var r=t&&t.debugTiming?dje:pje;r("layout",()=>{var i=r("  buildLayoutGraph",()=>WHe(e));r("  runLayout",()=>HHe(i,r)),r("  updateInputGraph",()=>VHe(e,i))})}function HHe(e,t){t("    makeSpaceForEdgeLabels",()=>YHe(e)),t("    removeSelfEdges",()=>rVe(e)),t("    acyclic",()=>aje(e)),t("    nestingGraph.run",()=>Yje(e)),t("    rank",()=>Vje(Tpe(e))),t("    injectEdgeLabelProxies",()=>qHe(e)),t("    removeEmptyRanks",()=>hje(e)),t("    nestingGraph.cleanup",()=>Kje(e)),t("    normalizeRanks",()=>uje(e)),t("    assignRankMinMax",()=>XHe(e)),t("    removeEdgeLabelProxies",()=>KHe(e)),t("    normalize.run",()=>_je(e)),t("    parentDummyChains",()=>kHe(e)),t("    addBorderSegments",()=>fje(e)),t("    order",()=>bHe(e)),t("    insertSelfEdges",()=>iVe(e)),t("    adjustCoordinateSystem",()=>mje(e)),t("    position",()=>GHe(e)),t("    positionSelfEdges",()=>nVe(e)),t("    removeBorderNodes",()=>tVe(e)),t("    normalize.undo",()=>kje(e)),t("    fixupEdgeLabelCoords",()=>JHe(e)),t("    undoCoordinateSystem",()=>yje(e)),t("    translateGraph",()=>ZHe(e)),t("    assignNodeIntersects",()=>QHe(e)),t("    reversePoints",()=>eVe(e)),t("    acyclic.undo",()=>oje(e))}function VHe(e,t){Rt(e.nodes(),function(r){var i=e.node(r),n=t.node(r);i&&(i.x=n.x,i.y=n.y,t.children(r).length&&(i.width=n.width,i.height=n.height))}),Rt(e.edges(),function(r){var i=e.edge(r),n=t.edge(r);i.points=n.points,Object.prototype.hasOwnProperty.call(n,"x")&&(i.x=n.x,i.y=n.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}function WHe(e){var t=new Vl({multigraph:!0,compound:!0}),r=RV(e.graph());return t.setGraph(AC({},ife,LV(r,rfe),n7(r,nfe))),Rt(e.nodes(),function(i){var n=RV(e.node(i));t.setNode(i,e7(LV(n,afe),sfe)),t.setParent(i,e.parent(i))}),Rt(e.edges(),function(i){var n=RV(e.edge(i));t.setEdge(i,AC({},lfe,LV(n,ofe),n7(n,ufe)))}),t}function YHe(e){var t=e.graph();t.ranksep/=2,Rt(e.edges(),function(r){var i=e.edge(r);i.minlen*=2,i.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?i.width+=i.labeloffset:i.height+=i.labeloffset)})}function qHe(e){Rt(e.edges(),function(t){var r=e.edge(t);if(r.width&&r.height){var i=e.node(t.v),n=e.node(t.w),a={rank:(n.rank-i.rank)/2+i.rank,e:t};N_(e,"edge-proxy",a,"_ep")}})}function XHe(e){var t=0;Rt(e.nodes(),function(r){var i=e.node(r);i.borderTop&&(i.minRank=e.node(i.borderTop).rank,i.maxRank=e.node(i.borderBottom).rank,t=cm(t,i.maxRank))}),e.graph().maxRank=t}function KHe(e){Rt(e.nodes(),function(t){var r=e.node(t);r.dummy==="edge-proxy"&&(e.edge(r.e).labelRank=r.rank,e.removeNode(t))})}function ZHe(e){var t=Number.POSITIVE_INFINITY,r=0,i=Number.POSITIVE_INFINITY,n=0,a=e.graph(),s=a.marginx||0,u=a.marginy||0;function h(d){var p=d.x,g=d.y,y=d.width,m=d.height;t=Math.min(t,p-y/2),r=Math.max(r,p+y/2),i=Math.min(i,g-m/2),n=Math.max(n,g+m/2)}Rt(e.nodes(),function(d){h(e.node(d))}),Rt(e.edges(),function(d){var p=e.edge(d);Object.prototype.hasOwnProperty.call(p,"x")&&h(p)}),t-=s,i-=u,Rt(e.nodes(),function(d){var p=e.node(d);p.x-=t,p.y-=i}),Rt(e.edges(),function(d){var p=e.edge(d);Rt(p.points,function(g){g.x-=t,g.y-=i}),Object.prototype.hasOwnProperty.call(p,"x")&&(p.x-=t),Object.prototype.hasOwnProperty.call(p,"y")&&(p.y-=i)}),a.width=r-t+s,a.height=n-i+u}function QHe(e){Rt(e.edges(),function(t){var r=e.edge(t),i=e.node(t.v),n=e.node(t.w),a,s;r.points?(a=r.points[0],s=r.points[r.points.length-1]):(r.points=[],a=n,s=i),r.points.unshift(Epe(i,a)),r.points.push(Epe(n,s))})}function JHe(e){Rt(e.edges(),function(t){var r=e.edge(t);if(Object.prototype.hasOwnProperty.call(r,"x"))switch((r.labelpos==="l"||r.labelpos==="r")&&(r.width-=r.labeloffset),r.labelpos){case"l":r.x-=r.width/2+r.labeloffset;break;case"r":r.x+=r.width/2+r.labeloffset;break}})}function eVe(e){Rt(e.edges(),function(t){var r=e.edge(t);r.reversed&&r.points.reverse()})}function tVe(e){Rt(e.nodes(),function(t){if(e.children(t).length){var r=e.node(t),i=e.node(r.borderTop),n=e.node(r.borderBottom),a=e.node(Rd(r.borderLeft)),s=e.node(Rd(r.borderRight));r.width=Math.abs(s.x-a.x),r.height=Math.abs(n.y-i.y),r.x=a.x+r.width/2,r.y=i.y+r.height/2}}),Rt(e.nodes(),function(t){e.node(t).dummy==="border"&&e.removeNode(t)})}function rVe(e){Rt(e.edges(),function(t){if(t.v===t.w){var r=e.node(t.v);r.selfEdges||(r.selfEdges=[]),r.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function iVe(e){var t=hI(e);Rt(t,function(r){var i=0;Rt(r,function(n,a){var s=e.node(n);s.order=a+i,Rt(s.selfEdges,function(u){N_(e,"selfedge",{width:u.label.width,height:u.label.height,rank:s.rank,order:a+ ++i,e:u.e,label:u.label},"_se")}),delete s.selfEdges})})}function nVe(e){Rt(e.nodes(),function(t){var r=e.node(t);if(r.dummy==="selfedge"){var i=e.node(r.e.v),n=i.x+i.width/2,a=i.y,s=r.x-n,u=i.height/2;e.setEdge(r.e,r.label),e.removeNode(t),r.label.points=[{x:n+2*s/3,y:a-u},{x:n+5*s/6,y:a-u},{x:n+s,y:a},{x:n+5*s/6,y:a+u},{x:n+2*s/3,y:a+u}],r.label.x=r.x,r.label.y=r.y}})}function LV(e,t){return i7(n7(e,t),Number)}function RV(e){var t={};return Rt(e,function(r,i){t[i.toLowerCase()]=r}),t}var rfe,ife,nfe,afe,sfe,ofe,lfe,ufe,aVe=D(()=>{vn(),Qh(),gje(),bje(),kpe(),Rpe(),Xpe(),Zje(),wHe(),CHe(),jHe(),wf(),rfe=["nodesep","edgesep","ranksep","marginx","marginy"],ife={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},nfe=["acyclicer","ranker","rankdir","align"],afe=["width","height"],sfe={width:0,height:0},ofe=["minlen","weight","width","height","labeloffset"],lfe={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},ufe=["labelpos"]}),pI=D(()=>{kpe(),aVe(),Rpe(),Xpe()});function $0(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:sVe(e),edges:oVe(e)};return qa(e.graph())||(t.value=jo(e.graph())),t}function sVe(e){return fi(e.nodes(),function(t){var r=e.node(t),i=e.parent(t),n={v:t};return qa(r)||(n.value=r),qa(i)||(n.parent=i),n})}function oVe(e){return fi(e.edges(),function(t){var r=e.edge(t),i={v:t.v,w:t.w};return qa(t.name)||(i.name=t.name),qa(r)||(i.value=r),i})}var hfe=D(()=>{vn(),_V()}),cfe={};oi(cfe,{render:()=>yfe});var ca,pm,DV,dfe,l7,pfe,IV,NV,ffe,O_,OV,gfe,BV,PV,mfe,FV,yfe,lVe=D(()=>{sm(),B0(),Oh(),xf(),uh(),ch(),Os(),Qn(),pI(),hfe(),Qh(),Qh(),hfe(),ca=new Map,pm=new Map,DV=new Map,dfe=k(()=>{pm.clear(),DV.clear(),ca.clear()},"clear"),l7=k((e,t)=>{let r=pm.get(t)||[];return Ce.trace("In isDescendant",t," ",e," = ",r.includes(e)),r.includes(e)},"isDescendant"),pfe=k((e,t)=>{let r=pm.get(t)||[];return Ce.info("Descendants of ",t," is ",r),Ce.info("Edge is ",e),e.v===t||e.w===t?!1:r?r.includes(e.v)||l7(e.v,t)||l7(e.w,t)||r.includes(e.w):(Ce.debug("Tilt, ",t,",not in descendants"),!1)},"edgeInCluster"),IV=k((e,t,r,i)=>{Ce.warn("Copying children of ",e,"root",i,"data",t.node(e),i);let n=t.children(e)||[];e!==i&&n.push(e),Ce.warn("Copying (nodes) clusterId",e,"nodes",n),n.forEach(a=>{if(t.children(a).length>0)IV(a,t,r,i);else{let s=t.node(a);Ce.info("cp ",a," to ",i," with parent ",e),r.setNode(a,s),i!==t.parent(a)&&(Ce.warn("Setting parent",a,t.parent(a)),r.setParent(a,t.parent(a))),e!==i&&a!==e?(Ce.debug("Setting parent",a,e),r.setParent(a,e)):(Ce.info("In copy ",e,"root",i,"data",t.node(e),i),Ce.debug("Not Setting parent for node=",a,"cluster!==rootId",e!==i,"node!==clusterId",a!==e));let u=t.edges(a);Ce.debug("Copying Edges",u),u.forEach(h=>{Ce.info("Edge",h);let d=t.edge(h.v,h.w,h.name);Ce.info("Edge data",d,i);try{pfe(h,i)?(Ce.info("Copying as ",h.v,h.w,d,h.name),r.setEdge(h.v,h.w,d,h.name),Ce.info("newGraph edges ",r.edges(),r.edge(r.edges()[0]))):Ce.info("Skipping copy of edge ",h.v,"-->",h.w," rootId: ",i," clusterId:",e)}catch(p){Ce.error(p)}})}Ce.debug("Removing node",a),t.removeNode(a)})},"copy"),NV=k((e,t)=>{let r=t.children(e),i=[...r];for(let n of r)DV.set(n,e),i=[...i,...NV(n,t)];return i},"extractDescendants"),ffe=k((e,t,r)=>{let i=e.edges().filter(u=>u.v===t||u.w===t),n=e.edges().filter(u=>u.v===r||u.w===r),a=i.map(u=>({v:u.v===t?r:u.v,w:u.w===t?t:u.w})),s=n.map(u=>({v:u.v,w:u.w}));return a.filter(u=>s.some(h=>u.v===h.v&&u.w===h.w))},"findCommonEdges"),O_=k((e,t,r)=>{let i=t.children(e);if(Ce.trace("Searching children of id ",e,i),i.length<1)return e;let n;for(let a of i){let s=O_(a,t,r),u=ffe(t,r,s);if(s)if(u.length>0)n=s;else return s}return n},"findNonClusterChild"),OV=k(e=>!ca.has(e)||!ca.get(e).externalConnections?e:ca.has(e)?ca.get(e).id:e,"getAnchorId"),gfe=k((e,t)=>{if(!e||t>10){Ce.debug("Opting out, no graph ");return}else Ce.debug("Opting in, graph ");e.nodes().forEach(function(r){e.children(r).length>0&&(Ce.warn("Cluster identified",r," Replacement id in edges: ",O_(r,e,r)),pm.set(r,NV(r,e)),ca.set(r,{id:O_(r,e,r),clusterData:e.node(r)}))}),e.nodes().forEach(function(r){let i=e.children(r),n=e.edges();i.length>0?(Ce.debug("Cluster identified",r,pm),n.forEach(a=>{let s=l7(a.v,r),u=l7(a.w,r);s^u&&(Ce.warn("Edge: ",a," leaves cluster ",r),Ce.warn("Descendants of XXX ",r,": ",pm.get(r)),ca.get(r).externalConnections=!0)})):Ce.debug("Not a cluster ",r,pm)});for(let r of ca.keys()){let i=ca.get(r).id,n=e.parent(i);n!==r&&ca.has(n)&&!ca.get(n).externalConnections&&(ca.get(r).id=n)}e.edges().forEach(function(r){let i=e.edge(r);Ce.warn("Edge "+r.v+" -> "+r.w+": "+JSON.stringify(r)),Ce.warn("Edge "+r.v+" -> "+r.w+": "+JSON.stringify(e.edge(r)));let n=r.v,a=r.w;if(Ce.warn("Fix XXX",ca,"ids:",r.v,r.w,"Translating: ",ca.get(r.v)," --- ",ca.get(r.w)),ca.get(r.v)||ca.get(r.w)){if(Ce.warn("Fixing and trying - removing XXX",r.v,r.w,r.name),n=OV(r.v),a=OV(r.w),e.removeEdge(r.v,r.w,r.name),n!==r.v){let s=e.parent(n);ca.get(s).externalConnections=!0,i.fromCluster=r.v}if(a!==r.w){let s=e.parent(a);ca.get(s).externalConnections=!0,i.toCluster=r.w}Ce.warn("Fix Replacing with XXX",n,a,r.name),e.setEdge(n,a,i,r.name)}}),Ce.warn("Adjusted Graph",$0(e)),BV(e,0),Ce.trace(ca)},"adjustClustersAndEdges"),BV=k((e,t)=>{if(Ce.warn("extractor - ",t,$0(e),e.children("D")),t>10){Ce.error("Bailing out");return}let r=e.nodes(),i=!1;for(let n of r){let a=e.children(n);i=i||a.length>0}if(!i){Ce.debug("Done, no node has children",e.nodes());return}Ce.debug("Nodes = ",r,t);for(let n of r)if(Ce.debug("Extracting node",n,ca,ca.has(n)&&!ca.get(n).externalConnections,!e.parent(n),e.node(n),e.children("D")," Depth ",t),!ca.has(n))Ce.debug("Not a cluster",n,t);else if(!ca.get(n).externalConnections&&e.children(n)&&e.children(n).length>0){Ce.warn("Cluster without external connections, without a parent and with children",n,t);let a=e.graph().rankdir==="TB"?"LR":"TB";ca.get(n)?.clusterData?.dir&&(a=ca.get(n).clusterData.dir,Ce.warn("Fixing dir",ca.get(n).clusterData.dir,a));let s=new Vl({multigraph:!0,compound:!0}).setGraph({rankdir:a,nodesep:50,ranksep:50,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});Ce.warn("Old graph before copy",$0(e)),IV(n,e,s,n),e.setNode(n,{clusterNode:!0,id:n,clusterData:ca.get(n).clusterData,label:ca.get(n).label,graph:s}),Ce.warn("New graph after copy node: (",n,")",$0(s)),Ce.debug("Old graph after copy",$0(e))}else Ce.warn("Cluster ** ",n," **not meeting the criteria !externalConnections:",!ca.get(n).externalConnections," no parent: ",!e.parent(n)," children ",e.children(n)&&e.children(n).length>0,e.children("D"),t),Ce.debug(ca);r=e.nodes(),Ce.warn("New list of nodes",r);for(let n of r){let a=e.node(n);Ce.warn(" Now next level",n,a),a?.clusterNode&&BV(a.graph,t+1)}},"extractor"),PV=k((e,t)=>{if(t.length===0)return[];let r=Object.assign([],t);return t.forEach(i=>{let n=e.children(i),a=PV(e,n);r=[...r,...a]}),r},"sorter"),mfe=k(e=>PV(e,e.children()),"sortNodesByHierarchy"),FV=k(async(e,t,r,i,n,a)=>{Ce.warn("Graph in recursive render:XAX",$0(t),n);let s=t.graph().rankdir;Ce.trace("Dir in recursive render - dir:",s);let u=e.insert("g").attr("class","root");t.nodes()?Ce.info("Recursive render XXX",t.nodes()):Ce.info("No nodes found for",t),t.edges().length>0&&Ce.info("Recursive edges",t.edge(t.edges()[0]));let h=u.insert("g").attr("class","clusters"),d=u.insert("g").attr("class","edgePaths"),p=u.insert("g").attr("class","edgeLabels"),g=u.insert("g").attr("class","nodes");await Promise.all(t.nodes().map(async function(x){let _=t.node(x);if(n!==void 0){let E=JSON.parse(JSON.stringify(n.clusterData));Ce.trace(`Setting data for parent cluster XXX
 Node.id = `,x,`
 data=`,E.height,`
Parent cluster`,n.height),t.setNode(n.id,E),t.parent(x)||(Ce.trace("Setting parent",x,n.id),t.setParent(x,n.id,E))}if(Ce.info("(Insert) Node XXX"+x+": "+JSON.stringify(t.node(x))),_?.clusterNode){Ce.info("Cluster identified XBX",x,_.width,t.node(x));let{ranksep:E,nodesep:w}=t.graph();_.graph.setGraph({..._.graph.graph(),ranksep:E+25,nodesep:w});let C=await FV(g,_.graph,r,i,t.node(x),a),A=C.elem;yn(_,A),_.diff=C.diff||0,Ce.info("New compound node after recursive render XAX",x,"width",_.width,"height",_.height),Ble(A,_)}else t.children(x).length>0?(Ce.trace("Cluster - the non recursive path XBX",x,_.id,_,_.width,"Graph:",t),Ce.trace(O_(_.id,t)),ca.set(_.id,{id:O_(_.id,t),node:_})):(Ce.trace("Node - the non recursive path XAX",x,g,t.node(x),s),await ID(g,t.node(x),{config:a,dir:s}))})),await k(async()=>{let x=t.edges().map(async function(_){let E=t.edge(_.v,_.w,_.name);Ce.info("Edge "+_.v+" -> "+_.w+": "+JSON.stringify(_)),Ce.info("Edge "+_.v+" -> "+_.w+": ",_," ",JSON.stringify(t.edge(_))),Ce.info("Fix",ca,"ids:",_.v,_.w,"Translating: ",ca.get(_.v),ca.get(_.w)),await Yj(p,E)});await Promise.all(x)},"processEdges")(),Ce.info("Graph before layout:",JSON.stringify($0(t))),Ce.info("############################################# XXX"),Ce.info("###                Layout                 ### XXX"),Ce.info("############################################# XXX"),dI(t),Ce.info("Graph after layout:",JSON.stringify($0(t)));let y=0,{subGraphTitleTotalMargin:m}=Xp(a);return await Promise.all(mfe(t).map(async function(x){let _=t.node(x);if(Ce.info("Position XBX => "+x+": ("+_.x,","+_.y,") width: ",_.width," height: ",_.height),_?.clusterNode)_.y+=m,Ce.info("A tainted cluster node XBX1",x,_.id,_.width,_.height,_.x,_.y,t.parent(x)),ca.get(_.id).node=_,BD(_);else if(t.children(x).length>0){Ce.info("A pure cluster node XBX1",x,_.id,_.x,_.y,_.width,_.height,t.parent(x)),_.height+=m,t.node(_.parentId);let E=_?.padding/2||0,w=_?.labelBBox?.height||0,C=w-E||0;Ce.debug("OffsetY",C,"labelHeight",w,"halfPadding",E),await OD(h,_),ca.get(_.id).node=_}else{let E=t.node(_.parentId);_.y+=m/2,Ce.info("A regular node XBX1 - using the padding",_.id,"parent",_.parentId,_.width,_.height,_.x,_.y,"offsetY",_.offsetY,"parent",E,E?.offsetY,_),BD(_)}})),t.edges().forEach(function(x){let _=t.edge(x);Ce.info("Edge "+x.v+" -> "+x.w+": "+JSON.stringify(_),_),_.points.forEach(A=>A.y+=m/2);let E=t.node(x.v);var w=t.node(x.w);let C=Zj(d,_,ca,r,E,w,i);qj(_,C)}),t.nodes().forEach(function(x){let _=t.node(x);Ce.info(x,_.type,_.diff),_.isGroup&&(y=_.diff)}),Ce.warn("Returning from recursive render XAX",u,y),{elem:u,diff:y}},"recursiveRender"),yfe=k(async(e,t)=>{let r=new Vl({multigraph:!0,compound:!0}).setGraph({rankdir:e.direction,nodesep:e.config?.nodeSpacing||e.config?.flowchart?.nodeSpacing||e.nodeSpacing,ranksep:e.config?.rankSpacing||e.config?.flowchart?.rankSpacing||e.rankSpacing,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}}),i=t.select("g");Qj(i,e.markers,e.type,e.diagramId),Ple(),Gle(),yle(),dfe(),e.nodes.forEach(a=>{r.setNode(a.id,{...a}),a.parentId&&r.setParent(a.id,a.parentId)}),Ce.debug("Edges:",e.edges),e.edges.forEach(a=>{if(a.start===a.end){let s=a.start,u=s+"---"+s+"---1",h=s+"---"+s+"---2",d=r.node(s);r.setNode(u,{domId:u,id:u,parentId:d.parentId,labelStyle:"",label:"",padding:0,shape:"labelRect",style:"",width:10,height:10}),r.setParent(u,d.parentId),r.setNode(h,{domId:h,id:h,parentId:d.parentId,labelStyle:"",padding:0,shape:"labelRect",label:"",style:"",width:10,height:10}),r.setParent(h,d.parentId);let p=structuredClone(a),g=structuredClone(a),y=structuredClone(a);p.label="",p.arrowTypeEnd="none",p.id=s+"-cyclic-special-1",g.arrowTypeEnd="none",g.id=s+"-cyclic-special-mid",y.label="",d.isGroup&&(p.fromCluster=s,y.toCluster=s),y.id=s+"-cyclic-special-2",r.setEdge(s,u,p,s+"-cyclic-special-0"),r.setEdge(u,h,g,s+"-cyclic-special-1"),r.setEdge(h,s,y,s+"-cyc<lic-special-2")}else r.setEdge(a.start,a.end,{...a},a.id)}),Ce.warn("Graph at first:",JSON.stringify($0(r))),gfe(r),Ce.warn("Graph after XAX:",JSON.stringify($0(r)));let n=at();await FV(i,r,e.type,e.diagramId,void 0,n)},"render")}),vfe,B_,$V,xfe,fI,zV,fm=D(()=>{sm(),B0(),Os(),Qn(),vfe={common:zr,getConfig:cs,insertCluster:OD,insertEdge:Zj,insertEdgeLabel:Yj,insertMarkers:Qj,insertNode:ID,interpolateToCurve:rj,labelHelper:Bn,log:Ce,positionEdgeLabel:qj},B_={},$V=k(e=>{for(let t of e)B_[t.name]=t},"registerLayoutLoaders"),xfe=k(()=>{$V([{name:"dagre",loader:k(async()=>await Promise.resolve().then(()=>(lVe(),cfe)),"loader")}])},"registerDefaultLayoutLoaders"),xfe(),fI=k(async(e,t)=>{if(!(e.layoutAlgorithm in B_))throw new Error(`Unknown layout algorithm: ${e.layoutAlgorithm}`);let r=B_[e.layoutAlgorithm];return(await r.loader()).render(e,t,vfe,{algorithm:r.algorithm})},"render"),zV=k((e="",{fallback:t="dagre"}={})=>{if(e in B_)return e;if(t in B_)return Ce.warn(`Layout algorithm ${e} is not registered. Using ${t} as fallback.`),t;throw new Error(`Both layout algorithms ${e} and ${t} are not registered.`)},"getRegisteredLayoutAlgorithm")}),gI,bfe=D(()=>{gI="11.4.1"}),kf,gm=D(()=>{Qn(),ha(),kf=k(e=>{let{securityLevel:t}=at(),r=Nr("body");if(t==="sandbox"){let i=Nr(`#i${e}`).node()?.contentDocument??document;r=Nr(i.body)}return r.select(`#${e}`)},"selectSvgElement")}),GV,u7,UV,_fe,wfe,kfe,mm,mI,jV=D(()=>{Qn(),GV=Ke(_2(),1),u7=k((e,t)=>{let r=e.append("rect");if(r.attr("x",t.x),r.attr("y",t.y),r.attr("fill",t.fill),r.attr("stroke",t.stroke),r.attr("width",t.width),r.attr("height",t.height),t.name&&r.attr("name",t.name),t.rx&&r.attr("rx",t.rx),t.ry&&r.attr("ry",t.ry),t.attrs!==void 0)for(let i in t.attrs)r.attr(i,t.attrs[i]);return t.class&&r.attr("class",t.class),r},"drawRect"),UV=k((e,t)=>{let r={x:t.startx,y:t.starty,width:t.stopx-t.startx,height:t.stopy-t.starty,fill:t.fill,stroke:t.stroke,class:"rect"};u7(e,r).lower()},"drawBackgroundRect"),_fe=k((e,t)=>{let r=t.text.replace(bc," "),i=e.append("text");i.attr("x",t.x),i.attr("y",t.y),i.attr("class","legend"),i.style("text-anchor",t.anchor),t.class&&i.attr("class",t.class);let n=i.append("tspan");return n.attr("x",t.x+t.textMargin*2),n.text(r),i},"drawText"),wfe=k((e,t,r,i)=>{let n=e.append("image");n.attr("x",t),n.attr("y",r);let a=(0,GV.sanitizeUrl)(i);n.attr("xlink:href",a)},"drawImage"),kfe=k((e,t,r,i)=>{let n=e.append("use");n.attr("x",t),n.attr("y",r);let a=(0,GV.sanitizeUrl)(i);n.attr("xlink:href",`#${a}`)},"drawEmbeddedImage"),mm=k(()=>({x:0,y:0,width:100,height:100,fill:"#EDF2AE",stroke:"#666",anchor:"start",rx:0,ry:0}),"getNoteRect"),mI=k(()=>({x:0,y:0,width:100,height:100,"text-anchor":"start",style:"#666",textMargin:0,rx:0,ry:0,tspan:!0}),"getTextObj")}),Tfe={};oi(Tfe,{diagram:()=>bge});function $c(e,t,r,i,n){if(!t[e].width)if(r)t[e].text=dj(t[e].text,n,i),t[e].textLines=t[e].text.split(zr.lineBreakRegex).length,t[e].width=n,t[e].height=uD(t[e].text,i);else{let a=t[e].text.split(zr.lineBreakRegex);t[e].textLines=a.length;let s=0;t[e].height=0,t[e].width=0;for(let u of a)t[e].width=Math.max(Oc(u,i),t[e].width),s=uD(u,i),t[e].height=t[e].height+s}}function HV(e,t,r,i,n){let a=new XV(n);a.data.widthLimit=r.data.widthLimit/Math.min(_I,i.length);for(let[s,u]of i.entries()){let h=0;u.image={width:0,height:0,Y:0},u.sprite&&(u.image.width=48,u.image.height=48,u.image.Y=h,h=u.image.Y+u.image.height);let d=u.wrap&&sn.wrap,p=g7(sn);if(p.fontSize=p.fontSize+2,p.fontWeight="bold",$c("label",u,d,p,a.data.widthLimit),u.label.Y=h+8,h=u.label.Y+u.label.height,u.type&&u.type.text!==""){u.type.text="["+u.type.text+"]";let x=g7(sn);$c("type",u,d,x,a.data.widthLimit),u.type.Y=h+5,h=u.type.Y+u.type.height}if(u.descr&&u.descr.text!==""){let x=g7(sn);x.fontSize=x.fontSize-2,$c("descr",u,d,x,a.data.widthLimit),u.descr.Y=h+20,h=u.descr.Y+u.descr.height}if(s==0||s%_I===0){let x=r.data.startx+sn.diagramMarginX,_=r.data.stopy+sn.diagramMarginY+h;a.setData(x,x,_,_)}else{let x=a.data.stopx!==a.data.startx?a.data.stopx+sn.diagramMarginX:a.data.startx,_=a.data.starty;a.setData(x,x,_,_)}a.name=u.alias;let g=n.db.getC4ShapeArray(u.alias),y=n.db.getC4ShapeKeys(u.alias);y.length>0&&ZV(a,e,g,y),t=u.alias;let m=n.db.getBoundarys(t);m.length>0&&HV(e,t,a,m,n),u.alias!=="global"&&KV(e,u,a),r.data.stopy=Math.max(a.data.stopy+sn.c4ShapeMargin,r.data.stopy),r.data.stopx=Math.max(a.data.stopx+sn.c4ShapeMargin,r.data.stopx),p7=Math.max(p7,r.data.stopx),f7=Math.max(f7,r.data.stopy)}}var Efe,h7,Cfe,zc,Tf,du,Gc,Dd,P_,yI,vI,c7,d7,Sfe,Afe,Mfe,Lfe,Rfe,Dfe,Ife,Nfe,Ofe,Bfe,Pfe,Ffe,$fe,zfe,Gfe,Ufe,jfe,Hfe,VV,Vfe,Wfe,WV,Yfe,qfe,Xfe,Kfe,Ef,Zfe,Qfe,Jfe,ege,tge,xI,bI,YV,rge,ige,nge,age,sge,oge,lge,uge,hge,cge,dge,pge,z0,Id,p7,f7,qV,_I,sn,XV,wI,F_,g7,fge,KV,ZV,Jh,QV,gge,mge,yge,JV,vge,xge,bge,uVe=D(()=>{jV(),Os(),Qn(),ha(),Efe=Ke(_2(),1),h7=function(){var e=k(function(fr,Mt,Kt,ne){for(Kt=Kt||{},ne=fr.length;ne--;Kt[fr[ne]]=Mt);return Kt},"o"),t=[1,24],r=[1,25],i=[1,26],n=[1,27],a=[1,28],s=[1,63],u=[1,64],h=[1,65],d=[1,66],p=[1,67],g=[1,68],y=[1,69],m=[1,29],x=[1,30],_=[1,31],E=[1,32],w=[1,33],C=[1,34],A=[1,35],M=[1,36],N=[1,37],B=[1,38],O=[1,39],L=[1,40],$=[1,41],G=[1,42],z=[1,43],F=[1,44],X=[1,45],I=[1,46],j=[1,47],H=[1,48],V=[1,50],P=[1,51],q=[1,52],Z=[1,53],J=[1,54],ae=[1,55],ue=[1,56],be=[1,57],Le=[1,58],xe=[1,59],Ae=[1,60],oe=[14,42],he=[14,34,36,37,38,39,40,41,42,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],le=[12,14,34,36,37,38,39,40,41,42,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],ke=[1,82],pe=[1,83],qe=[1,84],me=[1,85],st=[12,14,42],we=[12,14,33,42],Et=[12,14,33,42,76,77,79,80],wt=[12,33],Tt=[34,36,37,38,39,40,41,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],er={trace:k(function(){},"trace"),yy:{},symbols_:{error:2,start:3,mermaidDoc:4,direction:5,direction_tb:6,direction_bt:7,direction_rl:8,direction_lr:9,graphConfig:10,C4_CONTEXT:11,NEWLINE:12,statements:13,EOF:14,C4_CONTAINER:15,C4_COMPONENT:16,C4_DYNAMIC:17,C4_DEPLOYMENT:18,otherStatements:19,diagramStatements:20,otherStatement:21,title:22,accDescription:23,acc_title:24,acc_title_value:25,acc_descr:26,acc_descr_value:27,acc_descr_multiline_value:28,boundaryStatement:29,boundaryStartStatement:30,boundaryStopStatement:31,boundaryStart:32,LBRACE:33,ENTERPRISE_BOUNDARY:34,attributes:35,SYSTEM_BOUNDARY:36,BOUNDARY:37,CONTAINER_BOUNDARY:38,NODE:39,NODE_L:40,NODE_R:41,RBRACE:42,diagramStatement:43,PERSON:44,PERSON_EXT:45,SYSTEM:46,SYSTEM_DB:47,SYSTEM_QUEUE:48,SYSTEM_EXT:49,SYSTEM_EXT_DB:50,SYSTEM_EXT_QUEUE:51,CONTAINER:52,CONTAINER_DB:53,CONTAINER_QUEUE:54,CONTAINER_EXT:55,CONTAINER_EXT_DB:56,CONTAINER_EXT_QUEUE:57,COMPONENT:58,COMPONENT_DB:59,COMPONENT_QUEUE:60,COMPONENT_EXT:61,COMPONENT_EXT_DB:62,COMPONENT_EXT_QUEUE:63,REL:64,BIREL:65,REL_U:66,REL_D:67,REL_L:68,REL_R:69,REL_B:70,REL_INDEX:71,UPDATE_EL_STYLE:72,UPDATE_REL_STYLE:73,UPDATE_LAYOUT_CONFIG:74,attribute:75,STR:76,STR_KEY:77,STR_VALUE:78,ATTRIBUTE:79,ATTRIBUTE_EMPTY:80,$accept:0,$end:1},terminals_:{2:"error",6:"direction_tb",7:"direction_bt",8:"direction_rl",9:"direction_lr",11:"C4_CONTEXT",12:"NEWLINE",14:"EOF",15:"C4_CONTAINER",16:"C4_COMPONENT",17:"C4_DYNAMIC",18:"C4_DEPLOYMENT",22:"title",23:"accDescription",24:"acc_title",25:"acc_title_value",26:"acc_descr",27:"acc_descr_value",28:"acc_descr_multiline_value",33:"LBRACE",34:"ENTERPRISE_BOUNDARY",36:"SYSTEM_BOUNDARY",37:"BOUNDARY",38:"CONTAINER_BOUNDARY",39:"NODE",40:"NODE_L",41:"NODE_R",42:"RBRACE",44:"PERSON",45:"PERSON_EXT",46:"SYSTEM",47:"SYSTEM_DB",48:"SYSTEM_QUEUE",49:"SYSTEM_EXT",50:"SYSTEM_EXT_DB",51:"SYSTEM_EXT_QUEUE",52:"CONTAINER",53:"CONTAINER_DB",54:"CONTAINER_QUEUE",55:"CONTAINER_EXT",56:"CONTAINER_EXT_DB",57:"CONTAINER_EXT_QUEUE",58:"COMPONENT",59:"COMPONENT_DB",60:"COMPONENT_QUEUE",61:"COMPONENT_EXT",62:"COMPONENT_EXT_DB",63:"COMPONENT_EXT_QUEUE",64:"REL",65:"BIREL",66:"REL_U",67:"REL_D",68:"REL_L",69:"REL_R",70:"REL_B",71:"REL_INDEX",72:"UPDATE_EL_STYLE",73:"UPDATE_REL_STYLE",74:"UPDATE_LAYOUT_CONFIG",76:"STR",77:"STR_KEY",78:"STR_VALUE",79:"ATTRIBUTE",80:"ATTRIBUTE_EMPTY"},productions_:[0,[3,1],[3,1],[5,1],[5,1],[5,1],[5,1],[4,1],[10,4],[10,4],[10,4],[10,4],[10,4],[13,1],[13,1],[13,2],[19,1],[19,2],[19,3],[21,1],[21,1],[21,2],[21,2],[21,1],[29,3],[30,3],[30,3],[30,4],[32,2],[32,2],[32,2],[32,2],[32,2],[32,2],[32,2],[31,1],[20,1],[20,2],[20,3],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,1],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[35,1],[35,2],[75,1],[75,2],[75,1],[75,1]],performAction:k(function(fr,Mt,Kt,ne,He,Te,Qe){var ce=Te.length-1;switch(He){case 3:ne.setDirection("TB");break;case 4:ne.setDirection("BT");break;case 5:ne.setDirection("RL");break;case 6:ne.setDirection("LR");break;case 8:case 9:case 10:case 11:case 12:ne.setC4Type(Te[ce-3]);break;case 19:ne.setTitle(Te[ce].substring(6)),this.$=Te[ce].substring(6);break;case 20:ne.setAccDescription(Te[ce].substring(15)),this.$=Te[ce].substring(15);break;case 21:this.$=Te[ce].trim(),ne.setTitle(this.$);break;case 22:case 23:this.$=Te[ce].trim(),ne.setAccDescription(this.$);break;case 28:Te[ce].splice(2,0,"ENTERPRISE"),ne.addPersonOrSystemBoundary(...Te[ce]),this.$=Te[ce];break;case 29:Te[ce].splice(2,0,"SYSTEM"),ne.addPersonOrSystemBoundary(...Te[ce]),this.$=Te[ce];break;case 30:ne.addPersonOrSystemBoundary(...Te[ce]),this.$=Te[ce];break;case 31:Te[ce].splice(2,0,"CONTAINER"),ne.addContainerBoundary(...Te[ce]),this.$=Te[ce];break;case 32:ne.addDeploymentNode("node",...Te[ce]),this.$=Te[ce];break;case 33:ne.addDeploymentNode("nodeL",...Te[ce]),this.$=Te[ce];break;case 34:ne.addDeploymentNode("nodeR",...Te[ce]),this.$=Te[ce];break;case 35:ne.popBoundaryParseStack();break;case 39:ne.addPersonOrSystem("person",...Te[ce]),this.$=Te[ce];break;case 40:ne.addPersonOrSystem("external_person",...Te[ce]),this.$=Te[ce];break;case 41:ne.addPersonOrSystem("system",...Te[ce]),this.$=Te[ce];break;case 42:ne.addPersonOrSystem("system_db",...Te[ce]),this.$=Te[ce];break;case 43:ne.addPersonOrSystem("system_queue",...Te[ce]),this.$=Te[ce];break;case 44:ne.addPersonOrSystem("external_system",...Te[ce]),this.$=Te[ce];break;case 45:ne.addPersonOrSystem("external_system_db",...Te[ce]),this.$=Te[ce];break;case 46:ne.addPersonOrSystem("external_system_queue",...Te[ce]),this.$=Te[ce];break;case 47:ne.addContainer("container",...Te[ce]),this.$=Te[ce];break;case 48:ne.addContainer("container_db",...Te[ce]),this.$=Te[ce];break;case 49:ne.addContainer("container_queue",...Te[ce]),this.$=Te[ce];break;case 50:ne.addContainer("external_container",...Te[ce]),this.$=Te[ce];break;case 51:ne.addContainer("external_container_db",...Te[ce]),this.$=Te[ce];break;case 52:ne.addContainer("external_container_queue",...Te[ce]),this.$=Te[ce];break;case 53:ne.addComponent("component",...Te[ce]),this.$=Te[ce];break;case 54:ne.addComponent("component_db",...Te[ce]),this.$=Te[ce];break;case 55:ne.addComponent("component_queue",...Te[ce]),this.$=Te[ce];break;case 56:ne.addComponent("external_component",...Te[ce]),this.$=Te[ce];break;case 57:ne.addComponent("external_component_db",...Te[ce]),this.$=Te[ce];break;case 58:ne.addComponent("external_component_queue",...Te[ce]),this.$=Te[ce];break;case 60:ne.addRel("rel",...Te[ce]),this.$=Te[ce];break;case 61:ne.addRel("birel",...Te[ce]),this.$=Te[ce];break;case 62:ne.addRel("rel_u",...Te[ce]),this.$=Te[ce];break;case 63:ne.addRel("rel_d",...Te[ce]),this.$=Te[ce];break;case 64:ne.addRel("rel_l",...Te[ce]),this.$=Te[ce];break;case 65:ne.addRel("rel_r",...Te[ce]),this.$=Te[ce];break;case 66:ne.addRel("rel_b",...Te[ce]),this.$=Te[ce];break;case 67:Te[ce].splice(0,1),ne.addRel("rel",...Te[ce]),this.$=Te[ce];break;case 68:ne.updateElStyle("update_el_style",...Te[ce]),this.$=Te[ce];break;case 69:ne.updateRelStyle("update_rel_style",...Te[ce]),this.$=Te[ce];break;case 70:ne.updateLayoutConfig("update_layout_config",...Te[ce]),this.$=Te[ce];break;case 71:this.$=[Te[ce]];break;case 72:Te[ce].unshift(Te[ce-1]),this.$=Te[ce];break;case 73:case 75:this.$=Te[ce].trim();break;case 74:let Ut={};Ut[Te[ce-1].trim()]=Te[ce].trim(),this.$=Ut;break;case 76:this.$="";break}},"anonymous"),table:[{3:1,4:2,5:3,6:[1,5],7:[1,6],8:[1,7],9:[1,8],10:4,11:[1,9],15:[1,10],16:[1,11],17:[1,12],18:[1,13]},{1:[3]},{1:[2,1]},{1:[2,2]},{1:[2,7]},{1:[2,3]},{1:[2,4]},{1:[2,5]},{1:[2,6]},{12:[1,14]},{12:[1,15]},{12:[1,16]},{12:[1,17]},{12:[1,18]},{13:19,19:20,20:21,21:22,22:t,23:r,24:i,26:n,28:a,29:49,30:61,32:62,34:s,36:u,37:h,38:d,39:p,40:g,41:y,43:23,44:m,45:x,46:_,47:E,48:w,49:C,50:A,51:M,52:N,53:B,54:O,55:L,56:$,57:G,58:z,59:F,60:X,61:I,62:j,63:H,64:V,65:P,66:q,67:Z,68:J,69:ae,70:ue,71:be,72:Le,73:xe,74:Ae},{13:70,19:20,20:21,21:22,22:t,23:r,24:i,26:n,28:a,29:49,30:61,32:62,34:s,36:u,37:h,38:d,39:p,40:g,41:y,43:23,44:m,45:x,46:_,47:E,48:w,49:C,50:A,51:M,52:N,53:B,54:O,55:L,56:$,57:G,58:z,59:F,60:X,61:I,62:j,63:H,64:V,65:P,66:q,67:Z,68:J,69:ae,70:ue,71:be,72:Le,73:xe,74:Ae},{13:71,19:20,20:21,21:22,22:t,23:r,24:i,26:n,28:a,29:49,30:61,32:62,34:s,36:u,37:h,38:d,39:p,40:g,41:y,43:23,44:m,45:x,46:_,47:E,48:w,49:C,50:A,51:M,52:N,53:B,54:O,55:L,56:$,57:G,58:z,59:F,60:X,61:I,62:j,63:H,64:V,65:P,66:q,67:Z,68:J,69:ae,70:ue,71:be,72:Le,73:xe,74:Ae},{13:72,19:20,20:21,21:22,22:t,23:r,24:i,26:n,28:a,29:49,30:61,32:62,34:s,36:u,37:h,38:d,39:p,40:g,41:y,43:23,44:m,45:x,46:_,47:E,48:w,49:C,50:A,51:M,52:N,53:B,54:O,55:L,56:$,57:G,58:z,59:F,60:X,61:I,62:j,63:H,64:V,65:P,66:q,67:Z,68:J,69:ae,70:ue,71:be,72:Le,73:xe,74:Ae},{13:73,19:20,20:21,21:22,22:t,23:r,24:i,26:n,28:a,29:49,30:61,32:62,34:s,36:u,37:h,38:d,39:p,40:g,41:y,43:23,44:m,45:x,46:_,47:E,48:w,49:C,50:A,51:M,52:N,53:B,54:O,55:L,56:$,57:G,58:z,59:F,60:X,61:I,62:j,63:H,64:V,65:P,66:q,67:Z,68:J,69:ae,70:ue,71:be,72:Le,73:xe,74:Ae},{14:[1,74]},e(oe,[2,13],{43:23,29:49,30:61,32:62,20:75,34:s,36:u,37:h,38:d,39:p,40:g,41:y,44:m,45:x,46:_,47:E,48:w,49:C,50:A,51:M,52:N,53:B,54:O,55:L,56:$,57:G,58:z,59:F,60:X,61:I,62:j,63:H,64:V,65:P,66:q,67:Z,68:J,69:ae,70:ue,71:be,72:Le,73:xe,74:Ae}),e(oe,[2,14]),e(he,[2,16],{12:[1,76]}),e(oe,[2,36],{12:[1,77]}),e(le,[2,19]),e(le,[2,20]),{25:[1,78]},{27:[1,79]},e(le,[2,23]),{35:80,75:81,76:ke,77:pe,79:qe,80:me},{35:86,75:81,76:ke,77:pe,79:qe,80:me},{35:87,75:81,76:ke,77:pe,79:qe,80:me},{35:88,75:81,76:ke,77:pe,79:qe,80:me},{35:89,75:81,76:ke,77:pe,79:qe,80:me},{35:90,75:81,76:ke,77:pe,79:qe,80:me},{35:91,75:81,76:ke,77:pe,79:qe,80:me},{35:92,75:81,76:ke,77:pe,79:qe,80:me},{35:93,75:81,76:ke,77:pe,79:qe,80:me},{35:94,75:81,76:ke,77:pe,79:qe,80:me},{35:95,75:81,76:ke,77:pe,79:qe,80:me},{35:96,75:81,76:ke,77:pe,79:qe,80:me},{35:97,75:81,76:ke,77:pe,79:qe,80:me},{35:98,75:81,76:ke,77:pe,79:qe,80:me},{35:99,75:81,76:ke,77:pe,79:qe,80:me},{35:100,75:81,76:ke,77:pe,79:qe,80:me},{35:101,75:81,76:ke,77:pe,79:qe,80:me},{35:102,75:81,76:ke,77:pe,79:qe,80:me},{35:103,75:81,76:ke,77:pe,79:qe,80:me},{35:104,75:81,76:ke,77:pe,79:qe,80:me},e(st,[2,59]),{35:105,75:81,76:ke,77:pe,79:qe,80:me},{35:106,75:81,76:ke,77:pe,79:qe,80:me},{35:107,75:81,76:ke,77:pe,79:qe,80:me},{35:108,75:81,76:ke,77:pe,79:qe,80:me},{35:109,75:81,76:ke,77:pe,79:qe,80:me},{35:110,75:81,76:ke,77:pe,79:qe,80:me},{35:111,75:81,76:ke,77:pe,79:qe,80:me},{35:112,75:81,76:ke,77:pe,79:qe,80:me},{35:113,75:81,76:ke,77:pe,79:qe,80:me},{35:114,75:81,76:ke,77:pe,79:qe,80:me},{35:115,75:81,76:ke,77:pe,79:qe,80:me},{20:116,29:49,30:61,32:62,34:s,36:u,37:h,38:d,39:p,40:g,41:y,43:23,44:m,45:x,46:_,47:E,48:w,49:C,50:A,51:M,52:N,53:B,54:O,55:L,56:$,57:G,58:z,59:F,60:X,61:I,62:j,63:H,64:V,65:P,66:q,67:Z,68:J,69:ae,70:ue,71:be,72:Le,73:xe,74:Ae},{12:[1,118],33:[1,117]},{35:119,75:81,76:ke,77:pe,79:qe,80:me},{35:120,75:81,76:ke,77:pe,79:qe,80:me},{35:121,75:81,76:ke,77:pe,79:qe,80:me},{35:122,75:81,76:ke,77:pe,79:qe,80:me},{35:123,75:81,76:ke,77:pe,79:qe,80:me},{35:124,75:81,76:ke,77:pe,79:qe,80:me},{35:125,75:81,76:ke,77:pe,79:qe,80:me},{14:[1,126]},{14:[1,127]},{14:[1,128]},{14:[1,129]},{1:[2,8]},e(oe,[2,15]),e(he,[2,17],{21:22,19:130,22:t,23:r,24:i,26:n,28:a}),e(oe,[2,37],{19:20,20:21,21:22,43:23,29:49,30:61,32:62,13:131,22:t,23:r,24:i,26:n,28:a,34:s,36:u,37:h,38:d,39:p,40:g,41:y,44:m,45:x,46:_,47:E,48:w,49:C,50:A,51:M,52:N,53:B,54:O,55:L,56:$,57:G,58:z,59:F,60:X,61:I,62:j,63:H,64:V,65:P,66:q,67:Z,68:J,69:ae,70:ue,71:be,72:Le,73:xe,74:Ae}),e(le,[2,21]),e(le,[2,22]),e(st,[2,39]),e(we,[2,71],{75:81,35:132,76:ke,77:pe,79:qe,80:me}),e(Et,[2,73]),{78:[1,133]},e(Et,[2,75]),e(Et,[2,76]),e(st,[2,40]),e(st,[2,41]),e(st,[2,42]),e(st,[2,43]),e(st,[2,44]),e(st,[2,45]),e(st,[2,46]),e(st,[2,47]),e(st,[2,48]),e(st,[2,49]),e(st,[2,50]),e(st,[2,51]),e(st,[2,52]),e(st,[2,53]),e(st,[2,54]),e(st,[2,55]),e(st,[2,56]),e(st,[2,57]),e(st,[2,58]),e(st,[2,60]),e(st,[2,61]),e(st,[2,62]),e(st,[2,63]),e(st,[2,64]),e(st,[2,65]),e(st,[2,66]),e(st,[2,67]),e(st,[2,68]),e(st,[2,69]),e(st,[2,70]),{31:134,42:[1,135]},{12:[1,136]},{33:[1,137]},e(wt,[2,28]),e(wt,[2,29]),e(wt,[2,30]),e(wt,[2,31]),e(wt,[2,32]),e(wt,[2,33]),e(wt,[2,34]),{1:[2,9]},{1:[2,10]},{1:[2,11]},{1:[2,12]},e(he,[2,18]),e(oe,[2,38]),e(we,[2,72]),e(Et,[2,74]),e(st,[2,24]),e(st,[2,35]),e(Tt,[2,25]),e(Tt,[2,26],{12:[1,138]}),e(Tt,[2,27])],defaultActions:{2:[2,1],3:[2,2],4:[2,7],5:[2,3],6:[2,4],7:[2,5],8:[2,6],74:[2,8],126:[2,9],127:[2,10],128:[2,11],129:[2,12]},parseError:k(function(fr,Mt){if(Mt.recoverable)this.trace(fr);else{var Kt=new Error(fr);throw Kt.hash=Mt,Kt}},"parseError"),parse:k(function(fr){var Mt=this,Kt=[0],ne=[],He=[null],Te=[],Qe=this.table,ce="",Ut=0,fe=0,ze=0,yt=2,bt=1,At=Te.slice.call(arguments,1),ct=Object.create(this.lexer),zt={yy:{}};for(var ft in this.yy)Object.prototype.hasOwnProperty.call(this.yy,ft)&&(zt.yy[ft]=this.yy[ft]);ct.setInput(fr,zt.yy),zt.yy.lexer=ct,zt.yy.parser=this,typeof ct.yylloc>"u"&&(ct.yylloc={});var Pr=ct.yylloc;Te.push(Pr);var Mi=ct.options&&ct.options.ranges;typeof zt.yy.parseError=="function"?this.parseError=zt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Di(Xr){Kt.length=Kt.length-2*Xr,He.length=He.length-Xr,Te.length=Te.length-Xr}k(Di,"popStack");function ri(){var Xr;return Xr=ne.pop()||ct.lex()||bt,typeof Xr!="number"&&(Xr instanceof Array&&(ne=Xr,Xr=ne.pop()),Xr=Mt.symbols_[Xr]||Xr),Xr}k(ri,"lex");for(var Gi,Br,sr,hr,Ci,_r,ln={},en,bi,gi,Fr;;){if(sr=Kt[Kt.length-1],this.defaultActions[sr]?hr=this.defaultActions[sr]:((Gi===null||typeof Gi>"u")&&(Gi=ri()),hr=Qe[sr]&&Qe[sr][Gi]),typeof hr>"u"||!hr.length||!hr[0]){var Bi="";Fr=[];for(en in Qe[sr])this.terminals_[en]&&en>yt&&Fr.push("'"+this.terminals_[en]+"'");ct.showPosition?Bi="Parse error on line "+(Ut+1)+`:
`+ct.showPosition()+`
Expecting `+Fr.join(", ")+", got '"+(this.terminals_[Gi]||Gi)+"'":Bi="Parse error on line "+(Ut+1)+": Unexpected "+(Gi==bt?"end of input":"'"+(this.terminals_[Gi]||Gi)+"'"),this.parseError(Bi,{text:ct.match,token:this.terminals_[Gi]||Gi,line:ct.yylineno,loc:Pr,expected:Fr})}if(hr[0]instanceof Array&&hr.length>1)throw new Error("Parse Error: multiple actions possible at state: "+sr+", token: "+Gi);switch(hr[0]){case 1:Kt.push(Gi),He.push(ct.yytext),Te.push(ct.yylloc),Kt.push(hr[1]),Gi=null,Br?(Gi=Br,Br=null):(fe=ct.yyleng,ce=ct.yytext,Ut=ct.yylineno,Pr=ct.yylloc,ze>0&&ze--);break;case 2:if(bi=this.productions_[hr[1]][1],ln.$=He[He.length-bi],ln._$={first_line:Te[Te.length-(bi||1)].first_line,last_line:Te[Te.length-1].last_line,first_column:Te[Te.length-(bi||1)].first_column,last_column:Te[Te.length-1].last_column},Mi&&(ln._$.range=[Te[Te.length-(bi||1)].range[0],Te[Te.length-1].range[1]]),_r=this.performAction.apply(ln,[ce,fe,Ut,zt.yy,hr[1],He,Te].concat(At)),typeof _r<"u")return _r;bi&&(Kt=Kt.slice(0,-1*bi*2),He=He.slice(0,-1*bi),Te=Te.slice(0,-1*bi)),Kt.push(this.productions_[hr[1]][0]),He.push(ln.$),Te.push(ln._$),gi=Qe[Kt[Kt.length-2]][Kt[Kt.length-1]],Kt.push(gi);break;case 3:return!0}}return!0},"parse")},tr=function(){var fr={EOF:1,parseError:k(function(Mt,Kt){if(this.yy.parser)this.yy.parser.parseError(Mt,Kt);else throw new Error(Mt)},"parseError"),setInput:k(function(Mt,Kt){return this.yy=Kt||this.yy||{},this._input=Mt,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:k(function(){var Mt=this._input[0];this.yytext+=Mt,this.yyleng++,this.offset++,this.match+=Mt,this.matched+=Mt;var Kt=Mt.match(/(?:\r\n?|\n).*/g);return Kt?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Mt},"input"),unput:k(function(Mt){var Kt=Mt.length,ne=Mt.split(/(?:\r\n?|\n)/g);this._input=Mt+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Kt),this.offset-=Kt;var He=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),ne.length-1&&(this.yylineno-=ne.length-1);var Te=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:ne?(ne.length===He.length?this.yylloc.first_column:0)+He[He.length-ne.length].length-ne[0].length:this.yylloc.first_column-Kt},this.options.ranges&&(this.yylloc.range=[Te[0],Te[0]+this.yyleng-Kt]),this.yyleng=this.yytext.length,this},"unput"),more:k(function(){return this._more=!0,this},"more"),reject:k(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:k(function(Mt){this.unput(this.match.slice(Mt))},"less"),pastInput:k(function(){var Mt=this.matched.substr(0,this.matched.length-this.match.length);return(Mt.length>20?"...":"")+Mt.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:k(function(){var Mt=this.match;return Mt.length<20&&(Mt+=this._input.substr(0,20-Mt.length)),(Mt.substr(0,20)+(Mt.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:k(function(){var Mt=this.pastInput(),Kt=new Array(Mt.length+1).join("-");return Mt+this.upcomingInput()+`
`+Kt+"^"},"showPosition"),test_match:k(function(Mt,Kt){var ne,He,Te;if(this.options.backtrack_lexer&&(Te={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Te.yylloc.range=this.yylloc.range.slice(0))),He=Mt[0].match(/(?:\r\n?|\n).*/g),He&&(this.yylineno+=He.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:He?He[He.length-1].length-He[He.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Mt[0].length},this.yytext+=Mt[0],this.match+=Mt[0],this.matches=Mt,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Mt[0].length),this.matched+=Mt[0],ne=this.performAction.call(this,this.yy,this,Kt,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),ne)return ne;if(this._backtrack){for(var Qe in Te)this[Qe]=Te[Qe];return!1}return!1},"test_match"),next:k(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Mt,Kt,ne,He;this._more||(this.yytext="",this.match="");for(var Te=this._currentRules(),Qe=0;Qe<Te.length;Qe++)if(ne=this._input.match(this.rules[Te[Qe]]),ne&&(!Kt||ne[0].length>Kt[0].length)){if(Kt=ne,He=Qe,this.options.backtrack_lexer){if(Mt=this.test_match(ne,Te[Qe]),Mt!==!1)return Mt;if(this._backtrack){Kt=!1;continue}else return!1}else if(!this.options.flex)break}return Kt?(Mt=this.test_match(Kt,Te[He]),Mt!==!1?Mt:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:k(function(){var Mt=this.next();return Mt||this.lex()},"lex"),begin:k(function(Mt){this.conditionStack.push(Mt)},"begin"),popState:k(function(){var Mt=this.conditionStack.length-1;return Mt>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:k(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:k(function(Mt){return Mt=this.conditionStack.length-1-Math.abs(Mt||0),Mt>=0?this.conditionStack[Mt]:"INITIAL"},"topState"),pushState:k(function(Mt){this.begin(Mt)},"pushState"),stateStackSize:k(function(){return this.conditionStack.length},"stateStackSize"),options:{},performAction:k(function(Mt,Kt,ne,He){var Te=He;switch(ne){case 0:return 6;case 1:return 7;case 2:return 8;case 3:return 9;case 4:return 22;case 5:return 23;case 6:return this.begin("acc_title"),24;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),26;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:break;case 14:c;break;case 15:return 12;case 16:break;case 17:return 11;case 18:return 15;case 19:return 16;case 20:return 17;case 21:return 18;case 22:return this.begin("person_ext"),45;case 23:return this.begin("person"),44;case 24:return this.begin("system_ext_queue"),51;case 25:return this.begin("system_ext_db"),50;case 26:return this.begin("system_ext"),49;case 27:return this.begin("system_queue"),48;case 28:return this.begin("system_db"),47;case 29:return this.begin("system"),46;case 30:return this.begin("boundary"),37;case 31:return this.begin("enterprise_boundary"),34;case 32:return this.begin("system_boundary"),36;case 33:return this.begin("container_ext_queue"),57;case 34:return this.begin("container_ext_db"),56;case 35:return this.begin("container_ext"),55;case 36:return this.begin("container_queue"),54;case 37:return this.begin("container_db"),53;case 38:return this.begin("container"),52;case 39:return this.begin("container_boundary"),38;case 40:return this.begin("component_ext_queue"),63;case 41:return this.begin("component_ext_db"),62;case 42:return this.begin("component_ext"),61;case 43:return this.begin("component_queue"),60;case 44:return this.begin("component_db"),59;case 45:return this.begin("component"),58;case 46:return this.begin("node"),39;case 47:return this.begin("node"),39;case 48:return this.begin("node_l"),40;case 49:return this.begin("node_r"),41;case 50:return this.begin("rel"),64;case 51:return this.begin("birel"),65;case 52:return this.begin("rel_u"),66;case 53:return this.begin("rel_u"),66;case 54:return this.begin("rel_d"),67;case 55:return this.begin("rel_d"),67;case 56:return this.begin("rel_l"),68;case 57:return this.begin("rel_l"),68;case 58:return this.begin("rel_r"),69;case 59:return this.begin("rel_r"),69;case 60:return this.begin("rel_b"),70;case 61:return this.begin("rel_index"),71;case 62:return this.begin("update_el_style"),72;case 63:return this.begin("update_rel_style"),73;case 64:return this.begin("update_layout_config"),74;case 65:return"EOF_IN_STRUCT";case 66:return this.begin("attribute"),"ATTRIBUTE_EMPTY";case 67:this.begin("attribute");break;case 68:this.popState(),this.popState();break;case 69:return 80;case 70:break;case 71:return 80;case 72:this.begin("string");break;case 73:this.popState();break;case 74:return"STR";case 75:this.begin("string_kv");break;case 76:return this.begin("string_kv_key"),"STR_KEY";case 77:this.popState(),this.begin("string_kv_value");break;case 78:return"STR_VALUE";case 79:this.popState(),this.popState();break;case 80:return"STR";case 81:return"LBRACE";case 82:return"RBRACE";case 83:return"SPACE";case 84:return"EOL";case 85:return 14}},"anonymous"),rules:[/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:title\s[^#\n;]+)/,/^(?:accDescription\s[^#\n;]+)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:C4Context\b)/,/^(?:C4Container\b)/,/^(?:C4Component\b)/,/^(?:C4Dynamic\b)/,/^(?:C4Deployment\b)/,/^(?:Person_Ext\b)/,/^(?:Person\b)/,/^(?:SystemQueue_Ext\b)/,/^(?:SystemDb_Ext\b)/,/^(?:System_Ext\b)/,/^(?:SystemQueue\b)/,/^(?:SystemDb\b)/,/^(?:System\b)/,/^(?:Boundary\b)/,/^(?:Enterprise_Boundary\b)/,/^(?:System_Boundary\b)/,/^(?:ContainerQueue_Ext\b)/,/^(?:ContainerDb_Ext\b)/,/^(?:Container_Ext\b)/,/^(?:ContainerQueue\b)/,/^(?:ContainerDb\b)/,/^(?:Container\b)/,/^(?:Container_Boundary\b)/,/^(?:ComponentQueue_Ext\b)/,/^(?:ComponentDb_Ext\b)/,/^(?:Component_Ext\b)/,/^(?:ComponentQueue\b)/,/^(?:ComponentDb\b)/,/^(?:Component\b)/,/^(?:Deployment_Node\b)/,/^(?:Node\b)/,/^(?:Node_L\b)/,/^(?:Node_R\b)/,/^(?:Rel\b)/,/^(?:BiRel\b)/,/^(?:Rel_Up\b)/,/^(?:Rel_U\b)/,/^(?:Rel_Down\b)/,/^(?:Rel_D\b)/,/^(?:Rel_Left\b)/,/^(?:Rel_L\b)/,/^(?:Rel_Right\b)/,/^(?:Rel_R\b)/,/^(?:Rel_Back\b)/,/^(?:RelIndex\b)/,/^(?:UpdateElementStyle\b)/,/^(?:UpdateRelStyle\b)/,/^(?:UpdateLayoutConfig\b)/,/^(?:$)/,/^(?:[(][ ]*[,])/,/^(?:[(])/,/^(?:[)])/,/^(?:,,)/,/^(?:,)/,/^(?:[ ]*["]["])/,/^(?:[ ]*["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:[ ]*[\$])/,/^(?:[^=]*)/,/^(?:[=][ ]*["])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:[^,]+)/,/^(?:\{)/,/^(?:\})/,/^(?:[\s]+)/,/^(?:[\n\r]+)/,/^(?:$)/],conditions:{acc_descr_multiline:{rules:[11,12],inclusive:!1},acc_descr:{rules:[9],inclusive:!1},acc_title:{rules:[7],inclusive:!1},string_kv_value:{rules:[78,79],inclusive:!1},string_kv_key:{rules:[77],inclusive:!1},string_kv:{rules:[76],inclusive:!1},string:{rules:[73,74],inclusive:!1},attribute:{rules:[68,69,70,71,72,75,80],inclusive:!1},update_layout_config:{rules:[65,66,67,68],inclusive:!1},update_rel_style:{rules:[65,66,67,68],inclusive:!1},update_el_style:{rules:[65,66,67,68],inclusive:!1},rel_b:{rules:[65,66,67,68],inclusive:!1},rel_r:{rules:[65,66,67,68],inclusive:!1},rel_l:{rules:[65,66,67,68],inclusive:!1},rel_d:{rules:[65,66,67,68],inclusive:!1},rel_u:{rules:[65,66,67,68],inclusive:!1},rel_bi:{rules:[],inclusive:!1},rel:{rules:[65,66,67,68],inclusive:!1},node_r:{rules:[65,66,67,68],inclusive:!1},node_l:{rules:[65,66,67,68],inclusive:!1},node:{rules:[65,66,67,68],inclusive:!1},index:{rules:[],inclusive:!1},rel_index:{rules:[65,66,67,68],inclusive:!1},component_ext_queue:{rules:[],inclusive:!1},component_ext_db:{rules:[65,66,67,68],inclusive:!1},component_ext:{rules:[65,66,67,68],inclusive:!1},component_queue:{rules:[65,66,67,68],inclusive:!1},component_db:{rules:[65,66,67,68],inclusive:!1},component:{rules:[65,66,67,68],inclusive:!1},container_boundary:{rules:[65,66,67,68],inclusive:!1},container_ext_queue:{rules:[65,66,67,68],inclusive:!1},container_ext_db:{rules:[65,66,67,68],inclusive:!1},container_ext:{rules:[65,66,67,68],inclusive:!1},container_queue:{rules:[65,66,67,68],inclusive:!1},container_db:{rules:[65,66,67,68],inclusive:!1},container:{rules:[65,66,67,68],inclusive:!1},birel:{rules:[65,66,67,68],inclusive:!1},system_boundary:{rules:[65,66,67,68],inclusive:!1},enterprise_boundary:{rules:[65,66,67,68],inclusive:!1},boundary:{rules:[65,66,67,68],inclusive:!1},system_ext_queue:{rules:[65,66,67,68],inclusive:!1},system_ext_db:{rules:[65,66,67,68],inclusive:!1},system_ext:{rules:[65,66,67,68],inclusive:!1},system_queue:{rules:[65,66,67,68],inclusive:!1},system_db:{rules:[65,66,67,68],inclusive:!1},system:{rules:[65,66,67,68],inclusive:!1},person_ext:{rules:[65,66,67,68],inclusive:!1},person:{rules:[65,66,67,68],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,8,10,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,81,82,83,84,85],inclusive:!0}}};return fr}();er.lexer=tr;function kr(){this.yy={}}return k(kr,"Parser"),kr.prototype=er,er.Parser=kr,new kr}(),h7.parser=h7,Cfe=h7,zc=[],Tf=[""],du="global",Gc="",Dd=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],P_=[],yI="",vI=!1,c7=4,d7=2,Afe=k(function(){return Sfe},"getC4Type"),Mfe=k(function(e){Sfe=Da(e,at())},"setC4Type"),Lfe=k(function(e,t,r,i,n,a,s,u,h){if(e==null||t===void 0||t===null||r===void 0||r===null||i===void 0||i===null)return;let d={},p=P_.find(g=>g.from===t&&g.to===r);if(p?d=p:P_.push(d),d.type=e,d.from=t,d.to=r,d.label={text:i},n==null)d.techn={text:""};else if(typeof n=="object"){let[g,y]=Object.entries(n)[0];d[g]={text:y}}else d.techn={text:n};if(a==null)d.descr={text:""};else if(typeof a=="object"){let[g,y]=Object.entries(a)[0];d[g]={text:y}}else d.descr={text:a};if(typeof s=="object"){let[g,y]=Object.entries(s)[0];d[g]=y}else d.sprite=s;if(typeof u=="object"){let[g,y]=Object.entries(u)[0];d[g]=y}else d.tags=u;if(typeof h=="object"){let[g,y]=Object.entries(h)[0];d[g]=y}else d.link=h;d.wrap=Ef()},"addRel"),Rfe=k(function(e,t,r,i,n,a,s){if(t===null||r===null)return;let u={},h=zc.find(d=>d.alias===t);if(h&&t===h.alias?u=h:(u.alias=t,zc.push(u)),r==null?u.label={text:""}:u.label={text:r},i==null)u.descr={text:""};else if(typeof i=="object"){let[d,p]=Object.entries(i)[0];u[d]={text:p}}else u.descr={text:i};if(typeof n=="object"){let[d,p]=Object.entries(n)[0];u[d]=p}else u.sprite=n;if(typeof a=="object"){let[d,p]=Object.entries(a)[0];u[d]=p}else u.tags=a;if(typeof s=="object"){let[d,p]=Object.entries(s)[0];u[d]=p}else u.link=s;u.typeC4Shape={text:e},u.parentBoundary=du,u.wrap=Ef()},"addPersonOrSystem"),Dfe=k(function(e,t,r,i,n,a,s,u){if(t===null||r===null)return;let h={},d=zc.find(p=>p.alias===t);if(d&&t===d.alias?h=d:(h.alias=t,zc.push(h)),r==null?h.label={text:""}:h.label={text:r},i==null)h.techn={text:""};else if(typeof i=="object"){let[p,g]=Object.entries(i)[0];h[p]={text:g}}else h.techn={text:i};if(n==null)h.descr={text:""};else if(typeof n=="object"){let[p,g]=Object.entries(n)[0];h[p]={text:g}}else h.descr={text:n};if(typeof a=="object"){let[p,g]=Object.entries(a)[0];h[p]=g}else h.sprite=a;if(typeof s=="object"){let[p,g]=Object.entries(s)[0];h[p]=g}else h.tags=s;if(typeof u=="object"){let[p,g]=Object.entries(u)[0];h[p]=g}else h.link=u;h.wrap=Ef(),h.typeC4Shape={text:e},h.parentBoundary=du},"addContainer"),Ife=k(function(e,t,r,i,n,a,s,u){if(t===null||r===null)return;let h={},d=zc.find(p=>p.alias===t);if(d&&t===d.alias?h=d:(h.alias=t,zc.push(h)),r==null?h.label={text:""}:h.label={text:r},i==null)h.techn={text:""};else if(typeof i=="object"){let[p,g]=Object.entries(i)[0];h[p]={text:g}}else h.techn={text:i};if(n==null)h.descr={text:""};else if(typeof n=="object"){let[p,g]=Object.entries(n)[0];h[p]={text:g}}else h.descr={text:n};if(typeof a=="object"){let[p,g]=Object.entries(a)[0];h[p]=g}else h.sprite=a;if(typeof s=="object"){let[p,g]=Object.entries(s)[0];h[p]=g}else h.tags=s;if(typeof u=="object"){let[p,g]=Object.entries(u)[0];h[p]=g}else h.link=u;h.wrap=Ef(),h.typeC4Shape={text:e},h.parentBoundary=du},"addComponent"),Nfe=k(function(e,t,r,i,n){if(e===null||t===null)return;let a={},s=Dd.find(u=>u.alias===e);if(s&&e===s.alias?a=s:(a.alias=e,Dd.push(a)),t==null?a.label={text:""}:a.label={text:t},r==null)a.type={text:"system"};else if(typeof r=="object"){let[u,h]=Object.entries(r)[0];a[u]={text:h}}else a.type={text:r};if(typeof i=="object"){let[u,h]=Object.entries(i)[0];a[u]=h}else a.tags=i;if(typeof n=="object"){let[u,h]=Object.entries(n)[0];a[u]=h}else a.link=n;a.parentBoundary=du,a.wrap=Ef(),Gc=du,du=e,Tf.push(Gc)},"addPersonOrSystemBoundary"),Ofe=k(function(e,t,r,i,n){if(e===null||t===null)return;let a={},s=Dd.find(u=>u.alias===e);if(s&&e===s.alias?a=s:(a.alias=e,Dd.push(a)),t==null?a.label={text:""}:a.label={text:t},r==null)a.type={text:"container"};else if(typeof r=="object"){let[u,h]=Object.entries(r)[0];a[u]={text:h}}else a.type={text:r};if(typeof i=="object"){let[u,h]=Object.entries(i)[0];a[u]=h}else a.tags=i;if(typeof n=="object"){let[u,h]=Object.entries(n)[0];a[u]=h}else a.link=n;a.parentBoundary=du,a.wrap=Ef(),Gc=du,du=e,Tf.push(Gc)},"addContainerBoundary"),Bfe=k(function(e,t,r,i,n,a,s,u){if(t===null||r===null)return;let h={},d=Dd.find(p=>p.alias===t);if(d&&t===d.alias?h=d:(h.alias=t,Dd.push(h)),r==null?h.label={text:""}:h.label={text:r},i==null)h.type={text:"node"};else if(typeof i=="object"){let[p,g]=Object.entries(i)[0];h[p]={text:g}}else h.type={text:i};if(n==null)h.descr={text:""};else if(typeof n=="object"){let[p,g]=Object.entries(n)[0];h[p]={text:g}}else h.descr={text:n};if(typeof s=="object"){let[p,g]=Object.entries(s)[0];h[p]=g}else h.tags=s;if(typeof u=="object"){let[p,g]=Object.entries(u)[0];h[p]=g}else h.link=u;h.nodeType=e,h.parentBoundary=du,h.wrap=Ef(),Gc=du,du=t,Tf.push(Gc)},"addDeploymentNode"),Pfe=k(function(){du=Gc,Tf.pop(),Gc=Tf.pop(),Tf.push(Gc)},"popBoundaryParseStack"),Ffe=k(function(e,t,r,i,n,a,s,u,h,d,p){let g=zc.find(y=>y.alias===t);if(!(g===void 0&&(g=Dd.find(y=>y.alias===t),g===void 0))){if(r!=null)if(typeof r=="object"){let[y,m]=Object.entries(r)[0];g[y]=m}else g.bgColor=r;if(i!=null)if(typeof i=="object"){let[y,m]=Object.entries(i)[0];g[y]=m}else g.fontColor=i;if(n!=null)if(typeof n=="object"){let[y,m]=Object.entries(n)[0];g[y]=m}else g.borderColor=n;if(a!=null)if(typeof a=="object"){let[y,m]=Object.entries(a)[0];g[y]=m}else g.shadowing=a;if(s!=null)if(typeof s=="object"){let[y,m]=Object.entries(s)[0];g[y]=m}else g.shape=s;if(u!=null)if(typeof u=="object"){let[y,m]=Object.entries(u)[0];g[y]=m}else g.sprite=u;if(h!=null)if(typeof h=="object"){let[y,m]=Object.entries(h)[0];g[y]=m}else g.techn=h;if(d!=null)if(typeof d=="object"){let[y,m]=Object.entries(d)[0];g[y]=m}else g.legendText=d;if(p!=null)if(typeof p=="object"){let[y,m]=Object.entries(p)[0];g[y]=m}else g.legendSprite=p}},"updateElStyle"),$fe=k(function(e,t,r,i,n,a,s){let u=P_.find(h=>h.from===t&&h.to===r);if(u!==void 0){if(i!=null)if(typeof i=="object"){let[h,d]=Object.entries(i)[0];u[h]=d}else u.textColor=i;if(n!=null)if(typeof n=="object"){let[h,d]=Object.entries(n)[0];u[h]=d}else u.lineColor=n;if(a!=null)if(typeof a=="object"){let[h,d]=Object.entries(a)[0];u[h]=parseInt(d)}else u.offsetX=parseInt(a);if(s!=null)if(typeof s=="object"){let[h,d]=Object.entries(s)[0];u[h]=parseInt(d)}else u.offsetY=parseInt(s)}},"updateRelStyle"),zfe=k(function(e,t,r){let i=c7,n=d7;if(typeof t=="object"){let a=Object.values(t)[0];i=parseInt(a)}else i=parseInt(t);if(typeof r=="object"){let a=Object.values(r)[0];n=parseInt(a)}else n=parseInt(r);i>=1&&(c7=i),n>=1&&(d7=n)},"updateLayoutConfig"),Gfe=k(function(){return c7},"getC4ShapeInRow"),Ufe=k(function(){return d7},"getC4BoundaryInRow"),jfe=k(function(){return du},"getCurrentBoundaryParse"),Hfe=k(function(){return Gc},"getParentBoundaryParse"),VV=k(function(e){return e==null?zc:zc.filter(t=>t.parentBoundary===e)},"getC4ShapeArray"),Vfe=k(function(e){return zc.find(t=>t.alias===e)},"getC4Shape"),Wfe=k(function(e){return Object.keys(VV(e))},"getC4ShapeKeys"),WV=k(function(e){return e==null?Dd:Dd.filter(t=>t.parentBoundary===e)},"getBoundaries"),Yfe=WV,qfe=k(function(){return P_},"getRels"),Xfe=k(function(){return yI},"getTitle"),Kfe=k(function(e){vI=e},"setWrap"),Ef=k(function(){return vI},"autoWrap"),Zfe=k(function(){zc=[],Dd=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],Gc="",du="global",Tf=[""],P_=[],Tf=[""],yI="",vI=!1,c7=4,d7=2},"clear"),Qfe={SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25},Jfe={FILLED:0,OPEN:1},ege={LEFTOF:0,RIGHTOF:1,OVER:2},tge=k(function(e){yI=Da(e,at())},"setTitle"),xI={addPersonOrSystem:Rfe,addPersonOrSystemBoundary:Nfe,addContainer:Dfe,addContainerBoundary:Ofe,addComponent:Ife,addDeploymentNode:Bfe,popBoundaryParseStack:Pfe,addRel:Lfe,updateElStyle:Ffe,updateRelStyle:$fe,updateLayoutConfig:zfe,autoWrap:Ef,setWrap:Kfe,getC4ShapeArray:VV,getC4Shape:Vfe,getC4ShapeKeys:Wfe,getBoundaries:WV,getBoundarys:Yfe,getCurrentBoundaryParse:jfe,getParentBoundaryParse:Hfe,getRels:qfe,getTitle:Xfe,getC4Type:Afe,getC4ShapeInRow:Gfe,getC4BoundaryInRow:Ufe,setAccTitle:Ks,getAccTitle:Bo,getAccDescription:Po,setAccDescription:_o,getConfig:k(()=>at().c4,"getConfig"),clear:Zfe,LINETYPE:Qfe,ARROWTYPE:Jfe,PLACEMENT:ege,setTitle:tge,setC4Type:Mfe},bI=k(function(e,t){return u7(e,t)},"drawRect"),YV=k(function(e,t,r,i,n,a){let s=e.append("image");s.attr("width",t),s.attr("height",r),s.attr("x",i),s.attr("y",n);let u=a.startsWith("data:image/png;base64")?a:(0,Efe.sanitizeUrl)(a);s.attr("xlink:href",u)},"drawImage"),rge=k((e,t,r)=>{let i=e.append("g"),n=0;for(let a of t){let s=a.textColor?a.textColor:"#444444",u=a.lineColor?a.lineColor:"#444444",h=a.offsetX?parseInt(a.offsetX):0,d=a.offsetY?parseInt(a.offsetY):0,p="";if(n===0){let y=i.append("line");y.attr("x1",a.startPoint.x),y.attr("y1",a.startPoint.y),y.attr("x2",a.endPoint.x),y.attr("y2",a.endPoint.y),y.attr("stroke-width","1"),y.attr("stroke",u),y.style("fill","none"),a.type!=="rel_b"&&y.attr("marker-end","url("+p+"#arrowhead)"),(a.type==="birel"||a.type==="rel_b")&&y.attr("marker-start","url("+p+"#arrowend)"),n=-1}else{let y=i.append("path");y.attr("fill","none").attr("stroke-width","1").attr("stroke",u).attr("d","Mstartx,starty Qcontrolx,controly stopx,stopy ".replaceAll("startx",a.startPoint.x).replaceAll("starty",a.startPoint.y).replaceAll("controlx",a.startPoint.x+(a.endPoint.x-a.startPoint.x)/2-(a.endPoint.x-a.startPoint.x)/4).replaceAll("controly",a.startPoint.y+(a.endPoint.y-a.startPoint.y)/2).replaceAll("stopx",a.endPoint.x).replaceAll("stopy",a.endPoint.y)),a.type!=="rel_b"&&y.attr("marker-end","url("+p+"#arrowhead)"),(a.type==="birel"||a.type==="rel_b")&&y.attr("marker-start","url("+p+"#arrowend)")}let g=r.messageFont();z0(r)(a.label.text,i,Math.min(a.startPoint.x,a.endPoint.x)+Math.abs(a.endPoint.x-a.startPoint.x)/2+h,Math.min(a.startPoint.y,a.endPoint.y)+Math.abs(a.endPoint.y-a.startPoint.y)/2+d,a.label.width,a.label.height,{fill:s},g),a.techn&&a.techn.text!==""&&(g=r.messageFont(),z0(r)("["+a.techn.text+"]",i,Math.min(a.startPoint.x,a.endPoint.x)+Math.abs(a.endPoint.x-a.startPoint.x)/2+h,Math.min(a.startPoint.y,a.endPoint.y)+Math.abs(a.endPoint.y-a.startPoint.y)/2+r.messageFontSize+5+d,Math.max(a.label.width,a.techn.width),a.techn.height,{fill:s,"font-style":"italic"},g))}},"drawRels"),ige=k(function(e,t,r){let i=e.append("g"),n=t.bgColor?t.bgColor:"none",a=t.borderColor?t.borderColor:"#444444",s=t.fontColor?t.fontColor:"black",u={"stroke-width":1,"stroke-dasharray":"7.0,7.0"};t.nodeType&&(u={"stroke-width":1});let h={x:t.x,y:t.y,fill:n,stroke:a,width:t.width,height:t.height,rx:2.5,ry:2.5,attrs:u};bI(i,h);let d=r.boundaryFont();d.fontWeight="bold",d.fontSize=d.fontSize+2,d.fontColor=s,z0(r)(t.label.text,i,t.x,t.y+t.label.Y,t.width,t.height,{fill:"#444444"},d),t.type&&t.type.text!==""&&(d=r.boundaryFont(),d.fontColor=s,z0(r)(t.type.text,i,t.x,t.y+t.type.Y,t.width,t.height,{fill:"#444444"},d)),t.descr&&t.descr.text!==""&&(d=r.boundaryFont(),d.fontSize=d.fontSize-2,d.fontColor=s,z0(r)(t.descr.text,i,t.x,t.y+t.descr.Y,t.width,t.height,{fill:"#444444"},d))},"drawBoundary"),nge=k(function(e,t,r){let i=t.bgColor?t.bgColor:r[t.typeC4Shape.text+"_bg_color"],n=t.borderColor?t.borderColor:r[t.typeC4Shape.text+"_border_color"],a=t.fontColor?t.fontColor:"#FFFFFF",s="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";switch(t.typeC4Shape.text){case"person":s="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";break;case"external_person":s="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAAB6ElEQVR4Xu2YLY+EMBCG9+dWr0aj0Wg0Go1Go0+j8Xdv2uTCvv1gpt0ebHKPuhDaeW4605Z9mJvx4AdXUyTUdd08z+u6flmWZRnHsWkafk9DptAwDPu+f0eAYtu2PEaGWuj5fCIZrBAC2eLBAnRCsEkkxmeaJp7iDJ2QMDdHsLg8SxKFEJaAo8lAXnmuOFIhTMpxxKATebo4UiFknuNo4OniSIXQyRxEA3YsnjGCVEjVXD7yLUAqxBGUyPv/Y4W2beMgGuS7kVQIBycH0fD+oi5pezQETxdHKmQKGk1eQEYldK+jw5GxPfZ9z7Mk0Qnhf1W1m3w//EUn5BDmSZsbR44QQLBEqrBHqOrmSKaQAxdnLArCrxZcM7A7ZKs4ioRq8LFC+NpC3WCBJsvpVw5edm9iEXFuyNfxXAgSwfrFQ1c0iNda8AdejvUgnktOtJQQxmcfFzGglc5WVCj7oDgFqU18boeFSs52CUh8LE8BIVQDT1ABrB0HtgSEYlX5doJnCwv9TXocKCaKbnwhdDKPq4lf3SwU3HLq4V/+WYhHVMa/3b4IlfyikAduCkcBc7mQ3/z/Qq/cTuikhkzB12Ae/mcJC9U+Vo8Ej1gWAtgbeGgFsAMHr50BIWOLCbezvhpBFUdY6EJuJ/QDW0XoMX60zZ0AAAAASUVORK5CYII=";break}let u=e.append("g");u.attr("class","person-man");let h=mm();switch(t.typeC4Shape.text){case"person":case"external_person":case"system":case"external_system":case"container":case"external_container":case"component":case"external_component":h.x=t.x,h.y=t.y,h.fill=i,h.width=t.width,h.height=t.height,h.stroke=n,h.rx=2.5,h.ry=2.5,h.attrs={"stroke-width":.5},bI(u,h);break;case"system_db":case"external_system_db":case"container_db":case"external_container_db":case"component_db":case"external_component_db":u.append("path").attr("fill",i).attr("stroke-width","0.5").attr("stroke",n).attr("d","Mstartx,startyc0,-10 half,-10 half,-10c0,0 half,0 half,10l0,heightc0,10 -half,10 -half,10c0,0 -half,0 -half,-10l0,-height".replaceAll("startx",t.x).replaceAll("starty",t.y).replaceAll("half",t.width/2).replaceAll("height",t.height)),u.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",n).attr("d","Mstartx,startyc0,10 half,10 half,10c0,0 half,0 half,-10".replaceAll("startx",t.x).replaceAll("starty",t.y).replaceAll("half",t.width/2));break;case"system_queue":case"external_system_queue":case"container_queue":case"external_container_queue":case"component_queue":case"external_component_queue":u.append("path").attr("fill",i).attr("stroke-width","0.5").attr("stroke",n).attr("d","Mstartx,startylwidth,0c5,0 5,half 5,halfc0,0 0,half -5,halfl-width,0c-5,0 -5,-half -5,-halfc0,0 0,-half 5,-half".replaceAll("startx",t.x).replaceAll("starty",t.y).replaceAll("width",t.width).replaceAll("half",t.height/2)),u.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",n).attr("d","Mstartx,startyc-5,0 -5,half -5,halfc0,half 5,half 5,half".replaceAll("startx",t.x+t.width).replaceAll("starty",t.y).replaceAll("half",t.height/2));break}let d=pge(r,t.typeC4Shape.text);switch(u.append("text").attr("fill",a).attr("font-family",d.fontFamily).attr("font-size",d.fontSize-2).attr("font-style","italic").attr("lengthAdjust","spacing").attr("textLength",t.typeC4Shape.width).attr("x",t.x+t.width/2-t.typeC4Shape.width/2).attr("y",t.y+t.typeC4Shape.Y).text("<<"+t.typeC4Shape.text+">>"),t.typeC4Shape.text){case"person":case"external_person":YV(u,48,48,t.x+t.width/2-24,t.y+t.image.Y,s);break}let p=r[t.typeC4Shape.text+"Font"]();return p.fontWeight="bold",p.fontSize=p.fontSize+2,p.fontColor=a,z0(r)(t.label.text,u,t.x,t.y+t.label.Y,t.width,t.height,{fill:a},p),p=r[t.typeC4Shape.text+"Font"](),p.fontColor=a,t.techn&&t.techn?.text!==""?z0(r)(t.techn.text,u,t.x,t.y+t.techn.Y,t.width,t.height,{fill:a,"font-style":"italic"},p):t.type&&t.type.text!==""&&z0(r)(t.type.text,u,t.x,t.y+t.type.Y,t.width,t.height,{fill:a,"font-style":"italic"},p),t.descr&&t.descr.text!==""&&(p=r.personFont(),p.fontColor=a,z0(r)(t.descr.text,u,t.x,t.y+t.descr.Y,t.width,t.height,{fill:a},p)),t.height},"drawC4Shape"),age=k(function(e){e.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},"insertDatabaseIcon"),sge=k(function(e){e.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},"insertComputerIcon"),oge=k(function(e){e.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},"insertClockIcon"),lge=k(function(e){e.append("defs").append("marker").attr("id","arrowhead").attr("refX",9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z")},"insertArrowHead"),uge=k(function(e){e.append("defs").append("marker").attr("id","arrowend").attr("refX",1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 10 0 L 0 5 L 10 10 z")},"insertArrowEnd"),hge=k(function(e){e.append("defs").append("marker").attr("id","filled-head").attr("refX",18).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"insertArrowFilledHead"),cge=k(function(e){e.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},"insertDynamicNumber"),dge=k(function(e){let t=e.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",16).attr("refY",4);t.append("path").attr("fill","black").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 9,2 V 6 L16,4 Z"),t.append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 0,1 L 6,7 M 6,1 L 0,7")},"insertArrowCrossHead"),pge=k((e,t)=>({fontFamily:e[t+"FontFamily"],fontSize:e[t+"FontSize"],fontWeight:e[t+"FontWeight"]}),"getC4ShapeFont"),z0=function(){function e(n,a,s,u,h,d,p){let g=a.append("text").attr("x",s+h/2).attr("y",u+d/2+5).style("text-anchor","middle").text(n);i(g,p)}k(e,"byText");function t(n,a,s,u,h,d,p,g){let{fontSize:y,fontFamily:m,fontWeight:x}=g,_=n.split(zr.lineBreakRegex);for(let E=0;E<_.length;E++){let w=E*y-y*(_.length-1)/2,C=a.append("text").attr("x",s+h/2).attr("y",u).style("text-anchor","middle").attr("dominant-baseline","middle").style("font-size",y).style("font-weight",x).style("font-family",m);C.append("tspan").attr("dy",w).text(_[E]).attr("alignment-baseline","mathematical"),i(C,p)}}k(t,"byTspan");function r(n,a,s,u,h,d,p,g){let y=a.append("switch"),m=y.append("foreignObject").attr("x",s).attr("y",u).attr("width",h).attr("height",d).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");m.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(n),t(n,y,s,u,h,d,p,g),i(m,p)}k(r,"byFo");function i(n,a){for(let s in a)a.hasOwnProperty(s)&&n.attr(s,a[s])}return k(i,"_setTextAttrs"),function(n){return n.textPlacement==="fo"?r:n.textPlacement==="old"?e:t}}(),Id={drawRect:bI,drawBoundary:ige,drawC4Shape:nge,drawRels:rge,drawImage:YV,insertArrowHead:lge,insertArrowEnd:uge,insertArrowFilledHead:hge,insertDynamicNumber:cge,insertArrowCrossHead:dge,insertDatabaseIcon:age,insertComputerIcon:sge,insertClockIcon:oge},p7=0,f7=0,qV=4,_I=2,h7.yy=xI,sn={},XV=class{static{k(this,"Bounds")}constructor(e){this.name="",this.data={},this.data.startx=void 0,this.data.stopx=void 0,this.data.starty=void 0,this.data.stopy=void 0,this.data.widthLimit=void 0,this.nextData={},this.nextData.startx=void 0,this.nextData.stopx=void 0,this.nextData.starty=void 0,this.nextData.stopy=void 0,this.nextData.cnt=0,wI(e.db.getConfig())}setData(e,t,r,i){this.nextData.startx=this.data.startx=e,this.nextData.stopx=this.data.stopx=t,this.nextData.starty=this.data.starty=r,this.nextData.stopy=this.data.stopy=i}updateVal(e,t,r,i){e[t]===void 0?e[t]=r:e[t]=i(r,e[t])}insert(e){this.nextData.cnt=this.nextData.cnt+1;let t=this.nextData.startx===this.nextData.stopx?this.nextData.stopx+e.margin:this.nextData.stopx+e.margin*2,r=t+e.width,i=this.nextData.starty+e.margin*2,n=i+e.height;(t>=this.data.widthLimit||r>=this.data.widthLimit||this.nextData.cnt>qV)&&(t=this.nextData.startx+e.margin+sn.nextLinePaddingX,i=this.nextData.stopy+e.margin*2,this.nextData.stopx=r=t+e.width,this.nextData.starty=this.nextData.stopy,this.nextData.stopy=n=i+e.height,this.nextData.cnt=1),e.x=t,e.y=i,this.updateVal(this.data,"startx",t,Math.min),this.updateVal(this.data,"starty",i,Math.min),this.updateVal(this.data,"stopx",r,Math.max),this.updateVal(this.data,"stopy",n,Math.max),this.updateVal(this.nextData,"startx",t,Math.min),this.updateVal(this.nextData,"starty",i,Math.min),this.updateVal(this.nextData,"stopx",r,Math.max),this.updateVal(this.nextData,"stopy",n,Math.max)}init(e){this.name="",this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,widthLimit:void 0},this.nextData={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,cnt:0},wI(e.db.getConfig())}bumpLastMargin(e){this.data.stopx+=e,this.data.stopy+=e}},wI=k(function(e){Xs(sn,e),e.fontFamily&&(sn.personFontFamily=sn.systemFontFamily=sn.messageFontFamily=e.fontFamily),e.fontSize&&(sn.personFontSize=sn.systemFontSize=sn.messageFontSize=e.fontSize),e.fontWeight&&(sn.personFontWeight=sn.systemFontWeight=sn.messageFontWeight=e.fontWeight)},"setConf"),F_=k((e,t)=>({fontFamily:e[t+"FontFamily"],fontSize:e[t+"FontSize"],fontWeight:e[t+"FontWeight"]}),"c4ShapeFont"),g7=k(e=>({fontFamily:e.boundaryFontFamily,fontSize:e.boundaryFontSize,fontWeight:e.boundaryFontWeight}),"boundaryFont"),fge=k(e=>({fontFamily:e.messageFontFamily,fontSize:e.messageFontSize,fontWeight:e.messageFontWeight}),"messageFont"),k($c,"calcC4ShapeTextWH"),KV=k(function(e,t,r){t.x=r.data.startx,t.y=r.data.starty,t.width=r.data.stopx-r.data.startx,t.height=r.data.stopy-r.data.starty,t.label.y=sn.c4ShapeMargin-35;let i=t.wrap&&sn.wrap,n=g7(sn);n.fontSize=n.fontSize+2,n.fontWeight="bold";let a=Oc(t.label.text,n);$c("label",t,i,n,a),Id.drawBoundary(e,t,sn)},"drawBoundary"),ZV=k(function(e,t,r,i){let n=0;for(let a of i){n=0;let s=r[a],u=F_(sn,s.typeC4Shape.text);switch(u.fontSize=u.fontSize-2,s.typeC4Shape.width=Oc("\xAB"+s.typeC4Shape.text+"\xBB",u),s.typeC4Shape.height=u.fontSize+2,s.typeC4Shape.Y=sn.c4ShapePadding,n=s.typeC4Shape.Y+s.typeC4Shape.height-4,s.image={width:0,height:0,Y:0},s.typeC4Shape.text){case"person":case"external_person":s.image.width=48,s.image.height=48,s.image.Y=n,n=s.image.Y+s.image.height;break}s.sprite&&(s.image.width=48,s.image.height=48,s.image.Y=n,n=s.image.Y+s.image.height);let h=s.wrap&&sn.wrap,d=sn.width-sn.c4ShapePadding*2,p=F_(sn,s.typeC4Shape.text);if(p.fontSize=p.fontSize+2,p.fontWeight="bold",$c("label",s,h,p,d),s.label.Y=n+8,n=s.label.Y+s.label.height,s.type&&s.type.text!==""){s.type.text="["+s.type.text+"]";let m=F_(sn,s.typeC4Shape.text);$c("type",s,h,m,d),s.type.Y=n+5,n=s.type.Y+s.type.height}else if(s.techn&&s.techn.text!==""){s.techn.text="["+s.techn.text+"]";let m=F_(sn,s.techn.text);$c("techn",s,h,m,d),s.techn.Y=n+5,n=s.techn.Y+s.techn.height}let g=n,y=s.label.width;if(s.descr&&s.descr.text!==""){let m=F_(sn,s.typeC4Shape.text);$c("descr",s,h,m,d),s.descr.Y=n+20,n=s.descr.Y+s.descr.height,y=Math.max(s.label.width,s.descr.width),g=n-s.descr.textLines*5}y=y+sn.c4ShapePadding,s.width=Math.max(s.width||sn.width,y,sn.width),s.height=Math.max(s.height||sn.height,g,sn.height),s.margin=s.margin||sn.c4ShapeMargin,e.insert(s),Id.drawC4Shape(t,s,sn)}e.bumpLastMargin(sn.c4ShapeMargin)},"drawC4ShapeArray"),Jh=class{static{k(this,"Point")}constructor(e,t){this.x=e,this.y=t}},QV=k(function(e,t){let r=e.x,i=e.y,n=t.x,a=t.y,s=r+e.width/2,u=i+e.height/2,h=Math.abs(r-n),d=Math.abs(i-a),p=d/h,g=e.height/e.width,y=null;return i==a&&r<n?y=new Jh(r+e.width,u):i==a&&r>n?y=new Jh(r,u):r==n&&i<a?y=new Jh(s,i+e.height):r==n&&i>a&&(y=new Jh(s,i)),r>n&&i<a?g>=p?y=new Jh(r,u+p*e.width/2):y=new Jh(s-h/d*e.height/2,i+e.height):r<n&&i<a?g>=p?y=new Jh(r+e.width,u+p*e.width/2):y=new Jh(s+h/d*e.height/2,i+e.height):r<n&&i>a?g>=p?y=new Jh(r+e.width,u-p*e.width/2):y=new Jh(s+e.height/2*h/d,i):r>n&&i>a&&(g>=p?y=new Jh(r,u-e.width/2*p):y=new Jh(s-e.height/2*h/d,i)),y},"getIntersectPoint"),gge=k(function(e,t){let r={x:0,y:0};r.x=t.x+t.width/2,r.y=t.y+t.height/2;let i=QV(e,r);r.x=e.x+e.width/2,r.y=e.y+e.height/2;let n=QV(t,r);return{startPoint:i,endPoint:n}},"getIntersectPoints"),mge=k(function(e,t,r,i){let n=0;for(let a of t){n=n+1;let s=a.wrap&&sn.wrap,u=fge(sn);i.db.getC4Type()==="C4Dynamic"&&(a.label.text=n+": "+a.label.text);let h=Oc(a.label.text,u);$c("label",a,s,u,h),a.techn&&a.techn.text!==""&&(h=Oc(a.techn.text,u),$c("techn",a,s,u,h)),a.descr&&a.descr.text!==""&&(h=Oc(a.descr.text,u),$c("descr",a,s,u,h));let d=r(a.from),p=r(a.to),g=gge(d,p);a.startPoint=g.startPoint,a.endPoint=g.endPoint}Id.drawRels(e,t,sn)},"drawRels"),k(HV,"drawInsideBoundary"),yge=k(function(e,t,r,i){sn=at().c4;let n=at().securityLevel,a;n==="sandbox"&&(a=Nr("#i"+t));let s=Nr(n==="sandbox"?a.nodes()[0].contentDocument.body:"body"),u=i.db;i.db.setWrap(sn.wrap),qV=u.getC4ShapeInRow(),_I=u.getC4BoundaryInRow(),Ce.debug(`C:${JSON.stringify(sn,null,2)}`);let h=n==="sandbox"?s.select(`[id="${t}"]`):Nr(`[id="${t}"]`);Id.insertComputerIcon(h),Id.insertDatabaseIcon(h),Id.insertClockIcon(h);let d=new XV(i);d.setData(sn.diagramMarginX,sn.diagramMarginX,sn.diagramMarginY,sn.diagramMarginY),d.data.widthLimit=screen.availWidth,p7=sn.diagramMarginX,f7=sn.diagramMarginY;let p=i.db.getTitle(),g=i.db.getBoundarys("");HV(h,"",d,g,i),Id.insertArrowHead(h),Id.insertArrowEnd(h),Id.insertArrowCrossHead(h),Id.insertArrowFilledHead(h),mge(h,i.db.getRels(),i.db.getC4Shape,i),d.data.stopx=p7,d.data.stopy=f7;let y=d.data,m=y.stopy-y.starty+2*sn.diagramMarginY,x=y.stopx-y.startx+2*sn.diagramMarginX;p&&h.append("text").text(p).attr("x",(y.stopx-y.startx)/2-4*sn.diagramMarginX).attr("y",y.starty+sn.diagramMarginY),Oo(h,m,x,sn.useMaxWidth);let _=p?60:0;h.attr("viewBox",y.startx-sn.diagramMarginX+" -"+(sn.diagramMarginY+_)+" "+x+" "+(m+_)),Ce.debug("models:",y)},"draw"),JV={drawPersonOrSystemArray:ZV,drawBoundary:KV,setConf:wI,draw:yge},vge=k(e=>`.person {
    stroke: ${e.personBorder};
    fill: ${e.personBkg};
  }
`,"getStyles"),xge=vge,bge={parser:Cfe,db:xI,renderer:JV,styles:xge,init:k(({c4:e,wrap:t})=>{JV.setConf(e),xI.setWrap(t)},"init")}}),kI,TI,_ge,wge,Ov=D(()=>{Qn(),ha(),kI=k((e,t)=>{let r;return t==="sandbox"&&(r=Nr("#i"+e)),Nr(t==="sandbox"?r.nodes()[0].contentDocument.body:"body").select(`[id="${e}"]`)},"getDiagramElement"),TI=k((e,t,r,i)=>{e.attr("class",r);let{width:n,height:a,x:s,y:u}=_ge(e,t);Oo(e,a,n,i);let h=wge(s,u,n,a,t);e.attr("viewBox",h),Ce.debug(`viewBox configured: ${h} with padding: ${t}`)},"setupViewPortForSVG"),_ge=k((e,t)=>{let r=e.node()?.getBBox()||{width:0,height:0,x:0,y:0};return{width:r.width+t*2,height:r.height+t*2,x:r.x,y:r.y}},"calculateDimensionsWithPadding"),wge=k((e,t,r,i,n)=>`${e-n} ${t-n} ${r} ${i}`,"createViewBox")}),EI={};oi(EI,{diagram:()=>l1e});function CI(e){let t=[];for(let r of e){let i=$_.get(r);i?.styles&&(t=[...t,...i.styles??[]].map(n=>n.trim())),i?.textStyles&&(t=[...t,...i.textStyles??[]].map(n=>n.trim()))}return t}var kge,eW,Bv,Cf,Fu,$_,G0,SI,AI,m7,MI,Uc,LI,y7,v7,x7,Tge,Ege,Cge,Sge,Age,Mge,Lge,RI,Rge,Dge,Ige,tW,Nge,Oge,rW,iW,nW,Bge,aW,Pge,Fge,$ge,zge,Gge,z_,sW,oW,Uge,jge,lW,Hge,Vge,Wge,Yge,qge,uW,hW,Xge,Kge,Zge,Qge,Jge,e1e,DI,t1e,r1e,i1e,II,n1e,a1e,s1e,o1e,l1e,cW=D(()=>{Ov(),k4(),fm(),sm(),B0(),Oh(),xf(),uh(),ch(),Os(),Qn(),ha(),ha(),Ge(),kge="flowchart-",eW=0,Bv=at(),Cf=new Map,Fu=[],$_=new Map,G0=[],SI=new Map,AI=new Map,m7=0,MI=!0,y7=[],v7=k(e=>zr.sanitizeText(e,Bv),"sanitizeText"),x7=k(function(e){for(let t of Cf.values())if(t.id===e)return t.domId;return e},"lookUpDomId"),Tge=k(function(e,t,r,i,n,a,s={},u){if(!e||e.trim().length===0)return;let h,d=Cf.get(e);if(d===void 0&&(d={id:e,labelType:"text",domId:kge+e+"-"+eW,styles:[],classes:[]},Cf.set(e,d)),eW++,t!==void 0?(Bv=at(),h=v7(t.text.trim()),d.labelType=t.type,h.startsWith('"')&&h.endsWith('"')&&(h=h.substring(1,h.length-1)),d.text=h):d.text===void 0&&(d.text=e),r!==void 0&&(d.type=r),i?.forEach(function(p){d.styles.push(p)}),n?.forEach(function(p){d.classes.push(p)}),a!==void 0&&(d.dir=a),d.props===void 0?d.props=s:s!==void 0&&Object.assign(d.props,s),u!==void 0){let p;u.includes(`
`)?p=u+`
`:p=`{
`+u+`
}`;let g=w4(p,{schema:_4});if(g.shape){if(g.shape!==g.shape.toLowerCase()||g.shape.includes("_"))throw new Error(`No such shape: ${g.shape}. Shape names should be lowercase.`);if(!sle(g.shape))throw new Error(`No such shape: ${g.shape}.`);d.type=g?.shape}g?.label&&(d.text=g?.label),g?.icon&&(d.icon=g?.icon,!g.label?.trim()&&d.text===e&&(d.text="")),g?.form&&(d.form=g?.form),g?.pos&&(d.pos=g?.pos),g?.img&&(d.img=g?.img,!g.label?.trim()&&d.text===e&&(d.text="")),g?.constraint&&(d.constraint=g.constraint),g.w&&(d.assetWidth=Number(g.w)),g.h&&(d.assetHeight=Number(g.h))}},"addVertex"),Ege=k(function(e,t,r){let i={start:e,end:t,type:void 0,text:"",labelType:"text"};Ce.info("abc78 Got edge...",i);let n=r.text;if(n!==void 0&&(i.text=v7(n.text.trim()),i.text.startsWith('"')&&i.text.endsWith('"')&&(i.text=i.text.substring(1,i.text.length-1)),i.labelType=n.type),r!==void 0&&(i.type=r.type,i.stroke=r.stroke,i.length=r.length>10?10:r.length),Fu.length<(Bv.maxEdges??500))Ce.info("Pushing edge..."),Fu.push(i);else throw new Error(`Edge limit exceeded. ${Fu.length} edges found, but the limit is ${Bv.maxEdges}.

Initialize mermaid with maxEdges set to a higher number to allow more edges.
You cannot set this config via configuration inside the diagram as it is a secure config.
You have to call mermaid.initialize.`)},"addSingleLink"),Cge=k(function(e,t,r){Ce.info("addLink",e,t,r);for(let i of e)for(let n of t)Ege(i,n,r)},"addLink"),Sge=k(function(e,t){e.forEach(function(r){r==="default"?Fu.defaultInterpolate=t:Fu[r].interpolate=t})},"updateLinkInterpolate"),Age=k(function(e,t){e.forEach(function(r){if(typeof r=="number"&&r>=Fu.length)throw new Error(`The index ${r} for linkStyle is out of bounds. Valid indices for linkStyle are between 0 and ${Fu.length-1}. (Help: Ensure that the index is within the range of existing edges.)`);r==="default"?Fu.defaultStyle=t:(Fu[r].style=t,(Fu[r]?.style?.length??0)>0&&!Fu[r]?.style?.some(i=>i?.startsWith("fill"))&&Fu[r]?.style?.push("fill:none"))})},"updateLink"),Mge=k(function(e,t){e.split(",").forEach(function(r){let i=$_.get(r);i===void 0&&(i={id:r,styles:[],textStyles:[]},$_.set(r,i)),t?.forEach(function(n){if(/color/.exec(n)){let a=n.replace("fill","bgFill");i.textStyles.push(a)}i.styles.push(n)})})},"addClass"),Lge=k(function(e){Uc=e,/.*</.exec(Uc)&&(Uc="RL"),/.*\^/.exec(Uc)&&(Uc="BT"),/.*>/.exec(Uc)&&(Uc="LR"),/.*v/.exec(Uc)&&(Uc="TB"),Uc==="TD"&&(Uc="TB")},"setDirection"),RI=k(function(e,t){for(let r of e.split(",")){let i=Cf.get(r);i&&i.classes.push(t);let n=SI.get(r);n&&n.classes.push(t)}},"setClass"),Rge=k(function(e,t){if(t!==void 0){t=v7(t);for(let r of e.split(","))AI.set(LI==="gen-1"?x7(r):r,t)}},"setTooltip"),Dge=k(function(e,t,r){let i=x7(e);if(at().securityLevel!=="loose"||t===void 0)return;let n=[];if(typeof r=="string"){n=r.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let s=0;s<n.length;s++){let u=n[s].trim();u.startsWith('"')&&u.endsWith('"')&&(u=u.substr(1,u.length-2)),n[s]=u}}n.length===0&&n.push(e);let a=Cf.get(e);a&&(a.haveCallback=!0,y7.push(function(){let s=document.querySelector(`[id="${i}"]`);s!==null&&s.addEventListener("click",function(){qn.runFunc(t,...n)},!1)}))},"setClickFun"),Ige=k(function(e,t,r){e.split(",").forEach(function(i){let n=Cf.get(i);n!==void 0&&(n.link=qn.formatUrl(t,Bv),n.linkTarget=r)}),RI(e,"clickable")},"setLink"),tW=k(function(e){return AI.get(e)},"getTooltip"),Nge=k(function(e,t,r){e.split(",").forEach(function(i){Dge(i,t,r)}),RI(e,"clickable")},"setClickEvent"),Oge=k(function(e){y7.forEach(function(t){t(e)})},"bindFunctions"),rW=k(function(){return Uc.trim()},"getDirection"),iW=k(function(){return Cf},"getVertices"),nW=k(function(){return Fu},"getEdges"),Bge=k(function(){return $_},"getClasses"),aW=k(function(e){let t=Nr(".mermaidTooltip");(t._groups||t)[0][0]===null&&(t=Nr("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),Nr(e).select("svg").selectAll("g.node").on("mouseover",function(){let r=Nr(this);if(r.attr("title")===null)return;let i=this?.getBoundingClientRect();t.transition().duration(200).style("opacity",".9"),t.text(r.attr("title")).style("left",window.scrollX+i.left+(i.right-i.left)/2+"px").style("top",window.scrollY+i.bottom+"px"),t.html(t.html().replace(/&lt;br\/&gt;/g,"<br/>")),r.classed("hover",!0)}).on("mouseout",function(){t.transition().duration(500).style("opacity",0),Nr(this).classed("hover",!1)})},"setupToolTips"),y7.push(aW),Pge=k(function(e="gen-1"){Cf=new Map,$_=new Map,Fu=[],y7=[aW],G0=[],SI=new Map,m7=0,AI=new Map,MI=!0,LI=e,Bv=at(),ho()},"clear"),Fge=k(e=>{LI=e||"gen-2"},"setGen"),$ge=k(function(){return"fill:#ffa;stroke: #f66; stroke-width: 3px; stroke-dasharray: 5, 5;fill:#ffa;stroke: #666;"},"defaultStyle"),zge=k(function(e,t,r){let i=e.text.trim(),n=r.text;e===r&&/\s/.exec(r.text)&&(i=void 0);function a(d){let p={boolean:{},number:{},string:{}},g=[],y;return{nodeList:d.filter(function(m){let x=typeof m;return m.stmt&&m.stmt==="dir"?(y=m.value,!1):m.trim()===""?!1:x in p?p[x].hasOwnProperty(m)?!1:p[x][m]=!0:g.includes(m)?!1:g.push(m)}),dir:y}}k(a,"uniq");let{nodeList:s,dir:u}=a(t.flat());if(LI==="gen-1")for(let d=0;d<s.length;d++)s[d]=x7(s[d]);i=i??"subGraph"+m7,n=n||"",n=v7(n),m7=m7+1;let h={id:i,nodes:s,title:n.trim(),classes:[],dir:u,labelType:r.type};return Ce.info("Adding",h.id,h.nodes,h.dir),h.nodes=hW(h,G0).nodes,G0.push(h),SI.set(i,h),i},"addSubGraph"),Gge=k(function(e){for(let[t,r]of G0.entries())if(r.id===e)return t;return-1},"getPosForId"),z_=-1,sW=[],oW=k(function(e,t){let r=G0[t].nodes;if(z_=z_+1,z_>2e3)return{result:!1,count:0};if(sW[z_]=t,G0[t].id===e)return{result:!0,count:0};let i=0,n=1;for(;i<r.length;){let a=Gge(r[i]);if(a>=0){let s=oW(e,a);if(s.result)return{result:!0,count:n+s.count};n=n+s.count}i=i+1}return{result:!1,count:n}},"indexNodes2"),Uge=k(function(e){return sW[e]},"getDepthFirstPos"),jge=k(function(){z_=-1,G0.length>0&&oW("none",G0.length-1)},"indexNodes"),lW=k(function(){return G0},"getSubGraphs"),Hge=k(()=>MI?(MI=!1,!0):!1,"firstGraph"),Vge=k(e=>{let t=e.trim(),r="arrow_open";switch(t[0]){case"<":r="arrow_point",t=t.slice(1);break;case"x":r="arrow_cross",t=t.slice(1);break;case"o":r="arrow_circle",t=t.slice(1);break}let i="normal";return t.includes("=")&&(i="thick"),t.includes(".")&&(i="dotted"),{type:r,stroke:i}},"destructStartLink"),Wge=k((e,t)=>{let r=t.length,i=0;for(let n=0;n<r;++n)t[n]===e&&++i;return i},"countChar"),Yge=k(e=>{let t=e.trim(),r=t.slice(0,-1),i="arrow_open";switch(t.slice(-1)){case"x":i="arrow_cross",t.startsWith("x")&&(i="double_"+i,r=r.slice(1));break;case">":i="arrow_point",t.startsWith("<")&&(i="double_"+i,r=r.slice(1));break;case"o":i="arrow_circle",t.startsWith("o")&&(i="double_"+i,r=r.slice(1));break}let n="normal",a=r.length-1;r.startsWith("=")&&(n="thick"),r.startsWith("~")&&(n="invisible");let s=Wge(".",r);return s&&(n="dotted",a=s),{type:i,stroke:n,length:a}},"destructEndLink"),qge=k((e,t)=>{let r=Yge(e),i;if(t){if(i=Vge(t),i.stroke!==r.stroke)return{type:"INVALID",stroke:"INVALID"};if(i.type==="arrow_open")i.type=r.type;else{if(i.type!==r.type)return{type:"INVALID",stroke:"INVALID"};i.type="double_"+i.type}return i.type==="double_arrow"&&(i.type="double_arrow_point"),i.length=r.length,i}return r},"destructLink"),uW=k((e,t)=>{for(let r of e)if(r.nodes.includes(t))return!0;return!1},"exists"),hW=k((e,t)=>{let r=[];return e.nodes.forEach((i,n)=>{uW(t,i)||r.push(e.nodes[n])}),{nodes:r}},"makeUniq"),Xge={firstGraph:Hge},Kge=k(e=>{if(e.img)return"imageSquare";if(e.icon)return e.form==="circle"?"iconCircle":e.form==="square"?"iconSquare":e.form==="rounded"?"iconRounded":"icon";switch(e.type){case"square":case void 0:return"squareRect";case"round":return"roundedRect";case"ellipse":return"ellipse";default:return e.type}},"getTypeFromVertex"),Zge=k((e,t)=>e.find(r=>r.id===t),"findNode"),Qge=k(e=>{let t="none",r="arrow_point";switch(e){case"arrow_point":case"arrow_circle":case"arrow_cross":r=e;break;case"double_arrow_point":case"double_arrow_circle":case"double_arrow_cross":t=e.replace("double_",""),r=t;break}return{arrowTypeStart:t,arrowTypeEnd:r}},"destructEdgeType"),Jge=k((e,t,r,i,n,a)=>{let s=r.get(e.id),u=i.get(e.id)??!1,h=Zge(t,e.id);if(h)h.cssStyles=e.styles,h.cssCompiledStyles=CI(e.classes),h.cssClasses=e.classes.join(" ");else{let d={id:e.id,label:e.text,labelStyle:"",parentId:s,padding:n.flowchart?.padding||8,cssStyles:e.styles,cssCompiledStyles:CI(["default","node",...e.classes]),cssClasses:"default "+e.classes.join(" "),dir:e.dir,domId:e.domId,look:a,link:e.link,linkTarget:e.linkTarget,tooltip:tW(e.id),icon:e.icon,pos:e.pos,img:e.img,assetWidth:e.assetWidth,assetHeight:e.assetHeight,constraint:e.constraint};u?t.push({...d,isGroup:!0,shape:"rect"}):t.push({...d,isGroup:!1,shape:Kge(e)})}},"addNodeFromVertex"),k(CI,"getCompiledStyles"),e1e=k(()=>{let e=at(),t=[],r=[],i=lW(),n=new Map,a=new Map;for(let u=i.length-1;u>=0;u--){let h=i[u];h.nodes.length>0&&a.set(h.id,!0);for(let d of h.nodes)n.set(d,h.id)}for(let u=i.length-1;u>=0;u--){let h=i[u];t.push({id:h.id,label:h.title,labelStyle:"",parentId:n.get(h.id),padding:8,cssCompiledStyles:CI(h.classes),cssClasses:h.classes.join(" "),shape:"rect",dir:h.dir,isGroup:!0,look:e.look})}iW().forEach(u=>{Jge(u,t,n,a,e,e.look||"classic")});let s=nW();return s.forEach((u,h)=>{let{arrowTypeStart:d,arrowTypeEnd:p}=Qge(u.type),g=[...s.defaultStyle??[]];u.style&&g.push(...u.style);let y={id:pj(u.start,u.end,{counter:h,prefix:"L"}),start:u.start,end:u.end,type:u.type??"normal",label:u.text,labelpos:"c",thickness:u.stroke,minlen:u.length,classes:u?.stroke==="invisible"?"":"edge-thickness-normal edge-pattern-solid flowchart-link",arrowTypeStart:u?.stroke==="invisible"?"none":d,arrowTypeEnd:u?.stroke==="invisible"?"none":p,arrowheadStyle:"fill: #333",labelStyle:g,style:g,pattern:u.stroke,look:e.look};r.push(y)}),{nodes:t,edges:r,other:{},config:e}},"getData"),DI={defaultConfig:k(()=>Y6.flowchart,"defaultConfig"),setAccTitle:Ks,getAccTitle:Bo,getAccDescription:Po,getData:e1e,setAccDescription:_o,addVertex:Tge,lookUpDomId:x7,addLink:Cge,updateLinkInterpolate:Sge,updateLink:Age,addClass:Mge,setDirection:Lge,setClass:RI,setTooltip:Rge,getTooltip:tW,setClickEvent:Nge,setLink:Ige,bindFunctions:Oge,getDirection:rW,getVertices:iW,getEdges:nW,getClasses:Bge,clear:Pge,setGen:Fge,defaultStyle:$ge,addSubGraph:zge,getDepthFirstPos:Uge,indexNodes:jge,getSubGraphs:lW,destructLink:qge,lex:Xge,exists:uW,makeUniq:hW,setDiagramTitle:Fo,getDiagramTitle:$o},t1e=k(function(e,t){return t.db.getClasses()},"getClasses"),r1e=k(async function(e,t,r,i){Ce.info("REF0:"),Ce.info("Drawing state diagram (v2)",t);let{securityLevel:n,flowchart:a,layout:s}=at(),u;n==="sandbox"&&(u=Nr("#i"+t));let h=n==="sandbox"?u.nodes()[0].contentDocument:document;Ce.debug("Before getData: ");let d=i.db.getData();Ce.debug("Data: ",d);let p=kI(t,n),g=rW();d.type=i.type,d.layoutAlgorithm=zV(s),d.layoutAlgorithm==="dagre"&&s==="elk"&&Ce.warn("flowchart-elk was moved to an external package in Mermaid v11. Please refer [release notes](https://github.com/mermaid-js/mermaid/releases/tag/v11.0.0) for more details. This diagram will be rendered using `dagre` layout as a fallback."),d.direction=g,d.nodeSpacing=a?.nodeSpacing||50,d.rankSpacing=a?.rankSpacing||50,d.markers=["point","circle","cross"],d.diagramId=t,Ce.debug("REF1:",d),await fI(d,p);let y=d.config.flowchart?.diagramPadding??8;qn.insertTitle(p,"flowchartTitleText",a?.titleTopMargin||0,i.db.getDiagramTitle()),TI(p,y,"flowchart",a?.useMaxWidth||!1);for(let m of d.nodes){let x=Nr(`#${t} [id="${m.id}"]`);if(!x||!m.link)continue;let _=h.createElementNS("http://www.w3.org/2000/svg","a");_.setAttributeNS("http://www.w3.org/2000/svg","class",m.cssClasses),_.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),n==="sandbox"?_.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):m.linkTarget&&_.setAttributeNS("http://www.w3.org/2000/svg","target",m.linkTarget);let E=x.insert(function(){return _},":first-child"),w=x.select(".label-container");w&&E.append(function(){return w.node()});let C=x.select(".label");C&&E.append(function(){return C.node()})}},"draw"),i1e={getClasses:t1e,draw:r1e},II=function(){var e=k(function(Ea,si,xn,Gr){for(xn=xn||{},Gr=Ea.length;Gr--;xn[Ea[Gr]]=si);return xn},"o"),t=[1,4],r=[1,3],i=[1,5],n=[1,8,9,10,11,27,34,36,38,44,60,83,84,85,86,87,88,101,104,105,108,110,113,114,115,120,121,122,123],a=[2,2],s=[1,13],u=[1,14],h=[1,15],d=[1,16],p=[1,23],g=[1,25],y=[1,26],m=[1,27],x=[1,49],_=[1,48],E=[1,29],w=[1,30],C=[1,31],A=[1,32],M=[1,33],N=[1,44],B=[1,46],O=[1,42],L=[1,47],$=[1,43],G=[1,50],z=[1,45],F=[1,51],X=[1,52],I=[1,34],j=[1,35],H=[1,36],V=[1,37],P=[1,57],q=[1,8,9,10,11,27,32,34,36,38,44,60,83,84,85,86,87,88,101,104,105,108,110,113,114,115,120,121,122,123],Z=[1,61],J=[1,60],ae=[1,62],ue=[8,9,11,75,77],be=[1,77],Le=[1,90],xe=[1,95],Ae=[1,94],oe=[1,91],he=[1,87],le=[1,93],ke=[1,89],pe=[1,96],qe=[1,92],me=[1,97],st=[1,88],we=[8,9,10,11,40,75,77],Et=[8,9,10,11,40,46,75,77],wt=[8,9,10,11,29,40,44,46,48,50,52,54,56,58,60,63,65,67,68,70,75,77,88,101,104,105,108,110,113,114,115],Tt=[8,9,11,44,60,75,77,88,101,104,105,108,110,113,114,115],er=[44,60,88,101,104,105,108,110,113,114,115],tr=[1,123],kr=[1,122],fr=[1,130],Mt=[1,144],Kt=[1,145],ne=[1,146],He=[1,147],Te=[1,132],Qe=[1,134],ce=[1,138],Ut=[1,139],fe=[1,140],ze=[1,141],yt=[1,142],bt=[1,143],At=[1,148],ct=[1,149],zt=[1,128],ft=[1,129],Pr=[1,136],Mi=[1,131],Di=[1,135],ri=[1,133],Gi=[8,9,10,11,27,32,34,36,38,44,60,83,84,85,86,87,88,101,104,105,108,110,113,114,115,120,121,122,123],Br=[1,151],sr=[1,153],hr=[8,9,11],Ci=[8,9,10,11,14,44,60,88,104,105,108,110,113,114,115],_r=[1,173],ln=[1,169],en=[1,170],bi=[1,174],gi=[1,171],Fr=[1,172],Bi=[77,115,118],Xr=[8,9,10,11,12,14,27,29,32,44,60,75,83,84,85,86,87,88,89,104,108,110,113,114,115],xa=[10,105],Hn=[31,49,51,53,55,57,62,64,66,67,69,71,115,116,117],fa=[1,242],$s=[1,240],Za=[1,244],Vs=[1,238],ks=[1,239],Ws=[1,241],rt=[1,243],vi=[1,245],ai=[1,263],ga=[8,9,11,105],Ta=[8,9,10,11,60,83,104,105,108,109,110,111],as={trace:k(function(){},"trace"),yy:{},symbols_:{error:2,start:3,graphConfig:4,document:5,line:6,statement:7,SEMI:8,NEWLINE:9,SPACE:10,EOF:11,GRAPH:12,NODIR:13,DIR:14,FirstStmtSeparator:15,ending:16,endToken:17,spaceList:18,spaceListNewline:19,vertexStatement:20,separator:21,styleStatement:22,linkStyleStatement:23,classDefStatement:24,classStatement:25,clickStatement:26,subgraph:27,textNoTags:28,SQS:29,text:30,SQE:31,end:32,direction:33,acc_title:34,acc_title_value:35,acc_descr:36,acc_descr_value:37,acc_descr_multiline_value:38,shapeData:39,SHAPE_DATA:40,link:41,node:42,styledVertex:43,AMP:44,vertex:45,STYLE_SEPARATOR:46,idString:47,DOUBLECIRCLESTART:48,DOUBLECIRCLEEND:49,PS:50,PE:51,"(-":52,"-)":53,STADIUMSTART:54,STADIUMEND:55,SUBROUTINESTART:56,SUBROUTINEEND:57,VERTEX_WITH_PROPS_START:58,"NODE_STRING[field]":59,COLON:60,"NODE_STRING[value]":61,PIPE:62,CYLINDERSTART:63,CYLINDEREND:64,DIAMOND_START:65,DIAMOND_STOP:66,TAGEND:67,TRAPSTART:68,TRAPEND:69,INVTRAPSTART:70,INVTRAPEND:71,linkStatement:72,arrowText:73,TESTSTR:74,START_LINK:75,edgeText:76,LINK:77,edgeTextToken:78,STR:79,MD_STR:80,textToken:81,keywords:82,STYLE:83,LINKSTYLE:84,CLASSDEF:85,CLASS:86,CLICK:87,DOWN:88,UP:89,textNoTagsToken:90,stylesOpt:91,"idString[vertex]":92,"idString[class]":93,CALLBACKNAME:94,CALLBACKARGS:95,HREF:96,LINK_TARGET:97,"STR[link]":98,"STR[tooltip]":99,alphaNum:100,DEFAULT:101,numList:102,INTERPOLATE:103,NUM:104,COMMA:105,style:106,styleComponent:107,NODE_STRING:108,UNIT:109,BRKT:110,PCT:111,idStringToken:112,MINUS:113,MULT:114,UNICODE_TEXT:115,TEXT:116,TAGSTART:117,EDGE_TEXT:118,alphaNumToken:119,direction_tb:120,direction_bt:121,direction_rl:122,direction_lr:123,$accept:0,$end:1},terminals_:{2:"error",8:"SEMI",9:"NEWLINE",10:"SPACE",11:"EOF",12:"GRAPH",13:"NODIR",14:"DIR",27:"subgraph",29:"SQS",31:"SQE",32:"end",34:"acc_title",35:"acc_title_value",36:"acc_descr",37:"acc_descr_value",38:"acc_descr_multiline_value",40:"SHAPE_DATA",44:"AMP",46:"STYLE_SEPARATOR",48:"DOUBLECIRCLESTART",49:"DOUBLECIRCLEEND",50:"PS",51:"PE",52:"(-",53:"-)",54:"STADIUMSTART",55:"STADIUMEND",56:"SUBROUTINESTART",57:"SUBROUTINEEND",58:"VERTEX_WITH_PROPS_START",59:"NODE_STRING[field]",60:"COLON",61:"NODE_STRING[value]",62:"PIPE",63:"CYLINDERSTART",64:"CYLINDEREND",65:"DIAMOND_START",66:"DIAMOND_STOP",67:"TAGEND",68:"TRAPSTART",69:"TRAPEND",70:"INVTRAPSTART",71:"INVTRAPEND",74:"TESTSTR",75:"START_LINK",77:"LINK",79:"STR",80:"MD_STR",83:"STYLE",84:"LINKSTYLE",85:"CLASSDEF",86:"CLASS",87:"CLICK",88:"DOWN",89:"UP",92:"idString[vertex]",93:"idString[class]",94:"CALLBACKNAME",95:"CALLBACKARGS",96:"HREF",97:"LINK_TARGET",98:"STR[link]",99:"STR[tooltip]",101:"DEFAULT",103:"INTERPOLATE",104:"NUM",105:"COMMA",108:"NODE_STRING",109:"UNIT",110:"BRKT",111:"PCT",113:"MINUS",114:"MULT",115:"UNICODE_TEXT",116:"TEXT",117:"TAGSTART",118:"EDGE_TEXT",120:"direction_tb",121:"direction_bt",122:"direction_rl",123:"direction_lr"},productions_:[0,[3,2],[5,0],[5,2],[6,1],[6,1],[6,1],[6,1],[6,1],[4,2],[4,2],[4,2],[4,3],[16,2],[16,1],[17,1],[17,1],[17,1],[15,1],[15,1],[15,2],[19,2],[19,2],[19,1],[19,1],[18,2],[18,1],[7,2],[7,2],[7,2],[7,2],[7,2],[7,2],[7,9],[7,6],[7,4],[7,1],[7,2],[7,2],[7,1],[21,1],[21,1],[21,1],[39,2],[39,1],[20,4],[20,3],[20,4],[20,2],[20,2],[20,1],[42,1],[42,6],[42,5],[43,1],[43,3],[45,4],[45,4],[45,6],[45,4],[45,4],[45,4],[45,8],[45,4],[45,4],[45,4],[45,6],[45,4],[45,4],[45,4],[45,4],[45,4],[45,1],[41,2],[41,3],[41,3],[41,1],[41,3],[76,1],[76,2],[76,1],[76,1],[72,1],[73,3],[30,1],[30,2],[30,1],[30,1],[82,1],[82,1],[82,1],[82,1],[82,1],[82,1],[82,1],[82,1],[82,1],[82,1],[82,1],[28,1],[28,2],[28,1],[28,1],[24,5],[25,5],[26,2],[26,4],[26,3],[26,5],[26,3],[26,5],[26,5],[26,7],[26,2],[26,4],[26,2],[26,4],[26,4],[26,6],[22,5],[23,5],[23,5],[23,9],[23,9],[23,7],[23,7],[102,1],[102,3],[91,1],[91,3],[106,1],[106,2],[107,1],[107,1],[107,1],[107,1],[107,1],[107,1],[107,1],[107,1],[112,1],[112,1],[112,1],[112,1],[112,1],[112,1],[112,1],[112,1],[112,1],[112,1],[112,1],[81,1],[81,1],[81,1],[81,1],[90,1],[90,1],[90,1],[90,1],[90,1],[90,1],[90,1],[90,1],[90,1],[90,1],[90,1],[78,1],[78,1],[119,1],[119,1],[119,1],[119,1],[119,1],[119,1],[119,1],[119,1],[119,1],[119,1],[119,1],[47,1],[47,2],[100,1],[100,2],[33,1],[33,1],[33,1],[33,1]],performAction:k(function(Ea,si,xn,Gr,ea,Be,Xn){var Xe=Be.length-1;switch(ea){case 2:this.$=[];break;case 3:(!Array.isArray(Be[Xe])||Be[Xe].length>0)&&Be[Xe-1].push(Be[Xe]),this.$=Be[Xe-1];break;case 4:case 181:this.$=Be[Xe];break;case 11:Gr.setDirection("TB"),this.$="TB";break;case 12:Gr.setDirection(Be[Xe-1]),this.$=Be[Xe-1];break;case 27:this.$=Be[Xe-1].nodes;break;case 28:case 29:case 30:case 31:case 32:this.$=[];break;case 33:this.$=Gr.addSubGraph(Be[Xe-6],Be[Xe-1],Be[Xe-4]);break;case 34:this.$=Gr.addSubGraph(Be[Xe-3],Be[Xe-1],Be[Xe-3]);break;case 35:this.$=Gr.addSubGraph(void 0,Be[Xe-1],void 0);break;case 37:this.$=Be[Xe].trim(),Gr.setAccTitle(this.$);break;case 38:case 39:this.$=Be[Xe].trim(),Gr.setAccDescription(this.$);break;case 43:this.$=Be[Xe-1]+Be[Xe];break;case 44:this.$=Be[Xe];break;case 45:Gr.addVertex(Be[Xe-1][0],void 0,void 0,void 0,void 0,void 0,void 0,Be[Xe]),Gr.addLink(Be[Xe-3].stmt,Be[Xe-1],Be[Xe-2]),this.$={stmt:Be[Xe-1],nodes:Be[Xe-1].concat(Be[Xe-3].nodes)};break;case 46:Gr.addLink(Be[Xe-2].stmt,Be[Xe],Be[Xe-1]),this.$={stmt:Be[Xe],nodes:Be[Xe].concat(Be[Xe-2].nodes)};break;case 47:Gr.addLink(Be[Xe-3].stmt,Be[Xe-1],Be[Xe-2]),this.$={stmt:Be[Xe-1],nodes:Be[Xe-1].concat(Be[Xe-3].nodes)};break;case 48:this.$={stmt:Be[Xe-1],nodes:Be[Xe-1]};break;case 49:Gr.addVertex(Be[Xe-1][0],void 0,void 0,void 0,void 0,void 0,void 0,Be[Xe]),this.$={stmt:Be[Xe-1],nodes:Be[Xe-1],shapeData:Be[Xe]};break;case 50:this.$={stmt:Be[Xe],nodes:Be[Xe]};break;case 51:this.$=[Be[Xe]];break;case 52:Gr.addVertex(Be[Xe-5][0],void 0,void 0,void 0,void 0,void 0,void 0,Be[Xe-4]),this.$=Be[Xe-5].concat(Be[Xe]);break;case 53:this.$=Be[Xe-4].concat(Be[Xe]);break;case 54:this.$=Be[Xe];break;case 55:this.$=Be[Xe-2],Gr.setClass(Be[Xe-2],Be[Xe]);break;case 56:this.$=Be[Xe-3],Gr.addVertex(Be[Xe-3],Be[Xe-1],"square");break;case 57:this.$=Be[Xe-3],Gr.addVertex(Be[Xe-3],Be[Xe-1],"doublecircle");break;case 58:this.$=Be[Xe-5],Gr.addVertex(Be[Xe-5],Be[Xe-2],"circle");break;case 59:this.$=Be[Xe-3],Gr.addVertex(Be[Xe-3],Be[Xe-1],"ellipse");break;case 60:this.$=Be[Xe-3],Gr.addVertex(Be[Xe-3],Be[Xe-1],"stadium");break;case 61:this.$=Be[Xe-3],Gr.addVertex(Be[Xe-3],Be[Xe-1],"subroutine");break;case 62:this.$=Be[Xe-7],Gr.addVertex(Be[Xe-7],Be[Xe-1],"rect",void 0,void 0,void 0,Object.fromEntries([[Be[Xe-5],Be[Xe-3]]]));break;case 63:this.$=Be[Xe-3],Gr.addVertex(Be[Xe-3],Be[Xe-1],"cylinder");break;case 64:this.$=Be[Xe-3],Gr.addVertex(Be[Xe-3],Be[Xe-1],"round");break;case 65:this.$=Be[Xe-3],Gr.addVertex(Be[Xe-3],Be[Xe-1],"diamond");break;case 66:this.$=Be[Xe-5],Gr.addVertex(Be[Xe-5],Be[Xe-2],"hexagon");break;case 67:this.$=Be[Xe-3],Gr.addVertex(Be[Xe-3],Be[Xe-1],"odd");break;case 68:this.$=Be[Xe-3],Gr.addVertex(Be[Xe-3],Be[Xe-1],"trapezoid");break;case 69:this.$=Be[Xe-3],Gr.addVertex(Be[Xe-3],Be[Xe-1],"inv_trapezoid");break;case 70:this.$=Be[Xe-3],Gr.addVertex(Be[Xe-3],Be[Xe-1],"lean_right");break;case 71:this.$=Be[Xe-3],Gr.addVertex(Be[Xe-3],Be[Xe-1],"lean_left");break;case 72:this.$=Be[Xe],Gr.addVertex(Be[Xe]);break;case 73:Be[Xe-1].text=Be[Xe],this.$=Be[Xe-1];break;case 74:case 75:Be[Xe-2].text=Be[Xe-1],this.$=Be[Xe-2];break;case 76:this.$=Be[Xe];break;case 77:var zs=Gr.destructLink(Be[Xe],Be[Xe-2]);this.$={type:zs.type,stroke:zs.stroke,length:zs.length,text:Be[Xe-1]};break;case 78:this.$={text:Be[Xe],type:"text"};break;case 79:this.$={text:Be[Xe-1].text+""+Be[Xe],type:Be[Xe-1].type};break;case 80:this.$={text:Be[Xe],type:"string"};break;case 81:this.$={text:Be[Xe],type:"markdown"};break;case 82:var zs=Gr.destructLink(Be[Xe]);this.$={type:zs.type,stroke:zs.stroke,length:zs.length};break;case 83:this.$=Be[Xe-1];break;case 84:this.$={text:Be[Xe],type:"text"};break;case 85:this.$={text:Be[Xe-1].text+""+Be[Xe],type:Be[Xe-1].type};break;case 86:this.$={text:Be[Xe],type:"string"};break;case 87:case 102:this.$={text:Be[Xe],type:"markdown"};break;case 99:this.$={text:Be[Xe],type:"text"};break;case 100:this.$={text:Be[Xe-1].text+""+Be[Xe],type:Be[Xe-1].type};break;case 101:this.$={text:Be[Xe],type:"text"};break;case 103:this.$=Be[Xe-4],Gr.addClass(Be[Xe-2],Be[Xe]);break;case 104:this.$=Be[Xe-4],Gr.setClass(Be[Xe-2],Be[Xe]);break;case 105:case 113:this.$=Be[Xe-1],Gr.setClickEvent(Be[Xe-1],Be[Xe]);break;case 106:case 114:this.$=Be[Xe-3],Gr.setClickEvent(Be[Xe-3],Be[Xe-2]),Gr.setTooltip(Be[Xe-3],Be[Xe]);break;case 107:this.$=Be[Xe-2],Gr.setClickEvent(Be[Xe-2],Be[Xe-1],Be[Xe]);break;case 108:this.$=Be[Xe-4],Gr.setClickEvent(Be[Xe-4],Be[Xe-3],Be[Xe-2]),Gr.setTooltip(Be[Xe-4],Be[Xe]);break;case 109:this.$=Be[Xe-2],Gr.setLink(Be[Xe-2],Be[Xe]);break;case 110:this.$=Be[Xe-4],Gr.setLink(Be[Xe-4],Be[Xe-2]),Gr.setTooltip(Be[Xe-4],Be[Xe]);break;case 111:this.$=Be[Xe-4],Gr.setLink(Be[Xe-4],Be[Xe-2],Be[Xe]);break;case 112:this.$=Be[Xe-6],Gr.setLink(Be[Xe-6],Be[Xe-4],Be[Xe]),Gr.setTooltip(Be[Xe-6],Be[Xe-2]);break;case 115:this.$=Be[Xe-1],Gr.setLink(Be[Xe-1],Be[Xe]);break;case 116:this.$=Be[Xe-3],Gr.setLink(Be[Xe-3],Be[Xe-2]),Gr.setTooltip(Be[Xe-3],Be[Xe]);break;case 117:this.$=Be[Xe-3],Gr.setLink(Be[Xe-3],Be[Xe-2],Be[Xe]);break;case 118:this.$=Be[Xe-5],Gr.setLink(Be[Xe-5],Be[Xe-4],Be[Xe]),Gr.setTooltip(Be[Xe-5],Be[Xe-2]);break;case 119:this.$=Be[Xe-4],Gr.addVertex(Be[Xe-2],void 0,void 0,Be[Xe]);break;case 120:this.$=Be[Xe-4],Gr.updateLink([Be[Xe-2]],Be[Xe]);break;case 121:this.$=Be[Xe-4],Gr.updateLink(Be[Xe-2],Be[Xe]);break;case 122:this.$=Be[Xe-8],Gr.updateLinkInterpolate([Be[Xe-6]],Be[Xe-2]),Gr.updateLink([Be[Xe-6]],Be[Xe]);break;case 123:this.$=Be[Xe-8],Gr.updateLinkInterpolate(Be[Xe-6],Be[Xe-2]),Gr.updateLink(Be[Xe-6],Be[Xe]);break;case 124:this.$=Be[Xe-6],Gr.updateLinkInterpolate([Be[Xe-4]],Be[Xe]);break;case 125:this.$=Be[Xe-6],Gr.updateLinkInterpolate(Be[Xe-4],Be[Xe]);break;case 126:case 128:this.$=[Be[Xe]];break;case 127:case 129:Be[Xe-2].push(Be[Xe]),this.$=Be[Xe-2];break;case 131:this.$=Be[Xe-1]+Be[Xe];break;case 179:this.$=Be[Xe];break;case 180:this.$=Be[Xe-1]+""+Be[Xe];break;case 182:this.$=Be[Xe-1]+""+Be[Xe];break;case 183:this.$={stmt:"dir",value:"TB"};break;case 184:this.$={stmt:"dir",value:"BT"};break;case 185:this.$={stmt:"dir",value:"RL"};break;case 186:this.$={stmt:"dir",value:"LR"};break}},"anonymous"),table:[{3:1,4:2,9:t,10:r,12:i},{1:[3]},e(n,a,{5:6}),{4:7,9:t,10:r,12:i},{4:8,9:t,10:r,12:i},{13:[1,9],14:[1,10]},{1:[2,1],6:11,7:12,8:s,9:u,10:h,11:d,20:17,22:18,23:19,24:20,25:21,26:22,27:p,33:24,34:g,36:y,38:m,42:28,43:38,44:x,45:39,47:40,60:_,83:E,84:w,85:C,86:A,87:M,88:N,101:B,104:O,105:L,108:$,110:G,112:41,113:z,114:F,115:X,120:I,121:j,122:H,123:V},e(n,[2,9]),e(n,[2,10]),e(n,[2,11]),{8:[1,54],9:[1,55],10:P,15:53,18:56},e(q,[2,3]),e(q,[2,4]),e(q,[2,5]),e(q,[2,6]),e(q,[2,7]),e(q,[2,8]),{8:Z,9:J,11:ae,21:58,41:59,72:63,75:[1,64],77:[1,65]},{8:Z,9:J,11:ae,21:66},{8:Z,9:J,11:ae,21:67},{8:Z,9:J,11:ae,21:68},{8:Z,9:J,11:ae,21:69},{8:Z,9:J,11:ae,21:70},{8:Z,9:J,10:[1,71],11:ae,21:72},e(q,[2,36]),{35:[1,73]},{37:[1,74]},e(q,[2,39]),e(ue,[2,50],{18:75,39:76,10:P,40:be}),{10:[1,78]},{10:[1,79]},{10:[1,80]},{10:[1,81]},{14:Le,44:xe,60:Ae,79:[1,85],88:oe,94:[1,82],96:[1,83],100:84,104:he,105:le,108:ke,110:pe,113:qe,114:me,115:st,119:86},e(q,[2,183]),e(q,[2,184]),e(q,[2,185]),e(q,[2,186]),e(we,[2,51]),e(we,[2,54],{46:[1,98]}),e(Et,[2,72],{112:111,29:[1,99],44:x,48:[1,100],50:[1,101],52:[1,102],54:[1,103],56:[1,104],58:[1,105],60:_,63:[1,106],65:[1,107],67:[1,108],68:[1,109],70:[1,110],88:N,101:B,104:O,105:L,108:$,110:G,113:z,114:F,115:X}),e(wt,[2,179]),e(wt,[2,140]),e(wt,[2,141]),e(wt,[2,142]),e(wt,[2,143]),e(wt,[2,144]),e(wt,[2,145]),e(wt,[2,146]),e(wt,[2,147]),e(wt,[2,148]),e(wt,[2,149]),e(wt,[2,150]),e(n,[2,12]),e(n,[2,18]),e(n,[2,19]),{9:[1,112]},e(Tt,[2,26],{18:113,10:P}),e(q,[2,27]),{42:114,43:38,44:x,45:39,47:40,60:_,88:N,101:B,104:O,105:L,108:$,110:G,112:41,113:z,114:F,115:X},e(q,[2,40]),e(q,[2,41]),e(q,[2,42]),e(er,[2,76],{73:115,62:[1,117],74:[1,116]}),{76:118,78:119,79:[1,120],80:[1,121],115:tr,118:kr},e([44,60,62,74,88,101,104,105,108,110,113,114,115],[2,82]),e(q,[2,28]),e(q,[2,29]),e(q,[2,30]),e(q,[2,31]),e(q,[2,32]),{10:fr,12:Mt,14:Kt,27:ne,28:124,32:He,44:Te,60:Qe,75:ce,79:[1,126],80:[1,127],82:137,83:Ut,84:fe,85:ze,86:yt,87:bt,88:At,89:ct,90:125,104:zt,108:ft,110:Pr,113:Mi,114:Di,115:ri},e(Gi,a,{5:150}),e(q,[2,37]),e(q,[2,38]),e(ue,[2,48],{44:Br}),e(ue,[2,49],{18:152,10:P,40:sr}),e(we,[2,44]),{44:x,47:154,60:_,88:N,101:B,104:O,105:L,108:$,110:G,112:41,113:z,114:F,115:X},{101:[1,155],102:156,104:[1,157]},{44:x,47:158,60:_,88:N,101:B,104:O,105:L,108:$,110:G,112:41,113:z,114:F,115:X},{44:x,47:159,60:_,88:N,101:B,104:O,105:L,108:$,110:G,112:41,113:z,114:F,115:X},e(hr,[2,105],{10:[1,160],95:[1,161]}),{79:[1,162]},e(hr,[2,113],{119:164,10:[1,163],14:Le,44:xe,60:Ae,88:oe,104:he,105:le,108:ke,110:pe,113:qe,114:me,115:st}),e(hr,[2,115],{10:[1,165]}),e(Ci,[2,181]),e(Ci,[2,168]),e(Ci,[2,169]),e(Ci,[2,170]),e(Ci,[2,171]),e(Ci,[2,172]),e(Ci,[2,173]),e(Ci,[2,174]),e(Ci,[2,175]),e(Ci,[2,176]),e(Ci,[2,177]),e(Ci,[2,178]),{44:x,47:166,60:_,88:N,101:B,104:O,105:L,108:$,110:G,112:41,113:z,114:F,115:X},{30:167,67:_r,79:ln,80:en,81:168,115:bi,116:gi,117:Fr},{30:175,67:_r,79:ln,80:en,81:168,115:bi,116:gi,117:Fr},{30:177,50:[1,176],67:_r,79:ln,80:en,81:168,115:bi,116:gi,117:Fr},{30:178,67:_r,79:ln,80:en,81:168,115:bi,116:gi,117:Fr},{30:179,67:_r,79:ln,80:en,81:168,115:bi,116:gi,117:Fr},{30:180,67:_r,79:ln,80:en,81:168,115:bi,116:gi,117:Fr},{108:[1,181]},{30:182,67:_r,79:ln,80:en,81:168,115:bi,116:gi,117:Fr},{30:183,65:[1,184],67:_r,79:ln,80:en,81:168,115:bi,116:gi,117:Fr},{30:185,67:_r,79:ln,80:en,81:168,115:bi,116:gi,117:Fr},{30:186,67:_r,79:ln,80:en,81:168,115:bi,116:gi,117:Fr},{30:187,67:_r,79:ln,80:en,81:168,115:bi,116:gi,117:Fr},e(wt,[2,180]),e(n,[2,20]),e(Tt,[2,25]),e(ue,[2,46],{39:188,18:189,10:P,40:be}),e(er,[2,73],{10:[1,190]}),{10:[1,191]},{30:192,67:_r,79:ln,80:en,81:168,115:bi,116:gi,117:Fr},{77:[1,193],78:194,115:tr,118:kr},e(Bi,[2,78]),e(Bi,[2,80]),e(Bi,[2,81]),e(Bi,[2,166]),e(Bi,[2,167]),{8:Z,9:J,10:fr,11:ae,12:Mt,14:Kt,21:196,27:ne,29:[1,195],32:He,44:Te,60:Qe,75:ce,82:137,83:Ut,84:fe,85:ze,86:yt,87:bt,88:At,89:ct,90:197,104:zt,108:ft,110:Pr,113:Mi,114:Di,115:ri},e(Xr,[2,99]),e(Xr,[2,101]),e(Xr,[2,102]),e(Xr,[2,155]),e(Xr,[2,156]),e(Xr,[2,157]),e(Xr,[2,158]),e(Xr,[2,159]),e(Xr,[2,160]),e(Xr,[2,161]),e(Xr,[2,162]),e(Xr,[2,163]),e(Xr,[2,164]),e(Xr,[2,165]),e(Xr,[2,88]),e(Xr,[2,89]),e(Xr,[2,90]),e(Xr,[2,91]),e(Xr,[2,92]),e(Xr,[2,93]),e(Xr,[2,94]),e(Xr,[2,95]),e(Xr,[2,96]),e(Xr,[2,97]),e(Xr,[2,98]),{6:11,7:12,8:s,9:u,10:h,11:d,20:17,22:18,23:19,24:20,25:21,26:22,27:p,32:[1,198],33:24,34:g,36:y,38:m,42:28,43:38,44:x,45:39,47:40,60:_,83:E,84:w,85:C,86:A,87:M,88:N,101:B,104:O,105:L,108:$,110:G,112:41,113:z,114:F,115:X,120:I,121:j,122:H,123:V},{10:P,18:199},{44:[1,200]},e(we,[2,43]),{10:[1,201],44:x,60:_,88:N,101:B,104:O,105:L,108:$,110:G,112:111,113:z,114:F,115:X},{10:[1,202]},{10:[1,203],105:[1,204]},e(xa,[2,126]),{10:[1,205],44:x,60:_,88:N,101:B,104:O,105:L,108:$,110:G,112:111,113:z,114:F,115:X},{10:[1,206],44:x,60:_,88:N,101:B,104:O,105:L,108:$,110:G,112:111,113:z,114:F,115:X},{79:[1,207]},e(hr,[2,107],{10:[1,208]}),e(hr,[2,109],{10:[1,209]}),{79:[1,210]},e(Ci,[2,182]),{79:[1,211],97:[1,212]},e(we,[2,55],{112:111,44:x,60:_,88:N,101:B,104:O,105:L,108:$,110:G,113:z,114:F,115:X}),{31:[1,213],67:_r,81:214,115:bi,116:gi,117:Fr},e(Hn,[2,84]),e(Hn,[2,86]),e(Hn,[2,87]),e(Hn,[2,151]),e(Hn,[2,152]),e(Hn,[2,153]),e(Hn,[2,154]),{49:[1,215],67:_r,81:214,115:bi,116:gi,117:Fr},{30:216,67:_r,79:ln,80:en,81:168,115:bi,116:gi,117:Fr},{51:[1,217],67:_r,81:214,115:bi,116:gi,117:Fr},{53:[1,218],67:_r,81:214,115:bi,116:gi,117:Fr},{55:[1,219],67:_r,81:214,115:bi,116:gi,117:Fr},{57:[1,220],67:_r,81:214,115:bi,116:gi,117:Fr},{60:[1,221]},{64:[1,222],67:_r,81:214,115:bi,116:gi,117:Fr},{66:[1,223],67:_r,81:214,115:bi,116:gi,117:Fr},{30:224,67:_r,79:ln,80:en,81:168,115:bi,116:gi,117:Fr},{31:[1,225],67:_r,81:214,115:bi,116:gi,117:Fr},{67:_r,69:[1,226],71:[1,227],81:214,115:bi,116:gi,117:Fr},{67:_r,69:[1,229],71:[1,228],81:214,115:bi,116:gi,117:Fr},e(ue,[2,45],{18:152,10:P,40:sr}),e(ue,[2,47],{44:Br}),e(er,[2,75]),e(er,[2,74]),{62:[1,230],67:_r,81:214,115:bi,116:gi,117:Fr},e(er,[2,77]),e(Bi,[2,79]),{30:231,67:_r,79:ln,80:en,81:168,115:bi,116:gi,117:Fr},e(Gi,a,{5:232}),e(Xr,[2,100]),e(q,[2,35]),{43:233,44:x,45:39,47:40,60:_,88:N,101:B,104:O,105:L,108:$,110:G,112:41,113:z,114:F,115:X},{10:P,18:234},{10:fa,60:$s,83:Za,91:235,104:Vs,106:236,107:237,108:ks,109:Ws,110:rt,111:vi},{10:fa,60:$s,83:Za,91:246,103:[1,247],104:Vs,106:236,107:237,108:ks,109:Ws,110:rt,111:vi},{10:fa,60:$s,83:Za,91:248,103:[1,249],104:Vs,106:236,107:237,108:ks,109:Ws,110:rt,111:vi},{104:[1,250]},{10:fa,60:$s,83:Za,91:251,104:Vs,106:236,107:237,108:ks,109:Ws,110:rt,111:vi},{44:x,47:252,60:_,88:N,101:B,104:O,105:L,108:$,110:G,112:41,113:z,114:F,115:X},e(hr,[2,106]),{79:[1,253]},{79:[1,254],97:[1,255]},e(hr,[2,114]),e(hr,[2,116],{10:[1,256]}),e(hr,[2,117]),e(Et,[2,56]),e(Hn,[2,85]),e(Et,[2,57]),{51:[1,257],67:_r,81:214,115:bi,116:gi,117:Fr},e(Et,[2,64]),e(Et,[2,59]),e(Et,[2,60]),e(Et,[2,61]),{108:[1,258]},e(Et,[2,63]),e(Et,[2,65]),{66:[1,259],67:_r,81:214,115:bi,116:gi,117:Fr},e(Et,[2,67]),e(Et,[2,68]),e(Et,[2,70]),e(Et,[2,69]),e(Et,[2,71]),e([10,44,60,88,101,104,105,108,110,113,114,115],[2,83]),{31:[1,260],67:_r,81:214,115:bi,116:gi,117:Fr},{6:11,7:12,8:s,9:u,10:h,11:d,20:17,22:18,23:19,24:20,25:21,26:22,27:p,32:[1,261],33:24,34:g,36:y,38:m,42:28,43:38,44:x,45:39,47:40,60:_,83:E,84:w,85:C,86:A,87:M,88:N,101:B,104:O,105:L,108:$,110:G,112:41,113:z,114:F,115:X,120:I,121:j,122:H,123:V},e(we,[2,53]),{43:262,44:x,45:39,47:40,60:_,88:N,101:B,104:O,105:L,108:$,110:G,112:41,113:z,114:F,115:X},e(hr,[2,119],{105:ai}),e(ga,[2,128],{107:264,10:fa,60:$s,83:Za,104:Vs,108:ks,109:Ws,110:rt,111:vi}),e(Ta,[2,130]),e(Ta,[2,132]),e(Ta,[2,133]),e(Ta,[2,134]),e(Ta,[2,135]),e(Ta,[2,136]),e(Ta,[2,137]),e(Ta,[2,138]),e(Ta,[2,139]),e(hr,[2,120],{105:ai}),{10:[1,265]},e(hr,[2,121],{105:ai}),{10:[1,266]},e(xa,[2,127]),e(hr,[2,103],{105:ai}),e(hr,[2,104],{112:111,44:x,60:_,88:N,101:B,104:O,105:L,108:$,110:G,113:z,114:F,115:X}),e(hr,[2,108]),e(hr,[2,110],{10:[1,267]}),e(hr,[2,111]),{97:[1,268]},{51:[1,269]},{62:[1,270]},{66:[1,271]},{8:Z,9:J,11:ae,21:272},e(q,[2,34]),e(we,[2,52]),{10:fa,60:$s,83:Za,104:Vs,106:273,107:237,108:ks,109:Ws,110:rt,111:vi},e(Ta,[2,131]),{14:Le,44:xe,60:Ae,88:oe,100:274,104:he,105:le,108:ke,110:pe,113:qe,114:me,115:st,119:86},{14:Le,44:xe,60:Ae,88:oe,100:275,104:he,105:le,108:ke,110:pe,113:qe,114:me,115:st,119:86},{97:[1,276]},e(hr,[2,118]),e(Et,[2,58]),{30:277,67:_r,79:ln,80:en,81:168,115:bi,116:gi,117:Fr},e(Et,[2,66]),e(Gi,a,{5:278}),e(ga,[2,129],{107:264,10:fa,60:$s,83:Za,104:Vs,108:ks,109:Ws,110:rt,111:vi}),e(hr,[2,124],{119:164,10:[1,279],14:Le,44:xe,60:Ae,88:oe,104:he,105:le,108:ke,110:pe,113:qe,114:me,115:st}),e(hr,[2,125],{119:164,10:[1,280],14:Le,44:xe,60:Ae,88:oe,104:he,105:le,108:ke,110:pe,113:qe,114:me,115:st}),e(hr,[2,112]),{31:[1,281],67:_r,81:214,115:bi,116:gi,117:Fr},{6:11,7:12,8:s,9:u,10:h,11:d,20:17,22:18,23:19,24:20,25:21,26:22,27:p,32:[1,282],33:24,34:g,36:y,38:m,42:28,43:38,44:x,45:39,47:40,60:_,83:E,84:w,85:C,86:A,87:M,88:N,101:B,104:O,105:L,108:$,110:G,112:41,113:z,114:F,115:X,120:I,121:j,122:H,123:V},{10:fa,60:$s,83:Za,91:283,104:Vs,106:236,107:237,108:ks,109:Ws,110:rt,111:vi},{10:fa,60:$s,83:Za,91:284,104:Vs,106:236,107:237,108:ks,109:Ws,110:rt,111:vi},e(Et,[2,62]),e(q,[2,33]),e(hr,[2,122],{105:ai}),e(hr,[2,123],{105:ai})],defaultActions:{},parseError:k(function(Ea,si){if(si.recoverable)this.trace(Ea);else{var xn=new Error(Ea);throw xn.hash=si,xn}},"parseError"),parse:k(function(Ea){var si=this,xn=[0],Gr=[],ea=[null],Be=[],Xn=this.table,Xe="",zs=0,gNe=0,mNe=0,Ket=2,yNe=1,Zet=Be.slice.call(arguments,1),Bl=Object.create(this.lexer),Dx={yy:{}};for(var cte in this.yy)Object.prototype.hasOwnProperty.call(this.yy,cte)&&(Dx.yy[cte]=this.yy[cte]);Bl.setInput(Ea,Dx.yy),Dx.yy.lexer=Bl,Dx.yy.parser=this,typeof Bl.yylloc>"u"&&(Bl.yylloc={});var dte=Bl.yylloc;Be.push(dte);var Qet=Bl.options&&Bl.options.ranges;typeof Dx.yy.parseError=="function"?this.parseError=Dx.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Jet(gc){xn.length=xn.length-2*gc,ea.length=ea.length-gc,Be.length=Be.length-gc}k(Jet,"popStack");function vNe(){var gc;return gc=Gr.pop()||Bl.lex()||yNe,typeof gc!="number"&&(gc instanceof Array&&(Gr=gc,gc=Gr.pop()),gc=si.symbols_[gc]||gc),gc}k(vNe,"lex");for(var Qu,pte,Ix,Jc,rtt,fte,_w={},tF,lg,xNe,rF;;){if(Ix=xn[xn.length-1],this.defaultActions[Ix]?Jc=this.defaultActions[Ix]:((Qu===null||typeof Qu>"u")&&(Qu=vNe()),Jc=Xn[Ix]&&Xn[Ix][Qu]),typeof Jc>"u"||!Jc.length||!Jc[0]){var gte="";rF=[];for(tF in Xn[Ix])this.terminals_[tF]&&tF>Ket&&rF.push("'"+this.terminals_[tF]+"'");Bl.showPosition?gte="Parse error on line "+(zs+1)+`:
`+Bl.showPosition()+`
Expecting `+rF.join(", ")+", got '"+(this.terminals_[Qu]||Qu)+"'":gte="Parse error on line "+(zs+1)+": Unexpected "+(Qu==yNe?"end of input":"'"+(this.terminals_[Qu]||Qu)+"'"),this.parseError(gte,{text:Bl.match,token:this.terminals_[Qu]||Qu,line:Bl.yylineno,loc:dte,expected:rF})}if(Jc[0]instanceof Array&&Jc.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Ix+", token: "+Qu);switch(Jc[0]){case 1:xn.push(Qu),ea.push(Bl.yytext),Be.push(Bl.yylloc),xn.push(Jc[1]),Qu=null,pte?(Qu=pte,pte=null):(gNe=Bl.yyleng,Xe=Bl.yytext,zs=Bl.yylineno,dte=Bl.yylloc,mNe>0&&mNe--);break;case 2:if(lg=this.productions_[Jc[1]][1],_w.$=ea[ea.length-lg],_w._$={first_line:Be[Be.length-(lg||1)].first_line,last_line:Be[Be.length-1].last_line,first_column:Be[Be.length-(lg||1)].first_column,last_column:Be[Be.length-1].last_column},Qet&&(_w._$.range=[Be[Be.length-(lg||1)].range[0],Be[Be.length-1].range[1]]),fte=this.performAction.apply(_w,[Xe,gNe,zs,Dx.yy,Jc[1],ea,Be].concat(Zet)),typeof fte<"u")return fte;lg&&(xn=xn.slice(0,-1*lg*2),ea=ea.slice(0,-1*lg),Be=Be.slice(0,-1*lg)),xn.push(this.productions_[Jc[1]][0]),ea.push(_w.$),Be.push(_w._$),xNe=Xn[xn[xn.length-2]][xn[xn.length-1]],xn.push(xNe);break;case 3:return!0}}return!0},"parse")},Ol=function(){var Ea={EOF:1,parseError:k(function(si,xn){if(this.yy.parser)this.yy.parser.parseError(si,xn);else throw new Error(si)},"parseError"),setInput:k(function(si,xn){return this.yy=xn||this.yy||{},this._input=si,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:k(function(){var si=this._input[0];this.yytext+=si,this.yyleng++,this.offset++,this.match+=si,this.matched+=si;var xn=si.match(/(?:\r\n?|\n).*/g);return xn?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),si},"input"),unput:k(function(si){var xn=si.length,Gr=si.split(/(?:\r\n?|\n)/g);this._input=si+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-xn),this.offset-=xn;var ea=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Gr.length-1&&(this.yylineno-=Gr.length-1);var Be=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Gr?(Gr.length===ea.length?this.yylloc.first_column:0)+ea[ea.length-Gr.length].length-Gr[0].length:this.yylloc.first_column-xn},this.options.ranges&&(this.yylloc.range=[Be[0],Be[0]+this.yyleng-xn]),this.yyleng=this.yytext.length,this},"unput"),more:k(function(){return this._more=!0,this},"more"),reject:k(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:k(function(si){this.unput(this.match.slice(si))},"less"),pastInput:k(function(){var si=this.matched.substr(0,this.matched.length-this.match.length);return(si.length>20?"...":"")+si.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:k(function(){var si=this.match;return si.length<20&&(si+=this._input.substr(0,20-si.length)),(si.substr(0,20)+(si.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:k(function(){var si=this.pastInput(),xn=new Array(si.length+1).join("-");return si+this.upcomingInput()+`
`+xn+"^"},"showPosition"),test_match:k(function(si,xn){var Gr,ea,Be;if(this.options.backtrack_lexer&&(Be={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Be.yylloc.range=this.yylloc.range.slice(0))),ea=si[0].match(/(?:\r\n?|\n).*/g),ea&&(this.yylineno+=ea.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:ea?ea[ea.length-1].length-ea[ea.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+si[0].length},this.yytext+=si[0],this.match+=si[0],this.matches=si,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(si[0].length),this.matched+=si[0],Gr=this.performAction.call(this,this.yy,this,xn,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Gr)return Gr;if(this._backtrack){for(var Xn in Be)this[Xn]=Be[Xn];return!1}return!1},"test_match"),next:k(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var si,xn,Gr,ea;this._more||(this.yytext="",this.match="");for(var Be=this._currentRules(),Xn=0;Xn<Be.length;Xn++)if(Gr=this._input.match(this.rules[Be[Xn]]),Gr&&(!xn||Gr[0].length>xn[0].length)){if(xn=Gr,ea=Xn,this.options.backtrack_lexer){if(si=this.test_match(Gr,Be[Xn]),si!==!1)return si;if(this._backtrack){xn=!1;continue}else return!1}else if(!this.options.flex)break}return xn?(si=this.test_match(xn,Be[ea]),si!==!1?si:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:k(function(){var si=this.next();return si||this.lex()},"lex"),begin:k(function(si){this.conditionStack.push(si)},"begin"),popState:k(function(){var si=this.conditionStack.length-1;return si>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:k(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:k(function(si){return si=this.conditionStack.length-1-Math.abs(si||0),si>=0?this.conditionStack[si]:"INITIAL"},"topState"),pushState:k(function(si){this.begin(si)},"pushState"),stateStackSize:k(function(){return this.conditionStack.length},"stateStackSize"),options:{},performAction:k(function(si,xn,Gr,ea){var Be=ea;switch(Gr){case 0:return this.begin("acc_title"),34;case 1:return this.popState(),"acc_title_value";case 2:return this.begin("acc_descr"),36;case 3:return this.popState(),"acc_descr_value";case 4:this.begin("acc_descr_multiline");break;case 5:this.popState();break;case 6:return"acc_descr_multiline_value";case 7:return this.pushState("shapeData"),xn.yytext="",40;case 8:return this.pushState("shapeDataStr"),40;case 9:return this.popState(),40;case 10:let Xn=/\n\s*/g;return xn.yytext=xn.yytext.replace(Xn,"<br/>"),40;case 11:return 40;case 12:this.popState();break;case 13:this.begin("callbackname");break;case 14:this.popState();break;case 15:this.popState(),this.begin("callbackargs");break;case 16:return 94;case 17:this.popState();break;case 18:return 95;case 19:return"MD_STR";case 20:this.popState();break;case 21:this.begin("md_string");break;case 22:return"STR";case 23:this.popState();break;case 24:this.pushState("string");break;case 25:return 83;case 26:return 101;case 27:return 84;case 28:return 103;case 29:return 85;case 30:return 86;case 31:return 96;case 32:this.begin("click");break;case 33:this.popState();break;case 34:return 87;case 35:return si.lex.firstGraph()&&this.begin("dir"),12;case 36:return si.lex.firstGraph()&&this.begin("dir"),12;case 37:return si.lex.firstGraph()&&this.begin("dir"),12;case 38:return 27;case 39:return 32;case 40:return 97;case 41:return 97;case 42:return 97;case 43:return 97;case 44:return this.popState(),13;case 45:return this.popState(),14;case 46:return this.popState(),14;case 47:return this.popState(),14;case 48:return this.popState(),14;case 49:return this.popState(),14;case 50:return this.popState(),14;case 51:return this.popState(),14;case 52:return this.popState(),14;case 53:return this.popState(),14;case 54:return this.popState(),14;case 55:return 120;case 56:return 121;case 57:return 122;case 58:return 123;case 59:return 104;case 60:return 110;case 61:return 46;case 62:return 60;case 63:return 44;case 64:return 8;case 65:return 105;case 66:return 114;case 67:return this.popState(),77;case 68:return this.pushState("edgeText"),75;case 69:return 118;case 70:return this.popState(),77;case 71:return this.pushState("thickEdgeText"),75;case 72:return 118;case 73:return this.popState(),77;case 74:return this.pushState("dottedEdgeText"),75;case 75:return 118;case 76:return 77;case 77:return this.popState(),53;case 78:return"TEXT";case 79:return this.pushState("ellipseText"),52;case 80:return this.popState(),55;case 81:return this.pushState("text"),54;case 82:return this.popState(),57;case 83:return this.pushState("text"),56;case 84:return 58;case 85:return this.pushState("text"),67;case 86:return this.popState(),64;case 87:return this.pushState("text"),63;case 88:return this.popState(),49;case 89:return this.pushState("text"),48;case 90:return this.popState(),69;case 91:return this.popState(),71;case 92:return 116;case 93:return this.pushState("trapText"),68;case 94:return this.pushState("trapText"),70;case 95:return 117;case 96:return 67;case 97:return 89;case 98:return"SEP";case 99:return 88;case 100:return 114;case 101:return 110;case 102:return 44;case 103:return 108;case 104:return 113;case 105:return 115;case 106:return this.popState(),62;case 107:return this.pushState("text"),62;case 108:return this.popState(),51;case 109:return this.pushState("text"),50;case 110:return this.popState(),31;case 111:return this.pushState("text"),29;case 112:return this.popState(),66;case 113:return this.pushState("text"),65;case 114:return"TEXT";case 115:return"QUOTE";case 116:return 9;case 117:return 10;case 118:return 11}},"anonymous"),rules:[/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:@\{)/,/^(?:["])/,/^(?:["])/,/^(?:[^\"]+)/,/^(?:[^}^"]+)/,/^(?:\})/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:[^`"]+)/,/^(?:[`]["])/,/^(?:["][`])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:["])/,/^(?:style\b)/,/^(?:default\b)/,/^(?:linkStyle\b)/,/^(?:interpolate\b)/,/^(?:classDef\b)/,/^(?:class\b)/,/^(?:href[\s])/,/^(?:click[\s]+)/,/^(?:[\s\n])/,/^(?:[^\s\n]*)/,/^(?:flowchart-elk\b)/,/^(?:graph\b)/,/^(?:flowchart\b)/,/^(?:subgraph\b)/,/^(?:end\b\s*)/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:(\r?\n)*\s*\n)/,/^(?:\s*LR\b)/,/^(?:\s*RL\b)/,/^(?:\s*TB\b)/,/^(?:\s*BT\b)/,/^(?:\s*TD\b)/,/^(?:\s*BR\b)/,/^(?:\s*<)/,/^(?:\s*>)/,/^(?:\s*\^)/,/^(?:\s*v\b)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:[0-9]+)/,/^(?:#)/,/^(?::::)/,/^(?::)/,/^(?:&)/,/^(?:;)/,/^(?:,)/,/^(?:\*)/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?--\s*)/,/^(?:[^-]|-(?!-)+)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?==\s*)/,/^(?:[^=]|=(?!))/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?:\s*[xo<]?-\.\s*)/,/^(?:[^\.]|\.(?!))/,/^(?:\s*~~[\~]+\s*)/,/^(?:[-/\)][\)])/,/^(?:[^\(\)\[\]\{\}]|!\)+)/,/^(?:\(-)/,/^(?:\]\))/,/^(?:\(\[)/,/^(?:\]\])/,/^(?:\[\[)/,/^(?:\[\|)/,/^(?:>)/,/^(?:\)\])/,/^(?:\[\()/,/^(?:\)\)\))/,/^(?:\(\(\()/,/^(?:[\\(?=\])][\]])/,/^(?:\/(?=\])\])/,/^(?:\/(?!\])|\\(?!\])|[^\\\[\]\(\)\{\}\/]+)/,/^(?:\[\/)/,/^(?:\[\\)/,/^(?:<)/,/^(?:>)/,/^(?:\^)/,/^(?:\\\|)/,/^(?:v\b)/,/^(?:\*)/,/^(?:#)/,/^(?:&)/,/^(?:([A-Za-z0-9!"\#$%&'*+\.`?\\_\/]|-(?=[^\>\-\.])|(?!))+)/,/^(?:-)/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\|)/,/^(?:\|)/,/^(?:\))/,/^(?:\()/,/^(?:\])/,/^(?:\[)/,/^(?:(\}))/,/^(?:\{)/,/^(?:[^\[\]\(\)\{\}\|\"]+)/,/^(?:")/,/^(?:(\r?\n)+)/,/^(?:\s)/,/^(?:$)/],conditions:{shapeDataEndBracket:{rules:[21,24,76,79,81,83,87,89,93,94,107,109,111,113],inclusive:!1},shapeDataStr:{rules:[9,10,21,24,76,79,81,83,87,89,93,94,107,109,111,113],inclusive:!1},shapeData:{rules:[8,11,12,21,24,76,79,81,83,87,89,93,94,107,109,111,113],inclusive:!1},callbackargs:{rules:[17,18,21,24,76,79,81,83,87,89,93,94,107,109,111,113],inclusive:!1},callbackname:{rules:[14,15,16,21,24,76,79,81,83,87,89,93,94,107,109,111,113],inclusive:!1},href:{rules:[21,24,76,79,81,83,87,89,93,94,107,109,111,113],inclusive:!1},click:{rules:[21,24,33,34,76,79,81,83,87,89,93,94,107,109,111,113],inclusive:!1},dottedEdgeText:{rules:[21,24,73,75,76,79,81,83,87,89,93,94,107,109,111,113],inclusive:!1},thickEdgeText:{rules:[21,24,70,72,76,79,81,83,87,89,93,94,107,109,111,113],inclusive:!1},edgeText:{rules:[21,24,67,69,76,79,81,83,87,89,93,94,107,109,111,113],inclusive:!1},trapText:{rules:[21,24,76,79,81,83,87,89,90,91,92,93,94,107,109,111,113],inclusive:!1},ellipseText:{rules:[21,24,76,77,78,79,81,83,87,89,93,94,107,109,111,113],inclusive:!1},text:{rules:[21,24,76,79,80,81,82,83,86,87,88,89,93,94,106,107,108,109,110,111,112,113,114],inclusive:!1},vertex:{rules:[21,24,76,79,81,83,87,89,93,94,107,109,111,113],inclusive:!1},dir:{rules:[21,24,44,45,46,47,48,49,50,51,52,53,54,76,79,81,83,87,89,93,94,107,109,111,113],inclusive:!1},acc_descr_multiline:{rules:[5,6,21,24,76,79,81,83,87,89,93,94,107,109,111,113],inclusive:!1},acc_descr:{rules:[3,21,24,76,79,81,83,87,89,93,94,107,109,111,113],inclusive:!1},acc_title:{rules:[1,21,24,76,79,81,83,87,89,93,94,107,109,111,113],inclusive:!1},md_string:{rules:[19,20,21,24,76,79,81,83,87,89,93,94,107,109,111,113],inclusive:!1},string:{rules:[21,22,23,24,76,79,81,83,87,89,93,94,107,109,111,113],inclusive:!1},INITIAL:{rules:[0,2,4,7,13,21,24,25,26,27,28,29,30,31,32,35,36,37,38,39,40,41,42,43,55,56,57,58,59,60,61,62,63,64,65,66,67,68,70,71,73,74,76,79,81,83,84,85,87,89,93,94,95,96,97,98,99,100,101,102,103,104,105,107,109,111,113,115,116,117,118],inclusive:!0}}};return Ea}();as.lexer=Ol;function So(){this.yy={}}return k(So,"Parser"),So.prototype=as,as.Parser=So,new So}(),II.parser=II,n1e=II,a1e=k((e,t)=>{let r=Ls,i=r(e,"r"),n=r(e,"g"),a=r(e,"b");return Nn(i,n,a,t)},"fade"),s1e=k(e=>`.label {
    font-family: ${e.fontFamily};
    color: ${e.nodeTextColor||e.textColor};
  }
  .cluster-label text {
    fill: ${e.titleColor};
  }
  .cluster-label span {
    color: ${e.titleColor};
  }
  .cluster-label span p {
    background-color: transparent;
  }

  .label text,span {
    fill: ${e.nodeTextColor||e.textColor};
    color: ${e.nodeTextColor||e.textColor};
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${e.mainBkg};
    stroke: ${e.nodeBorder};
    stroke-width: 1px;
  }
  .rough-node .label text , .node .label text, .image-shape .label, .icon-shape .label {
    text-anchor: middle;
  }
  // .flowchart-label .text-outer-tspan {
  //   text-anchor: middle;
  // }
  // .flowchart-label .text-inner-tspan {
  //   text-anchor: start;
  // }

  .node .katex path {
    fill: #000;
    stroke: #000;
    stroke-width: 1px;
  }

  .rough-node .label,.node .label, .image-shape .label, .icon-shape .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }


  .root .anchor path {
    fill: ${e.lineColor} !important;
    stroke-width: 0;
    stroke: ${e.lineColor};
  }

  .arrowheadPath {
    fill: ${e.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${e.lineColor};
    stroke-width: 2.0px;
  }

  .flowchart-link {
    stroke: ${e.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${e.edgeLabelBackground};
    p {
      background-color: ${e.edgeLabelBackground};
    }
    rect {
      opacity: 0.5;
      background-color: ${e.edgeLabelBackground};
      fill: ${e.edgeLabelBackground};
    }
    text-align: center;
  }

  /* For html labels only */
  .labelBkg {
    background-color: ${a1e(e.edgeLabelBackground,.5)};
    // background-color:
  }

  .cluster rect {
    fill: ${e.clusterBkg};
    stroke: ${e.clusterBorder};
    stroke-width: 1px;
  }

  .cluster text {
    fill: ${e.titleColor};
  }

  .cluster span {
    color: ${e.titleColor};
  }
  /* .cluster div {
    color: ${e.titleColor};
  } */

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: ${e.fontFamily};
    font-size: 12px;
    background: ${e.tertiaryColor};
    border: 1px solid ${e.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .flowchartTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${e.textColor};
  }

  rect.text {
    fill: none;
    stroke-width: 0;
  }

  .icon-shape, .image-shape {
    background-color: ${e.edgeLabelBackground};
    p {
      background-color: ${e.edgeLabelBackground};
      padding: 2px;
    }
    rect {
      opacity: 0.5;
      background-color: ${e.edgeLabelBackground};
      fill: ${e.edgeLabelBackground};
    }
    text-align: center;
  }
`,"getStyles"),o1e=s1e,l1e={parser:n1e,db:DI,renderer:i1e,styles:o1e,init:k(e=>{e.flowchart||(e.flowchart={}),e.layout&&Wy({layout:e.layout}),e.flowchart.arrowMarkerAbsolute=e.arrowMarkerAbsolute,Wy({flowchart:{arrowMarkerAbsolute:e.arrowMarkerAbsolute}}),DI.clear(),DI.setGen("gen-2")},"init")}}),u1e,hVe=D(()=>{u1e=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function cVe(e){return typeof e=="string"&&u1e.test(e)}var h1e,dVe=D(()=>{hVe(),h1e=cVe});function pVe(e,t=0){return Cl[e[t+0]]+Cl[e[t+1]]+Cl[e[t+2]]+Cl[e[t+3]]+"-"+Cl[e[t+4]]+Cl[e[t+5]]+"-"+Cl[e[t+6]]+Cl[e[t+7]]+"-"+Cl[e[t+8]]+Cl[e[t+9]]+"-"+Cl[e[t+10]]+Cl[e[t+11]]+Cl[e[t+12]]+Cl[e[t+13]]+Cl[e[t+14]]+Cl[e[t+15]]}var Cl,fVe=D(()=>{Cl=[];for(let e=0;e<256;++e)Cl.push((e+256).toString(16).slice(1))});function gVe(e){if(!h1e(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}var c1e,mVe=D(()=>{dVe(),c1e=gVe});function yVe(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}function vVe(e,t,r){function i(n,a,s,u){var h;if(typeof n=="string"&&(n=yVe(n)),typeof a=="string"&&(a=c1e(a)),((h=a)===null||h===void 0?void 0:h.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let d=new Uint8Array(16+n.length);if(d.set(a),d.set(n,a.length),d=r(d),d[6]=d[6]&15|t,d[8]=d[8]&63|128,s){u=u||0;for(let p=0;p<16;++p)s[u+p]=d[p];return s}return pVe(d)}try{i.name=e}catch{}return i.DNS=d1e,i.URL=p1e,i}var d1e,p1e,xVe=D(()=>{fVe(),mVe(),d1e="6ba7b810-9dad-11d1-80b4-00c04fd430c8",p1e="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});function bVe(e,t,r,i){switch(e){case 0:return t&r^~t&i;case 1:return t^r^i;case 2:return t&r^t&i^r&i;case 3:return t^r^i}}function dW(e,t){return e<<t|e>>>32-t}function _Ve(e){let t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){let s=unescape(encodeURIComponent(e));e=[];for(let u=0;u<s.length;++u)e.push(s.charCodeAt(u))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);let i=e.length/4+2,n=Math.ceil(i/16),a=new Array(n);for(let s=0;s<n;++s){let u=new Uint32Array(16);for(let h=0;h<16;++h)u[h]=e[s*64+h*4]<<24|e[s*64+h*4+1]<<16|e[s*64+h*4+2]<<8|e[s*64+h*4+3];a[s]=u}a[n-1][14]=(e.length-1)*8/Math.pow(2,32),a[n-1][14]=Math.floor(a[n-1][14]),a[n-1][15]=(e.length-1)*8&4294967295;for(let s=0;s<n;++s){let u=new Uint32Array(80);for(let m=0;m<16;++m)u[m]=a[s][m];for(let m=16;m<80;++m)u[m]=dW(u[m-3]^u[m-8]^u[m-14]^u[m-16],1);let h=r[0],d=r[1],p=r[2],g=r[3],y=r[4];for(let m=0;m<80;++m){let x=Math.floor(m/20),_=dW(h,5)+bVe(x,d,p,g)+y+t[x]+u[m]>>>0;y=g,g=p,p=dW(d,30)>>>0,d=h,h=_}r[0]=r[0]+h>>>0,r[1]=r[1]+d>>>0,r[2]=r[2]+p>>>0,r[3]=r[3]+g>>>0,r[4]=r[4]+y>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var f1e,wVe=D(()=>{f1e=_Ve}),g1e,m1e,kVe=D(()=>{xVe(),wVe(),g1e=vVe("v5",80,f1e),m1e=g1e}),TVe=D(()=>{kVe()}),y1e={};oi(y1e,{diagram:()=>G1e});function v1e(e="",t=""){let r=e.replace(M1e,"");return`${pW(t)}${pW(r)}${m1e(e,P1e)}`}function pW(e=""){return e.length>0?`${e}-`:""}var NI,x1e,ym,OI,b1e,_1e,fW,w1e,k1e,T1e,E1e,C1e,S1e,jc,A1e,Hc,M1e,Ho,G_,L1e,R1e,D1e,I1e,gW,N1e,mW,O1e,B1e,P1e,F1e,$1e,z1e,G1e,EVe=D(()=>{Os(),Qn(),Qh(),ha(),pI(),TVe(),NI=function(){var e=k(function(L,$,G,z){for(G=G||{},z=L.length;z--;G[L[z]]=$);return G},"o"),t=[6,8,10,20,22,24,26,27,28],r=[1,10],i=[1,11],n=[1,12],a=[1,13],s=[1,14],u=[1,15],h=[1,21],d=[1,22],p=[1,23],g=[1,24],y=[1,25],m=[6,8,10,13,15,18,19,20,22,24,26,27,28,41,42,43,44,45],x=[1,34],_=[27,28,46,47],E=[41,42,43,44,45],w=[17,34],C=[1,54],A=[1,53],M=[17,34,36,38],N={trace:k(function(){},"trace"),yy:{},symbols_:{error:2,start:3,ER_DIAGRAM:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NEWLINE:10,entityName:11,relSpec:12,":":13,role:14,BLOCK_START:15,attributes:16,BLOCK_STOP:17,SQS:18,SQE:19,title:20,title_value:21,acc_title:22,acc_title_value:23,acc_descr:24,acc_descr_value:25,acc_descr_multiline_value:26,ALPHANUM:27,ENTITY_NAME:28,attribute:29,attributeType:30,attributeName:31,attributeKeyTypeList:32,attributeComment:33,ATTRIBUTE_WORD:34,attributeKeyType:35,COMMA:36,ATTRIBUTE_KEY:37,COMMENT:38,cardinality:39,relType:40,ZERO_OR_ONE:41,ZERO_OR_MORE:42,ONE_OR_MORE:43,ONLY_ONE:44,MD_PARENT:45,NON_IDENTIFYING:46,IDENTIFYING:47,WORD:48,$accept:0,$end:1},terminals_:{2:"error",4:"ER_DIAGRAM",6:"EOF",8:"SPACE",10:"NEWLINE",13:":",15:"BLOCK_START",17:"BLOCK_STOP",18:"SQS",19:"SQE",20:"title",21:"title_value",22:"acc_title",23:"acc_title_value",24:"acc_descr",25:"acc_descr_value",26:"acc_descr_multiline_value",27:"ALPHANUM",28:"ENTITY_NAME",34:"ATTRIBUTE_WORD",36:"COMMA",37:"ATTRIBUTE_KEY",38:"COMMENT",41:"ZERO_OR_ONE",42:"ZERO_OR_MORE",43:"ONE_OR_MORE",44:"ONLY_ONE",45:"MD_PARENT",46:"NON_IDENTIFYING",47:"IDENTIFYING",48:"WORD"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[9,5],[9,4],[9,3],[9,1],[9,7],[9,6],[9,4],[9,2],[9,2],[9,2],[9,1],[11,1],[11,1],[16,1],[16,2],[29,2],[29,3],[29,3],[29,4],[30,1],[31,1],[32,1],[32,3],[35,1],[33,1],[12,3],[39,1],[39,1],[39,1],[39,1],[39,1],[40,1],[40,1],[14,1],[14,1],[14,1]],performAction:k(function(L,$,G,z,F,X,I){var j=X.length-1;switch(F){case 1:break;case 2:this.$=[];break;case 3:X[j-1].push(X[j]),this.$=X[j-1];break;case 4:case 5:this.$=X[j];break;case 6:case 7:this.$=[];break;case 8:z.addEntity(X[j-4]),z.addEntity(X[j-2]),z.addRelationship(X[j-4],X[j],X[j-2],X[j-3]);break;case 9:z.addEntity(X[j-3]),z.addAttributes(X[j-3],X[j-1]);break;case 10:z.addEntity(X[j-2]);break;case 11:z.addEntity(X[j]);break;case 12:z.addEntity(X[j-6],X[j-4]),z.addAttributes(X[j-6],X[j-1]);break;case 13:z.addEntity(X[j-5],X[j-3]);break;case 14:z.addEntity(X[j-3],X[j-1]);break;case 15:case 16:this.$=X[j].trim(),z.setAccTitle(this.$);break;case 17:case 18:this.$=X[j].trim(),z.setAccDescription(this.$);break;case 19:case 43:this.$=X[j];break;case 20:case 41:case 42:this.$=X[j].replace(/"/g,"");break;case 21:case 29:this.$=[X[j]];break;case 22:X[j].push(X[j-1]),this.$=X[j];break;case 23:this.$={attributeType:X[j-1],attributeName:X[j]};break;case 24:this.$={attributeType:X[j-2],attributeName:X[j-1],attributeKeyTypeList:X[j]};break;case 25:this.$={attributeType:X[j-2],attributeName:X[j-1],attributeComment:X[j]};break;case 26:this.$={attributeType:X[j-3],attributeName:X[j-2],attributeKeyTypeList:X[j-1],attributeComment:X[j]};break;case 27:case 28:case 31:this.$=X[j];break;case 30:X[j-2].push(X[j]),this.$=X[j-2];break;case 32:this.$=X[j].replace(/"/g,"");break;case 33:this.$={cardA:X[j],relType:X[j-1],cardB:X[j-2]};break;case 34:this.$=z.Cardinality.ZERO_OR_ONE;break;case 35:this.$=z.Cardinality.ZERO_OR_MORE;break;case 36:this.$=z.Cardinality.ONE_OR_MORE;break;case 37:this.$=z.Cardinality.ONLY_ONE;break;case 38:this.$=z.Cardinality.MD_PARENT;break;case 39:this.$=z.Identification.NON_IDENTIFYING;break;case 40:this.$=z.Identification.IDENTIFYING;break}},"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},e(t,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:9,20:r,22:i,24:n,26:a,27:s,28:u},e(t,[2,7],{1:[2,1]}),e(t,[2,3]),{9:16,11:9,20:r,22:i,24:n,26:a,27:s,28:u},e(t,[2,5]),e(t,[2,6]),e(t,[2,11],{12:17,39:20,15:[1,18],18:[1,19],41:h,42:d,43:p,44:g,45:y}),{21:[1,26]},{23:[1,27]},{25:[1,28]},e(t,[2,18]),e(m,[2,19]),e(m,[2,20]),e(t,[2,4]),{11:29,27:s,28:u},{16:30,17:[1,31],29:32,30:33,34:x},{11:35,27:s,28:u},{40:36,46:[1,37],47:[1,38]},e(_,[2,34]),e(_,[2,35]),e(_,[2,36]),e(_,[2,37]),e(_,[2,38]),e(t,[2,15]),e(t,[2,16]),e(t,[2,17]),{13:[1,39]},{17:[1,40]},e(t,[2,10]),{16:41,17:[2,21],29:32,30:33,34:x},{31:42,34:[1,43]},{34:[2,27]},{19:[1,44]},{39:45,41:h,42:d,43:p,44:g,45:y},e(E,[2,39]),e(E,[2,40]),{14:46,27:[1,49],28:[1,48],48:[1,47]},e(t,[2,9]),{17:[2,22]},e(w,[2,23],{32:50,33:51,35:52,37:C,38:A}),e([17,34,37,38],[2,28]),e(t,[2,14],{15:[1,55]}),e([27,28],[2,33]),e(t,[2,8]),e(t,[2,41]),e(t,[2,42]),e(t,[2,43]),e(w,[2,24],{33:56,36:[1,57],38:A}),e(w,[2,25]),e(M,[2,29]),e(w,[2,32]),e(M,[2,31]),{16:58,17:[1,59],29:32,30:33,34:x},e(w,[2,26]),{35:60,37:C},{17:[1,61]},e(t,[2,13]),e(M,[2,30]),e(t,[2,12])],defaultActions:{34:[2,27],41:[2,22]},parseError:k(function(L,$){if($.recoverable)this.trace(L);else{var G=new Error(L);throw G.hash=$,G}},"parseError"),parse:k(function(L){var $=this,G=[0],z=[],F=[null],X=[],I=this.table,j="",H=0,V=0,P=0,q=2,Z=1,J=X.slice.call(arguments,1),ae=Object.create(this.lexer),ue={yy:{}};for(var be in this.yy)Object.prototype.hasOwnProperty.call(this.yy,be)&&(ue.yy[be]=this.yy[be]);ae.setInput(L,ue.yy),ue.yy.lexer=ae,ue.yy.parser=this,typeof ae.yylloc>"u"&&(ae.yylloc={});var Le=ae.yylloc;X.push(Le);var xe=ae.options&&ae.options.ranges;typeof ue.yy.parseError=="function"?this.parseError=ue.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Ae(tr){G.length=G.length-2*tr,F.length=F.length-tr,X.length=X.length-tr}k(Ae,"popStack");function oe(){var tr;return tr=z.pop()||ae.lex()||Z,typeof tr!="number"&&(tr instanceof Array&&(z=tr,tr=z.pop()),tr=$.symbols_[tr]||tr),tr}k(oe,"lex");for(var he,le,ke,pe,qe,me,st={},we,Et,wt,Tt;;){if(ke=G[G.length-1],this.defaultActions[ke]?pe=this.defaultActions[ke]:((he===null||typeof he>"u")&&(he=oe()),pe=I[ke]&&I[ke][he]),typeof pe>"u"||!pe.length||!pe[0]){var er="";Tt=[];for(we in I[ke])this.terminals_[we]&&we>q&&Tt.push("'"+this.terminals_[we]+"'");ae.showPosition?er="Parse error on line "+(H+1)+`:
`+ae.showPosition()+`
Expecting `+Tt.join(", ")+", got '"+(this.terminals_[he]||he)+"'":er="Parse error on line "+(H+1)+": Unexpected "+(he==Z?"end of input":"'"+(this.terminals_[he]||he)+"'"),this.parseError(er,{text:ae.match,token:this.terminals_[he]||he,line:ae.yylineno,loc:Le,expected:Tt})}if(pe[0]instanceof Array&&pe.length>1)throw new Error("Parse Error: multiple actions possible at state: "+ke+", token: "+he);switch(pe[0]){case 1:G.push(he),F.push(ae.yytext),X.push(ae.yylloc),G.push(pe[1]),he=null,le?(he=le,le=null):(V=ae.yyleng,j=ae.yytext,H=ae.yylineno,Le=ae.yylloc,P>0&&P--);break;case 2:if(Et=this.productions_[pe[1]][1],st.$=F[F.length-Et],st._$={first_line:X[X.length-(Et||1)].first_line,last_line:X[X.length-1].last_line,first_column:X[X.length-(Et||1)].first_column,last_column:X[X.length-1].last_column},xe&&(st._$.range=[X[X.length-(Et||1)].range[0],X[X.length-1].range[1]]),me=this.performAction.apply(st,[j,V,H,ue.yy,pe[1],F,X].concat(J)),typeof me<"u")return me;Et&&(G=G.slice(0,-1*Et*2),F=F.slice(0,-1*Et),X=X.slice(0,-1*Et)),G.push(this.productions_[pe[1]][0]),F.push(st.$),X.push(st._$),wt=I[G[G.length-2]][G[G.length-1]],G.push(wt);break;case 3:return!0}}return!0},"parse")},B=function(){var L={EOF:1,parseError:k(function($,G){if(this.yy.parser)this.yy.parser.parseError($,G);else throw new Error($)},"parseError"),setInput:k(function($,G){return this.yy=G||this.yy||{},this._input=$,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:k(function(){var $=this._input[0];this.yytext+=$,this.yyleng++,this.offset++,this.match+=$,this.matched+=$;var G=$.match(/(?:\r\n?|\n).*/g);return G?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),$},"input"),unput:k(function($){var G=$.length,z=$.split(/(?:\r\n?|\n)/g);this._input=$+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-G),this.offset-=G;var F=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),z.length-1&&(this.yylineno-=z.length-1);var X=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:z?(z.length===F.length?this.yylloc.first_column:0)+F[F.length-z.length].length-z[0].length:this.yylloc.first_column-G},this.options.ranges&&(this.yylloc.range=[X[0],X[0]+this.yyleng-G]),this.yyleng=this.yytext.length,this},"unput"),more:k(function(){return this._more=!0,this},"more"),reject:k(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:k(function($){this.unput(this.match.slice($))},"less"),pastInput:k(function(){var $=this.matched.substr(0,this.matched.length-this.match.length);return($.length>20?"...":"")+$.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:k(function(){var $=this.match;return $.length<20&&($+=this._input.substr(0,20-$.length)),($.substr(0,20)+($.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:k(function(){var $=this.pastInput(),G=new Array($.length+1).join("-");return $+this.upcomingInput()+`
`+G+"^"},"showPosition"),test_match:k(function($,G){var z,F,X;if(this.options.backtrack_lexer&&(X={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(X.yylloc.range=this.yylloc.range.slice(0))),F=$[0].match(/(?:\r\n?|\n).*/g),F&&(this.yylineno+=F.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:F?F[F.length-1].length-F[F.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+$[0].length},this.yytext+=$[0],this.match+=$[0],this.matches=$,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice($[0].length),this.matched+=$[0],z=this.performAction.call(this,this.yy,this,G,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),z)return z;if(this._backtrack){for(var I in X)this[I]=X[I];return!1}return!1},"test_match"),next:k(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var $,G,z,F;this._more||(this.yytext="",this.match="");for(var X=this._currentRules(),I=0;I<X.length;I++)if(z=this._input.match(this.rules[X[I]]),z&&(!G||z[0].length>G[0].length)){if(G=z,F=I,this.options.backtrack_lexer){if($=this.test_match(z,X[I]),$!==!1)return $;if(this._backtrack){G=!1;continue}else return!1}else if(!this.options.flex)break}return G?($=this.test_match(G,X[F]),$!==!1?$:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:k(function(){var $=this.next();return $||this.lex()},"lex"),begin:k(function($){this.conditionStack.push($)},"begin"),popState:k(function(){var $=this.conditionStack.length-1;return $>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:k(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:k(function($){return $=this.conditionStack.length-1-Math.abs($||0),$>=0?this.conditionStack[$]:"INITIAL"},"topState"),pushState:k(function($){this.begin($)},"pushState"),stateStackSize:k(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:k(function($,G,z,F){var X=F;switch(z){case 0:return this.begin("acc_title"),22;case 1:return this.popState(),"acc_title_value";case 2:return this.begin("acc_descr"),24;case 3:return this.popState(),"acc_descr_value";case 4:this.begin("acc_descr_multiline");break;case 5:this.popState();break;case 6:return"acc_descr_multiline_value";case 7:return 10;case 8:break;case 9:return 8;case 10:return 28;case 11:return 48;case 12:return 4;case 13:return this.begin("block"),15;case 14:return 36;case 15:break;case 16:return 37;case 17:return 34;case 18:return 34;case 19:return 38;case 20:break;case 21:return this.popState(),17;case 22:return G.yytext[0];case 23:return 18;case 24:return 19;case 25:return 41;case 26:return 43;case 27:return 43;case 28:return 43;case 29:return 41;case 30:return 41;case 31:return 42;case 32:return 42;case 33:return 42;case 34:return 42;case 35:return 42;case 36:return 43;case 37:return 42;case 38:return 43;case 39:return 44;case 40:return 44;case 41:return 44;case 42:return 44;case 43:return 41;case 44:return 42;case 45:return 43;case 46:return 45;case 47:return 46;case 48:return 47;case 49:return 47;case 50:return 46;case 51:return 46;case 52:return 46;case 53:return 27;case 54:return G.yytext[0];case 55:return 6}},"anonymous"),rules:[/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:[\s]+)/i,/^(?:"[^"%\r\n\v\b\\]+")/i,/^(?:"[^"]*")/i,/^(?:erDiagram\b)/i,/^(?:\{)/i,/^(?:,)/i,/^(?:\s+)/i,/^(?:\b((?:PK)|(?:FK)|(?:UK))\b)/i,/^(?:(.*?)[~](.*?)*[~])/i,/^(?:[\*A-Za-z_][A-Za-z0-9\-_\[\]\(\)]*)/i,/^(?:"[^"]*")/i,/^(?:[\n]+)/i,/^(?:\})/i,/^(?:.)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:one or zero\b)/i,/^(?:one or more\b)/i,/^(?:one or many\b)/i,/^(?:1\+)/i,/^(?:\|o\b)/i,/^(?:zero or one\b)/i,/^(?:zero or more\b)/i,/^(?:zero or many\b)/i,/^(?:0\+)/i,/^(?:\}o\b)/i,/^(?:many\(0\))/i,/^(?:many\(1\))/i,/^(?:many\b)/i,/^(?:\}\|)/i,/^(?:one\b)/i,/^(?:only one\b)/i,/^(?:1\b)/i,/^(?:\|\|)/i,/^(?:o\|)/i,/^(?:o\{)/i,/^(?:\|\{)/i,/^(?:\s*u\b)/i,/^(?:\.\.)/i,/^(?:--)/i,/^(?:to\b)/i,/^(?:optionally to\b)/i,/^(?:\.-)/i,/^(?:-\.)/i,/^(?:[A-Za-z_][A-Za-z0-9\-_]*)/i,/^(?:.)/i,/^(?:$)/i],conditions:{acc_descr_multiline:{rules:[5,6],inclusive:!1},acc_descr:{rules:[3],inclusive:!1},acc_title:{rules:[1],inclusive:!1},block:{rules:[14,15,16,17,18,19,20,21,22],inclusive:!1},INITIAL:{rules:[0,2,4,7,8,9,10,11,12,13,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55],inclusive:!0}}};return L}();N.lexer=B;function O(){this.yy={}}return k(O,"Parser"),O.prototype=N,N.Parser=O,new O}(),NI.parser=NI,x1e=NI,ym=new Map,OI=[],b1e={ZERO_OR_ONE:"ZERO_OR_ONE",ZERO_OR_MORE:"ZERO_OR_MORE",ONE_OR_MORE:"ONE_OR_MORE",ONLY_ONE:"ONLY_ONE",MD_PARENT:"MD_PARENT"},_1e={NON_IDENTIFYING:"NON_IDENTIFYING",IDENTIFYING:"IDENTIFYING"},fW=k(function(e,t=void 0){return ym.has(e)?!ym.get(e).alias&&t&&(ym.get(e).alias=t,Ce.info(`Add alias '${t}' to entity '${e}'`)):(ym.set(e,{attributes:[],alias:t}),Ce.info("Added new entity :",e)),ym.get(e)},"addEntity"),w1e=k(()=>ym,"getEntities"),k1e=k(function(e,t){let r=fW(e),i;for(i=t.length-1;i>=0;i--)r.attributes.push(t[i]),Ce.debug("Added attribute ",t[i].attributeName)},"addAttributes"),T1e=k(function(e,t,r,i){let n={entityA:e,roleA:t,entityB:r,relSpec:i};OI.push(n),Ce.debug("Added new relationship :",n)},"addRelationship"),E1e=k(()=>OI,"getRelationships"),C1e=k(function(){ym=new Map,OI=[],ho()},"clear"),S1e={Cardinality:b1e,Identification:_1e,getConfig:k(()=>at().er,"getConfig"),addEntity:fW,addAttributes:k1e,getEntities:w1e,addRelationship:T1e,getRelationships:E1e,clear:C1e,setAccTitle:Ks,getAccTitle:Bo,setAccDescription:_o,getAccDescription:Po,setDiagramTitle:Fo,getDiagramTitle:$o},jc={ONLY_ONE_START:"ONLY_ONE_START",ONLY_ONE_END:"ONLY_ONE_END",ZERO_OR_ONE_START:"ZERO_OR_ONE_START",ZERO_OR_ONE_END:"ZERO_OR_ONE_END",ONE_OR_MORE_START:"ONE_OR_MORE_START",ONE_OR_MORE_END:"ONE_OR_MORE_END",ZERO_OR_MORE_START:"ZERO_OR_MORE_START",ZERO_OR_MORE_END:"ZERO_OR_MORE_END",MD_PARENT_END:"MD_PARENT_END",MD_PARENT_START:"MD_PARENT_START"},A1e=k(function(e,t){let r;e.append("defs").append("marker").attr("id",jc.MD_PARENT_START).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",jc.MD_PARENT_END).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",jc.ONLY_ONE_START).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("stroke",t.stroke).attr("fill","none").attr("d","M9,0 L9,18 M15,0 L15,18"),e.append("defs").append("marker").attr("id",jc.ONLY_ONE_END).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("stroke",t.stroke).attr("fill","none").attr("d","M3,0 L3,18 M9,0 L9,18"),r=e.append("defs").append("marker").attr("id",jc.ZERO_OR_ONE_START).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto"),r.append("circle").attr("stroke",t.stroke).attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),r.append("path").attr("stroke",t.stroke).attr("fill","none").attr("d","M9,0 L9,18"),r=e.append("defs").append("marker").attr("id",jc.ZERO_OR_ONE_END).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto"),r.append("circle").attr("stroke",t.stroke).attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),r.append("path").attr("stroke",t.stroke).attr("fill","none").attr("d","M21,0 L21,18"),e.append("defs").append("marker").attr("id",jc.ONE_OR_MORE_START).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("stroke",t.stroke).attr("fill","none").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),e.append("defs").append("marker").attr("id",jc.ONE_OR_MORE_END).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("stroke",t.stroke).attr("fill","none").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18"),r=e.append("defs").append("marker").attr("id",jc.ZERO_OR_MORE_START).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto"),r.append("circle").attr("stroke",t.stroke).attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),r.append("path").attr("stroke",t.stroke).attr("fill","none").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18"),r=e.append("defs").append("marker").attr("id",jc.ZERO_OR_MORE_END).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto"),r.append("circle").attr("stroke",t.stroke).attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),r.append("path").attr("stroke",t.stroke).attr("fill","none").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")},"insertMarkers"),Hc={ERMarkers:jc,insertMarkers:A1e},M1e=/[^\dA-Za-z](\W)*/g,Ho={},G_=new Map,L1e=k(function(e){let t=Object.keys(e);for(let r of t)Ho[r]=e[r]},"setConf"),R1e=k((e,t,r)=>{let i=Ho.entityPadding/3,n=Ho.entityPadding/3,a=Ho.fontSize*.85,s=t.node().getBBox(),u=[],h=!1,d=!1,p=0,g=0,y=0,m=0,x=s.height+i*2,_=1;r.forEach(A=>{A.attributeKeyTypeList!==void 0&&A.attributeKeyTypeList.length>0&&(h=!0),A.attributeComment!==void 0&&(d=!0)}),r.forEach(A=>{let M=`${t.node().id}-attr-${_}`,N=0,B=_c(A.attributeType),O=e.append("text").classed("er entityLabel",!0).attr("id",`${M}-type`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",at().fontFamily).style("font-size",a+"px").text(B),L=e.append("text").classed("er entityLabel",!0).attr("id",`${M}-name`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",at().fontFamily).style("font-size",a+"px").text(A.attributeName),$={};$.tn=O,$.nn=L;let G=O.node().getBBox(),z=L.node().getBBox();if(p=Math.max(p,G.width),g=Math.max(g,z.width),N=Math.max(G.height,z.height),h){let F=A.attributeKeyTypeList!==void 0?A.attributeKeyTypeList.join(","):"",X=e.append("text").classed("er entityLabel",!0).attr("id",`${M}-key`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",at().fontFamily).style("font-size",a+"px").text(F);$.kn=X;let I=X.node().getBBox();y=Math.max(y,I.width),N=Math.max(N,I.height)}if(d){let F=e.append("text").classed("er entityLabel",!0).attr("id",`${M}-comment`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",at().fontFamily).style("font-size",a+"px").text(A.attributeComment||"");$.cn=F;let X=F.node().getBBox();m=Math.max(m,X.width),N=Math.max(N,X.height)}$.height=N,u.push($),x+=N+i*2,_+=1});let E=4;h&&(E+=2),d&&(E+=2);let w=p+g+y+m,C={width:Math.max(Ho.minEntityWidth,Math.max(s.width+Ho.entityPadding*2,w+n*E)),height:r.length>0?x:Math.max(Ho.minEntityHeight,s.height+Ho.entityPadding*2)};if(r.length>0){let A=Math.max(0,(C.width-w-n*E)/(E/2));t.attr("transform","translate("+C.width/2+","+(i+s.height/2)+")");let M=s.height+i*2,N="attributeBoxOdd";u.forEach(B=>{let O=M+i+B.height/2;B.tn.attr("transform","translate("+n+","+O+")");let L=e.insert("rect","#"+B.tn.node().id).classed(`er ${N}`,!0).attr("x",0).attr("y",M).attr("width",p+n*2+A).attr("height",B.height+i*2),$=parseFloat(L.attr("x"))+parseFloat(L.attr("width"));B.nn.attr("transform","translate("+($+n)+","+O+")");let G=e.insert("rect","#"+B.nn.node().id).classed(`er ${N}`,!0).attr("x",$).attr("y",M).attr("width",g+n*2+A).attr("height",B.height+i*2),z=parseFloat(G.attr("x"))+parseFloat(G.attr("width"));if(h){B.kn.attr("transform","translate("+(z+n)+","+O+")");let F=e.insert("rect","#"+B.kn.node().id).classed(`er ${N}`,!0).attr("x",z).attr("y",M).attr("width",y+n*2+A).attr("height",B.height+i*2);z=parseFloat(F.attr("x"))+parseFloat(F.attr("width"))}d&&(B.cn.attr("transform","translate("+(z+n)+","+O+")"),e.insert("rect","#"+B.cn.node().id).classed(`er ${N}`,"true").attr("x",z).attr("y",M).attr("width",m+n*2+A).attr("height",B.height+i*2)),M+=B.height+i*2,N=N==="attributeBoxOdd"?"attributeBoxEven":"attributeBoxOdd"})}else C.height=Math.max(Ho.minEntityHeight,x),t.attr("transform","translate("+C.width/2+","+C.height/2+")");return C},"drawAttributes"),D1e=k(function(e,t,r){let i=[...t.keys()],n;return i.forEach(function(a){let s=v1e(a,"entity");G_.set(a,s);let u=e.append("g").attr("id",s);n=n===void 0?s:n;let h="text-"+s,d=u.append("text").classed("er entityLabel",!0).attr("id",h).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","middle").style("font-family",at().fontFamily).style("font-size",Ho.fontSize+"px").text(t.get(a).alias??a),{width:p,height:g}=R1e(u,d,t.get(a).attributes),y=u.insert("rect","#"+h).classed("er entityBox",!0).attr("x",0).attr("y",0).attr("width",p).attr("height",g).node().getBBox();r.setNode(s,{width:y.width,height:y.height,shape:"rect",id:s})}),n},"drawEntities"),I1e=k(function(e,t){t.nodes().forEach(function(r){r!==void 0&&t.node(r)!==void 0&&e.select("#"+r).attr("transform","translate("+(t.node(r).x-t.node(r).width/2)+","+(t.node(r).y-t.node(r).height/2)+" )")})},"adjustEntities"),gW=k(function(e){return(e.entityA+e.roleA+e.entityB).replace(/\s/g,"")},"getEdgeName"),N1e=k(function(e,t){return e.forEach(function(r){t.setEdge(G_.get(r.entityA),G_.get(r.entityB),{relationship:r},gW(r))}),e},"addRelationships"),mW=0,O1e=k(function(e,t,r,i,n){mW++;let a=r.edge(G_.get(t.entityA),G_.get(t.entityB),gW(t)),s=vv().x(function(_){return _.x}).y(function(_){return _.y}).curve(cC),u=e.insert("path","#"+i).classed("er relationshipLine",!0).attr("d",s(a.points)).style("stroke",Ho.stroke).style("fill","none");t.relSpec.relType===n.db.Identification.NON_IDENTIFYING&&u.attr("stroke-dasharray","8,8");let h="";switch(Ho.arrowMarkerAbsolute&&(h=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,h=h.replace(/\(/g,"\\("),h=h.replace(/\)/g,"\\)")),t.relSpec.cardA){case n.db.Cardinality.ZERO_OR_ONE:u.attr("marker-end","url("+h+"#"+Hc.ERMarkers.ZERO_OR_ONE_END+")");break;case n.db.Cardinality.ZERO_OR_MORE:u.attr("marker-end","url("+h+"#"+Hc.ERMarkers.ZERO_OR_MORE_END+")");break;case n.db.Cardinality.ONE_OR_MORE:u.attr("marker-end","url("+h+"#"+Hc.ERMarkers.ONE_OR_MORE_END+")");break;case n.db.Cardinality.ONLY_ONE:u.attr("marker-end","url("+h+"#"+Hc.ERMarkers.ONLY_ONE_END+")");break;case n.db.Cardinality.MD_PARENT:u.attr("marker-end","url("+h+"#"+Hc.ERMarkers.MD_PARENT_END+")");break}switch(t.relSpec.cardB){case n.db.Cardinality.ZERO_OR_ONE:u.attr("marker-start","url("+h+"#"+Hc.ERMarkers.ZERO_OR_ONE_START+")");break;case n.db.Cardinality.ZERO_OR_MORE:u.attr("marker-start","url("+h+"#"+Hc.ERMarkers.ZERO_OR_MORE_START+")");break;case n.db.Cardinality.ONE_OR_MORE:u.attr("marker-start","url("+h+"#"+Hc.ERMarkers.ONE_OR_MORE_START+")");break;case n.db.Cardinality.ONLY_ONE:u.attr("marker-start","url("+h+"#"+Hc.ERMarkers.ONLY_ONE_START+")");break;case n.db.Cardinality.MD_PARENT:u.attr("marker-start","url("+h+"#"+Hc.ERMarkers.MD_PARENT_START+")");break}let d=u.node().getTotalLength(),p=u.node().getPointAtLength(d*.5),g="rel"+mW,y=t.roleA.split(/<br ?\/>/g),m=e.append("text").classed("er relationshipLabel",!0).attr("id",g).attr("x",p.x).attr("y",p.y).style("text-anchor","middle").style("dominant-baseline","middle").style("font-family",at().fontFamily).style("font-size",Ho.fontSize+"px");if(y.length==1)m.text(t.roleA);else{let _=-(y.length-1)*.5;y.forEach((E,w)=>{m.append("tspan").attr("x",p.x).attr("dy",`${w===0?_:1}em`).text(E)})}let x=m.node().getBBox();e.insert("rect","#"+g).classed("er relationshipLabelBox",!0).attr("x",p.x-x.width/2).attr("y",p.y-x.height/2).attr("width",x.width).attr("height",x.height)},"drawRelationshipFromLayout"),B1e=k(function(e,t,r,i){Ho=at().er,Ce.info("Drawing ER diagram");let n=at().securityLevel,a;n==="sandbox"&&(a=Nr("#i"+t));let s=Nr(n==="sandbox"?a.nodes()[0].contentDocument.body:"body").select(`[id='${t}']`);Hc.insertMarkers(s,Ho);let u;u=new Vl({multigraph:!0,directed:!0,compound:!1}).setGraph({rankdir:Ho.layoutDirection,marginx:20,marginy:20,nodesep:100,edgesep:100,ranksep:100}).setDefaultEdgeLabel(function(){return{}});let h=D1e(s,i.db.getEntities(),u),d=N1e(i.db.getRelationships(),u);dI(u),I1e(s,u),d.forEach(function(x){O1e(s,x,u,h,i)});let p=Ho.diagramPadding;qn.insertTitle(s,"entityTitleText",Ho.titleTopMargin,i.db.getDiagramTitle());let g=s.node().getBBox(),y=g.width+p*2,m=g.height+p*2;Oo(s,m,y,Ho.useMaxWidth),s.attr("viewBox",`${g.x-p} ${g.y-p} ${y} ${m}`)},"draw"),P1e="28e9f9db-3c8d-5aa5-9faf-44286ae5937c",k(v1e,"generateId"),k(pW,"strWithHyphen"),F1e={setConf:L1e,draw:B1e},$1e=k(e=>`
  .entityBox {
    fill: ${e.mainBkg};
    stroke: ${e.nodeBorder};
  }

  .attributeBoxOdd {
    fill: ${e.attributeBackgroundColorOdd};
    stroke: ${e.nodeBorder};
  }

  .attributeBoxEven {
    fill:  ${e.attributeBackgroundColorEven};
    stroke: ${e.nodeBorder};
  }

  .relationshipLabelBox {
    fill: ${e.tertiaryColor};
    opacity: 0.7;
    background-color: ${e.tertiaryColor};
      rect {
        opacity: 0.5;
      }
  }

    .relationshipLine {
      stroke: ${e.lineColor};
    }

  .entityTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${e.textColor};
  }    
  #MD_PARENT_START {
    fill: #f5f5f5 !important;
    stroke: ${e.lineColor} !important;
    stroke-width: 1;
  }
  #MD_PARENT_END {
    fill: #f5f5f5 !important;
    stroke: ${e.lineColor} !important;
    stroke-width: 1;
  }
  
`,"getStyles"),z1e=$1e,G1e={parser:x1e,db:S1e,renderer:F1e,styles:z1e}});function b7(e,t){e.accDescr&&t.setAccDescription?.(e.accDescr),e.accTitle&&t.setAccTitle?.(e.accTitle),e.title&&t.setDiagramTitle?.(e.title)}var BI=D(()=>{Qn(),k(b7,"populateCommonDb")}),PI,yW=D(()=>{Qn(),PI=class{constructor(e){this.init=e,this.records=this.init()}static{k(this,"ImperativeState")}reset(){this.records=this.init()}}});function ol(e){return typeof e=="object"&&e!==null&&typeof e.$type=="string"}function ec(e){return typeof e=="object"&&e!==null&&typeof e.$refText=="string"}function U1e(e){return typeof e=="object"&&e!==null&&typeof e.name=="string"&&typeof e.type=="string"&&typeof e.path=="string"}function _7(e){return typeof e=="object"&&e!==null&&ol(e.container)&&ec(e.reference)&&typeof e.message=="string"}function Sf(e){return typeof e=="object"&&e!==null&&Array.isArray(e.content)}function U_(e){return typeof e=="object"&&e!==null&&typeof e.tokenType=="object"}function vW(e){return Sf(e)&&typeof e.fullText=="string"}var FI,Nd=D(()=>{FI=class{constructor(){this.subtypes={},this.allSubtypes={}}isInstance(e,t){return ol(e)&&this.isSubtype(e.$type,t)}isSubtype(e,t){if(e===t)return!0;let r=this.subtypes[e];r||(r=this.subtypes[e]={});let i=r[t];if(i!==void 0)return i;{let n=this.computeIsSubtype(e,t);return r[t]=n,n}}getAllSubTypes(e){let t=this.allSubtypes[e];if(t)return t;{let r=this.getAllTypes(),i=[];for(let n of r)this.isSubtype(n,e)&&i.push(n);return this.allSubtypes[e]=i,i}}}});function CVe(e){return typeof e=="string"?e:typeof e>"u"?"undefined":typeof e.toString=="function"?e.toString():Object.prototype.toString.call(e)}function $I(e){return!!e&&typeof e[Symbol.iterator]=="function"}function Vo(...e){if(e.length===1){let t=e[0];if(t instanceof Od)return t;if($I(t))return new Od(()=>t[Symbol.iterator](),r=>r.next());if(typeof t.length=="number")return new Od(()=>({index:0}),r=>r.index<t.length?{done:!1,value:t[r.index++]}:$u)}return e.length>1?new Od(()=>({collIndex:0,arrIndex:0}),t=>{do{if(t.iterator){let r=t.iterator.next();if(!r.done)return r;t.iterator=void 0}if(t.array){if(t.arrIndex<t.array.length)return{done:!1,value:t.array[t.arrIndex++]};t.array=void 0,t.arrIndex=0}if(t.collIndex<e.length){let r=e[t.collIndex++];$I(r)?t.iterator=r[Symbol.iterator]():r&&typeof r.length=="number"&&(t.array=r)}}while(t.iterator||t.array||t.collIndex<e.length);return $u}):w7}var Od,w7,$u,Pv,k7,tc=D(()=>{Od=class ry{constructor(t,r){this.startFn=t,this.nextFn=r}iterator(){let t={state:this.startFn(),next:()=>this.nextFn(t.state),[Symbol.iterator]:()=>t};return t}[Symbol.iterator](){return this.iterator()}isEmpty(){return!!this.iterator().next().done}count(){let t=this.iterator(),r=0,i=t.next();for(;!i.done;)r++,i=t.next();return r}toArray(){let t=[],r=this.iterator(),i;do i=r.next(),i.value!==void 0&&t.push(i.value);while(!i.done);return t}toSet(){return new Set(this)}toMap(t,r){let i=this.map(n=>[t?t(n):n,r?r(n):n]);return new Map(i)}toString(){return this.join()}concat(t){let r=t[Symbol.iterator]();return new ry(()=>({first:this.startFn(),firstDone:!1}),i=>{let n;if(!i.firstDone){do if(n=this.nextFn(i.first),!n.done)return n;while(!n.done);i.firstDone=!0}do if(n=r.next(),!n.done)return n;while(!n.done);return $u})}join(t=","){let r=this.iterator(),i="",n,a=!1;do n=r.next(),n.done||(a&&(i+=t),i+=CVe(n.value)),a=!0;while(!n.done);return i}indexOf(t,r=0){let i=this.iterator(),n=0,a=i.next();for(;!a.done;){if(n>=r&&a.value===t)return n;a=i.next(),n++}return-1}every(t){let r=this.iterator(),i=r.next();for(;!i.done;){if(!t(i.value))return!1;i=r.next()}return!0}some(t){let r=this.iterator(),i=r.next();for(;!i.done;){if(t(i.value))return!0;i=r.next()}return!1}forEach(t){let r=this.iterator(),i=0,n=r.next();for(;!n.done;)t(n.value,i),n=r.next(),i++}map(t){return new ry(this.startFn,r=>{let{done:i,value:n}=this.nextFn(r);return i?$u:{done:!1,value:t(n)}})}filter(t){return new ry(this.startFn,r=>{let i;do if(i=this.nextFn(r),!i.done&&t(i.value))return i;while(!i.done);return $u})}nonNullable(){return this.filter(t=>t!=null)}reduce(t,r){let i=this.iterator(),n=r,a=i.next();for(;!a.done;)n===void 0?n=a.value:n=t(n,a.value),a=i.next();return n}reduceRight(t,r){return this.recursiveReduce(this.iterator(),t,r)}recursiveReduce(t,r,i){let n=t.next();if(n.done)return i;let a=this.recursiveReduce(t,r,i);return a===void 0?n.value:r(a,n.value)}find(t){let r=this.iterator(),i=r.next();for(;!i.done;){if(t(i.value))return i.value;i=r.next()}}findIndex(t){let r=this.iterator(),i=0,n=r.next();for(;!n.done;){if(t(n.value))return i;n=r.next(),i++}return-1}includes(t){let r=this.iterator(),i=r.next();for(;!i.done;){if(i.value===t)return!0;i=r.next()}return!1}flatMap(t){return new ry(()=>({this:this.startFn()}),r=>{do{if(r.iterator){let a=r.iterator.next();if(a.done)r.iterator=void 0;else return a}let{done:i,value:n}=this.nextFn(r.this);if(!i){let a=t(n);if($I(a))r.iterator=a[Symbol.iterator]();else return{done:!1,value:a}}}while(r.iterator);return $u})}flat(t){if(t===void 0&&(t=1),t<=0)return this;let r=t>1?this.flat(t-1):this;return new ry(()=>({this:r.startFn()}),i=>{do{if(i.iterator){let s=i.iterator.next();if(s.done)i.iterator=void 0;else return s}let{done:n,value:a}=r.nextFn(i.this);if(!n)if($I(a))i.iterator=a[Symbol.iterator]();else return{done:!1,value:a}}while(i.iterator);return $u})}head(){let t=this.iterator().next();if(!t.done)return t.value}tail(t=1){return new ry(()=>{let r=this.startFn();for(let i=0;i<t;i++)if(this.nextFn(r).done)return r;return r},this.nextFn)}limit(t){return new ry(()=>({size:0,state:this.startFn()}),r=>(r.size++,r.size>t?$u:this.nextFn(r.state)))}distinct(t){let r=new Set;return this.filter(i=>{let n=t?t(i):i;return r.has(n)?!1:(r.add(n),!0)})}exclude(t,r){let i=new Set;for(let n of t){let a=r?r(n):n;i.add(a)}return this.filter(n=>{let a=r?r(n):n;return!i.has(a)})}},w7=new Od(()=>{},()=>$u),$u=Object.freeze({done:!0,value:void 0}),Pv=class extends Od{constructor(e,t,r){super(()=>({iterators:r?.includeRoot?[[e][Symbol.iterator]()]:[t(e)[Symbol.iterator]()],pruned:!1}),i=>{for(i.pruned&&(i.iterators.pop(),i.pruned=!1);i.iterators.length>0;){let n=i.iterators[i.iterators.length-1].next();if(n.done)i.iterators.pop();else return i.iterators.push(t(n.value)[Symbol.iterator]()),n}return $u})}iterator(){let e={state:this.startFn(),next:()=>this.nextFn(e.state),prune:()=>{e.state.pruned=!0},[Symbol.iterator]:()=>e};return e}},function(e){function t(a){return a.reduce((s,u)=>s+u,0)}e.sum=t;function r(a){return a.reduce((s,u)=>s*u,0)}e.product=r;function i(a){return a.reduce((s,u)=>Math.min(s,u))}e.min=i;function n(a){return a.reduce((s,u)=>Math.max(s,u))}e.max=n}(k7||(k7={}))}),xW={};oi(xW,{DefaultNameRegexp:()=>GI,RangeComparison:()=>Af,compareRange:()=>H1e,findCommentNode:()=>W1e,findDeclarationNodeAtOffset:()=>AVe,findLeafNodeAtOffset:()=>_W,findLeafNodeBeforeOffset:()=>Y1e,flattenCst:()=>SVe,getInteriorNodes:()=>RVe,getNextNode:()=>MVe,getPreviousNode:()=>X1e,getStartlineNode:()=>LVe,inRange:()=>V1e,isChildNode:()=>j1e,isCommentNode:()=>bW,streamCst:()=>T7,toDocumentSegment:()=>E7,tokenToRange:()=>zI});function T7(e){return new Pv(e,t=>Sf(t)?t.content:[],{includeRoot:!0})}function SVe(e){return T7(e).filter(U_)}function j1e(e,t){for(;e.container;)if(e=e.container,e===t)return!0;return!1}function zI(e){return{start:{character:e.startColumn-1,line:e.startLine-1},end:{character:e.endColumn,line:e.endLine-1}}}function E7(e){if(!e)return;let{offset:t,end:r,range:i}=e;return{range:i,offset:t,end:r,length:r-t}}function H1e(e,t){if(e.end.line<t.start.line||e.end.line===t.start.line&&e.end.character<e.start.character)return Af.Before;if(e.start.line>t.end.line||e.start.line===t.end.line&&e.start.character>t.end.character)return Af.After;let r=e.start.line>t.start.line||e.start.line===t.start.line&&e.start.character>=t.start.character,i=e.end.line<t.end.line||e.end.line===t.end.line&&e.end.character<=t.end.character;return r&&i?Af.Inside:r?Af.OverlapBack:Af.OverlapFront}function V1e(e,t){return H1e(e,t)>Af.After}function AVe(e,t,r=GI){if(e){if(t>0){let i=t-e.offset,n=e.text.charAt(i);r.test(n)||t--}return _W(e,t)}}function W1e(e,t){if(e){let r=X1e(e,!0);if(r&&bW(r,t))return r;if(vW(e)){let i=e.content.findIndex(n=>!n.hidden);for(let n=i-1;n>=0;n--){let a=e.content[n];if(bW(a,t))return a}}}}function bW(e,t){return U_(e)&&t.includes(e.tokenType.name)}function _W(e,t){if(U_(e))return e;if(Sf(e)){let r=q1e(e,t,!1);if(r)return _W(r,t)}}function Y1e(e,t){if(U_(e))return e;if(Sf(e)){let r=q1e(e,t,!0);if(r)return Y1e(r,t)}}function q1e(e,t,r){let i=0,n=e.content.length-1,a;for(;i<=n;){let s=Math.floor((i+n)/2),u=e.content[s];if(u.offset<=t&&u.end>t)return u;u.end<=t?(a=r?u:void 0,i=s+1):n=s-1}return a}function X1e(e,t=!0){for(;e.container;){let r=e.container,i=r.content.indexOf(e);for(;i>0;){i--;let n=r.content[i];if(t||!n.hidden)return n}e=r}}function MVe(e,t=!0){for(;e.container;){let r=e.container,i=r.content.indexOf(e),n=r.content.length-1;for(;i<n;){i++;let a=r.content[i];if(t||!a.hidden)return a}e=r}}function LVe(e){if(e.range.start.character===0)return e;let t=e.range.start.line,r=e,i;for(;e.container;){let n=e.container,a=i??n.content.indexOf(e);if(a===0?(e=n,i=void 0):(i=a-1,e=n.content[i]),e.range.start.line!==t)break;r=e}return r}function RVe(e,t){let r=DVe(e,t);return r?r.parent.content.slice(r.a+1,r.b):[]}function DVe(e,t){let r=K1e(e),i=K1e(t),n;for(let a=0;a<r.length&&a<i.length;a++){let s=r[a],u=i[a];if(s.parent===u.parent)n={parent:s.parent,a:s.index,b:u.index};else break}return n}function K1e(e){let t=[];for(;e.container;){let r=e.container,i=r.content.indexOf(e);t.push({parent:r,index:i}),e=r}return t.reverse()}var Af,GI,U0=D(()=>{Nd(),tc(),function(e){e[e.Before=0]="Before",e[e.After=1]="After",e[e.OverlapFront=2]="OverlapFront",e[e.OverlapBack=3]="OverlapBack",e[e.Inside=4]="Inside"}(Af||(Af={})),GI=/^[\w\p{L}]$/u});function j_(e){throw new Error("Error! The input value was not handled.")}var C7,wW=D(()=>{C7=class extends Error{constructor(e,t){super(e?`${t} at ${e.range.start.line}:${e.range.start.character}`:t)}}}),Z1e={};oi(Z1e,{AbstractElement:()=>VI,AbstractRule:()=>V_,AbstractType:()=>W_,Action:()=>hN,Alternatives:()=>cN,ArrayLiteral:()=>WI,ArrayType:()=>YI,Assignment:()=>dN,BooleanLiteral:()=>qI,CharacterRange:()=>pN,Condition:()=>S7,Conjunction:()=>XI,CrossReference:()=>fN,Disjunction:()=>KI,EndOfFile:()=>gN,Grammar:()=>ZI,GrammarImport:()=>LW,Group:()=>mN,InferredType:()=>QI,Interface:()=>JI,Keyword:()=>yN,LangiumGrammarAstReflection:()=>SN,LangiumGrammarTerminals:()=>mme,NamedArgument:()=>RW,NegatedToken:()=>vN,Negation:()=>eN,NumberLiteral:()=>tN,Parameter:()=>rN,ParameterReference:()=>iN,ParserRule:()=>nN,ReferenceType:()=>aN,RegexToken:()=>xN,ReturnType:()=>DW,RuleCall:()=>bN,SimpleType:()=>sN,StringLiteral:()=>oN,TerminalAlternatives:()=>_N,TerminalGroup:()=>wN,TerminalRule:()=>M7,TerminalRuleCall:()=>kN,Type:()=>lN,TypeAttribute:()=>IW,TypeDefinition:()=>HI,UnionType:()=>uN,UnorderedGroup:()=>TN,UntilToken:()=>EN,ValueLiteral:()=>A7,Wildcard:()=>CN,isAbstractElement:()=>kW,isAbstractRule:()=>IVe,isAbstractType:()=>NVe,isAction:()=>Fv,isAlternatives:()=>SW,isArrayLiteral:()=>$Ve,isArrayType:()=>J1e,isAssignment:()=>xm,isBooleanLiteral:()=>eme,isCharacterRange:()=>lme,isCondition:()=>OVe,isConjunction:()=>tme,isCrossReference:()=>jI,isDisjunction:()=>rme,isEndOfFile:()=>ume,isFeatureName:()=>BVe,isGrammar:()=>zVe,isGrammarImport:()=>GVe,isGroup:()=>H_,isInferredType:()=>TW,isInterface:()=>EW,isKeyword:()=>bm,isNamedArgument:()=>UVe,isNegatedToken:()=>hme,isNegation:()=>ime,isNumberLiteral:()=>jVe,isParameter:()=>HVe,isParameterReference:()=>nme,isParserRule:()=>rc,isPrimitiveType:()=>Q1e,isReferenceType:()=>ame,isRegexToken:()=>cme,isReturnType:()=>sme,isRuleCall:()=>_m,isSimpleType:()=>CW,isStringLiteral:()=>VVe,isTerminalAlternatives:()=>dme,isTerminalGroup:()=>pme,isTerminalRule:()=>vm,isTerminalRuleCall:()=>AW,isType:()=>UI,isTypeAttribute:()=>WVe,isTypeDefinition:()=>PVe,isUnionType:()=>ome,isUnorderedGroup:()=>MW,isUntilToken:()=>fme,isValueLiteral:()=>FVe,isWildcard:()=>gme,reflection:()=>Fn});function IVe(e){return Fn.isInstance(e,V_)}function NVe(e){return Fn.isInstance(e,W_)}function OVe(e){return Fn.isInstance(e,S7)}function BVe(e){return Q1e(e)||e==="current"||e==="entry"||e==="extends"||e==="false"||e==="fragment"||e==="grammar"||e==="hidden"||e==="import"||e==="interface"||e==="returns"||e==="terminal"||e==="true"||e==="type"||e==="infer"||e==="infers"||e==="with"||typeof e=="string"&&/\^?[_a-zA-Z][\w_]*/.test(e)}function Q1e(e){return e==="string"||e==="number"||e==="boolean"||e==="Date"||e==="bigint"}function PVe(e){return Fn.isInstance(e,HI)}function FVe(e){return Fn.isInstance(e,A7)}function kW(e){return Fn.isInstance(e,VI)}function $Ve(e){return Fn.isInstance(e,WI)}function J1e(e){return Fn.isInstance(e,YI)}function eme(e){return Fn.isInstance(e,qI)}function tme(e){return Fn.isInstance(e,XI)}function rme(e){return Fn.isInstance(e,KI)}function zVe(e){return Fn.isInstance(e,ZI)}function GVe(e){return Fn.isInstance(e,LW)}function TW(e){return Fn.isInstance(e,QI)}function EW(e){return Fn.isInstance(e,JI)}function UVe(e){return Fn.isInstance(e,RW)}function ime(e){return Fn.isInstance(e,eN)}function jVe(e){return Fn.isInstance(e,tN)}function HVe(e){return Fn.isInstance(e,rN)}function nme(e){return Fn.isInstance(e,iN)}function rc(e){return Fn.isInstance(e,nN)}function ame(e){return Fn.isInstance(e,aN)}function sme(e){return Fn.isInstance(e,DW)}function CW(e){return Fn.isInstance(e,sN)}function VVe(e){return Fn.isInstance(e,oN)}function vm(e){return Fn.isInstance(e,M7)}function UI(e){return Fn.isInstance(e,lN)}function WVe(e){return Fn.isInstance(e,IW)}function ome(e){return Fn.isInstance(e,uN)}function Fv(e){return Fn.isInstance(e,hN)}function SW(e){return Fn.isInstance(e,cN)}function xm(e){return Fn.isInstance(e,dN)}function lme(e){return Fn.isInstance(e,pN)}function jI(e){return Fn.isInstance(e,fN)}function ume(e){return Fn.isInstance(e,gN)}function H_(e){return Fn.isInstance(e,mN)}function bm(e){return Fn.isInstance(e,yN)}function hme(e){return Fn.isInstance(e,vN)}function cme(e){return Fn.isInstance(e,xN)}function _m(e){return Fn.isInstance(e,bN)}function dme(e){return Fn.isInstance(e,_N)}function pme(e){return Fn.isInstance(e,wN)}function AW(e){return Fn.isInstance(e,kN)}function MW(e){return Fn.isInstance(e,TN)}function fme(e){return Fn.isInstance(e,EN)}function gme(e){return Fn.isInstance(e,CN)}var mme,V_,W_,S7,HI,A7,VI,WI,YI,qI,XI,KI,ZI,LW,QI,JI,RW,eN,tN,rN,iN,nN,aN,DW,sN,oN,M7,lN,IW,uN,hN,cN,dN,pN,fN,gN,mN,yN,vN,xN,bN,_N,wN,kN,TN,EN,CN,SN,Fn,Mf=D(()=>{Nd(),mme={ID:/\^?[_a-zA-Z][\w_]*/,STRING:/"(\\.|[^"\\])*"|'(\\.|[^'\\])*'/,NUMBER:/NaN|-?((\d*\.\d+|\d+)([Ee][+-]?\d+)?|Infinity)/,RegexLiteral:/\/(?![*+?])(?:[^\r\n\[/\\]|\\.|\[(?:[^\r\n\]\\]|\\.)*\])+\/[a-z]*/,WS:/\s+/,ML_COMMENT:/\/\*[\s\S]*?\*\//,SL_COMMENT:/\/\/[^\n\r]*/},V_="AbstractRule",W_="AbstractType",S7="Condition",HI="TypeDefinition",A7="ValueLiteral",VI="AbstractElement",WI="ArrayLiteral",YI="ArrayType",qI="BooleanLiteral",XI="Conjunction",KI="Disjunction",ZI="Grammar",LW="GrammarImport",QI="InferredType",JI="Interface",RW="NamedArgument",eN="Negation",tN="NumberLiteral",rN="Parameter",iN="ParameterReference",nN="ParserRule",aN="ReferenceType",DW="ReturnType",sN="SimpleType",oN="StringLiteral",M7="TerminalRule",lN="Type",IW="TypeAttribute",uN="UnionType",hN="Action",cN="Alternatives",dN="Assignment",pN="CharacterRange",fN="CrossReference",gN="EndOfFile",mN="Group",yN="Keyword",vN="NegatedToken",xN="RegexToken",bN="RuleCall",_N="TerminalAlternatives",wN="TerminalGroup",kN="TerminalRuleCall",TN="UnorderedGroup",EN="UntilToken",CN="Wildcard",SN=class extends FI{getAllTypes(){return["AbstractElement","AbstractRule","AbstractType","Action","Alternatives","ArrayLiteral","ArrayType","Assignment","BooleanLiteral","CharacterRange","Condition","Conjunction","CrossReference","Disjunction","EndOfFile","Grammar","GrammarImport","Group","InferredType","Interface","Keyword","NamedArgument","NegatedToken","Negation","NumberLiteral","Parameter","ParameterReference","ParserRule","ReferenceType","RegexToken","ReturnType","RuleCall","SimpleType","StringLiteral","TerminalAlternatives","TerminalGroup","TerminalRule","TerminalRuleCall","Type","TypeAttribute","TypeDefinition","UnionType","UnorderedGroup","UntilToken","ValueLiteral","Wildcard"]}computeIsSubtype(e,t){switch(e){case hN:case cN:case dN:case pN:case fN:case gN:case mN:case yN:case vN:case xN:case bN:case _N:case wN:case kN:case TN:case EN:case CN:return this.isSubtype(VI,t);case WI:case tN:case oN:return this.isSubtype(A7,t);case YI:case aN:case sN:case uN:return this.isSubtype(HI,t);case qI:return this.isSubtype(S7,t)||this.isSubtype(A7,t);case XI:case KI:case eN:case iN:return this.isSubtype(S7,t);case QI:case JI:case lN:return this.isSubtype(W_,t);case nN:return this.isSubtype(V_,t)||this.isSubtype(W_,t);case M7:return this.isSubtype(V_,t);default:return!1}}getReferenceType(e){let t=`${e.container.$type}:${e.property}`;switch(t){case"Action:type":case"CrossReference:type":case"Interface:superTypes":case"ParserRule:returnType":case"SimpleType:typeRef":return W_;case"Grammar:hiddenTokens":case"ParserRule:hiddenTokens":case"RuleCall:rule":return V_;case"Grammar:usedGrammars":return ZI;case"NamedArgument:parameter":case"ParameterReference:parameter":return rN;case"TerminalRuleCall:rule":return M7;default:throw new Error(`${t} is not a valid reference id.`)}}getTypeMetaData(e){switch(e){case"AbstractElement":return{name:"AbstractElement",properties:[{name:"cardinality"},{name:"lookahead"}]};case"ArrayLiteral":return{name:"ArrayLiteral",properties:[{name:"elements",defaultValue:[]}]};case"ArrayType":return{name:"ArrayType",properties:[{name:"elementType"}]};case"BooleanLiteral":return{name:"BooleanLiteral",properties:[{name:"true",defaultValue:!1}]};case"Conjunction":return{name:"Conjunction",properties:[{name:"left"},{name:"right"}]};case"Disjunction":return{name:"Disjunction",properties:[{name:"left"},{name:"right"}]};case"Grammar":return{name:"Grammar",properties:[{name:"definesHiddenTokens",defaultValue:!1},{name:"hiddenTokens",defaultValue:[]},{name:"imports",defaultValue:[]},{name:"interfaces",defaultValue:[]},{name:"isDeclared",defaultValue:!1},{name:"name"},{name:"rules",defaultValue:[]},{name:"types",defaultValue:[]},{name:"usedGrammars",defaultValue:[]}]};case"GrammarImport":return{name:"GrammarImport",properties:[{name:"path"}]};case"InferredType":return{name:"InferredType",properties:[{name:"name"}]};case"Interface":return{name:"Interface",properties:[{name:"attributes",defaultValue:[]},{name:"name"},{name:"superTypes",defaultValue:[]}]};case"NamedArgument":return{name:"NamedArgument",properties:[{name:"calledByName",defaultValue:!1},{name:"parameter"},{name:"value"}]};case"Negation":return{name:"Negation",properties:[{name:"value"}]};case"NumberLiteral":return{name:"NumberLiteral",properties:[{name:"value"}]};case"Parameter":return{name:"Parameter",properties:[{name:"name"}]};case"ParameterReference":return{name:"ParameterReference",properties:[{name:"parameter"}]};case"ParserRule":return{name:"ParserRule",properties:[{name:"dataType"},{name:"definesHiddenTokens",defaultValue:!1},{name:"definition"},{name:"entry",defaultValue:!1},{name:"fragment",defaultValue:!1},{name:"hiddenTokens",defaultValue:[]},{name:"inferredType"},{name:"name"},{name:"parameters",defaultValue:[]},{name:"returnType"},{name:"wildcard",defaultValue:!1}]};case"ReferenceType":return{name:"ReferenceType",properties:[{name:"referenceType"}]};case"ReturnType":return{name:"ReturnType",properties:[{name:"name"}]};case"SimpleType":return{name:"SimpleType",properties:[{name:"primitiveType"},{name:"stringType"},{name:"typeRef"}]};case"StringLiteral":return{name:"StringLiteral",properties:[{name:"value"}]};case"TerminalRule":return{name:"TerminalRule",properties:[{name:"definition"},{name:"fragment",defaultValue:!1},{name:"hidden",defaultValue:!1},{name:"name"},{name:"type"}]};case"Type":return{name:"Type",properties:[{name:"name"},{name:"type"}]};case"TypeAttribute":return{name:"TypeAttribute",properties:[{name:"defaultValue"},{name:"isOptional",defaultValue:!1},{name:"name"},{name:"type"}]};case"UnionType":return{name:"UnionType",properties:[{name:"types",defaultValue:[]}]};case"Action":return{name:"Action",properties:[{name:"cardinality"},{name:"feature"},{name:"inferredType"},{name:"lookahead"},{name:"operator"},{name:"type"}]};case"Alternatives":return{name:"Alternatives",properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"lookahead"}]};case"Assignment":return{name:"Assignment",properties:[{name:"cardinality"},{name:"feature"},{name:"lookahead"},{name:"operator"},{name:"terminal"}]};case"CharacterRange":return{name:"CharacterRange",properties:[{name:"cardinality"},{name:"left"},{name:"lookahead"},{name:"right"}]};case"CrossReference":return{name:"CrossReference",properties:[{name:"cardinality"},{name:"deprecatedSyntax",defaultValue:!1},{name:"lookahead"},{name:"terminal"},{name:"type"}]};case"EndOfFile":return{name:"EndOfFile",properties:[{name:"cardinality"},{name:"lookahead"}]};case"Group":return{name:"Group",properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"guardCondition"},{name:"lookahead"}]};case"Keyword":return{name:"Keyword",properties:[{name:"cardinality"},{name:"lookahead"},{name:"value"}]};case"NegatedToken":return{name:"NegatedToken",properties:[{name:"cardinality"},{name:"lookahead"},{name:"terminal"}]};case"RegexToken":return{name:"RegexToken",properties:[{name:"cardinality"},{name:"lookahead"},{name:"regex"}]};case"RuleCall":return{name:"RuleCall",properties:[{name:"arguments",defaultValue:[]},{name:"cardinality"},{name:"lookahead"},{name:"rule"}]};case"TerminalAlternatives":return{name:"TerminalAlternatives",properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"lookahead"}]};case"TerminalGroup":return{name:"TerminalGroup",properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"lookahead"}]};case"TerminalRuleCall":return{name:"TerminalRuleCall",properties:[{name:"cardinality"},{name:"lookahead"},{name:"rule"}]};case"UnorderedGroup":return{name:"UnorderedGroup",properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"lookahead"}]};case"UntilToken":return{name:"UntilToken",properties:[{name:"cardinality"},{name:"lookahead"},{name:"terminal"}]};case"Wildcard":return{name:"Wildcard",properties:[{name:"cardinality"},{name:"lookahead"}]};default:return{name:e,properties:[]}}}},Fn=new SN}),NW={};oi(NW,{assignMandatoryProperties:()=>vme,copyAstNode:()=>PW,findLocalReferences:()=>qVe,findRootNode:()=>yme,getContainerOfType:()=>L7,getDocument:()=>Vc,hasContainerOfType:()=>YVe,linkContentToContainer:()=>OW,streamAllContents:()=>$v,streamAst:()=>wm,streamContents:()=>AN,streamReferences:()=>MN});function OW(e){for(let[t,r]of Object.entries(e))t.startsWith("$")||(Array.isArray(r)?r.forEach((i,n)=>{ol(i)&&(i.$container=e,i.$containerProperty=t,i.$containerIndex=n)}):ol(r)&&(r.$container=e,r.$containerProperty=t))}function L7(e,t){let r=e;for(;r;){if(t(r))return r;r=r.$container}}function YVe(e,t){let r=e;for(;r;){if(t(r))return!0;r=r.$container}return!1}function Vc(e){let t=yme(e).$document;if(!t)throw new Error("AST node has no document.");return t}function yme(e){for(;e.$container;)e=e.$container;return e}function AN(e,t){if(!e)throw new Error("Node must be an AstNode.");let r=t?.range;return new Od(()=>({keys:Object.keys(e),keyIndex:0,arrayIndex:0}),i=>{for(;i.keyIndex<i.keys.length;){let n=i.keys[i.keyIndex];if(!n.startsWith("$")){let a=e[n];if(ol(a)){if(i.keyIndex++,BW(a,r))return{done:!1,value:a}}else if(Array.isArray(a)){for(;i.arrayIndex<a.length;){let s=i.arrayIndex++,u=a[s];if(ol(u)&&BW(u,r))return{done:!1,value:u}}i.arrayIndex=0}}i.keyIndex++}return $u})}function $v(e,t){if(!e)throw new Error("Root node must be an AstNode.");return new Pv(e,r=>AN(r,t))}function wm(e,t){if(e){if(t?.range&&!BW(e,t.range))return new Pv(e,()=>[])}else throw new Error("Root node must be an AstNode.");return new Pv(e,r=>AN(r,t),{includeRoot:!0})}function BW(e,t){var r;if(!t)return!0;let i=(r=e.$cstNode)===null||r===void 0?void 0:r.range;return i?V1e(i,t):!1}function MN(e){return new Od(()=>({keys:Object.keys(e),keyIndex:0,arrayIndex:0}),t=>{for(;t.keyIndex<t.keys.length;){let r=t.keys[t.keyIndex];if(!r.startsWith("$")){let i=e[r];if(ec(i))return t.keyIndex++,{done:!1,value:{reference:i,container:e,property:r}};if(Array.isArray(i)){for(;t.arrayIndex<i.length;){let n=t.arrayIndex++,a=i[n];if(ec(a))return{done:!1,value:{reference:a,container:e,property:r,index:n}}}t.arrayIndex=0}}t.keyIndex++}return $u})}function qVe(e,t=Vc(e).parseResult.value){let r=[];return wm(t).forEach(i=>{MN(i).forEach(n=>{n.reference.ref===e&&r.push(n.reference)})}),Vo(r)}function vme(e,t){let r=e.getTypeMetaData(t.$type),i=t;for(let n of r.properties)n.defaultValue!==void 0&&i[n.name]===void 0&&(i[n.name]=xme(n.defaultValue))}function xme(e){return Array.isArray(e)?[...e.map(xme)]:e}function PW(e,t){let r={$type:e.$type};for(let[i,n]of Object.entries(e))if(!i.startsWith("$"))if(ol(n))r[i]=PW(n,t);else if(ec(n))r[i]=t(r,i,n.$refNode,n.$refText);else if(Array.isArray(n)){let a=[];for(let s of n)ol(s)?a.push(PW(s,t)):ec(s)?a.push(t(r,i,s.$refNode,s.$refText)):a.push(s);r[i]=a}else r[i]=n;return OW(r),r}var mh=D(()=>{Nd(),tc(),U0()});function $n(e){return e.charCodeAt(0)}function FW(e,t){Array.isArray(e)?e.forEach(function(r){t.push(r)}):t.push(e)}function R7(e,t){if(e[t]===!0)throw"duplicate flag "+t;let r=e[t];e[t]=!0}function Y_(e){if(e===void 0)throw Error("Internal Error - Should never get here!");return!0}function LN(){throw Error("Internal Error - Should never get here!")}function bme(e){return e.type==="Character"}var _me=D(()=>{}),D7,I7,$W,XVe=D(()=>{_me(),D7=[];for(let e=$n("0");e<=$n("9");e++)D7.push(e);I7=[$n("_")].concat(D7);for(let e=$n("a");e<=$n("z");e++)I7.push(e);for(let e=$n("A");e<=$n("Z");e++)I7.push(e);$W=[$n(" "),$n("\f"),$n(`
`),$n("\r"),$n("	"),$n("\v"),$n("	"),$n("\xA0"),$n("\u1680"),$n("\u2000"),$n("\u2001"),$n("\u2002"),$n("\u2003"),$n("\u2004"),$n("\u2005"),$n("\u2006"),$n("\u2007"),$n("\u2008"),$n("\u2009"),$n("\u200A"),$n("\u2028"),$n("\u2029"),$n("\u202F"),$n("\u205F"),$n("\u3000"),$n("\uFEFF")]}),wme,N7,kme,zW,KVe=D(()=>{_me(),XVe(),wme=/[0-9a-fA-F]/,N7=/[0-9]/,kme=/[1-9]/,zW=class{constructor(){this.idx=0,this.input="",this.groupIdx=0}saveState(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}}restoreState(e){this.idx=e.idx,this.input=e.input,this.groupIdx=e.groupIdx}pattern(e){this.idx=0,this.input=e,this.groupIdx=0,this.consumeChar("/");let t=this.disjunction();this.consumeChar("/");let r={type:"Flags",loc:{begin:this.idx,end:e.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};for(;this.isRegExpFlag();)switch(this.popChar()){case"g":R7(r,"global");break;case"i":R7(r,"ignoreCase");break;case"m":R7(r,"multiLine");break;case"u":R7(r,"unicode");break;case"y":R7(r,"sticky");break}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:r,value:t,loc:this.loc(0)}}disjunction(){let e=[],t=this.idx;for(e.push(this.alternative());this.peekChar()==="|";)this.consumeChar("|"),e.push(this.alternative());return{type:"Disjunction",value:e,loc:this.loc(t)}}alternative(){let e=[],t=this.idx;for(;this.isTerm();)e.push(this.term());return{type:"Alternative",value:e,loc:this.loc(t)}}term(){return this.isAssertion()?this.assertion():this.atom()}assertion(){let e=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(e)};case"$":return{type:"EndAnchor",loc:this.loc(e)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(e)};case"B":return{type:"NonWordBoundary",loc:this.loc(e)}}throw Error("Invalid Assertion Escape");case"(":this.consumeChar("?");let t;switch(this.popChar()){case"=":t="Lookahead";break;case"!":t="NegativeLookahead";break}Y_(t);let r=this.disjunction();return this.consumeChar(")"),{type:t,value:r,loc:this.loc(e)}}return LN()}quantifier(e=!1){let t,r=this.idx;switch(this.popChar()){case"*":t={atLeast:0,atMost:1/0};break;case"+":t={atLeast:1,atMost:1/0};break;case"?":t={atLeast:0,atMost:1};break;case"{":let i=this.integerIncludingZero();switch(this.popChar()){case"}":t={atLeast:i,atMost:i};break;case",":let n;this.isDigit()?(n=this.integerIncludingZero(),t={atLeast:i,atMost:n}):t={atLeast:i,atMost:1/0},this.consumeChar("}");break}if(e===!0&&t===void 0)return;Y_(t);break}if(!(e===!0&&t===void 0)&&Y_(t))return this.peekChar(0)==="?"?(this.consumeChar("?"),t.greedy=!1):t.greedy=!0,t.type="Quantifier",t.loc=this.loc(r),t}atom(){let e,t=this.idx;switch(this.peekChar()){case".":e=this.dotAll();break;case"\\":e=this.atomEscape();break;case"[":e=this.characterClass();break;case"(":e=this.group();break}return e===void 0&&this.isPatternCharacter()&&(e=this.patternCharacter()),Y_(e)?(e.loc=this.loc(t),this.isQuantifier()&&(e.quantifier=this.quantifier()),e):LN()}dotAll(){return this.consumeChar("."),{type:"Set",complement:!0,value:[$n(`
`),$n("\r"),$n("\u2028"),$n("\u2029")]}}atomEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}decimalEscapeAtom(){return{type:"GroupBackReference",value:this.positiveInteger()}}characterClassEscape(){let e,t=!1;switch(this.popChar()){case"d":e=D7;break;case"D":e=D7,t=!0;break;case"s":e=$W;break;case"S":e=$W,t=!0;break;case"w":e=I7;break;case"W":e=I7,t=!0;break}return Y_(e)?{type:"Set",value:e,complement:t}:LN()}controlEscapeAtom(){let e;switch(this.popChar()){case"f":e=$n("\f");break;case"n":e=$n(`
`);break;case"r":e=$n("\r");break;case"t":e=$n("	");break;case"v":e=$n("\v");break}return Y_(e)?{type:"Character",value:e}:LN()}controlLetterEscapeAtom(){this.consumeChar("c");let e=this.popChar();if(/[a-zA-Z]/.test(e)===!1)throw Error("Invalid ");return{type:"Character",value:e.toUpperCase().charCodeAt(0)-64}}nulCharacterAtom(){return this.consumeChar("0"),{type:"Character",value:$n("\0")}}hexEscapeSequenceAtom(){return this.consumeChar("x"),this.parseHexDigits(2)}regExpUnicodeEscapeSequenceAtom(){return this.consumeChar("u"),this.parseHexDigits(4)}identityEscapeAtom(){let e=this.popChar();return{type:"Character",value:$n(e)}}classPatternCharacterAtom(){switch(this.peekChar()){case`
`:case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:let e=this.popChar();return{type:"Character",value:$n(e)}}}characterClass(){let e=[],t=!1;for(this.consumeChar("["),this.peekChar(0)==="^"&&(this.consumeChar("^"),t=!0);this.isClassAtom();){let r=this.classAtom(),i=r.type==="Character";if(bme(r)&&this.isRangeDash()){this.consumeChar("-");let n=this.classAtom(),a=n.type==="Character";if(bme(n)){if(n.value<r.value)throw Error("Range out of order in character class");e.push({from:r.value,to:n.value})}else FW(r.value,e),e.push($n("-")),FW(n.value,e)}else FW(r.value,e)}return this.consumeChar("]"),{type:"Set",complement:t,value:e}}classAtom(){switch(this.peekChar()){case"]":case`
`:case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}}classEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:$n("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}group(){let e=!0;switch(this.consumeChar("("),this.peekChar(0)){case"?":this.consumeChar("?"),this.consumeChar(":"),e=!1;break;default:this.groupIdx++;break}let t=this.disjunction();this.consumeChar(")");let r={type:"Group",capturing:e,value:t};return e&&(r.idx=this.groupIdx),r}positiveInteger(){let e=this.popChar();if(kme.test(e)===!1)throw Error("Expecting a positive integer");for(;N7.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}integerIncludingZero(){let e=this.popChar();if(N7.test(e)===!1)throw Error("Expecting an integer");for(;N7.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}patternCharacter(){let e=this.popChar();switch(e){case`
`:case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:$n(e)}}}isRegExpFlag(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}}isRangeDash(){return this.peekChar()==="-"&&this.isClassAtom(1)}isDigit(){return N7.test(this.peekChar(0))}isClassAtom(e=0){switch(this.peekChar(e)){case"]":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}isTerm(){return this.isAtom()||this.isAssertion()}isAtom(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}}isAssertion(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return this.peekChar(1)==="?"&&(this.peekChar(2)==="="||this.peekChar(2)==="!");default:return!1}}isQuantifier(){let e=this.saveState();try{return this.quantifier(!0)!==void 0}catch{return!1}finally{this.restoreState(e)}}isPatternCharacter(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}parseHexDigits(e){let t="";for(let r=0;r<e;r++){let i=this.popChar();if(wme.test(i)===!1)throw Error("Expecting a HexDecimal digits");t+=i}return{type:"Character",value:parseInt(t,16)}}peekChar(e=0){return this.input[this.idx+e]}popChar(){let e=this.peekChar(0);return this.consumeChar(void 0),e}consumeChar(e){if(e!==void 0&&this.input[this.idx]!==e)throw Error("Expected: '"+e+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++}loc(e){return{begin:e,end:this.idx}}}}),O7,ZVe=D(()=>{O7=class{visitChildren(e){for(let t in e){let r=e[t];e.hasOwnProperty(t)&&(r.type!==void 0?this.visit(r):Array.isArray(r)&&r.forEach(i=>{this.visit(i)},this))}}visit(e){switch(e.type){case"Pattern":this.visitPattern(e);break;case"Flags":this.visitFlags(e);break;case"Disjunction":this.visitDisjunction(e);break;case"Alternative":this.visitAlternative(e);break;case"StartAnchor":this.visitStartAnchor(e);break;case"EndAnchor":this.visitEndAnchor(e);break;case"WordBoundary":this.visitWordBoundary(e);break;case"NonWordBoundary":this.visitNonWordBoundary(e);break;case"Lookahead":this.visitLookahead(e);break;case"NegativeLookahead":this.visitNegativeLookahead(e);break;case"Character":this.visitCharacter(e);break;case"Set":this.visitSet(e);break;case"Group":this.visitGroup(e);break;case"GroupBackReference":this.visitGroupBackReference(e);break;case"Quantifier":this.visitQuantifier(e);break}this.visitChildren(e)}visitPattern(e){}visitFlags(e){}visitDisjunction(e){}visitAlternative(e){}visitStartAnchor(e){}visitEndAnchor(e){}visitWordBoundary(e){}visitNonWordBoundary(e){}visitLookahead(e){}visitNegativeLookahead(e){}visitCharacter(e){}visitSet(e){}visitGroup(e){}visitGroupBackReference(e){}visitQuantifier(e){}}}),RN=D(()=>{KVe(),ZVe()}),GW={};oi(GW,{NEWLINE_REGEXP:()=>jW,escapeRegExp:()=>B7,getCaseInsensitivePattern:()=>Eme,getTerminalParts:()=>QVe,isMultilineComment:()=>Tme,isWhitespace:()=>UW,partialMatches:()=>Cme,partialRegExp:()=>Sme});function QVe(e){try{typeof e!="string"&&(e=e.source),e=`/${e}/`;let t=HW.pattern(e),r=[];for(let i of t.value.value)km.reset(e),km.visit(i),r.push({start:km.startRegexp,end:km.endRegex});return r}catch{return[]}}function Tme(e){try{return typeof e=="string"&&(e=new RegExp(e)),e=e.toString(),km.reset(e),km.visit(HW.pattern(e)),km.multiline}catch{return!1}}function UW(e){return(typeof e=="string"?new RegExp(e):e).test(" ")}function B7(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Eme(e){return Array.prototype.map.call(e,t=>/\w/.test(t)?`[${t.toLowerCase()}${t.toUpperCase()}]`:B7(t)).join("")}function Cme(e,t){let r=Sme(e),i=t.match(r);return!!i&&i[0].length>0}function Sme(e){typeof e=="string"&&(e=new RegExp(e));let t=e,r=e.source,i=0;function n(){let a="",s;function u(d){a+=r.substr(i,d),i+=d}function h(d){a+="(?:"+r.substr(i,d)+"|$)",i+=d}for(;i<r.length;)switch(r[i]){case"\\":switch(r[i+1]){case"c":h(3);break;case"x":h(4);break;case"u":t.unicode?r[i+2]==="{"?h(r.indexOf("}",i)-i+1):h(6):h(2);break;case"p":case"P":t.unicode?h(r.indexOf("}",i)-i+1):h(2);break;case"k":h(r.indexOf(">",i)-i+1);break;default:h(2);break}break;case"[":s=/\[(?:\\.|.)*?\]/g,s.lastIndex=i,s=s.exec(r)||[],h(s[0].length);break;case"|":case"^":case"$":case"*":case"+":case"?":u(1);break;case"{":s=/\{\d+,?\d*\}/g,s.lastIndex=i,s=s.exec(r),s?u(s[0].length):h(1);break;case"(":if(r[i+1]==="?")switch(r[i+2]){case":":a+="(?:",i+=3,a+=n()+"|$)";break;case"=":a+="(?=",i+=3,a+=n()+")";break;case"!":s=i,i+=3,n(),a+=r.substr(s,i-s);break;case"<":switch(r[i+3]){case"=":case"!":s=i,i+=4,n(),a+=r.substr(s,i-s);break;default:u(r.indexOf(">",i)-i+1),a+=n()+"|$)";break}break}else u(1),a+=n()+"|$)";break;case")":return++i,a;default:h(1);break}return a}return new RegExp(n(),e.flags)}var jW,HW,Ame,km,P7=D(()=>{RN(),jW=/\r?\n/gm,HW=new zW,Ame=class extends O7{constructor(){super(...arguments),this.isStarting=!0,this.endRegexpStack=[],this.multiline=!1}get endRegex(){return this.endRegexpStack.join("")}reset(e){this.multiline=!1,this.regex=e,this.startRegexp="",this.isStarting=!0,this.endRegexpStack=[]}visitGroup(e){e.quantifier&&(this.isStarting=!1,this.endRegexpStack=[])}visitCharacter(e){let t=String.fromCharCode(e.value);if(!this.multiline&&t===`
`&&(this.multiline=!0),e.quantifier)this.isStarting=!1,this.endRegexpStack=[];else{let r=B7(t);this.endRegexpStack.push(r),this.isStarting&&(this.startRegexp+=r)}}visitSet(e){if(!this.multiline){let t=this.regex.substring(e.loc.begin,e.loc.end),r=new RegExp(t);this.multiline=!!`
`.match(r)}if(e.quantifier)this.isStarting=!1,this.endRegexpStack=[];else{let t=this.regex.substring(e.loc.begin,e.loc.end);this.endRegexpStack.push(t),this.isStarting&&(this.startRegexp+=t)}}visitChildren(e){e.type==="Group"&&e.quantifier||super.visitChildren(e)}},km=new Ame}),VW={};oi(VW,{findAssignment:()=>Bme,findNameAssignment:()=>KW,findNodeForKeyword:()=>Ome,findNodeForProperty:()=>YW,findNodesForKeyword:()=>JVe,findNodesForKeywordInternal:()=>XW,findNodesForProperty:()=>Nme,getActionAtElement:()=>Fme,getActionType:()=>zme,getAllReachableRules:()=>WW,getCrossReferenceTerminal:()=>Dme,getEntryRule:()=>Mme,getExplicitRuleType:()=>QW,getHiddenRules:()=>Lme,getRuleType:()=>Gme,getTypeName:()=>F7,isArrayCardinality:()=>tWe,isArrayOperator:()=>rWe,isCommentTerminal:()=>Ime,isDataType:()=>iWe,isDataTypeRule:()=>DN,isOptionalCardinality:()=>eWe,terminalRegex:()=>IN});function Mme(e){return e.rules.find(t=>rc(t)&&t.entry)}function Lme(e){return e.rules.filter(t=>vm(t)&&t.hidden)}function WW(e,t){let r=new Set,i=Mme(e);if(!i)return new Set(e.rules);let n=[i].concat(Lme(e));for(let s of n)Rme(s,r,t);let a=new Set;for(let s of e.rules)(r.has(s.name)||vm(s)&&s.hidden)&&a.add(s);return a}function Rme(e,t,r){t.add(e.name),$v(e).forEach(i=>{if(_m(i)||r&&AW(i)){let n=i.rule.ref;n&&!t.has(n.name)&&Rme(n,t,r)}})}function Dme(e){if(e.terminal)return e.terminal;if(e.type.ref)return KW(e.type.ref)?.terminal}function Ime(e){return e.hidden&&!IN(e).test(" ")}function Nme(e,t){return!e||!t?[]:qW(e,t,e.astNode,!0)}function YW(e,t,r){if(!e||!t)return;let i=qW(e,t,e.astNode,!0);if(i.length!==0)return r!==void 0?r=Math.max(0,Math.min(r,i.length-1)):r=0,i[r]}function qW(e,t,r,i){if(!i){let n=L7(e.grammarSource,xm);if(n&&n.feature===t)return[e]}return Sf(e)&&e.astNode===r?e.content.flatMap(n=>qW(n,t,r,!1)):[]}function JVe(e,t){return e?XW(e,t,e?.astNode):[]}function Ome(e,t,r){if(!e)return;let i=XW(e,t,e?.astNode);if(i.length!==0)return r!==void 0?r=Math.max(0,Math.min(r,i.length-1)):r=0,i[r]}function XW(e,t,r){if(e.astNode!==r)return[];if(bm(e.grammarSource)&&e.grammarSource.value===t)return[e];let i=T7(e).iterator(),n,a=[];do if(n=i.next(),!n.done){let s=n.value;s.astNode===r?bm(s.grammarSource)&&s.grammarSource.value===t&&a.push(s):i.prune()}while(!n.done);return a}function Bme(e){var t;let r=e.astNode;for(;r===((t=e.container)===null||t===void 0?void 0:t.astNode);){let i=L7(e.grammarSource,xm);if(i)return i;e=e.container}}function KW(e){let t=e;return TW(t)&&(Fv(t.$container)?t=t.$container.$container:rc(t.$container)?t=t.$container:j_(t.$container)),Pme(e,t,new Map)}function Pme(e,t,r){var i;function n(a,s){let u;return L7(a,xm)||(u=Pme(s,s,r)),r.set(e,u),u}if(r.has(e))return r.get(e);r.set(e,void 0);for(let a of $v(t)){if(xm(a)&&a.feature.toLowerCase()==="name")return r.set(e,a),a;if(_m(a)&&rc(a.rule.ref))return n(a,a.rule.ref);if(CW(a)&&!((i=a.typeRef)===null||i===void 0)&&i.ref)return n(a,a.typeRef.ref)}}function Fme(e){let t=e.$container;if(H_(t)){let r=t.elements,i=r.indexOf(e);for(let n=i-1;n>=0;n--){let a=r[n];if(Fv(a))return a;{let s=$v(r[n]).find(Fv);if(s)return s}}}if(kW(t))return Fme(t)}function eWe(e,t){return e==="?"||e==="*"||H_(t)&&!!t.guardCondition}function tWe(e){return e==="*"||e==="+"}function rWe(e){return e==="+="}function DN(e){return $me(e,new Set)}function $me(e,t){if(t.has(e))return!0;t.add(e);for(let r of $v(e))if(_m(r)){if(!r.rule.ref||rc(r.rule.ref)&&!$me(r.rule.ref,t))return!1}else if(xm(r)||Fv(r))return!1;return!!e.definition}function iWe(e){return ZW(e.type,new Set)}function ZW(e,t){if(t.has(e))return!0;if(t.add(e),J1e(e)||ame(e))return!1;if(ome(e))return e.types.every(r=>ZW(r,t));if(CW(e)){if(e.primitiveType!==void 0||e.stringType!==void 0)return!0;if(e.typeRef!==void 0){let r=e.typeRef.ref;return UI(r)?ZW(r.type,t):!1}else return!1}else return!1}function QW(e){if(e.inferredType)return e.inferredType.name;if(e.dataType)return e.dataType;if(e.returnType){let t=e.returnType.ref;if(t&&(rc(t)||EW(t)||UI(t)))return t.name}}function F7(e){var t;if(rc(e))return DN(e)?e.name:(t=QW(e))!==null&&t!==void 0?t:e.name;if(EW(e)||UI(e)||sme(e))return e.name;if(Fv(e)){let r=zme(e);if(r)return r}else if(TW(e))return e.name;throw new Error("Cannot get name of Unknown Type")}function zme(e){var t;if(e.inferredType)return e.inferredType.name;if(!((t=e.type)===null||t===void 0)&&t.ref)return F7(e.type.ref)}function Gme(e){var t,r,i;return vm(e)?(r=(t=e.type)===null||t===void 0?void 0:t.name)!==null&&r!==void 0?r:"string":DN(e)?e.name:(i=QW(e))!==null&&i!==void 0?i:e.name}function IN(e){let t={s:!1,i:!1,u:!1},r=q_(e.definition,t),i=Object.entries(t).filter(([,n])=>n).map(([n])=>n).join("");return new RegExp(r,i)}function q_(e,t){if(dme(e))return nWe(e);if(pme(e))return aWe(e);if(lme(e))return lWe(e);if(AW(e)){let r=e.rule.ref;if(!r)throw new Error("Missing rule reference.");return Lf(q_(r.definition),{cardinality:e.cardinality,lookahead:e.lookahead})}else{if(hme(e))return oWe(e);if(fme(e))return sWe(e);if(cme(e)){let r=e.regex.lastIndexOf("/"),i=e.regex.substring(1,r),n=e.regex.substring(r+1);return t&&(t.i=n.includes("i"),t.s=n.includes("s"),t.u=n.includes("u")),Lf(i,{cardinality:e.cardinality,lookahead:e.lookahead,wrap:!1})}else{if(gme(e))return Lf(NN,{cardinality:e.cardinality,lookahead:e.lookahead});throw new Error(`Invalid terminal element: ${e?.$type}`)}}}function nWe(e){return Lf(e.elements.map(t=>q_(t)).join("|"),{cardinality:e.cardinality,lookahead:e.lookahead})}function aWe(e){return Lf(e.elements.map(t=>q_(t)).join(""),{cardinality:e.cardinality,lookahead:e.lookahead})}function sWe(e){return Lf(`${NN}*?${q_(e.terminal)}`,{cardinality:e.cardinality,lookahead:e.lookahead})}function oWe(e){return Lf(`(?!${q_(e.terminal)})${NN}*?`,{cardinality:e.cardinality,lookahead:e.lookahead})}function lWe(e){return e.right?Lf(`[${JW(e.left)}-${JW(e.right)}]`,{cardinality:e.cardinality,lookahead:e.lookahead,wrap:!1}):Lf(JW(e.left),{cardinality:e.cardinality,lookahead:e.lookahead,wrap:!1})}function JW(e){return B7(e.value)}function Lf(e,t){var r;return(t.wrap!==!1||t.lookahead)&&(e=`(${(r=t.lookahead)!==null&&r!==void 0?r:""}${e})`),t.cardinality?`${e}${t.cardinality}`:e}var NN,j0=D(()=>{wW(),Mf(),Nd(),mh(),U0(),P7(),NN=/[\s\S]/.source});function Ume(e){let t=[],r=e.Grammar;for(let i of r.rules)vm(i)&&Ime(i)&&Tme(IN(i))&&t.push(i.name);return{multilineCommentRules:t,nameRegexp:GI}}var jme=D(()=>{U0(),j0(),P7(),Mf()}),Hme=D(()=>{});function eY(e){console&&console.error&&console.error(`Error: ${e}`)}function Vme(e){console&&console.warn&&console.warn(`Warning: ${e}`)}var uWe=D(()=>{});function Wme(e){let t=new Date().getTime(),r=e();return{time:new Date().getTime()-t,value:r}}var hWe=D(()=>{});function Yme(e){function t(){}t.prototype=e;let r=new t;function i(){return typeof r.bar}return i(),i(),e}var cWe=D(()=>{}),$7=D(()=>{uWe(),hWe(),cWe()});function dWe(e){return pWe(e)?e.LABEL:e.name}function pWe(e){return hu(e.LABEL)&&e.LABEL!==""}function fWe(e){return fi(e,ON)}function ON(e){function t(r){return fi(r,ON)}if(e instanceof pu){let r={type:"NonTerminal",name:e.nonTerminalName,idx:e.idx};return hu(e.label)&&(r.label=e.label),r}else{if(e instanceof zu)return{type:"Alternative",definition:t(e.definition)};if(e instanceof Sl)return{type:"Option",idx:e.idx,definition:t(e.definition)};if(e instanceof yh)return{type:"RepetitionMandatory",idx:e.idx,definition:t(e.definition)};if(e instanceof vh)return{type:"RepetitionMandatoryWithSeparator",idx:e.idx,separator:ON(new As({terminalType:e.separator})),definition:t(e.definition)};if(e instanceof Gu)return{type:"RepetitionWithSeparator",idx:e.idx,separator:ON(new As({terminalType:e.separator})),definition:t(e.definition)};if(e instanceof to)return{type:"Repetition",idx:e.idx,definition:t(e.definition)};if(e instanceof Uu)return{type:"Alternation",idx:e.idx,definition:t(e.definition)};if(e instanceof As){let r={type:"Terminal",name:e.terminalType.name,label:dWe(e.terminalType),idx:e.idx};hu(e.label)&&(r.terminalLabel=e.label);let i=e.terminalType.PATTERN;return e.terminalType.PATTERN&&(r.pattern=F0(i)?i.source:i),r}else{if(e instanceof zv)return{type:"Rule",name:e.name,orgText:e.orgText,definition:t(e.definition)};throw Error("non exhaustive match")}}}var Bd,pu,zv,zu,Sl,yh,vh,to,Gu,Uu,As,tY=D(()=>{vn(),Bd=class{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){this._definition=e}accept(e){e.visit(this),Rt(this.definition,t=>{t.accept(e)})}},pu=class extends Bd{constructor(e){super([]),this.idx=1,ph(this,Fc(e,t=>t!==void 0))}set definition(e){}get definition(){return this.referencedRule!==void 0?this.referencedRule.definition:[]}accept(e){e.visit(this)}},zv=class extends Bd{constructor(e){super(e.definition),this.orgText="",ph(this,Fc(e,t=>t!==void 0))}},zu=class extends Bd{constructor(e){super(e.definition),this.ignoreAmbiguities=!1,ph(this,Fc(e,t=>t!==void 0))}},Sl=class extends Bd{constructor(e){super(e.definition),this.idx=1,ph(this,Fc(e,t=>t!==void 0))}},yh=class extends Bd{constructor(e){super(e.definition),this.idx=1,ph(this,Fc(e,t=>t!==void 0))}},vh=class extends Bd{constructor(e){super(e.definition),this.idx=1,ph(this,Fc(e,t=>t!==void 0))}},to=class extends Bd{constructor(e){super(e.definition),this.idx=1,ph(this,Fc(e,t=>t!==void 0))}},Gu=class extends Bd{constructor(e){super(e.definition),this.idx=1,ph(this,Fc(e,t=>t!==void 0))}},Uu=class extends Bd{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){super(e.definition),this.idx=1,this.ignoreAmbiguities=!1,this.hasPredicates=!1,ph(this,Fc(e,t=>t!==void 0))}},As=class{constructor(e){this.idx=1,ph(this,Fc(e,t=>t!==void 0))}accept(e){e.visit(this)}}}),Gv,gWe=D(()=>{tY(),Gv=class{visit(e){let t=e;switch(t.constructor){case pu:return this.visitNonTerminal(t);case zu:return this.visitAlternative(t);case Sl:return this.visitOption(t);case yh:return this.visitRepetitionMandatory(t);case vh:return this.visitRepetitionMandatoryWithSeparator(t);case Gu:return this.visitRepetitionWithSeparator(t);case to:return this.visitRepetition(t);case Uu:return this.visitAlternation(t);case As:return this.visitTerminal(t);case zv:return this.visitRule(t);default:throw Error("non exhaustive match")}}visitNonTerminal(e){}visitAlternative(e){}visitOption(e){}visitRepetition(e){}visitRepetitionMandatory(e){}visitRepetitionMandatoryWithSeparator(e){}visitRepetitionWithSeparator(e){}visitAlternation(e){}visitTerminal(e){}visitRule(e){}}});function mWe(e){return e instanceof zu||e instanceof Sl||e instanceof to||e instanceof yh||e instanceof vh||e instanceof Gu||e instanceof As||e instanceof zv}function BN(e,t=[]){return e instanceof Sl||e instanceof to||e instanceof Gu?!0:e instanceof Uu?yV(e.definition,r=>BN(r,t)):e instanceof pu&&cu(t,e)?!1:e instanceof Bd?(e instanceof pu&&t.push(e),Bc(e.definition,r=>BN(r,t))):!1}function yWe(e){return e instanceof Uu}function H0(e){if(e instanceof pu)return"SUBRULE";if(e instanceof Sl)return"OPTION";if(e instanceof Uu)return"OR";if(e instanceof yh)return"AT_LEAST_ONE";if(e instanceof vh)return"AT_LEAST_ONE_SEP";if(e instanceof Gu)return"MANY_SEP";if(e instanceof to)return"MANY";if(e instanceof As)return"CONSUME";throw Error("non exhaustive match")}var vWe=D(()=>{vn(),tY()}),xh=D(()=>{tY(),gWe(),vWe()});function qme(e,t,r){return[new Sl({definition:[new As({terminalType:e.separator})].concat(e.definition)})].concat(t,r)}var z7,rY=D(()=>{vn(),xh(),z7=class{walk(e,t=[]){Rt(e.definition,(r,i)=>{let n=El(e.definition,i+1);if(r instanceof pu)this.walkProdRef(r,n,t);else if(r instanceof As)this.walkTerminal(r,n,t);else if(r instanceof zu)this.walkFlat(r,n,t);else if(r instanceof Sl)this.walkOption(r,n,t);else if(r instanceof yh)this.walkAtLeastOne(r,n,t);else if(r instanceof vh)this.walkAtLeastOneSep(r,n,t);else if(r instanceof Gu)this.walkManySep(r,n,t);else if(r instanceof to)this.walkMany(r,n,t);else if(r instanceof Uu)this.walkOr(r,n,t);else throw Error("non exhaustive match")})}walkTerminal(e,t,r){}walkProdRef(e,t,r){}walkFlat(e,t,r){let i=t.concat(r);this.walk(e,i)}walkOption(e,t,r){let i=t.concat(r);this.walk(e,i)}walkAtLeastOne(e,t,r){let i=[new Sl({definition:e.definition})].concat(t,r);this.walk(e,i)}walkAtLeastOneSep(e,t,r){let i=qme(e,t,r);this.walk(e,i)}walkMany(e,t,r){let i=[new Sl({definition:e.definition})].concat(t,r);this.walk(e,i)}walkManySep(e,t,r){let i=qme(e,t,r);this.walk(e,i)}walkOr(e,t,r){let i=t.concat(r);Rt(e.definition,n=>{let a=new zu({definition:[n]});this.walk(a,i)})}}});function G7(e){if(e instanceof pu)return G7(e.referencedRule);if(e instanceof As)return _We(e);if(mWe(e))return xWe(e);if(yWe(e))return bWe(e);throw Error("non exhaustive match")}function xWe(e){let t=[],r=e.definition,i=0,n=r.length>i,a,s=!0;for(;n&&s;)a=r[i],s=BN(a),t=t.concat(G7(a)),i=i+1,n=r.length>i;return lI(t)}function bWe(e){let t=fi(e.definition,r=>G7(r));return lI(sl(t))}function _We(e){return[e.terminalType]}var Xme=D(()=>{vn(),xh()}),iY,Kme=D(()=>{iY="_~IN~_"});function wWe(e){let t={};return Rt(e,r=>{let i=new Zme(r).startWalking();ph(t,i)}),t}function kWe(e,t){return e.name+t+iY}var Zme,TWe=D(()=>{rY(),Xme(),vn(),Kme(),xh(),Zme=class extends z7{constructor(e){super(),this.topProd=e,this.follows={}}startWalking(){return this.walk(this.topProd),this.follows}walkTerminal(e,t,r){}walkProdRef(e,t,r){let i=kWe(e.referencedRule,e.idx)+this.topProd.name,n=t.concat(r),a=new zu({definition:n}),s=G7(a);this.follows[i]=s}}});function PN(e){let t=e.toString();if(U7.hasOwnProperty(t))return U7[t];{let r=Qme.pattern(t);return U7[t]=r,r}}function EWe(){U7={}}var U7,Qme,nY=D(()=>{RN(),U7={},Qme=new zW});function CWe(e,t=!1){try{let r=PN(e);return aY(r.value,{},r.flags.ignoreCase)}catch(r){if(r.message===lY)t&&Vme(`${j7}	Unable to optimize: < ${e.toString()} >
	Complement Sets cannot be automatically optimized.
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{let i="";t&&(i=`
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details.`),eY(`${j7}
	Failed parsing: < ${e.toString()} >
	Using the @chevrotain/regexp-to-ast library
	Please open an issue at: https://github.com/chevrotain/chevrotain/issues`+i)}}return[]}function aY(e,t,r){switch(e.type){case"Disjunction":for(let n=0;n<e.value.length;n++)aY(e.value[n],t,r);break;case"Alternative":let i=e.value;for(let n=0;n<i.length;n++){let a=i[n];switch(a.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}let s=a;switch(s.type){case"Character":FN(s.value,t,r);break;case"Set":if(s.complement===!0)throw Error(lY);Rt(s.value,h=>{if(typeof h=="number")FN(h,t,r);else{let d=h;if(r===!0)for(let p=d.from;p<=d.to;p++)FN(p,t,r);else{for(let p=d.from;p<=d.to&&p<K_;p++)FN(p,t,r);if(d.to>=K_){let p=d.from>=K_?d.from:K_,g=d.to,y=Tm(p),m=Tm(g);for(let x=y;x<=m;x++)t[x]=x}}}});break;case"Group":aY(s.value,t,r);break;default:throw Error("Non Exhaustive Match")}let u=s.quantifier!==void 0&&s.quantifier.atLeast===0;if(s.type==="Group"&&sY(s)===!1||s.type!=="Group"&&u===!1)break}break;default:throw Error("non exhaustive match!")}return ls(t)}function FN(e,t,r){let i=Tm(e);t[i]=i,r===!0&&SWe(e,t)}function SWe(e,t){let r=String.fromCharCode(e),i=r.toUpperCase();if(i!==r){let n=Tm(i.charCodeAt(0));t[n]=n}else{let n=r.toLowerCase();if(n!==r){let a=Tm(n.charCodeAt(0));t[a]=a}}}function Jme(e,t){return P0(e.value,r=>{if(typeof r=="number")return cu(t,r);{let i=r;return P0(t,n=>i.from<=n&&n<=i.to)!==void 0}})}function sY(e){let t=e.quantifier;return t&&t.atLeast===0?!0:e.value?va(e.value)?Bc(e.value,sY):sY(e.value):!1}function oY(e,t){if(t instanceof RegExp){let r=PN(t),i=new eye(e);return i.visit(r),i.found}else return P0(t,r=>cu(e,r.charCodeAt(0)))!==void 0}var lY,j7,eye,AWe=D(()=>{RN(),vn(),$7(),nY(),uye(),lY="Complement Sets are not supported for first char optimization",j7=`Unable to use "first char" lexer optimizations:
`,eye=class extends O7{constructor(e){super(),this.targetCharCodes=e,this.found=!1}visitChildren(e){if(this.found!==!0){switch(e.type){case"Lookahead":this.visitLookahead(e);return;case"NegativeLookahead":this.visitNegativeLookahead(e);return}super.visitChildren(e)}}visitCharacter(e){cu(this.targetCharCodes,e.value)&&(this.found=!0)}visitSet(e){e.complement?Jme(e,this.targetCharCodes)===void 0&&(this.found=!0):Jme(e,this.targetCharCodes)!==void 0&&(this.found=!0)}}});function MWe(e,t){t=e7(t,{useSticky:hY,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r",`
`],tracer:(C,A)=>A()});let r=t.tracer;r("initCharCodeToOptimizedIndexMap",()=>{XWe()});let i;r("Reject Lexer.NA",()=>{i=a7(e,C=>C[Em]===ju.NA)});let n=!1,a;r("Transform Patterns",()=>{n=!1,a=fi(i,C=>{let A=C[Em];if(F0(A)){let M=A.source;return M.length===1&&M!=="^"&&M!=="$"&&M!=="."&&!A.ignoreCase?M:M.length===2&&M[0]==="\\"&&!cu(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],M[1])?M[1]:t.useSticky?rye(A):tye(A)}else{if(Yh(A))return n=!0,{exec:A};if(typeof A=="object")return n=!0,A;if(typeof A=="string"){if(A.length===1)return A;{let M=A.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),N=new RegExp(M);return t.useSticky?rye(N):tye(N)}}else throw Error("non exhaustive match")}})});let s,u,h,d,p;r("misc mapping",()=>{s=fi(i,C=>C.tokenTypeIdx),u=fi(i,C=>{let A=C.GROUP;if(A!==ju.SKIPPED){if(hu(A))return A;if(qa(A))return!1;throw Error("non exhaustive match")}}),h=fi(i,C=>{let A=C.LONGER_ALT;if(A)return va(A)?fi(A,M=>nV(i,M)):[nV(i,A)]}),d=fi(i,C=>C.PUSH_MODE),p=fi(i,C=>Cn(C,"POP_MODE"))});let g;r("Line Terminator Handling",()=>{let C=aye(t.lineTerminatorCharacters);g=fi(i,A=>!1),t.positionTracking!=="onlyOffset"&&(g=fi(i,A=>Cn(A,"LINE_BREAKS")?!!A.LINE_BREAKS:nye(A,C)===!1&&oY(C,A.PATTERN)))});let y,m,x,_;r("Misc Mapping #2",()=>{y=fi(i,iye),m=fi(a,YWe),x=Co(i,(C,A)=>{let M=A.GROUP;return hu(M)&&M!==ju.SKIPPED&&(C[M]=[]),C},{}),_=fi(a,(C,A)=>({pattern:a[A],longerAlt:h[A],canLineTerminator:g[A],isCustom:y[A],short:m[A],group:u[A],push:d[A],pop:p[A],tokenTypeIdx:s[A],tokenType:i[A]}))});let E=!0,w=[];return t.safeMode||r("First Char Optimization",()=>{w=Co(i,(C,A,M)=>{if(typeof A.PATTERN=="string"){let N=A.PATTERN.charCodeAt(0),B=Tm(N);uY(C,B,_[M])}else if(va(A.START_CHARS_HINT)){let N;Rt(A.START_CHARS_HINT,B=>{let O=typeof B=="string"?B.charCodeAt(0):B,L=Tm(O);N!==L&&(N=L,uY(C,L,_[M]))})}else if(F0(A.PATTERN))if(A.PATTERN.unicode)E=!1,t.ensureOptimizations&&eY(`${j7}	Unable to analyze < ${A.PATTERN.toString()} > pattern.
	The regexp unicode flag is not currently supported by the regexp-to-ast library.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{let N=CWe(A.PATTERN,t.ensureOptimizations);Wa(N)&&(E=!1),Rt(N,B=>{uY(C,B,_[M])})}else t.ensureOptimizations&&eY(`${j7}	TokenType: <${A.name}> is using a custom token pattern without providing <start_chars_hint> parameter.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),E=!1;return C},[])}),{emptyGroups:x,patternIdxToConfig:_,charCodeToPatternIdxToConfig:w,hasCustom:n,canBeOptimized:E}}function LWe(e,t){let r=[],i=DWe(e);r=r.concat(i.errors);let n=IWe(i.valid),a=n.valid;return r=r.concat(n.errors),r=r.concat(RWe(a)),r=r.concat($We(a)),r=r.concat(zWe(a,t)),r=r.concat(GWe(a)),r}function RWe(e){let t=[],r=eo(e,i=>F0(i[Em]));return t=t.concat(NWe(r)),t=t.concat(BWe(r)),t=t.concat(PWe(r)),t=t.concat(FWe(r)),t=t.concat(OWe(r)),t}function DWe(e){let t=eo(e,n=>!Cn(n,Em)),r=fi(t,n=>({message:"Token Type: ->"+n.name+"<- missing static 'PATTERN' property",type:po.MISSING_PATTERN,tokenTypes:[n]})),i=t7(e,t);return{errors:r,valid:i}}function IWe(e){let t=eo(e,n=>{let a=n[Em];return!F0(a)&&!Yh(a)&&!Cn(a,"exec")&&!hu(a)}),r=fi(t,n=>({message:"Token Type: ->"+n.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:po.INVALID_PATTERN,tokenTypes:[n]})),i=t7(e,t);return{errors:r,valid:i}}function NWe(e){class t extends O7{constructor(){super(...arguments),this.found=!1}visitEndAnchor(n){this.found=!0}}let r=eo(e,i=>{let n=i.PATTERN;try{let a=PN(n),s=new t;return s.visit(a),s.found}catch{return sye.test(n.source)}});return fi(r,i=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+i.name+`<- static 'PATTERN' cannot contain end of input anchor '$'
	See chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:po.EOI_ANCHOR_FOUND,tokenTypes:[i]}))}function OWe(e){let t=eo(e,r=>r.PATTERN.test(""));return fi(t,r=>({message:"Token Type: ->"+r.name+"<- static 'PATTERN' must not match an empty string",type:po.EMPTY_MATCH_PATTERN,tokenTypes:[r]}))}function BWe(e){class t extends O7{constructor(){super(...arguments),this.found=!1}visitStartAnchor(n){this.found=!0}}let r=eo(e,i=>{let n=i.PATTERN;try{let a=PN(n),s=new t;return s.visit(a),s.found}catch{return oye.test(n.source)}});return fi(r,i=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+i.name+`<- static 'PATTERN' cannot contain start of input anchor '^'
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:po.SOI_ANCHOR_FOUND,tokenTypes:[i]}))}function PWe(e){let t=eo(e,r=>{let i=r[Em];return i instanceof RegExp&&(i.multiline||i.global)});return fi(t,r=>({message:"Token Type: ->"+r.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:po.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[r]}))}function FWe(e){let t=[],r=fi(e,n=>Co(e,(a,s)=>(n.PATTERN.source===s.PATTERN.source&&!cu(t,s)&&s.PATTERN!==ju.NA&&(t.push(s),a.push(s)),a),[]));r=R_(r);let i=eo(r,n=>n.length>1);return fi(i,n=>{let a=fi(n,s=>s.name);return{message:`The same RegExp pattern ->${Pc(n).PATTERN}<-has been used in all of the following Token Types: ${a.join(", ")} <-`,type:po.DUPLICATE_PATTERNS_FOUND,tokenTypes:n}})}function $We(e){let t=eo(e,r=>{if(!Cn(r,"GROUP"))return!1;let i=r.GROUP;return i!==ju.SKIPPED&&i!==ju.NA&&!hu(i)});return fi(t,r=>({message:"Token Type: ->"+r.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:po.INVALID_GROUP_TYPE_FOUND,tokenTypes:[r]}))}function zWe(e,t){let r=eo(e,i=>i.PUSH_MODE!==void 0&&!cu(t,i.PUSH_MODE));return fi(r,i=>({message:`Token Type: ->${i.name}<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->${i.PUSH_MODE}<-which does not exist`,type:po.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[i]}))}function GWe(e){let t=[],r=Co(e,(i,n,a)=>{let s=n.PATTERN;return s===ju.NA||(hu(s)?i.push({str:s,idx:a,tokenType:n}):F0(s)&&jWe(s)&&i.push({str:s.source,idx:a,tokenType:n})),i},[]);return Rt(e,(i,n)=>{Rt(r,({str:a,idx:s,tokenType:u})=>{if(n<s&&UWe(a,i.PATTERN)){let h=`Token: ->${u.name}<- can never be matched.
Because it appears AFTER the Token Type ->${i.name}<-in the lexer's definition.
See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;t.push({message:h,type:po.UNREACHABLE_PATTERN,tokenTypes:[i,u]})}})}),t}function UWe(e,t){if(F0(t)){let r=t.exec(e);return r!==null&&r.index===0}else{if(Yh(t))return t(e,0,[],{});if(Cn(t,"exec"))return t.exec(e,0,[],{});if(typeof t=="string")return t===e;throw Error("non exhaustive match")}}function jWe(e){return P0([".","\\","[","]","|","^","$","(",")","?","*","+","{"],t=>e.source.indexOf(t)!==-1)===void 0}function tye(e){let t=e.ignoreCase?"i":"";return new RegExp(`^(?:${e.source})`,t)}function rye(e){let t=e.ignoreCase?"iy":"y";return new RegExp(`${e.source}`,t)}function HWe(e,t,r){let i=[];return Cn(e,X_)||i.push({message:"A MultiMode Lexer cannot be initialized without a <"+X_+`> property in its definition
`,type:po.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),Cn(e,H7)||i.push({message:"A MultiMode Lexer cannot be initialized without a <"+H7+`> property in its definition
`,type:po.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),Cn(e,H7)&&Cn(e,X_)&&!Cn(e.modes,e.defaultMode)&&i.push({message:`A MultiMode Lexer cannot be initialized with a ${X_}: <${e.defaultMode}>which does not exist
`,type:po.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),Cn(e,H7)&&Rt(e.modes,(n,a)=>{Rt(n,(s,u)=>{if(qa(s))i.push({message:`A Lexer cannot be initialized using an undefined Token Type. Mode:<${a}> at index: <${u}>
`,type:po.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED});else if(Cn(s,"LONGER_ALT")){let h=va(s.LONGER_ALT)?s.LONGER_ALT:[s.LONGER_ALT];Rt(h,d=>{!qa(d)&&!cu(n,d)&&i.push({message:`A MultiMode Lexer cannot be initialized with a longer_alt <${d.name}> on token <${s.name}> outside of mode <${a}>
`,type:po.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE})})}})}),i}function VWe(e,t,r){let i=[],n=!1,a=R_(sl(ls(e.modes))),s=a7(a,h=>h[Em]===ju.NA),u=aye(r);return t&&Rt(s,h=>{let d=nye(h,u);if(d!==!1){let p={message:qWe(h,d),type:d.issue,tokenType:h};i.push(p)}else Cn(h,"LINE_BREAKS")?h.LINE_BREAKS===!0&&(n=!0):oY(u,h.PATTERN)&&(n=!0)}),t&&!n&&i.push({message:`Warning: No LINE_BREAKS Found.
	This Lexer has been defined to track line and column information,
	But none of the Token Types can be identified as matching a line terminator.
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS 
	for details.`,type:po.NO_LINE_BREAKS_FLAGS}),i}function WWe(e){let t={},r=Uo(e);return Rt(r,i=>{let n=e[i];if(va(n))t[i]=[];else throw Error("non exhaustive match")}),t}function iye(e){let t=e.PATTERN;if(F0(t))return!1;if(Yh(t)||Cn(t,"exec"))return!0;if(hu(t))return!1;throw Error("non exhaustive match")}function YWe(e){return hu(e)&&e.length===1?e.charCodeAt(0):!1}function nye(e,t){if(Cn(e,"LINE_BREAKS"))return!1;if(F0(e.PATTERN)){try{oY(t,e.PATTERN)}catch(r){return{issue:po.IDENTIFY_TERMINATOR,errMsg:r.message}}return!1}else{if(hu(e.PATTERN))return!1;if(iye(e))return{issue:po.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}}function qWe(e,t){if(t.issue===po.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.
	The problem is in the <${e.name}> Token Type
	 Root cause: ${t.errMsg}.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR`;if(t.issue===po.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.
	The problem is in the <${e.name}> Token Type
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK`;throw Error("non exhaustive match")}function aye(e){return fi(e,t=>hu(t)?t.charCodeAt(0):t)}function uY(e,t,r){e[t]===void 0?e[t]=[r]:e[t].push(r)}function Tm(e){return e<K_?e:V7[e]}function XWe(){if(Wa(V7)){V7=new Array(65536);for(let e=0;e<65536;e++)V7[e]=e>255?255+~~(e/255):e}}var Em,X_,H7,hY,sye,oye,lye,K_,V7,uye=D(()=>{RN(),zN(),vn(),$7(),AWe(),nY(),Em="PATTERN",X_="defaultMode",H7="modes",hY=typeof new RegExp("(?:)").sticky=="boolean",sye=/[^\\][$]/,oye=/[^\\[][\^]|^\^/,lye={test:function(e){let t=e.length;for(let r=this.lastIndex;r<t;r++){let i=e.charCodeAt(r);if(i===10)return this.lastIndex=r+1,!0;if(i===13)return e.charCodeAt(r+1)===10?this.lastIndex=r+2:this.lastIndex=r+1,!0}return!1},lastIndex:0},K_=256,V7=[]});function W7(e,t){let r=e.tokenTypeIdx;return r===t.tokenTypeIdx?!0:t.isParent===!0&&t.categoryMatchesMap[r]===!0}function $N(e,t){return e.tokenTypeIdx===t.tokenTypeIdx}function Y7(e){let t=KWe(e);ZWe(t),JWe(t),QWe(t),Rt(t,r=>{r.isParent=r.categoryMatches.length>0})}function KWe(e){let t=jo(e),r=e,i=!0;for(;i;){r=R_(sl(fi(r,a=>a.CATEGORIES)));let n=t7(r,t);t=t.concat(n),Wa(n)?i=!1:r=n}return t}function ZWe(e){Rt(e,t=>{cye(t)||(dY[cY]=t,t.tokenTypeIdx=cY++),dye(t)&&!va(t.CATEGORIES)&&(t.CATEGORIES=[t.CATEGORIES]),dye(t)||(t.CATEGORIES=[]),eYe(t)||(t.categoryMatches=[]),tYe(t)||(t.categoryMatchesMap={})})}function QWe(e){Rt(e,t=>{t.categoryMatches=[],Rt(t.categoryMatchesMap,(r,i)=>{t.categoryMatches.push(dY[i].tokenTypeIdx)})})}function JWe(e){Rt(e,t=>{hye([],t)})}function hye(e,t){Rt(e,r=>{t.categoryMatchesMap[r.tokenTypeIdx]=!0}),Rt(t.CATEGORIES,r=>{let i=e.concat(t);cu(i,r)||hye(i,r)})}function cye(e){return Cn(e,"tokenTypeIdx")}function dye(e){return Cn(e,"CATEGORIES")}function eYe(e){return Cn(e,"categoryMatches")}function tYe(e){return Cn(e,"categoryMatchesMap")}function rYe(e){return Cn(e,"tokenTypeIdx")}var cY,dY,Z_=D(()=>{vn(),cY=1,dY={}}),pye,fye=D(()=>{pye={buildUnableToPopLexerModeMessage(e){return`Unable to pop Lexer Mode after encountering Token ->${e.image}<- The Mode Stack is empty`},buildUnexpectedCharactersMessage(e,t,r,i,n){return`unexpected character: ->${e.charAt(t)}<- at offset: ${t}, skipped ${r} characters.`}}}),po,Q_,ju,zN=D(()=>{uye(),vn(),$7(),Z_(),fye(),nY(),function(e){e[e.MISSING_PATTERN=0]="MISSING_PATTERN",e[e.INVALID_PATTERN=1]="INVALID_PATTERN",e[e.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",e[e.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",e[e.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",e[e.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",e[e.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",e[e.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",e[e.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",e[e.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",e[e.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",e[e.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",e[e.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",e[e.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",e[e.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",e[e.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",e[e.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK",e[e.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE=17]="MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE"}(po||(po={})),Q_={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:[`
`,"\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:pye,traceInitPerf:!1,skipValidations:!1,recoveryEnabled:!0},Object.freeze(Q_),ju=class{constructor(e,t=Q_){if(this.lexerDefinition=e,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},this.TRACE_INIT=(i,n)=>{if(this.traceInitPerf===!0){this.traceInitIndent++;let a=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${a}--> <${i}>`);let{time:s,value:u}=Wme(n),h=s>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&h(`${a}<-- <${i}> time: ${s}ms`),this.traceInitIndent--,u}else return n()},typeof t=="boolean")throw Error(`The second argument to the Lexer constructor is now an ILexerConfig Object.
a boolean 2nd argument is no longer supported`);this.config=ph({},Q_,t);let r=this.config.traceInitPerf;r===!0?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):typeof r=="number"&&(this.traceInitMaxIdent=r,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",()=>{let i,n=!0;this.TRACE_INIT("Lexer Config handling",()=>{if(this.config.lineTerminatorsPattern===Q_.lineTerminatorsPattern)this.config.lineTerminatorsPattern=lye;else if(this.config.lineTerminatorCharacters===Q_.lineTerminatorCharacters)throw Error(`Error: Missing <lineTerminatorCharacters> property on the Lexer config.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS`);if(t.safeMode&&t.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');this.trackStartLines=/full|onlyStart/i.test(this.config.positionTracking),this.trackEndLines=/full/i.test(this.config.positionTracking),va(e)?i={modes:{defaultMode:jo(e)},defaultMode:X_}:(n=!1,i=jo(e))}),this.config.skipValidations===!1&&(this.TRACE_INIT("performRuntimeChecks",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(HWe(i,this.trackStartLines,this.config.lineTerminatorCharacters))}),this.TRACE_INIT("performWarningRuntimeChecks",()=>{this.lexerDefinitionWarning=this.lexerDefinitionWarning.concat(VWe(i,this.trackStartLines,this.config.lineTerminatorCharacters))})),i.modes=i.modes?i.modes:{},Rt(i.modes,(s,u)=>{i.modes[u]=a7(s,h=>qa(h))});let a=Uo(i.modes);if(Rt(i.modes,(s,u)=>{this.TRACE_INIT(`Mode: <${u}> processing`,()=>{if(this.modes.push(u),this.config.skipValidations===!1&&this.TRACE_INIT("validatePatterns",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(LWe(s,a))}),Wa(this.lexerDefinitionErrors)){Y7(s);let h;this.TRACE_INIT("analyzeTokenTypes",()=>{h=MWe(s,{lineTerminatorCharacters:this.config.lineTerminatorCharacters,positionTracking:t.positionTracking,ensureOptimizations:t.ensureOptimizations,safeMode:t.safeMode,tracer:this.TRACE_INIT})}),this.patternIdxToConfig[u]=h.patternIdxToConfig,this.charCodeToPatternIdxToConfig[u]=h.charCodeToPatternIdxToConfig,this.emptyGroups=ph({},this.emptyGroups,h.emptyGroups),this.hasCustom=h.hasCustom||this.hasCustom,this.canModeBeOptimized[u]=h.canBeOptimized}})}),this.defaultMode=i.defaultMode,!Wa(this.lexerDefinitionErrors)&&!this.config.deferDefinitionErrorsHandling){let s=fi(this.lexerDefinitionErrors,u=>u.message).join(`-----------------------
`);throw new Error(`Errors detected in definition of Lexer:
`+s)}Rt(this.lexerDefinitionWarning,s=>{Vme(s.message)}),this.TRACE_INIT("Choosing sub-methods implementations",()=>{if(hY?(this.chopInput=I0,this.match=this.matchWithTest):(this.updateLastIndex=Go,this.match=this.matchWithExec),n&&(this.handleModes=Go),this.trackStartLines===!1&&(this.computeNewColumn=I0),this.trackEndLines===!1&&(this.updateTokenEndLineColumnLocation=Go),/full/i.test(this.config.positionTracking))this.createTokenInstance=this.createFullToken;else if(/onlyStart/i.test(this.config.positionTracking))this.createTokenInstance=this.createStartOnlyToken;else if(/onlyOffset/i.test(this.config.positionTracking))this.createTokenInstance=this.createOffsetOnlyToken;else throw Error(`Invalid <positionTracking> config option: "${this.config.positionTracking}"`);this.hasCustom?(this.addToken=this.addTokenUsingPush,this.handlePayload=this.handlePayloadWithCustom):(this.addToken=this.addTokenUsingMemberAccess,this.handlePayload=this.handlePayloadNoCustom)}),this.TRACE_INIT("Failed Optimization Warnings",()=>{let s=Co(this.canModeBeOptimized,(u,h,d)=>(h===!1&&u.push(d),u),[]);if(t.ensureOptimizations&&!Wa(s))throw Error(`Lexer Modes: < ${s.join(", ")} > cannot be optimized.
	 Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.
	 Or inspect the console log for details on how to resolve these issues.`)}),this.TRACE_INIT("clearRegExpParserCache",()=>{EWe()}),this.TRACE_INIT("toFastProperties",()=>{Yme(this)})})}tokenize(e,t=this.defaultMode){if(!Wa(this.lexerDefinitionErrors)){let r=fi(this.lexerDefinitionErrors,i=>i.message).join(`-----------------------
`);throw new Error(`Unable to Tokenize because Errors detected in definition of Lexer:
`+r)}return this.tokenizeInternal(e,t)}tokenizeInternal(e,t){let r,i,n,a,s,u,h,d,p,g,y,m,x,_,E,w,C=e,A=C.length,M=0,N=0,B=this.hasCustom?0:Math.floor(e.length/10),O=new Array(B),L=[],$=this.trackStartLines?1:void 0,G=this.trackStartLines?1:void 0,z=WWe(this.emptyGroups),F=this.trackStartLines,X=this.config.lineTerminatorsPattern,I=0,j=[],H=[],V=[],P=[];Object.freeze(P);let q;function Z(){return j}function J(xe){let Ae=Tm(xe),oe=H[Ae];return oe===void 0?P:oe}let ae=xe=>{if(V.length===1&&xe.tokenType.PUSH_MODE===void 0){let Ae=this.config.errorMessageProvider.buildUnableToPopLexerModeMessage(xe);L.push({offset:xe.startOffset,line:xe.startLine,column:xe.startColumn,length:xe.image.length,message:Ae})}else{V.pop();let Ae=Rd(V);j=this.patternIdxToConfig[Ae],H=this.charCodeToPatternIdxToConfig[Ae],I=j.length;let oe=this.canModeBeOptimized[Ae]&&this.config.safeMode===!1;H&&oe?q=J:q=Z}};function ue(xe){V.push(xe),H=this.charCodeToPatternIdxToConfig[xe],j=this.patternIdxToConfig[xe],I=j.length,I=j.length;let Ae=this.canModeBeOptimized[xe]&&this.config.safeMode===!1;H&&Ae?q=J:q=Z}ue.call(this,t);let be,Le=this.config.recoveryEnabled;for(;M<A;){u=null;let xe=C.charCodeAt(M),Ae=q(xe),oe=Ae.length;for(r=0;r<oe;r++){be=Ae[r];let he=be.pattern;h=null;let le=be.short;if(le!==!1?xe===le&&(u=he):be.isCustom===!0?(w=he.exec(C,M,O,z),w!==null?(u=w[0],w.payload!==void 0&&(h=w.payload)):u=null):(this.updateLastIndex(he,M),u=this.match(he,e,M)),u!==null){if(s=be.longerAlt,s!==void 0){let ke=s.length;for(n=0;n<ke;n++){let pe=j[s[n]],qe=pe.pattern;if(d=null,pe.isCustom===!0?(w=qe.exec(C,M,O,z),w!==null?(a=w[0],w.payload!==void 0&&(d=w.payload)):a=null):(this.updateLastIndex(qe,M),a=this.match(qe,e,M)),a&&a.length>u.length){u=a,h=d,be=pe;break}}}break}}if(u!==null){if(p=u.length,g=be.group,g!==void 0&&(y=be.tokenTypeIdx,m=this.createTokenInstance(u,M,y,be.tokenType,$,G,p),this.handlePayload(m,h),g===!1?N=this.addToken(O,N,m):z[g].push(m)),e=this.chopInput(e,p),M=M+p,G=this.computeNewColumn(G,p),F===!0&&be.canLineTerminator===!0){let he=0,le,ke;X.lastIndex=0;do le=X.test(u),le===!0&&(ke=X.lastIndex-1,he++);while(le===!0);he!==0&&($=$+he,G=p-ke,this.updateTokenEndLineColumnLocation(m,g,ke,he,$,G,p))}this.handleModes(be,ae,ue,m)}else{let he=M,le=$,ke=G,pe=Le===!1;for(;pe===!1&&M<A;)for(e=this.chopInput(e,1),M++,i=0;i<I;i++){let qe=j[i],me=qe.pattern,st=qe.short;if(st!==!1?C.charCodeAt(M)===st&&(pe=!0):qe.isCustom===!0?pe=me.exec(C,M,O,z)!==null:(this.updateLastIndex(me,M),pe=me.exec(e)!==null),pe===!0)break}if(x=M-he,G=this.computeNewColumn(G,x),E=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(C,he,x,le,ke),L.push({offset:he,line:le,column:ke,length:x,message:E}),Le===!1)break}}return this.hasCustom||(O.length=N),{tokens:O,groups:z,errors:L}}handleModes(e,t,r,i){if(e.pop===!0){let n=e.push;t(i),n!==void 0&&r.call(this,n)}else e.push!==void 0&&r.call(this,e.push)}chopInput(e,t){return e.substring(t)}updateLastIndex(e,t){e.lastIndex=t}updateTokenEndLineColumnLocation(e,t,r,i,n,a,s){let u,h;t!==void 0&&(u=r===s-1,h=u?-1:0,i===1&&u===!0||(e.endLine=n+h,e.endColumn=a-1+-h))}computeNewColumn(e,t){return e+t}createOffsetOnlyToken(e,t,r,i){return{image:e,startOffset:t,tokenTypeIdx:r,tokenType:i}}createStartOnlyToken(e,t,r,i,n,a){return{image:e,startOffset:t,startLine:n,startColumn:a,tokenTypeIdx:r,tokenType:i}}createFullToken(e,t,r,i,n,a,s){return{image:e,startOffset:t,endOffset:t+s-1,startLine:n,endLine:n,startColumn:a,endColumn:a+s-1,tokenTypeIdx:r,tokenType:i}}addTokenUsingPush(e,t,r){return e.push(r),t}addTokenUsingMemberAccess(e,t,r){return e[t]=r,t++,t}handlePayloadNoCustom(e,t){}handlePayloadWithCustom(e,t){t!==null&&(e.payload=t)}matchWithTest(e,t,r){return e.test(t)===!0?t.substring(r,e.lastIndex):null}matchWithExec(e,t){let r=e.exec(t);return r!==null?r[0]:null}},ju.SKIPPED="This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.",ju.NA=/NOT_APPLICABLE/});function J_(e){return gye(e)?e.LABEL:e.name}function gye(e){return hu(e.LABEL)&&e.LABEL!==""}function mye(e){return iYe(e)}function iYe(e){let t=e.pattern,r={};if(r.name=e.name,qa(t)||(r.PATTERN=t),Cn(e,vye))throw`The parent property is no longer supported.
See: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.`;return Cn(e,fY)&&(r.CATEGORIES=e[fY]),Y7([r]),Cn(e,gY)&&(r.LABEL=e[gY]),Cn(e,mY)&&(r.GROUP=e[mY]),Cn(e,vY)&&(r.POP_MODE=e[vY]),Cn(e,yY)&&(r.PUSH_MODE=e[yY]),Cn(e,xY)&&(r.LONGER_ALT=e[xY]),Cn(e,bY)&&(r.LINE_BREAKS=e[bY]),Cn(e,_Y)&&(r.START_CHARS_HINT=e[_Y]),r}function pY(e,t,r,i,n,a,s,u){return{image:t,startOffset:r,endOffset:i,startLine:n,endLine:a,startColumn:s,endColumn:u,tokenTypeIdx:e.tokenTypeIdx,tokenType:e}}function yye(e,t){return W7(e,t)}var vye,fY,gY,mY,yY,vY,xY,bY,_Y,Rf,e5=D(()=>{vn(),zN(),Z_(),vye="parent",fY="categories",gY="label",mY="group",yY="push_mode",vY="pop_mode",xY="longer_alt",bY="line_breaks",_Y="start_chars_hint",Rf=mye({name:"EOF",pattern:ju.NA}),Y7([Rf])}),Uv,xye,Cm,q7=D(()=>{e5(),vn(),xh(),Uv={buildMismatchTokenMessage({expected:e,actual:t,previous:r,ruleName:i}){return`Expecting ${gye(e)?`--> ${J_(e)} <--`:`token of type --> ${e.name} <--`} but found --> '${t.image}' <--`},buildNotAllInputParsedMessage({firstRedundant:e,ruleName:t}){return"Redundant input, expecting EOF but found: "+e.image},buildNoViableAltMessage({expectedPathsPerAlt:e,actual:t,previous:r,customUserDescription:i,ruleName:n}){let a="Expecting: ",s=`
but found: '`+Pc(t).image+"'";if(i)return a+i+s;{let u=Co(e,(p,g)=>p.concat(g),[]),h=fi(u,p=>`[${fi(p,g=>J_(g)).join(", ")}]`),d=`one of these possible Token sequences:
${fi(h,(p,g)=>`  ${g+1}. ${p}`).join(`
`)}`;return a+d+s}},buildEarlyExitMessage({expectedIterationPaths:e,actual:t,customUserDescription:r,ruleName:i}){let n="Expecting: ",a=`
but found: '`+Pc(t).image+"'";if(r)return n+r+a;{let s=`expecting at least one iteration which starts with one of these possible Token sequences::
  <${fi(e,u=>`[${fi(u,h=>J_(h)).join(",")}]`).join(" ,")}>`;return n+s+a}}},Object.freeze(Uv),xye={buildRuleNotFoundError(e,t){return"Invalid grammar, reference to a rule which is not defined: ->"+t.nonTerminalName+`<-
inside top level rule: ->`+e.name+"<-"}},Cm={buildDuplicateFoundError(e,t){function r(p){return p instanceof As?p.terminalType.name:p instanceof pu?p.nonTerminalName:""}let i=e.name,n=Pc(t),a=n.idx,s=H0(n),u=r(n),h=a>0,d=`->${s}${h?a:""}<- ${u?`with argument: ->${u}<-`:""}
                  appears more than once (${t.length} times) in the top level rule: ->${i}<-.                  
                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES 
                  `;return d=d.replace(/[ \t]+/g," "),d=d.replace(/\s\s+/g,`
`),d},buildNamespaceConflictError(e){return`Namespace conflict found in grammar.
The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <${e.name}>.
To resolve this make sure each Terminal and Non-Terminal names are unique
This is easy to accomplish by using the convention that Terminal names start with an uppercase letter
and Non-Terminal names start with a lower case letter.`},buildAlternationPrefixAmbiguityError(e){let t=fi(e.prefixPath,i=>J_(i)).join(", "),r=e.alternation.idx===0?"":e.alternation.idx;return`Ambiguous alternatives: <${e.ambiguityIndices.join(" ,")}> due to common lookahead prefix
in <OR${r}> inside <${e.topLevelRule.name}> Rule,
<${t}> may appears as a prefix path in all these alternatives.
See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX
For Further details.`},buildAlternationAmbiguityError(e){let t=fi(e.prefixPath,n=>J_(n)).join(", "),r=e.alternation.idx===0?"":e.alternation.idx,i=`Ambiguous Alternatives Detected: <${e.ambiguityIndices.join(" ,")}> in <OR${r}> inside <${e.topLevelRule.name}> Rule,
<${t}> may appears as a prefix path in all these alternatives.
`;return i=i+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,i},buildEmptyRepetitionError(e){let t=H0(e.repetition);return e.repetition.idx!==0&&(t+=e.repetition.idx),`The repetition <${t}> within Rule <${e.topLevelRule.name}> can never consume any tokens.
This could lead to an infinite loop.`},buildTokenNameError(e){return"deprecated"},buildEmptyAlternationError(e){return`Ambiguous empty alternative: <${e.emptyChoiceIdx+1}> in <OR${e.alternation.idx}> inside <${e.topLevelRule.name}> Rule.
Only the last alternative may be an empty alternative.`},buildTooManyAlternativesError(e){return`An Alternation cannot have more than 256 alternatives:
<OR${e.alternation.idx}> inside <${e.topLevelRule.name}> Rule.
 has ${e.alternation.definition.length+1} alternatives.`},buildLeftRecursionError(e){let t=e.topLevelRule.name,r=fi(e.leftRecursionPath,n=>n.name),i=`${t} --> ${r.concat([t]).join(" --> ")}`;return`Left Recursion found in grammar.
rule: <${t}> can be invoked from itself (directly or indirectly)
without consuming any Tokens. The grammar path that causes this is: 
 ${i}
 To fix this refactor your grammar to remove the left recursion.
see: https://en.wikipedia.org/wiki/LL_parser#Left_factoring.`},buildInvalidRuleNameError(e){return"deprecated"},buildDuplicateRuleNameError(e){let t;return e.topLevelRule instanceof zv?t=e.topLevelRule.name:t=e.topLevelRule,`Duplicate definition, rule: ->${t}<- is already defined in the grammar: ->${e.grammarName}<-`}}});function nYe(e,t){let r=new bye(e,t);return r.resolveRefs(),r.errors}var bye,aYe=D(()=>{ic(),vn(),xh(),bye=class extends Gv{constructor(e,t){super(),this.nameToTopRule=e,this.errMsgProvider=t,this.errors=[]}resolveRefs(){Rt(ls(this.nameToTopRule),e=>{this.currTopLevel=e,e.accept(this)})}visitNonTerminal(e){let t=this.nameToTopRule[e.nonTerminalName];if(t)e.referencedRule=t;else{let r=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,e);this.errors.push({message:r,type:Hu.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:e.nonTerminalName})}}}});function wY(e,t,r=[]){r=jo(r);let i=[],n=0;function a(u){return u.concat(El(e,n+1))}function s(u){let h=wY(a(u),t,r);return i.concat(h)}for(;r.length<t&&n<e.length;){let u=e[n];if(u instanceof zu||u instanceof pu)return s(u.definition);if(u instanceof Sl)i=s(u.definition);else if(u instanceof yh){let h=u.definition.concat([new to({definition:u.definition})]);return s(h)}else if(u instanceof vh){let h=[new zu({definition:u.definition}),new to({definition:[new As({terminalType:u.separator})].concat(u.definition)})];return s(h)}else if(u instanceof Gu){let h=u.definition.concat([new to({definition:[new As({terminalType:u.separator})].concat(u.definition)})]);i=s(h)}else if(u instanceof to){let h=u.definition.concat([new to({definition:u.definition})]);i=s(h)}else{if(u instanceof Uu)return Rt(u.definition,h=>{Wa(h.definition)===!1&&(i=s(h.definition))}),i;if(u instanceof As)r.push(u.terminalType);else throw Error("non exhaustive match")}n++}return i.push({partialPath:r,suffixDef:El(e,n)}),i}function _ye(e,t,r,i){let n="EXIT_NONE_TERMINAL",a=[n],s="EXIT_ALTERNATIVE",u=!1,h=t.length,d=h-i-1,p=[],g=[];for(g.push({idx:-1,def:e,ruleStack:[],occurrenceStack:[]});!Wa(g);){let y=g.pop();if(y===s){u&&Rd(g).idx<=d&&g.pop();continue}let m=y.def,x=y.idx,_=y.ruleStack,E=y.occurrenceStack;if(Wa(m))continue;let w=m[0];if(w===n){let C={idx:x,def:El(m),ruleStack:D_(_),occurrenceStack:D_(E)};g.push(C)}else if(w instanceof As)if(x<h-1){let C=x+1,A=t[C];if(r(A,w.terminalType)){let M={idx:C,def:El(m),ruleStack:_,occurrenceStack:E};g.push(M)}}else if(x===h-1)p.push({nextTokenType:w.terminalType,nextTokenOccurrence:w.idx,ruleStack:_,occurrenceStack:E}),u=!0;else throw Error("non exhaustive match");else if(w instanceof pu){let C=jo(_);C.push(w.nonTerminalName);let A=jo(E);A.push(w.idx);let M={idx:x,def:w.definition.concat(a,El(m)),ruleStack:C,occurrenceStack:A};g.push(M)}else if(w instanceof Sl){let C={idx:x,def:El(m),ruleStack:_,occurrenceStack:E};g.push(C),g.push(s);let A={idx:x,def:w.definition.concat(El(m)),ruleStack:_,occurrenceStack:E};g.push(A)}else if(w instanceof yh){let C=new to({definition:w.definition,idx:w.idx}),A=w.definition.concat([C],El(m)),M={idx:x,def:A,ruleStack:_,occurrenceStack:E};g.push(M)}else if(w instanceof vh){let C=new As({terminalType:w.separator}),A=new to({definition:[C].concat(w.definition),idx:w.idx}),M=w.definition.concat([A],El(m)),N={idx:x,def:M,ruleStack:_,occurrenceStack:E};g.push(N)}else if(w instanceof Gu){let C={idx:x,def:El(m),ruleStack:_,occurrenceStack:E};g.push(C),g.push(s);let A=new As({terminalType:w.separator}),M=new to({definition:[A].concat(w.definition),idx:w.idx}),N=w.definition.concat([M],El(m)),B={idx:x,def:N,ruleStack:_,occurrenceStack:E};g.push(B)}else if(w instanceof to){let C={idx:x,def:El(m),ruleStack:_,occurrenceStack:E};g.push(C),g.push(s);let A=new to({definition:w.definition,idx:w.idx}),M=w.definition.concat([A],El(m)),N={idx:x,def:M,ruleStack:_,occurrenceStack:E};g.push(N)}else if(w instanceof Uu)for(let C=w.definition.length-1;C>=0;C--){let A=w.definition[C],M={idx:x,def:A.definition.concat(El(m)),ruleStack:_,occurrenceStack:E};g.push(M),g.push(s)}else if(w instanceof zu)g.push({idx:x,def:w.definition.concat(El(m)),ruleStack:_,occurrenceStack:E});else if(w instanceof zv)g.push(sYe(w,x,_,E));else throw Error("non exhaustive match")}return p}function sYe(e,t,r,i){let n=jo(r);n.push(e.name);let a=jo(i);return a.push(1),{idx:t,def:e.definition,ruleStack:n,occurrenceStack:a}}var wye,kye,X7,Tye,kY,Eye,TY,GN=D(()=>{vn(),Xme(),rY(),xh(),wye=class extends z7{constructor(e,t){super(),this.topProd=e,this.path=t,this.possibleTokTypes=[],this.nextProductionName="",this.nextProductionOccurrence=0,this.found=!1,this.isAtEndOfPath=!1}startWalking(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=jo(this.path.ruleStack).reverse(),this.occurrenceStack=jo(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes}walk(e,t=[]){this.found||super.walk(e,t)}walkProdRef(e,t,r){if(e.referencedRule.name===this.nextProductionName&&e.idx===this.nextProductionOccurrence){let i=t.concat(r);this.updateExpectedNext(),this.walk(e.referencedRule,i)}}updateExpectedNext(){Wa(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())}},kye=class extends wye{constructor(e,t){super(e,t),this.path=t,this.nextTerminalName="",this.nextTerminalOccurrence=0,this.nextTerminalName=this.path.lastTok.name,this.nextTerminalOccurrence=this.path.lastTokOccurrence}walkTerminal(e,t,r){if(this.isAtEndOfPath&&e.terminalType.name===this.nextTerminalName&&e.idx===this.nextTerminalOccurrence&&!this.found){let i=t.concat(r),n=new zu({definition:i});this.possibleTokTypes=G7(n),this.found=!0}}},X7=class extends z7{constructor(e,t){super(),this.topRule=e,this.occurrence=t,this.result={token:void 0,occurrence:void 0,isEndOfRule:void 0}}startWalking(){return this.walk(this.topRule),this.result}},Tye=class extends X7{walkMany(e,t,r){if(e.idx===this.occurrence){let i=Pc(t.concat(r));this.result.isEndOfRule=i===void 0,i instanceof As&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkMany(e,t,r)}},kY=class extends X7{walkManySep(e,t,r){if(e.idx===this.occurrence){let i=Pc(t.concat(r));this.result.isEndOfRule=i===void 0,i instanceof As&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkManySep(e,t,r)}},Eye=class extends X7{walkAtLeastOne(e,t,r){if(e.idx===this.occurrence){let i=Pc(t.concat(r));this.result.isEndOfRule=i===void 0,i instanceof As&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkAtLeastOne(e,t,r)}},TY=class extends X7{walkAtLeastOneSep(e,t,r){if(e.idx===this.occurrence){let i=Pc(t.concat(r));this.result.isEndOfRule=i===void 0,i instanceof As&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkAtLeastOneSep(e,t,r)}}});function EY(e){if(e instanceof Sl||e==="Option")return ro.OPTION;if(e instanceof to||e==="Repetition")return ro.REPETITION;if(e instanceof yh||e==="RepetitionMandatory")return ro.REPETITION_MANDATORY;if(e instanceof vh||e==="RepetitionMandatoryWithSeparator")return ro.REPETITION_MANDATORY_WITH_SEPARATOR;if(e instanceof Gu||e==="RepetitionWithSeparator")return ro.REPETITION_WITH_SEPARATOR;if(e instanceof Uu||e==="Alternation")return ro.ALTERNATION;throw Error("non exhaustive match")}function Cye(e){let{occurrence:t,rule:r,prodType:i,maxLookahead:n}=e,a=EY(i);return a===ro.ALTERNATION?UN(t,r,n):jN(t,r,a,n)}function oYe(e,t,r,i,n,a){let s=UN(e,t,r),u=Mye(s)?$N:W7;return a(s,i,u,n)}function lYe(e,t,r,i,n,a){let s=jN(e,t,n,r),u=Mye(s)?$N:W7;return a(s[0],u,i)}function uYe(e,t,r,i){let n=e.length,a=Bc(e,s=>Bc(s,u=>u.length===1));if(t)return function(s){let u=fi(s,h=>h.GATE);for(let h=0;h<n;h++){let d=e[h],p=d.length,g=u[h];if(!(g!==void 0&&g.call(this)===!1))e:for(let y=0;y<p;y++){let m=d[y],x=m.length;for(let _=0;_<x;_++){let E=this.LA(_+1);if(r(E,m[_])===!1)continue e}return h}}};if(a&&!i){let s=fi(e,h=>sl(h)),u=Co(s,(h,d,p)=>(Rt(d,g=>{Cn(h,g.tokenTypeIdx)||(h[g.tokenTypeIdx]=p),Rt(g.categoryMatches,y=>{Cn(h,y)||(h[y]=p)})}),h),{});return function(){let h=this.LA(1);return u[h.tokenTypeIdx]}}else return function(){for(let s=0;s<n;s++){let u=e[s],h=u.length;e:for(let d=0;d<h;d++){let p=u[d],g=p.length;for(let y=0;y<g;y++){let m=this.LA(y+1);if(r(m,p[y])===!1)continue e}return s}}}}function hYe(e,t,r){let i=Bc(e,a=>a.length===1),n=e.length;if(i&&!r){let a=sl(e);if(a.length===1&&Wa(a[0].categoryMatches)){let s=a[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===s}}else{let s=Co(a,(u,h,d)=>(u[h.tokenTypeIdx]=!0,Rt(h.categoryMatches,p=>{u[p]=!0}),u),[]);return function(){let u=this.LA(1);return s[u.tokenTypeIdx]===!0}}}else return function(){e:for(let a=0;a<n;a++){let s=e[a],u=s.length;for(let h=0;h<u;h++){let d=this.LA(h+1);if(t(d,s[h])===!1)continue e}return!0}return!1}}function Sye(e){let t=new Array(e);for(let r=0;r<e;r++)t[r]=[];return t}function CY(e){let t=[""];for(let r=0;r<e.length;r++){let i=e[r],n=[];for(let a=0;a<t.length;a++){let s=t[a];n.push(s+"_"+i.tokenTypeIdx);for(let u=0;u<i.categoryMatches.length;u++){let h="_"+i.categoryMatches[u];n.push(s+h)}}t=n}return t}function cYe(e,t,r){for(let i=0;i<e.length;i++){if(i===r)continue;let n=e[i];for(let a=0;a<t.length;a++){let s=t[a];if(n[s]===!0)return!1}}return!0}function Aye(e,t){let r=fi(e,s=>wY([s],1)),i=Sye(r.length),n=fi(r,s=>{let u={};return Rt(s,h=>{let d=CY(h.partialPath);Rt(d,p=>{u[p]=!0})}),u}),a=r;for(let s=1;s<=t;s++){let u=a;a=Sye(u.length);for(let h=0;h<u.length;h++){let d=u[h];for(let p=0;p<d.length;p++){let g=d[p].partialPath,y=d[p].suffixDef,m=CY(g);if(cYe(n,m,h)||Wa(y)||g.length===t){let x=i[h];if(SY(x,g)===!1){x.push(g);for(let _=0;_<m.length;_++){let E=m[_];n[h][E]=!0}}}else{let x=wY(y,s+1,g);a[h]=a[h].concat(x),Rt(x,_=>{let E=CY(_.partialPath);Rt(E,w=>{n[h][w]=!0})})}}}}return i}function UN(e,t,r,i){let n=new AY(e,ro.ALTERNATION,i);return t.accept(n),Aye(n.result,r)}function jN(e,t,r,i){let n=new AY(e,r);t.accept(n);let a=n.result,s=new Lye(t,e,r).startWalking(),u=new zu({definition:a}),h=new zu({definition:s});return Aye([u,h],i)}function SY(e,t){e:for(let r=0;r<e.length;r++){let i=e[r];if(i.length===t.length){for(let n=0;n<i.length;n++){let a=t[n],s=i[n];if(!(a===s||s.categoryMatchesMap[a.tokenTypeIdx]!==void 0))continue e}return!0}}return!1}function dYe(e,t){return e.length<t.length&&Bc(e,(r,i)=>{let n=t[i];return r===n||n.categoryMatchesMap[r.tokenTypeIdx]})}function Mye(e){return Bc(e,t=>Bc(t,r=>Bc(r,i=>Wa(i.categoryMatches))))}var ro,Lye,AY,K7=D(()=>{vn(),GN(),rY(),Z_(),xh(),function(e){e[e.OPTION=0]="OPTION",e[e.REPETITION=1]="REPETITION",e[e.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",e[e.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",e[e.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",e[e.ALTERNATION=5]="ALTERNATION"}(ro||(ro={})),Lye=class extends z7{constructor(e,t,r){super(),this.topProd=e,this.targetOccurrence=t,this.targetProdType=r}startWalking(){return this.walk(this.topProd),this.restDef}checkIsTarget(e,t,r,i){return e.idx===this.targetOccurrence&&this.targetProdType===t?(this.restDef=r.concat(i),!0):!1}walkOption(e,t,r){this.checkIsTarget(e,ro.OPTION,t,r)||super.walkOption(e,t,r)}walkAtLeastOne(e,t,r){this.checkIsTarget(e,ro.REPETITION_MANDATORY,t,r)||super.walkOption(e,t,r)}walkAtLeastOneSep(e,t,r){this.checkIsTarget(e,ro.REPETITION_MANDATORY_WITH_SEPARATOR,t,r)||super.walkOption(e,t,r)}walkMany(e,t,r){this.checkIsTarget(e,ro.REPETITION,t,r)||super.walkOption(e,t,r)}walkManySep(e,t,r){this.checkIsTarget(e,ro.REPETITION_WITH_SEPARATOR,t,r)||super.walkOption(e,t,r)}},AY=class extends Gv{constructor(e,t,r){super(),this.targetOccurrence=e,this.targetProdType=t,this.targetRef=r,this.result=[]}checkIsTarget(e,t){e.idx===this.targetOccurrence&&this.targetProdType===t&&(this.targetRef===void 0||e===this.targetRef)&&(this.result=e.definition)}visitOption(e){this.checkIsTarget(e,ro.OPTION)}visitRepetition(e){this.checkIsTarget(e,ro.REPETITION)}visitRepetitionMandatory(e){this.checkIsTarget(e,ro.REPETITION_MANDATORY)}visitRepetitionMandatoryWithSeparator(e){this.checkIsTarget(e,ro.REPETITION_MANDATORY_WITH_SEPARATOR)}visitRepetitionWithSeparator(e){this.checkIsTarget(e,ro.REPETITION_WITH_SEPARATOR)}visitAlternation(e){this.checkIsTarget(e,ro.ALTERNATION)}}});function pYe(e){let t=e.lookaheadStrategy.validate({rules:e.rules,tokenTypes:e.tokenTypes,grammarName:e.grammarName});return fi(t,r=>Object.assign({type:Hu.CUSTOM_LOOKAHEAD_VALIDATION},r))}function fYe(e,t,r,i){let n=gh(e,h=>gYe(h,r)),a=EYe(e,t,r),s=gh(e,h=>_Ye(h,r)),u=gh(e,h=>yYe(h,e,i,r));return n.concat(a,s,u)}function gYe(e,t){let r=new Iye;e.accept(r);let i=r.allProductions,n=a0e(i,mYe),a=Fc(n,s=>s.length>1);return fi(ls(a),s=>{let u=Pc(s),h=t.buildDuplicateFoundError(e,s),d=H0(u),p={message:h,type:Hu.DUPLICATE_PRODUCTIONS,ruleName:e.name,dslName:d,occurrence:u.idx},g=Rye(u);return g&&(p.parameter=g),p})}function mYe(e){return`${H0(e)}_#_${e.idx}_#_${Rye(e)}`}function Rye(e){return e instanceof As?e.terminalType.name:e instanceof pu?e.nonTerminalName:""}function yYe(e,t,r,i){let n=[];if(Co(t,(a,s)=>s.name===e.name?a+1:a,0)>1){let a=i.buildDuplicateRuleNameError({topLevelRule:e,grammarName:r});n.push({message:a,type:Hu.DUPLICATE_RULE_NAME,ruleName:e.name})}return n}function vYe(e,t,r){let i=[],n;return cu(t,e)||(n=`Invalid rule override, rule: ->${e}<- cannot be overridden in the grammar: ->${r}<-as it is not defined in any of the super grammars `,i.push({message:n,type:Hu.INVALID_RULE_OVERRIDE,ruleName:e})),i}function Dye(e,t,r,i=[]){let n=[],a=HN(t.definition);if(Wa(a))return[];{let s=e.name;cu(a,e)&&n.push({message:r.buildLeftRecursionError({topLevelRule:e,leftRecursionPath:i}),type:Hu.LEFT_RECURSION,ruleName:s});let u=t7(a,i.concat([e])),h=gh(u,d=>{let p=jo(i);return p.push(d),Dye(e,d,r,p)});return n.concat(h)}}function HN(e){let t=[];if(Wa(e))return t;let r=Pc(e);if(r instanceof pu)t.push(r.referencedRule);else if(r instanceof zu||r instanceof Sl||r instanceof yh||r instanceof vh||r instanceof Gu||r instanceof to)t=t.concat(HN(r.definition));else if(r instanceof Uu)t=sl(fi(r.definition,a=>HN(a.definition)));else if(!(r instanceof As))throw Error("non exhaustive match");let i=BN(r),n=e.length>1;if(i&&n){let a=El(e);return t.concat(HN(a))}else return t}function xYe(e,t){let r=new VN;e.accept(r);let i=r.alternations;return gh(i,n=>{let a=D_(n.definition);return gh(a,(s,u)=>{let h=_ye([s],[],W7,1);return Wa(h)?[{message:t.buildEmptyAlternationError({topLevelRule:e,alternation:n,emptyChoiceIdx:u}),type:Hu.NONE_LAST_EMPTY_ALT,ruleName:e.name,occurrence:n.idx,alternative:u+1}]:[]})})}function bYe(e,t,r){let i=new VN;e.accept(i);let n=i.alternations;return n=a7(n,a=>a.ignoreAmbiguities===!0),gh(n,a=>{let s=a.idx,u=a.maxLookahead||t,h=UN(s,e,u,a),d=kYe(h,a,e,r),p=TYe(h,a,e,r);return d.concat(p)})}function _Ye(e,t){let r=new VN;e.accept(r);let i=r.alternations;return gh(i,n=>n.definition.length>255?[{message:t.buildTooManyAlternativesError({topLevelRule:e,alternation:n}),type:Hu.TOO_MANY_ALTS,ruleName:e.name,occurrence:n.idx}]:[])}function wYe(e,t,r){let i=[];return Rt(e,n=>{let a=new Nye;n.accept(a);let s=a.allProductions;Rt(s,u=>{let h=EY(u),d=u.maxLookahead||t,p=u.idx,g=jN(p,n,h,d)[0];if(Wa(sl(g))){let y=r.buildEmptyRepetitionError({topLevelRule:n,repetition:u});i.push({message:y,type:Hu.NO_NON_EMPTY_LOOKAHEAD,ruleName:n.name})}})}),i}function kYe(e,t,r,i){let n=[],a=Co(e,(s,u,h)=>(t.definition[h].ignoreAmbiguities===!0||Rt(u,d=>{let p=[h];Rt(e,(g,y)=>{h!==y&&SY(g,d)&&t.definition[y].ignoreAmbiguities!==!0&&p.push(y)}),p.length>1&&!SY(n,d)&&(n.push(d),s.push({alts:p,path:d}))}),s),[]);return fi(a,s=>{let u=fi(s.alts,h=>h+1);return{message:i.buildAlternationAmbiguityError({topLevelRule:r,alternation:t,ambiguityIndices:u,prefixPath:s.path}),type:Hu.AMBIGUOUS_ALTS,ruleName:r.name,occurrence:t.idx,alternatives:s.alts}})}function TYe(e,t,r,i){let n=Co(e,(a,s,u)=>{let h=fi(s,d=>({idx:u,path:d}));return a.concat(h)},[]);return R_(gh(n,a=>{if(t.definition[a.idx].ignoreAmbiguities===!0)return[];let s=a.idx,u=a.path,h=eo(n,d=>t.definition[d.idx].ignoreAmbiguities!==!0&&d.idx<s&&dYe(d.path,u));return fi(h,d=>{let p=[d.idx+1,s+1],g=t.idx===0?"":t.idx;return{message:i.buildAlternationPrefixAmbiguityError({topLevelRule:r,alternation:t,ambiguityIndices:p,prefixPath:d.path}),type:Hu.AMBIGUOUS_PREFIX_ALTS,ruleName:r.name,occurrence:g,alternatives:p}})}))}function EYe(e,t,r){let i=[],n=fi(t,a=>a.name);return Rt(e,a=>{let s=a.name;if(cu(n,s)){let u=r.buildNamespaceConflictError(a);i.push({message:u,type:Hu.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:s})}}),i}var Iye,VN,Nye,WN=D(()=>{vn(),ic(),xh(),K7(),GN(),Z_(),Iye=class extends Gv{constructor(){super(...arguments),this.allProductions=[]}visitNonTerminal(e){this.allProductions.push(e)}visitOption(e){this.allProductions.push(e)}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}visitAlternation(e){this.allProductions.push(e)}visitTerminal(e){this.allProductions.push(e)}},VN=class extends Gv{constructor(){super(...arguments),this.alternations=[]}visitAlternation(e){this.alternations.push(e)}},Nye=class extends Gv{constructor(){super(...arguments),this.allProductions=[]}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}}});function CYe(e){let t=e7(e,{errMsgProvider:xye}),r={};return Rt(e.rules,i=>{r[i.name]=i}),nYe(r,t.errMsgProvider)}function SYe(e){return e=e7(e,{errMsgProvider:Cm}),fYe(e.rules,e.tokenTypes,e.errMsgProvider,e.grammarName)}var AYe=D(()=>{vn(),aYe(),WN(),q7()});function YN(e){return cu(IY,e.name)}var MY,LY,RY,DY,IY,Z7,NY,Oye,Bye,Pye,Q7=D(()=>{vn(),MY="MismatchedTokenException",LY="NoViableAltException",RY="EarlyExitException",DY="NotAllInputParsedException",IY=[MY,LY,RY,DY],Object.freeze(IY),Z7=class extends Error{constructor(e,t){super(e),this.token=t,this.resyncedTokens=[],Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},NY=class extends Z7{constructor(e,t,r){super(e,t),this.previousToken=r,this.name=MY}},Oye=class extends Z7{constructor(e,t,r){super(e,t),this.previousToken=r,this.name=LY}},Bye=class extends Z7{constructor(e,t){super(e,t),this.name=DY}},Pye=class extends Z7{constructor(e,t,r){super(e,t),this.previousToken=r,this.name=RY}}});function MYe(e,t,r,i,n,a,s){let u=this.getKeyForAutomaticLookahead(i,n),h=this.firstAfterRepMap[u];if(h===void 0){let y=this.getCurrRuleFullName(),m=this.getGAstProductions()[y];h=new a(m,n).startWalking(),this.firstAfterRepMap[u]=h}let d=h.token,p=h.occurrence,g=h.isEndOfRule;this.RULE_STACK.length===1&&g&&d===void 0&&(d=Rf,p=1),!(d===void 0||p===void 0)&&this.shouldInRepetitionRecoveryBeTried(d,p,s)&&this.tryInRepetitionRecovery(e,t,r,d)}var qN,OY,Fye,$ye,zye=D(()=>{e5(),vn(),Q7(),Kme(),ic(),qN={},OY="InRuleRecoveryException",Fye=class extends Error{constructor(e){super(e),this.name=OY}},$ye=class{initRecoverable(e){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=Cn(e,"recoveryEnabled")?e.recoveryEnabled:V0.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=MYe)}getTokenToInsert(e){let t=pY(e,"",NaN,NaN,NaN,NaN,NaN,NaN);return t.isInsertedInRecovery=!0,t}canTokenTypeBeInsertedInRecovery(e){return!0}canTokenTypeBeDeletedInRecovery(e){return!0}tryInRepetitionRecovery(e,t,r,i){let n=this.findReSyncTokenType(),a=this.exportLexerState(),s=[],u=!1,h=this.LA(1),d=this.LA(1),p=()=>{let g=this.LA(0),y=this.errorMessageProvider.buildMismatchTokenMessage({expected:i,actual:h,previous:g,ruleName:this.getCurrRuleFullName()}),m=new NY(y,h,this.LA(0));m.resyncedTokens=D_(s),this.SAVE_ERROR(m)};for(;!u;)if(this.tokenMatcher(d,i)){p();return}else if(r.call(this)){p(),e.apply(this,t);return}else this.tokenMatcher(d,n)?u=!0:(d=this.SKIP_TOKEN(),this.addToResyncTokens(d,s));this.importLexerState(a)}shouldInRepetitionRecoveryBeTried(e,t,r){return!(r===!1||this.tokenMatcher(this.LA(1),e)||this.isBackTracking()||this.canPerformInRuleRecovery(e,this.getFollowsForInRuleRecovery(e,t)))}getFollowsForInRuleRecovery(e,t){let r=this.getCurrentGrammarPath(e,t);return this.getNextPossibleTokenTypes(r)}tryInRuleRecovery(e,t){if(this.canRecoverWithSingleTokenInsertion(e,t))return this.getTokenToInsert(e);if(this.canRecoverWithSingleTokenDeletion(e)){let r=this.SKIP_TOKEN();return this.consumeToken(),r}throw new Fye("sad sad panda")}canPerformInRuleRecovery(e,t){return this.canRecoverWithSingleTokenInsertion(e,t)||this.canRecoverWithSingleTokenDeletion(e)}canRecoverWithSingleTokenInsertion(e,t){if(!this.canTokenTypeBeInsertedInRecovery(e)||Wa(t))return!1;let r=this.LA(1);return P0(t,i=>this.tokenMatcher(r,i))!==void 0}canRecoverWithSingleTokenDeletion(e){return this.canTokenTypeBeDeletedInRecovery(e)?this.tokenMatcher(this.LA(2),e):!1}isInCurrentRuleReSyncSet(e){let t=this.getCurrFollowKey(),r=this.getFollowSetFromFollowKey(t);return cu(r,e)}findReSyncTokenType(){let e=this.flattenFollowSet(),t=this.LA(1),r=2;for(;;){let i=P0(e,n=>yye(t,n));if(i!==void 0)return i;t=this.LA(r),r++}}getCurrFollowKey(){if(this.RULE_STACK.length===1)return qN;let e=this.getLastExplicitRuleShortName(),t=this.getLastExplicitRuleOccurrenceIndex(),r=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(e),idxInCallingRule:t,inRule:this.shortRuleNameToFullName(r)}}buildFullFollowKeyStack(){let e=this.RULE_STACK,t=this.RULE_OCCURRENCE_STACK;return fi(e,(r,i)=>i===0?qN:{ruleName:this.shortRuleNameToFullName(r),idxInCallingRule:t[i],inRule:this.shortRuleNameToFullName(e[i-1])})}flattenFollowSet(){let e=fi(this.buildFullFollowKeyStack(),t=>this.getFollowSetFromFollowKey(t));return sl(e)}getFollowSetFromFollowKey(e){if(e===qN)return[Rf];let t=e.ruleName+e.idxInCallingRule+iY+e.inRule;return this.resyncFollows[t]}addToResyncTokens(e,t){return this.tokenMatcher(e,Rf)||t.push(e),t}reSyncTo(e){let t=[],r=this.LA(1);for(;this.tokenMatcher(r,e)===!1;)r=this.SKIP_TOKEN(),this.addToResyncTokens(r,t);return D_(t)}attemptInRepetitionRecovery(e,t,r,i,n,a,s){}getCurrentGrammarPath(e,t){let r=this.getHumanReadableRuleStack(),i=jo(this.RULE_OCCURRENCE_STACK);return{ruleStack:r,occurrenceStack:i,lastTok:e,lastTokOccurrence:t}}getHumanReadableRuleStack(){return fi(this.RULE_STACK,e=>this.shortRuleNameToFullName(e))}}});function BY(e,t,r){return r|t|e}var PY=D(()=>{}),XN,Gye=D(()=>{vn(),q7(),ic(),WN(),K7(),XN=class{constructor(e){var t;this.maxLookahead=(t=e?.maxLookahead)!==null&&t!==void 0?t:V0.maxLookahead}validate(e){let t=this.validateNoLeftRecursion(e.rules);if(Wa(t)){let r=this.validateEmptyOrAlternatives(e.rules),i=this.validateAmbiguousAlternationAlternatives(e.rules,this.maxLookahead),n=this.validateSomeNonEmptyLookaheadPath(e.rules,this.maxLookahead);return[...t,...r,...i,...n]}return t}validateNoLeftRecursion(e){return gh(e,t=>Dye(t,t,Cm))}validateEmptyOrAlternatives(e){return gh(e,t=>xYe(t,Cm))}validateAmbiguousAlternationAlternatives(e,t){return gh(e,r=>bYe(r,t,Cm))}validateSomeNonEmptyLookaheadPath(e,t){return wYe(e,t,Cm)}buildLookaheadForAlternation(e){return oYe(e.prodOccurrence,e.rule,e.maxLookahead,e.hasPredicates,e.dynamicTokensEnabled,uYe)}buildLookaheadForOptional(e){return lYe(e.prodOccurrence,e.rule,e.maxLookahead,e.dynamicTokensEnabled,EY(e.prodType),hYe)}}});function LYe(e){J7.reset(),e.accept(J7);let t=J7.dslMethods;return J7.reset(),t}var Uye,jye,J7,RYe=D(()=>{vn(),ic(),PY(),xh(),Gye(),Uye=class{initLooksAhead(e){this.dynamicTokensEnabled=Cn(e,"dynamicTokensEnabled")?e.dynamicTokensEnabled:V0.dynamicTokensEnabled,this.maxLookahead=Cn(e,"maxLookahead")?e.maxLookahead:V0.maxLookahead,this.lookaheadStrategy=Cn(e,"lookaheadStrategy")?e.lookaheadStrategy:new XN({maxLookahead:this.maxLookahead}),this.lookAheadFuncsCache=new Map}preComputeLookaheadFunctions(e){Rt(e,t=>{this.TRACE_INIT(`${t.name} Rule Lookahead`,()=>{let{alternation:r,repetition:i,option:n,repetitionMandatory:a,repetitionMandatoryWithSeparator:s,repetitionWithSeparator:u}=LYe(t);Rt(r,h=>{let d=h.idx===0?"":h.idx;this.TRACE_INIT(`${H0(h)}${d}`,()=>{let p=this.lookaheadStrategy.buildLookaheadForAlternation({prodOccurrence:h.idx,rule:t,maxLookahead:h.maxLookahead||this.maxLookahead,hasPredicates:h.hasPredicates,dynamicTokensEnabled:this.dynamicTokensEnabled}),g=BY(this.fullRuleNameToShort[t.name],256,h.idx);this.setLaFuncCache(g,p)})}),Rt(i,h=>{this.computeLookaheadFunc(t,h.idx,768,"Repetition",h.maxLookahead,H0(h))}),Rt(n,h=>{this.computeLookaheadFunc(t,h.idx,512,"Option",h.maxLookahead,H0(h))}),Rt(a,h=>{this.computeLookaheadFunc(t,h.idx,1024,"RepetitionMandatory",h.maxLookahead,H0(h))}),Rt(s,h=>{this.computeLookaheadFunc(t,h.idx,1536,"RepetitionMandatoryWithSeparator",h.maxLookahead,H0(h))}),Rt(u,h=>{this.computeLookaheadFunc(t,h.idx,1280,"RepetitionWithSeparator",h.maxLookahead,H0(h))})})})}computeLookaheadFunc(e,t,r,i,n,a){this.TRACE_INIT(`${a}${t===0?"":t}`,()=>{let s=this.lookaheadStrategy.buildLookaheadForOptional({prodOccurrence:t,rule:e,maxLookahead:n||this.maxLookahead,dynamicTokensEnabled:this.dynamicTokensEnabled,prodType:i}),u=BY(this.fullRuleNameToShort[e.name],r,t);this.setLaFuncCache(u,s)})}getKeyForAutomaticLookahead(e,t){let r=this.getLastExplicitRuleShortName();return BY(r,e,t)}getLaFuncFromCache(e){return this.lookAheadFuncsCache.get(e)}setLaFuncCache(e,t){this.lookAheadFuncsCache.set(e,t)}},jye=class extends Gv{constructor(){super(...arguments),this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}reset(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}visitOption(e){this.dslMethods.option.push(e)}visitRepetitionWithSeparator(e){this.dslMethods.repetitionWithSeparator.push(e)}visitRepetitionMandatory(e){this.dslMethods.repetitionMandatory.push(e)}visitRepetitionMandatoryWithSeparator(e){this.dslMethods.repetitionMandatoryWithSeparator.push(e)}visitRepetition(e){this.dslMethods.repetition.push(e)}visitAlternation(e){this.dslMethods.alternation.push(e)}},J7=new jye});function Hye(e,t){isNaN(e.startOffset)===!0?(e.startOffset=t.startOffset,e.endOffset=t.endOffset):e.endOffset<t.endOffset&&(e.endOffset=t.endOffset)}function Vye(e,t){isNaN(e.startOffset)===!0?(e.startOffset=t.startOffset,e.startColumn=t.startColumn,e.startLine=t.startLine,e.endOffset=t.endOffset,e.endColumn=t.endColumn,e.endLine=t.endLine):e.endOffset<t.endOffset&&(e.endOffset=t.endOffset,e.endColumn=t.endColumn,e.endLine=t.endLine)}function DYe(e,t,r){e.children[r]===void 0?e.children[r]=[t]:e.children[r].push(t)}function IYe(e,t,r){e.children[t]===void 0?e.children[t]=[r]:e.children[t].push(r)}var NYe=D(()=>{});function Wye(e,t){Object.defineProperty(e,Yye,{enumerable:!1,configurable:!0,writable:!1,value:t})}var Yye,OYe=D(()=>{Yye="name"});function BYe(e,t){let r=Uo(e),i=r.length;for(let n=0;n<i;n++){let a=r[n],s=e[a],u=s.length;for(let h=0;h<u;h++){let d=s[h];d.tokenTypeIdx===void 0&&this[d.name](d.children,t)}}}function PYe(e,t){let r=function(){};Wye(r,e+"BaseSemantics");let i={visit:function(n,a){if(va(n)&&(n=n[0]),!qa(n))return this[n.name](n.children,a)},validateVisitor:function(){let n=$Ye(this,t);if(!Wa(n)){let a=fi(n,s=>s.msg);throw Error(`Errors Detected in CST Visitor <${this.constructor.name}>:
	${a.join(`

`).replace(/\n/g,`
	`)}`)}}};return r.prototype=i,r.prototype.constructor=r,r._RULE_NAMES=t,r}function FYe(e,t,r){let i=function(){};Wye(i,e+"BaseSemanticsWithDefaults");let n=Object.create(r.prototype);return Rt(t,a=>{n[a]=BYe}),i.prototype=n,i.prototype.constructor=i,i}function $Ye(e,t){return zYe(e,t)}function zYe(e,t){let r=eo(t,n=>Yh(e[n])===!1),i=fi(r,n=>({msg:`Missing visitor method: <${n}> on ${e.constructor.name} CST Visitor.`,type:FY.MISSING_METHOD,methodName:n}));return R_(i)}var FY,GYe=D(()=>{vn(),OYe(),function(e){e[e.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",e[e.MISSING_METHOD=1]="MISSING_METHOD"}(FY||(FY={}))}),qye,UYe=D(()=>{NYe(),vn(),GYe(),ic(),qye=class{initTreeBuilder(e){if(this.CST_STACK=[],this.outputCst=e.outputCst,this.nodeLocationTracking=Cn(e,"nodeLocationTracking")?e.nodeLocationTracking:V0.nodeLocationTracking,!this.outputCst)this.cstInvocationStateUpdate=Go,this.cstFinallyStateUpdate=Go,this.cstPostTerminal=Go,this.cstPostNonTerminal=Go,this.cstPostRule=Go;else if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=Vye,this.setNodeLocationFromNode=Vye,this.cstPostRule=Go,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=Go,this.setNodeLocationFromNode=Go,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=Hye,this.setNodeLocationFromNode=Hye,this.cstPostRule=Go,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=Go,this.setNodeLocationFromNode=Go,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else if(/none/i.test(this.nodeLocationTracking))this.setNodeLocationFromToken=Go,this.setNodeLocationFromNode=Go,this.cstPostRule=Go,this.setInitialNodeLocation=Go;else throw Error(`Invalid <nodeLocationTracking> config option: "${e.nodeLocationTracking}"`)}setInitialNodeLocationOnlyOffsetRecovery(e){e.location={startOffset:NaN,endOffset:NaN}}setInitialNodeLocationOnlyOffsetRegular(e){e.location={startOffset:this.LA(1).startOffset,endOffset:NaN}}setInitialNodeLocationFullRecovery(e){e.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}}setInitialNodeLocationFullRegular(e){let t=this.LA(1);e.location={startOffset:t.startOffset,startLine:t.startLine,startColumn:t.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}}cstInvocationStateUpdate(e){let t={name:e,children:Object.create(null)};this.setInitialNodeLocation(t),this.CST_STACK.push(t)}cstFinallyStateUpdate(){this.CST_STACK.pop()}cstPostRuleFull(e){let t=this.LA(0),r=e.location;r.startOffset<=t.startOffset?(r.endOffset=t.endOffset,r.endLine=t.endLine,r.endColumn=t.endColumn):(r.startOffset=NaN,r.startLine=NaN,r.startColumn=NaN)}cstPostRuleOnlyOffset(e){let t=this.LA(0),r=e.location;r.startOffset<=t.startOffset?r.endOffset=t.endOffset:r.startOffset=NaN}cstPostTerminal(e,t){let r=this.CST_STACK[this.CST_STACK.length-1];DYe(r,t,e),this.setNodeLocationFromToken(r.location,t)}cstPostNonTerminal(e,t){let r=this.CST_STACK[this.CST_STACK.length-1];IYe(r,t,e),this.setNodeLocationFromNode(r.location,e.location)}getBaseCstVisitorConstructor(){if(qa(this.baseCstVisitorConstructor)){let e=PYe(this.className,Uo(this.gastProductionsCache));return this.baseCstVisitorConstructor=e,e}return this.baseCstVisitorConstructor}getBaseCstVisitorConstructorWithDefaults(){if(qa(this.baseCstVisitorWithDefaultsConstructor)){let e=FYe(this.className,Uo(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=e,e}return this.baseCstVisitorWithDefaultsConstructor}getLastExplicitRuleShortName(){let e=this.RULE_STACK;return e[e.length-1]}getPreviousExplicitRuleShortName(){let e=this.RULE_STACK;return e[e.length-2]}getLastExplicitRuleOccurrenceIndex(){let e=this.RULE_OCCURRENCE_STACK;return e[e.length-1]}}}),Xye,jYe=D(()=>{ic(),Xye=class{initLexerAdapter(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1}set input(e){if(this.selfAnalysisDone!==!0)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=e,this.tokVectorLength=e.length}get input(){return this.tokVector}SKIP_TOKEN(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):rS}LA(e){let t=this.currIdx+e;return t<0||this.tokVectorLength<=t?rS:this.tokVector[t]}consumeToken(){this.currIdx++}exportLexerState(){return this.currIdx}importLexerState(e){this.currIdx=e}resetLexerState(){this.currIdx=-1}moveToTerminatedState(){this.currIdx=this.tokVector.length-1}getLexerPosition(){return this.exportLexerState()}}}),Kye,HYe=D(()=>{vn(),Q7(),ic(),q7(),WN(),xh(),Kye=class{ACTION(e){return e.call(this)}consume(e,t,r){return this.consumeInternal(t,e,r)}subrule(e,t,r){return this.subruleInternal(t,e,r)}option(e,t){return this.optionInternal(t,e)}or(e,t){return this.orInternal(t,e)}many(e,t){return this.manyInternal(e,t)}atLeastOne(e,t){return this.atLeastOneInternal(e,t)}CONSUME(e,t){return this.consumeInternal(e,0,t)}CONSUME1(e,t){return this.consumeInternal(e,1,t)}CONSUME2(e,t){return this.consumeInternal(e,2,t)}CONSUME3(e,t){return this.consumeInternal(e,3,t)}CONSUME4(e,t){return this.consumeInternal(e,4,t)}CONSUME5(e,t){return this.consumeInternal(e,5,t)}CONSUME6(e,t){return this.consumeInternal(e,6,t)}CONSUME7(e,t){return this.consumeInternal(e,7,t)}CONSUME8(e,t){return this.consumeInternal(e,8,t)}CONSUME9(e,t){return this.consumeInternal(e,9,t)}SUBRULE(e,t){return this.subruleInternal(e,0,t)}SUBRULE1(e,t){return this.subruleInternal(e,1,t)}SUBRULE2(e,t){return this.subruleInternal(e,2,t)}SUBRULE3(e,t){return this.subruleInternal(e,3,t)}SUBRULE4(e,t){return this.subruleInternal(e,4,t)}SUBRULE5(e,t){return this.subruleInternal(e,5,t)}SUBRULE6(e,t){return this.subruleInternal(e,6,t)}SUBRULE7(e,t){return this.subruleInternal(e,7,t)}SUBRULE8(e,t){return this.subruleInternal(e,8,t)}SUBRULE9(e,t){return this.subruleInternal(e,9,t)}OPTION(e){return this.optionInternal(e,0)}OPTION1(e){return this.optionInternal(e,1)}OPTION2(e){return this.optionInternal(e,2)}OPTION3(e){return this.optionInternal(e,3)}OPTION4(e){return this.optionInternal(e,4)}OPTION5(e){return this.optionInternal(e,5)}OPTION6(e){return this.optionInternal(e,6)}OPTION7(e){return this.optionInternal(e,7)}OPTION8(e){return this.optionInternal(e,8)}OPTION9(e){return this.optionInternal(e,9)}OR(e){return this.orInternal(e,0)}OR1(e){return this.orInternal(e,1)}OR2(e){return this.orInternal(e,2)}OR3(e){return this.orInternal(e,3)}OR4(e){return this.orInternal(e,4)}OR5(e){return this.orInternal(e,5)}OR6(e){return this.orInternal(e,6)}OR7(e){return this.orInternal(e,7)}OR8(e){return this.orInternal(e,8)}OR9(e){return this.orInternal(e,9)}MANY(e){this.manyInternal(0,e)}MANY1(e){this.manyInternal(1,e)}MANY2(e){this.manyInternal(2,e)}MANY3(e){this.manyInternal(3,e)}MANY4(e){this.manyInternal(4,e)}MANY5(e){this.manyInternal(5,e)}MANY6(e){this.manyInternal(6,e)}MANY7(e){this.manyInternal(7,e)}MANY8(e){this.manyInternal(8,e)}MANY9(e){this.manyInternal(9,e)}MANY_SEP(e){this.manySepFirstInternal(0,e)}MANY_SEP1(e){this.manySepFirstInternal(1,e)}MANY_SEP2(e){this.manySepFirstInternal(2,e)}MANY_SEP3(e){this.manySepFirstInternal(3,e)}MANY_SEP4(e){this.manySepFirstInternal(4,e)}MANY_SEP5(e){this.manySepFirstInternal(5,e)}MANY_SEP6(e){this.manySepFirstInternal(6,e)}MANY_SEP7(e){this.manySepFirstInternal(7,e)}MANY_SEP8(e){this.manySepFirstInternal(8,e)}MANY_SEP9(e){this.manySepFirstInternal(9,e)}AT_LEAST_ONE(e){this.atLeastOneInternal(0,e)}AT_LEAST_ONE1(e){return this.atLeastOneInternal(1,e)}AT_LEAST_ONE2(e){this.atLeastOneInternal(2,e)}AT_LEAST_ONE3(e){this.atLeastOneInternal(3,e)}AT_LEAST_ONE4(e){this.atLeastOneInternal(4,e)}AT_LEAST_ONE5(e){this.atLeastOneInternal(5,e)}AT_LEAST_ONE6(e){this.atLeastOneInternal(6,e)}AT_LEAST_ONE7(e){this.atLeastOneInternal(7,e)}AT_LEAST_ONE8(e){this.atLeastOneInternal(8,e)}AT_LEAST_ONE9(e){this.atLeastOneInternal(9,e)}AT_LEAST_ONE_SEP(e){this.atLeastOneSepFirstInternal(0,e)}AT_LEAST_ONE_SEP1(e){this.atLeastOneSepFirstInternal(1,e)}AT_LEAST_ONE_SEP2(e){this.atLeastOneSepFirstInternal(2,e)}AT_LEAST_ONE_SEP3(e){this.atLeastOneSepFirstInternal(3,e)}AT_LEAST_ONE_SEP4(e){this.atLeastOneSepFirstInternal(4,e)}AT_LEAST_ONE_SEP5(e){this.atLeastOneSepFirstInternal(5,e)}AT_LEAST_ONE_SEP6(e){this.atLeastOneSepFirstInternal(6,e)}AT_LEAST_ONE_SEP7(e){this.atLeastOneSepFirstInternal(7,e)}AT_LEAST_ONE_SEP8(e){this.atLeastOneSepFirstInternal(8,e)}AT_LEAST_ONE_SEP9(e){this.atLeastOneSepFirstInternal(9,e)}RULE(e,t,r=iS){if(cu(this.definedRulesNames,e)){let n={message:Cm.buildDuplicateRuleNameError({topLevelRule:e,grammarName:this.className}),type:Hu.DUPLICATE_RULE_NAME,ruleName:e};this.definitionErrors.push(n)}this.definedRulesNames.push(e);let i=this.defineRule(e,t,r);return this[e]=i,i}OVERRIDE_RULE(e,t,r=iS){let i=vYe(e,this.definedRulesNames,this.className);this.definitionErrors=this.definitionErrors.concat(i);let n=this.defineRule(e,t,r);return this[e]=n,n}BACKTRACK(e,t){return function(){this.isBackTrackingStack.push(1);let r=this.saveRecogState();try{return e.apply(this,t),!0}catch(i){if(YN(i))return!1;throw i}finally{this.reloadRecogState(r),this.isBackTrackingStack.pop()}}}getGAstProductions(){return this.gastProductionsCache}getSerializedGastProductions(){return fWe(ls(this.gastProductionsCache))}}}),Zye,VYe=D(()=>{vn(),PY(),Q7(),K7(),GN(),ic(),zye(),e5(),Z_(),Zye=class{initRecognizerEngine(e,t){if(this.className=this.constructor.name,this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=$N,this.subruleIdx=0,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},Cn(t,"serializedGrammar"))throw Error(`The Parser's configuration can no longer contain a <serializedGrammar> property.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0
	For Further details.`);if(va(e)){if(Wa(e))throw Error(`A Token Vocabulary cannot be empty.
	Note that the first argument for the parser constructor
	is no longer a Token vector (since v4.0).`);if(typeof e[0].startOffset=="number")throw Error(`The Parser constructor no longer accepts a token vector as the first argument.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0
	For Further details.`)}if(va(e))this.tokensMap=Co(e,(n,a)=>(n[a.name]=a,n),{});else if(Cn(e,"modes")&&Bc(sl(ls(e.modes)),rYe)){let n=sl(ls(e.modes)),a=lI(n);this.tokensMap=Co(a,(s,u)=>(s[u.name]=u,s),{})}else if(Nu(e))this.tokensMap=jo(e);else throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap.EOF=Rf;let r=Cn(e,"modes")?sl(ls(e.modes)):ls(e),i=Bc(r,n=>Wa(n.categoryMatches));this.tokenMatcher=i?$N:W7,Y7(ls(this.tokensMap))}defineRule(e,t,r){if(this.selfAnalysisDone)throw Error(`Grammar rule <${e}> may not be defined after the 'performSelfAnalysis' method has been called'
Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);let i=Cn(r,"resyncEnabled")?r.resyncEnabled:iS.resyncEnabled,n=Cn(r,"recoveryValueFunc")?r.recoveryValueFunc:iS.recoveryValueFunc,a=this.ruleShortNameIdx<<12;this.ruleShortNameIdx++,this.shortRuleNameToFull[a]=e,this.fullRuleNameToShort[e]=a;let s;return this.outputCst===!0?s=function(...u){try{this.ruleInvocationStateUpdate(a,e,this.subruleIdx),t.apply(this,u);let h=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(h),h}catch(h){return this.invokeRuleCatch(h,i,n)}finally{this.ruleFinallyStateUpdate()}}:s=function(...u){try{return this.ruleInvocationStateUpdate(a,e,this.subruleIdx),t.apply(this,u)}catch(h){return this.invokeRuleCatch(h,i,n)}finally{this.ruleFinallyStateUpdate()}},Object.assign(s,{ruleName:e,originalGrammarAction:t})}invokeRuleCatch(e,t,r){let i=this.RULE_STACK.length===1,n=t&&!this.isBackTracking()&&this.recoveryEnabled;if(YN(e)){let a=e;if(n){let s=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(s))if(a.resyncedTokens=this.reSyncTo(s),this.outputCst){let u=this.CST_STACK[this.CST_STACK.length-1];return u.recoveredNode=!0,u}else return r(e);else{if(this.outputCst){let u=this.CST_STACK[this.CST_STACK.length-1];u.recoveredNode=!0,a.partialCstResult=u}throw a}}else{if(i)return this.moveToTerminatedState(),r(e);throw a}}else throw e}optionInternal(e,t){let r=this.getKeyForAutomaticLookahead(512,t);return this.optionInternalLogic(e,t,r)}optionInternalLogic(e,t,r){let i=this.getLaFuncFromCache(r),n;if(typeof e!="function"){n=e.DEF;let a=e.GATE;if(a!==void 0){let s=i;i=()=>a.call(this)&&s.call(this)}}else n=e;if(i.call(this)===!0)return n.call(this)}atLeastOneInternal(e,t){let r=this.getKeyForAutomaticLookahead(1024,e);return this.atLeastOneInternalLogic(e,t,r)}atLeastOneInternalLogic(e,t,r){let i=this.getLaFuncFromCache(r),n;if(typeof t!="function"){n=t.DEF;let a=t.GATE;if(a!==void 0){let s=i;i=()=>a.call(this)&&s.call(this)}}else n=t;if(i.call(this)===!0){let a=this.doSingleRepetition(n);for(;i.call(this)===!0&&a===!0;)a=this.doSingleRepetition(n)}else throw this.raiseEarlyExitException(e,ro.REPETITION_MANDATORY,t.ERR_MSG);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[e,t],i,1024,e,Eye)}atLeastOneSepFirstInternal(e,t){let r=this.getKeyForAutomaticLookahead(1536,e);this.atLeastOneSepFirstInternalLogic(e,t,r)}atLeastOneSepFirstInternalLogic(e,t,r){let i=t.DEF,n=t.SEP;if(this.getLaFuncFromCache(r).call(this)===!0){i.call(this);let a=()=>this.tokenMatcher(this.LA(1),n);for(;this.tokenMatcher(this.LA(1),n)===!0;)this.CONSUME(n),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,n,a,i,TY],a,1536,e,TY)}else throw this.raiseEarlyExitException(e,ro.REPETITION_MANDATORY_WITH_SEPARATOR,t.ERR_MSG)}manyInternal(e,t){let r=this.getKeyForAutomaticLookahead(768,e);return this.manyInternalLogic(e,t,r)}manyInternalLogic(e,t,r){let i=this.getLaFuncFromCache(r),n;if(typeof t!="function"){n=t.DEF;let s=t.GATE;if(s!==void 0){let u=i;i=()=>s.call(this)&&u.call(this)}}else n=t;let a=!0;for(;i.call(this)===!0&&a===!0;)a=this.doSingleRepetition(n);this.attemptInRepetitionRecovery(this.manyInternal,[e,t],i,768,e,Tye,a)}manySepFirstInternal(e,t){let r=this.getKeyForAutomaticLookahead(1280,e);this.manySepFirstInternalLogic(e,t,r)}manySepFirstInternalLogic(e,t,r){let i=t.DEF,n=t.SEP;if(this.getLaFuncFromCache(r).call(this)===!0){i.call(this);let a=()=>this.tokenMatcher(this.LA(1),n);for(;this.tokenMatcher(this.LA(1),n)===!0;)this.CONSUME(n),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,n,a,i,kY],a,1280,e,kY)}}repetitionSepSecondInternal(e,t,r,i,n){for(;r();)this.CONSUME(t),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,t,r,i,n],r,1536,e,n)}doSingleRepetition(e){let t=this.getLexerPosition();return e.call(this),this.getLexerPosition()>t}orInternal(e,t){let r=this.getKeyForAutomaticLookahead(256,t),i=va(e)?e:e.DEF,n=this.getLaFuncFromCache(r).call(this,i);if(n!==void 0)return i[n].ALT.call(this);this.raiseNoAltException(t,e.ERR_MSG)}ruleFinallyStateUpdate(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),this.RULE_STACK.length===0&&this.isAtEndOfInput()===!1){let e=this.LA(1),t=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:e,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new Bye(t,e))}}subruleInternal(e,t,r){let i;try{let n=r!==void 0?r.ARGS:void 0;return this.subruleIdx=t,i=e.apply(this,n),this.cstPostNonTerminal(i,r!==void 0&&r.LABEL!==void 0?r.LABEL:e.ruleName),i}catch(n){throw this.subruleInternalError(n,r,e.ruleName)}}subruleInternalError(e,t,r){throw YN(e)&&e.partialCstResult!==void 0&&(this.cstPostNonTerminal(e.partialCstResult,t!==void 0&&t.LABEL!==void 0?t.LABEL:r),delete e.partialCstResult),e}consumeInternal(e,t,r){let i;try{let n=this.LA(1);this.tokenMatcher(n,e)===!0?(this.consumeToken(),i=n):this.consumeInternalError(e,n,r)}catch(n){i=this.consumeInternalRecovery(e,t,n)}return this.cstPostTerminal(r!==void 0&&r.LABEL!==void 0?r.LABEL:e.name,i),i}consumeInternalError(e,t,r){let i,n=this.LA(0);throw r!==void 0&&r.ERR_MSG?i=r.ERR_MSG:i=this.errorMessageProvider.buildMismatchTokenMessage({expected:e,actual:t,previous:n,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new NY(i,t,n))}consumeInternalRecovery(e,t,r){if(this.recoveryEnabled&&r.name==="MismatchedTokenException"&&!this.isBackTracking()){let i=this.getFollowsForInRuleRecovery(e,t);try{return this.tryInRuleRecovery(e,i)}catch(n){throw n.name===OY?r:n}}else throw r}saveRecogState(){let e=this.errors,t=jo(this.RULE_STACK);return{errors:e,lexerState:this.exportLexerState(),RULE_STACK:t,CST_STACK:this.CST_STACK}}reloadRecogState(e){this.errors=e.errors,this.importLexerState(e.lexerState),this.RULE_STACK=e.RULE_STACK}ruleInvocationStateUpdate(e,t,r){this.RULE_OCCURRENCE_STACK.push(r),this.RULE_STACK.push(e),this.cstInvocationStateUpdate(t)}isBackTracking(){return this.isBackTrackingStack.length!==0}getCurrRuleFullName(){let e=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[e]}shortRuleNameToFullName(e){return this.shortRuleNameToFull[e]}isAtEndOfInput(){return this.tokenMatcher(this.LA(1),Rf)}reset(){this.resetLexerState(),this.subruleIdx=0,this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]}}}),Qye,WYe=D(()=>{Q7(),vn(),K7(),ic(),Qye=class{initErrorHandler(e){this._errors=[],this.errorMessageProvider=Cn(e,"errorMessageProvider")?e.errorMessageProvider:V0.errorMessageProvider}SAVE_ERROR(e){if(YN(e))return e.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:jo(this.RULE_OCCURRENCE_STACK)},this._errors.push(e),e;throw Error("Trying to save an Error which is not a RecognitionException")}get errors(){return jo(this._errors)}set errors(e){this._errors=e}raiseEarlyExitException(e,t,r){let i=this.getCurrRuleFullName(),n=this.getGAstProductions()[i],a=jN(e,n,t,this.maxLookahead)[0],s=[];for(let h=1;h<=this.maxLookahead;h++)s.push(this.LA(h));let u=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:a,actual:s,previous:this.LA(0),customUserDescription:r,ruleName:i});throw this.SAVE_ERROR(new Pye(u,this.LA(1),this.LA(0)))}raiseNoAltException(e,t){let r=this.getCurrRuleFullName(),i=this.getGAstProductions()[r],n=UN(e,i,this.maxLookahead),a=[];for(let h=1;h<=this.maxLookahead;h++)a.push(this.LA(h));let s=this.LA(0),u=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:n,actual:a,previous:s,customUserDescription:t,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new Oye(u,this.LA(1),s))}}}),Jye,YYe=D(()=>{GN(),vn(),Jye=class{initContentAssist(){}computeContentAssist(e,t){let r=this.gastProductionsCache[e];if(qa(r))throw Error(`Rule ->${e}<- does not exist in this grammar.`);return _ye([r],t,this.tokenMatcher,this.maxLookahead)}getNextPossibleTokenTypes(e){let t=Pc(e.ruleStack),r=this.getGAstProductions()[t];return new kye(r,e).startWalking()}}});function eS(e,t,r,i=!1){KN(r);let n=Rd(this.recordingProdStack),a=Yh(t)?t:t.DEF,s=new e({definition:[],idx:r});return i&&(s.separator=t.SEP),Cn(t,"MAX_LOOKAHEAD")&&(s.maxLookahead=t.MAX_LOOKAHEAD),this.recordingProdStack.push(s),a.call(this),n.definition.push(s),this.recordingProdStack.pop(),tS}function qYe(e,t){KN(t);let r=Rd(this.recordingProdStack),i=va(e)===!1,n=i===!1?e:e.DEF,a=new Uu({definition:[],idx:t,ignoreAmbiguities:i&&e.IGNORE_AMBIGUITIES===!0});Cn(e,"MAX_LOOKAHEAD")&&(a.maxLookahead=e.MAX_LOOKAHEAD);let s=yV(n,u=>Yh(u.GATE));return a.hasPredicates=s,r.definition.push(a),Rt(n,u=>{let h=new zu({definition:[]});a.definition.push(h),Cn(u,"IGNORE_AMBIGUITIES")?h.ignoreAmbiguities=u.IGNORE_AMBIGUITIES:Cn(u,"GATE")&&(h.ignoreAmbiguities=!0),this.recordingProdStack.push(h),u.ALT.call(this),this.recordingProdStack.pop()}),tS}function e2e(e){return e===0?"":`${e}`}function KN(e){if(e<0||e>zY){let t=new Error(`Invalid DSL Method idx value: <${e}>
	Idx value must be a none negative value smaller than ${zY+1}`);throw t.KNOWN_RECORDER_ERROR=!0,t}}var tS,$Y,zY,GY,UY,t2e,r2e,XYe=D(()=>{vn(),xh(),zN(),Z_(),e5(),ic(),PY(),tS={description:"This Object indicates the Parser is during Recording Phase"},Object.freeze(tS),$Y=!0,zY=Math.pow(2,8)-1,GY=mye({name:"RECORDING_PHASE_TOKEN",pattern:ju.NA}),Y7([GY]),UY=pY(GY,`This IToken indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,-1,-1,-1,-1,-1,-1),Object.freeze(UY),t2e={name:`This CSTNode indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,children:{}},r2e=class{initGastRecorder(e){this.recordingProdStack=[],this.RECORDING_PHASE=!1}enableRecording(){this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",()=>{for(let e=0;e<10;e++){let t=e>0?e:"";this[`CONSUME${t}`]=function(r,i){return this.consumeInternalRecord(r,e,i)},this[`SUBRULE${t}`]=function(r,i){return this.subruleInternalRecord(r,e,i)},this[`OPTION${t}`]=function(r){return this.optionInternalRecord(r,e)},this[`OR${t}`]=function(r){return this.orInternalRecord(r,e)},this[`MANY${t}`]=function(r){this.manyInternalRecord(e,r)},this[`MANY_SEP${t}`]=function(r){this.manySepFirstInternalRecord(e,r)},this[`AT_LEAST_ONE${t}`]=function(r){this.atLeastOneInternalRecord(e,r)},this[`AT_LEAST_ONE_SEP${t}`]=function(r){this.atLeastOneSepFirstInternalRecord(e,r)}}this.consume=function(e,t,r){return this.consumeInternalRecord(t,e,r)},this.subrule=function(e,t,r){return this.subruleInternalRecord(t,e,r)},this.option=function(e,t){return this.optionInternalRecord(t,e)},this.or=function(e,t){return this.orInternalRecord(t,e)},this.many=function(e,t){this.manyInternalRecord(e,t)},this.atLeastOne=function(e,t){this.atLeastOneInternalRecord(e,t)},this.ACTION=this.ACTION_RECORD,this.BACKTRACK=this.BACKTRACK_RECORD,this.LA=this.LA_RECORD})}disableRecording(){this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",()=>{let e=this;for(let t=0;t<10;t++){let r=t>0?t:"";delete e[`CONSUME${r}`],delete e[`SUBRULE${r}`],delete e[`OPTION${r}`],delete e[`OR${r}`],delete e[`MANY${r}`],delete e[`MANY_SEP${r}`],delete e[`AT_LEAST_ONE${r}`],delete e[`AT_LEAST_ONE_SEP${r}`]}delete e.consume,delete e.subrule,delete e.option,delete e.or,delete e.many,delete e.atLeastOne,delete e.ACTION,delete e.BACKTRACK,delete e.LA})}ACTION_RECORD(e){}BACKTRACK_RECORD(e,t){return()=>!0}LA_RECORD(e){return rS}topLevelRuleRecord(e,t){try{let r=new zv({definition:[],name:e});return r.name=e,this.recordingProdStack.push(r),t.call(this),this.recordingProdStack.pop(),r}catch(r){if(r.KNOWN_RECORDER_ERROR!==!0)try{r.message=r.message+`
	 This error was thrown during the "grammar recording phase" For more info see:
	https://chevrotain.io/docs/guide/internals.html#grammar-recording`}catch{throw r}throw r}}optionInternalRecord(e,t){return eS.call(this,Sl,e,t)}atLeastOneInternalRecord(e,t){eS.call(this,yh,t,e)}atLeastOneSepFirstInternalRecord(e,t){eS.call(this,vh,t,e,$Y)}manyInternalRecord(e,t){eS.call(this,to,t,e)}manySepFirstInternalRecord(e,t){eS.call(this,Gu,t,e,$Y)}orInternalRecord(e,t){return qYe.call(this,e,t)}subruleInternalRecord(e,t,r){if(KN(t),!e||Cn(e,"ruleName")===!1){let s=new Error(`<SUBRULE${e2e(t)}> argument is invalid expecting a Parser method reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw s.KNOWN_RECORDER_ERROR=!0,s}let i=Rd(this.recordingProdStack),n=e.ruleName,a=new pu({idx:t,nonTerminalName:n,label:r?.LABEL,referencedRule:void 0});return i.definition.push(a),this.outputCst?t2e:tS}consumeInternalRecord(e,t,r){if(KN(t),!cye(e)){let a=new Error(`<CONSUME${e2e(t)}> argument is invalid expecting a TokenType reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw a.KNOWN_RECORDER_ERROR=!0,a}let i=Rd(this.recordingProdStack),n=new As({idx:t,terminalType:e,label:r?.LABEL});return i.definition.push(n),UY}}}),i2e,KYe=D(()=>{vn(),$7(),ic(),i2e=class{initPerformanceTracer(e){if(Cn(e,"traceInitPerf")){let t=e.traceInitPerf,r=typeof t=="number";this.traceInitMaxIdent=r?t:1/0,this.traceInitPerf=r?t>0:t}else this.traceInitMaxIdent=0,this.traceInitPerf=V0.traceInitPerf;this.traceInitIndent=-1}TRACE_INIT(e,t){if(this.traceInitPerf===!0){this.traceInitIndent++;let r=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${r}--> <${e}>`);let{time:i,value:n}=Wme(t),a=i>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&a(`${r}<-- <${e}> time: ${i}ms`),this.traceInitIndent--,n}else return t()}}});function ZYe(e,t){t.forEach(r=>{let i=r.prototype;Object.getOwnPropertyNames(i).forEach(n=>{if(n==="constructor")return;let a=Object.getOwnPropertyDescriptor(i,n);a&&(a.get||a.set)?Object.defineProperty(e.prototype,n,a):e.prototype[n]=r.prototype[n]})})}var QYe=D(()=>{});function n2e(e=void 0){return function(){return e}}var rS,V0,iS,Hu,ZN,a2e,ic=D(()=>{vn(),$7(),TWe(),e5(),q7(),AYe(),zye(),RYe(),UYe(),jYe(),HYe(),VYe(),WYe(),YYe(),XYe(),KYe(),QYe(),WN(),rS=pY(Rf,"",NaN,NaN,NaN,NaN,NaN,NaN),Object.freeze(rS),V0=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:Uv,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),iS=Object.freeze({recoveryValueFunc:()=>{},resyncEnabled:!0}),function(e){e[e.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",e[e.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",e[e.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",e[e.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",e[e.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",e[e.LEFT_RECURSION=5]="LEFT_RECURSION",e[e.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",e[e.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",e[e.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",e[e.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",e[e.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",e[e.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",e[e.TOO_MANY_ALTS=12]="TOO_MANY_ALTS",e[e.CUSTOM_LOOKAHEAD_VALIDATION=13]="CUSTOM_LOOKAHEAD_VALIDATION"}(Hu||(Hu={})),ZN=class aOe{static performSelfAnalysis(t){throw Error("The **static** `performSelfAnalysis` method has been deprecated.	\nUse the **instance** method with the same name instead.")}performSelfAnalysis(){this.TRACE_INIT("performSelfAnalysis",()=>{let t;this.selfAnalysisDone=!0;let r=this.className;this.TRACE_INIT("toFastProps",()=>{Yme(this)}),this.TRACE_INIT("Grammar Recording",()=>{try{this.enableRecording(),Rt(this.definedRulesNames,n=>{let a=this[n].originalGrammarAction,s;this.TRACE_INIT(`${n} Rule`,()=>{s=this.topLevelRuleRecord(n,a)}),this.gastProductionsCache[n]=s})}finally{this.disableRecording()}});let i=[];if(this.TRACE_INIT("Grammar Resolving",()=>{i=CYe({rules:ls(this.gastProductionsCache)}),this.definitionErrors=this.definitionErrors.concat(i)}),this.TRACE_INIT("Grammar Validations",()=>{if(Wa(i)&&this.skipValidations===!1){let n=SYe({rules:ls(this.gastProductionsCache),tokenTypes:ls(this.tokensMap),errMsgProvider:Cm,grammarName:r}),a=pYe({lookaheadStrategy:this.lookaheadStrategy,rules:ls(this.gastProductionsCache),tokenTypes:ls(this.tokensMap),grammarName:r});this.definitionErrors=this.definitionErrors.concat(n,a)}}),Wa(this.definitionErrors)&&(this.recoveryEnabled&&this.TRACE_INIT("computeAllProdsFollows",()=>{let n=wWe(ls(this.gastProductionsCache));this.resyncFollows=n}),this.TRACE_INIT("ComputeLookaheadFunctions",()=>{var n,a;(a=(n=this.lookaheadStrategy).initialize)===null||a===void 0||a.call(n,{rules:ls(this.gastProductionsCache)}),this.preComputeLookaheadFunctions(ls(this.gastProductionsCache))})),!aOe.DEFER_DEFINITION_ERRORS_HANDLING&&!Wa(this.definitionErrors))throw t=fi(this.definitionErrors,n=>n.message),new Error(`Parser Definition Errors detected:
 ${t.join(`
-------------------------------
`)}`)})}constructor(t,r){this.definitionErrors=[],this.selfAnalysisDone=!1;let i=this;if(i.initErrorHandler(r),i.initLexerAdapter(),i.initLooksAhead(r),i.initRecognizerEngine(t,r),i.initRecoverable(r),i.initTreeBuilder(r),i.initContentAssist(),i.initGastRecorder(r),i.initPerformanceTracer(r),Cn(r,"ignoredIssues"))throw new Error(`The <ignoredIssues> IParserConfig property has been deprecated.
	Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.
	See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES
	For further details.`);this.skipValidations=Cn(r,"skipValidations")?r.skipValidations:V0.skipValidations}},ZN.DEFER_DEFINITION_ERRORS_HANDLING=!1,ZYe(ZN,[$ye,Uye,qye,Xye,Zye,Kye,Qye,Jye,r2e,i2e]),a2e=class extends ZN{constructor(e,t=V0){let r=jo(t);r.outputCst=!1,super(e,r)}}}),JYe=D(()=>{xh()}),eqe=D(()=>{}),tqe=D(()=>{JYe(),eqe()}),rqe=D(()=>{Hme()}),t5=D(()=>{Hme(),ic(),zN(),e5(),K7(),Gye(),q7(),Q7(),fye(),xh(),xh(),tqe(),rqe()});function r5(e,t,r){return`${e.name}_${t}_${r}`}function iqe(e){let t={decisionMap:{},decisionStates:[],ruleToStartState:new Map,ruleToStopState:new Map,states:[]};nqe(t,e);let r=e.length;for(let i=0;i<r;i++){let n=e[i],a=jv(t,n,n);a!==void 0&&gqe(t,n,a)}return t}function nqe(e,t){let r=t.length;for(let i=0;i<r;i++){let n=t[i],a=Al(e,n,void 0,{type:u2e}),s=Al(e,n,void 0,{type:n5});a.stop=s,e.ruleToStartState.set(n,a),e.ruleToStopState.set(n,s)}}function s2e(e,t,r){return r instanceof As?jY(e,t,r.terminalType,r):r instanceof pu?fqe(e,t,r):r instanceof Uu?uqe(e,t,r):r instanceof Sl?hqe(e,t,r):r instanceof to?aqe(e,t,r):r instanceof Gu?sqe(e,t,r):r instanceof yh?oqe(e,t,r):r instanceof vh?lqe(e,t,r):jv(e,t,r)}function aqe(e,t,r){let i=Al(e,t,r,{type:WY});Sm(e,i);let n=i5(e,t,i,r,jv(e,t,r));return l2e(e,t,r,n)}function sqe(e,t,r){let i=Al(e,t,r,{type:WY});Sm(e,i);let n=i5(e,t,i,r,jv(e,t,r)),a=jY(e,t,r.separator,r);return l2e(e,t,r,n,a)}function oqe(e,t,r){let i=Al(e,t,r,{type:VY});Sm(e,i);let n=i5(e,t,i,r,jv(e,t,r));return o2e(e,t,r,n)}function lqe(e,t,r){let i=Al(e,t,r,{type:VY});Sm(e,i);let n=i5(e,t,i,r,jv(e,t,r)),a=jY(e,t,r.separator,r);return o2e(e,t,r,n,a)}function uqe(e,t,r){let i=Al(e,t,r,{type:Df});Sm(e,i);let n=fi(r.definition,a=>s2e(e,t,a));return i5(e,t,i,r,...n)}function hqe(e,t,r){let i=Al(e,t,r,{type:Df});Sm(e,i);let n=i5(e,t,i,r,jv(e,t,r));return cqe(e,t,r,n)}function jv(e,t,r){let i=eo(fi(r.definition,n=>s2e(e,t,n)),n=>n!==void 0);return i.length===1?i[0]:i.length===0?void 0:pqe(e,i)}function o2e(e,t,r,i,n){let a=i.left,s=i.right,u=Al(e,t,r,{type:p2e});Sm(e,u);let h=Al(e,t,r,{type:YY});return a.loopback=u,h.loopback=u,e.decisionMap[r5(t,n?"RepetitionMandatoryWithSeparator":"RepetitionMandatory",r.idx)]=u,Wo(s,u),n===void 0?(Wo(u,a),Wo(u,h)):(Wo(u,h),Wo(u,n.left),Wo(n.right,a)),{left:a,right:h}}function l2e(e,t,r,i,n){let a=i.left,s=i.right,u=Al(e,t,r,{type:d2e});Sm(e,u);let h=Al(e,t,r,{type:YY}),d=Al(e,t,r,{type:c2e});return u.loopback=d,h.loopback=d,Wo(u,a),Wo(u,h),Wo(s,d),n!==void 0?(Wo(d,h),Wo(d,n.left),Wo(n.right,a)):Wo(d,u),e.decisionMap[r5(t,n?"RepetitionWithSeparator":"Repetition",r.idx)]=u,{left:u,right:h}}function cqe(e,t,r,i){let n=i.left,a=i.right;return Wo(n,a),e.decisionMap[r5(t,"Option",r.idx)]=n,i}function Sm(e,t){return e.decisionStates.push(t),t.decision=e.decisionStates.length-1,t.decision}function i5(e,t,r,i,...n){let a=Al(e,t,i,{type:h2e,start:r});r.end=a;for(let u of n)u!==void 0?(Wo(r,u.left),Wo(u.right,a)):Wo(r,a);let s={left:r,right:a};return e.decisionMap[r5(t,dqe(i),i.idx)]=r,s}function dqe(e){if(e instanceof Uu)return"Alternation";if(e instanceof Sl)return"Option";if(e instanceof to)return"Repetition";if(e instanceof Gu)return"RepetitionWithSeparator";if(e instanceof yh)return"RepetitionMandatory";if(e instanceof vh)return"RepetitionMandatoryWithSeparator";throw new Error("Invalid production type encountered")}function pqe(e,t){let r=t.length;for(let a=0;a<r-1;a++){let s=t[a],u;s.left.transitions.length===1&&(u=s.left.transitions[0]);let h=u instanceof eO,d=u,p=t[a+1].left;s.left.type===Df&&s.right.type===Df&&u!==void 0&&(h&&d.followState===s.right||u.target===s.right)?(h?d.followState=p:u.target=p,mqe(e,s.right)):Wo(s.right,p)}let i=t[0],n=t[r-1];return{left:i.left,right:n.right}}function jY(e,t,r,i){let n=Al(e,t,i,{type:Df}),a=Al(e,t,i,{type:Df});return HY(n,new JN(a,r)),{left:n,right:a}}function fqe(e,t,r){let i=r.referencedRule,n=e.ruleToStartState.get(i),a=Al(e,t,r,{type:Df}),s=Al(e,t,r,{type:Df}),u=new eO(n,i,s);return HY(a,u),{left:a,right:s}}function gqe(e,t,r){let i=e.ruleToStartState.get(t);Wo(i,r.left);let n=e.ruleToStopState.get(t);return Wo(r.right,n),{left:i,right:n}}function Wo(e,t){let r=new qY(t);HY(e,r)}function Al(e,t,r,i){let n=Object.assign({atn:e,production:r,epsilonOnlyTransitions:!1,rule:t,transitions:[],nextTokenWithinRule:[],stateNumber:e.states.length},i);return e.states.push(n),n}function HY(e,t){e.transitions.length===0&&(e.epsilonOnlyTransitions=t.isEpsilon()),e.transitions.push(t)}function mqe(e,t){e.states.splice(e.states.indexOf(t),1)}var Df,u2e,VY,WY,n5,h2e,c2e,d2e,p2e,YY,QN,JN,qY,eO,yqe=D(()=>{r7(),Yde(),t5(),Df=1,u2e=2,VY=4,WY=5,n5=7,h2e=8,c2e=9,d2e=10,p2e=11,YY=12,QN=class{constructor(e){this.target=e}isEpsilon(){return!1}},JN=class extends QN{constructor(e,t){super(e),this.tokenType=t}},qY=class extends QN{constructor(e){super(e)}isEpsilon(){return!0}},eO=class extends QN{constructor(e,t,r){super(e),this.rule=t,this.followState=r}isEpsilon(){return!0}}});function f2e(e,t=!0){return`${t?`a${e.alt}`:""}s${e.state.stateNumber}:${e.stack.map(r=>r.stateNumber.toString()).join("_")}`}var nS,tO,vqe=D(()=>{r7(),nS={},tO=class{constructor(){this.map={},this.configs=[]}get size(){return this.configs.length}finalize(){this.map={}}add(e){let t=f2e(e);t in this.map||(this.map[t]=this.configs.length,this.configs.push(e))}get elements(){return this.configs}get alts(){return fi(this.configs,e=>e.alt)}get key(){let e="";for(let t in this.map)e+=t+":";return e}}});function xqe(e,t){let r={};return i=>{let n=i.toString(),a=r[n];return a!==void 0||(a={atnStartState:e,decision:t,states:{}},r[n]=a),a}}function g2e(e,t=!0){let r=new Set;for(let i of e){let n=new Set;for(let a of i){if(a===void 0){if(t)break;return!1}let s=[a.tokenTypeIdx].concat(a.categoryMatches);for(let u of s)if(r.has(u)){if(!n.has(u))return!1}else r.add(u),n.add(u)}}return!0}function bqe(e){let t=e.decisionStates.length,r=Array(t);for(let i=0;i<t;i++)r[i]=xqe(e.decisionStates[i],i);return r}function XY(e,t,r,i){let n=e[t](r),a=n.start;if(a===void 0){let s=Rqe(n.atnStartState);a=v2e(n,m2e(s)),n.start=a}return _qe.apply(this,[n,a,r,i])}function _qe(e,t,r,i){let n=t,a=1,s=[],u=this.LA(a++);for(;;){let h=Sqe(n,u);if(h===void 0&&(h=wqe.apply(this,[e,n,u,a,r,i])),h===nS)return Cqe(s,n,u);if(h.isAcceptState===!0)return h.prediction;n=h,s.push(u),u=this.LA(a++)}}function wqe(e,t,r,i,n,a){let s=Aqe(t.configs,r,n);if(s.size===0)return y2e(e,t,r,nS),nS;let u=m2e(s),h=Lqe(s,n);if(h!==void 0)u.isAcceptState=!0,u.prediction=h,u.configs.uniqueAlt=h;else if(Oqe(s)){let d=Dv(s.alts);u.isAcceptState=!0,u.prediction=d,u.configs.uniqueAlt=d,kqe.apply(this,[e,i,s.alts,a])}return u=y2e(e,t,r,u),u}function kqe(e,t,r,i){let n=[];for(let d=1;d<=t;d++)n.push(this.LA(d).tokenType);let a=e.atnStartState,s=a.rule,u=a.production,h=Tqe({topLevelRule:s,ambiguityIndices:r,production:u,prefixPath:n});i(h)}function Tqe(e){let t=fi(e.prefixPath,n=>J_(n)).join(", "),r=e.production.idx===0?"":e.production.idx,i=`Ambiguous Alternatives Detected: <${e.ambiguityIndices.join(", ")}> in <${Eqe(e.production)}${r}> inside <${e.topLevelRule.name}> Rule,
<${t}> may appears as a prefix path in all these alternatives.
`;return i=i+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,i}function Eqe(e){if(e instanceof pu)return"SUBRULE";if(e instanceof Sl)return"OPTION";if(e instanceof Uu)return"OR";if(e instanceof yh)return"AT_LEAST_ONE";if(e instanceof vh)return"AT_LEAST_ONE_SEP";if(e instanceof Gu)return"MANY_SEP";if(e instanceof to)return"MANY";if(e instanceof As)return"CONSUME";throw Error("non exhaustive match")}function Cqe(e,t,r){let i=gh(t.configs.elements,a=>a.state.transitions),n=ppe(i.filter(a=>a instanceof JN).map(a=>a.tokenType),a=>a.tokenTypeIdx);return{actualToken:r,possibleTokenTypes:n,tokenPath:e}}function Sqe(e,t){return e.edges[t.tokenTypeIdx]}function Aqe(e,t,r){let i=new tO,n=[];for(let s of e.elements){if(r.is(s.alt)===!1)continue;if(s.state.type===n5){n.push(s);continue}let u=s.state.transitions.length;for(let h=0;h<u;h++){let d=s.state.transitions[h],p=Mqe(d,t);p!==void 0&&i.add({state:p,alt:s.alt,stack:s.stack})}}let a;if(n.length===0&&i.size===1&&(a=i),a===void 0){a=new tO;for(let s of i.elements)rO(s,a)}if(n.length>0&&!Iqe(a))for(let s of n)a.add(s);return a}function Mqe(e,t){if(e instanceof JN&&yye(t,e.tokenType))return e.target}function Lqe(e,t){let r;for(let i of e.elements)if(t.is(i.alt)===!0){if(r===void 0)r=i.alt;else if(r!==i.alt)return}return r}function m2e(e){return{configs:e,edges:{},isAcceptState:!1,prediction:-1}}function y2e(e,t,r,i){return i=v2e(e,i),t.edges[r.tokenTypeIdx]=i,i}function v2e(e,t){if(t===nS)return t;let r=t.configs.key,i=e.states[r];return i!==void 0?i:(t.configs.finalize(),e.states[r]=t,t)}function Rqe(e){let t=new tO,r=e.transitions.length;for(let i=0;i<r;i++){let n={state:e.transitions[i].target,alt:i,stack:[]};rO(n,t)}return t}function rO(e,t){let r=e.state;if(r.type===n5){if(e.stack.length>0){let n=[...e.stack],a={state:n.pop(),alt:e.alt,stack:n};rO(a,t)}else t.add(e);return}r.epsilonOnlyTransitions||t.add(e);let i=r.transitions.length;for(let n=0;n<i;n++){let a=r.transitions[n],s=Dqe(e,a);s!==void 0&&rO(s,t)}}function Dqe(e,t){if(t instanceof qY)return{state:t.target,alt:e.alt,stack:e.stack};if(t instanceof eO){let r=[...e.stack,t.followState];return{state:t.target,alt:e.alt,stack:r}}}function Iqe(e){for(let t of e.elements)if(t.state.type===n5)return!0;return!1}function Nqe(e){for(let t of e.elements)if(t.state.type!==n5)return!1;return!0}function Oqe(e){if(Nqe(e))return!0;let t=Bqe(e.elements);return Pqe(t)&&!Fqe(t)}function Bqe(e){let t=new Map;for(let r of e){let i=f2e(r,!1),n=t.get(i);n===void 0&&(n={},t.set(i,n)),n[r.alt]=!0}return t}function Pqe(e){for(let t of Array.from(e.values()))if(Object.keys(t).length>1)return!0;return!1}function Fqe(e){for(let t of Array.from(e.values()))if(Object.keys(t).length===1)return!0;return!1}var KY,ZY,x2e,$qe=D(()=>{t5(),yqe(),vqe(),k0e(),Jde(),VUe(),r7(),dH(),eV(),aV(),tpe(),KY=class{constructor(){this.predicates=[]}is(e){return e>=this.predicates.length||this.predicates[e]}set(e,t){this.predicates[e]=t}toString(){let e="",t=this.predicates.length;for(let r=0;r<t;r++)e+=this.predicates[r]===!0?"1":"0";return e}},ZY=new KY,x2e=class extends XN{constructor(e){var t;super(),this.logging=(t=e?.logging)!==null&&t!==void 0?t:r=>console.log(r)}initialize(e){this.atn=iqe(e.rules),this.dfas=bqe(this.atn)}validateAmbiguousAlternationAlternatives(){return[]}validateEmptyOrAlternatives(){return[]}buildLookaheadForAlternation(e){let{prodOccurrence:t,rule:r,hasPredicates:i,dynamicTokensEnabled:n}=e,a=this.dfas,s=this.logging,u=r5(r,"Alternation",t),h=this.atn.decisionMap[u].decision,d=fi(Cye({maxLookahead:1,occurrence:t,prodType:"Alternation",rule:r}),p=>fi(p,g=>g[0]));if(g2e(d,!1)&&!n){let p=Co(d,(g,y,m)=>(Rt(y,x=>{x&&(g[x.tokenTypeIdx]=m,Rt(x.categoryMatches,_=>{g[_]=m}))}),g),{});return i?function(g){var y;let m=this.LA(1),x=p[m.tokenTypeIdx];if(g!==void 0&&x!==void 0){let _=(y=g[x])===null||y===void 0?void 0:y.GATE;if(_!==void 0&&_.call(this)===!1)return}return x}:function(){let g=this.LA(1);return p[g.tokenTypeIdx]}}else return i?function(p){let g=new KY,y=p===void 0?0:p.length;for(let x=0;x<y;x++){let _=p?.[x].GATE;g.set(x,_===void 0||_.call(this))}let m=XY.call(this,a,h,g,s);return typeof m=="number"?m:void 0}:function(){let p=XY.call(this,a,h,ZY,s);return typeof p=="number"?p:void 0}}buildLookaheadForOptional(e){let{prodOccurrence:t,rule:r,prodType:i,dynamicTokensEnabled:n}=e,a=this.dfas,s=this.logging,u=r5(r,i,t),h=this.atn.decisionMap[u].decision,d=fi(Cye({maxLookahead:1,occurrence:t,prodType:i,rule:r}),p=>fi(p,g=>g[0]));if(g2e(d)&&d[0][0]&&!n){let p=d[0],g=sl(p);if(g.length===1&&Wa(g[0].categoryMatches)){let y=g[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===y}}else{let y=Co(g,(m,x)=>(x!==void 0&&(m[x.tokenTypeIdx]=!0,Rt(x.categoryMatches,_=>{m[_]=!0})),m),{});return function(){let m=this.LA(1);return y[m.tokenTypeIdx]===!0}}}return function(){let p=XY.call(this,a,h,ZY,s);return typeof p=="object"?!1:p===0}}}}),zqe=D(()=>{$qe()}),b2e,QY,_2e,iO,rs,Oa,nO,w2e,JY,k2e,T2e,E2e,C2e,eq,S2e,A2e,M2e,aO,a5,s5,tq,o5,L2e,rq,iq,nq,aq,sq,R2e,D2e,oq,I2e,lq,aS,N2e,O2e,B2e,P2e,F2e,$2e,z2e,G2e,sO,U2e,j2e,H2e,V2e,W2e,Y2e,q2e,X2e,K2e,Z2e,Q2e,oO,J2e,eve,tve,rve,ive,nve,ave,sve,ove,lve,uve,hve,cve,uq,hq,dve,pve,fve,gve,mve,yve,vve,xve,bve,_ve,$t,wve=D(()=>{"use strict";(function(e){function t(r){return typeof r=="string"}e.is=t})(b2e||(b2e={})),function(e){function t(r){return typeof r=="string"}e.is=t}(QY||(QY={})),function(e){e.MIN_VALUE=-2147483648,e.MAX_VALUE=2147483647;function t(r){return typeof r=="number"&&e.MIN_VALUE<=r&&r<=e.MAX_VALUE}e.is=t}(_2e||(_2e={})),function(e){e.MIN_VALUE=0,e.MAX_VALUE=2147483647;function t(r){return typeof r=="number"&&e.MIN_VALUE<=r&&r<=e.MAX_VALUE}e.is=t}(iO||(iO={})),function(e){function t(i,n){return i===Number.MAX_VALUE&&(i=iO.MAX_VALUE),n===Number.MAX_VALUE&&(n=iO.MAX_VALUE),{line:i,character:n}}e.create=t;function r(i){let n=i;return $t.objectLiteral(n)&&$t.uinteger(n.line)&&$t.uinteger(n.character)}e.is=r}(rs||(rs={})),function(e){function t(i,n,a,s){if($t.uinteger(i)&&$t.uinteger(n)&&$t.uinteger(a)&&$t.uinteger(s))return{start:rs.create(i,n),end:rs.create(a,s)};if(rs.is(i)&&rs.is(n))return{start:i,end:n};throw new Error(`Range#create called with invalid arguments[${i}, ${n}, ${a}, ${s}]`)}e.create=t;function r(i){let n=i;return $t.objectLiteral(n)&&rs.is(n.start)&&rs.is(n.end)}e.is=r}(Oa||(Oa={})),function(e){function t(i,n){return{uri:i,range:n}}e.create=t;function r(i){let n=i;return $t.objectLiteral(n)&&Oa.is(n.range)&&($t.string(n.uri)||$t.undefined(n.uri))}e.is=r}(nO||(nO={})),function(e){function t(i,n,a,s){return{targetUri:i,targetRange:n,targetSelectionRange:a,originSelectionRange:s}}e.create=t;function r(i){let n=i;return $t.objectLiteral(n)&&Oa.is(n.targetRange)&&$t.string(n.targetUri)&&Oa.is(n.targetSelectionRange)&&(Oa.is(n.originSelectionRange)||$t.undefined(n.originSelectionRange))}e.is=r}(w2e||(w2e={})),function(e){function t(i,n,a,s){return{red:i,green:n,blue:a,alpha:s}}e.create=t;function r(i){let n=i;return $t.objectLiteral(n)&&$t.numberRange(n.red,0,1)&&$t.numberRange(n.green,0,1)&&$t.numberRange(n.blue,0,1)&&$t.numberRange(n.alpha,0,1)}e.is=r}(JY||(JY={})),function(e){function t(i,n){return{range:i,color:n}}e.create=t;function r(i){let n=i;return $t.objectLiteral(n)&&Oa.is(n.range)&&JY.is(n.color)}e.is=r}(k2e||(k2e={})),function(e){function t(i,n,a){return{label:i,textEdit:n,additionalTextEdits:a}}e.create=t;function r(i){let n=i;return $t.objectLiteral(n)&&$t.string(n.label)&&($t.undefined(n.textEdit)||s5.is(n))&&($t.undefined(n.additionalTextEdits)||$t.typedArray(n.additionalTextEdits,s5.is))}e.is=r}(T2e||(T2e={})),function(e){e.Comment="comment",e.Imports="imports",e.Region="region"}(E2e||(E2e={})),function(e){function t(i,n,a,s,u,h){let d={startLine:i,endLine:n};return $t.defined(a)&&(d.startCharacter=a),$t.defined(s)&&(d.endCharacter=s),$t.defined(u)&&(d.kind=u),$t.defined(h)&&(d.collapsedText=h),d}e.create=t;function r(i){let n=i;return $t.objectLiteral(n)&&$t.uinteger(n.startLine)&&$t.uinteger(n.startLine)&&($t.undefined(n.startCharacter)||$t.uinteger(n.startCharacter))&&($t.undefined(n.endCharacter)||$t.uinteger(n.endCharacter))&&($t.undefined(n.kind)||$t.string(n.kind))}e.is=r}(C2e||(C2e={})),function(e){function t(i,n){return{location:i,message:n}}e.create=t;function r(i){let n=i;return $t.defined(n)&&nO.is(n.location)&&$t.string(n.message)}e.is=r}(eq||(eq={})),function(e){e.Error=1,e.Warning=2,e.Information=3,e.Hint=4}(S2e||(S2e={})),function(e){e.Unnecessary=1,e.Deprecated=2}(A2e||(A2e={})),function(e){function t(r){let i=r;return $t.objectLiteral(i)&&$t.string(i.href)}e.is=t}(M2e||(M2e={})),function(e){function t(i,n,a,s,u,h){let d={range:i,message:n};return $t.defined(a)&&(d.severity=a),$t.defined(s)&&(d.code=s),$t.defined(u)&&(d.source=u),$t.defined(h)&&(d.relatedInformation=h),d}e.create=t;function r(i){var n;let a=i;return $t.defined(a)&&Oa.is(a.range)&&$t.string(a.message)&&($t.number(a.severity)||$t.undefined(a.severity))&&($t.integer(a.code)||$t.string(a.code)||$t.undefined(a.code))&&($t.undefined(a.codeDescription)||$t.string((n=a.codeDescription)===null||n===void 0?void 0:n.href))&&($t.string(a.source)||$t.undefined(a.source))&&($t.undefined(a.relatedInformation)||$t.typedArray(a.relatedInformation,eq.is))}e.is=r}(aO||(aO={})),function(e){function t(i,n,...a){let s={title:i,command:n};return $t.defined(a)&&a.length>0&&(s.arguments=a),s}e.create=t;function r(i){let n=i;return $t.defined(n)&&$t.string(n.title)&&$t.string(n.command)}e.is=r}(a5||(a5={})),function(e){function t(a,s){return{range:a,newText:s}}e.replace=t;function r(a,s){return{range:{start:a,end:a},newText:s}}e.insert=r;function i(a){return{range:a,newText:""}}e.del=i;function n(a){let s=a;return $t.objectLiteral(s)&&$t.string(s.newText)&&Oa.is(s.range)}e.is=n}(s5||(s5={})),function(e){function t(i,n,a){let s={label:i};return n!==void 0&&(s.needsConfirmation=n),a!==void 0&&(s.description=a),s}e.create=t;function r(i){let n=i;return $t.objectLiteral(n)&&$t.string(n.label)&&($t.boolean(n.needsConfirmation)||n.needsConfirmation===void 0)&&($t.string(n.description)||n.description===void 0)}e.is=r}(tq||(tq={})),function(e){function t(r){let i=r;return $t.string(i)}e.is=t}(o5||(o5={})),function(e){function t(a,s,u){return{range:a,newText:s,annotationId:u}}e.replace=t;function r(a,s,u){return{range:{start:a,end:a},newText:s,annotationId:u}}e.insert=r;function i(a,s){return{range:a,newText:"",annotationId:s}}e.del=i;function n(a){let s=a;return s5.is(s)&&(tq.is(s.annotationId)||o5.is(s.annotationId))}e.is=n}(L2e||(L2e={})),function(e){function t(i,n){return{textDocument:i,edits:n}}e.create=t;function r(i){let n=i;return $t.defined(n)&&oq.is(n.textDocument)&&Array.isArray(n.edits)}e.is=r}(rq||(rq={})),function(e){function t(i,n,a){let s={kind:"create",uri:i};return n!==void 0&&(n.overwrite!==void 0||n.ignoreIfExists!==void 0)&&(s.options=n),a!==void 0&&(s.annotationId=a),s}e.create=t;function r(i){let n=i;return n&&n.kind==="create"&&$t.string(n.uri)&&(n.options===void 0||(n.options.overwrite===void 0||$t.boolean(n.options.overwrite))&&(n.options.ignoreIfExists===void 0||$t.boolean(n.options.ignoreIfExists)))&&(n.annotationId===void 0||o5.is(n.annotationId))}e.is=r}(iq||(iq={})),function(e){function t(i,n,a,s){let u={kind:"rename",oldUri:i,newUri:n};return a!==void 0&&(a.overwrite!==void 0||a.ignoreIfExists!==void 0)&&(u.options=a),s!==void 0&&(u.annotationId=s),u}e.create=t;function r(i){let n=i;return n&&n.kind==="rename"&&$t.string(n.oldUri)&&$t.string(n.newUri)&&(n.options===void 0||(n.options.overwrite===void 0||$t.boolean(n.options.overwrite))&&(n.options.ignoreIfExists===void 0||$t.boolean(n.options.ignoreIfExists)))&&(n.annotationId===void 0||o5.is(n.annotationId))}e.is=r}(nq||(nq={})),function(e){function t(i,n,a){let s={kind:"delete",uri:i};return n!==void 0&&(n.recursive!==void 0||n.ignoreIfNotExists!==void 0)&&(s.options=n),a!==void 0&&(s.annotationId=a),s}e.create=t;function r(i){let n=i;return n&&n.kind==="delete"&&$t.string(n.uri)&&(n.options===void 0||(n.options.recursive===void 0||$t.boolean(n.options.recursive))&&(n.options.ignoreIfNotExists===void 0||$t.boolean(n.options.ignoreIfNotExists)))&&(n.annotationId===void 0||o5.is(n.annotationId))}e.is=r}(aq||(aq={})),function(e){function t(r){let i=r;return i&&(i.changes!==void 0||i.documentChanges!==void 0)&&(i.documentChanges===void 0||i.documentChanges.every(n=>$t.string(n.kind)?iq.is(n)||nq.is(n)||aq.is(n):rq.is(n)))}e.is=t}(sq||(sq={})),function(e){function t(i){return{uri:i}}e.create=t;function r(i){let n=i;return $t.defined(n)&&$t.string(n.uri)}e.is=r}(R2e||(R2e={})),function(e){function t(i,n){return{uri:i,version:n}}e.create=t;function r(i){let n=i;return $t.defined(n)&&$t.string(n.uri)&&$t.integer(n.version)}e.is=r}(D2e||(D2e={})),function(e){function t(i,n){return{uri:i,version:n}}e.create=t;function r(i){let n=i;return $t.defined(n)&&$t.string(n.uri)&&(n.version===null||$t.integer(n.version))}e.is=r}(oq||(oq={})),function(e){function t(i,n,a,s){return{uri:i,languageId:n,version:a,text:s}}e.create=t;function r(i){let n=i;return $t.defined(n)&&$t.string(n.uri)&&$t.string(n.languageId)&&$t.integer(n.version)&&$t.string(n.text)}e.is=r}(I2e||(I2e={})),function(e){e.PlainText="plaintext",e.Markdown="markdown";function t(r){let i=r;return i===e.PlainText||i===e.Markdown}e.is=t}(lq||(lq={})),function(e){function t(r){let i=r;return $t.objectLiteral(r)&&lq.is(i.kind)&&$t.string(i.value)}e.is=t}(aS||(aS={})),function(e){e.Text=1,e.Method=2,e.Function=3,e.Constructor=4,e.Field=5,e.Variable=6,e.Class=7,e.Interface=8,e.Module=9,e.Property=10,e.Unit=11,e.Value=12,e.Enum=13,e.Keyword=14,e.Snippet=15,e.Color=16,e.File=17,e.Reference=18,e.Folder=19,e.EnumMember=20,e.Constant=21,e.Struct=22,e.Event=23,e.Operator=24,e.TypeParameter=25}(N2e||(N2e={})),function(e){e.PlainText=1,e.Snippet=2}(O2e||(O2e={})),function(e){e.Deprecated=1}(B2e||(B2e={})),function(e){function t(i,n,a){return{newText:i,insert:n,replace:a}}e.create=t;function r(i){let n=i;return n&&$t.string(n.newText)&&Oa.is(n.insert)&&Oa.is(n.replace)}e.is=r}(P2e||(P2e={})),function(e){e.asIs=1,e.adjustIndentation=2}(F2e||(F2e={})),function(e){function t(r){let i=r;return i&&($t.string(i.detail)||i.detail===void 0)&&($t.string(i.description)||i.description===void 0)}e.is=t}($2e||($2e={})),function(e){function t(r){return{label:r}}e.create=t}(z2e||(z2e={})),function(e){function t(r,i){return{items:r||[],isIncomplete:!!i}}e.create=t}(G2e||(G2e={})),function(e){function t(i){return i.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}e.fromPlainText=t;function r(i){let n=i;return $t.string(n)||$t.objectLiteral(n)&&$t.string(n.language)&&$t.string(n.value)}e.is=r}(sO||(sO={})),function(e){function t(r){let i=r;return!!i&&$t.objectLiteral(i)&&(aS.is(i.contents)||sO.is(i.contents)||$t.typedArray(i.contents,sO.is))&&(r.range===void 0||Oa.is(r.range))}e.is=t}(U2e||(U2e={})),function(e){function t(r,i){return i?{label:r,documentation:i}:{label:r}}e.create=t}(j2e||(j2e={})),function(e){function t(r,i,...n){let a={label:r};return $t.defined(i)&&(a.documentation=i),$t.defined(n)?a.parameters=n:a.parameters=[],a}e.create=t}(H2e||(H2e={})),function(e){e.Text=1,e.Read=2,e.Write=3}(V2e||(V2e={})),function(e){function t(r,i){let n={range:r};return $t.number(i)&&(n.kind=i),n}e.create=t}(W2e||(W2e={})),function(e){e.File=1,e.Module=2,e.Namespace=3,e.Package=4,e.Class=5,e.Method=6,e.Property=7,e.Field=8,e.Constructor=9,e.Enum=10,e.Interface=11,e.Function=12,e.Variable=13,e.Constant=14,e.String=15,e.Number=16,e.Boolean=17,e.Array=18,e.Object=19,e.Key=20,e.Null=21,e.EnumMember=22,e.Struct=23,e.Event=24,e.Operator=25,e.TypeParameter=26}(Y2e||(Y2e={})),function(e){e.Deprecated=1}(q2e||(q2e={})),function(e){function t(r,i,n,a,s){let u={name:r,kind:i,location:{uri:a,range:n}};return s&&(u.containerName=s),u}e.create=t}(X2e||(X2e={})),function(e){function t(r,i,n,a){return a!==void 0?{name:r,kind:i,location:{uri:n,range:a}}:{name:r,kind:i,location:{uri:n}}}e.create=t}(K2e||(K2e={})),function(e){function t(i,n,a,s,u,h){let d={name:i,detail:n,kind:a,range:s,selectionRange:u};return h!==void 0&&(d.children=h),d}e.create=t;function r(i){let n=i;return n&&$t.string(n.name)&&$t.number(n.kind)&&Oa.is(n.range)&&Oa.is(n.selectionRange)&&(n.detail===void 0||$t.string(n.detail))&&(n.deprecated===void 0||$t.boolean(n.deprecated))&&(n.children===void 0||Array.isArray(n.children))&&(n.tags===void 0||Array.isArray(n.tags))}e.is=r}(Z2e||(Z2e={})),function(e){e.Empty="",e.QuickFix="quickfix",e.Refactor="refactor",e.RefactorExtract="refactor.extract",e.RefactorInline="refactor.inline",e.RefactorRewrite="refactor.rewrite",e.Source="source",e.SourceOrganizeImports="source.organizeImports",e.SourceFixAll="source.fixAll"}(Q2e||(Q2e={})),function(e){e.Invoked=1,e.Automatic=2}(oO||(oO={})),function(e){function t(i,n,a){let s={diagnostics:i};return n!=null&&(s.only=n),a!=null&&(s.triggerKind=a),s}e.create=t;function r(i){let n=i;return $t.defined(n)&&$t.typedArray(n.diagnostics,aO.is)&&(n.only===void 0||$t.typedArray(n.only,$t.string))&&(n.triggerKind===void 0||n.triggerKind===oO.Invoked||n.triggerKind===oO.Automatic)}e.is=r}(J2e||(J2e={})),function(e){function t(i,n,a){let s={title:i},u=!0;return typeof n=="string"?(u=!1,s.kind=n):a5.is(n)?s.command=n:s.edit=n,u&&a!==void 0&&(s.kind=a),s}e.create=t;function r(i){let n=i;return n&&$t.string(n.title)&&(n.diagnostics===void 0||$t.typedArray(n.diagnostics,aO.is))&&(n.kind===void 0||$t.string(n.kind))&&(n.edit!==void 0||n.command!==void 0)&&(n.command===void 0||a5.is(n.command))&&(n.isPreferred===void 0||$t.boolean(n.isPreferred))&&(n.edit===void 0||sq.is(n.edit))}e.is=r}(eve||(eve={})),function(e){function t(i,n){let a={range:i};return $t.defined(n)&&(a.data=n),a}e.create=t;function r(i){let n=i;return $t.defined(n)&&Oa.is(n.range)&&($t.undefined(n.command)||a5.is(n.command))}e.is=r}(tve||(tve={})),function(e){function t(i,n){return{tabSize:i,insertSpaces:n}}e.create=t;function r(i){let n=i;return $t.defined(n)&&$t.uinteger(n.tabSize)&&$t.boolean(n.insertSpaces)}e.is=r}(rve||(rve={})),function(e){function t(i,n,a){return{range:i,target:n,data:a}}e.create=t;function r(i){let n=i;return $t.defined(n)&&Oa.is(n.range)&&($t.undefined(n.target)||$t.string(n.target))}e.is=r}(ive||(ive={})),function(e){function t(i,n){return{range:i,parent:n}}e.create=t;function r(i){let n=i;return $t.objectLiteral(n)&&Oa.is(n.range)&&(n.parent===void 0||e.is(n.parent))}e.is=r}(nve||(nve={})),function(e){e.namespace="namespace",e.type="type",e.class="class",e.enum="enum",e.interface="interface",e.struct="struct",e.typeParameter="typeParameter",e.parameter="parameter",e.variable="variable",e.property="property",e.enumMember="enumMember",e.event="event",e.function="function",e.method="method",e.macro="macro",e.keyword="keyword",e.modifier="modifier",e.comment="comment",e.string="string",e.number="number",e.regexp="regexp",e.operator="operator",e.decorator="decorator"}(ave||(ave={})),function(e){e.declaration="declaration",e.definition="definition",e.readonly="readonly",e.static="static",e.deprecated="deprecated",e.abstract="abstract",e.async="async",e.modification="modification",e.documentation="documentation",e.defaultLibrary="defaultLibrary"}(sve||(sve={})),function(e){function t(r){let i=r;return $t.objectLiteral(i)&&(i.resultId===void 0||typeof i.resultId=="string")&&Array.isArray(i.data)&&(i.data.length===0||typeof i.data[0]=="number")}e.is=t}(ove||(ove={})),function(e){function t(i,n){return{range:i,text:n}}e.create=t;function r(i){let n=i;return n!=null&&Oa.is(n.range)&&$t.string(n.text)}e.is=r}(lve||(lve={})),function(e){function t(i,n,a){return{range:i,variableName:n,caseSensitiveLookup:a}}e.create=t;function r(i){let n=i;return n!=null&&Oa.is(n.range)&&$t.boolean(n.caseSensitiveLookup)&&($t.string(n.variableName)||n.variableName===void 0)}e.is=r}(uve||(uve={})),function(e){function t(i,n){return{range:i,expression:n}}e.create=t;function r(i){let n=i;return n!=null&&Oa.is(n.range)&&($t.string(n.expression)||n.expression===void 0)}e.is=r}(hve||(hve={})),function(e){function t(i,n){return{frameId:i,stoppedLocation:n}}e.create=t;function r(i){let n=i;return $t.defined(n)&&Oa.is(i.stoppedLocation)}e.is=r}(cve||(cve={})),function(e){e.Type=1,e.Parameter=2;function t(r){return r===1||r===2}e.is=t}(uq||(uq={})),function(e){function t(i){return{value:i}}e.create=t;function r(i){let n=i;return $t.objectLiteral(n)&&(n.tooltip===void 0||$t.string(n.tooltip)||aS.is(n.tooltip))&&(n.location===void 0||nO.is(n.location))&&(n.command===void 0||a5.is(n.command))}e.is=r}(hq||(hq={})),function(e){function t(i,n,a){let s={position:i,label:n};return a!==void 0&&(s.kind=a),s}e.create=t;function r(i){let n=i;return $t.objectLiteral(n)&&rs.is(n.position)&&($t.string(n.label)||$t.typedArray(n.label,hq.is))&&(n.kind===void 0||uq.is(n.kind))&&n.textEdits===void 0||$t.typedArray(n.textEdits,s5.is)&&(n.tooltip===void 0||$t.string(n.tooltip)||aS.is(n.tooltip))&&(n.paddingLeft===void 0||$t.boolean(n.paddingLeft))&&(n.paddingRight===void 0||$t.boolean(n.paddingRight))}e.is=r}(dve||(dve={})),function(e){function t(r){return{kind:"snippet",value:r}}e.createSnippet=t}(pve||(pve={})),function(e){function t(r,i,n,a){return{insertText:r,filterText:i,range:n,command:a}}e.create=t}(fve||(fve={})),function(e){function t(r){return{items:r}}e.create=t}(gve||(gve={})),function(e){e.Invoked=0,e.Automatic=1}(mve||(mve={})),function(e){function t(r,i){return{range:r,text:i}}e.create=t}(yve||(yve={})),function(e){function t(r,i){return{triggerKind:r,selectedCompletionInfo:i}}e.create=t}(vve||(vve={})),function(e){function t(r){let i=r;return $t.objectLiteral(i)&&QY.is(i.uri)&&$t.string(i.name)}e.is=t}(xve||(xve={})),function(e){function t(a,s,u,h){return new _ve(a,s,u,h)}e.create=t;function r(a){let s=a;return!!($t.defined(s)&&$t.string(s.uri)&&($t.undefined(s.languageId)||$t.string(s.languageId))&&$t.uinteger(s.lineCount)&&$t.func(s.getText)&&$t.func(s.positionAt)&&$t.func(s.offsetAt))}e.is=r;function i(a,s){let u=a.getText(),h=n(s,(p,g)=>{let y=p.range.start.line-g.range.start.line;return y===0?p.range.start.character-g.range.start.character:y}),d=u.length;for(let p=h.length-1;p>=0;p--){let g=h[p],y=a.offsetAt(g.range.start),m=a.offsetAt(g.range.end);if(m<=d)u=u.substring(0,y)+g.newText+u.substring(m,u.length);else throw new Error("Overlapping edit");d=y}return u}e.applyEdits=i;function n(a,s){if(a.length<=1)return a;let u=a.length/2|0,h=a.slice(0,u),d=a.slice(u);n(h,s),n(d,s);let p=0,g=0,y=0;for(;p<h.length&&g<d.length;)s(h[p],d[g])<=0?a[y++]=h[p++]:a[y++]=d[g++];for(;p<h.length;)a[y++]=h[p++];for(;g<d.length;)a[y++]=d[g++];return a}}(bve||(bve={})),_ve=class{constructor(e,t,r,i){this._uri=e,this._languageId=t,this._version=r,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let t=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(t,r)}return this._content}update(e,t){this._content=e.text,this._version=t,this._lineOffsets=void 0}getLineOffsets(){if(this._lineOffsets===void 0){let e=[],t=this._content,r=!0;for(let i=0;i<t.length;i++){r&&(e.push(i),r=!1);let n=t.charAt(i);r=n==="\r"||n===`
`,n==="\r"&&i+1<t.length&&t.charAt(i+1)===`
`&&i++}r&&t.length>0&&e.push(t.length),this._lineOffsets=e}return this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let t=this.getLineOffsets(),r=0,i=t.length;if(i===0)return rs.create(0,e);for(;r<i;){let a=Math.floor((r+i)/2);t[a]>e?i=a:r=a+1}let n=r-1;return rs.create(n,e-t[n])}offsetAt(e){let t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;let r=t[e.line],i=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(r+e.character,i),r)}get lineCount(){return this.getLineOffsets().length}},function(e){let t=Object.prototype.toString;function r(m){return typeof m<"u"}e.defined=r;function i(m){return typeof m>"u"}e.undefined=i;function n(m){return m===!0||m===!1}e.boolean=n;function a(m){return t.call(m)==="[object String]"}e.string=a;function s(m){return t.call(m)==="[object Number]"}e.number=s;function u(m,x,_){return t.call(m)==="[object Number]"&&x<=m&&m<=_}e.numberRange=u;function h(m){return t.call(m)==="[object Number]"&&-2147483648<=m&&m<=2147483647}e.integer=h;function d(m){return t.call(m)==="[object Number]"&&0<=m&&m<=2147483647}e.uinteger=d;function p(m){return t.call(m)==="[object Function]"}e.func=p;function g(m){return m!==null&&typeof m=="object"}e.objectLiteral=g;function y(m,x){return Array.isArray(m)&&m.every(x)}e.typedArray=y}($t||($t={}))}),cq,lO,sS,oS,kve,uO,dq=D(()=>{wve(),Nd(),U0(),cq=class{constructor(){this.nodeStack=[]}get current(){return this.nodeStack[this.nodeStack.length-1]}buildRootNode(e){return this.rootNode=new uO(e),this.rootNode.root=this.rootNode,this.nodeStack=[this.rootNode],this.rootNode}buildCompositeNode(e){let t=new oS;return t.grammarSource=e,t.root=this.rootNode,this.current.content.push(t),this.nodeStack.push(t),t}buildLeafNode(e,t){let r=new sS(e.startOffset,e.image.length,zI(e),e.tokenType,!1);return r.grammarSource=t,r.root=this.rootNode,this.current.content.push(r),r}removeNode(e){let t=e.container;if(t){let r=t.content.indexOf(e);r>=0&&t.content.splice(r,1)}}construct(e){let t=this.current;typeof e.$type=="string"&&(this.current.astNode=e),e.$cstNode=t;let r=this.nodeStack.pop();r?.content.length===0&&this.removeNode(r)}addHiddenTokens(e){for(let t of e){let r=new sS(t.startOffset,t.image.length,zI(t),t.tokenType,!0);r.root=this.rootNode,this.addHiddenToken(this.rootNode,r)}}addHiddenToken(e,t){let{offset:r,end:i}=t;for(let n=0;n<e.content.length;n++){let a=e.content[n],{offset:s,end:u}=a;if(Sf(a)&&r>s&&i<u){this.addHiddenToken(a,t);return}else if(i<=s){e.content.splice(n,0,t);return}}e.content.push(t)}},lO=class{get parent(){return this.container}get feature(){return this.grammarSource}get hidden(){return!1}get astNode(){var e,t;let r=typeof((e=this._astNode)===null||e===void 0?void 0:e.$type)=="string"?this._astNode:(t=this.container)===null||t===void 0?void 0:t.astNode;if(!r)throw new Error("This node has no associated AST element");return r}set astNode(e){this._astNode=e}get element(){return this.astNode}get text(){return this.root.fullText.substring(this.offset,this.end)}},sS=class extends lO{get offset(){return this._offset}get length(){return this._length}get end(){return this._offset+this._length}get hidden(){return this._hidden}get tokenType(){return this._tokenType}get range(){return this._range}constructor(e,t,r,i,n=!1){super(),this._hidden=n,this._offset=e,this._tokenType=i,this._length=t,this._range=r}},oS=class extends lO{constructor(){super(...arguments),this.content=new kve(this)}get children(){return this.content}get offset(){var e,t;return(t=(e=this.firstNonHiddenNode)===null||e===void 0?void 0:e.offset)!==null&&t!==void 0?t:0}get length(){return this.end-this.offset}get end(){var e,t;return(t=(e=this.lastNonHiddenNode)===null||e===void 0?void 0:e.end)!==null&&t!==void 0?t:0}get range(){let e=this.firstNonHiddenNode,t=this.lastNonHiddenNode;if(e&&t){if(this._rangeCache===void 0){let{range:r}=e,{range:i}=t;this._rangeCache={start:r.start,end:i.end.line<r.start.line?r.start:i.end}}return this._rangeCache}else return{start:rs.create(0,0),end:rs.create(0,0)}}get firstNonHiddenNode(){for(let e of this.content)if(!e.hidden)return e;return this.content[0]}get lastNonHiddenNode(){for(let e=this.content.length-1;e>=0;e--){let t=this.content[e];if(!t.hidden)return t}return this.content[this.content.length-1]}},kve=class sOe extends Array{constructor(t){super(),this.parent=t,Object.setPrototypeOf(this,sOe.prototype)}push(...t){return this.addParents(t),super.push(...t)}unshift(...t){return this.addParents(t),super.unshift(...t)}splice(t,r,...i){return this.addParents(i),super.splice(t,r,...i)}addParents(t){for(let r of t)r.container=this.parent}},uO=class extends oS{get text(){return this._text.substring(this.offset,this.end)}get fullText(){return this._text}constructor(e){super(),this._text="",this._text=e??""}}});function pq(e){return e.$type===lS}var lS,fq,gq,hO,mq,yq,cO,vq,Tve,Eve,dO=D(()=>{t5(),zqe(),Mf(),j0(),mh(),dq(),lS=Symbol("Datatype"),fq="\u200B",gq=e=>e.endsWith(fq)?e:e+fq,hO=class{constructor(e){this._unorderedGroups=new Map,this.lexer=e.parser.Lexer;let t=this.lexer.definition;this.wrapper=new Eve(t,Object.assign(Object.assign({},e.parser.ParserConfig),{errorMessageProvider:e.parser.ParserErrorMessageProvider}))}alternatives(e,t){this.wrapper.wrapOr(e,t)}optional(e,t){this.wrapper.wrapOption(e,t)}many(e,t){this.wrapper.wrapMany(e,t)}atLeastOne(e,t){this.wrapper.wrapAtLeastOne(e,t)}isRecording(){return this.wrapper.IS_RECORDING}get unorderedGroups(){return this._unorderedGroups}getRuleStack(){return this.wrapper.RULE_STACK}finalize(){this.wrapper.wrapSelfAnalysis()}},mq=class extends hO{get current(){return this.stack[this.stack.length-1]}constructor(e){super(e),this.nodeBuilder=new cq,this.stack=[],this.assignmentMap=new Map,this.linker=e.references.Linker,this.converter=e.parser.ValueConverter,this.astReflection=e.shared.AstReflection}rule(e,t){let r=e.fragment?void 0:DN(e)?lS:F7(e),i=this.wrapper.DEFINE_RULE(gq(e.name),this.startImplementation(r,t).bind(this));return e.entry&&(this.mainRule=i),i}parse(e){this.nodeBuilder.buildRootNode(e);let t=this.lexer.tokenize(e);this.wrapper.input=t.tokens;let r=this.mainRule.call(this.wrapper,{});return this.nodeBuilder.addHiddenTokens(t.hidden),this.unorderedGroups.clear(),{value:r,lexerErrors:t.errors,parserErrors:this.wrapper.errors}}startImplementation(e,t){return r=>{if(!this.isRecording()){let n={$type:e};this.stack.push(n),e===lS&&(n.value="")}let i;try{i=t(r)}catch{i=void 0}return!this.isRecording()&&i===void 0&&(i=this.construct()),i}}consume(e,t,r){let i=this.wrapper.wrapConsume(e,t);if(!this.isRecording()&&this.isValidToken(i)){let n=this.nodeBuilder.buildLeafNode(i,r),{assignment:a,isCrossRef:s}=this.getAssignment(r),u=this.current;if(a){let h=bm(r)?i.image:this.converter.convert(i.image,n);this.assign(a.operator,a.feature,h,n,s)}else if(pq(u)){let h=i.image;bm(r)||(h=this.converter.convert(h,n).toString()),u.value+=h}}}isValidToken(e){return!e.isInsertedInRecovery&&!isNaN(e.startOffset)&&typeof e.endOffset=="number"&&!isNaN(e.endOffset)}subrule(e,t,r,i){let n;this.isRecording()||(n=this.nodeBuilder.buildCompositeNode(r));let a=this.wrapper.wrapSubrule(e,t,i);!this.isRecording()&&n&&n.length>0&&this.performSubruleAssignment(a,r,n)}performSubruleAssignment(e,t,r){let{assignment:i,isCrossRef:n}=this.getAssignment(t);if(i)this.assign(i.operator,i.feature,e,r,n);else if(!i){let a=this.current;if(pq(a))a.value+=e.toString();else if(typeof e=="object"&&e){let s=e.$type,u=this.assignWithoutOverride(e,a);s&&(u.$type=s);let h=u;this.stack.pop(),this.stack.push(h)}}}action(e,t){if(!this.isRecording()){let r=this.current;if(!r.$cstNode&&t.feature&&t.operator){r=this.construct(!1);let n=r.$cstNode.feature;this.nodeBuilder.buildCompositeNode(n)}let i={$type:e};this.stack.pop(),this.stack.push(i),t.feature&&t.operator&&this.assign(t.operator,t.feature,r,r.$cstNode,!1)}}construct(e=!0){if(this.isRecording())return;let t=this.current;return OW(t),this.nodeBuilder.construct(t),e&&this.stack.pop(),pq(t)?this.converter.convert(t.value,t.$cstNode):(vme(this.astReflection,t),t)}getAssignment(e){if(!this.assignmentMap.has(e)){let t=L7(e,xm);this.assignmentMap.set(e,{assignment:t,isCrossRef:t?jI(t.terminal):!1})}return this.assignmentMap.get(e)}assign(e,t,r,i,n){let a=this.current,s;switch(n&&typeof r=="string"?s=this.linker.buildReference(a,t,i,r):s=r,e){case"=":{a[t]=s;break}case"?=":{a[t]=!0;break}case"+=":Array.isArray(a[t])||(a[t]=[]),a[t].push(s)}}assignWithoutOverride(e,t){for(let[r,i]of Object.entries(t)){let n=e[r];n===void 0?e[r]=i:Array.isArray(n)&&Array.isArray(i)&&(i.push(...n),e[r]=i)}return e}get definitionErrors(){return this.wrapper.definitionErrors}},yq=class{buildMismatchTokenMessage(e){return Uv.buildMismatchTokenMessage(e)}buildNotAllInputParsedMessage(e){return Uv.buildNotAllInputParsedMessage(e)}buildNoViableAltMessage(e){return Uv.buildNoViableAltMessage(e)}buildEarlyExitMessage(e){return Uv.buildEarlyExitMessage(e)}},cO=class extends yq{buildMismatchTokenMessage({expected:e,actual:t}){return`Expecting ${e.LABEL?"`"+e.LABEL+"`":e.name.endsWith(":KW")?`keyword '${e.name.substring(0,e.name.length-3)}'`:`token of type '${e.name}'`} but found \`${t.image}\`.`}buildNotAllInputParsedMessage({firstRedundant:e}){return`Expecting end of file but found \`${e.image}\`.`}},vq=class extends hO{constructor(){super(...arguments),this.tokens=[],this.elementStack=[],this.lastElementStack=[],this.nextTokenIndex=0,this.stackSize=0}action(){}construct(){}parse(e){this.resetState();let t=this.lexer.tokenize(e);return this.tokens=t.tokens,this.wrapper.input=[...this.tokens],this.mainRule.call(this.wrapper,{}),this.unorderedGroups.clear(),{tokens:this.tokens,elementStack:[...this.lastElementStack],tokenIndex:this.nextTokenIndex}}rule(e,t){let r=this.wrapper.DEFINE_RULE(gq(e.name),this.startImplementation(t).bind(this));return e.entry&&(this.mainRule=r),r}resetState(){this.elementStack=[],this.lastElementStack=[],this.nextTokenIndex=0,this.stackSize=0}startImplementation(e){return t=>{let r=this.keepStackSize();try{e(t)}finally{this.resetStackSize(r)}}}removeUnexpectedElements(){this.elementStack.splice(this.stackSize)}keepStackSize(){let e=this.elementStack.length;return this.stackSize=e,e}resetStackSize(e){this.removeUnexpectedElements(),this.stackSize=e}consume(e,t,r){this.wrapper.wrapConsume(e,t),this.isRecording()||(this.lastElementStack=[...this.elementStack,r],this.nextTokenIndex=this.currIdx+1)}subrule(e,t,r,i){this.before(r),this.wrapper.wrapSubrule(e,t,i),this.after(r)}before(e){this.isRecording()||this.elementStack.push(e)}after(e){if(!this.isRecording()){let t=this.elementStack.lastIndexOf(e);t>=0&&this.elementStack.splice(t)}}get currIdx(){return this.wrapper.currIdx}},Tve={recoveryEnabled:!0,nodeLocationTracking:"full",skipValidations:!0,errorMessageProvider:new cO},Eve=class extends a2e{constructor(e,t){let r=t&&"maxLookahead"in t;super(e,Object.assign(Object.assign(Object.assign({},Tve),{lookaheadStrategy:r?new XN({maxLookahead:t.maxLookahead}):new x2e}),t))}get IS_RECORDING(){return this.RECORDING_PHASE}DEFINE_RULE(e,t){return this.RULE(e,t)}wrapSelfAnalysis(){this.performSelfAnalysis()}wrapConsume(e,t){return this.consume(e,t)}wrapSubrule(e,t,r){return this.subrule(e,t,{ARGS:[r]})}wrapOr(e,t){this.or(e,t)}wrapOption(e,t){this.option(e,t)}wrapMany(e,t){this.many(e,t)}wrapAtLeastOne(e,t){this.atLeastOne(e,t)}}});function Cve(e,t,r){return Gqe({parser:t,tokens:r,rules:new Map,ruleNames:new Map},e),t}function Gqe(e,t){let r=WW(t,!1),i=Vo(t.rules).filter(rc).filter(n=>r.has(n));for(let n of i){let a=Object.assign(Object.assign({},e),{consume:1,optional:1,subrule:1,many:1,or:1});a.rules.set(n.name,e.parser.rule(n,Hv(a,n.definition)))}}function Hv(e,t,r=!1){let i;if(bm(t))i=qqe(e,t);else if(Fv(t))i=Uqe(e,t);else if(xm(t))i=Hv(e,t.terminal);else if(jI(t))i=Sve(e,t);else if(_m(t))i=jqe(e,t);else if(SW(t))i=Vqe(e,t);else if(MW(t))i=Wqe(e,t);else if(H_(t))i=Yqe(e,t);else if(ume(t)){let n=e.consume++;i=()=>e.parser.consume(n,Rf,t)}else throw new C7(t.$cstNode,`Unexpected element type: ${t.$type}`);return Ave(e,r?void 0:pO(t),i,t.cardinality)}function Uqe(e,t){let r=F7(t);return()=>e.parser.action(r,t)}function jqe(e,t){let r=t.rule.ref;if(rc(r)){let i=e.subrule++,n=t.arguments.length>0?Hqe(r,t.arguments):()=>({});return a=>e.parser.subrule(i,Mve(e,r),t,n(a))}else if(vm(r)){let i=e.consume++,n=xq(e,r.name);return()=>e.parser.consume(i,n,t)}else if(r)j_(r);else throw new C7(t.$cstNode,`Undefined rule type: ${t.$type}`)}function Hqe(e,t){let r=t.map(i=>If(i.value));return i=>{let n={};for(let a=0;a<r.length;a++){let s=e.parameters[a],u=r[a];n[s.name]=u(i)}return n}}function If(e){if(rme(e)){let t=If(e.left),r=If(e.right);return i=>t(i)||r(i)}else if(tme(e)){let t=If(e.left),r=If(e.right);return i=>t(i)&&r(i)}else if(ime(e)){let t=If(e.value);return r=>!t(r)}else if(nme(e)){let t=e.parameter.ref.name;return r=>r!==void 0&&r[t]===!0}else if(eme(e)){let t=!!e.true;return()=>t}j_(e)}function Vqe(e,t){if(t.elements.length===1)return Hv(e,t.elements[0]);{let r=[];for(let n of t.elements){let a={ALT:Hv(e,n,!0)},s=pO(n);s&&(a.GATE=If(s)),r.push(a)}let i=e.or++;return n=>e.parser.alternatives(i,r.map(a=>{let s={ALT:()=>a.ALT(n)},u=a.GATE;return u&&(s.GATE=()=>u(n)),s}))}}function Wqe(e,t){if(t.elements.length===1)return Hv(e,t.elements[0]);let r=[];for(let u of t.elements){let h={ALT:Hv(e,u,!0)},d=pO(u);d&&(h.GATE=If(d)),r.push(h)}let i=e.or++,n=(u,h)=>{let d=h.getRuleStack().join("-");return`uGroup_${u}_${d}`},a=u=>e.parser.alternatives(i,r.map((h,d)=>{let p={ALT:()=>!0},g=e.parser;p.ALT=()=>{if(h.ALT(u),!g.isRecording()){let m=n(i,g);g.unorderedGroups.get(m)||g.unorderedGroups.set(m,[]);let x=g.unorderedGroups.get(m);typeof x?.[d]>"u"&&(x[d]=!0)}};let y=h.GATE;return y?p.GATE=()=>y(u):p.GATE=()=>!g.unorderedGroups.get(n(i,g))?.[d],p})),s=Ave(e,pO(t),a,"*");return u=>{s(u),e.parser.isRecording()||e.parser.unorderedGroups.delete(n(i,e.parser))}}function Yqe(e,t){let r=t.elements.map(i=>Hv(e,i));return i=>r.forEach(n=>n(i))}function pO(e){if(H_(e))return e.guardCondition}function Sve(e,t,r=t.terminal){if(r)if(_m(r)&&rc(r.rule.ref)){let i=e.subrule++;return n=>e.parser.subrule(i,Mve(e,r.rule.ref),t,n)}else if(_m(r)&&vm(r.rule.ref)){let i=e.consume++,n=xq(e,r.rule.ref.name);return()=>e.parser.consume(i,n,t)}else if(bm(r)){let i=e.consume++,n=xq(e,r.value);return()=>e.parser.consume(i,n,t)}else throw new Error("Could not build cross reference parser");else{if(!t.type.ref)throw new Error("Could not resolve reference to type: "+t.type.$refText);let i=KW(t.type.ref),n=i?.terminal;if(!n)throw new Error("Could not find name assignment for type: "+F7(t.type.ref));return Sve(e,t,n)}}function qqe(e,t){let r=e.consume++,i=e.tokens[t.value];if(!i)throw new Error("Could not find token for keyword: "+t.value);return()=>e.parser.consume(r,i,t)}function Ave(e,t,r,i){let n=t&&If(t);if(!i)if(n){let a=e.or++;return s=>e.parser.alternatives(a,[{ALT:()=>r(s),GATE:()=>n(s)},{ALT:n2e(),GATE:()=>!n(s)}])}else return r;if(i==="*"){let a=e.many++;return s=>e.parser.many(a,{DEF:()=>r(s),GATE:n?()=>n(s):void 0})}else if(i==="+"){let a=e.many++;if(n){let s=e.or++;return u=>e.parser.alternatives(s,[{ALT:()=>e.parser.atLeastOne(a,{DEF:()=>r(u)}),GATE:()=>n(u)},{ALT:n2e(),GATE:()=>!n(u)}])}else return s=>e.parser.atLeastOne(a,{DEF:()=>r(s)})}else if(i==="?"){let a=e.optional++;return s=>e.parser.optional(a,{DEF:()=>r(s),GATE:n?()=>n(s):void 0})}else j_(i)}function Mve(e,t){let r=Xqe(e,t),i=e.rules.get(r);if(!i)throw new Error(`Rule "${r}" not found."`);return i}function Xqe(e,t){if(rc(t))return t.name;if(e.ruleNames.has(t))return e.ruleNames.get(t);{let r=t,i=r.$container,n=t.$type;for(;!rc(i);)(H_(i)||SW(i)||MW(i))&&(n=i.elements.indexOf(r).toString()+":"+n),r=i,i=i.$container;return n=i.name+":"+n,e.ruleNames.set(t,n),n}}function xq(e,t){let r=e.tokens[t];if(!r)throw new Error(`Token "${t}" not found."`);return r}var Lve=D(()=>{t5(),Mf(),wW(),tc(),j0()});function Rve(e){let t=e.Grammar,r=e.parser.Lexer,i=new vq(e);return Cve(t,i,r.definition),i.finalize(),i}var Dve=D(()=>{dO(),Lve()});function Ive(e){let t=Nve(e);return t.finalize(),t}function Nve(e){let t=e.Grammar,r=e.parser.Lexer,i=new mq(e);return Cve(t,i,r.definition)}var Ove=D(()=>{dO(),Lve()}),fO,Bve=D(()=>{t5(),Mf(),mh(),j0(),P7(),tc(),fO=class{buildTokens(e,t){let r=Vo(WW(e,!1)),i=this.buildTerminalTokens(r),n=this.buildKeywordTokens(r,i,t);return i.forEach(a=>{let s=a.PATTERN;typeof s=="object"&&s&&"test"in s&&UW(s)?n.unshift(a):n.push(a)}),n}buildTerminalTokens(e){return e.filter(vm).filter(t=>!t.fragment).map(t=>this.buildTerminalToken(t)).toArray()}buildTerminalToken(e){let t=IN(e),r=this.requiresCustomPattern(t)?this.regexPatternFunction(t):t,i={name:e.name,PATTERN:r,LINE_BREAKS:!0};return e.hidden&&(i.GROUP=UW(t)?ju.SKIPPED:"hidden"),i}requiresCustomPattern(e){return e.flags.includes("u")?!0:!!(e.source.includes("?<=")||e.source.includes("?<!"))}regexPatternFunction(e){let t=new RegExp(e,e.flags+"y");return(r,i)=>(t.lastIndex=i,t.exec(r))}buildKeywordTokens(e,t,r){return e.filter(rc).flatMap(i=>$v(i).filter(bm)).distinct(i=>i.value).toArray().sort((i,n)=>n.value.length-i.value.length).map(i=>this.buildKeywordToken(i,t,!!r?.caseInsensitive))}buildKeywordToken(e,t,r){return{name:e.value,PATTERN:this.buildKeywordPattern(e,r),LONGER_ALT:this.findLongerAlt(e,t)}}buildKeywordPattern(e,t){return t?new RegExp(Eme(e.value)):e.value}findLongerAlt(e,t){return t.reduce((r,i)=>{let n=i?.PATTERN;return n?.source&&Cme("^"+n.source+"$",e.value)&&r.push(i),r},[])}}}),gO,W0,Pve=D(()=>{Mf(),j0(),gO=class{convert(e,t){let r=t.grammarSource;if(jI(r)&&(r=Dme(r)),_m(r)){let i=r.rule.ref;if(!i)throw new Error("This cst node was not parsed by a rule.");return this.runConverter(i,e,t)}return e}runConverter(e,t,r){var i;switch(e.name.toUpperCase()){case"INT":return W0.convertInt(t);case"STRING":return W0.convertString(t);case"ID":return W0.convertID(t)}switch((i=Gme(e))===null||i===void 0?void 0:i.toLowerCase()){case"number":return W0.convertNumber(t);case"boolean":return W0.convertBoolean(t);case"bigint":return W0.convertBigint(t);case"date":return W0.convertDate(t);default:return t}}},function(e){function t(d){let p="";for(let g=1;g<d.length-1;g++){let y=d.charAt(g);if(y==="\\"){let m=d.charAt(++g);p+=r(m)}else p+=y}return p}e.convertString=t;function r(d){switch(d){case"b":return"\b";case"f":return"\f";case"n":return`
`;case"r":return"\r";case"t":return"	";case"v":return"\v";case"0":return"\0";default:return d}}function i(d){return d.charAt(0)==="^"?d.substring(1):d}e.convertID=i;function n(d){return parseInt(d)}e.convertInt=n;function a(d){return BigInt(d)}e.convertBigint=a;function s(d){return new Date(d)}e.convertDate=s;function u(d){return Number(d)}e.convertNumber=u;function h(d){return d.toLowerCase()==="true"}e.convertBoolean=h}(W0||(W0={}))}),Fve=hi(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t;function r(){if(t===void 0)throw new Error("No runtime abstraction layer installed");return t}(function(i){function n(a){if(a===void 0)throw new Error("No runtime abstraction layer provided");t=a}i.install=n})(r||(r={})),e.default=r}),Kqe=hi(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.stringArray=e.array=e.func=e.error=e.number=e.string=e.boolean=void 0;function t(h){return h===!0||h===!1}e.boolean=t;function r(h){return typeof h=="string"||h instanceof String}e.string=r;function i(h){return typeof h=="number"||h instanceof Number}e.number=i;function n(h){return h instanceof Error}e.error=n;function a(h){return typeof h=="function"}e.func=a;function s(h){return Array.isArray(h)}e.array=s;function u(h){return s(h)&&h.every(d=>r(d))}e.stringArray=u}),$ve=hi(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Emitter=e.Event=void 0;var t=Fve(),r;(function(a){let s={dispose(){}};a.None=function(){return s}})(r||(e.Event=r={}));var i=class{add(a,s=null,u){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(a),this._contexts.push(s),Array.isArray(u)&&u.push({dispose:()=>this.remove(a,s)})}remove(a,s=null){if(!this._callbacks)return;let u=!1;for(let h=0,d=this._callbacks.length;h<d;h++)if(this._callbacks[h]===a)if(this._contexts[h]===s){this._callbacks.splice(h,1),this._contexts.splice(h,1);return}else u=!0;if(u)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...a){if(!this._callbacks)return[];let s=[],u=this._callbacks.slice(0),h=this._contexts.slice(0);for(let d=0,p=u.length;d<p;d++)try{s.push(u[d].apply(h[d],a))}catch(g){(0,t.default)().console.error(g)}return s}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},n=class oOe{constructor(s){this._options=s}get event(){return this._event||(this._event=(s,u,h)=>{this._callbacks||(this._callbacks=new i),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(s,u);let d={dispose:()=>{this._callbacks&&(this._callbacks.remove(s,u),d.dispose=oOe._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(h)&&h.push(d),d}),this._event}fire(s){this._callbacks&&this._callbacks.invoke.call(this._callbacks,s)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};e.Emitter=n,n._noop=function(){}}),Zqe=hi(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CancellationTokenSource=e.CancellationToken=void 0;var t=Fve(),r=Kqe(),i=$ve(),n;(function(h){h.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:i.Event.None}),h.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:i.Event.None});function d(p){let g=p;return g&&(g===h.None||g===h.Cancelled||r.boolean(g.isCancellationRequested)&&!!g.onCancellationRequested)}h.is=d})(n||(e.CancellationToken=n={}));var a=Object.freeze(function(h,d){let p=(0,t.default)().timer.setTimeout(h.bind(d),0);return{dispose(){p.dispose()}}}),s=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?a:(this._emitter||(this._emitter=new i.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},u=class{get token(){return this._token||(this._token=new s),this._token}cancel(){this._token?this._token.cancel():this._token=n.Cancelled}dispose(){this._token?this._token instanceof s&&this._token.dispose():this._token=n.None}};e.CancellationTokenSource=u}),fo={},Pd=D(()=>{Sn(fo,Ke(Zqe(),1))});function bq(){return new Promise(e=>{typeof setImmediate>"u"?setTimeout(e,0):setImmediate(e)})}function zve(){return mO=Date.now(),new fo.CancellationTokenSource}function Gve(e){_q=e}function uS(e){return e===Nf}async function nc(e){if(e===fo.CancellationToken.None)return;let t=Date.now();if(t-mO>=_q&&(mO=t,await bq()),e.isCancellationRequested)throw Nf}var mO,_q,Nf,Y0,Fd=D(()=>{Pd(),mO=0,_q=10,Nf=Symbol("OperationCancelled"),Y0=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=r=>(e(r),this),this.reject=r=>(t(r),this)})}}});function wq(e,t){if(e.length<=1)return e;let r=e.length/2|0,i=e.slice(0,r),n=e.slice(r);wq(i,t),wq(n,t);let a=0,s=0,u=0;for(;a<i.length&&s<n.length;)t(i[a],n[s])<=0?e[u++]=i[a++]:e[u++]=n[s++];for(;a<i.length;)e[u++]=i[a++];for(;s<n.length;)e[u++]=n[s++];return e}function Uve(e,t,r=0){let i=t?[r]:[];for(let n=0;n<e.length;n++){let a=e.charCodeAt(n);jve(a)&&(a===13&&n+1<e.length&&e.charCodeAt(n+1)===10&&n++,i.push(r+n+1))}return i}function jve(e){return e===13||e===10}function Hve(e){let t=e.start,r=e.end;return t.line>r.line||t.line===r.line&&t.character>r.character?{start:r,end:t}:e}function Qqe(e){let t=Hve(e.range);return t!==e.range?{newText:e.newText,range:t}:e}var kq,yO,Jqe=D(()=>{"use strict";kq=class Ste{constructor(t,r,i,n){this._uri=t,this._languageId=r,this._version=i,this._content=n,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(t){if(t){let r=this.offsetAt(t.start),i=this.offsetAt(t.end);return this._content.substring(r,i)}return this._content}update(t,r){for(let i of t)if(Ste.isIncremental(i)){let n=Hve(i.range),a=this.offsetAt(n.start),s=this.offsetAt(n.end);this._content=this._content.substring(0,a)+i.text+this._content.substring(s,this._content.length);let u=Math.max(n.start.line,0),h=Math.max(n.end.line,0),d=this._lineOffsets,p=Uve(i.text,!1,a);if(h-u===p.length)for(let y=0,m=p.length;y<m;y++)d[y+u+1]=p[y];else p.length<1e4?d.splice(u+1,h-u,...p):this._lineOffsets=d=d.slice(0,u+1).concat(p,d.slice(h+1));let g=i.text.length-(s-a);if(g!==0)for(let y=u+1+p.length,m=d.length;y<m;y++)d[y]=d[y]+g}else if(Ste.isFull(i))this._content=i.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received");this._version=r}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=Uve(this._content,!0)),this._lineOffsets}positionAt(t){t=Math.max(Math.min(t,this._content.length),0);let r=this.getLineOffsets(),i=0,n=r.length;if(n===0)return{line:0,character:t};for(;i<n;){let s=Math.floor((i+n)/2);r[s]>t?n=s:i=s+1}let a=i-1;return t=this.ensureBeforeEOL(t,r[a]),{line:a,character:t-r[a]}}offsetAt(t){let r=this.getLineOffsets();if(t.line>=r.length)return this._content.length;if(t.line<0)return 0;let i=r[t.line];if(t.character<=0)return i;let n=t.line+1<r.length?r[t.line+1]:this._content.length,a=Math.min(i+t.character,n);return this.ensureBeforeEOL(a,i)}ensureBeforeEOL(t,r){for(;t>r&&jve(this._content.charCodeAt(t-1));)t--;return t}get lineCount(){return this.getLineOffsets().length}static isIncremental(t){let r=t;return r!=null&&typeof r.text=="string"&&r.range!==void 0&&(r.rangeLength===void 0||typeof r.rangeLength=="number")}static isFull(t){let r=t;return r!=null&&typeof r.text=="string"&&r.range===void 0&&r.rangeLength===void 0}},function(e){function t(n,a,s,u){return new kq(n,a,s,u)}e.create=t;function r(n,a,s){if(n instanceof kq)return n.update(a,s),n;throw new Error("TextDocument.update: document must be created by TextDocument.create")}e.update=r;function i(n,a){let s=n.getText(),u=wq(a.map(Qqe),(p,g)=>{let y=p.range.start.line-g.range.start.line;return y===0?p.range.start.character-g.range.start.character:y}),h=0,d=[];for(let p of u){let g=n.offsetAt(p.range.start);if(g<h)throw new Error("Overlapping edit");g>h&&d.push(s.substring(h,g)),p.newText.length&&d.push(p.newText),h=n.offsetAt(p.range.end)}return d.push(s.substr(h)),d.join("")}e.applyEdits=i}(yO||(yO={}))}),Vve,Of,l5,Wve=D(()=>{(()=>{"use strict";var e={470:n=>{function a(h){if(typeof h!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(h))}function s(h,d){for(var p,g="",y=0,m=-1,x=0,_=0;_<=h.length;++_){if(_<h.length)p=h.charCodeAt(_);else{if(p===47)break;p=47}if(p===47){if(!(m===_-1||x===1))if(m!==_-1&&x===2){if(g.length<2||y!==2||g.charCodeAt(g.length-1)!==46||g.charCodeAt(g.length-2)!==46){if(g.length>2){var E=g.lastIndexOf("/");if(E!==g.length-1){E===-1?(g="",y=0):y=(g=g.slice(0,E)).length-1-g.lastIndexOf("/"),m=_,x=0;continue}}else if(g.length===2||g.length===1){g="",y=0,m=_,x=0;continue}}d&&(g.length>0?g+="/..":g="..",y=2)}else g.length>0?g+="/"+h.slice(m+1,_):g=h.slice(m+1,_),y=_-m-1;m=_,x=0}else p===46&&x!==-1?++x:x=-1}return g}var u={resolve:function(){for(var h,d="",p=!1,g=arguments.length-1;g>=-1&&!p;g--){var y;g>=0?y=arguments[g]:(h===void 0&&(h=process.cwd()),y=h),a(y),y.length!==0&&(d=y+"/"+d,p=y.charCodeAt(0)===47)}return d=s(d,!p),p?d.length>0?"/"+d:"/":d.length>0?d:"."},normalize:function(h){if(a(h),h.length===0)return".";var d=h.charCodeAt(0)===47,p=h.charCodeAt(h.length-1)===47;return(h=s(h,!d)).length!==0||d||(h="."),h.length>0&&p&&(h+="/"),d?"/"+h:h},isAbsolute:function(h){return a(h),h.length>0&&h.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var h,d=0;d<arguments.length;++d){var p=arguments[d];a(p),p.length>0&&(h===void 0?h=p:h+="/"+p)}return h===void 0?".":u.normalize(h)},relative:function(h,d){if(a(h),a(d),h===d||(h=u.resolve(h))===(d=u.resolve(d)))return"";for(var p=1;p<h.length&&h.charCodeAt(p)===47;++p);for(var g=h.length,y=g-p,m=1;m<d.length&&d.charCodeAt(m)===47;++m);for(var x=d.length-m,_=y<x?y:x,E=-1,w=0;w<=_;++w){if(w===_){if(x>_){if(d.charCodeAt(m+w)===47)return d.slice(m+w+1);if(w===0)return d.slice(m+w)}else y>_&&(h.charCodeAt(p+w)===47?E=w:w===0&&(E=0));break}var C=h.charCodeAt(p+w);if(C!==d.charCodeAt(m+w))break;C===47&&(E=w)}var A="";for(w=p+E+1;w<=g;++w)w!==g&&h.charCodeAt(w)!==47||(A.length===0?A+="..":A+="/..");return A.length>0?A+d.slice(m+E):(m+=E,d.charCodeAt(m)===47&&++m,d.slice(m))},_makeLong:function(h){return h},dirname:function(h){if(a(h),h.length===0)return".";for(var d=h.charCodeAt(0),p=d===47,g=-1,y=!0,m=h.length-1;m>=1;--m)if((d=h.charCodeAt(m))===47){if(!y){g=m;break}}else y=!1;return g===-1?p?"/":".":p&&g===1?"//":h.slice(0,g)},basename:function(h,d){if(d!==void 0&&typeof d!="string")throw new TypeError('"ext" argument must be a string');a(h);var p,g=0,y=-1,m=!0;if(d!==void 0&&d.length>0&&d.length<=h.length){if(d.length===h.length&&d===h)return"";var x=d.length-1,_=-1;for(p=h.length-1;p>=0;--p){var E=h.charCodeAt(p);if(E===47){if(!m){g=p+1;break}}else _===-1&&(m=!1,_=p+1),x>=0&&(E===d.charCodeAt(x)?--x==-1&&(y=p):(x=-1,y=_))}return g===y?y=_:y===-1&&(y=h.length),h.slice(g,y)}for(p=h.length-1;p>=0;--p)if(h.charCodeAt(p)===47){if(!m){g=p+1;break}}else y===-1&&(m=!1,y=p+1);return y===-1?"":h.slice(g,y)},extname:function(h){a(h);for(var d=-1,p=0,g=-1,y=!0,m=0,x=h.length-1;x>=0;--x){var _=h.charCodeAt(x);if(_!==47)g===-1&&(y=!1,g=x+1),_===46?d===-1?d=x:m!==1&&(m=1):d!==-1&&(m=-1);else if(!y){p=x+1;break}}return d===-1||g===-1||m===0||m===1&&d===g-1&&d===p+1?"":h.slice(d,g)},format:function(h){if(h===null||typeof h!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof h);return function(d,p){var g=p.dir||p.root,y=p.base||(p.name||"")+(p.ext||"");return g?g===p.root?g+y:g+"/"+y:y}(0,h)},parse:function(h){a(h);var d={root:"",dir:"",base:"",ext:"",name:""};if(h.length===0)return d;var p,g=h.charCodeAt(0),y=g===47;y?(d.root="/",p=1):p=0;for(var m=-1,x=0,_=-1,E=!0,w=h.length-1,C=0;w>=p;--w)if((g=h.charCodeAt(w))!==47)_===-1&&(E=!1,_=w+1),g===46?m===-1?m=w:C!==1&&(C=1):m!==-1&&(C=-1);else if(!E){x=w+1;break}return m===-1||_===-1||C===0||C===1&&m===_-1&&m===x+1?_!==-1&&(d.base=d.name=x===0&&y?h.slice(1,_):h.slice(x,_)):(x===0&&y?(d.name=h.slice(1,m),d.base=h.slice(1,_)):(d.name=h.slice(x,m),d.base=h.slice(x,_)),d.ext=h.slice(m,_)),x>0?d.dir=h.slice(0,x-1):y&&(d.dir="/"),d},sep:"/",delimiter:":",win32:null,posix:null};u.posix=u,n.exports=u}},t={};function r(n){var a=t[n];if(a!==void 0)return a.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,r),s.exports}r.d=(n,a)=>{for(var s in a)r.o(a,s)&&!r.o(n,s)&&Object.defineProperty(n,s,{enumerable:!0,get:a[s]})},r.o=(n,a)=>Object.prototype.hasOwnProperty.call(n,a),r.r=n=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})};var i={};(()=>{let n;r.r(i),r.d(i,{URI:()=>y,Utils:()=>G}),typeof process=="object"?n=process.platform==="win32":typeof navigator=="object"&&(n=navigator.userAgent.indexOf("Windows")>=0);let a=/^\w[\w\d+.-]*$/,s=/^\//,u=/^\/\//;function h(z,F){if(!z.scheme&&F)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${z.authority}", path: "${z.path}", query: "${z.query}", fragment: "${z.fragment}"}`);if(z.scheme&&!a.test(z.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(z.path){if(z.authority){if(!s.test(z.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(u.test(z.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}let d="",p="/",g=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class y{static isUri(F){return F instanceof y||!!F&&typeof F.authority=="string"&&typeof F.fragment=="string"&&typeof F.path=="string"&&typeof F.query=="string"&&typeof F.scheme=="string"&&typeof F.fsPath=="string"&&typeof F.with=="function"&&typeof F.toString=="function"}scheme;authority;path;query;fragment;constructor(F,X,I,j,H,V=!1){typeof F=="object"?(this.scheme=F.scheme||d,this.authority=F.authority||d,this.path=F.path||d,this.query=F.query||d,this.fragment=F.fragment||d):(this.scheme=function(P,q){return P||q?P:"file"}(F,V),this.authority=X||d,this.path=function(P,q){switch(P){case"https":case"http":case"file":q?q[0]!==p&&(q=p+q):q=p}return q}(this.scheme,I||d),this.query=j||d,this.fragment=H||d,h(this,V))}get fsPath(){return C(this,!1)}with(F){if(!F)return this;let{scheme:X,authority:I,path:j,query:H,fragment:V}=F;return X===void 0?X=this.scheme:X===null&&(X=d),I===void 0?I=this.authority:I===null&&(I=d),j===void 0?j=this.path:j===null&&(j=d),H===void 0?H=this.query:H===null&&(H=d),V===void 0?V=this.fragment:V===null&&(V=d),X===this.scheme&&I===this.authority&&j===this.path&&H===this.query&&V===this.fragment?this:new x(X,I,j,H,V)}static parse(F,X=!1){let I=g.exec(F);return I?new x(I[2]||d,B(I[4]||d),B(I[5]||d),B(I[7]||d),B(I[9]||d),X):new x(d,d,d,d,d)}static file(F){let X=d;if(n&&(F=F.replace(/\\/g,p)),F[0]===p&&F[1]===p){let I=F.indexOf(p,2);I===-1?(X=F.substring(2),F=p):(X=F.substring(2,I),F=F.substring(I)||p)}return new x("file",X,F,d,d)}static from(F){let X=new x(F.scheme,F.authority,F.path,F.query,F.fragment);return h(X,!0),X}toString(F=!1){return A(this,F)}toJSON(){return this}static revive(F){if(F){if(F instanceof y)return F;{let X=new x(F);return X._formatted=F.external,X._fsPath=F._sep===m?F.fsPath:null,X}}return F}}let m=n?1:void 0;class x extends y{_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=C(this,!1)),this._fsPath}toString(F=!1){return F?A(this,!0):(this._formatted||(this._formatted=A(this,!1)),this._formatted)}toJSON(){let F={$mid:1};return this._fsPath&&(F.fsPath=this._fsPath,F._sep=m),this._formatted&&(F.external=this._formatted),this.path&&(F.path=this.path),this.scheme&&(F.scheme=this.scheme),this.authority&&(F.authority=this.authority),this.query&&(F.query=this.query),this.fragment&&(F.fragment=this.fragment),F}}let _={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function E(z,F,X){let I,j=-1;for(let H=0;H<z.length;H++){let V=z.charCodeAt(H);if(V>=97&&V<=122||V>=65&&V<=90||V>=48&&V<=57||V===45||V===46||V===95||V===126||F&&V===47||X&&V===91||X&&V===93||X&&V===58)j!==-1&&(I+=encodeURIComponent(z.substring(j,H)),j=-1),I!==void 0&&(I+=z.charAt(H));else{I===void 0&&(I=z.substr(0,H));let P=_[V];P!==void 0?(j!==-1&&(I+=encodeURIComponent(z.substring(j,H)),j=-1),I+=P):j===-1&&(j=H)}}return j!==-1&&(I+=encodeURIComponent(z.substring(j))),I!==void 0?I:z}function w(z){let F;for(let X=0;X<z.length;X++){let I=z.charCodeAt(X);I===35||I===63?(F===void 0&&(F=z.substr(0,X)),F+=_[I]):F!==void 0&&(F+=z[X])}return F!==void 0?F:z}function C(z,F){let X;return X=z.authority&&z.path.length>1&&z.scheme==="file"?`//${z.authority}${z.path}`:z.path.charCodeAt(0)===47&&(z.path.charCodeAt(1)>=65&&z.path.charCodeAt(1)<=90||z.path.charCodeAt(1)>=97&&z.path.charCodeAt(1)<=122)&&z.path.charCodeAt(2)===58?F?z.path.substr(1):z.path[1].toLowerCase()+z.path.substr(2):z.path,n&&(X=X.replace(/\//g,"\\")),X}function A(z,F){let X=F?w:E,I="",{scheme:j,authority:H,path:V,query:P,fragment:q}=z;if(j&&(I+=j,I+=":"),(H||j==="file")&&(I+=p,I+=p),H){let Z=H.indexOf("@");if(Z!==-1){let J=H.substr(0,Z);H=H.substr(Z+1),Z=J.lastIndexOf(":"),Z===-1?I+=X(J,!1,!1):(I+=X(J.substr(0,Z),!1,!1),I+=":",I+=X(J.substr(Z+1),!1,!0)),I+="@"}H=H.toLowerCase(),Z=H.lastIndexOf(":"),Z===-1?I+=X(H,!1,!0):(I+=X(H.substr(0,Z),!1,!0),I+=H.substr(Z))}if(V){if(V.length>=3&&V.charCodeAt(0)===47&&V.charCodeAt(2)===58){let Z=V.charCodeAt(1);Z>=65&&Z<=90&&(V=`/${String.fromCharCode(Z+32)}:${V.substr(3)}`)}else if(V.length>=2&&V.charCodeAt(1)===58){let Z=V.charCodeAt(0);Z>=65&&Z<=90&&(V=`${String.fromCharCode(Z+32)}:${V.substr(2)}`)}I+=X(V,!0,!1)}return P&&(I+="?",I+=X(P,!1,!1)),q&&(I+="#",I+=F?q:E(q,!1,!1)),I}function M(z){try{return decodeURIComponent(z)}catch{return z.length>3?z.substr(0,3)+M(z.substr(3)):z}}let N=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function B(z){return z.match(N)?z.replace(N,F=>M(F)):z}var O=r(470);let L=O.posix||O,$="/";var G;(function(z){z.joinPath=function(F,...X){return F.with({path:L.join(F.path,...X)})},z.resolvePath=function(F,...X){let I=F.path,j=!1;I[0]!==$&&(I=$+I,j=!0);let H=L.resolve(I,...X);return j&&H[0]===$&&!F.authority&&(H=H.substring(1)),F.with({path:H})},z.dirname=function(F){if(F.path.length===0||F.path===$)return F;let X=L.dirname(F.path);return X.length===1&&X.charCodeAt(0)===46&&(X=""),F.with({path:X})},z.basename=function(F){return L.basename(F.path)},z.extname=function(F){return L.extname(F.path)}})(G||(G={}))})(),Vve=i})(),{URI:Of,Utils:l5}=Vve}),q0,Bf=D(()=>{Wve(),function(e){e.basename=l5.basename,e.dirname=l5.dirname,e.extname=l5.extname,e.joinPath=l5.joinPath,e.resolvePath=l5.resolvePath;function t(i,n){return i?.toString()===n?.toString()}e.equals=t;function r(i,n){let a=typeof i=="string"?i:i.path,s=typeof n=="string"?n:n.path,u=a.split("/").filter(y=>y.length>0),h=s.split("/").filter(y=>y.length>0),d=0;for(;d<u.length&&u[d]===h[d];d++);let p="../".repeat(u.length-d),g=h.slice(d).join("/");return p+g}e.relative=r}(q0||(q0={}))}),Ps,Tq,Eq,hS=D(()=>{Jqe(),hS(),Pd(),tc(),Bf(),function(e){e[e.Changed=0]="Changed",e[e.Parsed=1]="Parsed",e[e.IndexedContent=2]="IndexedContent",e[e.ComputedScopes=3]="ComputedScopes",e[e.Linked=4]="Linked",e[e.IndexedReferences=5]="IndexedReferences",e[e.Validated=6]="Validated"}(Ps||(Ps={})),Tq=class{constructor(e){this.serviceRegistry=e.ServiceRegistry,this.textDocuments=e.workspace.TextDocuments,this.fileSystemProvider=e.workspace.FileSystemProvider}async fromUri(e,t=fo.CancellationToken.None){let r=await this.fileSystemProvider.readFile(e);return this.createAsync(e,r,t)}fromTextDocument(e,t,r){return t=t??Of.parse(e.uri),r?this.createAsync(t,e,r):this.create(t,e)}fromString(e,t,r){return r?this.createAsync(t,e,r):this.create(t,e)}fromModel(e,t){return this.create(t,{$model:e})}create(e,t){if(typeof t=="string"){let r=this.parse(e,t);return this.createLangiumDocument(r,e,void 0,t)}else if("$model"in t){let r={value:t.$model,parserErrors:[],lexerErrors:[]};return this.createLangiumDocument(r,e)}else{let r=this.parse(e,t.getText());return this.createLangiumDocument(r,e,t)}}async createAsync(e,t,r){if(typeof t=="string"){let i=await this.parseAsync(e,t,r);return this.createLangiumDocument(i,e,void 0,t)}else{let i=await this.parseAsync(e,t.getText(),r);return this.createLangiumDocument(i,e,t)}}createLangiumDocument(e,t,r,i){let n;if(r)n={parseResult:e,uri:t,state:Ps.Parsed,references:[],textDocument:r};else{let a=this.createTextDocumentGetter(t,i);n={parseResult:e,uri:t,state:Ps.Parsed,references:[],get textDocument(){return a()}}}return e.value.$document=n,n}async update(e,t){var r,i;let n=(r=e.parseResult.value.$cstNode)===null||r===void 0?void 0:r.root.fullText,a=(i=this.textDocuments)===null||i===void 0?void 0:i.get(e.uri.toString()),s=a?a.getText():await this.fileSystemProvider.readFile(e.uri);if(a)Object.defineProperty(e,"textDocument",{value:a});else{let u=this.createTextDocumentGetter(e.uri,s);Object.defineProperty(e,"textDocument",{get:u})}return n!==s&&(e.parseResult=await this.parseAsync(e.uri,s,t),e.parseResult.value.$document=e),e.state=Ps.Parsed,e}parse(e,t){return this.serviceRegistry.getServices(e).parser.LangiumParser.parse(t)}parseAsync(e,t,r){return this.serviceRegistry.getServices(e).parser.AsyncParser.parse(t,r)}createTextDocumentGetter(e,t){let r=this.serviceRegistry,i;return()=>i??(i=yO.create(e.toString(),r.getServices(e).LanguageMetaData.languageId,0,t??""))}},Eq=class{constructor(e){this.documentMap=new Map,this.langiumDocumentFactory=e.workspace.LangiumDocumentFactory}get all(){return Vo(this.documentMap.values())}addDocument(e){let t=e.uri.toString();if(this.documentMap.has(t))throw new Error(`A document with the URI '${t}' is already present.`);this.documentMap.set(t,e)}getDocument(e){let t=e.toString();return this.documentMap.get(t)}async getOrCreateDocument(e,t){let r=this.getDocument(e);return r||(r=await this.langiumDocumentFactory.fromUri(e,t),this.addDocument(r),r)}createDocument(e,t,r){if(r)return this.langiumDocumentFactory.fromString(t,e,r).then(i=>(this.addDocument(i),i));{let i=this.langiumDocumentFactory.fromString(t,e);return this.addDocument(i),i}}hasDocument(e){return this.documentMap.has(e.toString())}invalidateDocument(e){let t=e.toString(),r=this.documentMap.get(t);return r&&(r.state=Ps.Changed,r.precomputedScopes=void 0,r.references=[],r.diagnostics=void 0),r}deleteDocument(e){let t=e.toString(),r=this.documentMap.get(t);return r&&(r.state=Ps.Changed,this.documentMap.delete(t)),r}}}),Cq,Yve=D(()=>{Pd(),Nd(),mh(),Fd(),hS(),Cq=class{constructor(e){this.reflection=e.shared.AstReflection,this.langiumDocuments=()=>e.shared.workspace.LangiumDocuments,this.scopeProvider=e.references.ScopeProvider,this.astNodeLocator=e.workspace.AstNodeLocator}async link(e,t=fo.CancellationToken.None){for(let r of wm(e.parseResult.value))await nc(t),MN(r).forEach(i=>this.doLink(i,e))}doLink(e,t){let r=e.reference;if(r._ref===void 0)try{let i=this.getCandidate(e);if(_7(i))r._ref=i;else if(r._nodeDescription=i,this.langiumDocuments().hasDocument(i.documentUri)){let n=this.loadAstNode(i);r._ref=n??this.createLinkingError(e,i)}}catch(i){r._ref=Object.assign(Object.assign({},e),{message:`An error occurred while resolving reference to '${r.$refText}': ${i}`})}t.references.push(r)}unlink(e){for(let t of e.references)delete t._ref,delete t._nodeDescription;e.references=[]}getCandidate(e){return this.scopeProvider.getScope(e).getElement(e.reference.$refText)??this.createLinkingError(e)}buildReference(e,t,r,i){let n=this,a={$refNode:r,$refText:i,get ref(){var s;if(ol(this._ref))return this._ref;if(U1e(this._nodeDescription)){let u=n.loadAstNode(this._nodeDescription);this._ref=u??n.createLinkingError({reference:a,container:e,property:t},this._nodeDescription)}else if(this._ref===void 0){let u=n.getLinkedNode({reference:a,container:e,property:t});if(u.error&&Vc(e).state<Ps.ComputedScopes)return;this._ref=(s=u.node)!==null&&s!==void 0?s:u.error,this._nodeDescription=u.descr}return ol(this._ref)?this._ref:void 0},get $nodeDescription(){return this._nodeDescription},get error(){return _7(this._ref)?this._ref:void 0}};return a}getLinkedNode(e){try{let t=this.getCandidate(e);if(_7(t))return{error:t};let r=this.loadAstNode(t);return r?{node:r,descr:t}:{descr:t,error:this.createLinkingError(e,t)}}catch(t){return{error:Object.assign(Object.assign({},e),{message:`An error occurred while resolving reference to '${e.reference.$refText}': ${t}`})}}}loadAstNode(e){if(e.node)return e.node;let t=this.langiumDocuments().getDocument(e.documentUri);if(t)return this.astNodeLocator.getAstNode(t.parseResult.value,e.path)}createLinkingError(e,t){let r=Vc(e.container);r.state<Ps.ComputedScopes&&console.warn(`Attempted reference resolution before document reached ComputedScopes state (${r.uri}).`);let i=this.reflection.getReferenceType(e);return Object.assign(Object.assign({},e),{message:`Could not resolve reference to ${i} named '${e.reference.$refText}'.`,targetDescription:t})}}});function qve(e){return typeof e.name=="string"}var Sq,Xve=D(()=>{j0(),Sq=class{getName(e){if(qve(e))return e.name}getNameNode(e){return YW(e.$cstNode,"name")}}}),Aq,Kve=D(()=>{j0(),Nd(),mh(),U0(),tc(),Bf(),Aq=class{constructor(e){this.nameProvider=e.references.NameProvider,this.index=e.shared.workspace.IndexManager,this.nodeLocator=e.workspace.AstNodeLocator}findDeclaration(e){if(e){let t=Bme(e),r=e.astNode;if(t&&r){let i=r[t.feature];if(ec(i))return i.ref;if(Array.isArray(i)){for(let n of i)if(ec(n)&&n.$refNode&&n.$refNode.offset<=e.offset&&n.$refNode.end>=e.end)return n.ref}}if(r){let i=this.nameProvider.getNameNode(r);if(i&&(i===e||j1e(e,i)))return r}}}findDeclarationNode(e){let t=this.findDeclaration(e);if(t?.$cstNode)return this.nameProvider.getNameNode(t)??t.$cstNode}findReferences(e,t){let r=[];if(t.includeDeclaration){let n=this.getReferenceToSelf(e);n&&r.push(n)}let i=this.index.findAllReferences(e,this.nodeLocator.getAstNodePath(e));return t.documentUri&&(i=i.filter(n=>q0.equals(n.sourceUri,t.documentUri))),r.push(...i),Vo(r)}getReferenceToSelf(e){let t=this.nameProvider.getNameNode(e);if(t){let r=Vc(e),i=this.nodeLocator.getAstNodePath(e);return{sourceUri:r.uri,sourcePath:i,targetUri:r.uri,targetPath:i,segment:E7(t),local:!0}}}}}),u5,cS,dS=D(()=>{tc(),u5=class{constructor(e){if(this.map=new Map,e)for(let[t,r]of e)this.add(t,r)}get size(){return k7.sum(Vo(this.map.values()).map(e=>e.length))}clear(){this.map.clear()}delete(e,t){if(t===void 0)return this.map.delete(e);{let r=this.map.get(e);if(r){let i=r.indexOf(t);if(i>=0)return r.length===1?this.map.delete(e):r.splice(i,1),!0}return!1}}get(e){var t;return(t=this.map.get(e))!==null&&t!==void 0?t:[]}has(e,t){if(t===void 0)return this.map.has(e);{let r=this.map.get(e);return r?r.indexOf(t)>=0:!1}}add(e,t){return this.map.has(e)?this.map.get(e).push(t):this.map.set(e,[t]),this}addAll(e,t){return this.map.has(e)?this.map.get(e).push(...t):this.map.set(e,Array.from(t)),this}forEach(e){this.map.forEach((t,r)=>t.forEach(i=>e(i,r,this)))}[Symbol.iterator](){return this.entries().iterator()}entries(){return Vo(this.map.entries()).flatMap(([e,t])=>t.map(r=>[e,r]))}keys(){return Vo(this.map.keys())}values(){return Vo(this.map.values()).flat()}entriesGroupedByKey(){return Vo(this.map.entries())}},cS=class{get size(){return this.map.size}constructor(e){if(this.map=new Map,this.inverse=new Map,e)for(let[t,r]of e)this.set(t,r)}clear(){this.map.clear(),this.inverse.clear()}set(e,t){return this.map.set(e,t),this.inverse.set(t,e),this}get(e){return this.map.get(e)}getKey(e){return this.inverse.get(e)}delete(e){let t=this.map.get(e);return t!==void 0?(this.map.delete(e),this.inverse.delete(t),!0):!1}}}),Mq,Zve=D(()=>{Pd(),mh(),dS(),Fd(),Mq=class{constructor(e){this.nameProvider=e.references.NameProvider,this.descriptions=e.workspace.AstNodeDescriptionProvider}async computeExports(e,t=fo.CancellationToken.None){return this.computeExportsForNode(e.parseResult.value,e,void 0,t)}async computeExportsForNode(e,t,r=AN,i=fo.CancellationToken.None){let n=[];this.exportNode(e,n,t);for(let a of r(e))await nc(i),this.exportNode(a,n,t);return n}exportNode(e,t,r){let i=this.nameProvider.getName(e);i&&t.push(this.descriptions.createDescription(e,i,r))}async computeLocalScopes(e,t=fo.CancellationToken.None){let r=e.parseResult.value,i=new u5;for(let n of $v(r))await nc(t),this.processNode(n,e,i);return i}processNode(e,t,r){let i=e.$container;if(i){let n=this.nameProvider.getName(e);n&&r.add(i,this.descriptions.createDescription(e,n,t))}}}}),vO,Lq,Qve,Jve=D(()=>{tc(),vO=class{constructor(e,t,r){var i;this.elements=e,this.outerScope=t,this.caseInsensitive=(i=r?.caseInsensitive)!==null&&i!==void 0?i:!1}getAllElements(){return this.outerScope?this.elements.concat(this.outerScope.getAllElements()):this.elements}getElement(e){let t=this.caseInsensitive?this.elements.find(r=>r.name.toLowerCase()===e.toLowerCase()):this.elements.find(r=>r.name===e);if(t)return t;if(this.outerScope)return this.outerScope.getElement(e)}},Lq=class{constructor(e,t,r){var i;this.elements=new Map,this.caseInsensitive=(i=r?.caseInsensitive)!==null&&i!==void 0?i:!1;for(let n of e){let a=this.caseInsensitive?n.name.toLowerCase():n.name;this.elements.set(a,n)}this.outerScope=t}getElement(e){let t=this.caseInsensitive?e.toLowerCase():e,r=this.elements.get(t);if(r)return r;if(this.outerScope)return this.outerScope.getElement(e)}getAllElements(){let e=Vo(this.elements.values());return this.outerScope&&(e=e.concat(this.outerScope.getAllElements())),e}},Qve={getElement(){},getAllElements(){return w7}}}),pS,xO,fS,Rq,bO,Dq=D(()=>{pS=class{constructor(){this.toDispose=[],this.isDisposed=!1}onDispose(e){this.toDispose.push(e)}dispose(){this.throwIfDisposed(),this.clear(),this.isDisposed=!0,this.toDispose.forEach(e=>e.dispose())}throwIfDisposed(){if(this.isDisposed)throw new Error("This cache has already been disposed")}},xO=class extends pS{constructor(){super(...arguments),this.cache=new Map}has(e){return this.throwIfDisposed(),this.cache.has(e)}set(e,t){this.throwIfDisposed(),this.cache.set(e,t)}get(e,t){if(this.throwIfDisposed(),this.cache.has(e))return this.cache.get(e);if(t){let r=t();return this.cache.set(e,r),r}else return}delete(e){return this.throwIfDisposed(),this.cache.delete(e)}clear(){this.throwIfDisposed(),this.cache.clear()}},fS=class extends pS{constructor(e){super(),this.cache=new Map,this.converter=e??(t=>t)}has(e,t){return this.throwIfDisposed(),this.cacheForContext(e).has(t)}set(e,t,r){this.throwIfDisposed(),this.cacheForContext(e).set(t,r)}get(e,t,r){this.throwIfDisposed();let i=this.cacheForContext(e);if(i.has(t))return i.get(t);if(r){let n=r();return i.set(t,n),n}else return}delete(e,t){return this.throwIfDisposed(),this.cacheForContext(e).delete(t)}clear(e){if(this.throwIfDisposed(),e){let t=this.converter(e);this.cache.delete(t)}else this.cache.clear()}cacheForContext(e){let t=this.converter(e),r=this.cache.get(t);return r||(r=new Map,this.cache.set(t,r)),r}},Rq=class extends fS{constructor(e){super(t=>t.toString()),this.onDispose(e.workspace.DocumentBuilder.onUpdate((t,r)=>{let i=t.concat(r);for(let n of i)this.clear(n)}))}},bO=class extends xO{constructor(e){super(),this.onDispose(e.workspace.DocumentBuilder.onUpdate(()=>{this.clear()}))}}}),Iq,exe=D(()=>{Jve(),mh(),tc(),Dq(),Iq=class{constructor(e){this.reflection=e.shared.AstReflection,this.nameProvider=e.references.NameProvider,this.descriptions=e.workspace.AstNodeDescriptionProvider,this.indexManager=e.shared.workspace.IndexManager,this.globalScopeCache=new bO(e.shared)}getScope(e){let t=[],r=this.reflection.getReferenceType(e),i=Vc(e.container).precomputedScopes;if(i){let a=e.container;do{let s=i.get(a);s.length>0&&t.push(Vo(s).filter(u=>this.reflection.isSubtype(u.type,r))),a=a.$container}while(a)}let n=this.getGlobalScope(r,e);for(let a=t.length-1;a>=0;a--)n=this.createScope(t[a],n);return n}createScope(e,t,r){return new vO(Vo(e),t,r)}createScopeForNodes(e,t,r){let i=Vo(e).map(n=>{let a=this.nameProvider.getName(n);if(a)return this.descriptions.createDescription(n,a)}).nonNullable();return new vO(i,t,r)}getGlobalScope(e,t){return this.globalScopeCache.get(e,()=>new Lq(this.indexManager.allElements(e)))}}});function txe(e){return typeof e.$comment=="string"}function rxe(e){return typeof e=="object"&&!!e&&("$ref"in e||"$error"in e)}var Nq,Oq=D(()=>{Wve(),Nd(),mh(),j0(),Nq=class{constructor(e){this.ignoreProperties=new Set(["$container","$containerProperty","$containerIndex","$document","$cstNode"]),this.langiumDocuments=e.shared.workspace.LangiumDocuments,this.astNodeLocator=e.workspace.AstNodeLocator,this.nameProvider=e.references.NameProvider,this.commentProvider=e.documentation.CommentProvider}serialize(e,t={}){let r=t?.replacer,i=(a,s)=>this.replacer(a,s,t),n=r?(a,s)=>r(a,s,i):i;try{return this.currentDocument=Vc(e),JSON.stringify(e,n,t?.space)}finally{this.currentDocument=void 0}}deserialize(e,t={}){let r=JSON.parse(e);return this.linkNode(r,r,t),r}replacer(e,t,{refText:r,sourceText:i,textRegions:n,comments:a,uriConverter:s}){var u,h,d,p;if(!this.ignoreProperties.has(e))if(ec(t)){let g=t.ref,y=r?t.$refText:void 0;if(g){let m=Vc(g),x="";this.currentDocument&&this.currentDocument!==m&&(s?x=s(m.uri,t):x=m.uri.toString());let _=this.astNodeLocator.getAstNodePath(g);return{$ref:`${x}#${_}`,$refText:y}}else return{$error:(h=(u=t.error)===null||u===void 0?void 0:u.message)!==null&&h!==void 0?h:"Could not resolve reference",$refText:y}}else if(ol(t)){let g;if(n&&(g=this.addAstNodeRegionWithAssignmentsTo(Object.assign({},t)),(!e||t.$document)&&g?.$textRegion&&(g.$textRegion.documentURI=(d=this.currentDocument)===null||d===void 0?void 0:d.uri.toString())),i&&!e&&(g??(g=Object.assign({},t)),g.$sourceText=(p=t.$cstNode)===null||p===void 0?void 0:p.text),a){g??(g=Object.assign({},t));let y=this.commentProvider.getComment(t);y&&(g.$comment=y.replace(/\r/g,""))}return g??t}else return t}addAstNodeRegionWithAssignmentsTo(e){let t=r=>({offset:r.offset,end:r.end,length:r.length,range:r.range});if(e.$cstNode){let r=e.$textRegion=t(e.$cstNode),i=r.assignments={};return Object.keys(e).filter(n=>!n.startsWith("$")).forEach(n=>{let a=Nme(e.$cstNode,n).map(t);a.length!==0&&(i[n]=a)}),e}}linkNode(e,t,r,i,n,a){for(let[u,h]of Object.entries(e))if(Array.isArray(h))for(let d=0;d<h.length;d++){let p=h[d];rxe(p)?h[d]=this.reviveReference(e,u,t,p,r):ol(p)&&this.linkNode(p,t,r,e,u,d)}else rxe(h)?e[u]=this.reviveReference(e,u,t,h,r):ol(h)&&this.linkNode(h,t,r,e,u);let s=e;s.$container=i,s.$containerProperty=n,s.$containerIndex=a}reviveReference(e,t,r,i,n){let a=i.$refText,s=i.$error;if(i.$ref){let u=this.getRefNode(r,i.$ref,n.uriConverter);if(ol(u))return a||(a=this.nameProvider.getName(u)),{$refText:a??"",ref:u};s=u}if(s){let u={$refText:a??""};return u.error={container:e,property:t,message:s,reference:u},u}else return}getRefNode(e,t,r){try{let i=t.indexOf("#");if(i===0)return this.astNodeLocator.getAstNode(e,t.substring(1))||"Could not resolve path: "+t;if(i<0){let u=r?r(t):Of.parse(t),h=this.langiumDocuments.getDocument(u);return h?h.parseResult.value:"Could not find document for URI: "+t}let n=r?r(t.substring(0,i)):Of.parse(t.substring(0,i)),a=this.langiumDocuments.getDocument(n);return a?i===t.length-1?a.parseResult.value:this.astNodeLocator.getAstNode(a.parseResult.value,t.substring(i+1))||"Could not resolve URI: "+t:"Could not find document for URI: "+t}catch(i){return String(i)}}}}),Bq,ixe=D(()=>{Bf(),Bq=class{register(e){if(!this.singleton&&!this.map){this.singleton=e;return}if(!this.map&&(this.map={},this.singleton)){for(let t of this.singleton.LanguageMetaData.fileExtensions)this.map[t]=this.singleton;this.singleton=void 0}for(let t of e.LanguageMetaData.fileExtensions)this.map[t]!==void 0&&this.map[t]!==e&&console.warn(`The file extension ${t} is used by multiple languages. It is now assigned to '${e.LanguageMetaData.languageId}'.`),this.map[t]=e}getServices(e){if(this.singleton!==void 0)return this.singleton;if(this.map===void 0)throw new Error("The service registry is empty. Use `register` to register the services of a language.");let t=q0.extname(e),r=this.map[t];if(!r)throw new Error(`The service registry contains no services for the extension '${t}'.`);return r}get all(){return this.singleton!==void 0?[this.singleton]:this.map!==void 0?Object.values(this.map):[]}}});function Pq(e){return{code:e}}var gS,Fq,_O=D(()=>{dS(),Fd(),tc(),function(e){e.all=["fast","slow","built-in"]}(gS||(gS={})),Fq=class{constructor(e){this.entries=new u5,this.reflection=e.shared.AstReflection}register(e,t=this,r="fast"){if(r==="built-in")throw new Error("The 'built-in' category is reserved for lexer, parser, and linker errors.");for(let[i,n]of Object.entries(e)){let a=n;if(Array.isArray(a))for(let s of a){let u={check:this.wrapValidationException(s,t),category:r};this.addEntry(i,u)}else if(typeof a=="function"){let s={check:this.wrapValidationException(a,t),category:r};this.addEntry(i,s)}}}wrapValidationException(e,t){return async(r,i,n)=>{try{await e.call(t,r,i,n)}catch(a){if(uS(a))throw a;console.error("An error occurred during validation:",a);let s=a instanceof Error?a.message:String(a);a instanceof Error&&a.stack&&console.error(a.stack),i("error","An error occurred during validation: "+s,{node:r})}}}addEntry(e,t){if(e==="AstNode"){this.entries.add("AstNode",t);return}for(let r of this.reflection.getAllSubTypes(e))this.entries.add(r,t)}getChecks(e,t){let r=Vo(this.entries.get(e)).concat(this.entries.get("AstNode"));return t&&(r=r.filter(i=>t.includes(i.category))),r.map(i=>i.check)}}});function nxe(e){if(e.range)return e.range;let t;return typeof e.property=="string"?t=YW(e.node.$cstNode,e.property,e.index):typeof e.keyword=="string"&&(t=Ome(e.node.$cstNode,e.keyword,e.index)),t??(t=e.node.$cstNode),t?t.range:{start:{line:0,character:0},end:{line:0,character:0}}}function wO(e){switch(e){case"error":return 1;case"warning":return 2;case"info":return 3;case"hint":return 4;default:throw new Error("Invalid diagnostic severity: "+e)}}var $q,Pf,axe=D(()=>{Pd(),j0(),mh(),U0(),Fd(),_O(),$q=class{constructor(e){this.validationRegistry=e.validation.ValidationRegistry,this.metadata=e.LanguageMetaData}async validateDocument(e,t={},r=fo.CancellationToken.None){let i=e.parseResult,n=[];if(await nc(r),(!t.categories||t.categories.includes("built-in"))&&(this.processLexingErrors(i,n,t),t.stopAfterLexingErrors&&n.some(a=>{var s;return((s=a.data)===null||s===void 0?void 0:s.code)===Pf.LexingError})||(this.processParsingErrors(i,n,t),t.stopAfterParsingErrors&&n.some(a=>{var s;return((s=a.data)===null||s===void 0?void 0:s.code)===Pf.ParsingError}))||(this.processLinkingErrors(e,n,t),t.stopAfterLinkingErrors&&n.some(a=>{var s;return((s=a.data)===null||s===void 0?void 0:s.code)===Pf.LinkingError}))))return n;try{n.push(...await this.validateAst(i.value,t,r))}catch(a){if(uS(a))throw a;console.error("An error occurred during validation:",a)}return await nc(r),n}processLexingErrors(e,t,r){for(let i of e.lexerErrors){let n={severity:wO("error"),range:{start:{line:i.line-1,character:i.column-1},end:{line:i.line-1,character:i.column+i.length-1}},message:i.message,data:Pq(Pf.LexingError),source:this.getSource()};t.push(n)}}processParsingErrors(e,t,r){for(let i of e.parserErrors){let n;if(isNaN(i.token.startOffset)){if("previousToken"in i){let a=i.previousToken;if(isNaN(a.startOffset)){let s={line:0,character:0};n={start:s,end:s}}else{let s={line:a.endLine-1,character:a.endColumn};n={start:s,end:s}}}}else n=zI(i.token);if(n){let a={severity:wO("error"),range:n,message:i.message,data:Pq(Pf.ParsingError),source:this.getSource()};t.push(a)}}}processLinkingErrors(e,t,r){for(let i of e.references){let n=i.error;if(n){let a={node:n.container,property:n.property,index:n.index,data:{code:Pf.LinkingError,containerType:n.container.$type,property:n.property,refText:n.reference.$refText}};t.push(this.toDiagnostic("error",n.message,a))}}}async validateAst(e,t,r=fo.CancellationToken.None){let i=[],n=(a,s,u)=>{i.push(this.toDiagnostic(a,s,u))};return await Promise.all(wm(e).map(async a=>{await nc(r);let s=this.validationRegistry.getChecks(a.$type,t.categories);for(let u of s)await u(a,n,r)})),i}toDiagnostic(e,t,r){return{message:t,range:nxe(r),severity:wO(e),code:r.code,codeDescription:r.codeDescription,tags:r.tags,relatedInformation:r.relatedInformation,data:r.data,source:this.getSource()}}getSource(){return this.metadata.languageId}},function(e){e.LexingError="lexing-error",e.ParsingError="parsing-error",e.LinkingError="linking-error"}(Pf||(Pf={}))}),zq,Gq,sxe=D(()=>{Pd(),Nd(),mh(),U0(),Fd(),Bf(),zq=class{constructor(e){this.astNodeLocator=e.workspace.AstNodeLocator,this.nameProvider=e.references.NameProvider}createDescription(e,t,r=Vc(e)){t??(t=this.nameProvider.getName(e));let i=this.astNodeLocator.getAstNodePath(e);if(!t)throw new Error(`Node at path ${i} has no name.`);let n,a=()=>{var s;return n??(n=E7((s=this.nameProvider.getNameNode(e))!==null&&s!==void 0?s:e.$cstNode))};return{node:e,name:t,get nameSegment(){return a()},selectionSegment:E7(e.$cstNode),type:e.$type,documentUri:r.uri,path:i}}},Gq=class{constructor(e){this.nodeLocator=e.workspace.AstNodeLocator}async createDescriptions(e,t=fo.CancellationToken.None){let r=[],i=e.parseResult.value;for(let n of wm(i))await nc(t),MN(n).filter(a=>!_7(a)).forEach(a=>{let s=this.createDescription(a);s&&r.push(s)});return r}createDescription(e){let t=e.reference.$nodeDescription,r=e.reference.$refNode;if(!t||!r)return;let i=Vc(e.container).uri;return{sourceUri:i,sourcePath:this.nodeLocator.getAstNodePath(e.container),targetUri:t.documentUri,targetPath:t.path,segment:E7(r),local:q0.equals(t.documentUri,i)}}}}),Uq,oxe=D(()=>{Uq=class{constructor(){this.segmentSeparator="/",this.indexSeparator="@"}getAstNodePath(e){if(e.$container){let t=this.getAstNodePath(e.$container),r=this.getPathSegment(e);return t+this.segmentSeparator+r}return""}getPathSegment({$containerProperty:e,$containerIndex:t}){if(!e)throw new Error("Missing '$containerProperty' in AST node.");return t!==void 0?e+this.indexSeparator+t:e}getAstNode(e,t){return t.split(this.segmentSeparator).reduce((r,i)=>{if(!r||i.length===0)return r;let n=i.indexOf(this.indexSeparator);if(n>0){let a=i.substring(0,n),s=parseInt(i.substring(n+1));return r[a]?.[s]}return r[i]},e)}}}),jq,lxe=D(()=>{Fd(),jq=class{constructor(e){this._ready=new Y0,this.settings={},this.workspaceConfig=!1,this.serviceRegistry=e.ServiceRegistry}get ready(){return this._ready.promise}initialize(e){var t,r;this.workspaceConfig=(r=(t=e.capabilities.workspace)===null||t===void 0?void 0:t.configuration)!==null&&r!==void 0?r:!1}async initialized(e){if(this.workspaceConfig){if(e.register){let t=this.serviceRegistry.all;e.register({section:t.map(r=>this.toSectionName(r.LanguageMetaData.languageId))})}if(e.fetchConfiguration){let t=this.serviceRegistry.all.map(i=>({section:this.toSectionName(i.LanguageMetaData.languageId)})),r=await e.fetchConfiguration(t);t.forEach((i,n)=>{this.updateSectionConfiguration(i.section,r[n])})}}this._ready.resolve()}updateConfiguration(e){e.settings&&Object.keys(e.settings).forEach(t=>{this.updateSectionConfiguration(t,e.settings[t])})}updateSectionConfiguration(e,t){this.settings[e]=t}async getConfiguration(e,t){await this.ready;let r=this.toSectionName(e);if(this.settings[r])return this.settings[r][t]}toSectionName(e){return`${e}`}}}),h5,uxe=D(()=>{(function(e){function t(r){return{dispose:async()=>await r()}}e.create=t})(h5||(h5={}))}),Hq,hxe=D(()=>{Pd(),uxe(),dS(),Fd(),tc(),_O(),hS(),Hq=class{constructor(e){this.updateBuildOptions={validation:{categories:["built-in","fast"]}},this.updateListeners=[],this.buildPhaseListeners=new u5,this.buildState=new Map,this.documentBuildWaiters=new Map,this.currentState=Ps.Changed,this.langiumDocuments=e.workspace.LangiumDocuments,this.langiumDocumentFactory=e.workspace.LangiumDocumentFactory,this.indexManager=e.workspace.IndexManager,this.serviceRegistry=e.ServiceRegistry}async build(e,t={},r=fo.CancellationToken.None){var i,n;for(let a of e){let s=a.uri.toString();if(a.state===Ps.Validated){if(typeof t.validation=="boolean"&&t.validation)a.state=Ps.IndexedReferences,a.diagnostics=void 0,this.buildState.delete(s);else if(typeof t.validation=="object"){let u=this.buildState.get(s),h=(i=u?.result)===null||i===void 0?void 0:i.validationChecks;if(h){let d=((n=t.validation.categories)!==null&&n!==void 0?n:gS.all).filter(p=>!h.includes(p));d.length>0&&(this.buildState.set(s,{completed:!1,options:{validation:Object.assign(Object.assign({},t.validation),{categories:d})},result:u.result}),a.state=Ps.IndexedReferences)}}}else this.buildState.delete(s)}this.currentState=Ps.Changed,await this.emitUpdate(e.map(a=>a.uri),[]),await this.buildDocuments(e,t,r)}async update(e,t,r=fo.CancellationToken.None){this.currentState=Ps.Changed;for(let a of t)this.langiumDocuments.deleteDocument(a),this.buildState.delete(a.toString()),this.indexManager.remove(a);for(let a of e){if(!this.langiumDocuments.invalidateDocument(a)){let s=this.langiumDocumentFactory.fromModel({$type:"INVALID"},a);s.state=Ps.Changed,this.langiumDocuments.addDocument(s)}this.buildState.delete(a.toString())}let i=Vo(e).concat(t).map(a=>a.toString()).toSet();this.langiumDocuments.all.filter(a=>!i.has(a.uri.toString())&&this.shouldRelink(a,i)).forEach(a=>{this.serviceRegistry.getServices(a.uri).references.Linker.unlink(a),a.state=Math.min(a.state,Ps.ComputedScopes),a.diagnostics=void 0}),await this.emitUpdate(e,t),await nc(r);let n=this.langiumDocuments.all.filter(a=>{var s;return a.state<Ps.Linked||!(!((s=this.buildState.get(a.uri.toString()))===null||s===void 0)&&s.completed)}).toArray();await this.buildDocuments(n,this.updateBuildOptions,r)}async emitUpdate(e,t){await Promise.all(this.updateListeners.map(r=>r(e,t)))}shouldRelink(e,t){return e.references.some(r=>r.error!==void 0)?!0:this.indexManager.isAffected(e,t)}onUpdate(e){return this.updateListeners.push(e),h5.create(()=>{let t=this.updateListeners.indexOf(e);t>=0&&this.updateListeners.splice(t,1)})}async buildDocuments(e,t,r){this.prepareBuild(e,t),await this.runCancelable(e,Ps.Parsed,r,n=>this.langiumDocumentFactory.update(n,r)),await this.runCancelable(e,Ps.IndexedContent,r,n=>this.indexManager.updateContent(n,r)),await this.runCancelable(e,Ps.ComputedScopes,r,async n=>{let a=this.serviceRegistry.getServices(n.uri).references.ScopeComputation;n.precomputedScopes=await a.computeLocalScopes(n,r)}),await this.runCancelable(e,Ps.Linked,r,n=>this.serviceRegistry.getServices(n.uri).references.Linker.link(n,r)),await this.runCancelable(e,Ps.IndexedReferences,r,n=>this.indexManager.updateReferences(n,r));let i=e.filter(n=>this.shouldValidate(n));await this.runCancelable(i,Ps.Validated,r,n=>this.validate(n,r));for(let n of e){let a=this.buildState.get(n.uri.toString());a&&(a.completed=!0)}}prepareBuild(e,t){for(let r of e){let i=r.uri.toString(),n=this.buildState.get(i);(!n||n.completed)&&this.buildState.set(i,{completed:!1,options:t,result:n?.result})}}async runCancelable(e,t,r,i){let n=e.filter(a=>a.state<t);for(let a of n)await nc(r),await i(a),a.state=t;await this.notifyBuildPhase(n,t,r),this.currentState=t}onBuildPhase(e,t){return this.buildPhaseListeners.add(e,t),h5.create(()=>{this.buildPhaseListeners.delete(e,t)})}waitUntil(e,t,r){let i;if(t&&"path"in t?i=t:r=t,r??(r=fo.CancellationToken.None),i){let n=this.langiumDocuments.getDocument(i);if(n&&n.state>e)return Promise.resolve(i)}return this.currentState>=e?Promise.resolve(void 0):r.isCancellationRequested?Promise.reject(Nf):new Promise((n,a)=>{let s=this.onBuildPhase(e,()=>{if(s.dispose(),u.dispose(),i){let h=this.langiumDocuments.getDocument(i);n(h?.uri)}else n(void 0)}),u=r.onCancellationRequested(()=>{s.dispose(),u.dispose(),a(Nf)})})}async notifyBuildPhase(e,t,r){if(e.length===0)return;let i=this.buildPhaseListeners.get(t);for(let n of i)await nc(r),await n(e,r)}shouldValidate(e){return!!this.getBuildOptions(e).validation}async validate(e,t){var r,i;let n=this.serviceRegistry.getServices(e.uri).validation.DocumentValidator,a=this.getBuildOptions(e).validation,s=typeof a=="object"?a:void 0,u=await n.validateDocument(e,s,t);e.diagnostics?e.diagnostics.push(...u):e.diagnostics=u;let h=this.buildState.get(e.uri.toString());if(h){(r=h.result)!==null&&r!==void 0||(h.result={});let d=(i=s?.categories)!==null&&i!==void 0?i:gS.all;h.result.validationChecks?h.result.validationChecks.push(...d):h.result.validationChecks=[...d]}}getBuildOptions(e){var t,r;return(r=(t=this.buildState.get(e.uri.toString()))===null||t===void 0?void 0:t.options)!==null&&r!==void 0?r:{}}}}),Vq,cxe=D(()=>{mh(),Dq(),Pd(),tc(),Bf(),Vq=class{constructor(e){this.symbolIndex=new Map,this.symbolByTypeIndex=new fS,this.referenceIndex=new Map,this.documents=e.workspace.LangiumDocuments,this.serviceRegistry=e.ServiceRegistry,this.astReflection=e.AstReflection}findAllReferences(e,t){let r=Vc(e).uri,i=[];return this.referenceIndex.forEach(n=>{n.forEach(a=>{q0.equals(a.targetUri,r)&&a.targetPath===t&&i.push(a)})}),Vo(i)}allElements(e,t){let r=Vo(this.symbolIndex.keys());return t&&(r=r.filter(i=>!t||t.has(i))),r.map(i=>this.getFileDescriptions(i,e)).flat()}getFileDescriptions(e,t){var r;return t?this.symbolByTypeIndex.get(e,t,()=>{var i;return((i=this.symbolIndex.get(e))!==null&&i!==void 0?i:[]).filter(n=>this.astReflection.isSubtype(n.type,t))}):(r=this.symbolIndex.get(e))!==null&&r!==void 0?r:[]}remove(e){let t=e.toString();this.symbolIndex.delete(t),this.symbolByTypeIndex.clear(t),this.referenceIndex.delete(t)}async updateContent(e,t=fo.CancellationToken.None){let r=await this.serviceRegistry.getServices(e.uri).references.ScopeComputation.computeExports(e,t),i=e.uri.toString();this.symbolIndex.set(i,r),this.symbolByTypeIndex.clear(i)}async updateReferences(e,t=fo.CancellationToken.None){let r=await this.serviceRegistry.getServices(e.uri).workspace.ReferenceDescriptionProvider.createDescriptions(e,t);this.referenceIndex.set(e.uri.toString(),r)}isAffected(e,t){let r=this.referenceIndex.get(e.uri.toString());return r?r.some(i=>!i.local&&t.has(i.targetUri.toString())):!1}}}),Wq,dxe=D(()=>{Pd(),Fd(),Bf(),Wq=class{constructor(e){this.initialBuildOptions={},this._ready=new Y0,this.serviceRegistry=e.ServiceRegistry,this.langiumDocuments=e.workspace.LangiumDocuments,this.documentBuilder=e.workspace.DocumentBuilder,this.fileSystemProvider=e.workspace.FileSystemProvider,this.mutex=e.workspace.WorkspaceLock}get ready(){return this._ready.promise}initialize(e){var t;this.folders=(t=e.workspaceFolders)!==null&&t!==void 0?t:void 0}initialized(e){return this.mutex.write(t=>{var r;return this.initializeWorkspace((r=this.folders)!==null&&r!==void 0?r:[],t)})}async initializeWorkspace(e,t=fo.CancellationToken.None){let r=await this.performStartup(e);await nc(t),await this.documentBuilder.build(r,this.initialBuildOptions,t)}async performStartup(e){let t=this.serviceRegistry.all.flatMap(n=>n.LanguageMetaData.fileExtensions),r=[],i=n=>{r.push(n),this.langiumDocuments.hasDocument(n.uri)||this.langiumDocuments.addDocument(n)};return await this.loadAdditionalDocuments(e,i),await Promise.all(e.map(n=>[n,this.getRootFolder(n)]).map(async n=>this.traverseFolder(...n,t,i))),this._ready.resolve(),r}loadAdditionalDocuments(e,t){return Promise.resolve()}getRootFolder(e){return Of.parse(e.uri)}async traverseFolder(e,t,r,i){let n=await this.fileSystemProvider.readDirectory(t);await Promise.all(n.map(async a=>{if(this.includeEntry(e,a,r)){if(a.isDirectory)await this.traverseFolder(e,a.uri,r,i);else if(a.isFile){let s=await this.langiumDocuments.getOrCreateDocument(a.uri);i(s)}}}))}includeEntry(e,t,r){let i=q0.basename(t.uri);if(i.startsWith("."))return!1;if(t.isDirectory)return i!=="node_modules"&&i!=="out";if(t.isFile){let n=q0.extname(t.uri);return r.includes(n)}return!1}}});function pxe(e){return Array.isArray(e)&&(e.length===0||"name"in e[0])}function Yq(e){return e&&"modes"in e&&"defaultMode"in e}function qq(e){return!pxe(e)&&!Yq(e)}var Xq,fxe=D(()=>{t5(),Xq=class{constructor(e){let t=e.parser.TokenBuilder.buildTokens(e.Grammar,{caseInsensitive:e.LanguageMetaData.caseInsensitive});this.tokenTypes=this.toTokenTypeDictionary(t);let r=qq(t)?Object.values(t):t;this.chevrotainLexer=new ju(r,{positionTracking:"full"})}get definition(){return this.tokenTypes}tokenize(e){var t;let r=this.chevrotainLexer.tokenize(e);return{tokens:r.tokens,errors:r.errors,hidden:(t=r.groups.hidden)!==null&&t!==void 0?t:[]}}toTokenTypeDictionary(e){if(qq(e))return e;let t=Yq(e)?Object.values(e.modes).flat():e,r={};return t.forEach(i=>r[i.name]=i),r}}});function gxe(e,t,r){let i,n;typeof e=="string"?(n=t,i=r):(n=e.range.start,i=t),n||(n=rs.create(0,0));let a=yxe(e),s=Zq(i),u=eXe({lines:a,position:n,options:s});return iXe({index:0,tokens:u,position:n})}function mxe(e,t){let r=Zq(t),i=yxe(e);if(i.length===0)return!1;let n=i[0],a=i[i.length-1],s=r.start,u=r.end;return!!s?.exec(n)&&!!u?.exec(a)}function yxe(e){let t="";return typeof e=="string"?t=e:t=e.text,t.split(jW)}function eXe(e){var t,r,i;let n=[],a=e.position.line,s=e.position.character;for(let u=0;u<e.lines.length;u++){let h=u===0,d=u===e.lines.length-1,p=e.lines[u],g=0;if(h&&e.options.start){let y=(t=e.options.start)===null||t===void 0?void 0:t.exec(p);y&&(g=y.index+y[0].length)}else{let y=(r=e.options.line)===null||r===void 0?void 0:r.exec(p);y&&(g=y.index+y[0].length)}if(d){let y=(i=e.options.end)===null||i===void 0?void 0:i.exec(p);y&&(p=p.substring(0,y.index))}if(p=p.substring(0,rXe(p)),Kq(p,g)>=p.length){if(n.length>0){let y=rs.create(a,s);n.push({type:"break",content:"",range:Oa.create(y,y)})}}else{Jq.lastIndex=g;let y=Jq.exec(p);if(y){let m=y[0],x=y[1],_=rs.create(a,s+g),E=rs.create(a,s+g+m.length);n.push({type:"tag",content:x,range:Oa.create(_,E)}),g+=m.length,g=Kq(p,g)}if(g<p.length){let m=p.substring(g),x=Array.from(m.matchAll(wxe));n.push(...tXe(x,m,a,s+g))}}a++,s=0}return n.length>0&&n[n.length-1].type==="break"?n.slice(0,-1):n}function tXe(e,t,r,i){let n=[];if(e.length===0){let a=rs.create(r,i),s=rs.create(r,i+t.length);n.push({type:"text",content:t,range:Oa.create(a,s)})}else{let a=0;for(let u of e){let h=u.index,d=t.substring(a,h);d.length>0&&n.push({type:"text",content:t.substring(a,h),range:Oa.create(rs.create(r,a+i),rs.create(r,h+i))});let p=d.length+1,g=u[1];if(n.push({type:"inline-tag",content:g,range:Oa.create(rs.create(r,a+p+i),rs.create(r,a+p+g.length+i))}),p+=g.length,u.length===4){p+=u[2].length;let y=u[3];n.push({type:"text",content:y,range:Oa.create(rs.create(r,a+p+i),rs.create(r,a+p+y.length+i))})}else n.push({type:"text",content:"",range:Oa.create(rs.create(r,a+p+i),rs.create(r,a+p+i))});a=h+u[0].length}let s=t.substring(a);s.length>0&&n.push({type:"text",content:s,range:Oa.create(rs.create(r,a+i),rs.create(r,a+i+s.length))})}return n}function Kq(e,t){let r=e.substring(t).match(kxe);return r?t+r.index:e.length}function rXe(e){let t=e.match(Txe);if(t&&typeof t.index=="number")return t.index}function iXe(e){var t,r,i,n;let a=rs.create(e.position.line,e.position.character);if(e.tokens.length===0)return new eX([],Oa.create(a,a));let s=[];for(;e.index<e.tokens.length;){let d=nXe(e,s[s.length-1]);d&&s.push(d)}let u=(r=(t=s[0])===null||t===void 0?void 0:t.range.start)!==null&&r!==void 0?r:a,h=(n=(i=s[s.length-1])===null||i===void 0?void 0:i.range.end)!==null&&n!==void 0?n:a;return new eX(s,Oa.create(u,h))}function nXe(e,t){let r=e.tokens[e.index];if(r.type==="tag")return xxe(e,!1);if(r.type==="text"||r.type==="inline-tag")return vxe(e);aXe(r,t),e.index++}function aXe(e,t){if(t){let r=new tX("",e.range);"inlines"in t?t.inlines.push(r):t.content.inlines.push(r)}}function vxe(e){let t=e.tokens[e.index],r=t,i=t,n=[];for(;t&&t.type!=="break"&&t.type!=="tag";)n.push(sXe(e)),i=t,t=e.tokens[e.index];return new TO(n,Oa.create(r.range.start,i.range.end))}function sXe(e){return e.tokens[e.index].type==="inline-tag"?xxe(e,!0):bxe(e)}function xxe(e,t){let r=e.tokens[e.index++],i=r.content.substring(1);if(e.tokens[e.index]?.type==="text")if(t){let a=bxe(e);return new kO(i,new TO([a],a.range),t,Oa.create(r.range.start,a.range.end))}else{let a=vxe(e);return new kO(i,a,t,Oa.create(r.range.start,a.range.end))}else{let a=r.range;return new kO(i,new TO([],a),t,a)}}function bxe(e){let t=e.tokens[e.index++];return new tX(t.content,t.range)}function Zq(e){if(!e)return Zq({start:"/**",end:"*/",line:"*"});let{start:t,end:r,line:i}=e;return{start:Qq(t,!0),end:Qq(r,!1),line:Qq(i,!0)}}function Qq(e,t){if(typeof e=="string"||typeof e=="object"){let r=typeof e=="string"?B7(e):e.source;return t?new RegExp(`^\\s*${r}`):new RegExp(`\\s*${r}\\s*$`)}else return e}function oXe(e,t,r){var i,n;if(e==="linkplain"||e==="linkcode"||e==="link"){let a=t.indexOf(" "),s=t;if(a>0){let u=Kq(t,a);s=t.substring(u),t=t.substring(0,a)}return(e==="linkcode"||e==="link"&&r.link==="code")&&(s=`\`${s}\``),(n=(i=r.renderLink)===null||i===void 0?void 0:i.call(r,t,s))!==null&&n!==void 0?n:lXe(t,s)}}function lXe(e,t){try{return Of.parse(e,!0),`[${t}](${e})`}catch{return e}}function _xe(e){return e.endsWith(`
`)?`
`:`

`}var Jq,wxe,kxe,Txe,eX,kO,TO,tX,Exe=D(()=>{wve(),P7(),Bf(),Jq=/\s*(@([\p{L}][\p{L}\p{N}]*)?)/uy,wxe=/\{(@[\p{L}][\p{L}\p{N}]*)(\s*)([^\r\n}]+)?\}/gu,kxe=/\S/,Txe=/\s*$/,eX=class{constructor(e,t){this.elements=e,this.range=t}getTag(e){return this.getAllTags().find(t=>t.name===e)}getTags(e){return this.getAllTags().filter(t=>t.name===e)}getAllTags(){return this.elements.filter(e=>"name"in e)}toString(){let e="";for(let t of this.elements)if(e.length===0)e=t.toString();else{let r=t.toString();e+=_xe(e)+r}return e.trim()}toMarkdown(e){let t="";for(let r of this.elements)if(t.length===0)t=r.toMarkdown(e);else{let i=r.toMarkdown(e);t+=_xe(t)+i}return t.trim()}},kO=class{constructor(e,t,r,i){this.name=e,this.content=t,this.inline=r,this.range=i}toString(){let e=`@${this.name}`,t=this.content.toString();return this.content.inlines.length===1?e=`${e} ${t}`:this.content.inlines.length>1&&(e=`${e}
${t}`),this.inline?`{${e}}`:e}toMarkdown(e){var t,r;return(r=(t=e?.renderTag)===null||t===void 0?void 0:t.call(e,this))!==null&&r!==void 0?r:this.toMarkdownDefault(e)}toMarkdownDefault(e){let t=this.content.toMarkdown(e);if(this.inline){let n=oXe(this.name,t,e??{});if(typeof n=="string")return n}let r="";e?.tag==="italic"||e?.tag===void 0?r="*":e?.tag==="bold"?r="**":e?.tag==="bold-italic"&&(r="***");let i=`${r}@${this.name}${r}`;return this.content.inlines.length===1?i=`${i} \u2014 ${t}`:this.content.inlines.length>1&&(i=`${i}
${t}`),this.inline?`{${i}}`:i}},TO=class{constructor(e,t){this.inlines=e,this.range=t}toString(){let e="";for(let t=0;t<this.inlines.length;t++){let r=this.inlines[t],i=this.inlines[t+1];e+=r.toString(),i&&i.range.start.line>r.range.start.line&&(e+=`
`)}return e}toMarkdown(e){let t="";for(let r=0;r<this.inlines.length;r++){let i=this.inlines[r],n=this.inlines[r+1];t+=i.toMarkdown(e),n&&n.range.start.line>i.range.start.line&&(t+=`
`)}return t}},tX=class{constructor(e,t){this.text=e,this.range=t}toString(){return this.text}toMarkdown(){return this.text}}}),rX,Cxe=D(()=>{mh(),Exe(),rX=class{constructor(e){this.indexManager=e.shared.workspace.IndexManager,this.commentProvider=e.documentation.CommentProvider}getDocumentation(e){let t=this.commentProvider.getComment(e);if(t&&mxe(t))return gxe(t).toMarkdown({renderLink:(r,i)=>this.documentationLinkRenderer(e,r,i),renderTag:r=>this.documentationTagRenderer(e,r)})}documentationLinkRenderer(e,t,r){var i;let n=(i=this.findNameInPrecomputedScopes(e,t))!==null&&i!==void 0?i:this.findNameInGlobalScope(e,t);if(n&&n.nameSegment){let a=n.nameSegment.range.start.line+1,s=n.nameSegment.range.start.character+1,u=n.documentUri.with({fragment:`L${a},${s}`});return`[${r}](${u.toString()})`}else return}documentationTagRenderer(e,t){}findNameInPrecomputedScopes(e,t){let r=Vc(e).precomputedScopes;if(!r)return;let i=e;do{let n=r.get(i).find(a=>a.name===t);if(n)return n;i=i.$container}while(i)}findNameInGlobalScope(e,t){return this.indexManager.allElements().find(r=>r.name===t)}}}),iX,Sxe=D(()=>{Oq(),U0(),iX=class{constructor(e){this.grammarConfig=()=>e.parser.GrammarConfig}getComment(e){var t;return txe(e)?e.$comment:(t=W1e(e.$cstNode,this.grammarConfig().multilineCommentRules))===null||t===void 0?void 0:t.text}}}),nX={},Axe=D(()=>{Sn(nX,Ke($ve(),1))}),aX,Mxe,Lxe,Rxe=D(()=>{Fd(),Axe(),aX=class{constructor(e){this.syncParser=e.parser.LangiumParser}parse(e){return Promise.resolve(this.syncParser.parse(e))}},Mxe=class{constructor(e){this.threadCount=8,this.terminationDelay=200,this.workerPool=[],this.queue=[],this.hydrator=e.serializer.Hydrator}initializeWorkers(){for(;this.workerPool.length<this.threadCount;){let e=this.createWorker();e.onReady(()=>{if(this.queue.length>0){let t=this.queue.shift();t&&(e.lock(),t.resolve(e))}}),this.workerPool.push(e)}}async parse(e,t){let r=await this.acquireParserWorker(t),i=new Y0,n,a=t.onCancellationRequested(()=>{n=setTimeout(()=>{this.terminateWorker(r)},this.terminationDelay)});return r.parse(e).then(s=>{let u=this.hydrator.hydrate(s);i.resolve(u)}).catch(s=>{i.reject(s)}).finally(()=>{a.dispose(),clearTimeout(n)}),i.promise}terminateWorker(e){e.terminate();let t=this.workerPool.indexOf(e);t>=0&&this.workerPool.splice(t,1)}async acquireParserWorker(e){this.initializeWorkers();for(let r of this.workerPool)if(r.ready)return r.lock(),r;let t=new Y0;return e.onCancellationRequested(()=>{let r=this.queue.indexOf(t);r>=0&&this.queue.splice(r,1),t.reject(Nf)}),this.queue.push(t),t.promise}},Lxe=class{get ready(){return this._ready}get onReady(){return this.onReadyEmitter.event}constructor(e,t,r,i){this.onReadyEmitter=new nX.Emitter,this.deferred=new Y0,this._ready=!0,this._parsing=!1,this.sendMessage=e,this._terminate=i,t(n=>{let a=n;this.deferred.resolve(a),this.unlock()}),r(n=>{this.deferred.reject(n),this.unlock()})}terminate(){this.deferred.reject(Nf),this._terminate()}lock(){this._ready=!1}unlock(){this._parsing=!1,this._ready=!0,this.onReadyEmitter.fire()}parse(e){if(this._parsing)throw new Error("Parser worker is busy");return this._parsing=!0,this.deferred=new Y0,this.sendMessage(e),this.deferred.promise}}}),sX,Dxe=D(()=>{Pd(),Fd(),sX=class{constructor(){this.previousTokenSource=new fo.CancellationTokenSource,this.writeQueue=[],this.readQueue=[],this.done=!0}write(e){this.cancelWrite();let t=new fo.CancellationTokenSource;return this.previousTokenSource=t,this.enqueue(this.writeQueue,e,t.token)}read(e){return this.enqueue(this.readQueue,e)}enqueue(e,t,r){let i=new Y0,n={action:t,deferred:i,cancellationToken:r??fo.CancellationToken.None};return e.push(n),this.performNextOperation(),i.promise}async performNextOperation(){if(!this.done)return;let e=[];if(this.writeQueue.length>0)e.push(this.writeQueue.shift());else if(this.readQueue.length>0)e.push(...this.readQueue.splice(0,this.readQueue.length));else return;this.done=!1,await Promise.all(e.map(async({action:t,deferred:r,cancellationToken:i})=>{try{let n=await Promise.resolve().then(()=>t(i));r.resolve(n)}catch(n){uS(n)?r.resolve(void 0):r.reject(n)}})),this.done=!0,this.performNextOperation()}cancelWrite(){this.previousTokenSource.cancel()}}}),oX,Ixe=D(()=>{dq(),Mf(),Nd(),mh(),dS(),U0(),oX=class{constructor(e){this.grammarElementIdMap=new cS,this.tokenTypeIdMap=new cS,this.grammar=e.Grammar,this.lexer=e.parser.Lexer,this.linker=e.references.Linker}dehydrate(e){return{lexerErrors:e.lexerErrors.map(t=>Object.assign({},t)),parserErrors:e.parserErrors.map(t=>Object.assign({},t)),value:this.dehydrateAstNode(e.value,this.createDehyrationContext(e.value))}}createDehyrationContext(e){let t=new Map,r=new Map;for(let i of wm(e))t.set(i,{});if(e.$cstNode)for(let i of T7(e.$cstNode))r.set(i,{});return{astNodes:t,cstNodes:r}}dehydrateAstNode(e,t){let r=t.astNodes.get(e);r.$type=e.$type,r.$containerIndex=e.$containerIndex,r.$containerProperty=e.$containerProperty,e.$cstNode!==void 0&&(r.$cstNode=this.dehydrateCstNode(e.$cstNode,t));for(let[i,n]of Object.entries(e))if(!i.startsWith("$"))if(Array.isArray(n)){let a=[];r[i]=a;for(let s of n)ol(s)?a.push(this.dehydrateAstNode(s,t)):ec(s)?a.push(this.dehydrateReference(s,t)):a.push(s)}else ol(n)?r[i]=this.dehydrateAstNode(n,t):ec(n)?r[i]=this.dehydrateReference(n,t):n!==void 0&&(r[i]=n);return r}dehydrateReference(e,t){let r={};return r.$refText=e.$refText,e.$refNode&&(r.$refNode=t.cstNodes.get(e.$refNode)),r}dehydrateCstNode(e,t){let r=t.cstNodes.get(e);return vW(e)?r.fullText=e.fullText:r.grammarSource=this.getGrammarElementId(e.grammarSource),r.hidden=e.hidden,r.astNode=t.astNodes.get(e.astNode),Sf(e)?r.content=e.content.map(i=>this.dehydrateCstNode(i,t)):U_(e)&&(r.tokenType=e.tokenType.name,r.offset=e.offset,r.length=e.length,r.startLine=e.range.start.line,r.startColumn=e.range.start.character,r.endLine=e.range.end.line,r.endColumn=e.range.end.character),r}hydrate(e){let t=e.value,r=this.createHydrationContext(t);return"$cstNode"in t&&this.hydrateCstNode(t.$cstNode,r),{lexerErrors:e.lexerErrors,parserErrors:e.parserErrors,value:this.hydrateAstNode(t,r)}}createHydrationContext(e){let t=new Map,r=new Map;for(let n of wm(e))t.set(n,{});let i;if(e.$cstNode)for(let n of T7(e.$cstNode)){let a;"fullText"in n?(a=new uO(n.fullText),i=a):"content"in n?a=new oS:"tokenType"in n&&(a=this.hydrateCstLeafNode(n)),a&&(r.set(n,a),a.root=i)}return{astNodes:t,cstNodes:r}}hydrateAstNode(e,t){let r=t.astNodes.get(e);r.$type=e.$type,r.$containerIndex=e.$containerIndex,r.$containerProperty=e.$containerProperty,e.$cstNode&&(r.$cstNode=t.cstNodes.get(e.$cstNode));for(let[i,n]of Object.entries(e))if(!i.startsWith("$"))if(Array.isArray(n)){let a=[];r[i]=a;for(let s of n)ol(s)?a.push(this.setParent(this.hydrateAstNode(s,t),r)):ec(s)?a.push(this.hydrateReference(s,r,i,t)):a.push(s)}else ol(n)?r[i]=this.setParent(this.hydrateAstNode(n,t),r):ec(n)?r[i]=this.hydrateReference(n,r,i,t):n!==void 0&&(r[i]=n);return r}setParent(e,t){return e.$container=t,e}hydrateReference(e,t,r,i){return this.linker.buildReference(t,r,i.cstNodes.get(e.$refNode),e.$refText)}hydrateCstNode(e,t,r=0){let i=t.cstNodes.get(e);if(typeof e.grammarSource=="number"&&(i.grammarSource=this.getGrammarElement(e.grammarSource)),i.astNode=t.astNodes.get(e.astNode),Sf(i))for(let n of e.content){let a=this.hydrateCstNode(n,t,r++);i.content.push(a)}return i}hydrateCstLeafNode(e){let t=this.getTokenType(e.tokenType),r=e.offset,i=e.length,n=e.startLine,a=e.startColumn,s=e.endLine,u=e.endColumn,h=e.hidden;return new sS(r,i,{start:{line:n,character:a},end:{line:s,character:u}},t,h)}getTokenType(e){return this.lexer.definition[e]}getGrammarElementId(e){return this.grammarElementIdMap.size===0&&this.createGrammarElementIdMap(),this.grammarElementIdMap.get(e)}getGrammarElement(e){this.grammarElementIdMap.size===0&&this.createGrammarElementIdMap();let t=this.grammarElementIdMap.getKey(e);if(t)return t;throw new Error("Invalid grammar element id: "+e)}createGrammarElementIdMap(){let e=0;for(let t of wm(this.grammar))kW(t)&&this.grammarElementIdMap.set(t,e++)}}});function Vv(e){return{documentation:{CommentProvider:t=>new iX(t),DocumentationProvider:t=>new rX(t)},parser:{AsyncParser:t=>new aX(t),GrammarConfig:t=>Ume(t),LangiumParser:t=>Ive(t),CompletionParser:t=>Rve(t),ValueConverter:()=>new gO,TokenBuilder:()=>new fO,Lexer:t=>new Xq(t),ParserErrorMessageProvider:()=>new cO},workspace:{AstNodeLocator:()=>new Uq,AstNodeDescriptionProvider:t=>new zq(t),ReferenceDescriptionProvider:t=>new Gq(t)},references:{Linker:t=>new Cq(t),NameProvider:()=>new Sq,ScopeProvider:t=>new Iq(t),ScopeComputation:t=>new Mq(t),References:t=>new Aq(t)},serializer:{Hydrator:t=>new oX(t),JsonSerializer:t=>new Nq(t)},validation:{DocumentValidator:t=>new $q(t),ValidationRegistry:t=>new Fq(t)},shared:()=>e.shared}}function Wv(e){return{ServiceRegistry:()=>new Bq,workspace:{LangiumDocuments:t=>new Eq(t),LangiumDocumentFactory:t=>new Tq(t),DocumentBuilder:t=>new Hq(t),IndexManager:t=>new Vq(t),WorkspaceManager:t=>new Wq(t),FileSystemProvider:t=>e.fileSystemProvider(t),WorkspaceLock:()=>new sX,ConfigurationProvider:t=>new jq(t)}}}var Nxe=D(()=>{jme(),Dve(),Ove(),Bve(),Pve(),Yve(),Xve(),Kve(),Zve(),exe(),Oq(),ixe(),axe(),_O(),sxe(),oxe(),lxe(),hxe(),hS(),cxe(),dxe(),fxe(),Cxe(),Sxe(),dO(),Rxe(),Dxe(),Ixe()});function ac(e,t,r,i,n,a,s,u,h){let d=[e,t,r,i,n,a,s,u,h].reduce(EO,{});return Bxe(d)}function Oxe(e){if(e&&e[CO])for(let t of Object.values(e))Oxe(t);return e}function Bxe(e,t){let r=new Proxy({},{deleteProperty:()=>!1,get:(i,n)=>Pxe(i,n,e,t||r),getOwnPropertyDescriptor:(i,n)=>(Pxe(i,n,e,t||r),Object.getOwnPropertyDescriptor(i,n)),has:(i,n)=>n in e,ownKeys:()=>[...Reflect.ownKeys(e),CO]});return r[CO]=!0,r}function Pxe(e,t,r,i){if(t in e){if(e[t]instanceof Error)throw new Error("Construction failure. Please make sure that your dependencies are constructable.",{cause:e[t]});if(e[t]===uX)throw new Error('Cycle detected. Please make "'+String(t)+'" lazy. See https://langium.org/docs/configuration-services/#resolving-cyclic-dependencies');return e[t]}else if(t in r){let n=r[t];e[t]=uX;try{e[t]=typeof n=="function"?n(i):Bxe(n,i)}catch(a){throw e[t]=a instanceof Error?a:void 0,a}return e[t]}else return}function EO(e,t){if(t){for(let[r,i]of Object.entries(t))if(i!==void 0){let n=e[r];n!==null&&i!==null&&typeof n=="object"&&typeof i=="object"?e[r]=EO(n,i):e[r]=i}}return e}var lX,CO,uX,Fxe=D(()=>{(function(e){e.merge=(t,r)=>EO(EO({},t),r)})(lX||(lX={})),CO=Symbol("isProxy"),uX=Symbol()}),uXe=D(()=>{}),hXe=D(()=>{Sxe(),Cxe(),Exe()}),cXe=D(()=>{}),dXe=D(()=>{jme(),cXe()}),pXe=D(()=>{}),fXe=D(()=>{Rxe(),Dve(),dq(),Ove(),dO(),fxe(),pXe(),Bve(),Pve()}),gXe=D(()=>{Yve(),Xve(),Kve(),Jve(),Zve(),exe()}),mXe=D(()=>{Ixe(),Oq()}),hX,Am,$xe=D(()=>{hX=class{readFile(){throw new Error("No file system is available.")}async readDirectory(){return[]}},Am={fileSystemProvider:()=>new hX}});function yXe(){let e=ac(Wv(Am),Gxe),t=ac(Vv({shared:e}),zxe);return e.ServiceRegistry.register(t),t}function Yv(e){var t;let r=yXe(),i=r.serializer.JsonSerializer.deserialize(e);return r.shared.workspace.LangiumDocumentFactory.fromModel(i,Of.parse(`memory://${(t=i.name)!==null&&t!==void 0?t:"grammar"}.langium`)),i}var zxe,Gxe,vXe=D(()=>{Nxe(),Fxe(),Mf(),$xe(),Bf(),zxe={Grammar:()=>{},LanguageMetaData:()=>({caseInsensitive:!1,fileExtensions:[".langium"],languageId:"langium"})},Gxe={AstReflection:()=>new SN}}),cX={};oi(cX,{AstUtils:()=>NW,BiMap:()=>cS,Cancellation:()=>fo,ContextCache:()=>fS,CstUtils:()=>xW,DONE_RESULT:()=>$u,Deferred:()=>Y0,Disposable:()=>h5,DisposableCache:()=>pS,DocumentCache:()=>Rq,EMPTY_STREAM:()=>w7,ErrorWithLocation:()=>C7,GrammarUtils:()=>VW,MultiMap:()=>u5,OperationCancelled:()=>Nf,Reduction:()=>k7,RegExpUtils:()=>GW,SimpleCache:()=>xO,StreamImpl:()=>Od,TreeStreamImpl:()=>Pv,URI:()=>Of,UriUtils:()=>q0,WorkspaceCache:()=>bO,assertUnreachable:()=>j_,delayNextTick:()=>bq,interruptAndCheck:()=>nc,isOperationCancelled:()=>uS,loadGrammarFromJson:()=>Yv,setInterruptionPeriod:()=>Gve,startCancelableOperation:()=>zve,stream:()=>Vo});var xXe=D(()=>{Dq(),Axe(),Sn(cX,nX),dS(),uxe(),wW(),vXe(),Fd(),tc(),Bf(),mh(),Pd(),U0(),j0(),P7()}),bXe=D(()=>{axe(),_O()}),_Xe=D(()=>{sxe(),oxe(),lxe(),hxe(),hS(),$xe(),cxe(),Dxe(),dxe()}),Uxe={};oi(Uxe,{AbstractAstReflection:()=>FI,AbstractCstNode:()=>lO,AbstractLangiumParser:()=>hO,AbstractParserErrorMessageProvider:()=>yq,AbstractThreadedAsyncParser:()=>Mxe,AstUtils:()=>NW,BiMap:()=>cS,Cancellation:()=>fo,CompositeCstNodeImpl:()=>oS,ContextCache:()=>fS,CstNodeBuilder:()=>cq,CstUtils:()=>xW,DONE_RESULT:()=>$u,DatatypeSymbol:()=>lS,DefaultAstNodeDescriptionProvider:()=>zq,DefaultAstNodeLocator:()=>Uq,DefaultAsyncParser:()=>aX,DefaultCommentProvider:()=>iX,DefaultConfigurationProvider:()=>jq,DefaultDocumentBuilder:()=>Hq,DefaultDocumentValidator:()=>$q,DefaultHydrator:()=>oX,DefaultIndexManager:()=>Vq,DefaultJsonSerializer:()=>Nq,DefaultLangiumDocumentFactory:()=>Tq,DefaultLangiumDocuments:()=>Eq,DefaultLexer:()=>Xq,DefaultLinker:()=>Cq,DefaultNameProvider:()=>Sq,DefaultReferenceDescriptionProvider:()=>Gq,DefaultReferences:()=>Aq,DefaultScopeComputation:()=>Mq,DefaultScopeProvider:()=>Iq,DefaultServiceRegistry:()=>Bq,DefaultTokenBuilder:()=>fO,DefaultValueConverter:()=>gO,DefaultWorkspaceLock:()=>sX,DefaultWorkspaceManager:()=>Wq,Deferred:()=>Y0,Disposable:()=>h5,DisposableCache:()=>pS,DocumentCache:()=>Rq,DocumentState:()=>Ps,DocumentValidator:()=>Pf,EMPTY_SCOPE:()=>Qve,EMPTY_STREAM:()=>w7,EmptyFileSystem:()=>Am,EmptyFileSystemProvider:()=>hX,ErrorWithLocation:()=>C7,GrammarAST:()=>Z1e,GrammarUtils:()=>VW,JSDocDocumentationProvider:()=>rX,LangiumCompletionParser:()=>vq,LangiumParser:()=>mq,LangiumParserErrorMessageProvider:()=>cO,LeafCstNodeImpl:()=>sS,MapScope:()=>Lq,Module:()=>lX,MultiMap:()=>u5,OperationCancelled:()=>Nf,ParserWorker:()=>Lxe,Reduction:()=>k7,RegExpUtils:()=>GW,RootCstNodeImpl:()=>uO,SimpleCache:()=>xO,StreamImpl:()=>Od,StreamScope:()=>vO,TextDocument:()=>yO,TreeStreamImpl:()=>Pv,URI:()=>Of,UriUtils:()=>q0,ValidationCategory:()=>gS,ValidationRegistry:()=>Fq,ValueConverter:()=>W0,WorkspaceCache:()=>bO,assertUnreachable:()=>j_,createCompletionParser:()=>Rve,createDefaultCoreModule:()=>Vv,createDefaultSharedCoreModule:()=>Wv,createGrammarConfig:()=>Ume,createLangiumParser:()=>Ive,delayNextTick:()=>bq,diagnosticData:()=>Pq,eagerLoad:()=>Oxe,getDiagnosticRange:()=>nxe,inject:()=>ac,interruptAndCheck:()=>nc,isAstNode:()=>ol,isAstNodeDescription:()=>U1e,isAstNodeWithComment:()=>txe,isCompositeCstNode:()=>Sf,isIMultiModeLexerDefinition:()=>Yq,isJSDoc:()=>mxe,isLeafCstNode:()=>U_,isLinkingError:()=>_7,isNamed:()=>qve,isOperationCancelled:()=>uS,isReference:()=>ec,isRootCstNode:()=>vW,isTokenTypeArray:()=>pxe,isTokenTypeDictionary:()=>qq,loadGrammarFromJson:()=>Yv,parseJSDoc:()=>gxe,prepareLangiumParser:()=>Nve,setInterruptionPeriod:()=>Gve,startCancelableOperation:()=>zve,stream:()=>Vo,toDiagnosticSeverity:()=>wO});var Ff=D(()=>{Nxe(),Fxe(),ixe(),uXe(),Nd(),hXe(),dXe(),fXe(),gXe(),mXe(),xXe(),Sn(Uxe,cX),bXe(),_Xe(),Mf()});function wXe(e){return Wc.isInstance(e,Vxe)}function kXe(e){return Wc.isInstance(e,dX)}function TXe(e){return Wc.isInstance(e,pX)}function EXe(e){return Wc.isInstance(e,qxe)}function CXe(e){return Wc.isInstance(e,fX)}function SXe(e){return Wc.isInstance(e,Xxe)}function AXe(e){return Wc.isInstance(e,gX)}function MXe(e){return Wc.isInstance(e,Kxe)}function LXe(e){return Wc.isInstance(e,Zxe)}function RXe(e){return Wc.isInstance(e,Qxe)}function DXe(e){return Wc.isInstance(e,Jxe)}var jxe,rn,Hxe,Vxe,dX,Wxe,Yxe,pX,qxe,fX,Xxe,gX,Kxe,Zxe,Qxe,Jxe,ebe,mX,Wc,tbe,rbe,ibe,nbe,abe,sbe,obe,lbe,ube,hbe,cbe,dbe,pbe,fbe,gbe,c5,mbe,ybe,vbe,xbe,bbe,_be,wbe,kbe,Tbe,SO,AO,qv,IXe,$d=D(()=>{Ff(),Ff(),Ff(),Ff(),jxe=Object.defineProperty,rn=(e,t)=>jxe(e,"name",{value:t,configurable:!0}),Hxe="Statement",Vxe="Architecture",rn(wXe,"isArchitecture"),dX="Branch",rn(kXe,"isBranch"),Wxe="Checkout",Yxe="CherryPicking",pX="Commit",rn(TXe,"isCommit"),qxe="Common",rn(EXe,"isCommon"),fX="GitGraph",rn(CXe,"isGitGraph"),Xxe="Info",rn(SXe,"isInfo"),gX="Merge",rn(AXe,"isMerge"),Kxe="Packet",rn(MXe,"isPacket"),Zxe="PacketBlock",rn(LXe,"isPacketBlock"),Qxe="Pie",rn(RXe,"isPie"),Jxe="PieSection",rn(DXe,"isPieSection"),ebe="Direction",mX=class extends FI{static{rn(this,"MermaidAstReflection")}getAllTypes(){return["Architecture","Branch","Checkout","CherryPicking","Commit","Common","Direction","Edge","GitGraph","Group","Info","Junction","Merge","Packet","PacketBlock","Pie","PieSection","Service","Statement"]}computeIsSubtype(e,t){switch(e){case dX:case Wxe:case Yxe:case pX:case gX:return this.isSubtype(Hxe,t);case ebe:return this.isSubtype(fX,t);default:return!1}}getReferenceType(e){let t=`${e.container.$type}:${e.property}`;switch(t){default:throw new Error(`${t} is not a valid reference id.`)}}getTypeMetaData(e){switch(e){case"Architecture":return{name:"Architecture",properties:[{name:"accDescr"},{name:"accTitle"},{name:"edges",defaultValue:[]},{name:"groups",defaultValue:[]},{name:"junctions",defaultValue:[]},{name:"services",defaultValue:[]},{name:"title"}]};case"Branch":return{name:"Branch",properties:[{name:"name"},{name:"order"}]};case"Checkout":return{name:"Checkout",properties:[{name:"branch"}]};case"CherryPicking":return{name:"CherryPicking",properties:[{name:"id"},{name:"parent"},{name:"tags",defaultValue:[]}]};case"Commit":return{name:"Commit",properties:[{name:"id"},{name:"message"},{name:"tags",defaultValue:[]},{name:"type"}]};case"Common":return{name:"Common",properties:[{name:"accDescr"},{name:"accTitle"},{name:"title"}]};case"Edge":return{name:"Edge",properties:[{name:"lhsDir"},{name:"lhsGroup",defaultValue:!1},{name:"lhsId"},{name:"lhsInto",defaultValue:!1},{name:"rhsDir"},{name:"rhsGroup",defaultValue:!1},{name:"rhsId"},{name:"rhsInto",defaultValue:!1},{name:"title"}]};case"GitGraph":return{name:"GitGraph",properties:[{name:"accDescr"},{name:"accTitle"},{name:"statements",defaultValue:[]},{name:"title"}]};case"Group":return{name:"Group",properties:[{name:"icon"},{name:"id"},{name:"in"},{name:"title"}]};case"Info":return{name:"Info",properties:[{name:"accDescr"},{name:"accTitle"},{name:"title"}]};case"Junction":return{name:"Junction",properties:[{name:"id"},{name:"in"}]};case"Merge":return{name:"Merge",properties:[{name:"branch"},{name:"id"},{name:"tags",defaultValue:[]},{name:"type"}]};case"Packet":return{name:"Packet",properties:[{name:"accDescr"},{name:"accTitle"},{name:"blocks",defaultValue:[]},{name:"title"}]};case"PacketBlock":return{name:"PacketBlock",properties:[{name:"end"},{name:"label"},{name:"start"}]};case"Pie":return{name:"Pie",properties:[{name:"accDescr"},{name:"accTitle"},{name:"sections",defaultValue:[]},{name:"showData",defaultValue:!1},{name:"title"}]};case"PieSection":return{name:"PieSection",properties:[{name:"label"},{name:"value"}]};case"Service":return{name:"Service",properties:[{name:"icon"},{name:"iconText"},{name:"id"},{name:"in"},{name:"title"}]};case"Direction":return{name:"Direction",properties:[{name:"accDescr"},{name:"accTitle"},{name:"dir"},{name:"statements",defaultValue:[]},{name:"title"}]};default:return{name:e,properties:[]}}}},Wc=new mX,rbe=rn(()=>tbe??(tbe=Yv('{"$type":"Grammar","isDeclared":true,"name":"Info","imports":[],"rules":[{"$type":"ParserRule","name":"Info","entry":true,"definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"info"},{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[],"cardinality":"*"},{"$type":"Group","elements":[{"$type":"Keyword","value":"showInfo"},{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[],"cardinality":"*"}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[],"cardinality":"?"}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"TitleAndAccessibilities","fragment":true,"definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"EOL","fragment":true,"dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[{"$type":"Interface","name":"Common","attributes":[{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]}],"types":[],"usedGrammars":[]}')),"InfoGrammar"),nbe=rn(()=>ibe??(ibe=Yv(`{"$type":"Grammar","isDeclared":true,"name":"Packet","imports":[],"rules":[{"$type":"ParserRule","name":"Packet","entry":true,"definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"packet-beta"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]},{"$type":"Assignment","feature":"blocks","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]},"cardinality":"*"}]},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"+"},{"$type":"Assignment","feature":"blocks","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]},"cardinality":"+"}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"*"}]}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"PacketBlock","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"start","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":"-"},{"$type":"Assignment","feature":"end","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}}],"cardinality":"?"},{"$type":"Keyword","value":":"},{"$type":"Assignment","feature":"label","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"INT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/0|[1-9][0-9]*/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","definition":{"$type":"RegexToken","regex":"/\\"[^\\"]*\\"|'[^']*'/"},"fragment":false,"hidden":false},{"$type":"ParserRule","name":"TitleAndAccessibilities","fragment":true,"definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"EOL","fragment":true,"dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[{"$type":"Interface","name":"Common","attributes":[{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]}],"types":[],"usedGrammars":[]}`)),"PacketGrammar"),sbe=rn(()=>abe??(abe=Yv('{"$type":"Grammar","isDeclared":true,"name":"Pie","imports":[],"rules":[{"$type":"ParserRule","name":"Pie","entry":true,"definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"pie"},{"$type":"Assignment","feature":"showData","operator":"?=","terminal":{"$type":"Keyword","value":"showData"},"cardinality":"?"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]},{"$type":"Assignment","feature":"sections","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]},"cardinality":"*"}]},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"+"},{"$type":"Assignment","feature":"sections","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]},"cardinality":"+"}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"*"}]}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"PieSection","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"label","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}},{"$type":"Keyword","value":":"},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"PIE_SECTION_LABEL","definition":{"$type":"RegexToken","regex":"/\\"[^\\"]+\\"/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"PIE_SECTION_VALUE","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/(0|[1-9][0-9]*)(\\\\.[0-9]+)?/"},"fragment":false,"hidden":false},{"$type":"ParserRule","name":"TitleAndAccessibilities","fragment":true,"definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"EOL","fragment":true,"dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[{"$type":"Interface","name":"Common","attributes":[{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]}],"types":[],"usedGrammars":[]}')),"PieGrammar"),lbe=rn(()=>obe??(obe=Yv('{"$type":"Grammar","isDeclared":true,"name":"Architecture","imports":[],"rules":[{"$type":"ParserRule","name":"Architecture","entry":true,"definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"architecture-beta"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[]}]},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[],"cardinality":"*"}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[],"cardinality":"*"}]}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Statement","fragment":true,"definition":{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"groups","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}},{"$type":"Assignment","feature":"services","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]}},{"$type":"Assignment","feature":"junctions","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}},{"$type":"Assignment","feature":"edges","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"LeftPort","fragment":true,"definition":{"$type":"Group","elements":[{"$type":"Keyword","value":":"},{"$type":"Assignment","feature":"lhsDir","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"RightPort","fragment":true,"definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"rhsDir","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}},{"$type":"Keyword","value":":"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Arrow","fragment":true,"definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]},{"$type":"Assignment","feature":"lhsInto","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@15"},"arguments":[]},"cardinality":"?"},{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"--"},{"$type":"Group","elements":[{"$type":"Keyword","value":"-"},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]}},{"$type":"Keyword","value":"-"}]}]},{"$type":"Assignment","feature":"rhsInto","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@15"},"arguments":[]},"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Group","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"group"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}},{"$type":"Assignment","feature":"icon","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]},"cardinality":"?"},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]},"cardinality":"?"},{"$type":"Group","elements":[{"$type":"Keyword","value":"in"},{"$type":"Assignment","feature":"in","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Service","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"service"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}},{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"iconText","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[]}},{"$type":"Assignment","feature":"icon","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}}],"cardinality":"?"},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]},"cardinality":"?"},{"$type":"Group","elements":[{"$type":"Keyword","value":"in"},{"$type":"Assignment","feature":"in","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Junction","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"junction"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":"in"},{"$type":"Assignment","feature":"in","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Edge","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"lhsId","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}},{"$type":"Assignment","feature":"lhsGroup","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@14"},"arguments":[]},"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]},{"$type":"Assignment","feature":"rhsId","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}},{"$type":"Assignment","feature":"rhsGroup","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@14"},"arguments":[]},"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"ARROW_DIRECTION","definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"L"}},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"R"}}]},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"T"}}]},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"B"}}]},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARCH_ID","definition":{"$type":"RegexToken","regex":"/[\\\\w]+/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARCH_TEXT_ICON","definition":{"$type":"RegexToken","regex":"/\\\\(\\"[^\\"]+\\"\\\\)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARCH_ICON","definition":{"$type":"RegexToken","regex":"/\\\\([\\\\w-:]+\\\\)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARCH_TITLE","definition":{"$type":"RegexToken","regex":"/\\\\[[\\\\w ]+\\\\]/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARROW_GROUP","definition":{"$type":"RegexToken","regex":"/\\\\{group\\\\}/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARROW_INTO","definition":{"$type":"RegexToken","regex":"/<|>/"},"fragment":false,"hidden":false},{"$type":"ParserRule","name":"TitleAndAccessibilities","fragment":true,"definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@21"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"EOL","fragment":true,"dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[{"$type":"Interface","name":"Common","attributes":[{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]}],"types":[],"usedGrammars":[]}')),"ArchitectureGrammar"),hbe=rn(()=>ube??(ube=Yv(`{"$type":"Grammar","isDeclared":true,"name":"GitGraph","interfaces":[{"$type":"Interface","name":"Common","attributes":[{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]}],"rules":[{"$type":"ParserRule","name":"TitleAndAccessibilities","fragment":true,"definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"EOL","fragment":true,"dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false},{"$type":"ParserRule","name":"GitGraph","entry":true,"definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"},{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"gitGraph"},{"$type":"Group","elements":[{"$type":"Keyword","value":"gitGraph"},{"$type":"Keyword","value":":"}]},{"$type":"Keyword","value":"gitGraph:"},{"$type":"Group","elements":[{"$type":"Keyword","value":"gitGraph"},{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]},{"$type":"Keyword","value":":"}]}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@0"},"arguments":[]},{"$type":"Assignment","feature":"statements","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}],"cardinality":"*"}]}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Statement","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@14"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@15"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Direction","definition":{"$type":"Assignment","feature":"dir","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"LR"},{"$type":"Keyword","value":"TB"},{"$type":"Keyword","value":"BT"}]}},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Commit","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"commit"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Keyword","value":"id:"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"msg:","cardinality":"?"},{"$type":"Assignment","feature":"message","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"tag:"},{"$type":"Assignment","feature":"tags","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"type:"},{"$type":"Assignment","feature":"type","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"NORMAL"},{"$type":"Keyword","value":"REVERSE"},{"$type":"Keyword","value":"HIGHLIGHT"}]}}]}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Branch","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"branch"},{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}]}},{"$type":"Group","elements":[{"$type":"Keyword","value":"order:"},{"$type":"Assignment","feature":"order","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Merge","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"merge"},{"$type":"Assignment","feature":"branch","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}]}},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Keyword","value":"id:"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"tag:"},{"$type":"Assignment","feature":"tags","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"type:"},{"$type":"Assignment","feature":"type","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"NORMAL"},{"$type":"Keyword","value":"REVERSE"},{"$type":"Keyword","value":"HIGHLIGHT"}]}}]}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Checkout","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"checkout"},{"$type":"Keyword","value":"switch"}]},{"$type":"Assignment","feature":"branch","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"CherryPicking","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"cherry-pick"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Keyword","value":"id:"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"tag:"},{"$type":"Assignment","feature":"tags","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"parent:"},{"$type":"Assignment","feature":"parent","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"INT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/[0-9]+(?=\\\\s)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ID","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/\\\\w([-\\\\./\\\\w]*[-\\\\w])?/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","definition":{"$type":"RegexToken","regex":"/\\"[^\\"]*\\"|'[^']*'/"},"fragment":false,"hidden":false}],"definesHiddenTokens":false,"hiddenTokens":[],"imports":[],"types":[],"usedGrammars":[]}`)),"GitGraphGrammar"),cbe={languageId:"info",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1},dbe={languageId:"packet",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1},pbe={languageId:"pie",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1},fbe={languageId:"architecture",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1},gbe={languageId:"gitGraph",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1},c5={AstReflection:rn(()=>new mX,"AstReflection")},mbe={Grammar:rn(()=>rbe(),"Grammar"),LanguageMetaData:rn(()=>cbe,"LanguageMetaData"),parser:{}},ybe={Grammar:rn(()=>nbe(),"Grammar"),LanguageMetaData:rn(()=>dbe,"LanguageMetaData"),parser:{}},vbe={Grammar:rn(()=>sbe(),"Grammar"),LanguageMetaData:rn(()=>pbe,"LanguageMetaData"),parser:{}},xbe={Grammar:rn(()=>lbe(),"Grammar"),LanguageMetaData:rn(()=>fbe,"LanguageMetaData"),parser:{}},bbe={Grammar:rn(()=>hbe(),"Grammar"),LanguageMetaData:rn(()=>gbe,"LanguageMetaData"),parser:{}},_be=/accDescr(?:[\t ]*:([^\n\r]*)|\s*{([^}]*)})/,wbe=/accTitle[\t ]*:([^\n\r]*)/,kbe=/title([\t ][^\n\r]*|)/,Tbe={ACC_DESCR:_be,ACC_TITLE:wbe,TITLE:kbe},SO=class extends gO{static{rn(this,"AbstractMermaidValueConverter")}runConverter(e,t,r){let i=this.runCommonConverter(e,t,r);return i===void 0&&(i=this.runCustomConverter(e,t,r)),i===void 0?super.runConverter(e,t,r):i}runCommonConverter(e,t,r){let i=Tbe[e.name];if(i===void 0)return;let n=i.exec(t);if(n!==null){if(n[1]!==void 0)return n[1].trim().replace(/[\t ]{2,}/gm," ");if(n[2]!==void 0)return n[2].replace(/^\s*/gm,"").replace(/\s+$/gm,"").replace(/[\t ]{2,}/gm," ").replace(/[\n\r]{2,}/gm,`
`)}}},AO=class extends SO{static{rn(this,"CommonValueConverter")}runCustomConverter(e,t,r){}},qv=class extends fO{static{rn(this,"AbstractMermaidTokenBuilder")}constructor(e){super(),this.keywords=new Set(e)}buildKeywordTokens(e,t,r){let i=super.buildKeywordTokens(e,t,r);return i.forEach(n=>{this.keywords.has(n.name)&&n.PATTERN!==void 0&&(n.PATTERN=new RegExp(n.PATTERN.toString()+"(?:(?=%%)|(?!\\S))"))}),i}},IXe=class extends qv{static{rn(this,"CommonTokenBuilder")}}});function Ebe(e=Am){let t=ac(Wv(e),c5),r=ac(Vv({shared:t}),bbe,yX);return t.ServiceRegistry.register(r),{shared:t,GitGraph:r}}var Cbe,yX,Sbe=D(()=>{$d(),Ff(),Cbe=class extends qv{static{rn(this,"GitGraphTokenBuilder")}constructor(){super(["gitGraph"])}},yX={parser:{TokenBuilder:rn(()=>new Cbe,"TokenBuilder"),ValueConverter:rn(()=>new AO,"ValueConverter")}},rn(Ebe,"createGitGraphServices")});function Abe(e=Am){let t=ac(Wv(e),c5),r=ac(Vv({shared:t}),mbe,vX);return t.ServiceRegistry.register(r),{shared:t,Info:r}}var Mbe,vX,Lbe=D(()=>{$d(),Ff(),Mbe=class extends qv{static{rn(this,"InfoTokenBuilder")}constructor(){super(["info","showInfo"])}},vX={parser:{TokenBuilder:rn(()=>new Mbe,"TokenBuilder"),ValueConverter:rn(()=>new AO,"ValueConverter")}},rn(Abe,"createInfoServices")});function Rbe(e=Am){let t=ac(Wv(e),c5),r=ac(Vv({shared:t}),ybe,xX);return t.ServiceRegistry.register(r),{shared:t,Packet:r}}var Dbe,xX,Ibe=D(()=>{$d(),Ff(),Dbe=class extends qv{static{rn(this,"PacketTokenBuilder")}constructor(){super(["packet-beta"])}},xX={parser:{TokenBuilder:rn(()=>new Dbe,"TokenBuilder"),ValueConverter:rn(()=>new AO,"ValueConverter")}},rn(Rbe,"createPacketServices")});function Nbe(e=Am){let t=ac(Wv(e),c5),r=ac(Vv({shared:t}),vbe,bX);return t.ServiceRegistry.register(r),{shared:t,Pie:r}}var Obe,Bbe,bX,Pbe=D(()=>{$d(),Ff(),Obe=class extends qv{static{rn(this,"PieTokenBuilder")}constructor(){super(["pie","showData"])}},Bbe=class extends SO{static{rn(this,"PieValueConverter")}runCustomConverter(e,t,r){if(e.name==="PIE_SECTION_LABEL")return t.replace(/"/g,"").trim()}},bX={parser:{TokenBuilder:rn(()=>new Obe,"TokenBuilder"),ValueConverter:rn(()=>new Bbe,"ValueConverter")}},rn(Nbe,"createPieServices")});function Fbe(e=Am){let t=ac(Wv(e),c5),r=ac(Vv({shared:t}),xbe,_X);return t.ServiceRegistry.register(r),{shared:t,Architecture:r}}var $be,zbe,_X,Gbe=D(()=>{$d(),Ff(),$be=class extends qv{static{rn(this,"ArchitectureTokenBuilder")}constructor(){super(["architecture"])}},zbe=class extends SO{static{rn(this,"ArchitectureValueConverter")}runCustomConverter(e,t,r){if(e.name==="ARCH_ICON")return t.replace(/[()]/g,"").trim();if(e.name==="ARCH_TEXT_ICON")return t.replace(/["()]/g,"");if(e.name==="ARCH_TITLE")return t.replace(/[[\]]/g,"").trim()}},_X={parser:{TokenBuilder:rn(()=>new $be,"TokenBuilder"),ValueConverter:rn(()=>new zbe,"ValueConverter")}},rn(Fbe,"createArchitectureServices")}),Ube={};oi(Ube,{InfoModule:()=>vX,createInfoServices:()=>Abe});var NXe=D(()=>{Lbe(),$d()}),jbe={};oi(jbe,{PacketModule:()=>xX,createPacketServices:()=>Rbe});var OXe=D(()=>{Ibe(),$d()}),Hbe={};oi(Hbe,{PieModule:()=>bX,createPieServices:()=>Nbe});var BXe=D(()=>{Pbe(),$d()}),Vbe={};oi(Vbe,{ArchitectureModule:()=>_X,createArchitectureServices:()=>Fbe});var PXe=D(()=>{Gbe(),$d()}),Wbe={};oi(Wbe,{GitGraphModule:()=>yX,createGitGraphServices:()=>Ebe});var FXe=D(()=>{Sbe(),$d()});async function d5(e,t){let r=Ybe[e];if(!r)throw new Error(`Unknown diagram type: ${e}`);Mm[e]||await r();let i=Mm[e].parse(t);if(i.lexerErrors.length>0||i.parserErrors.length>0)throw new qbe(i);return i.value}var Mm,Ybe,qbe,mS=D(()=>{Sbe(),Lbe(),Ibe(),Pbe(),Gbe(),$d(),Mm={},Ybe={info:rn(async()=>{let{createInfoServices:e}=await Promise.resolve().then(()=>(NXe(),Ube)),t=e().Info.parser.LangiumParser;Mm.info=t},"info"),packet:rn(async()=>{let{createPacketServices:e}=await Promise.resolve().then(()=>(OXe(),jbe)),t=e().Packet.parser.LangiumParser;Mm.packet=t},"packet"),pie:rn(async()=>{let{createPieServices:e}=await Promise.resolve().then(()=>(BXe(),Hbe)),t=e().Pie.parser.LangiumParser;Mm.pie=t},"pie"),architecture:rn(async()=>{let{createArchitectureServices:e}=await Promise.resolve().then(()=>(PXe(),Vbe)),t=e().Architecture.parser.LangiumParser;Mm.architecture=t},"architecture"),gitGraph:rn(async()=>{let{createGitGraphServices:e}=await Promise.resolve().then(()=>(FXe(),Wbe)),t=e().GitGraph.parser.LangiumParser;Mm.gitGraph=t},"gitGraph")},rn(d5,"parse"),qbe=class extends Error{constructor(e){let t=e.lexerErrors.map(i=>i.message).join(`
`),r=e.parserErrors.map(i=>i.message).join(`
`);super(`Parsing failed: ${t} ${r}`),this.result=e}static{rn(this,"MermaidParseError")}}}),Xbe={};oi(Xbe,{diagram:()=>H4e});function MO(){return cj({length:7})}function Kbe(e,t){let r=Object.create(null);return e.reduce((i,n)=>{let a=t(n);return r[a]||(r[a]=!0,i.push(n)),i},[])}function wX(e,t,r){let i=e.indexOf(t);i===-1?e.push(r):e.splice(i,1,r)}function kX(e){let t=e.reduce((n,a)=>n.seq>a.seq?n:a,e[0]),r="";e.forEach(function(n){n===t?r+="	*":r+="	|"});let i=[r,t.id,t.seq];for(let n in Si.records.branches)Si.records.branches.get(n)===t.id&&i.push(n);if(Ce.debug(i.join(" ")),t.parents&&t.parents.length==2&&t.parents[0]&&t.parents[1]){let n=Si.records.commits.get(t.parents[0]);wX(e,t,n),t.parents[1]&&e.push(Si.records.commits.get(t.parents[1]))}else{if(t.parents.length==0)return;if(t.parents[0]){let n=Si.records.commits.get(t.parents[0]);wX(e,t,n)}}e=Kbe(e,n=>n.id),kX(e)}var is,Zbe,Lm,Si,Qbe,Jbe,e4e,t4e,r4e,i4e,n4e,TX,a4e,s4e,o4e,l4e,u4e,EX,h4e,c4e,d4e,CX,p4e,f4e,g4e,m4e,y4e,v4e,x4e,b4e,_4e,sc,$f,zf,zd,X0,Rm,Vu,Wu,yS,p5,vS,Gf,Aa,w4e,SX,AX,k4e,T4e,E4e,C4e,S4e,A4e,M4e,L4e,R4e,D4e,I4e,N4e,MX,O4e,f5,B4e,P4e,F4e,$4e,z4e,G4e,U4e,j4e,H4e,$Xe=D(()=>{BI(),yW(),Os(),Qn(),mS(),ha(),is={NORMAL:0,REVERSE:1,HIGHLIGHT:2,MERGE:3,CHERRY_PICK:4},Zbe=ka.gitGraph,Lm=k(()=>ff({...Zbe,...cs().gitGraph}),"getConfig"),Si=new PI(()=>{let e=Lm(),t=e.mainBranchName,r=e.mainBranchOrder;return{mainBranchName:t,commits:new Map,head:null,branchConfig:new Map([[t,{name:t,order:r}]]),branches:new Map([[t,null]]),currBranch:t,direction:"LR",seq:0,options:{}}}),k(MO,"getID"),k(Kbe,"uniqBy"),Qbe=k(function(e){Si.records.direction=e},"setDirection"),Jbe=k(function(e){Ce.debug("options str",e),e=e?.trim(),e=e||"{}";try{Si.records.options=JSON.parse(e)}catch(t){Ce.error("error while parsing gitGraph options",t.message)}},"setOptions"),e4e=k(function(){return Si.records.options},"getOptions"),t4e=k(function(e){let t=e.msg,r=e.id,i=e.type,n=e.tags;Ce.info("commit",t,r,i,n),Ce.debug("Entering commit:",t,r,i,n);let a=Lm();r=zr.sanitizeText(r,a),t=zr.sanitizeText(t,a),n=n?.map(u=>zr.sanitizeText(u,a));let s={id:r||Si.records.seq+"-"+MO(),message:t,seq:Si.records.seq++,type:i??is.NORMAL,tags:n??[],parents:Si.records.head==null?[]:[Si.records.head.id],branch:Si.records.currBranch};Si.records.head=s,Ce.info("main branch",a.mainBranchName),Si.records.commits.set(s.id,s),Si.records.branches.set(Si.records.currBranch,s.id),Ce.debug("in pushCommit "+s.id)},"commit"),r4e=k(function(e){let t=e.name,r=e.order;if(t=zr.sanitizeText(t,Lm()),Si.records.branches.has(t))throw new Error(`Trying to create an existing branch. (Help: Either use a new name if you want create a new branch or try using "checkout ${t}")`);Si.records.branches.set(t,Si.records.head!=null?Si.records.head.id:null),Si.records.branchConfig.set(t,{name:t,order:r}),TX(t),Ce.debug("in createBranch")},"branch"),i4e=k(e=>{let t=e.branch,r=e.id,i=e.type,n=e.tags,a=Lm();t=zr.sanitizeText(t,a),r&&(r=zr.sanitizeText(r,a));let s=Si.records.branches.get(Si.records.currBranch),u=Si.records.branches.get(t),h=s?Si.records.commits.get(s):void 0,d=u?Si.records.commits.get(u):void 0;if(h&&d&&h.branch===t)throw new Error(`Cannot merge branch '${t}' into itself.`);if(Si.records.currBranch===t){let y=new Error('Incorrect usage of "merge". Cannot merge a branch to itself');throw y.hash={text:`merge ${t}`,token:`merge ${t}`,expected:["branch abc"]},y}if(h===void 0||!h){let y=new Error(`Incorrect usage of "merge". Current branch (${Si.records.currBranch})has no commits`);throw y.hash={text:`merge ${t}`,token:`merge ${t}`,expected:["commit"]},y}if(!Si.records.branches.has(t)){let y=new Error('Incorrect usage of "merge". Branch to be merged ('+t+") does not exist");throw y.hash={text:`merge ${t}`,token:`merge ${t}`,expected:[`branch ${t}`]},y}if(d===void 0||!d){let y=new Error('Incorrect usage of "merge". Branch to be merged ('+t+") has no commits");throw y.hash={text:`merge ${t}`,token:`merge ${t}`,expected:['"commit"']},y}if(h===d){let y=new Error('Incorrect usage of "merge". Both branches have same head');throw y.hash={text:`merge ${t}`,token:`merge ${t}`,expected:["branch abc"]},y}if(r&&Si.records.commits.has(r)){let y=new Error('Incorrect usage of "merge". Commit with id:'+r+" already exists, use different custom Id");throw y.hash={text:`merge ${t} ${r} ${i} ${n?.join(" ")}`,token:`merge ${t} ${r} ${i} ${n?.join(" ")}`,expected:[`merge ${t} ${r}_UNIQUE ${i} ${n?.join(" ")}`]},y}let p=u||"",g={id:r||`${Si.records.seq}-${MO()}`,message:`merged branch ${t} into ${Si.records.currBranch}`,seq:Si.records.seq++,parents:Si.records.head==null?[]:[Si.records.head.id,p],branch:Si.records.currBranch,type:is.MERGE,customType:i,customId:!!r,tags:n??[]};Si.records.head=g,Si.records.commits.set(g.id,g),Si.records.branches.set(Si.records.currBranch,g.id),Ce.debug(Si.records.branches),Ce.debug("in mergeBranch")},"merge"),n4e=k(function(e){let t=e.id,r=e.targetId,i=e.tags,n=e.parent;Ce.debug("Entering cherryPick:",t,r,i);let a=Lm();if(t=zr.sanitizeText(t,a),r=zr.sanitizeText(r,a),i=i?.map(h=>zr.sanitizeText(h,a)),n=zr.sanitizeText(n,a),!t||!Si.records.commits.has(t)){let h=new Error('Incorrect usage of "cherryPick". Source commit id should exist and provided');throw h.hash={text:`cherryPick ${t} ${r}`,token:`cherryPick ${t} ${r}`,expected:["cherry-pick abc"]},h}let s=Si.records.commits.get(t);if(s===void 0||!s)throw new Error('Incorrect usage of "cherryPick". Source commit id should exist and provided');if(n&&!(Array.isArray(s.parents)&&s.parents.includes(n)))throw new Error("Invalid operation: The specified parent commit is not an immediate parent of the cherry-picked commit.");let u=s.branch;if(s.type===is.MERGE&&!n)throw new Error("Incorrect usage of cherry-pick: If the source commit is a merge commit, an immediate parent commit must be specified.");if(!r||!Si.records.commits.has(r)){if(u===Si.records.currBranch){let g=new Error('Incorrect usage of "cherryPick". Source commit is already on current branch');throw g.hash={text:`cherryPick ${t} ${r}`,token:`cherryPick ${t} ${r}`,expected:["cherry-pick abc"]},g}let h=Si.records.branches.get(Si.records.currBranch);if(h===void 0||!h){let g=new Error(`Incorrect usage of "cherry-pick". Current branch (${Si.records.currBranch})has no commits`);throw g.hash={text:`cherryPick ${t} ${r}`,token:`cherryPick ${t} ${r}`,expected:["cherry-pick abc"]},g}let d=Si.records.commits.get(h);if(d===void 0||!d){let g=new Error(`Incorrect usage of "cherry-pick". Current branch (${Si.records.currBranch})has no commits`);throw g.hash={text:`cherryPick ${t} ${r}`,token:`cherryPick ${t} ${r}`,expected:["cherry-pick abc"]},g}let p={id:Si.records.seq+"-"+MO(),message:`cherry-picked ${s?.message} into ${Si.records.currBranch}`,seq:Si.records.seq++,parents:Si.records.head==null?[]:[Si.records.head.id,s.id],branch:Si.records.currBranch,type:is.CHERRY_PICK,tags:i?i.filter(Boolean):[`cherry-pick:${s.id}${s.type===is.MERGE?`|parent:${n}`:""}`]};Si.records.head=p,Si.records.commits.set(p.id,p),Si.records.branches.set(Si.records.currBranch,p.id),Ce.debug(Si.records.branches),Ce.debug("in cherryPick")}},"cherryPick"),TX=k(function(e){if(e=zr.sanitizeText(e,Lm()),Si.records.branches.has(e)){Si.records.currBranch=e;let t=Si.records.branches.get(Si.records.currBranch);t===void 0||!t?Si.records.head=null:Si.records.head=Si.records.commits.get(t)??null}else{let t=new Error(`Trying to checkout branch which is not yet created. (Help try using "branch ${e}")`);throw t.hash={text:`checkout ${e}`,token:`checkout ${e}`,expected:[`branch ${e}`]},t}},"checkout"),k(wX,"upsert"),k(kX,"prettyPrintCommitHistory"),a4e=k(function(){Ce.debug(Si.records.commits);let e=EX()[0];kX([e])},"prettyPrint"),s4e=k(function(){Si.reset(),ho()},"clear"),o4e=k(function(){return[...Si.records.branchConfig.values()].map((e,t)=>e.order!==null&&e.order!==void 0?e:{...e,order:parseFloat(`0.${t}`)}).sort((e,t)=>(e.order??0)-(t.order??0)).map(({name:e})=>({name:e}))},"getBranchesAsObjArray"),l4e=k(function(){return Si.records.branches},"getBranches"),u4e=k(function(){return Si.records.commits},"getCommits"),EX=k(function(){let e=[...Si.records.commits.values()];return e.forEach(function(t){Ce.debug(t.id)}),e.sort((t,r)=>t.seq-r.seq),e},"getCommitsArray"),h4e=k(function(){return Si.records.currBranch},"getCurrentBranch"),c4e=k(function(){return Si.records.direction},"getDirection"),d4e=k(function(){return Si.records.head},"getHead"),CX={commitType:is,getConfig:Lm,setDirection:Qbe,setOptions:Jbe,getOptions:e4e,commit:t4e,branch:r4e,merge:i4e,cherryPick:n4e,checkout:TX,prettyPrint:a4e,clear:s4e,getBranchesAsObjArray:o4e,getBranches:l4e,getCommits:u4e,getCommitsArray:EX,getCurrentBranch:h4e,getDirection:c4e,getHead:d4e,setAccTitle:Ks,getAccTitle:Bo,getAccDescription:Po,setAccDescription:_o,setDiagramTitle:Fo,getDiagramTitle:$o},p4e=k((e,t)=>{b7(e,t),e.dir&&t.setDirection(e.dir);for(let r of e.statements)f4e(r,t)},"populate"),f4e=k((e,t)=>{let r={Commit:k(i=>t.commit(g4e(i)),"Commit"),Branch:k(i=>t.branch(m4e(i)),"Branch"),Merge:k(i=>t.merge(y4e(i)),"Merge"),Checkout:k(i=>t.checkout(v4e(i)),"Checkout"),CherryPicking:k(i=>t.cherryPick(x4e(i)),"CherryPicking")}[e.$type];r?r(e):Ce.error(`Unknown statement type: ${e.$type}`)},"parseStatement"),g4e=k(e=>({id:e.id,msg:e.message??"",type:e.type!==void 0?is[e.type]:is.NORMAL,tags:e.tags??void 0}),"parseCommit"),m4e=k(e=>({name:e.name,order:e.order??0}),"parseBranch"),y4e=k(e=>({branch:e.branch,id:e.id??"",type:e.type!==void 0?is[e.type]:void 0,tags:e.tags??void 0}),"parseMerge"),v4e=k(e=>e.branch,"parseCheckout"),x4e=k(e=>({id:e.id,targetId:"",tags:e.tags?.length===0?void 0:e.tags,parent:e.parent}),"parseCherryPicking"),b4e={parse:k(async e=>{let t=await d5("gitGraph",e);Ce.debug(t),p4e(t,CX)},"parse")},_4e=at(),sc=_4e?.gitGraph,$f=10,zf=40,zd=4,X0=2,Rm=8,Vu=new Map,Wu=new Map,yS=30,p5=new Map,vS=[],Gf=0,Aa="LR",w4e=k(()=>{Vu.clear(),Wu.clear(),p5.clear(),Gf=0,vS=[],Aa="LR"},"clear"),SX=k(e=>{let t=document.createElementNS("http://www.w3.org/2000/svg","text");return(typeof e=="string"?e.split(/\\n|\n|<br\s*\/?>/gi):e).forEach(r=>{let i=document.createElementNS("http://www.w3.org/2000/svg","tspan");i.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),i.setAttribute("dy","1em"),i.setAttribute("x","0"),i.setAttribute("class","row"),i.textContent=r.trim(),t.appendChild(i)}),t},"drawText"),AX=k(e=>{let t,r,i;return Aa==="BT"?(r=k((n,a)=>n<=a,"comparisonFunc"),i=1/0):(r=k((n,a)=>n>=a,"comparisonFunc"),i=0),e.forEach(n=>{let a=Aa==="TB"||Aa=="BT"?Wu.get(n)?.y:Wu.get(n)?.x;a!==void 0&&r(a,i)&&(t=n,i=a)}),t},"findClosestParent"),k4e=k(e=>{let t="",r=1/0;return e.forEach(i=>{let n=Wu.get(i).y;n<=r&&(t=i,r=n)}),t||void 0},"findClosestParentBT"),T4e=k((e,t,r)=>{let i=r,n=r,a=[];e.forEach(s=>{let u=t.get(s);if(!u)throw new Error(`Commit not found for key ${s}`);u.parents.length?(i=C4e(u),n=Math.max(i,n)):a.push(u),S4e(u,i)}),i=n,a.forEach(s=>{A4e(s,i,r)}),e.forEach(s=>{let u=t.get(s);if(u?.parents.length){let h=k4e(u.parents);i=Wu.get(h).y-zf,i<=n&&(n=i);let d=Vu.get(u.branch).pos,p=i-$f;Wu.set(u.id,{x:d,y:p})}})},"setParallelBTPos"),E4e=k(e=>{let t=AX(e.parents.filter(i=>i!==null));if(!t)throw new Error(`Closest parent not found for commit ${e.id}`);let r=Wu.get(t)?.y;if(r===void 0)throw new Error(`Closest parent position not found for commit ${e.id}`);return r},"findClosestParentPos"),C4e=k(e=>E4e(e)+zf,"calculateCommitPosition"),S4e=k((e,t)=>{let r=Vu.get(e.branch);if(!r)throw new Error(`Branch not found for commit ${e.id}`);let i=r.pos,n=t+$f;return Wu.set(e.id,{x:i,y:n}),{x:i,y:n}},"setCommitPosition"),A4e=k((e,t,r)=>{let i=Vu.get(e.branch);if(!i)throw new Error(`Branch not found for commit ${e.id}`);let n=t+r,a=i.pos;Wu.set(e.id,{x:a,y:n})},"setRootPosition"),M4e=k((e,t,r,i,n,a)=>{if(a===is.HIGHLIGHT)e.append("rect").attr("x",r.x-10).attr("y",r.y-10).attr("width",20).attr("height",20).attr("class",`commit ${t.id} commit-highlight${n%Rm} ${i}-outer`),e.append("rect").attr("x",r.x-6).attr("y",r.y-6).attr("width",12).attr("height",12).attr("class",`commit ${t.id} commit${n%Rm} ${i}-inner`);else if(a===is.CHERRY_PICK)e.append("circle").attr("cx",r.x).attr("cy",r.y).attr("r",10).attr("class",`commit ${t.id} ${i}`),e.append("circle").attr("cx",r.x-3).attr("cy",r.y+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${t.id} ${i}`),e.append("circle").attr("cx",r.x+3).attr("cy",r.y+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${t.id} ${i}`),e.append("line").attr("x1",r.x+3).attr("y1",r.y+1).attr("x2",r.x).attr("y2",r.y-5).attr("stroke","#fff").attr("class",`commit ${t.id} ${i}`),e.append("line").attr("x1",r.x-3).attr("y1",r.y+1).attr("x2",r.x).attr("y2",r.y-5).attr("stroke","#fff").attr("class",`commit ${t.id} ${i}`);else{let s=e.append("circle");if(s.attr("cx",r.x),s.attr("cy",r.y),s.attr("r",t.type===is.MERGE?9:10),s.attr("class",`commit ${t.id} commit${n%Rm}`),a===is.MERGE){let u=e.append("circle");u.attr("cx",r.x),u.attr("cy",r.y),u.attr("r",6),u.attr("class",`commit ${i} ${t.id} commit${n%Rm}`)}a===is.REVERSE&&e.append("path").attr("d",`M ${r.x-5},${r.y-5}L${r.x+5},${r.y+5}M${r.x-5},${r.y+5}L${r.x+5},${r.y-5}`).attr("class",`commit ${i} ${t.id} commit${n%Rm}`)}},"drawCommitBullet"),L4e=k((e,t,r,i)=>{if(t.type!==is.CHERRY_PICK&&(t.customId&&t.type===is.MERGE||t.type!==is.MERGE)&&sc?.showCommitLabel){let n=e.append("g"),a=n.insert("rect").attr("class","commit-label-bkg"),s=n.append("text").attr("x",i).attr("y",r.y+25).attr("class","commit-label").text(t.id),u=s.node()?.getBBox();if(u&&(a.attr("x",r.posWithOffset-u.width/2-X0).attr("y",r.y+13.5).attr("width",u.width+2*X0).attr("height",u.height+2*X0),Aa==="TB"||Aa==="BT"?(a.attr("x",r.x-(u.width+4*zd+5)).attr("y",r.y-12),s.attr("x",r.x-(u.width+4*zd)).attr("y",r.y+u.height-12)):s.attr("x",r.posWithOffset-u.width/2),sc.rotateCommitLabel))if(Aa==="TB"||Aa==="BT")s.attr("transform","rotate(-45, "+r.x+", "+r.y+")"),a.attr("transform","rotate(-45, "+r.x+", "+r.y+")");else{let h=-7.5-(u.width+10)/25*9.5,d=10+u.width/25*8.5;n.attr("transform","translate("+h+", "+d+") rotate(-45, "+i+", "+r.y+")")}}},"drawCommitLabel"),R4e=k((e,t,r,i)=>{if(t.tags.length>0){let n=0,a=0,s=0,u=[];for(let h of t.tags.reverse()){let d=e.insert("polygon"),p=e.append("circle"),g=e.append("text").attr("y",r.y-16-n).attr("class","tag-label").text(h),y=g.node()?.getBBox();if(!y)throw new Error("Tag bbox not found");a=Math.max(a,y.width),s=Math.max(s,y.height),g.attr("x",r.posWithOffset-y.width/2),u.push({tag:g,hole:p,rect:d,yOffset:n}),n+=20}for(let{tag:h,hole:d,rect:p,yOffset:g}of u){let y=s/2,m=r.y-19.2-g;if(p.attr("class","tag-label-bkg").attr("points",`
      ${i-a/2-zd/2},${m+X0}  
      ${i-a/2-zd/2},${m-X0}
      ${r.posWithOffset-a/2-zd},${m-y-X0}
      ${r.posWithOffset+a/2+zd},${m-y-X0}
      ${r.posWithOffset+a/2+zd},${m+y+X0}
      ${r.posWithOffset-a/2-zd},${m+y+X0}`),d.attr("cy",m).attr("cx",i-a/2+zd/2).attr("r",1.5).attr("class","tag-hole"),Aa==="TB"||Aa==="BT"){let x=i+g;p.attr("class","tag-label-bkg").attr("points",`
        ${r.x},${x+2}
        ${r.x},${x-2}
        ${r.x+$f},${x-y-2}
        ${r.x+$f+a+4},${x-y-2}
        ${r.x+$f+a+4},${x+y+2}
        ${r.x+$f},${x+y+2}`).attr("transform","translate(12,12) rotate(45, "+r.x+","+i+")"),d.attr("cx",r.x+zd/2).attr("cy",x).attr("transform","translate(12,12) rotate(45, "+r.x+","+i+")"),h.attr("x",r.x+5).attr("y",x+3).attr("transform","translate(14,14) rotate(45, "+r.x+","+i+")")}}}},"drawCommitTags"),D4e=k(e=>{switch(e.customType??e.type){case is.NORMAL:return"commit-normal";case is.REVERSE:return"commit-reverse";case is.HIGHLIGHT:return"commit-highlight";case is.MERGE:return"commit-merge";case is.CHERRY_PICK:return"commit-cherry-pick";default:return"commit-normal"}},"getCommitClassType"),I4e=k((e,t,r,i)=>{let n={x:0,y:0};if(e.parents.length>0){let a=AX(e.parents);if(a){let s=i.get(a)??n;return t==="TB"?s.y+zf:t==="BT"?(i.get(e.id)??n).y-zf:s.x+zf}}else return t==="TB"?yS:t==="BT"?(i.get(e.id)??n).y-zf:0;return 0},"calculatePosition"),N4e=k((e,t,r)=>{let i=Aa==="BT"&&r?t:t+$f,n=Aa==="TB"||Aa==="BT"?i:Vu.get(e.branch)?.pos,a=Aa==="TB"||Aa==="BT"?Vu.get(e.branch)?.pos:i;if(a===void 0||n===void 0)throw new Error(`Position were undefined for commit ${e.id}`);return{x:a,y:n,posWithOffset:i}},"getCommitPosition"),MX=k((e,t,r)=>{if(!sc)throw new Error("GitGraph config not found");let i=e.append("g").attr("class","commit-bullets"),n=e.append("g").attr("class","commit-labels"),a=Aa==="TB"||Aa==="BT"?yS:0,s=[...t.keys()],u=sc?.parallelCommits??!1,h=k((p,g)=>{let y=t.get(p)?.seq,m=t.get(g)?.seq;return y!==void 0&&m!==void 0?y-m:0},"sortKeys"),d=s.sort(h);Aa==="BT"&&(u&&T4e(d,t,a),d=d.reverse()),d.forEach(p=>{let g=t.get(p);if(!g)throw new Error(`Commit not found for key ${p}`);u&&(a=I4e(g,Aa,a,Wu));let y=N4e(g,a,u);if(r){let m=D4e(g),x=g.customType??g.type,_=Vu.get(g.branch)?.index??0;M4e(i,g,y,m,_,x),L4e(n,g,y,a),R4e(n,g,y,a)}Aa==="TB"||Aa==="BT"?Wu.set(g.id,{x:y.x,y:y.posWithOffset}):Wu.set(g.id,{x:y.posWithOffset,y:y.y}),a=Aa==="BT"&&u?a+zf:a+zf+$f,a>Gf&&(Gf=a)})},"drawCommits"),O4e=k((e,t,r,i,n)=>{let a=(Aa==="TB"||Aa==="BT"?r.x<i.x:r.y<i.y)?t.branch:e.branch,s=k(h=>h.branch===a,"isOnBranchToGetCurve"),u=k(h=>h.seq>e.seq&&h.seq<t.seq,"isBetweenCommits");return[...n.values()].some(h=>u(h)&&s(h))},"shouldRerouteArrow"),f5=k((e,t,r=0)=>{let i=e+Math.abs(e-t)/2;if(r>5)return i;if(vS.every(a=>Math.abs(a-i)>=10))return vS.push(i),i;let n=Math.abs(e-t);return f5(e,t-n/5,r+1)},"findLane"),B4e=k((e,t,r,i)=>{let n=Wu.get(t.id),a=Wu.get(r.id);if(n===void 0||a===void 0)throw new Error(`Commit positions not found for commits ${t.id} and ${r.id}`);let s=O4e(t,r,n,a,i),u="",h="",d=0,p=0,g=Vu.get(r.branch)?.index;r.type===is.MERGE&&t.id!==r.parents[0]&&(g=Vu.get(t.branch)?.index);let y;if(s){u="A 10 10, 0, 0, 0,",h="A 10 10, 0, 0, 1,",d=10,p=10;let m=n.y<a.y?f5(n.y,a.y):f5(a.y,n.y),x=n.x<a.x?f5(n.x,a.x):f5(a.x,n.x);Aa==="TB"?n.x<a.x?y=`M ${n.x} ${n.y} L ${x-d} ${n.y} ${h} ${x} ${n.y+p} L ${x} ${a.y-d} ${u} ${x+p} ${a.y} L ${a.x} ${a.y}`:(g=Vu.get(t.branch)?.index,y=`M ${n.x} ${n.y} L ${x+d} ${n.y} ${u} ${x} ${n.y+p} L ${x} ${a.y-d} ${h} ${x-p} ${a.y} L ${a.x} ${a.y}`):Aa==="BT"?n.x<a.x?y=`M ${n.x} ${n.y} L ${x-d} ${n.y} ${u} ${x} ${n.y-p} L ${x} ${a.y+d} ${h} ${x+p} ${a.y} L ${a.x} ${a.y}`:(g=Vu.get(t.branch)?.index,y=`M ${n.x} ${n.y} L ${x+d} ${n.y} ${h} ${x} ${n.y-p} L ${x} ${a.y+d} ${u} ${x-p} ${a.y} L ${a.x} ${a.y}`):n.y<a.y?y=`M ${n.x} ${n.y} L ${n.x} ${m-d} ${u} ${n.x+p} ${m} L ${a.x-d} ${m} ${h} ${a.x} ${m+p} L ${a.x} ${a.y}`:(g=Vu.get(t.branch)?.index,y=`M ${n.x} ${n.y} L ${n.x} ${m+d} ${h} ${n.x+p} ${m} L ${a.x-d} ${m} ${u} ${a.x} ${m-p} L ${a.x} ${a.y}`)}else u="A 20 20, 0, 0, 0,",h="A 20 20, 0, 0, 1,",d=20,p=20,Aa==="TB"?(n.x<a.x&&(r.type===is.MERGE&&t.id!==r.parents[0]?y=`M ${n.x} ${n.y} L ${n.x} ${a.y-d} ${u} ${n.x+p} ${a.y} L ${a.x} ${a.y}`:y=`M ${n.x} ${n.y} L ${a.x-d} ${n.y} ${h} ${a.x} ${n.y+p} L ${a.x} ${a.y}`),n.x>a.x&&(u="A 20 20, 0, 0, 0,",h="A 20 20, 0, 0, 1,",d=20,p=20,r.type===is.MERGE&&t.id!==r.parents[0]?y=`M ${n.x} ${n.y} L ${n.x} ${a.y-d} ${h} ${n.x-p} ${a.y} L ${a.x} ${a.y}`:y=`M ${n.x} ${n.y} L ${a.x+d} ${n.y} ${u} ${a.x} ${n.y+p} L ${a.x} ${a.y}`),n.x===a.x&&(y=`M ${n.x} ${n.y} L ${a.x} ${a.y}`)):Aa==="BT"?(n.x<a.x&&(r.type===is.MERGE&&t.id!==r.parents[0]?y=`M ${n.x} ${n.y} L ${n.x} ${a.y+d} ${h} ${n.x+p} ${a.y} L ${a.x} ${a.y}`:y=`M ${n.x} ${n.y} L ${a.x-d} ${n.y} ${u} ${a.x} ${n.y-p} L ${a.x} ${a.y}`),n.x>a.x&&(u="A 20 20, 0, 0, 0,",h="A 20 20, 0, 0, 1,",d=20,p=20,r.type===is.MERGE&&t.id!==r.parents[0]?y=`M ${n.x} ${n.y} L ${n.x} ${a.y+d} ${u} ${n.x-p} ${a.y} L ${a.x} ${a.y}`:y=`M ${n.x} ${n.y} L ${a.x-d} ${n.y} ${u} ${a.x} ${n.y-p} L ${a.x} ${a.y}`),n.x===a.x&&(y=`M ${n.x} ${n.y} L ${a.x} ${a.y}`)):(n.y<a.y&&(r.type===is.MERGE&&t.id!==r.parents[0]?y=`M ${n.x} ${n.y} L ${a.x-d} ${n.y} ${h} ${a.x} ${n.y+p} L ${a.x} ${a.y}`:y=`M ${n.x} ${n.y} L ${n.x} ${a.y-d} ${u} ${n.x+p} ${a.y} L ${a.x} ${a.y}`),n.y>a.y&&(r.type===is.MERGE&&t.id!==r.parents[0]?y=`M ${n.x} ${n.y} L ${a.x-d} ${n.y} ${u} ${a.x} ${n.y-p} L ${a.x} ${a.y}`:y=`M ${n.x} ${n.y} L ${n.x} ${a.y+d} ${h} ${n.x+p} ${a.y} L ${a.x} ${a.y}`),n.y===a.y&&(y=`M ${n.x} ${n.y} L ${a.x} ${a.y}`));if(y===void 0)throw new Error("Line definition not found");e.append("path").attr("d",y).attr("class","arrow arrow"+g%Rm)},"drawArrow"),P4e=k((e,t)=>{let r=e.append("g").attr("class","commit-arrows");[...t.keys()].forEach(i=>{let n=t.get(i);n.parents&&n.parents.length>0&&n.parents.forEach(a=>{B4e(r,t.get(a),n,t)})})},"drawArrows"),F4e=k((e,t)=>{let r=e.append("g");t.forEach((i,n)=>{let a=n%Rm,s=Vu.get(i.name)?.pos;if(s===void 0)throw new Error(`Position not found for branch ${i.name}`);let u=r.append("line");u.attr("x1",0),u.attr("y1",s),u.attr("x2",Gf),u.attr("y2",s),u.attr("class","branch branch"+a),Aa==="TB"?(u.attr("y1",yS),u.attr("x1",s),u.attr("y2",Gf),u.attr("x2",s)):Aa==="BT"&&(u.attr("y1",Gf),u.attr("x1",s),u.attr("y2",yS),u.attr("x2",s)),vS.push(s);let h=i.name,d=SX(h),p=r.insert("rect"),g=r.insert("g").attr("class","branchLabel").insert("g").attr("class","label branch-label"+a);g.node().appendChild(d);let y=d.getBBox();p.attr("class","branchLabelBkg label"+a).attr("rx",4).attr("ry",4).attr("x",-y.width-4-(sc?.rotateCommitLabel===!0?30:0)).attr("y",-y.height/2+8).attr("width",y.width+18).attr("height",y.height+4),g.attr("transform","translate("+(-y.width-14-(sc?.rotateCommitLabel===!0?30:0))+", "+(s-y.height/2-1)+")"),Aa==="TB"?(p.attr("x",s-y.width/2-10).attr("y",0),g.attr("transform","translate("+(s-y.width/2-5)+", 0)")):Aa==="BT"?(p.attr("x",s-y.width/2-10).attr("y",Gf),g.attr("transform","translate("+(s-y.width/2-5)+", "+Gf+")")):p.attr("transform","translate(-19, "+(s-y.height/2)+")")})},"drawBranches"),$4e=k(function(e,t,r,i,n){return Vu.set(e,{pos:t,index:r}),t+=50+(n?40:0)+(Aa==="TB"||Aa==="BT"?i.width/2:0),t},"setBranchPosition"),z4e=k(function(e,t,r,i){if(w4e(),Ce.debug("in gitgraph renderer",e+`
`,"id:",t,r),!sc)throw new Error("GitGraph config not found");let n=sc.rotateCommitLabel??!1,a=i.db;p5=a.getCommits();let s=a.getBranchesAsObjArray();Aa=a.getDirection();let u=Nr(`[id="${t}"]`),h=0;s.forEach((d,p)=>{let g=SX(d.name),y=u.append("g"),m=y.insert("g").attr("class","branchLabel"),x=m.insert("g").attr("class","label branch-label");x.node()?.appendChild(g);let _=g.getBBox();h=$4e(d.name,h,p,_,n),x.remove(),m.remove(),y.remove()}),MX(u,p5,!1),sc.showBranches&&F4e(u,s),P4e(u,p5),MX(u,p5,!0),qn.insertTitle(u,"gitTitleText",sc.titleTopMargin??0,a.getDiagramTitle()),oh(void 0,u,sc.diagramPadding,sc.useMaxWidth)},"draw"),G4e={draw:z4e},U4e=k(e=>`
  .commit-id,
  .commit-msg,
  .branch-label {
    fill: lightgrey;
    color: lightgrey;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }
  ${[0,1,2,3,4,5,6,7].map(t=>`
        .branch-label${t} { fill: ${e["gitBranchLabel"+t]}; }
        .commit${t} { stroke: ${e["git"+t]}; fill: ${e["git"+t]}; }
        .commit-highlight${t} { stroke: ${e["gitInv"+t]}; fill: ${e["gitInv"+t]}; }
        .label${t}  { fill: ${e["git"+t]}; }
        .arrow${t} { stroke: ${e["git"+t]}; }
        `).join(`
`)}

  .branch {
    stroke-width: 1;
    stroke: ${e.lineColor};
    stroke-dasharray: 2;
  }
  .commit-label { font-size: ${e.commitLabelFontSize}; fill: ${e.commitLabelColor};}
  .commit-label-bkg { font-size: ${e.commitLabelFontSize}; fill: ${e.commitLabelBackground}; opacity: 0.5; }
  .tag-label { font-size: ${e.tagLabelFontSize}; fill: ${e.tagLabelColor};}
  .tag-label-bkg { fill: ${e.tagLabelBackground}; stroke: ${e.tagLabelBorder}; }
  .tag-hole { fill: ${e.textColor}; }

  .commit-merge {
    stroke: ${e.primaryColor};
    fill: ${e.primaryColor};
  }
  .commit-reverse {
    stroke: ${e.primaryColor};
    fill: ${e.primaryColor};
    stroke-width: 3;
  }
  .commit-highlight-outer {
  }
  .commit-highlight-inner {
    stroke: ${e.primaryColor};
    fill: ${e.primaryColor};
  }

  .arrow { stroke-width: 8; stroke-linecap: round; fill: none}
  .gitTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${e.textColor};
  }
`,"getStyles"),j4e=U4e,H4e={parser:b4e,db:CX,renderer:G4e,styles:j4e}}),zXe=hi((e,t)=>{(function(r,i){typeof e=="object"&&typeof t<"u"?t.exports=i():typeof define=="function"&&define.amd?define(i):(r=typeof globalThis<"u"?globalThis:r||self).dayjs_plugin_isoWeek=i()})(e,function(){"use strict";var r="day";return function(i,n,a){var s=function(d){return d.add(4-d.isoWeekday(),r)},u=n.prototype;u.isoWeekYear=function(){return s(this).year()},u.isoWeek=function(d){if(!this.$utils().u(d))return this.add(7*(d-this.isoWeek()),r);var p,g,y,m,x=s(this),_=(p=this.isoWeekYear(),g=this.$u,y=(g?a.utc:a)().year(p).startOf("year"),m=4-y.isoWeekday(),y.isoWeekday()>4&&(m+=7),y.add(m,r));return x.diff(_,"week")+1},u.isoWeekday=function(d){return this.$utils().u(d)?this.day()||7:this.day(this.day()%7?d:d-7)};var h=u.startOf;u.startOf=function(d,p){var g=this.$utils(),y=!!g.u(p)||p;return g.p(d)==="isoweek"?y?this.date(this.date()-(this.isoWeekday()-1)).startOf("day"):this.date(this.date()-1-(this.isoWeekday()-1)+7).endOf("day"):h.bind(this)(d,p)}}})}),GXe=hi((e,t)=>{(function(r,i){typeof e=="object"&&typeof t<"u"?t.exports=i():typeof define=="function"&&define.amd?define(i):(r=typeof globalThis<"u"?globalThis:r||self).dayjs_plugin_customParseFormat=i()})(e,function(){"use strict";var r={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},i=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,n=/\d/,a=/\d\d/,s=/\d\d?/,u=/\d*[^-_:/,()\s\d]+/,h={},d=function(E){return(E=+E)+(E>68?1900:2e3)},p=function(E){return function(w){this[E]=+w}},g=[/[+-]\d\d:?(\d\d)?|Z/,function(E){(this.zone||(this.zone={})).offset=function(w){if(!w||w==="Z")return 0;var C=w.match(/([+-]|\d\d)/g),A=60*C[1]+(+C[2]||0);return A===0?0:C[0]==="+"?-A:A}(E)}],y=function(E){var w=h[E];return w&&(w.indexOf?w:w.s.concat(w.f))},m=function(E,w){var C,A=h.meridiem;if(A){for(var M=1;M<=24;M+=1)if(E.indexOf(A(M,0,w))>-1){C=M>12;break}}else C=E===(w?"pm":"PM");return C},x={A:[u,function(E){this.afternoon=m(E,!1)}],a:[u,function(E){this.afternoon=m(E,!0)}],Q:[n,function(E){this.month=3*(E-1)+1}],S:[n,function(E){this.milliseconds=100*+E}],SS:[a,function(E){this.milliseconds=10*+E}],SSS:[/\d{3}/,function(E){this.milliseconds=+E}],s:[s,p("seconds")],ss:[s,p("seconds")],m:[s,p("minutes")],mm:[s,p("minutes")],H:[s,p("hours")],h:[s,p("hours")],HH:[s,p("hours")],hh:[s,p("hours")],D:[s,p("day")],DD:[a,p("day")],Do:[u,function(E){var w=h.ordinal,C=E.match(/\d+/);if(this.day=C[0],w)for(var A=1;A<=31;A+=1)w(A).replace(/\[|\]/g,"")===E&&(this.day=A)}],w:[s,p("week")],ww:[a,p("week")],M:[s,p("month")],MM:[a,p("month")],MMM:[u,function(E){var w=y("months"),C=(y("monthsShort")||w.map(function(A){return A.slice(0,3)})).indexOf(E)+1;if(C<1)throw new Error;this.month=C%12||C}],MMMM:[u,function(E){var w=y("months").indexOf(E)+1;if(w<1)throw new Error;this.month=w%12||w}],Y:[/[+-]?\d+/,p("year")],YY:[a,function(E){this.year=d(E)}],YYYY:[/\d{4}/,p("year")],Z:g,ZZ:g};function _(E){var w,C;w=E,C=h&&h.formats;for(var A=(E=w.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(G,z,F){var X=F&&F.toUpperCase();return z||C[F]||r[F]||C[X].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(I,j,H){return j||H.slice(1)})})).match(i),M=A.length,N=0;N<M;N+=1){var B=A[N],O=x[B],L=O&&O[0],$=O&&O[1];A[N]=$?{regex:L,parser:$}:B.replace(/^\[|\]$/g,"")}return function(G){for(var z={},F=0,X=0;F<M;F+=1){var I=A[F];if(typeof I=="string")X+=I.length;else{var j=I.regex,H=I.parser,V=G.slice(X),P=j.exec(V)[0];H.call(z,P),G=G.replace(P,"")}}return function(q){var Z=q.afternoon;if(Z!==void 0){var J=q.hours;Z?J<12&&(q.hours+=12):J===12&&(q.hours=0),delete q.afternoon}}(z),z}}return function(E,w,C){C.p.customParseFormat=!0,E&&E.parseTwoDigitYear&&(d=E.parseTwoDigitYear);var A=w.prototype,M=A.parse;A.parse=function(N){var B=N.date,O=N.utc,L=N.args;this.$u=O;var $=L[1];if(typeof $=="string"){var G=L[2]===!0,z=L[3]===!0,F=G||z,X=L[2];z&&(X=L[2]),h=this.$locale(),!G&&X&&(h=C.Ls[X]),this.$d=function(V,P,q,Z){try{if(["x","X"].indexOf(P)>-1)return new Date((P==="X"?1e3:1)*V);var J=_(P)(V),ae=J.year,ue=J.month,be=J.day,Le=J.hours,xe=J.minutes,Ae=J.seconds,oe=J.milliseconds,he=J.zone,le=J.week,ke=new Date,pe=be||(ae||ue?1:ke.getDate()),qe=ae||ke.getFullYear(),me=0;ae&&!ue||(me=ue>0?ue-1:ke.getMonth());var st,we=Le||0,Et=xe||0,wt=Ae||0,Tt=oe||0;return he?new Date(Date.UTC(qe,me,pe,we,Et,wt,Tt+60*he.offset*1e3)):q?new Date(Date.UTC(qe,me,pe,we,Et,wt,Tt)):(st=new Date(qe,me,pe,we,Et,wt,Tt),le&&(st=Z(st).week(le).toDate()),st)}catch{return new Date("")}}(B,$,O,C),this.init(),X&&X!==!0&&(this.$L=this.locale(X).$L),F&&B!=this.format($)&&(this.$d=new Date("")),h={}}else if($ instanceof Array)for(var I=$.length,j=1;j<=I;j+=1){L[1]=$[j-1];var H=C.apply(this,L);if(H.isValid()){this.$d=H.$d,this.$L=H.$L,this.init();break}j===I&&(this.$d=new Date(""))}else M.call(this,N)}}})}),UXe=hi((e,t)=>{(function(r,i){typeof e=="object"&&typeof t<"u"?t.exports=i():typeof define=="function"&&define.amd?define(i):(r=typeof globalThis<"u"?globalThis:r||self).dayjs_plugin_advancedFormat=i()})(e,function(){"use strict";return function(r,i){var n=i.prototype,a=n.format;n.format=function(s){var u=this,h=this.$locale();if(!this.isValid())return a.bind(this)(s);var d=this.$utils(),p=(s||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(g){switch(g){case"Q":return Math.ceil((u.$M+1)/3);case"Do":return h.ordinal(u.$D);case"gggg":return u.weekYear();case"GGGG":return u.isoWeekYear();case"wo":return h.ordinal(u.week(),"W");case"w":case"ww":return d.s(u.week(),g==="w"?1:2,"0");case"W":case"WW":return d.s(u.isoWeek(),g==="W"?1:2,"0");case"k":case"kk":return d.s(String(u.$H===0?24:u.$H),g==="k"?1:2,"0");case"X":return Math.floor(u.$d.getTime()/1e3);case"x":return u.$d.getTime();case"z":return"["+u.offsetName()+"]";case"zzz":return"["+u.offsetName("long")+"]";default:return g}});return a.bind(this)(p)}}})}),V4e={};oi(V4e,{diagram:()=>$3e});function LX(e,t,r){let i=!0;for(;i;)i=!1,r.forEach(function(n){let a="^\\s*"+n+"\\s*$",s=new RegExp(a);e[0].match(s)&&(t[n]=!0,e.shift(1),i=!0)})}var W4e,oc,Y4e,q4e,X4e,LO,RO,K4e,RX,Gd,DO,IO,NO,g5,m5,OO,BO,xS,Xv,PO,DX,FO,y5,$O,zO,bS,GO,Z4e,Q4e,J4e,e3e,t3e,r3e,i3e,n3e,a3e,s3e,o3e,l3e,u3e,h3e,c3e,d3e,p3e,f3e,g3e,m3e,y3e,v3e,x3e,IX,b3e,_3e,w3e,NX,k3e,UO,OX,BX,_S,Kv,T3e,E3e,PX,jO,Yo,FX,C3e,Dm,S3e,$X,A3e,zX,M3e,GX,L3e,R3e,D3e,I3e,UX,N3e,Uf,O3e,B3e,P3e,F3e,$3e,jXe=D(()=>{Os(),Qn(),W4e=Ke(_2(),1),oc=Ke(ba(),1),Y4e=Ke(zXe(),1),q4e=Ke(GXe(),1),X4e=Ke(UXe(),1),LO=Ke(ba(),1),ha(),RO=function(){var e=k(function(X,I,j,H){for(j=j||{},H=X.length;H--;j[X[H]]=I);return j},"o"),t=[6,8,10,12,13,14,15,16,17,18,20,21,22,23,24,25,26,27,28,29,30,31,33,35,36,38,40],r=[1,26],i=[1,27],n=[1,28],a=[1,29],s=[1,30],u=[1,31],h=[1,32],d=[1,33],p=[1,34],g=[1,9],y=[1,10],m=[1,11],x=[1,12],_=[1,13],E=[1,14],w=[1,15],C=[1,16],A=[1,19],M=[1,20],N=[1,21],B=[1,22],O=[1,23],L=[1,25],$=[1,35],G={trace:k(function(){},"trace"),yy:{},symbols_:{error:2,start:3,gantt:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NL:10,weekday:11,weekday_monday:12,weekday_tuesday:13,weekday_wednesday:14,weekday_thursday:15,weekday_friday:16,weekday_saturday:17,weekday_sunday:18,weekend:19,weekend_friday:20,weekend_saturday:21,dateFormat:22,inclusiveEndDates:23,topAxis:24,axisFormat:25,tickInterval:26,excludes:27,includes:28,todayMarker:29,title:30,acc_title:31,acc_title_value:32,acc_descr:33,acc_descr_value:34,acc_descr_multiline_value:35,section:36,clickStatement:37,taskTxt:38,taskData:39,click:40,callbackname:41,callbackargs:42,href:43,clickStatementDebug:44,$accept:0,$end:1},terminals_:{2:"error",4:"gantt",6:"EOF",8:"SPACE",10:"NL",12:"weekday_monday",13:"weekday_tuesday",14:"weekday_wednesday",15:"weekday_thursday",16:"weekday_friday",17:"weekday_saturday",18:"weekday_sunday",20:"weekend_friday",21:"weekend_saturday",22:"dateFormat",23:"inclusiveEndDates",24:"topAxis",25:"axisFormat",26:"tickInterval",27:"excludes",28:"includes",29:"todayMarker",30:"title",31:"acc_title",32:"acc_title_value",33:"acc_descr",34:"acc_descr_value",35:"acc_descr_multiline_value",36:"section",38:"taskTxt",39:"taskData",40:"click",41:"callbackname",42:"callbackargs",43:"href"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[11,1],[11,1],[11,1],[11,1],[11,1],[11,1],[11,1],[19,1],[19,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,2],[9,2],[9,1],[9,1],[9,1],[9,2],[37,2],[37,3],[37,3],[37,4],[37,3],[37,4],[37,2],[44,2],[44,3],[44,3],[44,4],[44,3],[44,4],[44,2]],performAction:k(function(X,I,j,H,V,P,q){var Z=P.length-1;switch(V){case 1:return P[Z-1];case 2:this.$=[];break;case 3:P[Z-1].push(P[Z]),this.$=P[Z-1];break;case 4:case 5:this.$=P[Z];break;case 6:case 7:this.$=[];break;case 8:H.setWeekday("monday");break;case 9:H.setWeekday("tuesday");break;case 10:H.setWeekday("wednesday");break;case 11:H.setWeekday("thursday");break;case 12:H.setWeekday("friday");break;case 13:H.setWeekday("saturday");break;case 14:H.setWeekday("sunday");break;case 15:H.setWeekend("friday");break;case 16:H.setWeekend("saturday");break;case 17:H.setDateFormat(P[Z].substr(11)),this.$=P[Z].substr(11);break;case 18:H.enableInclusiveEndDates(),this.$=P[Z].substr(18);break;case 19:H.TopAxis(),this.$=P[Z].substr(8);break;case 20:H.setAxisFormat(P[Z].substr(11)),this.$=P[Z].substr(11);break;case 21:H.setTickInterval(P[Z].substr(13)),this.$=P[Z].substr(13);break;case 22:H.setExcludes(P[Z].substr(9)),this.$=P[Z].substr(9);break;case 23:H.setIncludes(P[Z].substr(9)),this.$=P[Z].substr(9);break;case 24:H.setTodayMarker(P[Z].substr(12)),this.$=P[Z].substr(12);break;case 27:H.setDiagramTitle(P[Z].substr(6)),this.$=P[Z].substr(6);break;case 28:this.$=P[Z].trim(),H.setAccTitle(this.$);break;case 29:case 30:this.$=P[Z].trim(),H.setAccDescription(this.$);break;case 31:H.addSection(P[Z].substr(8)),this.$=P[Z].substr(8);break;case 33:H.addTask(P[Z-1],P[Z]),this.$="task";break;case 34:this.$=P[Z-1],H.setClickEvent(P[Z-1],P[Z],null);break;case 35:this.$=P[Z-2],H.setClickEvent(P[Z-2],P[Z-1],P[Z]);break;case 36:this.$=P[Z-2],H.setClickEvent(P[Z-2],P[Z-1],null),H.setLink(P[Z-2],P[Z]);break;case 37:this.$=P[Z-3],H.setClickEvent(P[Z-3],P[Z-2],P[Z-1]),H.setLink(P[Z-3],P[Z]);break;case 38:this.$=P[Z-2],H.setClickEvent(P[Z-2],P[Z],null),H.setLink(P[Z-2],P[Z-1]);break;case 39:this.$=P[Z-3],H.setClickEvent(P[Z-3],P[Z-1],P[Z]),H.setLink(P[Z-3],P[Z-2]);break;case 40:this.$=P[Z-1],H.setLink(P[Z-1],P[Z]);break;case 41:case 47:this.$=P[Z-1]+" "+P[Z];break;case 42:case 43:case 45:this.$=P[Z-2]+" "+P[Z-1]+" "+P[Z];break;case 44:case 46:this.$=P[Z-3]+" "+P[Z-2]+" "+P[Z-1]+" "+P[Z];break}},"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},e(t,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:17,12:r,13:i,14:n,15:a,16:s,17:u,18:h,19:18,20:d,21:p,22:g,23:y,24:m,25:x,26:_,27:E,28:w,29:C,30:A,31:M,33:N,35:B,36:O,37:24,38:L,40:$},e(t,[2,7],{1:[2,1]}),e(t,[2,3]),{9:36,11:17,12:r,13:i,14:n,15:a,16:s,17:u,18:h,19:18,20:d,21:p,22:g,23:y,24:m,25:x,26:_,27:E,28:w,29:C,30:A,31:M,33:N,35:B,36:O,37:24,38:L,40:$},e(t,[2,5]),e(t,[2,6]),e(t,[2,17]),e(t,[2,18]),e(t,[2,19]),e(t,[2,20]),e(t,[2,21]),e(t,[2,22]),e(t,[2,23]),e(t,[2,24]),e(t,[2,25]),e(t,[2,26]),e(t,[2,27]),{32:[1,37]},{34:[1,38]},e(t,[2,30]),e(t,[2,31]),e(t,[2,32]),{39:[1,39]},e(t,[2,8]),e(t,[2,9]),e(t,[2,10]),e(t,[2,11]),e(t,[2,12]),e(t,[2,13]),e(t,[2,14]),e(t,[2,15]),e(t,[2,16]),{41:[1,40],43:[1,41]},e(t,[2,4]),e(t,[2,28]),e(t,[2,29]),e(t,[2,33]),e(t,[2,34],{42:[1,42],43:[1,43]}),e(t,[2,40],{41:[1,44]}),e(t,[2,35],{43:[1,45]}),e(t,[2,36]),e(t,[2,38],{42:[1,46]}),e(t,[2,37]),e(t,[2,39])],defaultActions:{},parseError:k(function(X,I){if(I.recoverable)this.trace(X);else{var j=new Error(X);throw j.hash=I,j}},"parseError"),parse:k(function(X){var I=this,j=[0],H=[],V=[null],P=[],q=this.table,Z="",J=0,ae=0,ue=0,be=2,Le=1,xe=P.slice.call(arguments,1),Ae=Object.create(this.lexer),oe={yy:{}};for(var he in this.yy)Object.prototype.hasOwnProperty.call(this.yy,he)&&(oe.yy[he]=this.yy[he]);Ae.setInput(X,oe.yy),oe.yy.lexer=Ae,oe.yy.parser=this,typeof Ae.yylloc>"u"&&(Ae.yylloc={});var le=Ae.yylloc;P.push(le);var ke=Ae.options&&Ae.options.ranges;typeof oe.yy.parseError=="function"?this.parseError=oe.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function pe(ne){j.length=j.length-2*ne,V.length=V.length-ne,P.length=P.length-ne}k(pe,"popStack");function qe(){var ne;return ne=H.pop()||Ae.lex()||Le,typeof ne!="number"&&(ne instanceof Array&&(H=ne,ne=H.pop()),ne=I.symbols_[ne]||ne),ne}k(qe,"lex");for(var me,st,we,Et,wt,Tt,er={},tr,kr,fr,Mt;;){if(we=j[j.length-1],this.defaultActions[we]?Et=this.defaultActions[we]:((me===null||typeof me>"u")&&(me=qe()),Et=q[we]&&q[we][me]),typeof Et>"u"||!Et.length||!Et[0]){var Kt="";Mt=[];for(tr in q[we])this.terminals_[tr]&&tr>be&&Mt.push("'"+this.terminals_[tr]+"'");Ae.showPosition?Kt="Parse error on line "+(J+1)+`:
`+Ae.showPosition()+`
Expecting `+Mt.join(", ")+", got '"+(this.terminals_[me]||me)+"'":Kt="Parse error on line "+(J+1)+": Unexpected "+(me==Le?"end of input":"'"+(this.terminals_[me]||me)+"'"),this.parseError(Kt,{text:Ae.match,token:this.terminals_[me]||me,line:Ae.yylineno,loc:le,expected:Mt})}if(Et[0]instanceof Array&&Et.length>1)throw new Error("Parse Error: multiple actions possible at state: "+we+", token: "+me);switch(Et[0]){case 1:j.push(me),V.push(Ae.yytext),P.push(Ae.yylloc),j.push(Et[1]),me=null,st?(me=st,st=null):(ae=Ae.yyleng,Z=Ae.yytext,J=Ae.yylineno,le=Ae.yylloc,ue>0&&ue--);break;case 2:if(kr=this.productions_[Et[1]][1],er.$=V[V.length-kr],er._$={first_line:P[P.length-(kr||1)].first_line,last_line:P[P.length-1].last_line,first_column:P[P.length-(kr||1)].first_column,last_column:P[P.length-1].last_column},ke&&(er._$.range=[P[P.length-(kr||1)].range[0],P[P.length-1].range[1]]),Tt=this.performAction.apply(er,[Z,ae,J,oe.yy,Et[1],V,P].concat(xe)),typeof Tt<"u")return Tt;kr&&(j=j.slice(0,-1*kr*2),V=V.slice(0,-1*kr),P=P.slice(0,-1*kr)),j.push(this.productions_[Et[1]][0]),V.push(er.$),P.push(er._$),fr=q[j[j.length-2]][j[j.length-1]],j.push(fr);break;case 3:return!0}}return!0},"parse")},z=function(){var X={EOF:1,parseError:k(function(I,j){if(this.yy.parser)this.yy.parser.parseError(I,j);else throw new Error(I)},"parseError"),setInput:k(function(I,j){return this.yy=j||this.yy||{},this._input=I,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:k(function(){var I=this._input[0];this.yytext+=I,this.yyleng++,this.offset++,this.match+=I,this.matched+=I;var j=I.match(/(?:\r\n?|\n).*/g);return j?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),I},"input"),unput:k(function(I){var j=I.length,H=I.split(/(?:\r\n?|\n)/g);this._input=I+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-j),this.offset-=j;var V=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),H.length-1&&(this.yylineno-=H.length-1);var P=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:H?(H.length===V.length?this.yylloc.first_column:0)+V[V.length-H.length].length-H[0].length:this.yylloc.first_column-j},this.options.ranges&&(this.yylloc.range=[P[0],P[0]+this.yyleng-j]),this.yyleng=this.yytext.length,this},"unput"),more:k(function(){return this._more=!0,this},"more"),reject:k(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:k(function(I){this.unput(this.match.slice(I))},"less"),pastInput:k(function(){var I=this.matched.substr(0,this.matched.length-this.match.length);return(I.length>20?"...":"")+I.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:k(function(){var I=this.match;return I.length<20&&(I+=this._input.substr(0,20-I.length)),(I.substr(0,20)+(I.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:k(function(){var I=this.pastInput(),j=new Array(I.length+1).join("-");return I+this.upcomingInput()+`
`+j+"^"},"showPosition"),test_match:k(function(I,j){var H,V,P;if(this.options.backtrack_lexer&&(P={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(P.yylloc.range=this.yylloc.range.slice(0))),V=I[0].match(/(?:\r\n?|\n).*/g),V&&(this.yylineno+=V.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:V?V[V.length-1].length-V[V.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+I[0].length},this.yytext+=I[0],this.match+=I[0],this.matches=I,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(I[0].length),this.matched+=I[0],H=this.performAction.call(this,this.yy,this,j,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),H)return H;if(this._backtrack){for(var q in P)this[q]=P[q];return!1}return!1},"test_match"),next:k(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var I,j,H,V;this._more||(this.yytext="",this.match="");for(var P=this._currentRules(),q=0;q<P.length;q++)if(H=this._input.match(this.rules[P[q]]),H&&(!j||H[0].length>j[0].length)){if(j=H,V=q,this.options.backtrack_lexer){if(I=this.test_match(H,P[q]),I!==!1)return I;if(this._backtrack){j=!1;continue}else return!1}else if(!this.options.flex)break}return j?(I=this.test_match(j,P[V]),I!==!1?I:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:k(function(){var I=this.next();return I||this.lex()},"lex"),begin:k(function(I){this.conditionStack.push(I)},"begin"),popState:k(function(){var I=this.conditionStack.length-1;return I>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:k(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:k(function(I){return I=this.conditionStack.length-1-Math.abs(I||0),I>=0?this.conditionStack[I]:"INITIAL"},"topState"),pushState:k(function(I){this.begin(I)},"pushState"),stateStackSize:k(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:k(function(I,j,H,V){var P=V;switch(H){case 0:return this.begin("open_directive"),"open_directive";case 1:return this.begin("acc_title"),31;case 2:return this.popState(),"acc_title_value";case 3:return this.begin("acc_descr"),33;case 4:return this.popState(),"acc_descr_value";case 5:this.begin("acc_descr_multiline");break;case 6:this.popState();break;case 7:return"acc_descr_multiline_value";case 8:break;case 9:break;case 10:break;case 11:return 10;case 12:break;case 13:break;case 14:this.begin("href");break;case 15:this.popState();break;case 16:return 43;case 17:this.begin("callbackname");break;case 18:this.popState();break;case 19:this.popState(),this.begin("callbackargs");break;case 20:return 41;case 21:this.popState();break;case 22:return 42;case 23:this.begin("click");break;case 24:this.popState();break;case 25:return 40;case 26:return 4;case 27:return 22;case 28:return 23;case 29:return 24;case 30:return 25;case 31:return 26;case 32:return 28;case 33:return 27;case 34:return 29;case 35:return 12;case 36:return 13;case 37:return 14;case 38:return 15;case 39:return 16;case 40:return 17;case 41:return 18;case 42:return 20;case 43:return 21;case 44:return"date";case 45:return 30;case 46:return"accDescription";case 47:return 36;case 48:return 38;case 49:return 39;case 50:return":";case 51:return 6;case 52:return"INVALID"}},"anonymous"),rules:[/^(?:%%\{)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:%%(?!\{)*[^\n]*)/i,/^(?:[^\}]%%*[^\n]*)/i,/^(?:%%*[^\n]*[\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:%[^\n]*)/i,/^(?:href[\s]+["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:call[\s]+)/i,/^(?:\([\s]*\))/i,/^(?:\()/i,/^(?:[^(]*)/i,/^(?:\))/i,/^(?:[^)]*)/i,/^(?:click[\s]+)/i,/^(?:[\s\n])/i,/^(?:[^\s\n]*)/i,/^(?:gantt\b)/i,/^(?:dateFormat\s[^#\n;]+)/i,/^(?:inclusiveEndDates\b)/i,/^(?:topAxis\b)/i,/^(?:axisFormat\s[^#\n;]+)/i,/^(?:tickInterval\s[^#\n;]+)/i,/^(?:includes\s[^#\n;]+)/i,/^(?:excludes\s[^#\n;]+)/i,/^(?:todayMarker\s[^\n;]+)/i,/^(?:weekday\s+monday\b)/i,/^(?:weekday\s+tuesday\b)/i,/^(?:weekday\s+wednesday\b)/i,/^(?:weekday\s+thursday\b)/i,/^(?:weekday\s+friday\b)/i,/^(?:weekday\s+saturday\b)/i,/^(?:weekday\s+sunday\b)/i,/^(?:weekend\s+friday\b)/i,/^(?:weekend\s+saturday\b)/i,/^(?:\d\d\d\d-\d\d-\d\d\b)/i,/^(?:title\s[^\n]+)/i,/^(?:accDescription\s[^#\n;]+)/i,/^(?:section\s[^\n]+)/i,/^(?:[^:\n]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[6,7],inclusive:!1},acc_descr:{rules:[4],inclusive:!1},acc_title:{rules:[2],inclusive:!1},callbackargs:{rules:[21,22],inclusive:!1},callbackname:{rules:[18,19,20],inclusive:!1},href:{rules:[15,16],inclusive:!1},click:{rules:[24,25],inclusive:!1},INITIAL:{rules:[0,1,3,5,8,9,10,11,12,13,14,17,23,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52],inclusive:!0}}};return X}();G.lexer=z;function F(){this.yy={}}return k(F,"Parser"),F.prototype=G,G.Parser=F,new F}(),RO.parser=RO,K4e=RO,oc.default.extend(Y4e.default),oc.default.extend(q4e.default),oc.default.extend(X4e.default),RX={friday:5,saturday:6},Gd="",DO="",IO=void 0,NO="",g5=[],m5=[],OO=new Map,BO=[],xS=[],Xv="",PO="",DX=["active","done","crit","milestone"],FO=[],y5=!1,$O=!1,zO="sunday",bS="saturday",GO=0,Z4e=k(function(){BO=[],xS=[],Xv="",FO=[],_S=0,PX=void 0,jO=void 0,Yo=[],Gd="",DO="",PO="",IO=void 0,NO="",g5=[],m5=[],y5=!1,$O=!1,GO=0,OO=new Map,ho(),zO="sunday",bS="saturday"},"clear"),Q4e=k(function(e){DO=e},"setAxisFormat"),J4e=k(function(){return DO},"getAxisFormat"),e3e=k(function(e){IO=e},"setTickInterval"),t3e=k(function(){return IO},"getTickInterval"),r3e=k(function(e){NO=e},"setTodayMarker"),i3e=k(function(){return NO},"getTodayMarker"),n3e=k(function(e){Gd=e},"setDateFormat"),a3e=k(function(){y5=!0},"enableInclusiveEndDates"),s3e=k(function(){return y5},"endDatesAreInclusive"),o3e=k(function(){$O=!0},"enableTopAxis"),l3e=k(function(){return $O},"topAxisEnabled"),u3e=k(function(e){PO=e},"setDisplayMode"),h3e=k(function(){return PO},"getDisplayMode"),c3e=k(function(){return Gd},"getDateFormat"),d3e=k(function(e){g5=e.toLowerCase().split(/[\s,]+/)},"setIncludes"),p3e=k(function(){return g5},"getIncludes"),f3e=k(function(e){m5=e.toLowerCase().split(/[\s,]+/)},"setExcludes"),g3e=k(function(){return m5},"getExcludes"),m3e=k(function(){return OO},"getLinks"),y3e=k(function(e){Xv=e,BO.push(e)},"addSection"),v3e=k(function(){return BO},"getSections"),x3e=k(function(){let e=$X(),t=10,r=0;for(;!e&&r<t;)e=$X(),r++;return xS=Yo,xS},"getTasks"),IX=k(function(e,t,r,i){return i.includes(e.format(t.trim()))?!1:r.includes("weekends")&&(e.isoWeekday()===RX[bS]||e.isoWeekday()===RX[bS]+1)||r.includes(e.format("dddd").toLowerCase())?!0:r.includes(e.format(t.trim()))},"isInvalidDate"),b3e=k(function(e){zO=e},"setWeekday"),_3e=k(function(){return zO},"getWeekday"),w3e=k(function(e){bS=e},"setWeekend"),NX=k(function(e,t,r,i){if(!r.length||e.manualEndTime)return;let n;e.startTime instanceof Date?n=(0,oc.default)(e.startTime):n=(0,oc.default)(e.startTime,t,!0),n=n.add(1,"d");let a;e.endTime instanceof Date?a=(0,oc.default)(e.endTime):a=(0,oc.default)(e.endTime,t,!0);let[s,u]=k3e(n,a,t,r,i);e.endTime=s.toDate(),e.renderEndTime=u},"checkTaskDates"),k3e=k(function(e,t,r,i,n){let a=!1,s=null;for(;e<=t;)a||(s=t.toDate()),a=IX(e,r,i,n),a&&(t=t.add(1,"d")),e=e.add(1,"d");return[t,s]},"fixTaskDates"),UO=k(function(e,t,r){r=r.trim();let i=/^after\s+(?<ids>[\d\w- ]+)/.exec(r);if(i!==null){let a=null;for(let u of i.groups.ids.split(" ")){let h=Dm(u);h!==void 0&&(!a||h.endTime>a.endTime)&&(a=h)}if(a)return a.endTime;let s=new Date;return s.setHours(0,0,0,0),s}let n=(0,oc.default)(r,t.trim(),!0);if(n.isValid())return n.toDate();{Ce.debug("Invalid date:"+r),Ce.debug("With date format:"+t.trim());let a=new Date(r);if(a===void 0||isNaN(a.getTime())||a.getFullYear()<-1e4||a.getFullYear()>1e4)throw new Error("Invalid date:"+r);return a}},"getStartDate"),OX=k(function(e){let t=/^(\d+(?:\.\d+)?)([Mdhmswy]|ms)$/.exec(e.trim());return t!==null?[Number.parseFloat(t[1]),t[2]]:[NaN,"ms"]},"parseDuration"),BX=k(function(e,t,r,i=!1){r=r.trim();let n=/^until\s+(?<ids>[\d\w- ]+)/.exec(r);if(n!==null){let d=null;for(let g of n.groups.ids.split(" ")){let y=Dm(g);y!==void 0&&(!d||y.startTime<d.startTime)&&(d=y)}if(d)return d.startTime;let p=new Date;return p.setHours(0,0,0,0),p}let a=(0,oc.default)(r,t.trim(),!0);if(a.isValid())return i&&(a=a.add(1,"d")),a.toDate();let s=(0,oc.default)(e),[u,h]=OX(r);if(!Number.isNaN(u)){let d=s.add(u,h);d.isValid()&&(s=d)}return s.toDate()},"getEndDate"),_S=0,Kv=k(function(e){return e===void 0?(_S=_S+1,"task"+_S):e},"parseId"),T3e=k(function(e,t){let r;t.substr(0,1)===":"?r=t.substr(1,t.length):r=t;let i=r.split(","),n={};LX(i,n,DX);for(let s=0;s<i.length;s++)i[s]=i[s].trim();let a="";switch(i.length){case 1:n.id=Kv(),n.startTime=e.endTime,a=i[0];break;case 2:n.id=Kv(),n.startTime=UO(void 0,Gd,i[0]),a=i[1];break;case 3:n.id=Kv(i[0]),n.startTime=UO(void 0,Gd,i[1]),a=i[2];break;default:}return a&&(n.endTime=BX(n.startTime,Gd,a,y5),n.manualEndTime=(0,oc.default)(a,"YYYY-MM-DD",!0).isValid(),NX(n,Gd,m5,g5)),n},"compileData"),E3e=k(function(e,t){let r;t.substr(0,1)===":"?r=t.substr(1,t.length):r=t;let i=r.split(","),n={};LX(i,n,DX);for(let a=0;a<i.length;a++)i[a]=i[a].trim();switch(i.length){case 1:n.id=Kv(),n.startTime={type:"prevTaskEnd",id:e},n.endTime={data:i[0]};break;case 2:n.id=Kv(),n.startTime={type:"getStartDate",startData:i[0]},n.endTime={data:i[1]};break;case 3:n.id=Kv(i[0]),n.startTime={type:"getStartDate",startData:i[1]},n.endTime={data:i[2]};break;default:}return n},"parseData"),Yo=[],FX={},C3e=k(function(e,t){let r={section:Xv,type:Xv,processed:!1,manualEndTime:!1,renderEndTime:null,raw:{data:t},task:e,classes:[]},i=E3e(jO,t);r.raw.startTime=i.startTime,r.raw.endTime=i.endTime,r.id=i.id,r.prevTaskId=jO,r.active=i.active,r.done=i.done,r.crit=i.crit,r.milestone=i.milestone,r.order=GO,GO++;let n=Yo.push(r);jO=r.id,FX[r.id]=n-1},"addTask"),Dm=k(function(e){let t=FX[e];return Yo[t]},"findTaskById"),S3e=k(function(e,t){let r={section:Xv,type:Xv,description:e,task:e,classes:[]},i=T3e(PX,t);r.startTime=i.startTime,r.endTime=i.endTime,r.id=i.id,r.active=i.active,r.done=i.done,r.crit=i.crit,r.milestone=i.milestone,PX=r,xS.push(r)},"addTaskOrg"),$X=k(function(){let e=k(function(r){let i=Yo[r],n="";switch(Yo[r].raw.startTime.type){case"prevTaskEnd":{let a=Dm(i.prevTaskId);i.startTime=a.endTime;break}case"getStartDate":n=UO(void 0,Gd,Yo[r].raw.startTime.startData),n&&(Yo[r].startTime=n);break}return Yo[r].startTime&&(Yo[r].endTime=BX(Yo[r].startTime,Gd,Yo[r].raw.endTime.data,y5),Yo[r].endTime&&(Yo[r].processed=!0,Yo[r].manualEndTime=(0,oc.default)(Yo[r].raw.endTime.data,"YYYY-MM-DD",!0).isValid(),NX(Yo[r],Gd,m5,g5))),Yo[r].processed},"compileTask"),t=!0;for(let[r,i]of Yo.entries())e(r),t=t&&i.processed;return t},"compileTasks"),A3e=k(function(e,t){let r=t;at().securityLevel!=="loose"&&(r=(0,W4e.sanitizeUrl)(t)),e.split(",").forEach(function(i){Dm(i)!==void 0&&(GX(i,()=>{window.open(r,"_self")}),OO.set(i,r))}),zX(e,"clickable")},"setLink"),zX=k(function(e,t){e.split(",").forEach(function(r){let i=Dm(r);i!==void 0&&i.classes.push(t)})},"setClass"),M3e=k(function(e,t,r){if(at().securityLevel!=="loose"||t===void 0)return;let i=[];if(typeof r=="string"){i=r.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let n=0;n<i.length;n++){let a=i[n].trim();a.startsWith('"')&&a.endsWith('"')&&(a=a.substr(1,a.length-2)),i[n]=a}}i.length===0&&i.push(e),Dm(e)!==void 0&&GX(e,()=>{qn.runFunc(t,...i)})},"setClickFun"),GX=k(function(e,t){FO.push(function(){let r=document.querySelector(`[id="${e}"]`);r!==null&&r.addEventListener("click",function(){t()})},function(){let r=document.querySelector(`[id="${e}-text"]`);r!==null&&r.addEventListener("click",function(){t()})})},"pushFun"),L3e=k(function(e,t,r){e.split(",").forEach(function(i){M3e(i,t,r)}),zX(e,"clickable")},"setClickEvent"),R3e=k(function(e){FO.forEach(function(t){t(e)})},"bindFunctions"),D3e={getConfig:k(()=>at().gantt,"getConfig"),clear:Z4e,setDateFormat:n3e,getDateFormat:c3e,enableInclusiveEndDates:a3e,endDatesAreInclusive:s3e,enableTopAxis:o3e,topAxisEnabled:l3e,setAxisFormat:Q4e,getAxisFormat:J4e,setTickInterval:e3e,getTickInterval:t3e,setTodayMarker:r3e,getTodayMarker:i3e,setAccTitle:Ks,getAccTitle:Bo,setDiagramTitle:Fo,getDiagramTitle:$o,setDisplayMode:u3e,getDisplayMode:h3e,setAccDescription:_o,getAccDescription:Po,addSection:y3e,getSections:v3e,getTasks:x3e,addTask:C3e,findTaskById:Dm,addTaskOrg:S3e,setIncludes:d3e,getIncludes:p3e,setExcludes:f3e,getExcludes:g3e,setClickEvent:L3e,setLink:A3e,getLinks:m3e,bindFunctions:R3e,parseDuration:OX,isInvalidDate:IX,setWeekday:b3e,getWeekday:_3e,setWeekend:w3e},k(LX,"getTaskTags"),I3e=k(function(){Ce.debug("Something is calling, setConf, remove the call")},"setConf"),UX={monday:fv,tuesday:Y3,wednesday:eC,thursday:uf,friday:gR,saturday:mR,sunday:pv},N3e=k((e,t)=>{let r=[...e].map(()=>-1/0),i=[...e].sort((a,s)=>a.startTime-s.startTime||a.order-s.order),n=0;for(let a of i)for(let s=0;s<r.length;s++)if(a.startTime>=r[s]){r[s]=a.endTime,a.order=s+t,s>n&&(n=s);break}return n},"getMaxIntersections"),O3e=k(function(e,t,r,i){let n=at().gantt,a=at().securityLevel,s;a==="sandbox"&&(s=Nr("#i"+t));let u=Nr(a==="sandbox"?s.nodes()[0].contentDocument.body:"body"),h=a==="sandbox"?s.nodes()[0].contentDocument:document,d=h.getElementById(t);Uf=d.parentElement.offsetWidth,Uf===void 0&&(Uf=1200),n.useWidth!==void 0&&(Uf=n.useWidth);let p=i.db.getTasks(),g=[];for(let L of p)g.push(L.type);g=O(g);let y={},m=2*n.topPadding;if(i.db.getDisplayMode()==="compact"||n.displayMode==="compact"){let L={};for(let G of p)L[G.section]===void 0?L[G.section]=[G]:L[G.section].push(G);let $=0;for(let G of Object.keys(L)){let z=N3e(L[G],$)+1;$+=z,m+=z*(n.barHeight+n.barGap),y[G]=z}}else{m+=p.length*(n.barHeight+n.barGap);for(let L of g)y[L]=p.filter($=>$.type===L).length}d.setAttribute("viewBox","0 0 "+Uf+" "+m);let x=u.select(`[id="${t}"]`),_=Ki().domain([U4(p,function(L){return L.startTime}),gT(p,function(L){return L.endTime})]).rangeRound([0,Uf-n.leftPadding-n.rightPadding]);function E(L,$){let G=L.startTime,z=$.startTime,F=0;return G>z?F=1:G<z&&(F=-1),F}k(E,"taskCompare"),p.sort(E),w(p,Uf,m),Oo(x,m,Uf,n.useMaxWidth),x.append("text").text(i.db.getDiagramTitle()).attr("x",Uf/2).attr("y",n.titleTopMargin).attr("class","titleText");function w(L,$,G){let z=n.barHeight,F=z+n.barGap,X=n.topPadding,I=n.leftPadding,j=$1().domain([0,g.length]).range(["#00B9FA","#F95002"]).interpolate(j2);A(F,X,I,$,G,L,i.db.getExcludes(),i.db.getIncludes()),M(I,X,$,G),C(L,F,X,I,z,j,$,G),N(F,X,I,z,j),B(I,X,$,G)}k(w,"makeGantt");function C(L,$,G,z,F,X,I){let j=[...new Set(L.map(P=>P.order))].map(P=>L.find(q=>q.order===P));x.append("g").selectAll("rect").data(j).enter().append("rect").attr("x",0).attr("y",function(P,q){return q=P.order,q*$+G-2}).attr("width",function(){return I-n.rightPadding/2}).attr("height",$).attr("class",function(P){for(let[q,Z]of g.entries())if(P.type===Z)return"section section"+q%n.numberSectionStyles;return"section section0"});let H=x.append("g").selectAll("rect").data(L).enter(),V=i.db.getLinks();if(H.append("rect").attr("id",function(P){return P.id}).attr("rx",3).attr("ry",3).attr("x",function(P){return P.milestone?_(P.startTime)+z+.5*(_(P.endTime)-_(P.startTime))-.5*F:_(P.startTime)+z}).attr("y",function(P,q){return q=P.order,q*$+G}).attr("width",function(P){return P.milestone?F:_(P.renderEndTime||P.endTime)-_(P.startTime)}).attr("height",F).attr("transform-origin",function(P,q){return q=P.order,(_(P.startTime)+z+.5*(_(P.endTime)-_(P.startTime))).toString()+"px "+(q*$+G+.5*F).toString()+"px"}).attr("class",function(P){let q="task",Z="";P.classes.length>0&&(Z=P.classes.join(" "));let J=0;for(let[ue,be]of g.entries())P.type===be&&(J=ue%n.numberSectionStyles);let ae="";return P.active?P.crit?ae+=" activeCrit":ae=" active":P.done?P.crit?ae=" doneCrit":ae=" done":P.crit&&(ae+=" crit"),ae.length===0&&(ae=" task"),P.milestone&&(ae=" milestone "+ae),ae+=J,ae+=" "+Z,q+ae}),H.append("text").attr("id",function(P){return P.id+"-text"}).text(function(P){return P.task}).attr("font-size",n.fontSize).attr("x",function(P){let q=_(P.startTime),Z=_(P.renderEndTime||P.endTime);P.milestone&&(q+=.5*(_(P.endTime)-_(P.startTime))-.5*F),P.milestone&&(Z=q+F);let J=this.getBBox().width;return J>Z-q?Z+J+1.5*n.leftPadding>I?q+z-5:Z+z+5:(Z-q)/2+q+z}).attr("y",function(P,q){return q=P.order,q*$+n.barHeight/2+(n.fontSize/2-2)+G}).attr("text-height",F).attr("class",function(P){let q=_(P.startTime),Z=_(P.endTime);P.milestone&&(Z=q+F);let J=this.getBBox().width,ae="";P.classes.length>0&&(ae=P.classes.join(" "));let ue=0;for(let[Le,xe]of g.entries())P.type===xe&&(ue=Le%n.numberSectionStyles);let be="";return P.active&&(P.crit?be="activeCritText"+ue:be="activeText"+ue),P.done?P.crit?be=be+" doneCritText"+ue:be=be+" doneText"+ue:P.crit&&(be=be+" critText"+ue),P.milestone&&(be+=" milestoneText"),J>Z-q?Z+J+1.5*n.leftPadding>I?ae+" taskTextOutsideLeft taskTextOutside"+ue+" "+be:ae+" taskTextOutsideRight taskTextOutside"+ue+" "+be+" width-"+J:ae+" taskText taskText"+ue+" "+be+" width-"+J}),at().securityLevel==="sandbox"){let P;P=Nr("#i"+t);let q=P.nodes()[0].contentDocument;H.filter(function(Z){return V.has(Z.id)}).each(function(Z){var J=q.querySelector("#"+Z.id),ae=q.querySelector("#"+Z.id+"-text");let ue=J.parentNode;var be=q.createElement("a");be.setAttribute("xlink:href",V.get(Z.id)),be.setAttribute("target","_top"),ue.appendChild(be),be.appendChild(J),be.appendChild(ae)})}}k(C,"drawRects");function A(L,$,G,z,F,X,I,j){if(I.length===0&&j.length===0)return;let H,V;for(let{startTime:ae,endTime:ue}of X)(H===void 0||ae<H)&&(H=ae),(V===void 0||ue>V)&&(V=ue);if(!H||!V)return;if((0,LO.default)(V).diff((0,LO.default)(H),"year")>5){Ce.warn("The difference between the min and max time is more than 5 years. This will cause performance issues. Skipping drawing exclude days.");return}let P=i.db.getDateFormat(),q=[],Z=null,J=(0,LO.default)(H);for(;J.valueOf()<=V;)i.db.isInvalidDate(J,P,I,j)?Z?Z.end=J:Z={start:J,end:J}:Z&&(q.push(Z),Z=null),J=J.add(1,"d");x.append("g").selectAll("rect").data(q).enter().append("rect").attr("id",function(ae){return"exclude-"+ae.start.format("YYYY-MM-DD")}).attr("x",function(ae){return _(ae.start)+G}).attr("y",n.gridLineStartPadding).attr("width",function(ae){let ue=ae.end.add(1,"day");return _(ue)-_(ae.start)}).attr("height",F-$-n.gridLineStartPadding).attr("transform-origin",function(ae,ue){return(_(ae.start)+G+.5*(_(ae.end)-_(ae.start))).toString()+"px "+(ue*L+.5*F).toString()+"px"}).attr("class","exclude-range")}k(A,"drawExcludeDays");function M(L,$,G,z){let F=rM(_).tickSize(-z+$+n.gridLineStartPadding).tickFormat(kt(i.db.getAxisFormat()||n.axisFormat||"%Y-%m-%d")),X=/^([1-9]\d*)(millisecond|second|minute|hour|day|week|month)$/.exec(i.db.getTickInterval()||n.tickInterval);if(X!==null){let I=X[1],j=X[2],H=i.db.getWeekday()||n.weekday;switch(j){case"millisecond":F.ticks(of.every(I));break;case"second":F.ticks(kd.every(I));break;case"minute":F.ticks(z1.every(I));break;case"hour":F.ticks(G1.every(I));break;case"day":F.ticks(kl.every(I));break;case"week":F.ticks(UX[H].every(I));break;case"month":F.ticks(cf.every(I));break}}if(x.append("g").attr("class","grid").attr("transform","translate("+L+", "+(z-50)+")").call(F).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10).attr("dy","1em"),i.db.topAxisEnabled()||n.topAxis){let I=tM(_).tickSize(-z+$+n.gridLineStartPadding).tickFormat(kt(i.db.getAxisFormat()||n.axisFormat||"%Y-%m-%d"));if(X!==null){let j=X[1],H=X[2],V=i.db.getWeekday()||n.weekday;switch(H){case"millisecond":I.ticks(of.every(j));break;case"second":I.ticks(kd.every(j));break;case"minute":I.ticks(z1.every(j));break;case"hour":I.ticks(G1.every(j));break;case"day":I.ticks(kl.every(j));break;case"week":I.ticks(UX[V].every(j));break;case"month":I.ticks(cf.every(j));break}}x.append("g").attr("class","grid").attr("transform","translate("+L+", "+$+")").call(I).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10)}}k(M,"makeGrid");function N(L,$){let G=0,z=Object.keys(y).map(F=>[F,y[F]]);x.append("g").selectAll("text").data(z).enter().append(function(F){let X=F[0].split(zr.lineBreakRegex),I=-(X.length-1)/2,j=h.createElementNS("http://www.w3.org/2000/svg","text");j.setAttribute("dy",I+"em");for(let[H,V]of X.entries()){let P=h.createElementNS("http://www.w3.org/2000/svg","tspan");P.setAttribute("alignment-baseline","central"),P.setAttribute("x","10"),H>0&&P.setAttribute("dy","1em"),P.textContent=V,j.appendChild(P)}return j}).attr("x",10).attr("y",function(F,X){if(X>0)for(let I=0;I<X;I++)return G+=z[X-1][1],F[1]*L/2+G*L+$;else return F[1]*L/2+$}).attr("font-size",n.sectionFontSize).attr("class",function(F){for(let[X,I]of g.entries())if(F[0]===I)return"sectionTitle sectionTitle"+X%n.numberSectionStyles;return"sectionTitle"})}k(N,"vertLabels");function B(L,$,G,z){let F=i.db.getTodayMarker();if(F==="off")return;let X=x.append("g").attr("class","today"),I=new Date,j=X.append("line");j.attr("x1",_(I)+L).attr("x2",_(I)+L).attr("y1",n.titleTopMargin).attr("y2",z-n.titleTopMargin).attr("class","today"),F!==""&&j.attr("style",F.replace(/,/g,";"))}k(B,"drawToday");function O(L){let $={},G=[];for(let z=0,F=L.length;z<F;++z)Object.prototype.hasOwnProperty.call($,L[z])||($[L[z]]=!0,G.push(L[z]));return G}k(O,"checkUnique")},"draw"),B3e={setConf:I3e,draw:O3e},P3e=k(e=>`
  .mermaid-main-font {
    font-family: var(--mermaid-font-family, "trebuchet ms", verdana, arial, sans-serif);
  }

  .exclude-range {
    fill: ${e.excludeBkgColor};
  }

  .section {
    stroke: none;
    opacity: 0.2;
  }

  .section0 {
    fill: ${e.sectionBkgColor};
  }

  .section2 {
    fill: ${e.sectionBkgColor2};
  }

  .section1,
  .section3 {
    fill: ${e.altSectionBkgColor};
    opacity: 0.2;
  }

  .sectionTitle0 {
    fill: ${e.titleColor};
  }

  .sectionTitle1 {
    fill: ${e.titleColor};
  }

  .sectionTitle2 {
    fill: ${e.titleColor};
  }

  .sectionTitle3 {
    fill: ${e.titleColor};
  }

  .sectionTitle {
    text-anchor: start;
    font-family: var(--mermaid-font-family, "trebuchet ms", verdana, arial, sans-serif);
  }


  /* Grid and axis */

  .grid .tick {
    stroke: ${e.gridColor};
    opacity: 0.8;
    shape-rendering: crispEdges;
  }

  .grid .tick text {
    font-family: ${e.fontFamily};
    fill: ${e.textColor};
  }

  .grid path {
    stroke-width: 0;
  }


  /* Today line */

  .today {
    fill: none;
    stroke: ${e.todayLineColor};
    stroke-width: 2px;
  }


  /* Task styling */

  /* Default task */

  .task {
    stroke-width: 2;
  }

  .taskText {
    text-anchor: middle;
    font-family: var(--mermaid-font-family, "trebuchet ms", verdana, arial, sans-serif);
  }

  .taskTextOutsideRight {
    fill: ${e.taskTextDarkColor};
    text-anchor: start;
    font-family: var(--mermaid-font-family, "trebuchet ms", verdana, arial, sans-serif);
  }

  .taskTextOutsideLeft {
    fill: ${e.taskTextDarkColor};
    text-anchor: end;
  }


  /* Special case clickable */

  .task.clickable {
    cursor: pointer;
  }

  .taskText.clickable {
    cursor: pointer;
    fill: ${e.taskTextClickableColor} !important;
    font-weight: bold;
  }

  .taskTextOutsideLeft.clickable {
    cursor: pointer;
    fill: ${e.taskTextClickableColor} !important;
    font-weight: bold;
  }

  .taskTextOutsideRight.clickable {
    cursor: pointer;
    fill: ${e.taskTextClickableColor} !important;
    font-weight: bold;
  }


  /* Specific task settings for the sections*/

  .taskText0,
  .taskText1,
  .taskText2,
  .taskText3 {
    fill: ${e.taskTextColor};
  }

  .task0,
  .task1,
  .task2,
  .task3 {
    fill: ${e.taskBkgColor};
    stroke: ${e.taskBorderColor};
  }

  .taskTextOutside0,
  .taskTextOutside2
  {
    fill: ${e.taskTextOutsideColor};
  }

  .taskTextOutside1,
  .taskTextOutside3 {
    fill: ${e.taskTextOutsideColor};
  }


  /* Active task */

  .active0,
  .active1,
  .active2,
  .active3 {
    fill: ${e.activeTaskBkgColor};
    stroke: ${e.activeTaskBorderColor};
  }

  .activeText0,
  .activeText1,
  .activeText2,
  .activeText3 {
    fill: ${e.taskTextDarkColor} !important;
  }


  /* Completed task */

  .done0,
  .done1,
  .done2,
  .done3 {
    stroke: ${e.doneTaskBorderColor};
    fill: ${e.doneTaskBkgColor};
    stroke-width: 2;
  }

  .doneText0,
  .doneText1,
  .doneText2,
  .doneText3 {
    fill: ${e.taskTextDarkColor} !important;
  }


  /* Tasks on the critical line */

  .crit0,
  .crit1,
  .crit2,
  .crit3 {
    stroke: ${e.critBorderColor};
    fill: ${e.critBkgColor};
    stroke-width: 2;
  }

  .activeCrit0,
  .activeCrit1,
  .activeCrit2,
  .activeCrit3 {
    stroke: ${e.critBorderColor};
    fill: ${e.activeTaskBkgColor};
    stroke-width: 2;
  }

  .doneCrit0,
  .doneCrit1,
  .doneCrit2,
  .doneCrit3 {
    stroke: ${e.critBorderColor};
    fill: ${e.doneTaskBkgColor};
    stroke-width: 2;
    cursor: pointer;
    shape-rendering: crispEdges;
  }

  .milestone {
    transform: rotate(45deg) scale(0.8,0.8);
  }

  .milestoneText {
    font-style: italic;
  }
  .doneCritText0,
  .doneCritText1,
  .doneCritText2,
  .doneCritText3 {
    fill: ${e.taskTextDarkColor} !important;
  }

  .activeCritText0,
  .activeCritText1,
  .activeCritText2,
  .activeCritText3 {
    fill: ${e.taskTextDarkColor} !important;
  }

  .titleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${e.titleColor||e.textColor};
    font-family: var(--mermaid-font-family, "trebuchet ms", verdana, arial, sans-serif);
  }
`,"getStyles"),F3e=P3e,$3e={parser:K4e,db:D3e,renderer:B3e,styles:F3e}}),z3e={};oi(z3e,{diagram:()=>Y3e});var G3e,U3e,j3e,H3e,V3e,W3e,Y3e,HXe=D(()=>{bfe(),gm(),Qn(),mS(),G3e={parse:k(async e=>{let t=await d5("info",e);Ce.debug(t)},"parse")},U3e={version:gI},j3e=k(()=>U3e.version,"getVersion"),H3e={getVersion:j3e},V3e=k((e,t,r)=>{Ce.debug(`rendering info diagram
`+e);let i=kf(t);Oo(i,100,400,!0),i.append("g").append("text").attr("x",100).attr("y",40).attr("class","version").attr("font-size",32).style("text-anchor","middle").text(`v${r}`)},"draw"),W3e={draw:V3e},Y3e={parser:G3e,db:H3e,renderer:W3e}}),q3e={};oi(q3e,{diagram:()=>u_e});var jX,HO,wS,VO,X3e,K3e,Z3e,Q3e,J3e,e_e,t_e,HX,r_e,i_e,n_e,a_e,s_e,o_e,l_e,u_e,VXe=D(()=>{BI(),Os(),gm(),Qn(),mS(),ha(),jX=ka.pie,HO={sections:new Map,showData:!1,config:jX},wS=HO.sections,VO=HO.showData,X3e=structuredClone(jX),K3e=k(()=>structuredClone(X3e),"getConfig"),Z3e=k(()=>{wS=new Map,VO=HO.showData,ho()},"clear"),Q3e=k(({label:e,value:t})=>{wS.has(e)||(wS.set(e,t),Ce.debug(`added new section: ${e}, with value: ${t}`))},"addSection"),J3e=k(()=>wS,"getSections"),e_e=k(e=>{VO=e},"setShowData"),t_e=k(()=>VO,"getShowData"),HX={getConfig:K3e,clear:Z3e,setDiagramTitle:Fo,getDiagramTitle:$o,setAccTitle:Ks,getAccTitle:Bo,setAccDescription:_o,getAccDescription:Po,addSection:Q3e,getSections:J3e,setShowData:e_e,getShowData:t_e},r_e=k((e,t)=>{b7(e,t),t.setShowData(e.showData),e.sections.map(t.addSection)},"populateDb"),i_e={parse:k(async e=>{let t=await d5("pie",e);Ce.debug(t),r_e(t,HX)},"parse")},n_e=k(e=>`
  .pieCircle{
    stroke: ${e.pieStrokeColor};
    stroke-width : ${e.pieStrokeWidth};
    opacity : ${e.pieOpacity};
  }
  .pieOuterCircle{
    stroke: ${e.pieOuterStrokeColor};
    stroke-width: ${e.pieOuterStrokeWidth};
    fill: none;
  }
  .pieTitleText {
    text-anchor: middle;
    font-size: ${e.pieTitleTextSize};
    fill: ${e.pieTitleTextColor};
    font-family: ${e.fontFamily};
  }
  .slice {
    font-family: ${e.fontFamily};
    fill: ${e.pieSectionTextColor};
    font-size:${e.pieSectionTextSize};
    // fill: white;
  }
  .legend text {
    fill: ${e.pieLegendTextColor};
    font-family: ${e.fontFamily};
    font-size: ${e.pieLegendTextSize};
  }
`,"getStyles"),a_e=n_e,s_e=k(e=>{let t=[...e.entries()].map(r=>({label:r[0],value:r[1]})).sort((r,i)=>i.value-r.value);return bOe().value(r=>r.value)(t)},"createPieArcs"),o_e=k((e,t,r,i)=>{Ce.debug(`rendering pie chart
`+e);let n=i.db,a=at(),s=ff(n.getConfig(),a.pie),u=40,h=18,d=4,p=450,g=p,y=kf(t),m=y.append("g");m.attr("transform","translate("+g/2+","+p/2+")");let{themeVariables:x}=a,[_]=gf(x.pieOuterStrokeWidth);_??=2;let E=s.textPosition,w=Math.min(g,p)/2-u,C=e_().innerRadius(0).outerRadius(w),A=e_().innerRadius(w*E).outerRadius(w*E);m.append("circle").attr("cx",0).attr("cy",0).attr("r",w+_/2).attr("class","pieOuterCircle");let M=n.getSections(),N=s_e(M),B=[x.pie1,x.pie2,x.pie3,x.pie4,x.pie5,x.pie6,x.pie7,x.pie8,x.pie9,x.pie10,x.pie11,x.pie12],O=H3(B);m.selectAll("mySlices").data(N).enter().append("path").attr("d",C).attr("fill",F=>O(F.data.label)).attr("class","pieCircle");let L=0;M.forEach(F=>{L+=F}),m.selectAll("mySlices").data(N).enter().append("text").text(F=>(F.data.value/L*100).toFixed(0)+"%").attr("transform",F=>"translate("+A.centroid(F)+")").style("text-anchor","middle").attr("class","slice"),m.append("text").text(n.getDiagramTitle()).attr("x",0).attr("y",-(p-50)/2).attr("class","pieTitleText");let $=m.selectAll(".legend").data(O.domain()).enter().append("g").attr("class","legend").attr("transform",(F,X)=>{let I=h+d,j=I*O.domain().length/2,H=12*h,V=X*I-j;return"translate("+H+","+V+")"});$.append("rect").attr("width",h).attr("height",h).style("fill",O).style("stroke",O),$.data(N).append("text").attr("x",h+d).attr("y",h-d).text(F=>{let{label:X,value:I}=F.data;return n.getShowData()?`${X} [${I}]`:X});let G=Math.max(...$.selectAll("text").nodes().map(F=>F?.getBoundingClientRect().width??0)),z=g+u+h+d+G;y.attr("viewBox",`0 0 ${z} ${p}`),Oo(y,p,z,s.useMaxWidth)},"draw"),l_e={draw:o_e},u_e={parser:i_e,db:HX,renderer:l_e,styles:a_e}}),h_e={};oi(h_e,{diagram:()=>I_e});function VX(e){return!/^#?([\dA-Fa-f]{6}|[\dA-Fa-f]{3})$/.test(e)}function c_e(e){return!/^\d+$/.test(e)}function d_e(e){return!/^\d+px$/.test(e)}function K0(e){return Da(e.trim(),A_e)}function p_e(e){Ml.setData({quadrant1Text:K0(e.text)})}function f_e(e){Ml.setData({quadrant2Text:K0(e.text)})}function g_e(e){Ml.setData({quadrant3Text:K0(e.text)})}function m_e(e){Ml.setData({quadrant4Text:K0(e.text)})}function y_e(e){Ml.setData({xAxisLeftText:K0(e.text)})}function v_e(e){Ml.setData({xAxisRightText:K0(e.text)})}function x_e(e){Ml.setData({yAxisTopText:K0(e.text)})}function b_e(e){Ml.setData({yAxisBottomText:K0(e.text)})}function WO(e){let t={};for(let r of e){let[i,n]=r.trim().split(/\s*:\s*/);if(i==="radius"){if(c_e(n))throw new kS(i,n,"number");t.radius=parseInt(n)}else if(i==="color"){if(VX(n))throw new kS(i,n,"hex code");t.color=n}else if(i==="stroke-color"){if(VX(n))throw new kS(i,n,"hex code");t.strokeColor=n}else if(i==="stroke-width"){if(d_e(n))throw new kS(i,n,"number of pixels (eg. 10px)");t.strokeWidth=n}else throw new Error(`style named ${i} is not supported.`)}return t}function __e(e,t,r,i,n){let a=WO(n);Ml.addPoints([{x:r,y:i,text:K0(e.text),className:t,...a}])}function w_e(e,t){Ml.addClass(e,WO(t))}function k_e(e){Ml.setConfig({chartWidth:e})}function T_e(e){Ml.setConfig({chartHeight:e})}function E_e(){let e=at(),{themeVariables:t,quadrantChart:r}=e;return r&&Ml.setConfig(r),Ml.setThemeConfig({quadrant1Fill:t.quadrant1Fill,quadrant2Fill:t.quadrant2Fill,quadrant3Fill:t.quadrant3Fill,quadrant4Fill:t.quadrant4Fill,quadrant1TextFill:t.quadrant1TextFill,quadrant2TextFill:t.quadrant2TextFill,quadrant3TextFill:t.quadrant3TextFill,quadrant4TextFill:t.quadrant4TextFill,quadrantPointFill:t.quadrantPointFill,quadrantPointTextFill:t.quadrantPointTextFill,quadrantXAxisTextFill:t.quadrantXAxisTextFill,quadrantYAxisTextFill:t.quadrantYAxisTextFill,quadrantExternalBorderStrokeFill:t.quadrantExternalBorderStrokeFill,quadrantInternalBorderStrokeFill:t.quadrantInternalBorderStrokeFill,quadrantTitleFill:t.quadrantTitleFill}),Ml.setData({titleText:$o()}),Ml.build()}var YO,C_e,fu,S_e,kS,A_e,Ml,M_e,L_e,R_e,D_e,I_e,WXe=D(()=>{Qn(),ha(),ha(),YO=function(){var e=k(function(fe,ze,yt,bt){for(yt=yt||{},bt=fe.length;bt--;yt[fe[bt]]=ze);return yt},"o"),t=[1,3],r=[1,4],i=[1,5],n=[1,6],a=[1,7],s=[1,4,5,10,12,13,14,18,25,35,37,39,41,42,48,50,51,52,53,54,55,56,57,60,61,63,64,65,66,67],u=[1,4,5,10,12,13,14,18,25,28,35,37,39,41,42,48,50,51,52,53,54,55,56,57,60,61,63,64,65,66,67],h=[55,56,57],d=[2,36],p=[1,37],g=[1,36],y=[1,38],m=[1,35],x=[1,43],_=[1,41],E=[1,14],w=[1,23],C=[1,18],A=[1,19],M=[1,20],N=[1,21],B=[1,22],O=[1,24],L=[1,25],$=[1,26],G=[1,27],z=[1,28],F=[1,29],X=[1,32],I=[1,33],j=[1,34],H=[1,39],V=[1,40],P=[1,42],q=[1,44],Z=[1,62],J=[1,61],ae=[4,5,8,10,12,13,14,18,44,47,49,55,56,57,63,64,65,66,67],ue=[1,65],be=[1,66],Le=[1,67],xe=[1,68],Ae=[1,69],oe=[1,70],he=[1,71],le=[1,72],ke=[1,73],pe=[1,74],qe=[1,75],me=[1,76],st=[4,5,6,7,8,9,10,11,12,13,14,15,18],we=[1,90],Et=[1,91],wt=[1,92],Tt=[1,99],er=[1,93],tr=[1,96],kr=[1,94],fr=[1,95],Mt=[1,97],Kt=[1,98],ne=[1,102],He=[10,55,56,57],Te=[4,5,6,8,10,11,13,17,18,19,20,55,56,57],Qe={trace:k(function(){},"trace"),yy:{},symbols_:{error:2,idStringToken:3,ALPHA:4,NUM:5,NODE_STRING:6,DOWN:7,MINUS:8,DEFAULT:9,COMMA:10,COLON:11,AMP:12,BRKT:13,MULT:14,UNICODE_TEXT:15,styleComponent:16,UNIT:17,SPACE:18,STYLE:19,PCT:20,idString:21,style:22,stylesOpt:23,classDefStatement:24,CLASSDEF:25,start:26,eol:27,QUADRANT:28,document:29,line:30,statement:31,axisDetails:32,quadrantDetails:33,points:34,title:35,title_value:36,acc_title:37,acc_title_value:38,acc_descr:39,acc_descr_value:40,acc_descr_multiline_value:41,section:42,text:43,point_start:44,point_x:45,point_y:46,class_name:47,"X-AXIS":48,"AXIS-TEXT-DELIMITER":49,"Y-AXIS":50,QUADRANT_1:51,QUADRANT_2:52,QUADRANT_3:53,QUADRANT_4:54,NEWLINE:55,SEMI:56,EOF:57,alphaNumToken:58,textNoTagsToken:59,STR:60,MD_STR:61,alphaNum:62,PUNCTUATION:63,PLUS:64,EQUALS:65,DOT:66,UNDERSCORE:67,$accept:0,$end:1},terminals_:{2:"error",4:"ALPHA",5:"NUM",6:"NODE_STRING",7:"DOWN",8:"MINUS",9:"DEFAULT",10:"COMMA",11:"COLON",12:"AMP",13:"BRKT",14:"MULT",15:"UNICODE_TEXT",17:"UNIT",18:"SPACE",19:"STYLE",20:"PCT",25:"CLASSDEF",28:"QUADRANT",35:"title",36:"title_value",37:"acc_title",38:"acc_title_value",39:"acc_descr",40:"acc_descr_value",41:"acc_descr_multiline_value",42:"section",44:"point_start",45:"point_x",46:"point_y",47:"class_name",48:"X-AXIS",49:"AXIS-TEXT-DELIMITER",50:"Y-AXIS",51:"QUADRANT_1",52:"QUADRANT_2",53:"QUADRANT_3",54:"QUADRANT_4",55:"NEWLINE",56:"SEMI",57:"EOF",60:"STR",61:"MD_STR",63:"PUNCTUATION",64:"PLUS",65:"EQUALS",66:"DOT",67:"UNDERSCORE"},productions_:[0,[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[21,1],[21,2],[22,1],[22,2],[23,1],[23,3],[24,5],[26,2],[26,2],[26,2],[29,0],[29,2],[30,2],[31,0],[31,1],[31,2],[31,1],[31,1],[31,1],[31,2],[31,2],[31,2],[31,1],[31,1],[34,4],[34,5],[34,5],[34,6],[32,4],[32,3],[32,2],[32,4],[32,3],[32,2],[33,2],[33,2],[33,2],[33,2],[27,1],[27,1],[27,1],[43,1],[43,2],[43,1],[43,1],[62,1],[62,2],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[59,1],[59,1],[59,1]],performAction:k(function(fe,ze,yt,bt,At,ct,zt){var ft=ct.length-1;switch(At){case 23:this.$=ct[ft];break;case 24:this.$=ct[ft-1]+""+ct[ft];break;case 26:this.$=ct[ft-1]+ct[ft];break;case 27:this.$=[ct[ft].trim()];break;case 28:ct[ft-2].push(ct[ft].trim()),this.$=ct[ft-2];break;case 29:this.$=ct[ft-4],bt.addClass(ct[ft-2],ct[ft]);break;case 37:this.$=[];break;case 42:this.$=ct[ft].trim(),bt.setDiagramTitle(this.$);break;case 43:this.$=ct[ft].trim(),bt.setAccTitle(this.$);break;case 44:case 45:this.$=ct[ft].trim(),bt.setAccDescription(this.$);break;case 46:bt.addSection(ct[ft].substr(8)),this.$=ct[ft].substr(8);break;case 47:bt.addPoint(ct[ft-3],"",ct[ft-1],ct[ft],[]);break;case 48:bt.addPoint(ct[ft-4],ct[ft-3],ct[ft-1],ct[ft],[]);break;case 49:bt.addPoint(ct[ft-4],"",ct[ft-2],ct[ft-1],ct[ft]);break;case 50:bt.addPoint(ct[ft-5],ct[ft-4],ct[ft-2],ct[ft-1],ct[ft]);break;case 51:bt.setXAxisLeftText(ct[ft-2]),bt.setXAxisRightText(ct[ft]);break;case 52:ct[ft-1].text+=" \u27F6 ",bt.setXAxisLeftText(ct[ft-1]);break;case 53:bt.setXAxisLeftText(ct[ft]);break;case 54:bt.setYAxisBottomText(ct[ft-2]),bt.setYAxisTopText(ct[ft]);break;case 55:ct[ft-1].text+=" \u27F6 ",bt.setYAxisBottomText(ct[ft-1]);break;case 56:bt.setYAxisBottomText(ct[ft]);break;case 57:bt.setQuadrant1Text(ct[ft]);break;case 58:bt.setQuadrant2Text(ct[ft]);break;case 59:bt.setQuadrant3Text(ct[ft]);break;case 60:bt.setQuadrant4Text(ct[ft]);break;case 64:this.$={text:ct[ft],type:"text"};break;case 65:this.$={text:ct[ft-1].text+""+ct[ft],type:ct[ft-1].type};break;case 66:this.$={text:ct[ft],type:"text"};break;case 67:this.$={text:ct[ft],type:"markdown"};break;case 68:this.$=ct[ft];break;case 69:this.$=ct[ft-1]+""+ct[ft];break}},"anonymous"),table:[{18:t,26:1,27:2,28:r,55:i,56:n,57:a},{1:[3]},{18:t,26:8,27:2,28:r,55:i,56:n,57:a},{18:t,26:9,27:2,28:r,55:i,56:n,57:a},e(s,[2,33],{29:10}),e(u,[2,61]),e(u,[2,62]),e(u,[2,63]),{1:[2,30]},{1:[2,31]},e(h,d,{30:11,31:12,24:13,32:15,33:16,34:17,43:30,58:31,1:[2,32],4:p,5:g,10:y,12:m,13:x,14:_,18:E,25:w,35:C,37:A,39:M,41:N,42:B,48:O,50:L,51:$,52:G,53:z,54:F,60:X,61:I,63:j,64:H,65:V,66:P,67:q}),e(s,[2,34]),{27:45,55:i,56:n,57:a},e(h,[2,37]),e(h,d,{24:13,32:15,33:16,34:17,43:30,58:31,31:46,4:p,5:g,10:y,12:m,13:x,14:_,18:E,25:w,35:C,37:A,39:M,41:N,42:B,48:O,50:L,51:$,52:G,53:z,54:F,60:X,61:I,63:j,64:H,65:V,66:P,67:q}),e(h,[2,39]),e(h,[2,40]),e(h,[2,41]),{36:[1,47]},{38:[1,48]},{40:[1,49]},e(h,[2,45]),e(h,[2,46]),{18:[1,50]},{4:p,5:g,10:y,12:m,13:x,14:_,43:51,58:31,60:X,61:I,63:j,64:H,65:V,66:P,67:q},{4:p,5:g,10:y,12:m,13:x,14:_,43:52,58:31,60:X,61:I,63:j,64:H,65:V,66:P,67:q},{4:p,5:g,10:y,12:m,13:x,14:_,43:53,58:31,60:X,61:I,63:j,64:H,65:V,66:P,67:q},{4:p,5:g,10:y,12:m,13:x,14:_,43:54,58:31,60:X,61:I,63:j,64:H,65:V,66:P,67:q},{4:p,5:g,10:y,12:m,13:x,14:_,43:55,58:31,60:X,61:I,63:j,64:H,65:V,66:P,67:q},{4:p,5:g,10:y,12:m,13:x,14:_,43:56,58:31,60:X,61:I,63:j,64:H,65:V,66:P,67:q},{4:p,5:g,8:Z,10:y,12:m,13:x,14:_,18:J,44:[1,57],47:[1,58],58:60,59:59,63:j,64:H,65:V,66:P,67:q},e(ae,[2,64]),e(ae,[2,66]),e(ae,[2,67]),e(ae,[2,70]),e(ae,[2,71]),e(ae,[2,72]),e(ae,[2,73]),e(ae,[2,74]),e(ae,[2,75]),e(ae,[2,76]),e(ae,[2,77]),e(ae,[2,78]),e(ae,[2,79]),e(ae,[2,80]),e(s,[2,35]),e(h,[2,38]),e(h,[2,42]),e(h,[2,43]),e(h,[2,44]),{3:64,4:ue,5:be,6:Le,7:xe,8:Ae,9:oe,10:he,11:le,12:ke,13:pe,14:qe,15:me,21:63},e(h,[2,53],{59:59,58:60,4:p,5:g,8:Z,10:y,12:m,13:x,14:_,18:J,49:[1,77],63:j,64:H,65:V,66:P,67:q}),e(h,[2,56],{59:59,58:60,4:p,5:g,8:Z,10:y,12:m,13:x,14:_,18:J,49:[1,78],63:j,64:H,65:V,66:P,67:q}),e(h,[2,57],{59:59,58:60,4:p,5:g,8:Z,10:y,12:m,13:x,14:_,18:J,63:j,64:H,65:V,66:P,67:q}),e(h,[2,58],{59:59,58:60,4:p,5:g,8:Z,10:y,12:m,13:x,14:_,18:J,63:j,64:H,65:V,66:P,67:q}),e(h,[2,59],{59:59,58:60,4:p,5:g,8:Z,10:y,12:m,13:x,14:_,18:J,63:j,64:H,65:V,66:P,67:q}),e(h,[2,60],{59:59,58:60,4:p,5:g,8:Z,10:y,12:m,13:x,14:_,18:J,63:j,64:H,65:V,66:P,67:q}),{45:[1,79]},{44:[1,80]},e(ae,[2,65]),e(ae,[2,81]),e(ae,[2,82]),e(ae,[2,83]),{3:82,4:ue,5:be,6:Le,7:xe,8:Ae,9:oe,10:he,11:le,12:ke,13:pe,14:qe,15:me,18:[1,81]},e(st,[2,23]),e(st,[2,1]),e(st,[2,2]),e(st,[2,3]),e(st,[2,4]),e(st,[2,5]),e(st,[2,6]),e(st,[2,7]),e(st,[2,8]),e(st,[2,9]),e(st,[2,10]),e(st,[2,11]),e(st,[2,12]),e(h,[2,52],{58:31,43:83,4:p,5:g,10:y,12:m,13:x,14:_,60:X,61:I,63:j,64:H,65:V,66:P,67:q}),e(h,[2,55],{58:31,43:84,4:p,5:g,10:y,12:m,13:x,14:_,60:X,61:I,63:j,64:H,65:V,66:P,67:q}),{46:[1,85]},{45:[1,86]},{4:we,5:Et,6:wt,8:Tt,11:er,13:tr,16:89,17:kr,18:fr,19:Mt,20:Kt,22:88,23:87},e(st,[2,24]),e(h,[2,51],{59:59,58:60,4:p,5:g,8:Z,10:y,12:m,13:x,14:_,18:J,63:j,64:H,65:V,66:P,67:q}),e(h,[2,54],{59:59,58:60,4:p,5:g,8:Z,10:y,12:m,13:x,14:_,18:J,63:j,64:H,65:V,66:P,67:q}),e(h,[2,47],{22:88,16:89,23:100,4:we,5:Et,6:wt,8:Tt,11:er,13:tr,17:kr,18:fr,19:Mt,20:Kt}),{46:[1,101]},e(h,[2,29],{10:ne}),e(He,[2,27],{16:103,4:we,5:Et,6:wt,8:Tt,11:er,13:tr,17:kr,18:fr,19:Mt,20:Kt}),e(Te,[2,25]),e(Te,[2,13]),e(Te,[2,14]),e(Te,[2,15]),e(Te,[2,16]),e(Te,[2,17]),e(Te,[2,18]),e(Te,[2,19]),e(Te,[2,20]),e(Te,[2,21]),e(Te,[2,22]),e(h,[2,49],{10:ne}),e(h,[2,48],{22:88,16:89,23:104,4:we,5:Et,6:wt,8:Tt,11:er,13:tr,17:kr,18:fr,19:Mt,20:Kt}),{4:we,5:Et,6:wt,8:Tt,11:er,13:tr,16:89,17:kr,18:fr,19:Mt,20:Kt,22:105},e(Te,[2,26]),e(h,[2,50],{10:ne}),e(He,[2,28],{16:103,4:we,5:Et,6:wt,8:Tt,11:er,13:tr,17:kr,18:fr,19:Mt,20:Kt})],defaultActions:{8:[2,30],9:[2,31]},parseError:k(function(fe,ze){if(ze.recoverable)this.trace(fe);else{var yt=new Error(fe);throw yt.hash=ze,yt}},"parseError"),parse:k(function(fe){var ze=this,yt=[0],bt=[],At=[null],ct=[],zt=this.table,ft="",Pr=0,Mi=0,Di=0,ri=2,Gi=1,Br=ct.slice.call(arguments,1),sr=Object.create(this.lexer),hr={yy:{}};for(var Ci in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Ci)&&(hr.yy[Ci]=this.yy[Ci]);sr.setInput(fe,hr.yy),hr.yy.lexer=sr,hr.yy.parser=this,typeof sr.yylloc>"u"&&(sr.yylloc={});var _r=sr.yylloc;ct.push(_r);var ln=sr.options&&sr.options.ranges;typeof hr.yy.parseError=="function"?this.parseError=hr.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function en(rt){yt.length=yt.length-2*rt,At.length=At.length-rt,ct.length=ct.length-rt}k(en,"popStack");function bi(){var rt;return rt=bt.pop()||sr.lex()||Gi,typeof rt!="number"&&(rt instanceof Array&&(bt=rt,rt=bt.pop()),rt=ze.symbols_[rt]||rt),rt}k(bi,"lex");for(var gi,Fr,Bi,Xr,xa,Hn,fa={},$s,Za,Vs,ks;;){if(Bi=yt[yt.length-1],this.defaultActions[Bi]?Xr=this.defaultActions[Bi]:((gi===null||typeof gi>"u")&&(gi=bi()),Xr=zt[Bi]&&zt[Bi][gi]),typeof Xr>"u"||!Xr.length||!Xr[0]){var Ws="";ks=[];for($s in zt[Bi])this.terminals_[$s]&&$s>ri&&ks.push("'"+this.terminals_[$s]+"'");sr.showPosition?Ws="Parse error on line "+(Pr+1)+`:
`+sr.showPosition()+`
Expecting `+ks.join(", ")+", got '"+(this.terminals_[gi]||gi)+"'":Ws="Parse error on line "+(Pr+1)+": Unexpected "+(gi==Gi?"end of input":"'"+(this.terminals_[gi]||gi)+"'"),this.parseError(Ws,{text:sr.match,token:this.terminals_[gi]||gi,line:sr.yylineno,loc:_r,expected:ks})}if(Xr[0]instanceof Array&&Xr.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Bi+", token: "+gi);switch(Xr[0]){case 1:yt.push(gi),At.push(sr.yytext),ct.push(sr.yylloc),yt.push(Xr[1]),gi=null,Fr?(gi=Fr,Fr=null):(Mi=sr.yyleng,ft=sr.yytext,Pr=sr.yylineno,_r=sr.yylloc,Di>0&&Di--);break;case 2:if(Za=this.productions_[Xr[1]][1],fa.$=At[At.length-Za],fa._$={first_line:ct[ct.length-(Za||1)].first_line,last_line:ct[ct.length-1].last_line,first_column:ct[ct.length-(Za||1)].first_column,last_column:ct[ct.length-1].last_column},ln&&(fa._$.range=[ct[ct.length-(Za||1)].range[0],ct[ct.length-1].range[1]]),Hn=this.performAction.apply(fa,[ft,Mi,Pr,hr.yy,Xr[1],At,ct].concat(Br)),typeof Hn<"u")return Hn;Za&&(yt=yt.slice(0,-1*Za*2),At=At.slice(0,-1*Za),ct=ct.slice(0,-1*Za)),yt.push(this.productions_[Xr[1]][0]),At.push(fa.$),ct.push(fa._$),Vs=zt[yt[yt.length-2]][yt[yt.length-1]],yt.push(Vs);break;case 3:return!0}}return!0},"parse")},ce=function(){var fe={EOF:1,parseError:k(function(ze,yt){if(this.yy.parser)this.yy.parser.parseError(ze,yt);else throw new Error(ze)},"parseError"),setInput:k(function(ze,yt){return this.yy=yt||this.yy||{},this._input=ze,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:k(function(){var ze=this._input[0];this.yytext+=ze,this.yyleng++,this.offset++,this.match+=ze,this.matched+=ze;var yt=ze.match(/(?:\r\n?|\n).*/g);return yt?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),ze},"input"),unput:k(function(ze){var yt=ze.length,bt=ze.split(/(?:\r\n?|\n)/g);this._input=ze+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-yt),this.offset-=yt;var At=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),bt.length-1&&(this.yylineno-=bt.length-1);var ct=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:bt?(bt.length===At.length?this.yylloc.first_column:0)+At[At.length-bt.length].length-bt[0].length:this.yylloc.first_column-yt},this.options.ranges&&(this.yylloc.range=[ct[0],ct[0]+this.yyleng-yt]),this.yyleng=this.yytext.length,this},"unput"),more:k(function(){return this._more=!0,this},"more"),reject:k(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:k(function(ze){this.unput(this.match.slice(ze))},"less"),pastInput:k(function(){var ze=this.matched.substr(0,this.matched.length-this.match.length);return(ze.length>20?"...":"")+ze.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:k(function(){var ze=this.match;return ze.length<20&&(ze+=this._input.substr(0,20-ze.length)),(ze.substr(0,20)+(ze.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:k(function(){var ze=this.pastInput(),yt=new Array(ze.length+1).join("-");return ze+this.upcomingInput()+`
`+yt+"^"},"showPosition"),test_match:k(function(ze,yt){var bt,At,ct;if(this.options.backtrack_lexer&&(ct={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(ct.yylloc.range=this.yylloc.range.slice(0))),At=ze[0].match(/(?:\r\n?|\n).*/g),At&&(this.yylineno+=At.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:At?At[At.length-1].length-At[At.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+ze[0].length},this.yytext+=ze[0],this.match+=ze[0],this.matches=ze,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(ze[0].length),this.matched+=ze[0],bt=this.performAction.call(this,this.yy,this,yt,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),bt)return bt;if(this._backtrack){for(var zt in ct)this[zt]=ct[zt];return!1}return!1},"test_match"),next:k(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var ze,yt,bt,At;this._more||(this.yytext="",this.match="");for(var ct=this._currentRules(),zt=0;zt<ct.length;zt++)if(bt=this._input.match(this.rules[ct[zt]]),bt&&(!yt||bt[0].length>yt[0].length)){if(yt=bt,At=zt,this.options.backtrack_lexer){if(ze=this.test_match(bt,ct[zt]),ze!==!1)return ze;if(this._backtrack){yt=!1;continue}else return!1}else if(!this.options.flex)break}return yt?(ze=this.test_match(yt,ct[At]),ze!==!1?ze:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:k(function(){var ze=this.next();return ze||this.lex()},"lex"),begin:k(function(ze){this.conditionStack.push(ze)},"begin"),popState:k(function(){var ze=this.conditionStack.length-1;return ze>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:k(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:k(function(ze){return ze=this.conditionStack.length-1-Math.abs(ze||0),ze>=0?this.conditionStack[ze]:"INITIAL"},"topState"),pushState:k(function(ze){this.begin(ze)},"pushState"),stateStackSize:k(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:k(function(ze,yt,bt,At){var ct=At;switch(bt){case 0:break;case 1:break;case 2:return 55;case 3:break;case 4:return this.begin("title"),35;case 5:return this.popState(),"title_value";case 6:return this.begin("acc_title"),37;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),39;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:return 48;case 14:return 50;case 15:return 49;case 16:return 51;case 17:return 52;case 18:return 53;case 19:return 54;case 20:return 25;case 21:this.begin("md_string");break;case 22:return"MD_STR";case 23:this.popState();break;case 24:this.begin("string");break;case 25:this.popState();break;case 26:return"STR";case 27:this.begin("class_name");break;case 28:return this.popState(),47;case 29:return this.begin("point_start"),44;case 30:return this.begin("point_x"),45;case 31:this.popState();break;case 32:this.popState(),this.begin("point_y");break;case 33:return this.popState(),46;case 34:return 28;case 35:return 4;case 36:return 11;case 37:return 64;case 38:return 10;case 39:return 65;case 40:return 65;case 41:return 14;case 42:return 13;case 43:return 67;case 44:return 66;case 45:return 12;case 46:return 8;case 47:return 5;case 48:return 18;case 49:return 56;case 50:return 63;case 51:return 57}},"anonymous"),rules:[/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n\r]+)/i,/^(?:%%[^\n]*)/i,/^(?:title\b)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?: *x-axis *)/i,/^(?: *y-axis *)/i,/^(?: *--+> *)/i,/^(?: *quadrant-1 *)/i,/^(?: *quadrant-2 *)/i,/^(?: *quadrant-3 *)/i,/^(?: *quadrant-4 *)/i,/^(?:classDef\b)/i,/^(?:["][`])/i,/^(?:[^`"]+)/i,/^(?:[`]["])/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?::::)/i,/^(?:^\w+)/i,/^(?:\s*:\s*\[\s*)/i,/^(?:(1)|(0(.\d+)?))/i,/^(?:\s*\] *)/i,/^(?:\s*,\s*)/i,/^(?:(1)|(0(.\d+)?))/i,/^(?: *quadrantChart *)/i,/^(?:[A-Za-z]+)/i,/^(?::)/i,/^(?:\+)/i,/^(?:,)/i,/^(?:=)/i,/^(?:=)/i,/^(?:\*)/i,/^(?:#)/i,/^(?:[\_])/i,/^(?:\.)/i,/^(?:&)/i,/^(?:-)/i,/^(?:[0-9]+)/i,/^(?:\s)/i,/^(?:;)/i,/^(?:[!"#$%&'*+,-.`?\\_/])/i,/^(?:$)/i],conditions:{class_name:{rules:[28],inclusive:!1},point_y:{rules:[33],inclusive:!1},point_x:{rules:[32],inclusive:!1},point_start:{rules:[30,31],inclusive:!1},acc_descr_multiline:{rules:[11,12],inclusive:!1},acc_descr:{rules:[9],inclusive:!1},acc_title:{rules:[7],inclusive:!1},title:{rules:[5],inclusive:!1},md_string:{rules:[22,23],inclusive:!1},string:{rules:[25,26],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,6,8,10,13,14,15,16,17,18,19,20,21,24,27,29,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],inclusive:!0}}};return fe}();Qe.lexer=ce;function Ut(){this.yy={}}return k(Ut,"Parser"),Ut.prototype=Qe,Qe.Parser=Ut,new Ut}(),YO.parser=YO,C_e=YO,fu=Tb(),S_e=class{constructor(){this.classes=new Map,this.config=this.getDefaultConfig(),this.themeConfig=this.getDefaultThemeConfig(),this.data=this.getDefaultData()}static{k(this,"QuadrantBuilder")}getDefaultData(){return{titleText:"",quadrant1Text:"",quadrant2Text:"",quadrant3Text:"",quadrant4Text:"",xAxisLeftText:"",xAxisRightText:"",yAxisBottomText:"",yAxisTopText:"",points:[]}}getDefaultConfig(){return{showXAxis:!0,showYAxis:!0,showTitle:!0,chartHeight:ka.quadrantChart?.chartWidth||500,chartWidth:ka.quadrantChart?.chartHeight||500,titlePadding:ka.quadrantChart?.titlePadding||10,titleFontSize:ka.quadrantChart?.titleFontSize||20,quadrantPadding:ka.quadrantChart?.quadrantPadding||5,xAxisLabelPadding:ka.quadrantChart?.xAxisLabelPadding||5,yAxisLabelPadding:ka.quadrantChart?.yAxisLabelPadding||5,xAxisLabelFontSize:ka.quadrantChart?.xAxisLabelFontSize||16,yAxisLabelFontSize:ka.quadrantChart?.yAxisLabelFontSize||16,quadrantLabelFontSize:ka.quadrantChart?.quadrantLabelFontSize||16,quadrantTextTopPadding:ka.quadrantChart?.quadrantTextTopPadding||5,pointTextPadding:ka.quadrantChart?.pointTextPadding||5,pointLabelFontSize:ka.quadrantChart?.pointLabelFontSize||12,pointRadius:ka.quadrantChart?.pointRadius||5,xAxisPosition:ka.quadrantChart?.xAxisPosition||"top",yAxisPosition:ka.quadrantChart?.yAxisPosition||"left",quadrantInternalBorderStrokeWidth:ka.quadrantChart?.quadrantInternalBorderStrokeWidth||1,quadrantExternalBorderStrokeWidth:ka.quadrantChart?.quadrantExternalBorderStrokeWidth||2}}getDefaultThemeConfig(){return{quadrant1Fill:fu.quadrant1Fill,quadrant2Fill:fu.quadrant2Fill,quadrant3Fill:fu.quadrant3Fill,quadrant4Fill:fu.quadrant4Fill,quadrant1TextFill:fu.quadrant1TextFill,quadrant2TextFill:fu.quadrant2TextFill,quadrant3TextFill:fu.quadrant3TextFill,quadrant4TextFill:fu.quadrant4TextFill,quadrantPointFill:fu.quadrantPointFill,quadrantPointTextFill:fu.quadrantPointTextFill,quadrantXAxisTextFill:fu.quadrantXAxisTextFill,quadrantYAxisTextFill:fu.quadrantYAxisTextFill,quadrantTitleFill:fu.quadrantTitleFill,quadrantInternalBorderStrokeFill:fu.quadrantInternalBorderStrokeFill,quadrantExternalBorderStrokeFill:fu.quadrantExternalBorderStrokeFill}}clear(){this.config=this.getDefaultConfig(),this.themeConfig=this.getDefaultThemeConfig(),this.data=this.getDefaultData(),this.classes=new Map,Ce.info("clear called")}setData(e){this.data={...this.data,...e}}addPoints(e){this.data.points=[...e,...this.data.points]}addClass(e,t){this.classes.set(e,t)}setConfig(e){Ce.trace("setConfig called with: ",e),this.config={...this.config,...e}}setThemeConfig(e){Ce.trace("setThemeConfig called with: ",e),this.themeConfig={...this.themeConfig,...e}}calculateSpace(e,t,r,i){let n=this.config.xAxisLabelPadding*2+this.config.xAxisLabelFontSize,a={top:e==="top"&&t?n:0,bottom:e==="bottom"&&t?n:0},s=this.config.yAxisLabelPadding*2+this.config.yAxisLabelFontSize,u={left:this.config.yAxisPosition==="left"&&r?s:0,right:this.config.yAxisPosition==="right"&&r?s:0},h=this.config.titleFontSize+this.config.titlePadding*2,d={top:i?h:0},p=this.config.quadrantPadding+u.left,g=this.config.quadrantPadding+a.top+d.top,y=this.config.chartWidth-this.config.quadrantPadding*2-u.left-u.right,m=this.config.chartHeight-this.config.quadrantPadding*2-a.top-a.bottom-d.top,x=y/2,_=m/2;return{xAxisSpace:a,yAxisSpace:u,titleSpace:d,quadrantSpace:{quadrantLeft:p,quadrantTop:g,quadrantWidth:y,quadrantHalfWidth:x,quadrantHeight:m,quadrantHalfHeight:_}}}getAxisLabels(e,t,r,i){let{quadrantSpace:n,titleSpace:a}=i,{quadrantHalfHeight:s,quadrantHeight:u,quadrantLeft:h,quadrantHalfWidth:d,quadrantTop:p,quadrantWidth:g}=n,y=!!this.data.xAxisRightText,m=!!this.data.yAxisTopText,x=[];return this.data.xAxisLeftText&&t&&x.push({text:this.data.xAxisLeftText,fill:this.themeConfig.quadrantXAxisTextFill,x:h+(y?d/2:0),y:e==="top"?this.config.xAxisLabelPadding+a.top:this.config.xAxisLabelPadding+p+u+this.config.quadrantPadding,fontSize:this.config.xAxisLabelFontSize,verticalPos:y?"center":"left",horizontalPos:"top",rotation:0}),this.data.xAxisRightText&&t&&x.push({text:this.data.xAxisRightText,fill:this.themeConfig.quadrantXAxisTextFill,x:h+d+(y?d/2:0),y:e==="top"?this.config.xAxisLabelPadding+a.top:this.config.xAxisLabelPadding+p+u+this.config.quadrantPadding,fontSize:this.config.xAxisLabelFontSize,verticalPos:y?"center":"left",horizontalPos:"top",rotation:0}),this.data.yAxisBottomText&&r&&x.push({text:this.data.yAxisBottomText,fill:this.themeConfig.quadrantYAxisTextFill,x:this.config.yAxisPosition==="left"?this.config.yAxisLabelPadding:this.config.yAxisLabelPadding+h+g+this.config.quadrantPadding,y:p+u-(m?s/2:0),fontSize:this.config.yAxisLabelFontSize,verticalPos:m?"center":"left",horizontalPos:"top",rotation:-90}),this.data.yAxisTopText&&r&&x.push({text:this.data.yAxisTopText,fill:this.themeConfig.quadrantYAxisTextFill,x:this.config.yAxisPosition==="left"?this.config.yAxisLabelPadding:this.config.yAxisLabelPadding+h+g+this.config.quadrantPadding,y:p+s-(m?s/2:0),fontSize:this.config.yAxisLabelFontSize,verticalPos:m?"center":"left",horizontalPos:"top",rotation:-90}),x}getQuadrants(e){let{quadrantSpace:t}=e,{quadrantHalfHeight:r,quadrantLeft:i,quadrantHalfWidth:n,quadrantTop:a}=t,s=[{text:{text:this.data.quadrant1Text,fill:this.themeConfig.quadrant1TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:i+n,y:a,width:n,height:r,fill:this.themeConfig.quadrant1Fill},{text:{text:this.data.quadrant2Text,fill:this.themeConfig.quadrant2TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:i,y:a,width:n,height:r,fill:this.themeConfig.quadrant2Fill},{text:{text:this.data.quadrant3Text,fill:this.themeConfig.quadrant3TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:i,y:a+r,width:n,height:r,fill:this.themeConfig.quadrant3Fill},{text:{text:this.data.quadrant4Text,fill:this.themeConfig.quadrant4TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:i+n,y:a+r,width:n,height:r,fill:this.themeConfig.quadrant4Fill}];for(let u of s)u.text.x=u.x+u.width/2,this.data.points.length===0?(u.text.y=u.y+u.height/2,u.text.horizontalPos="middle"):(u.text.y=u.y+this.config.quadrantTextTopPadding,u.text.horizontalPos="top");return s}getQuadrantPoints(e){let{quadrantSpace:t}=e,{quadrantHeight:r,quadrantLeft:i,quadrantTop:n,quadrantWidth:a}=t,s=$1().domain([0,1]).range([i,a+i]),u=$1().domain([0,1]).range([r+n,n]);return this.data.points.map(h=>{let d=this.classes.get(h.className);return d&&(h={...d,...h}),{x:s(h.x),y:u(h.y),fill:h.color??this.themeConfig.quadrantPointFill,radius:h.radius??this.config.pointRadius,text:{text:h.text,fill:this.themeConfig.quadrantPointTextFill,x:s(h.x),y:u(h.y)+this.config.pointTextPadding,verticalPos:"center",horizontalPos:"top",fontSize:this.config.pointLabelFontSize,rotation:0},strokeColor:h.strokeColor??this.themeConfig.quadrantPointFill,strokeWidth:h.strokeWidth??"0px"}})}getBorders(e){let t=this.config.quadrantExternalBorderStrokeWidth/2,{quadrantSpace:r}=e,{quadrantHalfHeight:i,quadrantHeight:n,quadrantLeft:a,quadrantHalfWidth:s,quadrantTop:u,quadrantWidth:h}=r;return[{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:a-t,y1:u,x2:a+h+t,y2:u},{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:a+h,y1:u+t,x2:a+h,y2:u+n-t},{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:a-t,y1:u+n,x2:a+h+t,y2:u+n},{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:a,y1:u+t,x2:a,y2:u+n-t},{strokeFill:this.themeConfig.quadrantInternalBorderStrokeFill,strokeWidth:this.config.quadrantInternalBorderStrokeWidth,x1:a+s,y1:u+t,x2:a+s,y2:u+n-t},{strokeFill:this.themeConfig.quadrantInternalBorderStrokeFill,strokeWidth:this.config.quadrantInternalBorderStrokeWidth,x1:a+t,y1:u+i,x2:a+h-t,y2:u+i}]}getTitle(e){if(e)return{text:this.data.titleText,fill:this.themeConfig.quadrantTitleFill,fontSize:this.config.titleFontSize,horizontalPos:"top",verticalPos:"center",rotation:0,y:this.config.titlePadding,x:this.config.chartWidth/2}}build(){let e=this.config.showXAxis&&!!(this.data.xAxisLeftText||this.data.xAxisRightText),t=this.config.showYAxis&&!!(this.data.yAxisTopText||this.data.yAxisBottomText),r=this.config.showTitle&&!!this.data.titleText,i=this.data.points.length>0?"bottom":this.config.xAxisPosition,n=this.calculateSpace(i,e,t,r);return{points:this.getQuadrantPoints(n),quadrants:this.getQuadrants(n),axisLabels:this.getAxisLabels(i,e,t,n),borderLines:this.getBorders(n),title:this.getTitle(r)}}},kS=class extends Error{static{k(this,"InvalidStyleError")}constructor(e,t,r){super(`value for ${e} ${t} is invalid, please use a valid ${r}`),this.name="InvalidStyleError"}},k(VX,"validateHexCode"),k(c_e,"validateNumber"),k(d_e,"validateSizeInPixels"),A_e=at(),k(K0,"textSanitizer"),Ml=new S_e,k(p_e,"setQuadrant1Text"),k(f_e,"setQuadrant2Text"),k(g_e,"setQuadrant3Text"),k(m_e,"setQuadrant4Text"),k(y_e,"setXAxisLeftText"),k(v_e,"setXAxisRightText"),k(x_e,"setYAxisTopText"),k(b_e,"setYAxisBottomText"),k(WO,"parseStyles"),k(__e,"addPoint"),k(w_e,"addClass"),k(k_e,"setWidth"),k(T_e,"setHeight"),k(E_e,"getQuadrantData"),M_e=k(function(){Ml.clear(),ho()},"clear"),L_e={setWidth:k_e,setHeight:T_e,setQuadrant1Text:p_e,setQuadrant2Text:f_e,setQuadrant3Text:g_e,setQuadrant4Text:m_e,setXAxisLeftText:y_e,setXAxisRightText:v_e,setYAxisTopText:x_e,setYAxisBottomText:b_e,parseStyles:WO,addPoint:__e,addClass:w_e,getQuadrantData:E_e,clear:M_e,setAccTitle:Ks,getAccTitle:Bo,setDiagramTitle:Fo,getDiagramTitle:$o,getAccDescription:Po,setAccDescription:_o},R_e=k((e,t,r,i)=>{function n(B){return B==="top"?"hanging":"middle"}k(n,"getDominantBaseLine");function a(B){return B==="left"?"start":"middle"}k(a,"getTextAnchor");function s(B){return`translate(${B.x}, ${B.y}) rotate(${B.rotation||0})`}k(s,"getTransformation");let u=at();Ce.debug(`Rendering quadrant chart
`+e);let h=u.securityLevel,d;h==="sandbox"&&(d=Nr("#i"+t));let p=Nr(h==="sandbox"?d.nodes()[0].contentDocument.body:"body").select(`[id="${t}"]`),g=p.append("g").attr("class","main"),y=u.quadrantChart?.chartWidth??500,m=u.quadrantChart?.chartHeight??500;Oo(p,m,y,u.quadrantChart?.useMaxWidth??!0),p.attr("viewBox","0 0 "+y+" "+m),i.db.setHeight(m),i.db.setWidth(y);let x=i.db.getQuadrantData(),_=g.append("g").attr("class","quadrants"),E=g.append("g").attr("class","border"),w=g.append("g").attr("class","data-points"),C=g.append("g").attr("class","labels"),A=g.append("g").attr("class","title");x.title&&A.append("text").attr("x",0).attr("y",0).attr("fill",x.title.fill).attr("font-size",x.title.fontSize).attr("dominant-baseline",n(x.title.horizontalPos)).attr("text-anchor",a(x.title.verticalPos)).attr("transform",s(x.title)).text(x.title.text),x.borderLines&&E.selectAll("line").data(x.borderLines).enter().append("line").attr("x1",B=>B.x1).attr("y1",B=>B.y1).attr("x2",B=>B.x2).attr("y2",B=>B.y2).style("stroke",B=>B.strokeFill).style("stroke-width",B=>B.strokeWidth);let M=_.selectAll("g.quadrant").data(x.quadrants).enter().append("g").attr("class","quadrant");M.append("rect").attr("x",B=>B.x).attr("y",B=>B.y).attr("width",B=>B.width).attr("height",B=>B.height).attr("fill",B=>B.fill),M.append("text").attr("x",0).attr("y",0).attr("fill",B=>B.text.fill).attr("font-size",B=>B.text.fontSize).attr("dominant-baseline",B=>n(B.text.horizontalPos)).attr("text-anchor",B=>a(B.text.verticalPos)).attr("transform",B=>s(B.text)).text(B=>B.text.text),C.selectAll("g.label").data(x.axisLabels).enter().append("g").attr("class","label").append("text").attr("x",0).attr("y",0).text(B=>B.text).attr("fill",B=>B.fill).attr("font-size",B=>B.fontSize).attr("dominant-baseline",B=>n(B.horizontalPos)).attr("text-anchor",B=>a(B.verticalPos)).attr("transform",B=>s(B));let N=w.selectAll("g.data-point").data(x.points).enter().append("g").attr("class","data-point");N.append("circle").attr("cx",B=>B.x).attr("cy",B=>B.y).attr("r",B=>B.radius).attr("fill",B=>B.fill).attr("stroke",B=>B.strokeColor).attr("stroke-width",B=>B.strokeWidth),N.append("text").attr("x",0).attr("y",0).text(B=>B.text.text).attr("fill",B=>B.text.fill).attr("font-size",B=>B.text.fontSize).attr("dominant-baseline",B=>n(B.text.horizontalPos)).attr("text-anchor",B=>a(B.text.verticalPos)).attr("transform",B=>s(B.text))},"draw"),D_e={draw:R_e},I_e={parser:C_e,db:L_e,renderer:D_e,styles:k(()=>"","styles")}}),N_e={};oi(N_e,{diagram:()=>u5e});function WX(e){return e.type==="bar"}function YX(e){return e.type==="band"}function v5(e){return e.type==="linear"}function qX(e,t,r,i){let n=new tK(i);return YX(e)?new K_e(t,r,e.categories,e.title,n):new Z_e(t,r,[e.min,e.max],e.title,n)}function O_e(e,t,r,i){let n=new tK(i);return new Q_e(n,e,t,r)}function B_e(e,t,r){return new t5e(e,t,r)}function XX(){let e=Tb(),t=cs();return ff(e.xyChart,t.themeVariables.xyChart)}function KX(){let e=cs();return ff(ka.xyChart,e.xyChart)}function ZX(){return{yAxis:{type:"linear",title:"",min:1/0,max:-1/0},xAxis:{type:"band",title:"",categories:[]},title:"",plots:[]}}function qO(e){let t=cs();return Da(e.trim(),t)}function P_e(e){n5e=e}function F_e(e){e==="horizontal"?b5.chartOrientation="horizontal":b5.chartOrientation="vertical"}function $_e(e){ns.xAxis.title=qO(e.text)}function QX(e,t){ns.xAxis={type:"linear",title:ns.xAxis.title,min:e,max:t},TS=!0}function z_e(e){ns.xAxis={type:"band",title:ns.xAxis.title,categories:e.map(t=>qO(t.text))},TS=!0}function G_e(e){ns.yAxis.title=qO(e.text)}function U_e(e,t){ns.yAxis={type:"linear",title:ns.yAxis.title,min:e,max:t},ZO=!0}function j_e(e){let t=Math.min(...e),r=Math.max(...e),i=v5(ns.yAxis)?ns.yAxis.min:1/0,n=v5(ns.yAxis)?ns.yAxis.max:-1/0;ns.yAxis={type:"linear",title:ns.yAxis.title,min:Math.min(i,t),max:Math.max(n,r)}}function JX(e){let t=[];if(e.length===0)return t;if(!TS){let r=v5(ns.xAxis)?ns.xAxis.min:1/0,i=v5(ns.xAxis)?ns.xAxis.max:-1/0;QX(Math.min(r,1),Math.max(i,e.length))}if(ZO||j_e(e),YX(ns.xAxis)&&(t=ns.xAxis.categories.map((r,i)=>[r,e[i]])),v5(ns.xAxis)){let r=ns.xAxis.min,i=ns.xAxis.max,n=(i-r)/(e.length-1),a=[];for(let s=r;s<=i;s+=n)a.push(`${s}`);t=a.map((s,u)=>[s,e[u]])}return t}function eK(e){return KO[e===0?0:e%KO.length]}function H_e(e,t){let r=JX(t);ns.plots.push({type:"line",strokeFill:eK(x5),strokeWidth:2,data:r}),x5++}function V_e(e,t){let r=JX(t);ns.plots.push({type:"bar",fill:eK(x5),data:r}),x5++}function W_e(){if(ns.plots.length===0)throw Error("No Plot to render, please provide a plot with some data");return ns.title=$o(),i5e.build(b5,ns,_5,n5e)}function Y_e(){return _5}function q_e(){return b5}var XO,X_e,tK,rK,iK,nK,K_e,Z_e,Q_e,J_e,e5e,t5e,r5e,i5e,x5,n5e,b5,_5,ns,KO,TS,ZO,a5e,s5e,o5e,l5e,u5e,YXe=D(()=>{ch(),Os(),gm(),Qn(),ha(),ha(),ha(),XO=function(){var e=k(function(j,H,V,P){for(V=V||{},P=j.length;P--;V[j[P]]=H);return V},"o"),t=[1,10,12,14,16,18,19,21,23],r=[2,6],i=[1,3],n=[1,5],a=[1,6],s=[1,7],u=[1,5,10,12,14,16,18,19,21,23,34,35,36],h=[1,25],d=[1,26],p=[1,28],g=[1,29],y=[1,30],m=[1,31],x=[1,32],_=[1,33],E=[1,34],w=[1,35],C=[1,36],A=[1,37],M=[1,43],N=[1,42],B=[1,47],O=[1,50],L=[1,10,12,14,16,18,19,21,23,34,35,36],$=[1,10,12,14,16,18,19,21,23,24,26,27,28,34,35,36],G=[1,10,12,14,16,18,19,21,23,24,26,27,28,34,35,36,41,42,43,44,45,46,47,48,49,50],z=[1,64],F={trace:k(function(){},"trace"),yy:{},symbols_:{error:2,start:3,eol:4,XYCHART:5,chartConfig:6,document:7,CHART_ORIENTATION:8,statement:9,title:10,text:11,X_AXIS:12,parseXAxis:13,Y_AXIS:14,parseYAxis:15,LINE:16,plotData:17,BAR:18,acc_title:19,acc_title_value:20,acc_descr:21,acc_descr_value:22,acc_descr_multiline_value:23,SQUARE_BRACES_START:24,commaSeparatedNumbers:25,SQUARE_BRACES_END:26,NUMBER_WITH_DECIMAL:27,COMMA:28,xAxisData:29,bandData:30,ARROW_DELIMITER:31,commaSeparatedTexts:32,yAxisData:33,NEWLINE:34,SEMI:35,EOF:36,alphaNum:37,STR:38,MD_STR:39,alphaNumToken:40,AMP:41,NUM:42,ALPHA:43,PLUS:44,EQUALS:45,MULT:46,DOT:47,BRKT:48,MINUS:49,UNDERSCORE:50,$accept:0,$end:1},terminals_:{2:"error",5:"XYCHART",8:"CHART_ORIENTATION",10:"title",12:"X_AXIS",14:"Y_AXIS",16:"LINE",18:"BAR",19:"acc_title",20:"acc_title_value",21:"acc_descr",22:"acc_descr_value",23:"acc_descr_multiline_value",24:"SQUARE_BRACES_START",26:"SQUARE_BRACES_END",27:"NUMBER_WITH_DECIMAL",28:"COMMA",31:"ARROW_DELIMITER",34:"NEWLINE",35:"SEMI",36:"EOF",38:"STR",39:"MD_STR",41:"AMP",42:"NUM",43:"ALPHA",44:"PLUS",45:"EQUALS",46:"MULT",47:"DOT",48:"BRKT",49:"MINUS",50:"UNDERSCORE"},productions_:[0,[3,2],[3,3],[3,2],[3,1],[6,1],[7,0],[7,2],[9,2],[9,2],[9,2],[9,2],[9,2],[9,3],[9,2],[9,3],[9,2],[9,2],[9,1],[17,3],[25,3],[25,1],[13,1],[13,2],[13,1],[29,1],[29,3],[30,3],[32,3],[32,1],[15,1],[15,2],[15,1],[33,3],[4,1],[4,1],[4,1],[11,1],[11,1],[11,1],[37,1],[37,2],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1]],performAction:k(function(j,H,V,P,q,Z,J){var ae=Z.length-1;switch(q){case 5:P.setOrientation(Z[ae]);break;case 9:P.setDiagramTitle(Z[ae].text.trim());break;case 12:P.setLineData({text:"",type:"text"},Z[ae]);break;case 13:P.setLineData(Z[ae-1],Z[ae]);break;case 14:P.setBarData({text:"",type:"text"},Z[ae]);break;case 15:P.setBarData(Z[ae-1],Z[ae]);break;case 16:this.$=Z[ae].trim(),P.setAccTitle(this.$);break;case 17:case 18:this.$=Z[ae].trim(),P.setAccDescription(this.$);break;case 19:this.$=Z[ae-1];break;case 20:this.$=[Number(Z[ae-2]),...Z[ae]];break;case 21:this.$=[Number(Z[ae])];break;case 22:P.setXAxisTitle(Z[ae]);break;case 23:P.setXAxisTitle(Z[ae-1]);break;case 24:P.setXAxisTitle({type:"text",text:""});break;case 25:P.setXAxisBand(Z[ae]);break;case 26:P.setXAxisRangeData(Number(Z[ae-2]),Number(Z[ae]));break;case 27:this.$=Z[ae-1];break;case 28:this.$=[Z[ae-2],...Z[ae]];break;case 29:this.$=[Z[ae]];break;case 30:P.setYAxisTitle(Z[ae]);break;case 31:P.setYAxisTitle(Z[ae-1]);break;case 32:P.setYAxisTitle({type:"text",text:""});break;case 33:P.setYAxisRangeData(Number(Z[ae-2]),Number(Z[ae]));break;case 37:this.$={text:Z[ae],type:"text"};break;case 38:this.$={text:Z[ae],type:"text"};break;case 39:this.$={text:Z[ae],type:"markdown"};break;case 40:this.$=Z[ae];break;case 41:this.$=Z[ae-1]+""+Z[ae];break}},"anonymous"),table:[e(t,r,{3:1,4:2,7:4,5:i,34:n,35:a,36:s}),{1:[3]},e(t,r,{4:2,7:4,3:8,5:i,34:n,35:a,36:s}),e(t,r,{4:2,7:4,6:9,3:10,5:i,8:[1,11],34:n,35:a,36:s}),{1:[2,4],9:12,10:[1,13],12:[1,14],14:[1,15],16:[1,16],18:[1,17],19:[1,18],21:[1,19],23:[1,20]},e(u,[2,34]),e(u,[2,35]),e(u,[2,36]),{1:[2,1]},e(t,r,{4:2,7:4,3:21,5:i,34:n,35:a,36:s}),{1:[2,3]},e(u,[2,5]),e(t,[2,7],{4:22,34:n,35:a,36:s}),{11:23,37:24,38:h,39:d,40:27,41:p,42:g,43:y,44:m,45:x,46:_,47:E,48:w,49:C,50:A},{11:39,13:38,24:M,27:N,29:40,30:41,37:24,38:h,39:d,40:27,41:p,42:g,43:y,44:m,45:x,46:_,47:E,48:w,49:C,50:A},{11:45,15:44,27:B,33:46,37:24,38:h,39:d,40:27,41:p,42:g,43:y,44:m,45:x,46:_,47:E,48:w,49:C,50:A},{11:49,17:48,24:O,37:24,38:h,39:d,40:27,41:p,42:g,43:y,44:m,45:x,46:_,47:E,48:w,49:C,50:A},{11:52,17:51,24:O,37:24,38:h,39:d,40:27,41:p,42:g,43:y,44:m,45:x,46:_,47:E,48:w,49:C,50:A},{20:[1,53]},{22:[1,54]},e(L,[2,18]),{1:[2,2]},e(L,[2,8]),e(L,[2,9]),e($,[2,37],{40:55,41:p,42:g,43:y,44:m,45:x,46:_,47:E,48:w,49:C,50:A}),e($,[2,38]),e($,[2,39]),e(G,[2,40]),e(G,[2,42]),e(G,[2,43]),e(G,[2,44]),e(G,[2,45]),e(G,[2,46]),e(G,[2,47]),e(G,[2,48]),e(G,[2,49]),e(G,[2,50]),e(G,[2,51]),e(L,[2,10]),e(L,[2,22],{30:41,29:56,24:M,27:N}),e(L,[2,24]),e(L,[2,25]),{31:[1,57]},{11:59,32:58,37:24,38:h,39:d,40:27,41:p,42:g,43:y,44:m,45:x,46:_,47:E,48:w,49:C,50:A},e(L,[2,11]),e(L,[2,30],{33:60,27:B}),e(L,[2,32]),{31:[1,61]},e(L,[2,12]),{17:62,24:O},{25:63,27:z},e(L,[2,14]),{17:65,24:O},e(L,[2,16]),e(L,[2,17]),e(G,[2,41]),e(L,[2,23]),{27:[1,66]},{26:[1,67]},{26:[2,29],28:[1,68]},e(L,[2,31]),{27:[1,69]},e(L,[2,13]),{26:[1,70]},{26:[2,21],28:[1,71]},e(L,[2,15]),e(L,[2,26]),e(L,[2,27]),{11:59,32:72,37:24,38:h,39:d,40:27,41:p,42:g,43:y,44:m,45:x,46:_,47:E,48:w,49:C,50:A},e(L,[2,33]),e(L,[2,19]),{25:73,27:z},{26:[2,28]},{26:[2,20]}],defaultActions:{8:[2,1],10:[2,3],21:[2,2],72:[2,28],73:[2,20]},parseError:k(function(j,H){if(H.recoverable)this.trace(j);else{var V=new Error(j);throw V.hash=H,V}},"parseError"),parse:k(function(j){var H=this,V=[0],P=[],q=[null],Z=[],J=this.table,ae="",ue=0,be=0,Le=0,xe=2,Ae=1,oe=Z.slice.call(arguments,1),he=Object.create(this.lexer),le={yy:{}};for(var ke in this.yy)Object.prototype.hasOwnProperty.call(this.yy,ke)&&(le.yy[ke]=this.yy[ke]);he.setInput(j,le.yy),le.yy.lexer=he,le.yy.parser=this,typeof he.yylloc>"u"&&(he.yylloc={});var pe=he.yylloc;Z.push(pe);var qe=he.options&&he.options.ranges;typeof le.yy.parseError=="function"?this.parseError=le.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function me(Te){V.length=V.length-2*Te,q.length=q.length-Te,Z.length=Z.length-Te}k(me,"popStack");function st(){var Te;return Te=P.pop()||he.lex()||Ae,typeof Te!="number"&&(Te instanceof Array&&(P=Te,Te=P.pop()),Te=H.symbols_[Te]||Te),Te}k(st,"lex");for(var we,Et,wt,Tt,er,tr,kr={},fr,Mt,Kt,ne;;){if(wt=V[V.length-1],this.defaultActions[wt]?Tt=this.defaultActions[wt]:((we===null||typeof we>"u")&&(we=st()),Tt=J[wt]&&J[wt][we]),typeof Tt>"u"||!Tt.length||!Tt[0]){var He="";ne=[];for(fr in J[wt])this.terminals_[fr]&&fr>xe&&ne.push("'"+this.terminals_[fr]+"'");he.showPosition?He="Parse error on line "+(ue+1)+`:
`+he.showPosition()+`
Expecting `+ne.join(", ")+", got '"+(this.terminals_[we]||we)+"'":He="Parse error on line "+(ue+1)+": Unexpected "+(we==Ae?"end of input":"'"+(this.terminals_[we]||we)+"'"),this.parseError(He,{text:he.match,token:this.terminals_[we]||we,line:he.yylineno,loc:pe,expected:ne})}if(Tt[0]instanceof Array&&Tt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+wt+", token: "+we);switch(Tt[0]){case 1:V.push(we),q.push(he.yytext),Z.push(he.yylloc),V.push(Tt[1]),we=null,Et?(we=Et,Et=null):(be=he.yyleng,ae=he.yytext,ue=he.yylineno,pe=he.yylloc,Le>0&&Le--);break;case 2:if(Mt=this.productions_[Tt[1]][1],kr.$=q[q.length-Mt],kr._$={first_line:Z[Z.length-(Mt||1)].first_line,last_line:Z[Z.length-1].last_line,first_column:Z[Z.length-(Mt||1)].first_column,last_column:Z[Z.length-1].last_column},qe&&(kr._$.range=[Z[Z.length-(Mt||1)].range[0],Z[Z.length-1].range[1]]),tr=this.performAction.apply(kr,[ae,be,ue,le.yy,Tt[1],q,Z].concat(oe)),typeof tr<"u")return tr;Mt&&(V=V.slice(0,-1*Mt*2),q=q.slice(0,-1*Mt),Z=Z.slice(0,-1*Mt)),V.push(this.productions_[Tt[1]][0]),q.push(kr.$),Z.push(kr._$),Kt=J[V[V.length-2]][V[V.length-1]],V.push(Kt);break;case 3:return!0}}return!0},"parse")},X=function(){var j={EOF:1,parseError:k(function(H,V){if(this.yy.parser)this.yy.parser.parseError(H,V);else throw new Error(H)},"parseError"),setInput:k(function(H,V){return this.yy=V||this.yy||{},this._input=H,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:k(function(){var H=this._input[0];this.yytext+=H,this.yyleng++,this.offset++,this.match+=H,this.matched+=H;var V=H.match(/(?:\r\n?|\n).*/g);return V?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),H},"input"),unput:k(function(H){var V=H.length,P=H.split(/(?:\r\n?|\n)/g);this._input=H+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-V),this.offset-=V;var q=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),P.length-1&&(this.yylineno-=P.length-1);var Z=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:P?(P.length===q.length?this.yylloc.first_column:0)+q[q.length-P.length].length-P[0].length:this.yylloc.first_column-V},this.options.ranges&&(this.yylloc.range=[Z[0],Z[0]+this.yyleng-V]),this.yyleng=this.yytext.length,this},"unput"),more:k(function(){return this._more=!0,this},"more"),reject:k(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:k(function(H){this.unput(this.match.slice(H))},"less"),pastInput:k(function(){var H=this.matched.substr(0,this.matched.length-this.match.length);return(H.length>20?"...":"")+H.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:k(function(){var H=this.match;return H.length<20&&(H+=this._input.substr(0,20-H.length)),(H.substr(0,20)+(H.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:k(function(){var H=this.pastInput(),V=new Array(H.length+1).join("-");return H+this.upcomingInput()+`
`+V+"^"},"showPosition"),test_match:k(function(H,V){var P,q,Z;if(this.options.backtrack_lexer&&(Z={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Z.yylloc.range=this.yylloc.range.slice(0))),q=H[0].match(/(?:\r\n?|\n).*/g),q&&(this.yylineno+=q.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:q?q[q.length-1].length-q[q.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+H[0].length},this.yytext+=H[0],this.match+=H[0],this.matches=H,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(H[0].length),this.matched+=H[0],P=this.performAction.call(this,this.yy,this,V,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),P)return P;if(this._backtrack){for(var J in Z)this[J]=Z[J];return!1}return!1},"test_match"),next:k(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var H,V,P,q;this._more||(this.yytext="",this.match="");for(var Z=this._currentRules(),J=0;J<Z.length;J++)if(P=this._input.match(this.rules[Z[J]]),P&&(!V||P[0].length>V[0].length)){if(V=P,q=J,this.options.backtrack_lexer){if(H=this.test_match(P,Z[J]),H!==!1)return H;if(this._backtrack){V=!1;continue}else return!1}else if(!this.options.flex)break}return V?(H=this.test_match(V,Z[q]),H!==!1?H:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:k(function(){var H=this.next();return H||this.lex()},"lex"),begin:k(function(H){this.conditionStack.push(H)},"begin"),popState:k(function(){var H=this.conditionStack.length-1;return H>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:k(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:k(function(H){return H=this.conditionStack.length-1-Math.abs(H||0),H>=0?this.conditionStack[H]:"INITIAL"},"topState"),pushState:k(function(H){this.begin(H)},"pushState"),stateStackSize:k(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:k(function(H,V,P,q){var Z=q;switch(P){case 0:break;case 1:break;case 2:return this.popState(),34;case 3:return this.popState(),34;case 4:return 34;case 5:break;case 6:return 10;case 7:return this.pushState("acc_title"),19;case 8:return this.popState(),"acc_title_value";case 9:return this.pushState("acc_descr"),21;case 10:return this.popState(),"acc_descr_value";case 11:this.pushState("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:return 5;case 15:return 8;case 16:return this.pushState("axis_data"),"X_AXIS";case 17:return this.pushState("axis_data"),"Y_AXIS";case 18:return this.pushState("axis_band_data"),24;case 19:return 31;case 20:return this.pushState("data"),16;case 21:return this.pushState("data"),18;case 22:return this.pushState("data_inner"),24;case 23:return 27;case 24:return this.popState(),26;case 25:this.popState();break;case 26:this.pushState("string");break;case 27:this.popState();break;case 28:return"STR";case 29:return 24;case 30:return 26;case 31:return 43;case 32:return"COLON";case 33:return 44;case 34:return 28;case 35:return 45;case 36:return 46;case 37:return 48;case 38:return 50;case 39:return 47;case 40:return 41;case 41:return 49;case 42:return 42;case 43:break;case 44:return 35;case 45:return 36}},"anonymous"),rules:[/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:(\r?\n))/i,/^(?:(\r?\n))/i,/^(?:[\n\r]+)/i,/^(?:%%[^\n]*)/i,/^(?:title\b)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:\{)/i,/^(?:[^\}]*)/i,/^(?:xychart-beta\b)/i,/^(?:(?:vertical|horizontal))/i,/^(?:x-axis\b)/i,/^(?:y-axis\b)/i,/^(?:\[)/i,/^(?:-->)/i,/^(?:line\b)/i,/^(?:bar\b)/i,/^(?:\[)/i,/^(?:[+-]?(?:\d+(?:\.\d+)?|\.\d+))/i,/^(?:\])/i,/^(?:(?:`\)                                    \{ this\.pushState\(md_string\); \}\n<md_string>\(\?:\(\?!`"\)\.\)\+                  \{ return MD_STR; \}\n<md_string>\(\?:`))/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:[A-Za-z]+)/i,/^(?::)/i,/^(?:\+)/i,/^(?:,)/i,/^(?:=)/i,/^(?:\*)/i,/^(?:#)/i,/^(?:[\_])/i,/^(?:\.)/i,/^(?:&)/i,/^(?:-)/i,/^(?:[0-9]+)/i,/^(?:\s+)/i,/^(?:;)/i,/^(?:$)/i],conditions:{data_inner:{rules:[0,1,4,5,6,7,9,11,14,15,16,17,20,21,23,24,25,26,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0},data:{rules:[0,1,3,4,5,6,7,9,11,14,15,16,17,20,21,22,25,26,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0},axis_band_data:{rules:[0,1,4,5,6,7,9,11,14,15,16,17,20,21,24,25,26,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0},axis_data:{rules:[0,1,2,4,5,6,7,9,11,14,15,16,17,18,19,20,21,23,25,26,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0},acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},title:{rules:[],inclusive:!1},md_string:{rules:[],inclusive:!1},string:{rules:[27,28],inclusive:!1},INITIAL:{rules:[0,1,4,5,6,7,9,11,14,15,16,17,20,21,25,26,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0}}};return j}();F.lexer=X;function I(){this.yy={}}return k(I,"Parser"),I.prototype=F,F.Parser=I,new I}(),XO.parser=XO,X_e=XO,k(WX,"isBarPlot"),k(YX,"isBandAxisData"),k(v5,"isLinearAxisData"),tK=class{constructor(e){this.parentGroup=e}static{k(this,"TextDimensionCalculatorWithFont")}getMaxDimension(e,t){if(!this.parentGroup)return{width:e.reduce((n,a)=>Math.max(a.length,n),0)*t,height:t};let r={width:0,height:0},i=this.parentGroup.append("g").attr("visibility","hidden").attr("font-size",t);for(let n of e){let a=wse(i,1,n),s=a?a.width:n.length*t,u=a?a.height:t;r.width=Math.max(r.width,s),r.height=Math.max(r.height,u)}return i.remove(),r}},rK=.7,iK=.2,nK=class{constructor(e,t,r,i){this.axisConfig=e,this.title=t,this.textDimensionCalculator=r,this.axisThemeConfig=i,this.boundingRect={x:0,y:0,width:0,height:0},this.axisPosition="left",this.showTitle=!1,this.showLabel=!1,this.showTick=!1,this.showAxisLine=!1,this.outerPadding=0,this.titleTextHeight=0,this.labelTextHeight=0,this.range=[0,10],this.boundingRect={x:0,y:0,width:0,height:0},this.axisPosition="left"}static{k(this,"BaseAxis")}setRange(e){this.range=e,this.axisPosition==="left"||this.axisPosition==="right"?this.boundingRect.height=e[1]-e[0]:this.boundingRect.width=e[1]-e[0],this.recalculateScale()}getRange(){return[this.range[0]+this.outerPadding,this.range[1]-this.outerPadding]}setAxisPosition(e){this.axisPosition=e,this.setRange(this.range)}getTickDistance(){let e=this.getRange();return Math.abs(e[0]-e[1])/this.getTickValues().length}getAxisOuterPadding(){return this.outerPadding}getLabelDimension(){return this.textDimensionCalculator.getMaxDimension(this.getTickValues().map(e=>e.toString()),this.axisConfig.labelFontSize)}recalculateOuterPaddingToDrawBar(){rK*this.getTickDistance()>this.outerPadding*2&&(this.outerPadding=Math.floor(rK*this.getTickDistance()/2)),this.recalculateScale()}calculateSpaceIfDrawnHorizontally(e){let t=e.height;if(this.axisConfig.showAxisLine&&t>this.axisConfig.axisLineWidth&&(t-=this.axisConfig.axisLineWidth,this.showAxisLine=!0),this.axisConfig.showLabel){let r=this.getLabelDimension(),i=iK*e.width;this.outerPadding=Math.min(r.width/2,i);let n=r.height+this.axisConfig.labelPadding*2;this.labelTextHeight=r.height,n<=t&&(t-=n,this.showLabel=!0)}if(this.axisConfig.showTick&&t>=this.axisConfig.tickLength&&(this.showTick=!0,t-=this.axisConfig.tickLength),this.axisConfig.showTitle&&this.title){let r=this.textDimensionCalculator.getMaxDimension([this.title],this.axisConfig.titleFontSize),i=r.height+this.axisConfig.titlePadding*2;this.titleTextHeight=r.height,i<=t&&(t-=i,this.showTitle=!0)}this.boundingRect.width=e.width,this.boundingRect.height=e.height-t}calculateSpaceIfDrawnVertical(e){let t=e.width;if(this.axisConfig.showAxisLine&&t>this.axisConfig.axisLineWidth&&(t-=this.axisConfig.axisLineWidth,this.showAxisLine=!0),this.axisConfig.showLabel){let r=this.getLabelDimension(),i=iK*e.height;this.outerPadding=Math.min(r.height/2,i);let n=r.width+this.axisConfig.labelPadding*2;n<=t&&(t-=n,this.showLabel=!0)}if(this.axisConfig.showTick&&t>=this.axisConfig.tickLength&&(this.showTick=!0,t-=this.axisConfig.tickLength),this.axisConfig.showTitle&&this.title){let r=this.textDimensionCalculator.getMaxDimension([this.title],this.axisConfig.titleFontSize),i=r.height+this.axisConfig.titlePadding*2;this.titleTextHeight=r.height,i<=t&&(t-=i,this.showTitle=!0)}this.boundingRect.width=e.width-t,this.boundingRect.height=e.height}calculateSpace(e){return this.axisPosition==="left"||this.axisPosition==="right"?this.calculateSpaceIfDrawnVertical(e):this.calculateSpaceIfDrawnHorizontally(e),this.recalculateScale(),{width:this.boundingRect.width,height:this.boundingRect.height}}setBoundingBoxXY(e){this.boundingRect.x=e.x,this.boundingRect.y=e.y}getDrawableElementsForLeftAxis(){let e=[];if(this.showAxisLine){let t=this.boundingRect.x+this.boundingRect.width-this.axisConfig.axisLineWidth/2;e.push({type:"path",groupTexts:["left-axis","axisl-line"],data:[{path:`M ${t},${this.boundingRect.y} L ${t},${this.boundingRect.y+this.boundingRect.height} `,strokeFill:this.axisThemeConfig.axisLineColor,strokeWidth:this.axisConfig.axisLineWidth}]})}if(this.showLabel&&e.push({type:"text",groupTexts:["left-axis","label"],data:this.getTickValues().map(t=>({text:t.toString(),x:this.boundingRect.x+this.boundingRect.width-(this.showLabel?this.axisConfig.labelPadding:0)-(this.showTick?this.axisConfig.tickLength:0)-(this.showAxisLine?this.axisConfig.axisLineWidth:0),y:this.getScaleValue(t),fill:this.axisThemeConfig.labelColor,fontSize:this.axisConfig.labelFontSize,rotation:0,verticalPos:"middle",horizontalPos:"right"}))}),this.showTick){let t=this.boundingRect.x+this.boundingRect.width-(this.showAxisLine?this.axisConfig.axisLineWidth:0);e.push({type:"path",groupTexts:["left-axis","ticks"],data:this.getTickValues().map(r=>({path:`M ${t},${this.getScaleValue(r)} L ${t-this.axisConfig.tickLength},${this.getScaleValue(r)}`,strokeFill:this.axisThemeConfig.tickColor,strokeWidth:this.axisConfig.tickWidth}))})}return this.showTitle&&e.push({type:"text",groupTexts:["left-axis","title"],data:[{text:this.title,x:this.boundingRect.x+this.axisConfig.titlePadding,y:this.boundingRect.y+this.boundingRect.height/2,fill:this.axisThemeConfig.titleColor,fontSize:this.axisConfig.titleFontSize,rotation:270,verticalPos:"top",horizontalPos:"center"}]}),e}getDrawableElementsForBottomAxis(){let e=[];if(this.showAxisLine){let t=this.boundingRect.y+this.axisConfig.axisLineWidth/2;e.push({type:"path",groupTexts:["bottom-axis","axis-line"],data:[{path:`M ${this.boundingRect.x},${t} L ${this.boundingRect.x+this.boundingRect.width},${t}`,strokeFill:this.axisThemeConfig.axisLineColor,strokeWidth:this.axisConfig.axisLineWidth}]})}if(this.showLabel&&e.push({type:"text",groupTexts:["bottom-axis","label"],data:this.getTickValues().map(t=>({text:t.toString(),x:this.getScaleValue(t),y:this.boundingRect.y+this.axisConfig.labelPadding+(this.showTick?this.axisConfig.tickLength:0)+(this.showAxisLine?this.axisConfig.axisLineWidth:0),fill:this.axisThemeConfig.labelColor,fontSize:this.axisConfig.labelFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}))}),this.showTick){let t=this.boundingRect.y+(this.showAxisLine?this.axisConfig.axisLineWidth:0);e.push({type:"path",groupTexts:["bottom-axis","ticks"],data:this.getTickValues().map(r=>({path:`M ${this.getScaleValue(r)},${t} L ${this.getScaleValue(r)},${t+this.axisConfig.tickLength}`,strokeFill:this.axisThemeConfig.tickColor,strokeWidth:this.axisConfig.tickWidth}))})}return this.showTitle&&e.push({type:"text",groupTexts:["bottom-axis","title"],data:[{text:this.title,x:this.range[0]+(this.range[1]-this.range[0])/2,y:this.boundingRect.y+this.boundingRect.height-this.axisConfig.titlePadding-this.titleTextHeight,fill:this.axisThemeConfig.titleColor,fontSize:this.axisConfig.titleFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}]}),e}getDrawableElementsForTopAxis(){let e=[];if(this.showAxisLine){let t=this.boundingRect.y+this.boundingRect.height-this.axisConfig.axisLineWidth/2;e.push({type:"path",groupTexts:["top-axis","axis-line"],data:[{path:`M ${this.boundingRect.x},${t} L ${this.boundingRect.x+this.boundingRect.width},${t}`,strokeFill:this.axisThemeConfig.axisLineColor,strokeWidth:this.axisConfig.axisLineWidth}]})}if(this.showLabel&&e.push({type:"text",groupTexts:["top-axis","label"],data:this.getTickValues().map(t=>({text:t.toString(),x:this.getScaleValue(t),y:this.boundingRect.y+(this.showTitle?this.titleTextHeight+this.axisConfig.titlePadding*2:0)+this.axisConfig.labelPadding,fill:this.axisThemeConfig.labelColor,fontSize:this.axisConfig.labelFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}))}),this.showTick){let t=this.boundingRect.y;e.push({type:"path",groupTexts:["top-axis","ticks"],data:this.getTickValues().map(r=>({path:`M ${this.getScaleValue(r)},${t+this.boundingRect.height-(this.showAxisLine?this.axisConfig.axisLineWidth:0)} L ${this.getScaleValue(r)},${t+this.boundingRect.height-this.axisConfig.tickLength-(this.showAxisLine?this.axisConfig.axisLineWidth:0)}`,strokeFill:this.axisThemeConfig.tickColor,strokeWidth:this.axisConfig.tickWidth}))})}return this.showTitle&&e.push({type:"text",groupTexts:["top-axis","title"],data:[{text:this.title,x:this.boundingRect.x+this.boundingRect.width/2,y:this.boundingRect.y+this.axisConfig.titlePadding,fill:this.axisThemeConfig.titleColor,fontSize:this.axisConfig.titleFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}]}),e}getDrawableElements(){if(this.axisPosition==="left")return this.getDrawableElementsForLeftAxis();if(this.axisPosition==="right")throw Error("Drawing of right axis is not implemented");return this.axisPosition==="bottom"?this.getDrawableElementsForBottomAxis():this.axisPosition==="top"?this.getDrawableElementsForTopAxis():[]}},K_e=class extends nK{static{k(this,"BandAxis")}constructor(e,t,r,i,n){super(e,i,n,t),this.categories=r,this.scale=qE().domain(this.categories).range(this.getRange())}setRange(e){super.setRange(e)}recalculateScale(){this.scale=qE().domain(this.categories).range(this.getRange()).paddingInner(1).paddingOuter(0).align(.5),Ce.trace("BandAxis axis final categories, range: ",this.categories,this.getRange())}getTickValues(){return this.categories}getScaleValue(e){return this.scale(e)??this.getRange()[0]}},Z_e=class extends nK{static{k(this,"LinearAxis")}constructor(e,t,r,i,n){super(e,i,n,t),this.domain=r,this.scale=$1().domain(this.domain).range(this.getRange())}getTickValues(){return this.scale.ticks()}recalculateScale(){let e=[...this.domain];this.axisPosition==="left"&&e.reverse(),this.scale=$1().domain(e).range(this.getRange())}getScaleValue(e){return this.scale(e)}},k(qX,"getAxis"),Q_e=class{constructor(e,t,r,i){this.textDimensionCalculator=e,this.chartConfig=t,this.chartData=r,this.chartThemeConfig=i,this.boundingRect={x:0,y:0,width:0,height:0},this.showChartTitle=!1}static{k(this,"ChartTitle")}setBoundingBoxXY(e){this.boundingRect.x=e.x,this.boundingRect.y=e.y}calculateSpace(e){let t=this.textDimensionCalculator.getMaxDimension([this.chartData.title],this.chartConfig.titleFontSize),r=Math.max(t.width,e.width),i=t.height+2*this.chartConfig.titlePadding;return t.width<=r&&t.height<=i&&this.chartConfig.showTitle&&this.chartData.title&&(this.boundingRect.width=r,this.boundingRect.height=i,this.showChartTitle=!0),{width:this.boundingRect.width,height:this.boundingRect.height}}getDrawableElements(){let e=[];return this.showChartTitle&&e.push({groupTexts:["chart-title"],type:"text",data:[{fontSize:this.chartConfig.titleFontSize,text:this.chartData.title,verticalPos:"middle",horizontalPos:"center",x:this.boundingRect.x+this.boundingRect.width/2,y:this.boundingRect.y+this.boundingRect.height/2,fill:this.chartThemeConfig.titleColor,rotation:0}]}),e}},k(O_e,"getChartTitleComponent"),J_e=class{constructor(e,t,r,i,n){this.plotData=e,this.xAxis=t,this.yAxis=r,this.orientation=i,this.plotIndex=n}static{k(this,"LinePlot")}getDrawableElement(){let e=this.plotData.data.map(r=>[this.xAxis.getScaleValue(r[0]),this.yAxis.getScaleValue(r[1])]),t;return this.orientation==="horizontal"?t=vv().y(r=>r[0]).x(r=>r[1])(e):t=vv().x(r=>r[0]).y(r=>r[1])(e),t?[{groupTexts:["plot",`line-plot-${this.plotIndex}`],type:"path",data:[{path:t,strokeFill:this.plotData.strokeFill,strokeWidth:this.plotData.strokeWidth}]}]:[]}},e5e=class{constructor(e,t,r,i,n,a){this.barData=e,this.boundingRect=t,this.xAxis=r,this.yAxis=i,this.orientation=n,this.plotIndex=a}static{k(this,"BarPlot")}getDrawableElement(){let e=this.barData.data.map(i=>[this.xAxis.getScaleValue(i[0]),this.yAxis.getScaleValue(i[1])]),t=Math.min(this.xAxis.getAxisOuterPadding()*2,this.xAxis.getTickDistance())*(1-.05),r=t/2;return this.orientation==="horizontal"?[{groupTexts:["plot",`bar-plot-${this.plotIndex}`],type:"rect",data:e.map(i=>({x:this.boundingRect.x,y:i[0]-r,height:t,width:i[1]-this.boundingRect.x,fill:this.barData.fill,strokeWidth:0,strokeFill:this.barData.fill}))}]:[{groupTexts:["plot",`bar-plot-${this.plotIndex}`],type:"rect",data:e.map(i=>({x:i[0]-r,y:i[1],width:t,height:this.boundingRect.y+this.boundingRect.height-i[1],fill:this.barData.fill,strokeWidth:0,strokeFill:this.barData.fill}))}]}},t5e=class{constructor(e,t,r){this.chartConfig=e,this.chartData=t,this.chartThemeConfig=r,this.boundingRect={x:0,y:0,width:0,height:0}}static{k(this,"BasePlot")}setAxes(e,t){this.xAxis=e,this.yAxis=t}setBoundingBoxXY(e){this.boundingRect.x=e.x,this.boundingRect.y=e.y}calculateSpace(e){return this.boundingRect.width=e.width,this.boundingRect.height=e.height,{width:this.boundingRect.width,height:this.boundingRect.height}}getDrawableElements(){if(!(this.xAxis&&this.yAxis))throw Error("Axes must be passed to render Plots");let e=[];for(let[t,r]of this.chartData.plots.entries())switch(r.type){case"line":{let i=new J_e(r,this.xAxis,this.yAxis,this.chartConfig.chartOrientation,t);e.push(...i.getDrawableElement())}break;case"bar":{let i=new e5e(r,this.boundingRect,this.xAxis,this.yAxis,this.chartConfig.chartOrientation,t);e.push(...i.getDrawableElement())}break}return e}},k(B_e,"getPlotComponent"),r5e=class{constructor(e,t,r,i){this.chartConfig=e,this.chartData=t,this.componentStore={title:O_e(e,t,r,i),plot:B_e(e,t,r),xAxis:qX(t.xAxis,e.xAxis,{titleColor:r.xAxisTitleColor,labelColor:r.xAxisLabelColor,tickColor:r.xAxisTickColor,axisLineColor:r.xAxisLineColor},i),yAxis:qX(t.yAxis,e.yAxis,{titleColor:r.yAxisTitleColor,labelColor:r.yAxisLabelColor,tickColor:r.yAxisTickColor,axisLineColor:r.yAxisLineColor},i)}}static{k(this,"Orchestrator")}calculateVerticalSpace(){let e=this.chartConfig.width,t=this.chartConfig.height,r=0,i=0,n=Math.floor(e*this.chartConfig.plotReservedSpacePercent/100),a=Math.floor(t*this.chartConfig.plotReservedSpacePercent/100),s=this.componentStore.plot.calculateSpace({width:n,height:a});e-=s.width,t-=s.height,s=this.componentStore.title.calculateSpace({width:this.chartConfig.width,height:t}),i=s.height,t-=s.height,this.componentStore.xAxis.setAxisPosition("bottom"),s=this.componentStore.xAxis.calculateSpace({width:e,height:t}),t-=s.height,this.componentStore.yAxis.setAxisPosition("left"),s=this.componentStore.yAxis.calculateSpace({width:e,height:t}),r=s.width,e-=s.width,e>0&&(n+=e,e=0),t>0&&(a+=t,t=0),this.componentStore.plot.calculateSpace({width:n,height:a}),this.componentStore.plot.setBoundingBoxXY({x:r,y:i}),this.componentStore.xAxis.setRange([r,r+n]),this.componentStore.xAxis.setBoundingBoxXY({x:r,y:i+a}),this.componentStore.yAxis.setRange([i,i+a]),this.componentStore.yAxis.setBoundingBoxXY({x:0,y:i}),this.chartData.plots.some(u=>WX(u))&&this.componentStore.xAxis.recalculateOuterPaddingToDrawBar()}calculateHorizontalSpace(){let e=this.chartConfig.width,t=this.chartConfig.height,r=0,i=0,n=0,a=Math.floor(e*this.chartConfig.plotReservedSpacePercent/100),s=Math.floor(t*this.chartConfig.plotReservedSpacePercent/100),u=this.componentStore.plot.calculateSpace({width:a,height:s});e-=u.width,t-=u.height,u=this.componentStore.title.calculateSpace({width:this.chartConfig.width,height:t}),r=u.height,t-=u.height,this.componentStore.xAxis.setAxisPosition("left"),u=this.componentStore.xAxis.calculateSpace({width:e,height:t}),e-=u.width,i=u.width,this.componentStore.yAxis.setAxisPosition("top"),u=this.componentStore.yAxis.calculateSpace({width:e,height:t}),t-=u.height,n=r+u.height,e>0&&(a+=e,e=0),t>0&&(s+=t,t=0),this.componentStore.plot.calculateSpace({width:a,height:s}),this.componentStore.plot.setBoundingBoxXY({x:i,y:n}),this.componentStore.yAxis.setRange([i,i+a]),this.componentStore.yAxis.setBoundingBoxXY({x:i,y:r}),this.componentStore.xAxis.setRange([n,n+s]),this.componentStore.xAxis.setBoundingBoxXY({x:0,y:n}),this.chartData.plots.some(h=>WX(h))&&this.componentStore.xAxis.recalculateOuterPaddingToDrawBar()}calculateSpace(){this.chartConfig.chartOrientation==="horizontal"?this.calculateHorizontalSpace():this.calculateVerticalSpace()}getDrawableElement(){this.calculateSpace();let e=[];this.componentStore.plot.setAxes(this.componentStore.xAxis,this.componentStore.yAxis);for(let t of Object.values(this.componentStore))e.push(...t.getDrawableElements());return e}},i5e=class{static{k(this,"XYChartBuilder")}static build(e,t,r,i){return new r5e(e,t,r,i).getDrawableElement()}},x5=0,b5=KX(),_5=XX(),ns=ZX(),KO=_5.plotColorPalette.split(",").map(e=>e.trim()),TS=!1,ZO=!1,k(XX,"getChartDefaultThemeConfig"),k(KX,"getChartDefaultConfig"),k(ZX,"getChartDefaultData"),k(qO,"textSanitizer"),k(P_e,"setTmpSVGG"),k(F_e,"setOrientation"),k($_e,"setXAxisTitle"),k(QX,"setXAxisRangeData"),k(z_e,"setXAxisBand"),k(G_e,"setYAxisTitle"),k(U_e,"setYAxisRangeData"),k(j_e,"setYAxisRangeFromPlotData"),k(JX,"transformDataWithoutCategory"),k(eK,"getPlotColorFromPalette"),k(H_e,"setLineData"),k(V_e,"setBarData"),k(W_e,"getDrawableElem"),k(Y_e,"getChartThemeConfig"),k(q_e,"getChartConfig"),a5e=k(function(){ho(),x5=0,b5=KX(),ns=ZX(),_5=XX(),KO=_5.plotColorPalette.split(",").map(e=>e.trim()),TS=!1,ZO=!1},"clear"),s5e={getDrawableElem:W_e,clear:a5e,setAccTitle:Ks,getAccTitle:Bo,setDiagramTitle:Fo,getDiagramTitle:$o,getAccDescription:Po,setAccDescription:_o,setOrientation:F_e,setXAxisTitle:$_e,setXAxisRangeData:QX,setXAxisBand:z_e,setYAxisTitle:G_e,setYAxisRangeData:U_e,setLineData:H_e,setBarData:V_e,setTmpSVGG:P_e,getChartThemeConfig:Y_e,getChartConfig:q_e},o5e=k((e,t,r,i)=>{let n=i.db,a=n.getChartThemeConfig(),s=n.getChartConfig();function u(E){return E==="top"?"text-before-edge":"middle"}k(u,"getDominantBaseLine");function h(E){return E==="left"?"start":E==="right"?"end":"middle"}k(h,"getTextAnchor");function d(E){return`translate(${E.x}, ${E.y}) rotate(${E.rotation||0})`}k(d,"getTextTransformation"),Ce.debug(`Rendering xychart chart
`+e);let p=kf(t),g=p.append("g").attr("class","main"),y=g.append("rect").attr("width",s.width).attr("height",s.height).attr("class","background");Oo(p,s.height,s.width,!0),p.attr("viewBox",`0 0 ${s.width} ${s.height}`),y.attr("fill",a.backgroundColor),n.setTmpSVGG(p.append("g").attr("class","mermaid-tmp-group"));let m=n.getDrawableElem(),x={};function _(E){let w=g,C="";for(let[A]of E.entries()){let M=g;A>0&&x[C]&&(M=x[C]),C+=E[A],w=x[C],w||(w=x[C]=M.append("g").attr("class",E[A]))}return w}k(_,"getGroup");for(let E of m){if(E.data.length===0)continue;let w=_(E.groupTexts);switch(E.type){case"rect":w.selectAll("rect").data(E.data).enter().append("rect").attr("x",C=>C.x).attr("y",C=>C.y).attr("width",C=>C.width).attr("height",C=>C.height).attr("fill",C=>C.fill).attr("stroke",C=>C.strokeFill).attr("stroke-width",C=>C.strokeWidth);break;case"text":w.selectAll("text").data(E.data).enter().append("text").attr("x",0).attr("y",0).attr("fill",C=>C.fill).attr("font-size",C=>C.fontSize).attr("dominant-baseline",C=>u(C.verticalPos)).attr("text-anchor",C=>h(C.horizontalPos)).attr("transform",C=>d(C)).text(C=>C.text);break;case"path":w.selectAll("path").data(E.data).enter().append("path").attr("d",C=>C.path).attr("fill",C=>C.fill?C.fill:"none").attr("stroke",C=>C.strokeFill).attr("stroke-width",C=>C.strokeWidth);break}}},"draw"),l5e={draw:o5e},u5e={parser:X_e,db:s5e,renderer:l5e}}),h5e={};oi(h5e,{diagram:()=>G5e});var QO,c5e,JO,Yu,w5,jf,k5,d5e,p5e,f5e,g5e,m5e,y5e,v5e,x5e,b5e,_5e,w5e,k5e,T5e,E5e,C5e,S5e,A5e,M5e,L5e,R5e,eB,D5e,aK,io,sK,oK,lK,uK,I5e,N5e,O5e,B5e,P5e,F5e,Zv,$5e,z5e,G5e,qXe=D(()=>{Qn(),ha(),pI(),Qh(),QO=function(){var e=k(function(Le,xe,Ae,oe){for(Ae=Ae||{},oe=Le.length;oe--;Ae[Le[oe]]=xe);return Ae},"o"),t=[1,3],r=[1,4],i=[1,5],n=[1,6],a=[5,6,8,9,11,13,31,32,33,34,35,36,44,62,63],s=[1,18],u=[2,7],h=[1,22],d=[1,23],p=[1,24],g=[1,25],y=[1,26],m=[1,27],x=[1,20],_=[1,28],E=[1,29],w=[62,63],C=[5,8,9,11,13,31,32,33,34,35,36,44,51,53,62,63],A=[1,47],M=[1,48],N=[1,49],B=[1,50],O=[1,51],L=[1,52],$=[1,53],G=[53,54],z=[1,64],F=[1,60],X=[1,61],I=[1,62],j=[1,63],H=[1,65],V=[1,69],P=[1,70],q=[1,67],Z=[1,68],J=[5,8,9,11,13,31,32,33,34,35,36,44,62,63],ae={trace:k(function(){},"trace"),yy:{},symbols_:{error:2,start:3,directive:4,NEWLINE:5,RD:6,diagram:7,EOF:8,acc_title:9,acc_title_value:10,acc_descr:11,acc_descr_value:12,acc_descr_multiline_value:13,requirementDef:14,elementDef:15,relationshipDef:16,requirementType:17,requirementName:18,STRUCT_START:19,requirementBody:20,ID:21,COLONSEP:22,id:23,TEXT:24,text:25,RISK:26,riskLevel:27,VERIFYMTHD:28,verifyType:29,STRUCT_STOP:30,REQUIREMENT:31,FUNCTIONAL_REQUIREMENT:32,INTERFACE_REQUIREMENT:33,PERFORMANCE_REQUIREMENT:34,PHYSICAL_REQUIREMENT:35,DESIGN_CONSTRAINT:36,LOW_RISK:37,MED_RISK:38,HIGH_RISK:39,VERIFY_ANALYSIS:40,VERIFY_DEMONSTRATION:41,VERIFY_INSPECTION:42,VERIFY_TEST:43,ELEMENT:44,elementName:45,elementBody:46,TYPE:47,type:48,DOCREF:49,ref:50,END_ARROW_L:51,relationship:52,LINE:53,END_ARROW_R:54,CONTAINS:55,COPIES:56,DERIVES:57,SATISFIES:58,VERIFIES:59,REFINES:60,TRACES:61,unqString:62,qString:63,$accept:0,$end:1},terminals_:{2:"error",5:"NEWLINE",6:"RD",8:"EOF",9:"acc_title",10:"acc_title_value",11:"acc_descr",12:"acc_descr_value",13:"acc_descr_multiline_value",19:"STRUCT_START",21:"ID",22:"COLONSEP",24:"TEXT",26:"RISK",28:"VERIFYMTHD",30:"STRUCT_STOP",31:"REQUIREMENT",32:"FUNCTIONAL_REQUIREMENT",33:"INTERFACE_REQUIREMENT",34:"PERFORMANCE_REQUIREMENT",35:"PHYSICAL_REQUIREMENT",36:"DESIGN_CONSTRAINT",37:"LOW_RISK",38:"MED_RISK",39:"HIGH_RISK",40:"VERIFY_ANALYSIS",41:"VERIFY_DEMONSTRATION",42:"VERIFY_INSPECTION",43:"VERIFY_TEST",44:"ELEMENT",47:"TYPE",49:"DOCREF",51:"END_ARROW_L",53:"LINE",54:"END_ARROW_R",55:"CONTAINS",56:"COPIES",57:"DERIVES",58:"SATISFIES",59:"VERIFIES",60:"REFINES",61:"TRACES",62:"unqString",63:"qString"},productions_:[0,[3,3],[3,2],[3,4],[4,2],[4,2],[4,1],[7,0],[7,2],[7,2],[7,2],[7,2],[7,2],[14,5],[20,5],[20,5],[20,5],[20,5],[20,2],[20,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[27,1],[27,1],[27,1],[29,1],[29,1],[29,1],[29,1],[15,5],[46,5],[46,5],[46,2],[46,1],[16,5],[16,5],[52,1],[52,1],[52,1],[52,1],[52,1],[52,1],[52,1],[18,1],[18,1],[23,1],[23,1],[25,1],[25,1],[45,1],[45,1],[48,1],[48,1],[50,1],[50,1]],performAction:k(function(Le,xe,Ae,oe,he,le,ke){var pe=le.length-1;switch(he){case 4:this.$=le[pe].trim(),oe.setAccTitle(this.$);break;case 5:case 6:this.$=le[pe].trim(),oe.setAccDescription(this.$);break;case 7:this.$=[];break;case 13:oe.addRequirement(le[pe-3],le[pe-4]);break;case 14:oe.setNewReqId(le[pe-2]);break;case 15:oe.setNewReqText(le[pe-2]);break;case 16:oe.setNewReqRisk(le[pe-2]);break;case 17:oe.setNewReqVerifyMethod(le[pe-2]);break;case 20:this.$=oe.RequirementType.REQUIREMENT;break;case 21:this.$=oe.RequirementType.FUNCTIONAL_REQUIREMENT;break;case 22:this.$=oe.RequirementType.INTERFACE_REQUIREMENT;break;case 23:this.$=oe.RequirementType.PERFORMANCE_REQUIREMENT;break;case 24:this.$=oe.RequirementType.PHYSICAL_REQUIREMENT;break;case 25:this.$=oe.RequirementType.DESIGN_CONSTRAINT;break;case 26:this.$=oe.RiskLevel.LOW_RISK;break;case 27:this.$=oe.RiskLevel.MED_RISK;break;case 28:this.$=oe.RiskLevel.HIGH_RISK;break;case 29:this.$=oe.VerifyType.VERIFY_ANALYSIS;break;case 30:this.$=oe.VerifyType.VERIFY_DEMONSTRATION;break;case 31:this.$=oe.VerifyType.VERIFY_INSPECTION;break;case 32:this.$=oe.VerifyType.VERIFY_TEST;break;case 33:oe.addElement(le[pe-3]);break;case 34:oe.setNewElementType(le[pe-2]);break;case 35:oe.setNewElementDocRef(le[pe-2]);break;case 38:oe.addRelationship(le[pe-2],le[pe],le[pe-4]);break;case 39:oe.addRelationship(le[pe-2],le[pe-4],le[pe]);break;case 40:this.$=oe.Relationships.CONTAINS;break;case 41:this.$=oe.Relationships.COPIES;break;case 42:this.$=oe.Relationships.DERIVES;break;case 43:this.$=oe.Relationships.SATISFIES;break;case 44:this.$=oe.Relationships.VERIFIES;break;case 45:this.$=oe.Relationships.REFINES;break;case 46:this.$=oe.Relationships.TRACES;break}},"anonymous"),table:[{3:1,4:2,6:t,9:r,11:i,13:n},{1:[3]},{3:8,4:2,5:[1,7],6:t,9:r,11:i,13:n},{5:[1,9]},{10:[1,10]},{12:[1,11]},e(a,[2,6]),{3:12,4:2,6:t,9:r,11:i,13:n},{1:[2,2]},{4:17,5:s,7:13,8:u,9:r,11:i,13:n,14:14,15:15,16:16,17:19,23:21,31:h,32:d,33:p,34:g,35:y,36:m,44:x,62:_,63:E},e(a,[2,4]),e(a,[2,5]),{1:[2,1]},{8:[1,30]},{4:17,5:s,7:31,8:u,9:r,11:i,13:n,14:14,15:15,16:16,17:19,23:21,31:h,32:d,33:p,34:g,35:y,36:m,44:x,62:_,63:E},{4:17,5:s,7:32,8:u,9:r,11:i,13:n,14:14,15:15,16:16,17:19,23:21,31:h,32:d,33:p,34:g,35:y,36:m,44:x,62:_,63:E},{4:17,5:s,7:33,8:u,9:r,11:i,13:n,14:14,15:15,16:16,17:19,23:21,31:h,32:d,33:p,34:g,35:y,36:m,44:x,62:_,63:E},{4:17,5:s,7:34,8:u,9:r,11:i,13:n,14:14,15:15,16:16,17:19,23:21,31:h,32:d,33:p,34:g,35:y,36:m,44:x,62:_,63:E},{4:17,5:s,7:35,8:u,9:r,11:i,13:n,14:14,15:15,16:16,17:19,23:21,31:h,32:d,33:p,34:g,35:y,36:m,44:x,62:_,63:E},{18:36,62:[1,37],63:[1,38]},{45:39,62:[1,40],63:[1,41]},{51:[1,42],53:[1,43]},e(w,[2,20]),e(w,[2,21]),e(w,[2,22]),e(w,[2,23]),e(w,[2,24]),e(w,[2,25]),e(C,[2,49]),e(C,[2,50]),{1:[2,3]},{8:[2,8]},{8:[2,9]},{8:[2,10]},{8:[2,11]},{8:[2,12]},{19:[1,44]},{19:[2,47]},{19:[2,48]},{19:[1,45]},{19:[2,53]},{19:[2,54]},{52:46,55:A,56:M,57:N,58:B,59:O,60:L,61:$},{52:54,55:A,56:M,57:N,58:B,59:O,60:L,61:$},{5:[1,55]},{5:[1,56]},{53:[1,57]},e(G,[2,40]),e(G,[2,41]),e(G,[2,42]),e(G,[2,43]),e(G,[2,44]),e(G,[2,45]),e(G,[2,46]),{54:[1,58]},{5:z,20:59,21:F,24:X,26:I,28:j,30:H},{5:V,30:P,46:66,47:q,49:Z},{23:71,62:_,63:E},{23:72,62:_,63:E},e(J,[2,13]),{22:[1,73]},{22:[1,74]},{22:[1,75]},{22:[1,76]},{5:z,20:77,21:F,24:X,26:I,28:j,30:H},e(J,[2,19]),e(J,[2,33]),{22:[1,78]},{22:[1,79]},{5:V,30:P,46:80,47:q,49:Z},e(J,[2,37]),e(J,[2,38]),e(J,[2,39]),{23:81,62:_,63:E},{25:82,62:[1,83],63:[1,84]},{27:85,37:[1,86],38:[1,87],39:[1,88]},{29:89,40:[1,90],41:[1,91],42:[1,92],43:[1,93]},e(J,[2,18]),{48:94,62:[1,95],63:[1,96]},{50:97,62:[1,98],63:[1,99]},e(J,[2,36]),{5:[1,100]},{5:[1,101]},{5:[2,51]},{5:[2,52]},{5:[1,102]},{5:[2,26]},{5:[2,27]},{5:[2,28]},{5:[1,103]},{5:[2,29]},{5:[2,30]},{5:[2,31]},{5:[2,32]},{5:[1,104]},{5:[2,55]},{5:[2,56]},{5:[1,105]},{5:[2,57]},{5:[2,58]},{5:z,20:106,21:F,24:X,26:I,28:j,30:H},{5:z,20:107,21:F,24:X,26:I,28:j,30:H},{5:z,20:108,21:F,24:X,26:I,28:j,30:H},{5:z,20:109,21:F,24:X,26:I,28:j,30:H},{5:V,30:P,46:110,47:q,49:Z},{5:V,30:P,46:111,47:q,49:Z},e(J,[2,14]),e(J,[2,15]),e(J,[2,16]),e(J,[2,17]),e(J,[2,34]),e(J,[2,35])],defaultActions:{8:[2,2],12:[2,1],30:[2,3],31:[2,8],32:[2,9],33:[2,10],34:[2,11],35:[2,12],37:[2,47],38:[2,48],40:[2,53],41:[2,54],83:[2,51],84:[2,52],86:[2,26],87:[2,27],88:[2,28],90:[2,29],91:[2,30],92:[2,31],93:[2,32],95:[2,55],96:[2,56],98:[2,57],99:[2,58]},parseError:k(function(Le,xe){if(xe.recoverable)this.trace(Le);else{var Ae=new Error(Le);throw Ae.hash=xe,Ae}},"parseError"),parse:k(function(Le){var xe=this,Ae=[0],oe=[],he=[null],le=[],ke=this.table,pe="",qe=0,me=0,st=0,we=2,Et=1,wt=le.slice.call(arguments,1),Tt=Object.create(this.lexer),er={yy:{}};for(var tr in this.yy)Object.prototype.hasOwnProperty.call(this.yy,tr)&&(er.yy[tr]=this.yy[tr]);Tt.setInput(Le,er.yy),er.yy.lexer=Tt,er.yy.parser=this,typeof Tt.yylloc>"u"&&(Tt.yylloc={});var kr=Tt.yylloc;le.push(kr);var fr=Tt.options&&Tt.options.ranges;typeof er.yy.parseError=="function"?this.parseError=er.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Mt(zt){Ae.length=Ae.length-2*zt,he.length=he.length-zt,le.length=le.length-zt}k(Mt,"popStack");function Kt(){var zt;return zt=oe.pop()||Tt.lex()||Et,typeof zt!="number"&&(zt instanceof Array&&(oe=zt,zt=oe.pop()),zt=xe.symbols_[zt]||zt),zt}k(Kt,"lex");for(var ne,He,Te,Qe,ce,Ut,fe={},ze,yt,bt,At;;){if(Te=Ae[Ae.length-1],this.defaultActions[Te]?Qe=this.defaultActions[Te]:((ne===null||typeof ne>"u")&&(ne=Kt()),Qe=ke[Te]&&ke[Te][ne]),typeof Qe>"u"||!Qe.length||!Qe[0]){var ct="";At=[];for(ze in ke[Te])this.terminals_[ze]&&ze>we&&At.push("'"+this.terminals_[ze]+"'");Tt.showPosition?ct="Parse error on line "+(qe+1)+`:
`+Tt.showPosition()+`
Expecting `+At.join(", ")+", got '"+(this.terminals_[ne]||ne)+"'":ct="Parse error on line "+(qe+1)+": Unexpected "+(ne==Et?"end of input":"'"+(this.terminals_[ne]||ne)+"'"),this.parseError(ct,{text:Tt.match,token:this.terminals_[ne]||ne,line:Tt.yylineno,loc:kr,expected:At})}if(Qe[0]instanceof Array&&Qe.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Te+", token: "+ne);switch(Qe[0]){case 1:Ae.push(ne),he.push(Tt.yytext),le.push(Tt.yylloc),Ae.push(Qe[1]),ne=null,He?(ne=He,He=null):(me=Tt.yyleng,pe=Tt.yytext,qe=Tt.yylineno,kr=Tt.yylloc,st>0&&st--);break;case 2:if(yt=this.productions_[Qe[1]][1],fe.$=he[he.length-yt],fe._$={first_line:le[le.length-(yt||1)].first_line,last_line:le[le.length-1].last_line,first_column:le[le.length-(yt||1)].first_column,last_column:le[le.length-1].last_column},fr&&(fe._$.range=[le[le.length-(yt||1)].range[0],le[le.length-1].range[1]]),Ut=this.performAction.apply(fe,[pe,me,qe,er.yy,Qe[1],he,le].concat(wt)),typeof Ut<"u")return Ut;yt&&(Ae=Ae.slice(0,-1*yt*2),he=he.slice(0,-1*yt),le=le.slice(0,-1*yt)),Ae.push(this.productions_[Qe[1]][0]),he.push(fe.$),le.push(fe._$),bt=ke[Ae[Ae.length-2]][Ae[Ae.length-1]],Ae.push(bt);break;case 3:return!0}}return!0},"parse")},ue=function(){var Le={EOF:1,parseError:k(function(xe,Ae){if(this.yy.parser)this.yy.parser.parseError(xe,Ae);else throw new Error(xe)},"parseError"),setInput:k(function(xe,Ae){return this.yy=Ae||this.yy||{},this._input=xe,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:k(function(){var xe=this._input[0];this.yytext+=xe,this.yyleng++,this.offset++,this.match+=xe,this.matched+=xe;var Ae=xe.match(/(?:\r\n?|\n).*/g);return Ae?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),xe},"input"),unput:k(function(xe){var Ae=xe.length,oe=xe.split(/(?:\r\n?|\n)/g);this._input=xe+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Ae),this.offset-=Ae;var he=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),oe.length-1&&(this.yylineno-=oe.length-1);var le=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:oe?(oe.length===he.length?this.yylloc.first_column:0)+he[he.length-oe.length].length-oe[0].length:this.yylloc.first_column-Ae},this.options.ranges&&(this.yylloc.range=[le[0],le[0]+this.yyleng-Ae]),this.yyleng=this.yytext.length,this},"unput"),more:k(function(){return this._more=!0,this},"more"),reject:k(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:k(function(xe){this.unput(this.match.slice(xe))},"less"),pastInput:k(function(){var xe=this.matched.substr(0,this.matched.length-this.match.length);return(xe.length>20?"...":"")+xe.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:k(function(){var xe=this.match;return xe.length<20&&(xe+=this._input.substr(0,20-xe.length)),(xe.substr(0,20)+(xe.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:k(function(){var xe=this.pastInput(),Ae=new Array(xe.length+1).join("-");return xe+this.upcomingInput()+`
`+Ae+"^"},"showPosition"),test_match:k(function(xe,Ae){var oe,he,le;if(this.options.backtrack_lexer&&(le={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(le.yylloc.range=this.yylloc.range.slice(0))),he=xe[0].match(/(?:\r\n?|\n).*/g),he&&(this.yylineno+=he.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:he?he[he.length-1].length-he[he.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+xe[0].length},this.yytext+=xe[0],this.match+=xe[0],this.matches=xe,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(xe[0].length),this.matched+=xe[0],oe=this.performAction.call(this,this.yy,this,Ae,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),oe)return oe;if(this._backtrack){for(var ke in le)this[ke]=le[ke];return!1}return!1},"test_match"),next:k(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var xe,Ae,oe,he;this._more||(this.yytext="",this.match="");for(var le=this._currentRules(),ke=0;ke<le.length;ke++)if(oe=this._input.match(this.rules[le[ke]]),oe&&(!Ae||oe[0].length>Ae[0].length)){if(Ae=oe,he=ke,this.options.backtrack_lexer){if(xe=this.test_match(oe,le[ke]),xe!==!1)return xe;if(this._backtrack){Ae=!1;continue}else return!1}else if(!this.options.flex)break}return Ae?(xe=this.test_match(Ae,le[he]),xe!==!1?xe:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:k(function(){var xe=this.next();return xe||this.lex()},"lex"),begin:k(function(xe){this.conditionStack.push(xe)},"begin"),popState:k(function(){var xe=this.conditionStack.length-1;return xe>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:k(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:k(function(xe){return xe=this.conditionStack.length-1-Math.abs(xe||0),xe>=0?this.conditionStack[xe]:"INITIAL"},"topState"),pushState:k(function(xe){this.begin(xe)},"pushState"),stateStackSize:k(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:k(function(xe,Ae,oe,he){var le=he;switch(oe){case 0:return"title";case 1:return this.begin("acc_title"),9;case 2:return this.popState(),"acc_title_value";case 3:return this.begin("acc_descr"),11;case 4:return this.popState(),"acc_descr_value";case 5:this.begin("acc_descr_multiline");break;case 6:this.popState();break;case 7:return"acc_descr_multiline_value";case 8:return 5;case 9:break;case 10:break;case 11:break;case 12:return 8;case 13:return 6;case 14:return 19;case 15:return 30;case 16:return 22;case 17:return 21;case 18:return 24;case 19:return 26;case 20:return 28;case 21:return 31;case 22:return 32;case 23:return 33;case 24:return 34;case 25:return 35;case 26:return 36;case 27:return 37;case 28:return 38;case 29:return 39;case 30:return 40;case 31:return 41;case 32:return 42;case 33:return 43;case 34:return 44;case 35:return 55;case 36:return 56;case 37:return 57;case 38:return 58;case 39:return 59;case 40:return 60;case 41:return 61;case 42:return 47;case 43:return 49;case 44:return 51;case 45:return 54;case 46:return 53;case 47:this.begin("string");break;case 48:this.popState();break;case 49:return"qString";case 50:return Ae.yytext=Ae.yytext.trim(),62}},"anonymous"),rules:[/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:(\r?\n)+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:$)/i,/^(?:requirementDiagram\b)/i,/^(?:\{)/i,/^(?:\})/i,/^(?::)/i,/^(?:id\b)/i,/^(?:text\b)/i,/^(?:risk\b)/i,/^(?:verifyMethod\b)/i,/^(?:requirement\b)/i,/^(?:functionalRequirement\b)/i,/^(?:interfaceRequirement\b)/i,/^(?:performanceRequirement\b)/i,/^(?:physicalRequirement\b)/i,/^(?:designConstraint\b)/i,/^(?:low\b)/i,/^(?:medium\b)/i,/^(?:high\b)/i,/^(?:analysis\b)/i,/^(?:demonstration\b)/i,/^(?:inspection\b)/i,/^(?:test\b)/i,/^(?:element\b)/i,/^(?:contains\b)/i,/^(?:copies\b)/i,/^(?:derives\b)/i,/^(?:satisfies\b)/i,/^(?:verifies\b)/i,/^(?:refines\b)/i,/^(?:traces\b)/i,/^(?:type\b)/i,/^(?:docref\b)/i,/^(?:<-)/i,/^(?:->)/i,/^(?:-)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[\w][^\r\n\{\<\>\-\=]*)/i],conditions:{acc_descr_multiline:{rules:[6,7],inclusive:!1},acc_descr:{rules:[4],inclusive:!1},acc_title:{rules:[2],inclusive:!1},unqString:{rules:[],inclusive:!1},token:{rules:[],inclusive:!1},string:{rules:[48,49],inclusive:!1},INITIAL:{rules:[0,1,3,5,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,50],inclusive:!0}}};return Le}();ae.lexer=ue;function be(){this.yy={}}return k(be,"Parser"),be.prototype=ae,ae.Parser=be,new be}(),QO.parser=QO,c5e=QO,JO=[],Yu={},w5=new Map,jf={},k5=new Map,d5e={REQUIREMENT:"Requirement",FUNCTIONAL_REQUIREMENT:"Functional Requirement",INTERFACE_REQUIREMENT:"Interface Requirement",PERFORMANCE_REQUIREMENT:"Performance Requirement",PHYSICAL_REQUIREMENT:"Physical Requirement",DESIGN_CONSTRAINT:"Design Constraint"},p5e={LOW_RISK:"Low",MED_RISK:"Medium",HIGH_RISK:"High"},f5e={VERIFY_ANALYSIS:"Analysis",VERIFY_DEMONSTRATION:"Demonstration",VERIFY_INSPECTION:"Inspection",VERIFY_TEST:"Test"},g5e={CONTAINS:"contains",COPIES:"copies",DERIVES:"derives",SATISFIES:"satisfies",VERIFIES:"verifies",REFINES:"refines",TRACES:"traces"},m5e=k((e,t)=>(w5.has(e)||w5.set(e,{name:e,type:t,id:Yu.id,text:Yu.text,risk:Yu.risk,verifyMethod:Yu.verifyMethod}),Yu={},w5.get(e)),"addRequirement"),y5e=k(()=>w5,"getRequirements"),v5e=k(e=>{Yu!==void 0&&(Yu.id=e)},"setNewReqId"),x5e=k(e=>{Yu!==void 0&&(Yu.text=e)},"setNewReqText"),b5e=k(e=>{Yu!==void 0&&(Yu.risk=e)},"setNewReqRisk"),_5e=k(e=>{Yu!==void 0&&(Yu.verifyMethod=e)},"setNewReqVerifyMethod"),w5e=k(e=>(k5.has(e)||(k5.set(e,{name:e,type:jf.type,docRef:jf.docRef}),Ce.info("Added new requirement: ",e)),jf={},k5.get(e)),"addElement"),k5e=k(()=>k5,"getElements"),T5e=k(e=>{jf!==void 0&&(jf.type=e)},"setNewElementType"),E5e=k(e=>{jf!==void 0&&(jf.docRef=e)},"setNewElementDocRef"),C5e=k((e,t,r)=>{JO.push({type:e,src:t,dst:r})},"addRelationship"),S5e=k(()=>JO,"getRelationships"),A5e=k(()=>{JO=[],Yu={},w5=new Map,jf={},k5=new Map,ho()},"clear"),M5e={RequirementType:d5e,RiskLevel:p5e,VerifyType:f5e,Relationships:g5e,getConfig:k(()=>at().req,"getConfig"),addRequirement:m5e,getRequirements:y5e,setNewReqId:v5e,setNewReqText:x5e,setNewReqRisk:b5e,setNewReqVerifyMethod:_5e,setAccTitle:Ks,getAccTitle:Bo,setAccDescription:_o,getAccDescription:Po,addElement:w5e,getElements:k5e,setNewElementType:T5e,setNewElementDocRef:E5e,addRelationship:C5e,getRelationships:S5e,clear:A5e},L5e=k(e=>`

  marker {
    fill: ${e.relationColor};
    stroke: ${e.relationColor};
  }

  marker.cross {
    stroke: ${e.lineColor};
  }

  svg {
    font-family: ${e.fontFamily};
    font-size: ${e.fontSize};
  }

  .reqBox {
    fill: ${e.requirementBackground};
    fill-opacity: 1.0;
    stroke: ${e.requirementBorderColor};
    stroke-width: ${e.requirementBorderSize};
  }
  
  .reqTitle, .reqLabel{
    fill:  ${e.requirementTextColor};
  }
  .reqLabelBox {
    fill: ${e.relationLabelBackground};
    fill-opacity: 1.0;
  }

  .req-title-line {
    stroke: ${e.requirementBorderColor};
    stroke-width: ${e.requirementBorderSize};
  }
  .relationshipLine {
    stroke: ${e.relationColor};
    stroke-width: 1;
  }
  .relationshipLabel {
    fill: ${e.relationLabelColor};
  }

`,"getStyles"),R5e=L5e,eB={CONTAINS:"contains",ARROW:"arrow"},D5e=k((e,t)=>{let r=e.append("defs").append("marker").attr("id",eB.CONTAINS+"_line_ending").attr("refX",0).attr("refY",t.line_height/2).attr("markerWidth",t.line_height).attr("markerHeight",t.line_height).attr("orient","auto").append("g");r.append("circle").attr("cx",t.line_height/2).attr("cy",t.line_height/2).attr("r",t.line_height/2).attr("fill","none"),r.append("line").attr("x1",0).attr("x2",t.line_height).attr("y1",t.line_height/2).attr("y2",t.line_height/2).attr("stroke-width",1),r.append("line").attr("y1",0).attr("y2",t.line_height).attr("x1",t.line_height/2).attr("x2",t.line_height/2).attr("stroke-width",1),e.append("defs").append("marker").attr("id",eB.ARROW+"_line_ending").attr("refX",t.line_height).attr("refY",.5*t.line_height).attr("markerWidth",t.line_height).attr("markerHeight",t.line_height).attr("orient","auto").append("path").attr("d",`M0,0
      L${t.line_height},${t.line_height/2}
      M${t.line_height},${t.line_height/2}
      L0,${t.line_height}`).attr("stroke-width",1)},"insertLineEndings"),aK={ReqMarkers:eB,insertLineEndings:D5e},io={},sK=0,oK=k((e,t)=>e.insert("rect","#"+t).attr("class","req reqBox").attr("x",0).attr("y",0).attr("width",io.rect_min_width+"px").attr("height",io.rect_min_height+"px"),"newRectNode"),lK=k((e,t,r)=>{let i=io.rect_min_width/2,n=e.append("text").attr("class","req reqLabel reqTitle").attr("id",t).attr("x",i).attr("y",io.rect_padding).attr("dominant-baseline","hanging"),a=0;r.forEach(d=>{a==0?n.append("tspan").attr("text-anchor","middle").attr("x",io.rect_min_width/2).attr("dy",0).text(d):n.append("tspan").attr("text-anchor","middle").attr("x",io.rect_min_width/2).attr("dy",io.line_height*.75).text(d),a++});let s=1.5*io.rect_padding,u=a*io.line_height*.75,h=s+u;return e.append("line").attr("class","req-title-line").attr("x1","0").attr("x2",io.rect_min_width).attr("y1",h).attr("y2",h),{titleNode:n,y:h}},"newTitleNode"),uK=k((e,t,r,i)=>{let n=e.append("text").attr("class","req reqLabel").attr("id",t).attr("x",io.rect_padding).attr("y",i).attr("dominant-baseline","hanging"),a=0,s=30,u=[];return r.forEach(h=>{let d=h.length;for(;d>s&&a<3;){let p=h.substring(0,s);h=h.substring(s,h.length),d=h.length,u[u.length]=p,a++}if(a==3){let p=u[u.length-1];u[u.length-1]=p.substring(0,p.length-4)+"..."}else u[u.length]=h;a=0}),u.forEach(h=>{n.append("tspan").attr("x",io.rect_padding).attr("dy",io.line_height).text(h)}),n},"newBodyNode"),I5e=k((e,t,r,i)=>{let n=t.node().getTotalLength(),a=t.node().getPointAtLength(n*.5),s="rel"+sK;sK++;let u=e.append("text").attr("class","req relationshipLabel").attr("id",s).attr("x",a.x).attr("y",a.y).attr("text-anchor","middle").attr("dominant-baseline","middle").text(i).node().getBBox();e.insert("rect","#"+s).attr("class","req reqLabelBox").attr("x",a.x-u.width/2).attr("y",a.y-u.height/2).attr("width",u.width).attr("height",u.height).attr("fill","white").attr("fill-opacity","85%")},"addEdgeLabel"),N5e=k(function(e,t,r,i,n){let a=r.edge(Zv(t.src),Zv(t.dst)),s=vv().x(function(h){return h.x}).y(function(h){return h.y}),u=e.insert("path","#"+i).attr("class","er relationshipLine").attr("d",s(a.points)).attr("fill","none");t.type==n.db.Relationships.CONTAINS?u.attr("marker-start","url("+zr.getUrl(io.arrowMarkerAbsolute)+"#"+t.type+"_line_ending)"):(u.attr("stroke-dasharray","10,7"),u.attr("marker-end","url("+zr.getUrl(io.arrowMarkerAbsolute)+"#"+aK.ReqMarkers.ARROW+"_line_ending)")),I5e(e,u,io,`<<${t.type}>>`)},"drawRelationshipFromLayout"),O5e=k((e,t,r)=>{e.forEach((i,n)=>{n=Zv(n),Ce.info("Added new requirement: ",n);let a=r.append("g").attr("id",n),s="req-"+n,u=oK(a,s),h=[],d=lK(a,n+"_title",[`<<${i.type}>>`,`${i.name}`]);h.push(d.titleNode);let p=uK(a,n+"_body",[`Id: ${i.id}`,`Text: ${i.text}`,`Risk: ${i.risk}`,`Verification: ${i.verifyMethod}`],d.y);h.push(p);let g=u.node().getBBox();t.setNode(n,{width:g.width,height:g.height,shape:"rect",id:n})})},"drawReqs"),B5e=k((e,t,r)=>{e.forEach((i,n)=>{let a=Zv(n),s=r.append("g").attr("id",a),u="element-"+a,h=oK(s,u),d=[],p=lK(s,u+"_title",["<<Element>>",`${n}`]);d.push(p.titleNode);let g=uK(s,u+"_body",[`Type: ${i.type||"Not Specified"}`,`Doc Ref: ${i.docRef||"None"}`],p.y);d.push(g);let y=h.node().getBBox();t.setNode(a,{width:y.width,height:y.height,shape:"rect",id:a})})},"drawElements"),P5e=k((e,t)=>(e.forEach(function(r){let i=Zv(r.src),n=Zv(r.dst);t.setEdge(i,n,{relationship:r})}),e),"addRelationships"),F5e=k(function(e,t){t.nodes().forEach(function(r){r!==void 0&&t.node(r)!==void 0&&(e.select("#"+r),e.select("#"+r).attr("transform","translate("+(t.node(r).x-t.node(r).width/2)+","+(t.node(r).y-t.node(r).height/2)+" )"))})},"adjustEntities"),Zv=k(e=>e.replace(/\s/g,"").replace(/\./g,"_"),"elementString"),$5e=k((e,t,r,i)=>{io=at().requirement;let n=io.securityLevel,a;n==="sandbox"&&(a=Nr("#i"+t));let s=Nr(n==="sandbox"?a.nodes()[0].contentDocument.body:"body").select(`[id='${t}']`);aK.insertLineEndings(s,io);let u=new Vl({multigraph:!1,compound:!1,directed:!0}).setGraph({rankdir:io.layoutDirection,marginx:20,marginy:20,nodesep:100,edgesep:100,ranksep:100}).setDefaultEdgeLabel(function(){return{}}),h=i.db.getRequirements(),d=i.db.getElements(),p=i.db.getRelationships();O5e(h,u,s),B5e(d,u,s),P5e(p,u),dI(u),F5e(s,u),p.forEach(function(_){N5e(s,_,u,t,i)});let g=io.rect_padding,y=s.node().getBBox(),m=y.width+g*2,x=y.height+g*2;Oo(s,x,m,io.useMaxWidth),s.attr("viewBox",`${y.x-g} ${y.y-g} ${m} ${x}`)},"draw"),z5e={draw:$5e},G5e={parser:c5e,db:M5e,renderer:z5e,styles:R5e}}),U5e={};oi(U5e,{diagram:()=>Ywe});function tB(e,t){if(e.links==null)e.links=t;else for(let r in t)e.links[r]=t[r]}function hK(e,t){if(e.properties==null)e.properties=t;else for(let r in t)e.properties[r]=t[r]}function j5e(){on.records.currentBox=void 0}async function H5e(e,t){Or.bumpVerticalPos(10);let{startx:r,stopx:i,message:n}=t,a=zr.splitBreaks(n).length,s=No(n),u=s?await Vg(n,at()):qn.calculateTextDimensions(n,Om(St));if(!s){let g=u.height/a;t.height+=g,Or.bumpVerticalPos(g)}let h,d=u.height-10,p=u.width;if(r===i){h=Or.getVerticalPos()+d,St.rightAngles||(d+=St.boxMargin,h=Or.getVerticalPos()+d),d+=30;let g=zr.getMax(p/2,St.width/2);Or.insert(r-g,Or.getVerticalPos()-10+d,i+g,Or.getVerticalPos()+30+d)}else d+=St.boxMargin,h=Or.getVerticalPos()+d,Or.insert(r,h-10,i,h);return Or.bumpVerticalPos(d),t.height+=d,t.stopy=t.starty+t.height,Or.insert(t.fromBounds,t.starty,t.toBounds,t.stopy),h}function Ud(e,t,r,i,n){Or.bumpVerticalPos(r);let a=i;if(t.id&&t.message&&e[t.id]){let s=e[t.id].width,u=Om(St);t.message=qn.wrapLabel(`[${t.message}]`,s-2*St.wrapPadding,u),t.width=s,t.wrap=!0;let h=qn.calculateTextDimensions(t.message,u),d=zr.getMax(h.height,St.labelBoxHeight);a=i+d,Ce.debug(`${d} - ${t.message}`)}n(t),Or.bumpVerticalPos(a)}function V5e(e,t,r,i,n,a,s){function u(d,p){d.x<n.get(e.from).x?(Or.insert(t.stopx-p,t.starty,t.startx,t.stopy+d.height/2+St.noteMargin),t.stopx=t.stopx+p):(Or.insert(t.startx,t.starty,t.stopx+p,t.stopy+d.height/2+St.noteMargin),t.stopx=t.stopx-p)}k(u,"receiverAdjustment");function h(d,p){d.x<n.get(e.to).x?(Or.insert(t.startx-p,t.starty,t.stopx,t.stopy+d.height/2+St.noteMargin),t.startx=t.startx+p):(Or.insert(t.stopx,t.starty,t.startx+p,t.stopy+d.height/2+St.noteMargin),t.startx=t.startx-p)}if(k(h,"senderAdjustment"),a.get(e.to)==i){let d=n.get(e.to),p=d.type=="actor"?Nm/2+3:d.width/2+3;u(d,p),d.starty=r-d.height/2,Or.bumpVerticalPos(d.height/2)}else if(s.get(e.from)==i){let d=n.get(e.from);if(St.mirrorActors){let p=d.type=="actor"?Nm/2:d.width/2;h(d,p)}d.stopy=r-d.height/2,Or.bumpVerticalPos(d.height/2)}else if(s.get(e.to)==i){let d=n.get(e.to);if(St.mirrorActors){let p=d.type=="actor"?Nm/2+3:d.width/2+3;u(d,p)}d.stopy=r-d.height/2,Or.bumpVerticalPos(d.height/2)}}async function W5e(e,t,r){let i={};for(let n of t)if(e.get(n.to)&&e.get(n.from)){let a=e.get(n.to);if(n.placement===r.db.PLACEMENT.LEFTOF&&!a.prevActor||n.placement===r.db.PLACEMENT.RIGHTOF&&!a.nextActor)continue;let s=n.placement!==void 0,u=!s,h=s?Jv(St):Om(St),d=n.wrap?qn.wrapLabel(n.message,St.width-2*St.wrapPadding,h):n.message,p=(No(d)?await Vg(n.message,at()):qn.calculateTextDimensions(d,h)).width+2*St.wrapPadding;u&&n.from===a.nextActor?i[n.to]=zr.getMax(i[n.to]||0,p):u&&n.from===a.prevActor?i[n.from]=zr.getMax(i[n.from]||0,p):u&&n.from===n.to?(i[n.from]=zr.getMax(i[n.from]||0,p/2),i[n.to]=zr.getMax(i[n.to]||0,p/2)):n.placement===r.db.PLACEMENT.RIGHTOF?i[n.from]=zr.getMax(i[n.from]||0,p):n.placement===r.db.PLACEMENT.LEFTOF?i[a.prevActor]=zr.getMax(i[a.prevActor]||0,p):n.placement===r.db.PLACEMENT.OVER&&(a.prevActor&&(i[a.prevActor]=zr.getMax(i[a.prevActor]||0,p/2)),a.nextActor&&(i[n.from]=zr.getMax(i[n.from]||0,p/2)))}return Ce.debug("maxMessageWidthPerActor:",i),i}async function Y5e(e,t,r){let i=0;for(let a of e.keys()){let s=e.get(a);s.wrap&&(s.description=qn.wrapLabel(s.description,St.width-2*St.wrapPadding,sB(St)));let u=No(s.description)?await Vg(s.description,at()):qn.calculateTextDimensions(s.description,sB(St));s.width=s.wrap?St.width:zr.getMax(St.width,u.width+2*St.wrapPadding),s.height=s.wrap?zr.getMax(u.height,St.height):St.height,i=zr.getMax(i,s.height)}for(let a in t){let s=e.get(a);if(!s)continue;let u=e.get(s.nextActor);if(!u){let d=t[a]+St.actorMargin-s.width/2;s.margin=zr.getMax(d,St.actorMargin);continue}let h=t[a]+St.actorMargin-s.width/2-u.width/2;s.margin=zr.getMax(h,St.actorMargin)}let n=0;return r.forEach(a=>{let s=Om(St),u=a.actorKeys.reduce((p,g)=>p+=e.get(g).width+(e.get(g).margin||0),0);u-=2*St.boxTextMargin,a.wrap&&(a.name=qn.wrapLabel(a.name,u-2*St.wrapPadding,s));let h=qn.calculateTextDimensions(a.name,s);n=zr.getMax(h.height,n);let d=zr.getMax(u,h.width+2*St.wrapPadding);if(a.margin=St.boxTextMargin,u<d){let p=(d-u)/2;a.margin+=p}}),r.forEach(a=>a.textMaxHeight=n),zr.getMax(i,St.height)}var cK,rB,q5e,on,X5e,iB,K5e,Z5e,go,Q5e,J5e,ewe,twe,rwe,iwe,nwe,T5,awe,swe,owe,lwe,uwe,dK,Im,hwe,cwe,dwe,E5,pwe,fwe,pK,fK,gwe,gK,mK,mwe,yK,vK,ywe,vwe,Nm,xK,bK,xwe,_K,nB,bwe,_we,ES,Qv,wK,jd,kK,wwe,kwe,Twe,Ewe,Cwe,Swe,Awe,TK,Mwe,Lwe,Rwe,Dwe,Iwe,Nwe,Owe,EK,Bwe,aB,Pwe,mo,St,Or,Fwe,Om,Jv,sB,$we,zwe,oB,CK,SK,CS,AK,Gwe,Uwe,jwe,Hwe,Vwe,Wwe,Ywe,XXe=D(()=>{jV(),yW(),Os(),Qn(),ha(),cK=Ke(_2(),1),rB=function(){var e=k(function(he,le,ke,pe){for(ke=ke||{},pe=he.length;pe--;ke[he[pe]]=le);return ke},"o"),t=[1,2],r=[1,3],i=[1,4],n=[2,4],a=[1,9],s=[1,11],u=[1,13],h=[1,14],d=[1,16],p=[1,17],g=[1,18],y=[1,24],m=[1,25],x=[1,26],_=[1,27],E=[1,28],w=[1,29],C=[1,30],A=[1,31],M=[1,32],N=[1,33],B=[1,34],O=[1,35],L=[1,36],$=[1,37],G=[1,38],z=[1,39],F=[1,41],X=[1,42],I=[1,43],j=[1,44],H=[1,45],V=[1,46],P=[1,4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,47,48,49,50,52,53,54,59,60,61,62,70],q=[4,5,16,50,52,53],Z=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,50,52,53,54,59,60,61,62,70],J=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,49,50,52,53,54,59,60,61,62,70],ae=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,48,50,52,53,54,59,60,61,62,70],ue=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,47,50,52,53,54,59,60,61,62,70],be=[68,69,70],Le=[1,122],xe={trace:k(function(){},"trace"),yy:{},symbols_:{error:2,start:3,SPACE:4,NEWLINE:5,SD:6,document:7,line:8,statement:9,box_section:10,box_line:11,participant_statement:12,create:13,box:14,restOfLine:15,end:16,signal:17,autonumber:18,NUM:19,off:20,activate:21,actor:22,deactivate:23,note_statement:24,links_statement:25,link_statement:26,properties_statement:27,details_statement:28,title:29,legacy_title:30,acc_title:31,acc_title_value:32,acc_descr:33,acc_descr_value:34,acc_descr_multiline_value:35,loop:36,rect:37,opt:38,alt:39,else_sections:40,par:41,par_sections:42,par_over:43,critical:44,option_sections:45,break:46,option:47,and:48,else:49,participant:50,AS:51,participant_actor:52,destroy:53,note:54,placement:55,text2:56,over:57,actor_pair:58,links:59,link:60,properties:61,details:62,spaceList:63,",":64,left_of:65,right_of:66,signaltype:67,"+":68,"-":69,ACTOR:70,SOLID_OPEN_ARROW:71,DOTTED_OPEN_ARROW:72,SOLID_ARROW:73,BIDIRECTIONAL_SOLID_ARROW:74,DOTTED_ARROW:75,BIDIRECTIONAL_DOTTED_ARROW:76,SOLID_CROSS:77,DOTTED_CROSS:78,SOLID_POINT:79,DOTTED_POINT:80,TXT:81,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NEWLINE",6:"SD",13:"create",14:"box",15:"restOfLine",16:"end",18:"autonumber",19:"NUM",20:"off",21:"activate",23:"deactivate",29:"title",30:"legacy_title",31:"acc_title",32:"acc_title_value",33:"acc_descr",34:"acc_descr_value",35:"acc_descr_multiline_value",36:"loop",37:"rect",38:"opt",39:"alt",41:"par",43:"par_over",44:"critical",46:"break",47:"option",48:"and",49:"else",50:"participant",51:"AS",52:"participant_actor",53:"destroy",54:"note",57:"over",59:"links",60:"link",61:"properties",62:"details",64:",",65:"left_of",66:"right_of",68:"+",69:"-",70:"ACTOR",71:"SOLID_OPEN_ARROW",72:"DOTTED_OPEN_ARROW",73:"SOLID_ARROW",74:"BIDIRECTIONAL_SOLID_ARROW",75:"DOTTED_ARROW",76:"BIDIRECTIONAL_DOTTED_ARROW",77:"SOLID_CROSS",78:"DOTTED_CROSS",79:"SOLID_POINT",80:"DOTTED_POINT",81:"TXT"},productions_:[0,[3,2],[3,2],[3,2],[7,0],[7,2],[8,2],[8,1],[8,1],[10,0],[10,2],[11,2],[11,1],[11,1],[9,1],[9,2],[9,4],[9,2],[9,4],[9,3],[9,3],[9,2],[9,3],[9,3],[9,2],[9,2],[9,2],[9,2],[9,2],[9,1],[9,1],[9,2],[9,2],[9,1],[9,4],[9,4],[9,4],[9,4],[9,4],[9,4],[9,4],[9,4],[45,1],[45,4],[42,1],[42,4],[40,1],[40,4],[12,5],[12,3],[12,5],[12,3],[12,3],[24,4],[24,4],[25,3],[26,3],[27,3],[28,3],[63,2],[63,1],[58,3],[58,1],[55,1],[55,1],[17,5],[17,5],[17,4],[22,1],[67,1],[67,1],[67,1],[67,1],[67,1],[67,1],[67,1],[67,1],[67,1],[67,1],[56,1]],performAction:k(function(he,le,ke,pe,qe,me,st){var we=me.length-1;switch(qe){case 3:return pe.apply(me[we]),me[we];case 4:case 9:this.$=[];break;case 5:case 10:me[we-1].push(me[we]),this.$=me[we-1];break;case 6:case 7:case 11:case 12:this.$=me[we];break;case 8:case 13:this.$=[];break;case 15:me[we].type="createParticipant",this.$=me[we];break;case 16:me[we-1].unshift({type:"boxStart",boxData:pe.parseBoxData(me[we-2])}),me[we-1].push({type:"boxEnd",boxText:me[we-2]}),this.$=me[we-1];break;case 18:this.$={type:"sequenceIndex",sequenceIndex:Number(me[we-2]),sequenceIndexStep:Number(me[we-1]),sequenceVisible:!0,signalType:pe.LINETYPE.AUTONUMBER};break;case 19:this.$={type:"sequenceIndex",sequenceIndex:Number(me[we-1]),sequenceIndexStep:1,sequenceVisible:!0,signalType:pe.LINETYPE.AUTONUMBER};break;case 20:this.$={type:"sequenceIndex",sequenceVisible:!1,signalType:pe.LINETYPE.AUTONUMBER};break;case 21:this.$={type:"sequenceIndex",sequenceVisible:!0,signalType:pe.LINETYPE.AUTONUMBER};break;case 22:this.$={type:"activeStart",signalType:pe.LINETYPE.ACTIVE_START,actor:me[we-1].actor};break;case 23:this.$={type:"activeEnd",signalType:pe.LINETYPE.ACTIVE_END,actor:me[we-1].actor};break;case 29:pe.setDiagramTitle(me[we].substring(6)),this.$=me[we].substring(6);break;case 30:pe.setDiagramTitle(me[we].substring(7)),this.$=me[we].substring(7);break;case 31:this.$=me[we].trim(),pe.setAccTitle(this.$);break;case 32:case 33:this.$=me[we].trim(),pe.setAccDescription(this.$);break;case 34:me[we-1].unshift({type:"loopStart",loopText:pe.parseMessage(me[we-2]),signalType:pe.LINETYPE.LOOP_START}),me[we-1].push({type:"loopEnd",loopText:me[we-2],signalType:pe.LINETYPE.LOOP_END}),this.$=me[we-1];break;case 35:me[we-1].unshift({type:"rectStart",color:pe.parseMessage(me[we-2]),signalType:pe.LINETYPE.RECT_START}),me[we-1].push({type:"rectEnd",color:pe.parseMessage(me[we-2]),signalType:pe.LINETYPE.RECT_END}),this.$=me[we-1];break;case 36:me[we-1].unshift({type:"optStart",optText:pe.parseMessage(me[we-2]),signalType:pe.LINETYPE.OPT_START}),me[we-1].push({type:"optEnd",optText:pe.parseMessage(me[we-2]),signalType:pe.LINETYPE.OPT_END}),this.$=me[we-1];break;case 37:me[we-1].unshift({type:"altStart",altText:pe.parseMessage(me[we-2]),signalType:pe.LINETYPE.ALT_START}),me[we-1].push({type:"altEnd",signalType:pe.LINETYPE.ALT_END}),this.$=me[we-1];break;case 38:me[we-1].unshift({type:"parStart",parText:pe.parseMessage(me[we-2]),signalType:pe.LINETYPE.PAR_START}),me[we-1].push({type:"parEnd",signalType:pe.LINETYPE.PAR_END}),this.$=me[we-1];break;case 39:me[we-1].unshift({type:"parStart",parText:pe.parseMessage(me[we-2]),signalType:pe.LINETYPE.PAR_OVER_START}),me[we-1].push({type:"parEnd",signalType:pe.LINETYPE.PAR_END}),this.$=me[we-1];break;case 40:me[we-1].unshift({type:"criticalStart",criticalText:pe.parseMessage(me[we-2]),signalType:pe.LINETYPE.CRITICAL_START}),me[we-1].push({type:"criticalEnd",signalType:pe.LINETYPE.CRITICAL_END}),this.$=me[we-1];break;case 41:me[we-1].unshift({type:"breakStart",breakText:pe.parseMessage(me[we-2]),signalType:pe.LINETYPE.BREAK_START}),me[we-1].push({type:"breakEnd",optText:pe.parseMessage(me[we-2]),signalType:pe.LINETYPE.BREAK_END}),this.$=me[we-1];break;case 43:this.$=me[we-3].concat([{type:"option",optionText:pe.parseMessage(me[we-1]),signalType:pe.LINETYPE.CRITICAL_OPTION},me[we]]);break;case 45:this.$=me[we-3].concat([{type:"and",parText:pe.parseMessage(me[we-1]),signalType:pe.LINETYPE.PAR_AND},me[we]]);break;case 47:this.$=me[we-3].concat([{type:"else",altText:pe.parseMessage(me[we-1]),signalType:pe.LINETYPE.ALT_ELSE},me[we]]);break;case 48:me[we-3].draw="participant",me[we-3].type="addParticipant",me[we-3].description=pe.parseMessage(me[we-1]),this.$=me[we-3];break;case 49:me[we-1].draw="participant",me[we-1].type="addParticipant",this.$=me[we-1];break;case 50:me[we-3].draw="actor",me[we-3].type="addParticipant",me[we-3].description=pe.parseMessage(me[we-1]),this.$=me[we-3];break;case 51:me[we-1].draw="actor",me[we-1].type="addParticipant",this.$=me[we-1];break;case 52:me[we-1].type="destroyParticipant",this.$=me[we-1];break;case 53:this.$=[me[we-1],{type:"addNote",placement:me[we-2],actor:me[we-1].actor,text:me[we]}];break;case 54:me[we-2]=[].concat(me[we-1],me[we-1]).slice(0,2),me[we-2][0]=me[we-2][0].actor,me[we-2][1]=me[we-2][1].actor,this.$=[me[we-1],{type:"addNote",placement:pe.PLACEMENT.OVER,actor:me[we-2].slice(0,2),text:me[we]}];break;case 55:this.$=[me[we-1],{type:"addLinks",actor:me[we-1].actor,text:me[we]}];break;case 56:this.$=[me[we-1],{type:"addALink",actor:me[we-1].actor,text:me[we]}];break;case 57:this.$=[me[we-1],{type:"addProperties",actor:me[we-1].actor,text:me[we]}];break;case 58:this.$=[me[we-1],{type:"addDetails",actor:me[we-1].actor,text:me[we]}];break;case 61:this.$=[me[we-2],me[we]];break;case 62:this.$=me[we];break;case 63:this.$=pe.PLACEMENT.LEFTOF;break;case 64:this.$=pe.PLACEMENT.RIGHTOF;break;case 65:this.$=[me[we-4],me[we-1],{type:"addMessage",from:me[we-4].actor,to:me[we-1].actor,signalType:me[we-3],msg:me[we],activate:!0},{type:"activeStart",signalType:pe.LINETYPE.ACTIVE_START,actor:me[we-1].actor}];break;case 66:this.$=[me[we-4],me[we-1],{type:"addMessage",from:me[we-4].actor,to:me[we-1].actor,signalType:me[we-3],msg:me[we]},{type:"activeEnd",signalType:pe.LINETYPE.ACTIVE_END,actor:me[we-4].actor}];break;case 67:this.$=[me[we-3],me[we-1],{type:"addMessage",from:me[we-3].actor,to:me[we-1].actor,signalType:me[we-2],msg:me[we]}];break;case 68:this.$={type:"addParticipant",actor:me[we]};break;case 69:this.$=pe.LINETYPE.SOLID_OPEN;break;case 70:this.$=pe.LINETYPE.DOTTED_OPEN;break;case 71:this.$=pe.LINETYPE.SOLID;break;case 72:this.$=pe.LINETYPE.BIDIRECTIONAL_SOLID;break;case 73:this.$=pe.LINETYPE.DOTTED;break;case 74:this.$=pe.LINETYPE.BIDIRECTIONAL_DOTTED;break;case 75:this.$=pe.LINETYPE.SOLID_CROSS;break;case 76:this.$=pe.LINETYPE.DOTTED_CROSS;break;case 77:this.$=pe.LINETYPE.SOLID_POINT;break;case 78:this.$=pe.LINETYPE.DOTTED_POINT;break;case 79:this.$=pe.parseMessage(me[we].trim().substring(1));break}},"anonymous"),table:[{3:1,4:t,5:r,6:i},{1:[3]},{3:5,4:t,5:r,6:i},{3:6,4:t,5:r,6:i},e([1,4,5,13,14,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,50,52,53,54,59,60,61,62,70],n,{7:7}),{1:[2,1]},{1:[2,2]},{1:[2,3],4:a,5:s,8:8,9:10,12:12,13:u,14:h,17:15,18:d,21:p,22:40,23:g,24:19,25:20,26:21,27:22,28:23,29:y,30:m,31:x,33:_,35:E,36:w,37:C,38:A,39:M,41:N,43:B,44:O,46:L,50:$,52:G,53:z,54:F,59:X,60:I,61:j,62:H,70:V},e(P,[2,5]),{9:47,12:12,13:u,14:h,17:15,18:d,21:p,22:40,23:g,24:19,25:20,26:21,27:22,28:23,29:y,30:m,31:x,33:_,35:E,36:w,37:C,38:A,39:M,41:N,43:B,44:O,46:L,50:$,52:G,53:z,54:F,59:X,60:I,61:j,62:H,70:V},e(P,[2,7]),e(P,[2,8]),e(P,[2,14]),{12:48,50:$,52:G,53:z},{15:[1,49]},{5:[1,50]},{5:[1,53],19:[1,51],20:[1,52]},{22:54,70:V},{22:55,70:V},{5:[1,56]},{5:[1,57]},{5:[1,58]},{5:[1,59]},{5:[1,60]},e(P,[2,29]),e(P,[2,30]),{32:[1,61]},{34:[1,62]},e(P,[2,33]),{15:[1,63]},{15:[1,64]},{15:[1,65]},{15:[1,66]},{15:[1,67]},{15:[1,68]},{15:[1,69]},{15:[1,70]},{22:71,70:V},{22:72,70:V},{22:73,70:V},{67:74,71:[1,75],72:[1,76],73:[1,77],74:[1,78],75:[1,79],76:[1,80],77:[1,81],78:[1,82],79:[1,83],80:[1,84]},{55:85,57:[1,86],65:[1,87],66:[1,88]},{22:89,70:V},{22:90,70:V},{22:91,70:V},{22:92,70:V},e([5,51,64,71,72,73,74,75,76,77,78,79,80,81],[2,68]),e(P,[2,6]),e(P,[2,15]),e(q,[2,9],{10:93}),e(P,[2,17]),{5:[1,95],19:[1,94]},{5:[1,96]},e(P,[2,21]),{5:[1,97]},{5:[1,98]},e(P,[2,24]),e(P,[2,25]),e(P,[2,26]),e(P,[2,27]),e(P,[2,28]),e(P,[2,31]),e(P,[2,32]),e(Z,n,{7:99}),e(Z,n,{7:100}),e(Z,n,{7:101}),e(J,n,{40:102,7:103}),e(ae,n,{42:104,7:105}),e(ae,n,{7:105,42:106}),e(ue,n,{45:107,7:108}),e(Z,n,{7:109}),{5:[1,111],51:[1,110]},{5:[1,113],51:[1,112]},{5:[1,114]},{22:117,68:[1,115],69:[1,116],70:V},e(be,[2,69]),e(be,[2,70]),e(be,[2,71]),e(be,[2,72]),e(be,[2,73]),e(be,[2,74]),e(be,[2,75]),e(be,[2,76]),e(be,[2,77]),e(be,[2,78]),{22:118,70:V},{22:120,58:119,70:V},{70:[2,63]},{70:[2,64]},{56:121,81:Le},{56:123,81:Le},{56:124,81:Le},{56:125,81:Le},{4:[1,128],5:[1,130],11:127,12:129,16:[1,126],50:$,52:G,53:z},{5:[1,131]},e(P,[2,19]),e(P,[2,20]),e(P,[2,22]),e(P,[2,23]),{4:a,5:s,8:8,9:10,12:12,13:u,14:h,16:[1,132],17:15,18:d,21:p,22:40,23:g,24:19,25:20,26:21,27:22,28:23,29:y,30:m,31:x,33:_,35:E,36:w,37:C,38:A,39:M,41:N,43:B,44:O,46:L,50:$,52:G,53:z,54:F,59:X,60:I,61:j,62:H,70:V},{4:a,5:s,8:8,9:10,12:12,13:u,14:h,16:[1,133],17:15,18:d,21:p,22:40,23:g,24:19,25:20,26:21,27:22,28:23,29:y,30:m,31:x,33:_,35:E,36:w,37:C,38:A,39:M,41:N,43:B,44:O,46:L,50:$,52:G,53:z,54:F,59:X,60:I,61:j,62:H,70:V},{4:a,5:s,8:8,9:10,12:12,13:u,14:h,16:[1,134],17:15,18:d,21:p,22:40,23:g,24:19,25:20,26:21,27:22,28:23,29:y,30:m,31:x,33:_,35:E,36:w,37:C,38:A,39:M,41:N,43:B,44:O,46:L,50:$,52:G,53:z,54:F,59:X,60:I,61:j,62:H,70:V},{16:[1,135]},{4:a,5:s,8:8,9:10,12:12,13:u,14:h,16:[2,46],17:15,18:d,21:p,22:40,23:g,24:19,25:20,26:21,27:22,28:23,29:y,30:m,31:x,33:_,35:E,36:w,37:C,38:A,39:M,41:N,43:B,44:O,46:L,49:[1,136],50:$,52:G,53:z,54:F,59:X,60:I,61:j,62:H,70:V},{16:[1,137]},{4:a,5:s,8:8,9:10,12:12,13:u,14:h,16:[2,44],17:15,18:d,21:p,22:40,23:g,24:19,25:20,26:21,27:22,28:23,29:y,30:m,31:x,33:_,35:E,36:w,37:C,38:A,39:M,41:N,43:B,44:O,46:L,48:[1,138],50:$,52:G,53:z,54:F,59:X,60:I,61:j,62:H,70:V},{16:[1,139]},{16:[1,140]},{4:a,5:s,8:8,9:10,12:12,13:u,14:h,16:[2,42],17:15,18:d,21:p,22:40,23:g,24:19,25:20,26:21,27:22,28:23,29:y,30:m,31:x,33:_,35:E,36:w,37:C,38:A,39:M,41:N,43:B,44:O,46:L,47:[1,141],50:$,52:G,53:z,54:F,59:X,60:I,61:j,62:H,70:V},{4:a,5:s,8:8,9:10,12:12,13:u,14:h,16:[1,142],17:15,18:d,21:p,22:40,23:g,24:19,25:20,26:21,27:22,28:23,29:y,30:m,31:x,33:_,35:E,36:w,37:C,38:A,39:M,41:N,43:B,44:O,46:L,50:$,52:G,53:z,54:F,59:X,60:I,61:j,62:H,70:V},{15:[1,143]},e(P,[2,49]),{15:[1,144]},e(P,[2,51]),e(P,[2,52]),{22:145,70:V},{22:146,70:V},{56:147,81:Le},{56:148,81:Le},{56:149,81:Le},{64:[1,150],81:[2,62]},{5:[2,55]},{5:[2,79]},{5:[2,56]},{5:[2,57]},{5:[2,58]},e(P,[2,16]),e(q,[2,10]),{12:151,50:$,52:G,53:z},e(q,[2,12]),e(q,[2,13]),e(P,[2,18]),e(P,[2,34]),e(P,[2,35]),e(P,[2,36]),e(P,[2,37]),{15:[1,152]},e(P,[2,38]),{15:[1,153]},e(P,[2,39]),e(P,[2,40]),{15:[1,154]},e(P,[2,41]),{5:[1,155]},{5:[1,156]},{56:157,81:Le},{56:158,81:Le},{5:[2,67]},{5:[2,53]},{5:[2,54]},{22:159,70:V},e(q,[2,11]),e(J,n,{7:103,40:160}),e(ae,n,{7:105,42:161}),e(ue,n,{7:108,45:162}),e(P,[2,48]),e(P,[2,50]),{5:[2,65]},{5:[2,66]},{81:[2,61]},{16:[2,47]},{16:[2,45]},{16:[2,43]}],defaultActions:{5:[2,1],6:[2,2],87:[2,63],88:[2,64],121:[2,55],122:[2,79],123:[2,56],124:[2,57],125:[2,58],147:[2,67],148:[2,53],149:[2,54],157:[2,65],158:[2,66],159:[2,61],160:[2,47],161:[2,45],162:[2,43]},parseError:k(function(he,le){if(le.recoverable)this.trace(he);else{var ke=new Error(he);throw ke.hash=le,ke}},"parseError"),parse:k(function(he){var le=this,ke=[0],pe=[],qe=[null],me=[],st=this.table,we="",Et=0,wt=0,Tt=0,er=2,tr=1,kr=me.slice.call(arguments,1),fr=Object.create(this.lexer),Mt={yy:{}};for(var Kt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Kt)&&(Mt.yy[Kt]=this.yy[Kt]);fr.setInput(he,Mt.yy),Mt.yy.lexer=fr,Mt.yy.parser=this,typeof fr.yylloc>"u"&&(fr.yylloc={});var ne=fr.yylloc;me.push(ne);var He=fr.options&&fr.options.ranges;typeof Mt.yy.parseError=="function"?this.parseError=Mt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Te(Di){ke.length=ke.length-2*Di,qe.length=qe.length-Di,me.length=me.length-Di}k(Te,"popStack");function Qe(){var Di;return Di=pe.pop()||fr.lex()||tr,typeof Di!="number"&&(Di instanceof Array&&(pe=Di,Di=pe.pop()),Di=le.symbols_[Di]||Di),Di}k(Qe,"lex");for(var ce,Ut,fe,ze,yt,bt,At={},ct,zt,ft,Pr;;){if(fe=ke[ke.length-1],this.defaultActions[fe]?ze=this.defaultActions[fe]:((ce===null||typeof ce>"u")&&(ce=Qe()),ze=st[fe]&&st[fe][ce]),typeof ze>"u"||!ze.length||!ze[0]){var Mi="";Pr=[];for(ct in st[fe])this.terminals_[ct]&&ct>er&&Pr.push("'"+this.terminals_[ct]+"'");fr.showPosition?Mi="Parse error on line "+(Et+1)+`:
`+fr.showPosition()+`
Expecting `+Pr.join(", ")+", got '"+(this.terminals_[ce]||ce)+"'":Mi="Parse error on line "+(Et+1)+": Unexpected "+(ce==tr?"end of input":"'"+(this.terminals_[ce]||ce)+"'"),this.parseError(Mi,{text:fr.match,token:this.terminals_[ce]||ce,line:fr.yylineno,loc:ne,expected:Pr})}if(ze[0]instanceof Array&&ze.length>1)throw new Error("Parse Error: multiple actions possible at state: "+fe+", token: "+ce);switch(ze[0]){case 1:ke.push(ce),qe.push(fr.yytext),me.push(fr.yylloc),ke.push(ze[1]),ce=null,Ut?(ce=Ut,Ut=null):(wt=fr.yyleng,we=fr.yytext,Et=fr.yylineno,ne=fr.yylloc,Tt>0&&Tt--);break;case 2:if(zt=this.productions_[ze[1]][1],At.$=qe[qe.length-zt],At._$={first_line:me[me.length-(zt||1)].first_line,last_line:me[me.length-1].last_line,first_column:me[me.length-(zt||1)].first_column,last_column:me[me.length-1].last_column},He&&(At._$.range=[me[me.length-(zt||1)].range[0],me[me.length-1].range[1]]),bt=this.performAction.apply(At,[we,wt,Et,Mt.yy,ze[1],qe,me].concat(kr)),typeof bt<"u")return bt;zt&&(ke=ke.slice(0,-1*zt*2),qe=qe.slice(0,-1*zt),me=me.slice(0,-1*zt)),ke.push(this.productions_[ze[1]][0]),qe.push(At.$),me.push(At._$),ft=st[ke[ke.length-2]][ke[ke.length-1]],ke.push(ft);break;case 3:return!0}}return!0},"parse")},Ae=function(){var he={EOF:1,parseError:k(function(le,ke){if(this.yy.parser)this.yy.parser.parseError(le,ke);else throw new Error(le)},"parseError"),setInput:k(function(le,ke){return this.yy=ke||this.yy||{},this._input=le,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:k(function(){var le=this._input[0];this.yytext+=le,this.yyleng++,this.offset++,this.match+=le,this.matched+=le;var ke=le.match(/(?:\r\n?|\n).*/g);return ke?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),le},"input"),unput:k(function(le){var ke=le.length,pe=le.split(/(?:\r\n?|\n)/g);this._input=le+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-ke),this.offset-=ke;var qe=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),pe.length-1&&(this.yylineno-=pe.length-1);var me=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:pe?(pe.length===qe.length?this.yylloc.first_column:0)+qe[qe.length-pe.length].length-pe[0].length:this.yylloc.first_column-ke},this.options.ranges&&(this.yylloc.range=[me[0],me[0]+this.yyleng-ke]),this.yyleng=this.yytext.length,this},"unput"),more:k(function(){return this._more=!0,this},"more"),reject:k(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:k(function(le){this.unput(this.match.slice(le))},"less"),pastInput:k(function(){var le=this.matched.substr(0,this.matched.length-this.match.length);return(le.length>20?"...":"")+le.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:k(function(){var le=this.match;return le.length<20&&(le+=this._input.substr(0,20-le.length)),(le.substr(0,20)+(le.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:k(function(){var le=this.pastInput(),ke=new Array(le.length+1).join("-");return le+this.upcomingInput()+`
`+ke+"^"},"showPosition"),test_match:k(function(le,ke){var pe,qe,me;if(this.options.backtrack_lexer&&(me={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(me.yylloc.range=this.yylloc.range.slice(0))),qe=le[0].match(/(?:\r\n?|\n).*/g),qe&&(this.yylineno+=qe.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:qe?qe[qe.length-1].length-qe[qe.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+le[0].length},this.yytext+=le[0],this.match+=le[0],this.matches=le,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(le[0].length),this.matched+=le[0],pe=this.performAction.call(this,this.yy,this,ke,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),pe)return pe;if(this._backtrack){for(var st in me)this[st]=me[st];return!1}return!1},"test_match"),next:k(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var le,ke,pe,qe;this._more||(this.yytext="",this.match="");for(var me=this._currentRules(),st=0;st<me.length;st++)if(pe=this._input.match(this.rules[me[st]]),pe&&(!ke||pe[0].length>ke[0].length)){if(ke=pe,qe=st,this.options.backtrack_lexer){if(le=this.test_match(pe,me[st]),le!==!1)return le;if(this._backtrack){ke=!1;continue}else return!1}else if(!this.options.flex)break}return ke?(le=this.test_match(ke,me[qe]),le!==!1?le:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:k(function(){var le=this.next();return le||this.lex()},"lex"),begin:k(function(le){this.conditionStack.push(le)},"begin"),popState:k(function(){var le=this.conditionStack.length-1;return le>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:k(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:k(function(le){return le=this.conditionStack.length-1-Math.abs(le||0),le>=0?this.conditionStack[le]:"INITIAL"},"topState"),pushState:k(function(le){this.begin(le)},"pushState"),stateStackSize:k(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:k(function(le,ke,pe,qe){var me=qe;switch(pe){case 0:return 5;case 1:break;case 2:break;case 3:break;case 4:break;case 5:break;case 6:return 19;case 7:return this.begin("LINE"),14;case 8:return this.begin("ID"),50;case 9:return this.begin("ID"),52;case 10:return 13;case 11:return this.begin("ID"),53;case 12:return ke.yytext=ke.yytext.trim(),this.begin("ALIAS"),70;case 13:return this.popState(),this.popState(),this.begin("LINE"),51;case 14:return this.popState(),this.popState(),5;case 15:return this.begin("LINE"),36;case 16:return this.begin("LINE"),37;case 17:return this.begin("LINE"),38;case 18:return this.begin("LINE"),39;case 19:return this.begin("LINE"),49;case 20:return this.begin("LINE"),41;case 21:return this.begin("LINE"),43;case 22:return this.begin("LINE"),48;case 23:return this.begin("LINE"),44;case 24:return this.begin("LINE"),47;case 25:return this.begin("LINE"),46;case 26:return this.popState(),15;case 27:return 16;case 28:return 65;case 29:return 66;case 30:return 59;case 31:return 60;case 32:return 61;case 33:return 62;case 34:return 57;case 35:return 54;case 36:return this.begin("ID"),21;case 37:return this.begin("ID"),23;case 38:return 29;case 39:return 30;case 40:return this.begin("acc_title"),31;case 41:return this.popState(),"acc_title_value";case 42:return this.begin("acc_descr"),33;case 43:return this.popState(),"acc_descr_value";case 44:this.begin("acc_descr_multiline");break;case 45:this.popState();break;case 46:return"acc_descr_multiline_value";case 47:return 6;case 48:return 18;case 49:return 20;case 50:return 64;case 51:return 5;case 52:return ke.yytext=ke.yytext.trim(),70;case 53:return 73;case 54:return 74;case 55:return 75;case 56:return 76;case 57:return 71;case 58:return 72;case 59:return 77;case 60:return 78;case 61:return 79;case 62:return 80;case 63:return 81;case 64:return 68;case 65:return 69;case 66:return 5;case 67:return"INVALID"}},"anonymous"),rules:[/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[0-9]+(?=[ \n]+))/i,/^(?:box\b)/i,/^(?:participant\b)/i,/^(?:actor\b)/i,/^(?:create\b)/i,/^(?:destroy\b)/i,/^(?:[^\<->\->:\n,;]+?([\-]*[^\<->\->:\n,;]+?)*?(?=((?!\n)\s)+as(?!\n)\s|[#\n;]|$))/i,/^(?:as\b)/i,/^(?:(?:))/i,/^(?:loop\b)/i,/^(?:rect\b)/i,/^(?:opt\b)/i,/^(?:alt\b)/i,/^(?:else\b)/i,/^(?:par\b)/i,/^(?:par_over\b)/i,/^(?:and\b)/i,/^(?:critical\b)/i,/^(?:option\b)/i,/^(?:break\b)/i,/^(?:(?:[:]?(?:no)?wrap)?[^#\n;]*)/i,/^(?:end\b)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:links\b)/i,/^(?:link\b)/i,/^(?:properties\b)/i,/^(?:details\b)/i,/^(?:over\b)/i,/^(?:note\b)/i,/^(?:activate\b)/i,/^(?:deactivate\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:title:\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:sequenceDiagram\b)/i,/^(?:autonumber\b)/i,/^(?:off\b)/i,/^(?:,)/i,/^(?:;)/i,/^(?:[^\+\<->\->:\n,;]+((?!(-x|--x|-\)|--\)))[\-]*[^\+\<->\->:\n,;]+)*)/i,/^(?:->>)/i,/^(?:<<->>)/i,/^(?:-->>)/i,/^(?:<<-->>)/i,/^(?:->)/i,/^(?:-->)/i,/^(?:-[x])/i,/^(?:--[x])/i,/^(?:-[\)])/i,/^(?:--[\)])/i,/^(?::(?:(?:no)?wrap)?[^#\n;]+)/i,/^(?:\+)/i,/^(?:-)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[45,46],inclusive:!1},acc_descr:{rules:[43],inclusive:!1},acc_title:{rules:[41],inclusive:!1},ID:{rules:[2,3,12],inclusive:!1},ALIAS:{rules:[2,3,13,14],inclusive:!1},LINE:{rules:[2,3,26],inclusive:!1},INITIAL:{rules:[0,1,3,4,5,6,7,8,9,10,11,15,16,17,18,19,20,21,22,23,24,25,27,28,29,30,31,32,33,34,35,36,37,38,39,40,42,44,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67],inclusive:!0}}};return he}();xe.lexer=Ae;function oe(){this.yy={}}return k(oe,"Parser"),oe.prototype=xe,xe.Parser=oe,new oe}(),rB.parser=rB,q5e=rB,on=new PI(()=>({prevActor:void 0,actors:new Map,createdActors:new Map,destroyedActors:new Map,boxes:[],messages:[],notes:[],sequenceNumbersEnabled:!1,wrapEnabled:void 0,currentBox:void 0,lastCreated:void 0,lastDestroyed:void 0})),X5e=k(function(e){on.records.boxes.push({name:e.text,wrap:e.wrap??Im(),fill:e.color,actorKeys:[]}),on.records.currentBox=on.records.boxes.slice(-1)[0]},"addBox"),iB=k(function(e,t,r,i){let n=on.records.currentBox,a=on.records.actors.get(e);if(a){if(on.records.currentBox&&a.box&&on.records.currentBox!==a.box)throw new Error(`A same participant should only be defined in one Box: ${a.name} can't be in '${a.box.name}' and in '${on.records.currentBox.name}' at the same time.`);if(n=a.box?a.box:on.records.currentBox,a.box=n,a&&t===a.name&&r==null)return}if(r?.text==null&&(r={text:t,type:i}),(i==null||r.text==null)&&(r={text:t,type:i}),on.records.actors.set(e,{box:n,name:t,description:r.text,wrap:r.wrap??Im(),prevActor:on.records.prevActor,links:{},properties:{},actorCnt:null,rectData:null,type:i??"participant"}),on.records.prevActor){let s=on.records.actors.get(on.records.prevActor);s&&(s.nextActor=e)}on.records.currentBox&&on.records.currentBox.actorKeys.push(e),on.records.prevActor=e},"addActor"),K5e=k(e=>{let t,r=0;if(!e)return 0;for(t=0;t<on.records.messages.length;t++)on.records.messages[t].type===E5.ACTIVE_START&&on.records.messages[t].from===e&&r++,on.records.messages[t].type===E5.ACTIVE_END&&on.records.messages[t].from===e&&r--;return r},"activationCount"),Z5e=k(function(e,t,r,i){on.records.messages.push({from:e,to:t,message:r.text,wrap:r.wrap??Im(),answer:i})},"addMessage"),go=k(function(e,t,r,i,n=!1){if(i===E5.ACTIVE_END&&K5e(e??"")<1){let a=new Error("Trying to inactivate an inactive participant ("+e+")");throw a.hash={text:"->>-",token:"->>-",line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["'ACTIVE_PARTICIPANT'"]},a}return on.records.messages.push({from:e,to:t,message:r?.text??"",wrap:r?.wrap??Im(),type:i,activate:n}),!0},"addSignal"),Q5e=k(function(){return on.records.boxes.length>0},"hasAtLeastOneBox"),J5e=k(function(){return on.records.boxes.some(e=>e.name)},"hasAtLeastOneBoxWithTitle"),ewe=k(function(){return on.records.messages},"getMessages"),twe=k(function(){return on.records.boxes},"getBoxes"),rwe=k(function(){return on.records.actors},"getActors"),iwe=k(function(){return on.records.createdActors},"getCreatedActors"),nwe=k(function(){return on.records.destroyedActors},"getDestroyedActors"),T5=k(function(e){return on.records.actors.get(e)},"getActor"),awe=k(function(){return[...on.records.actors.keys()]},"getActorKeys"),swe=k(function(){on.records.sequenceNumbersEnabled=!0},"enableSequenceNumbers"),owe=k(function(){on.records.sequenceNumbersEnabled=!1},"disableSequenceNumbers"),lwe=k(()=>on.records.sequenceNumbersEnabled,"showSequenceNumbers"),uwe=k(function(e){on.records.wrapEnabled=e},"setWrap"),dK=k(e=>{if(e===void 0)return{};e=e.trim();let t=/^:?wrap:/.exec(e)!==null?!0:/^:?nowrap:/.exec(e)!==null?!1:void 0;return{cleanedText:(t===void 0?e:e.replace(/^:?(?:no)?wrap:/,"")).trim(),wrap:t}},"extractWrap"),Im=k(()=>on.records.wrapEnabled!==void 0?on.records.wrapEnabled:at().sequence?.wrap??!1,"autoWrap"),hwe=k(function(){on.reset(),ho()},"clear"),cwe=k(function(e){let t=e.trim(),{wrap:r,cleanedText:i}=dK(t),n={text:i,wrap:r};return Ce.debug(`parseMessage: ${JSON.stringify(n)}`),n},"parseMessage"),dwe=k(function(e){let t=/^((?:rgba?|hsla?)\s*\(.*\)|\w*)(.*)$/.exec(e),r=t?.[1]?t[1].trim():"transparent",i=t?.[2]?t[2].trim():void 0;if(window?.CSS)window.CSS.supports("color",r)||(r="transparent",i=e.trim());else{let s=new Option().style;s.color=r,s.color!==r&&(r="transparent",i=e.trim())}let{wrap:n,cleanedText:a}=dK(i);return{text:a?Da(a,at()):void 0,color:r,wrap:n}},"parseBoxData"),E5={SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25,AUTONUMBER:26,CRITICAL_START:27,CRITICAL_OPTION:28,CRITICAL_END:29,BREAK_START:30,BREAK_END:31,PAR_OVER_START:32,BIDIRECTIONAL_SOLID:33,BIDIRECTIONAL_DOTTED:34},pwe={FILLED:0,OPEN:1},fwe={LEFTOF:0,RIGHTOF:1,OVER:2},pK=k(function(e,t,r){let i={actor:e,placement:t,message:r.text,wrap:r.wrap??Im()},n=[].concat(e,e);on.records.notes.push(i),on.records.messages.push({from:n[0],to:n[1],message:r.text,wrap:r.wrap??Im(),type:E5.NOTE,placement:t})},"addNote"),fK=k(function(e,t){let r=T5(e);try{let i=Da(t.text,at());i=i.replace(/&amp;/g,"&"),i=i.replace(/&equals;/g,"=");let n=JSON.parse(i);tB(r,n)}catch(i){Ce.error("error while parsing actor link text",i)}},"addLinks"),gwe=k(function(e,t){let r=T5(e);try{let i={},n=Da(t.text,at()),a=n.indexOf("@");n=n.replace(/&amp;/g,"&"),n=n.replace(/&equals;/g,"=");let s=n.slice(0,a-1).trim(),u=n.slice(a+1).trim();i[s]=u,tB(r,i)}catch(i){Ce.error("error while parsing actor link text",i)}},"addALink"),k(tB,"insertLinks"),gK=k(function(e,t){let r=T5(e);try{let i=Da(t.text,at()),n=JSON.parse(i);hK(r,n)}catch(i){Ce.error("error while parsing actor properties text",i)}},"addProperties"),k(hK,"insertProperties"),k(j5e,"boxEnd"),mK=k(function(e,t){let r=T5(e),i=document.getElementById(t.text);try{let n=i.innerHTML,a=JSON.parse(n);a.properties&&hK(r,a.properties),a.links&&tB(r,a.links)}catch(n){Ce.error("error while parsing actor details text",n)}},"addDetails"),mwe=k(function(e,t){if(e?.properties!==void 0)return e.properties[t]},"getActorProperty"),yK=k(function(e){if(Array.isArray(e))e.forEach(function(t){yK(t)});else switch(e.type){case"sequenceIndex":on.records.messages.push({from:void 0,to:void 0,message:{start:e.sequenceIndex,step:e.sequenceIndexStep,visible:e.sequenceVisible},wrap:!1,type:e.signalType});break;case"addParticipant":iB(e.actor,e.actor,e.description,e.draw);break;case"createParticipant":if(on.records.actors.has(e.actor))throw new Error("It is not possible to have actors with the same id, even if one is destroyed before the next is created. Use 'AS' aliases to simulate the behavior");on.records.lastCreated=e.actor,iB(e.actor,e.actor,e.description,e.draw),on.records.createdActors.set(e.actor,on.records.messages.length);break;case"destroyParticipant":on.records.lastDestroyed=e.actor,on.records.destroyedActors.set(e.actor,on.records.messages.length);break;case"activeStart":go(e.actor,void 0,void 0,e.signalType);break;case"activeEnd":go(e.actor,void 0,void 0,e.signalType);break;case"addNote":pK(e.actor,e.placement,e.text);break;case"addLinks":fK(e.actor,e.text);break;case"addALink":gwe(e.actor,e.text);break;case"addProperties":gK(e.actor,e.text);break;case"addDetails":mK(e.actor,e.text);break;case"addMessage":if(on.records.lastCreated){if(e.to!==on.records.lastCreated)throw new Error("The created participant "+on.records.lastCreated.name+" does not have an associated creating message after its declaration. Please check the sequence diagram.");on.records.lastCreated=void 0}else if(on.records.lastDestroyed){if(e.to!==on.records.lastDestroyed&&e.from!==on.records.lastDestroyed)throw new Error("The destroyed participant "+on.records.lastDestroyed.name+" does not have an associated destroying message after its declaration. Please check the sequence diagram.");on.records.lastDestroyed=void 0}go(e.from,e.to,e.msg,e.signalType,e.activate);break;case"boxStart":X5e(e.boxData);break;case"boxEnd":j5e();break;case"loopStart":go(void 0,void 0,e.loopText,e.signalType);break;case"loopEnd":go(void 0,void 0,void 0,e.signalType);break;case"rectStart":go(void 0,void 0,e.color,e.signalType);break;case"rectEnd":go(void 0,void 0,void 0,e.signalType);break;case"optStart":go(void 0,void 0,e.optText,e.signalType);break;case"optEnd":go(void 0,void 0,void 0,e.signalType);break;case"altStart":go(void 0,void 0,e.altText,e.signalType);break;case"else":go(void 0,void 0,e.altText,e.signalType);break;case"altEnd":go(void 0,void 0,void 0,e.signalType);break;case"setAccTitle":Ks(e.text);break;case"parStart":go(void 0,void 0,e.parText,e.signalType);break;case"and":go(void 0,void 0,e.parText,e.signalType);break;case"parEnd":go(void 0,void 0,void 0,e.signalType);break;case"criticalStart":go(void 0,void 0,e.criticalText,e.signalType);break;case"option":go(void 0,void 0,e.optionText,e.signalType);break;case"criticalEnd":go(void 0,void 0,void 0,e.signalType);break;case"breakStart":go(void 0,void 0,e.breakText,e.signalType);break;case"breakEnd":go(void 0,void 0,void 0,e.signalType);break}},"apply"),vK={addActor:iB,addMessage:Z5e,addSignal:go,addLinks:fK,addDetails:mK,addProperties:gK,autoWrap:Im,setWrap:uwe,enableSequenceNumbers:swe,disableSequenceNumbers:owe,showSequenceNumbers:lwe,getMessages:ewe,getActors:rwe,getCreatedActors:iwe,getDestroyedActors:nwe,getActor:T5,getActorKeys:awe,getActorProperty:mwe,getAccTitle:Bo,getBoxes:twe,getDiagramTitle:$o,setDiagramTitle:Fo,getConfig:k(()=>at().sequence,"getConfig"),clear:hwe,parseMessage:cwe,parseBoxData:dwe,LINETYPE:E5,ARROWTYPE:pwe,PLACEMENT:fwe,addNote:pK,setAccTitle:Ks,apply:yK,setAccDescription:_o,getAccDescription:Po,hasAtLeastOneBox:Q5e,hasAtLeastOneBoxWithTitle:J5e},ywe=k(e=>`.actor {
    stroke: ${e.actorBorder};
    fill: ${e.actorBkg};
  }

  text.actor > tspan {
    fill: ${e.actorTextColor};
    stroke: none;
  }

  .actor-line {
    stroke: ${e.actorLineColor};
  }

  .messageLine0 {
    stroke-width: 1.5;
    stroke-dasharray: none;
    stroke: ${e.signalColor};
  }

  .messageLine1 {
    stroke-width: 1.5;
    stroke-dasharray: 2, 2;
    stroke: ${e.signalColor};
  }

  #arrowhead path {
    fill: ${e.signalColor};
    stroke: ${e.signalColor};
  }

  .sequenceNumber {
    fill: ${e.sequenceNumberColor};
  }

  #sequencenumber {
    fill: ${e.signalColor};
  }

  #crosshead path {
    fill: ${e.signalColor};
    stroke: ${e.signalColor};
  }

  .messageText {
    fill: ${e.signalTextColor};
    stroke: none;
  }

  .labelBox {
    stroke: ${e.labelBoxBorderColor};
    fill: ${e.labelBoxBkgColor};
  }

  .labelText, .labelText > tspan {
    fill: ${e.labelTextColor};
    stroke: none;
  }

  .loopText, .loopText > tspan {
    fill: ${e.loopTextColor};
    stroke: none;
  }

  .loopLine {
    stroke-width: 2px;
    stroke-dasharray: 2, 2;
    stroke: ${e.labelBoxBorderColor};
    fill: ${e.labelBoxBorderColor};
  }

  .note {
    //stroke: #decc93;
    stroke: ${e.noteBorderColor};
    fill: ${e.noteBkgColor};
  }

  .noteText, .noteText > tspan {
    fill: ${e.noteTextColor};
    stroke: none;
  }

  .activation0 {
    fill: ${e.activationBkgColor};
    stroke: ${e.activationBorderColor};
  }

  .activation1 {
    fill: ${e.activationBkgColor};
    stroke: ${e.activationBorderColor};
  }

  .activation2 {
    fill: ${e.activationBkgColor};
    stroke: ${e.activationBorderColor};
  }

  .actorPopupMenu {
    position: absolute;
  }

  .actorPopupMenuPanel {
    position: absolute;
    fill: ${e.actorBkg};
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    filter: drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4));
}
  .actor-man line {
    stroke: ${e.actorBorder};
    fill: ${e.actorBkg};
  }
  .actor-man circle, line {
    stroke: ${e.actorBorder};
    fill: ${e.actorBkg};
    stroke-width: 2px;
  }
`,"getStyles"),vwe=ywe,Nm=18*2,xK="actor-top",bK="actor-bottom",xwe="actor-box",_K="actor-man",nB=k(function(e,t){return u7(e,t)},"drawRect"),bwe=k(function(e,t,r,i,n){if(t.links===void 0||t.links===null||Object.keys(t.links).length===0)return{height:0,width:0};let a=t.links,s=t.actorCnt,u=t.rectData;var h="none";n&&(h="block !important");let d=e.append("g");d.attr("id","actor"+s+"_popup"),d.attr("class","actorPopupMenu"),d.attr("display",h);var p="";u.class!==void 0&&(p=" "+u.class);let g=u.width>r?u.width:r,y=d.append("rect");if(y.attr("class","actorPopupMenuPanel"+p),y.attr("x",u.x),y.attr("y",u.height),y.attr("fill",u.fill),y.attr("stroke",u.stroke),y.attr("width",g),y.attr("height",u.height),y.attr("rx",u.rx),y.attr("ry",u.ry),a!=null){var m=20;for(let E in a){var x=d.append("a"),_=(0,cK.sanitizeUrl)(a[E]);x.attr("xlink:href",_),x.attr("target","_blank"),Pwe(i)(E,x,u.x+10,u.height+m,g,20,{class:"actor"},i),m+=30}}return y.attr("height",m),{height:u.height+m,width:g}},"drawPopup"),_we=k(function(e){return"var pu = document.getElementById('"+e+"'); if (pu != null) { pu.style.display = pu.style.display == 'block' ? 'none' : 'block'; }"},"popupMenuToggle"),ES=k(async function(e,t,r=null){let i=e.append("foreignObject"),n=await Wg(t.text,cs()),a=i.append("xhtml:div").attr("style","width: fit-content;").attr("xmlns","http://www.w3.org/1999/xhtml").html(n).node().getBoundingClientRect();if(i.attr("height",Math.round(a.height)).attr("width",Math.round(a.width)),t.class==="noteText"){let s=e.node().firstChild;s.setAttribute("height",a.height+2*t.textMargin);let u=s.getBBox();i.attr("x",Math.round(u.x+u.width/2-a.width/2)).attr("y",Math.round(u.y+u.height/2-a.height/2))}else if(r){let{startx:s,stopx:u,starty:h}=r;if(s>u){let d=s;s=u,u=d}i.attr("x",Math.round(s+Math.abs(s-u)/2-a.width/2)),t.class==="loopText"?i.attr("y",Math.round(h)):i.attr("y",Math.round(h-a.height))}return[i]},"drawKatex"),Qv=k(function(e,t){let r=0,i=0,n=t.text.split(zr.lineBreakRegex),[a,s]=gf(t.fontSize),u=[],h=0,d=k(()=>t.y,"yfunc");if(t.valign!==void 0&&t.textMargin!==void 0&&t.textMargin>0)switch(t.valign){case"top":case"start":d=k(()=>Math.round(t.y+t.textMargin),"yfunc");break;case"middle":case"center":d=k(()=>Math.round(t.y+(r+i+t.textMargin)/2),"yfunc");break;case"bottom":case"end":d=k(()=>Math.round(t.y+(r+i+2*t.textMargin)-t.textMargin),"yfunc");break}if(t.anchor!==void 0&&t.textMargin!==void 0&&t.width!==void 0)switch(t.anchor){case"left":case"start":t.x=Math.round(t.x+t.textMargin),t.anchor="start",t.dominantBaseline="middle",t.alignmentBaseline="middle";break;case"middle":case"center":t.x=Math.round(t.x+t.width/2),t.anchor="middle",t.dominantBaseline="middle",t.alignmentBaseline="middle";break;case"right":case"end":t.x=Math.round(t.x+t.width-t.textMargin),t.anchor="end",t.dominantBaseline="middle",t.alignmentBaseline="middle";break}for(let[p,g]of n.entries()){t.textMargin!==void 0&&t.textMargin===0&&a!==void 0&&(h=p*a);let y=e.append("text");y.attr("x",t.x),y.attr("y",d()),t.anchor!==void 0&&y.attr("text-anchor",t.anchor).attr("dominant-baseline",t.dominantBaseline).attr("alignment-baseline",t.alignmentBaseline),t.fontFamily!==void 0&&y.style("font-family",t.fontFamily),s!==void 0&&y.style("font-size",s),t.fontWeight!==void 0&&y.style("font-weight",t.fontWeight),t.fill!==void 0&&y.attr("fill",t.fill),t.class!==void 0&&y.attr("class",t.class),t.dy!==void 0?y.attr("dy",t.dy):h!==0&&y.attr("dy",h);let m=g||sj;if(t.tspan){let x=y.append("tspan");x.attr("x",t.x),t.fill!==void 0&&x.attr("fill",t.fill),x.text(m)}else y.text(m);t.valign!==void 0&&t.textMargin!==void 0&&t.textMargin>0&&(i+=(y._groups||y)[0][0].getBBox().height,r=i),u.push(y)}return u},"drawText"),wK=k(function(e,t){function r(n,a,s,u,h){return n+","+a+" "+(n+s)+","+a+" "+(n+s)+","+(a+u-h)+" "+(n+s-h*1.2)+","+(a+u)+" "+n+","+(a+u)}k(r,"genPoints");let i=e.append("polygon");return i.attr("points",r(t.x,t.y,t.width,t.height,7)),i.attr("class","labelBox"),t.y=t.y+t.height/2,Qv(e,t),i},"drawLabel"),jd=-1,kK=k((e,t,r,i)=>{e.select&&r.forEach(n=>{let a=t.get(n),s=e.select("#actor"+a.actorCnt);!i.mirrorActors&&a.stopy?s.attr("y2",a.stopy+a.height/2):i.mirrorActors&&s.attr("y2",a.stopy)})},"fixLifeLineHeights"),wwe=k(function(e,t,r,i){let n=i?t.stopy:t.starty,a=t.x+t.width/2,s=n+t.height,u=e.append("g").lower();var h=u;i||(jd++,Object.keys(t.links||{}).length&&!r.forceMenus&&h.attr("onclick",_we(`actor${jd}_popup`)).attr("cursor","pointer"),h.append("line").attr("id","actor"+jd).attr("x1",a).attr("y1",s).attr("x2",a).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",t.name),h=u.append("g"),t.actorCnt=jd,t.links!=null&&h.attr("id","root-"+jd));let d=mm();var p="actor";t.properties?.class?p=t.properties.class:d.fill="#eaeaea",i?p+=` ${bK}`:p+=` ${xK}`,d.x=t.x,d.y=n,d.width=t.width,d.height=t.height,d.class=p,d.rx=3,d.ry=3,d.name=t.name;let g=nB(h,d);if(t.rectData=d,t.properties?.icon){let m=t.properties.icon.trim();m.charAt(0)==="@"?kfe(h,d.x+d.width-20,d.y+10,m.substr(1)):wfe(h,d.x+d.width-20,d.y+10,m)}aB(r,No(t.description))(t.description,h,d.x,d.y,d.width,d.height,{class:`actor ${xwe}`},r);let y=t.height;if(g.node){let m=g.node().getBBox();t.height=m.height,y=m.height}return y},"drawActorTypeParticipant"),kwe=k(function(e,t,r,i){let n=i?t.stopy:t.starty,a=t.x+t.width/2,s=n+80,u=e.append("g").lower();i||(jd++,u.append("line").attr("id","actor"+jd).attr("x1",a).attr("y1",s).attr("x2",a).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",t.name),t.actorCnt=jd);let h=e.append("g"),d=_K;i?d+=` ${bK}`:d+=` ${xK}`,h.attr("class",d),h.attr("name",t.name);let p=mm();p.x=t.x,p.y=n,p.fill="#eaeaea",p.width=t.width,p.height=t.height,p.class="actor",p.rx=3,p.ry=3,h.append("line").attr("id","actor-man-torso"+jd).attr("x1",a).attr("y1",n+25).attr("x2",a).attr("y2",n+45),h.append("line").attr("id","actor-man-arms"+jd).attr("x1",a-Nm/2).attr("y1",n+33).attr("x2",a+Nm/2).attr("y2",n+33),h.append("line").attr("x1",a-Nm/2).attr("y1",n+60).attr("x2",a).attr("y2",n+45),h.append("line").attr("x1",a).attr("y1",n+45).attr("x2",a+Nm/2-2).attr("y2",n+60);let g=h.append("circle");g.attr("cx",t.x+t.width/2),g.attr("cy",n+10),g.attr("r",15),g.attr("width",t.width),g.attr("height",t.height);let y=h.node().getBBox();return t.height=y.height,aB(r,No(t.description))(t.description,h,p.x,p.y+35,p.width,p.height,{class:`actor ${_K}`},r),t.height},"drawActorTypeActor"),Twe=k(async function(e,t,r,i){switch(t.type){case"actor":return await kwe(e,t,r,i);case"participant":return await wwe(e,t,r,i)}},"drawActor"),Ewe=k(function(e,t,r){let i=e.append("g");TK(i,t),t.name&&aB(r)(t.name,i,t.x,t.y+(t.textMaxHeight||0)/2,t.width,0,{class:"text"},r),i.lower()},"drawBox"),Cwe=k(function(e){return e.append("g")},"anchorElement"),Swe=k(function(e,t,r,i,n){let a=mm(),s=t.anchored;a.x=t.startx,a.y=t.starty,a.class="activation"+n%3,a.width=t.stopx-t.startx,a.height=r-t.starty,nB(s,a)},"drawActivation"),Awe=k(async function(e,t,r,i){let{boxMargin:n,boxTextMargin:a,labelBoxHeight:s,labelBoxWidth:u,messageFontFamily:h,messageFontSize:d,messageFontWeight:p}=i,g=e.append("g"),y=k(function(_,E,w,C){return g.append("line").attr("x1",_).attr("y1",E).attr("x2",w).attr("y2",C).attr("class","loopLine")},"drawLoopLine");y(t.startx,t.starty,t.stopx,t.starty),y(t.stopx,t.starty,t.stopx,t.stopy),y(t.startx,t.stopy,t.stopx,t.stopy),y(t.startx,t.starty,t.startx,t.stopy),t.sections!==void 0&&t.sections.forEach(function(_){y(t.startx,_.y,t.stopx,_.y).style("stroke-dasharray","3, 3")});let m=mI();m.text=r,m.x=t.startx,m.y=t.starty,m.fontFamily=h,m.fontSize=d,m.fontWeight=p,m.anchor="middle",m.valign="middle",m.tspan=!1,m.width=u||50,m.height=s||20,m.textMargin=a,m.class="labelText",wK(g,m),m=EK(),m.text=t.title,m.x=t.startx+u/2+(t.stopx-t.startx)/2,m.y=t.starty+n+a,m.anchor="middle",m.valign="middle",m.textMargin=a,m.class="loopText",m.fontFamily=h,m.fontSize=d,m.fontWeight=p,m.wrap=!0;let x=No(m.text)?await ES(g,m,t):Qv(g,m);if(t.sectionTitles!==void 0){for(let[_,E]of Object.entries(t.sectionTitles))if(E.message){m.text=E.message,m.x=t.startx+(t.stopx-t.startx)/2,m.y=t.sections[_].y+n+a,m.class="loopText",m.anchor="middle",m.valign="middle",m.tspan=!1,m.fontFamily=h,m.fontSize=d,m.fontWeight=p,m.wrap=t.wrap,No(m.text)?(t.starty=t.sections[_].y,await ES(g,m,t)):Qv(g,m);let w=Math.round(x.map(C=>(C._groups||C)[0][0].getBBox().height).reduce((C,A)=>C+A));t.sections[_].height+=w-(n+a)}}return t.height=Math.round(t.stopy-t.starty),g},"drawLoop"),TK=k(function(e,t){UV(e,t)},"drawBackgroundRect"),Mwe=k(function(e){e.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},"insertDatabaseIcon"),Lwe=k(function(e){e.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},"insertComputerIcon"),Rwe=k(function(e){e.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},"insertClockIcon"),Dwe=k(function(e){e.append("defs").append("marker").attr("id","arrowhead").attr("refX",7.9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto-start-reverse").append("path").attr("d","M -1 0 L 10 5 L 0 10 z")},"insertArrowHead"),Iwe=k(function(e){e.append("defs").append("marker").attr("id","filled-head").attr("refX",15.5).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"insertArrowFilledHead"),Nwe=k(function(e){e.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},"insertSequenceNumber"),Owe=k(function(e){e.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",4).attr("refY",4.5).append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1pt").attr("d","M 1,2 L 6,7 M 6,2 L 1,7")},"insertArrowCrossHead"),EK=k(function(){return{x:0,y:0,fill:void 0,anchor:void 0,style:"#666",width:void 0,height:void 0,textMargin:0,rx:0,ry:0,tspan:!0,valign:void 0}},"getTextObj"),Bwe=k(function(){return{x:0,y:0,fill:"#EDF2AE",stroke:"#666",width:100,anchor:"start",height:100,rx:0,ry:0}},"getNoteRect"),aB=function(){function e(a,s,u,h,d,p,g){let y=s.append("text").attr("x",u+d/2).attr("y",h+p/2+5).style("text-anchor","middle").text(a);n(y,g)}k(e,"byText");function t(a,s,u,h,d,p,g,y){let{actorFontSize:m,actorFontFamily:x,actorFontWeight:_}=y,[E,w]=gf(m),C=a.split(zr.lineBreakRegex);for(let A=0;A<C.length;A++){let M=A*E-E*(C.length-1)/2,N=s.append("text").attr("x",u+d/2).attr("y",h).style("text-anchor","middle").style("font-size",w).style("font-weight",_).style("font-family",x);N.append("tspan").attr("x",u+d/2).attr("dy",M).text(C[A]),N.attr("y",h+p/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),n(N,g)}}k(t,"byTspan");function r(a,s,u,h,d,p,g,y){let m=s.append("switch"),x=m.append("foreignObject").attr("x",u).attr("y",h).attr("width",d).attr("height",p).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");x.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(a),t(a,m,u,h,d,p,g,y),n(x,g)}k(r,"byFo");async function i(a,s,u,h,d,p,g,y){let m=await Vg(a,cs()),x=s.append("switch"),_=x.append("foreignObject").attr("x",u+d/2-m.width/2).attr("y",h+p/2-m.height/2).attr("width",m.width).attr("height",m.height).append("xhtml:div").style("height","100%").style("width","100%");_.append("div").style("text-align","center").style("vertical-align","middle").html(await Wg(a,cs())),t(a,x,u,h,d,p,g,y),n(_,g)}k(i,"byKatex");function n(a,s){for(let u in s)s.hasOwnProperty(u)&&a.attr(u,s[u])}return k(n,"_setTextAttrs"),function(a,s=!1){return s?i:a.textPlacement==="fo"?r:a.textPlacement==="old"?e:t}}(),Pwe=function(){function e(n,a,s,u,h,d,p){let g=a.append("text").attr("x",s).attr("y",u).style("text-anchor","start").text(n);i(g,p)}k(e,"byText");function t(n,a,s,u,h,d,p,g){let{actorFontSize:y,actorFontFamily:m,actorFontWeight:x}=g,_=n.split(zr.lineBreakRegex);for(let E=0;E<_.length;E++){let w=E*y-y*(_.length-1)/2,C=a.append("text").attr("x",s).attr("y",u).style("text-anchor","start").style("font-size",y).style("font-weight",x).style("font-family",m);C.append("tspan").attr("x",s).attr("dy",w).text(_[E]),C.attr("y",u+d/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),i(C,p)}}k(t,"byTspan");function r(n,a,s,u,h,d,p,g){let y=a.append("switch"),m=y.append("foreignObject").attr("x",s).attr("y",u).attr("width",h).attr("height",d).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");m.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(n),t(n,y,s,u,h,d,p,g),i(m,p)}k(r,"byFo");function i(n,a){for(let s in a)a.hasOwnProperty(s)&&n.attr(s,a[s])}return k(i,"_setTextAttrs"),function(n){return n.textPlacement==="fo"?r:n.textPlacement==="old"?e:t}}(),mo={drawRect:nB,drawText:Qv,drawLabel:wK,drawActor:Twe,drawBox:Ewe,drawPopup:bwe,anchorElement:Cwe,drawActivation:Swe,drawLoop:Awe,drawBackgroundRect:TK,insertArrowHead:Dwe,insertArrowFilledHead:Iwe,insertSequenceNumber:Nwe,insertArrowCrossHead:Owe,insertDatabaseIcon:Mwe,insertComputerIcon:Lwe,insertClockIcon:Rwe,getTextObj:EK,getNoteRect:Bwe,fixLifeLineHeights:kK,sanitizeUrl:cK.sanitizeUrl},St={},Or={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],activations:[],models:{getHeight:k(function(){return Math.max.apply(null,this.actors.length===0?[0]:this.actors.map(e=>e.height||0))+(this.loops.length===0?0:this.loops.map(e=>e.height||0).reduce((e,t)=>e+t))+(this.messages.length===0?0:this.messages.map(e=>e.height||0).reduce((e,t)=>e+t))+(this.notes.length===0?0:this.notes.map(e=>e.height||0).reduce((e,t)=>e+t))},"getHeight"),clear:k(function(){this.actors=[],this.boxes=[],this.loops=[],this.messages=[],this.notes=[]},"clear"),addBox:k(function(e){this.boxes.push(e)},"addBox"),addActor:k(function(e){this.actors.push(e)},"addActor"),addLoop:k(function(e){this.loops.push(e)},"addLoop"),addMessage:k(function(e){this.messages.push(e)},"addMessage"),addNote:k(function(e){this.notes.push(e)},"addNote"),lastActor:k(function(){return this.actors[this.actors.length-1]},"lastActor"),lastLoop:k(function(){return this.loops[this.loops.length-1]},"lastLoop"),lastMessage:k(function(){return this.messages[this.messages.length-1]},"lastMessage"),lastNote:k(function(){return this.notes[this.notes.length-1]},"lastNote"),actors:[],boxes:[],loops:[],messages:[],notes:[]},init:k(function(){this.sequenceItems=[],this.activations=[],this.models.clear(),this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0,SK(at())},"init"),updateVal:k(function(e,t,r,i){e[t]===void 0?e[t]=r:e[t]=i(r,e[t])},"updateVal"),updateBounds:k(function(e,t,r,i){let n=this,a=0;function s(u){return k(function(h){a++;let d=n.sequenceItems.length-a+1;n.updateVal(h,"starty",t-d*St.boxMargin,Math.min),n.updateVal(h,"stopy",i+d*St.boxMargin,Math.max),n.updateVal(Or.data,"startx",e-d*St.boxMargin,Math.min),n.updateVal(Or.data,"stopx",r+d*St.boxMargin,Math.max),u!=="activation"&&(n.updateVal(h,"startx",e-d*St.boxMargin,Math.min),n.updateVal(h,"stopx",r+d*St.boxMargin,Math.max),n.updateVal(Or.data,"starty",t-d*St.boxMargin,Math.min),n.updateVal(Or.data,"stopy",i+d*St.boxMargin,Math.max))},"updateItemBounds")}k(s,"updateFn"),this.sequenceItems.forEach(s()),this.activations.forEach(s("activation"))},"updateBounds"),insert:k(function(e,t,r,i){let n=zr.getMin(e,r),a=zr.getMax(e,r),s=zr.getMin(t,i),u=zr.getMax(t,i);this.updateVal(Or.data,"startx",n,Math.min),this.updateVal(Or.data,"starty",s,Math.min),this.updateVal(Or.data,"stopx",a,Math.max),this.updateVal(Or.data,"stopy",u,Math.max),this.updateBounds(n,s,a,u)},"insert"),newActivation:k(function(e,t,r){let i=r.get(e.from),n=CS(e.from).length||0,a=i.x+i.width/2+(n-1)*St.activationWidth/2;this.activations.push({startx:a,starty:this.verticalPos+2,stopx:a+St.activationWidth,stopy:void 0,actor:e.from,anchored:mo.anchorElement(t)})},"newActivation"),endActivation:k(function(e){let t=this.activations.map(function(r){return r.actor}).lastIndexOf(e.from);return this.activations.splice(t,1)[0]},"endActivation"),createLoop:k(function(e={message:void 0,wrap:!1,width:void 0},t){return{startx:void 0,starty:this.verticalPos,stopx:void 0,stopy:void 0,title:e.message,wrap:e.wrap,width:e.width,height:0,fill:t}},"createLoop"),newLoop:k(function(e={message:void 0,wrap:!1,width:void 0},t){this.sequenceItems.push(this.createLoop(e,t))},"newLoop"),endLoop:k(function(){return this.sequenceItems.pop()},"endLoop"),isLoopOverlap:k(function(){return this.sequenceItems.length?this.sequenceItems[this.sequenceItems.length-1].overlap:!1},"isLoopOverlap"),addSectionToLoop:k(function(e){let t=this.sequenceItems.pop();t.sections=t.sections||[],t.sectionTitles=t.sectionTitles||[],t.sections.push({y:Or.getVerticalPos(),height:0}),t.sectionTitles.push(e),this.sequenceItems.push(t)},"addSectionToLoop"),saveVerticalPos:k(function(){this.isLoopOverlap()&&(this.savedVerticalPos=this.verticalPos)},"saveVerticalPos"),resetVerticalPos:k(function(){this.isLoopOverlap()&&(this.verticalPos=this.savedVerticalPos)},"resetVerticalPos"),bumpVerticalPos:k(function(e){this.verticalPos=this.verticalPos+e,this.data.stopy=zr.getMax(this.data.stopy,this.verticalPos)},"bumpVerticalPos"),getVerticalPos:k(function(){return this.verticalPos},"getVerticalPos"),getBounds:k(function(){return{bounds:this.data,models:this.models}},"getBounds")},Fwe=k(async function(e,t){Or.bumpVerticalPos(St.boxMargin),t.height=St.boxMargin,t.starty=Or.getVerticalPos();let r=mm();r.x=t.startx,r.y=t.starty,r.width=t.width||St.width,r.class="note";let i=e.append("g"),n=mo.drawRect(i,r),a=mI();a.x=t.startx,a.y=t.starty,a.width=r.width,a.dy="1em",a.text=t.message,a.class="noteText",a.fontFamily=St.noteFontFamily,a.fontSize=St.noteFontSize,a.fontWeight=St.noteFontWeight,a.anchor=St.noteAlign,a.textMargin=St.noteMargin,a.valign="center";let s=No(a.text)?await ES(i,a):Qv(i,a),u=Math.round(s.map(h=>(h._groups||h)[0][0].getBBox().height).reduce((h,d)=>h+d));n.attr("height",u+2*St.noteMargin),t.height+=u+2*St.noteMargin,Or.bumpVerticalPos(u+2*St.noteMargin),t.stopy=t.starty+u+2*St.noteMargin,t.stopx=t.startx+r.width,Or.insert(t.startx,t.starty,t.stopx,t.stopy),Or.models.addNote(t)},"drawNote"),Om=k(e=>({fontFamily:e.messageFontFamily,fontSize:e.messageFontSize,fontWeight:e.messageFontWeight}),"messageFont"),Jv=k(e=>({fontFamily:e.noteFontFamily,fontSize:e.noteFontSize,fontWeight:e.noteFontWeight}),"noteFont"),sB=k(e=>({fontFamily:e.actorFontFamily,fontSize:e.actorFontSize,fontWeight:e.actorFontWeight}),"actorFont"),k(H5e,"boundMessage"),$we=k(async function(e,t,r,i){let{startx:n,stopx:a,starty:s,message:u,type:h,sequenceIndex:d,sequenceVisible:p}=t,g=qn.calculateTextDimensions(u,Om(St)),y=mI();y.x=n,y.y=s+10,y.width=a-n,y.class="messageText",y.dy="1em",y.text=u,y.fontFamily=St.messageFontFamily,y.fontSize=St.messageFontSize,y.fontWeight=St.messageFontWeight,y.anchor=St.messageAlign,y.valign="center",y.textMargin=St.wrapPadding,y.tspan=!1,No(y.text)?await ES(e,y,{startx:n,stopx:a,starty:r}):Qv(e,y);let m=g.width,x;n===a?St.rightAngles?x=e.append("path").attr("d",`M  ${n},${r} H ${n+zr.getMax(St.width/2,m/2)} V ${r+25} H ${n}`):x=e.append("path").attr("d","M "+n+","+r+" C "+(n+60)+","+(r-10)+" "+(n+60)+","+(r+30)+" "+n+","+(r+20)):(x=e.append("line"),x.attr("x1",n),x.attr("y1",r),x.attr("x2",a),x.attr("y2",r)),h===i.db.LINETYPE.DOTTED||h===i.db.LINETYPE.DOTTED_CROSS||h===i.db.LINETYPE.DOTTED_POINT||h===i.db.LINETYPE.DOTTED_OPEN||h===i.db.LINETYPE.BIDIRECTIONAL_DOTTED?(x.style("stroke-dasharray","3, 3"),x.attr("class","messageLine1")):x.attr("class","messageLine0");let _="";St.arrowMarkerAbsolute&&(_=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,_=_.replace(/\(/g,"\\("),_=_.replace(/\)/g,"\\)")),x.attr("stroke-width",2),x.attr("stroke","none"),x.style("fill","none"),(h===i.db.LINETYPE.SOLID||h===i.db.LINETYPE.DOTTED)&&x.attr("marker-end","url("+_+"#arrowhead)"),(h===i.db.LINETYPE.BIDIRECTIONAL_SOLID||h===i.db.LINETYPE.BIDIRECTIONAL_DOTTED)&&(x.attr("marker-start","url("+_+"#arrowhead)"),x.attr("marker-end","url("+_+"#arrowhead)")),(h===i.db.LINETYPE.SOLID_POINT||h===i.db.LINETYPE.DOTTED_POINT)&&x.attr("marker-end","url("+_+"#filled-head)"),(h===i.db.LINETYPE.SOLID_CROSS||h===i.db.LINETYPE.DOTTED_CROSS)&&x.attr("marker-end","url("+_+"#crosshead)"),(p||St.showSequenceNumbers)&&(x.attr("marker-start","url("+_+"#sequencenumber)"),e.append("text").attr("x",n).attr("y",r+4).attr("font-family","sans-serif").attr("font-size","12px").attr("text-anchor","middle").attr("class","sequenceNumber").text(d))},"drawMessage"),zwe=k(function(e,t,r,i,n,a,s){let u=0,h=0,d,p=0;for(let g of i){let y=t.get(g),m=y.box;d&&d!=m&&(s||Or.models.addBox(d),h+=St.boxMargin+d.margin),m&&m!=d&&(s||(m.x=u+h,m.y=n),h+=m.margin),y.width=y.width||St.width,y.height=zr.getMax(y.height||St.height,St.height),y.margin=y.margin||St.actorMargin,p=zr.getMax(p,y.height),r.get(y.name)&&(h+=y.width/2),y.x=u+h,y.starty=Or.getVerticalPos(),Or.insert(y.x,n,y.x+y.width,y.height),u+=y.width+h,y.box&&(y.box.width=u+m.margin-y.box.x),h=y.margin,d=y.box,Or.models.addActor(y)}d&&!s&&Or.models.addBox(d),Or.bumpVerticalPos(p)},"addActorRenderingData"),oB=k(async function(e,t,r,i){if(i){let n=0;Or.bumpVerticalPos(St.boxMargin*2);for(let a of r){let s=t.get(a);s.stopy||(s.stopy=Or.getVerticalPos());let u=await mo.drawActor(e,s,St,!0);n=zr.getMax(n,u)}Or.bumpVerticalPos(n+St.boxMargin)}else for(let n of r){let a=t.get(n);await mo.drawActor(e,a,St,!1)}},"drawActors"),CK=k(function(e,t,r,i){let n=0,a=0;for(let s of r){let u=t.get(s),h=Uwe(u),d=mo.drawPopup(e,u,h,St,St.forceMenus,i);d.height>n&&(n=d.height),d.width+u.x>a&&(a=d.width+u.x)}return{maxHeight:n,maxWidth:a}},"drawActorsPopup"),SK=k(function(e){Xs(St,e),e.fontFamily&&(St.actorFontFamily=St.noteFontFamily=St.messageFontFamily=e.fontFamily),e.fontSize&&(St.actorFontSize=St.noteFontSize=St.messageFontSize=e.fontSize),e.fontWeight&&(St.actorFontWeight=St.noteFontWeight=St.messageFontWeight=e.fontWeight)},"setConf"),CS=k(function(e){return Or.activations.filter(function(t){return t.actor===e})},"actorActivations"),AK=k(function(e,t){let r=t.get(e),i=CS(e),n=i.reduce(function(s,u){return zr.getMin(s,u.startx)},r.x+r.width/2-1),a=i.reduce(function(s,u){return zr.getMax(s,u.stopx)},r.x+r.width/2+1);return[n,a]},"activationBounds"),k(Ud,"adjustLoopHeightForWrap"),k(V5e,"adjustCreatedDestroyedData"),Gwe=k(async function(e,t,r,i){let{securityLevel:n,sequence:a}=at();St=a;let s;n==="sandbox"&&(s=Nr("#i"+t));let u=Nr(n==="sandbox"?s.nodes()[0].contentDocument.body:"body"),h=n==="sandbox"?s.nodes()[0].contentDocument:document;Or.init(),Ce.debug(i.db);let d=n==="sandbox"?u.select(`[id="${t}"]`):Nr(`[id="${t}"]`),p=i.db.getActors(),g=i.db.getCreatedActors(),y=i.db.getDestroyedActors(),m=i.db.getBoxes(),x=i.db.getActorKeys(),_=i.db.getMessages(),E=i.db.getDiagramTitle(),w=i.db.hasAtLeastOneBox(),C=i.db.hasAtLeastOneBoxWithTitle(),A=await W5e(p,_,i);if(St.height=await Y5e(p,A,m),mo.insertComputerIcon(d),mo.insertDatabaseIcon(d),mo.insertClockIcon(d),w&&(Or.bumpVerticalPos(St.boxMargin),C&&Or.bumpVerticalPos(m[0].textMaxHeight)),St.hideUnusedParticipants===!0){let P=new Set;_.forEach(q=>{P.add(q.from),P.add(q.to)}),x=x.filter(q=>P.has(q))}zwe(d,p,g,x,0,_,!1);let M=await Vwe(_,p,A,i);mo.insertArrowHead(d),mo.insertArrowCrossHead(d),mo.insertArrowFilledHead(d),mo.insertSequenceNumber(d);function N(P,q){let Z=Or.endActivation(P);Z.starty+18>q&&(Z.starty=q-6,q+=12),mo.drawActivation(d,Z,q,St,CS(P.from).length),Or.insert(Z.startx,q-10,Z.stopx,q)}k(N,"activeEnd");let B=1,O=1,L=[],$=[],G=0;for(let P of _){let q,Z,J;switch(P.type){case i.db.LINETYPE.NOTE:Or.resetVerticalPos(),Z=P.noteModel,await Fwe(d,Z);break;case i.db.LINETYPE.ACTIVE_START:Or.newActivation(P,d,p);break;case i.db.LINETYPE.ACTIVE_END:N(P,Or.getVerticalPos());break;case i.db.LINETYPE.LOOP_START:Ud(M,P,St.boxMargin,St.boxMargin+St.boxTextMargin,ae=>Or.newLoop(ae));break;case i.db.LINETYPE.LOOP_END:q=Or.endLoop(),await mo.drawLoop(d,q,"loop",St),Or.bumpVerticalPos(q.stopy-Or.getVerticalPos()),Or.models.addLoop(q);break;case i.db.LINETYPE.RECT_START:Ud(M,P,St.boxMargin,St.boxMargin,ae=>Or.newLoop(void 0,ae.message));break;case i.db.LINETYPE.RECT_END:q=Or.endLoop(),$.push(q),Or.models.addLoop(q),Or.bumpVerticalPos(q.stopy-Or.getVerticalPos());break;case i.db.LINETYPE.OPT_START:Ud(M,P,St.boxMargin,St.boxMargin+St.boxTextMargin,ae=>Or.newLoop(ae));break;case i.db.LINETYPE.OPT_END:q=Or.endLoop(),await mo.drawLoop(d,q,"opt",St),Or.bumpVerticalPos(q.stopy-Or.getVerticalPos()),Or.models.addLoop(q);break;case i.db.LINETYPE.ALT_START:Ud(M,P,St.boxMargin,St.boxMargin+St.boxTextMargin,ae=>Or.newLoop(ae));break;case i.db.LINETYPE.ALT_ELSE:Ud(M,P,St.boxMargin+St.boxTextMargin,St.boxMargin,ae=>Or.addSectionToLoop(ae));break;case i.db.LINETYPE.ALT_END:q=Or.endLoop(),await mo.drawLoop(d,q,"alt",St),Or.bumpVerticalPos(q.stopy-Or.getVerticalPos()),Or.models.addLoop(q);break;case i.db.LINETYPE.PAR_START:case i.db.LINETYPE.PAR_OVER_START:Ud(M,P,St.boxMargin,St.boxMargin+St.boxTextMargin,ae=>Or.newLoop(ae)),Or.saveVerticalPos();break;case i.db.LINETYPE.PAR_AND:Ud(M,P,St.boxMargin+St.boxTextMargin,St.boxMargin,ae=>Or.addSectionToLoop(ae));break;case i.db.LINETYPE.PAR_END:q=Or.endLoop(),await mo.drawLoop(d,q,"par",St),Or.bumpVerticalPos(q.stopy-Or.getVerticalPos()),Or.models.addLoop(q);break;case i.db.LINETYPE.AUTONUMBER:B=P.message.start||B,O=P.message.step||O,P.message.visible?i.db.enableSequenceNumbers():i.db.disableSequenceNumbers();break;case i.db.LINETYPE.CRITICAL_START:Ud(M,P,St.boxMargin,St.boxMargin+St.boxTextMargin,ae=>Or.newLoop(ae));break;case i.db.LINETYPE.CRITICAL_OPTION:Ud(M,P,St.boxMargin+St.boxTextMargin,St.boxMargin,ae=>Or.addSectionToLoop(ae));break;case i.db.LINETYPE.CRITICAL_END:q=Or.endLoop(),await mo.drawLoop(d,q,"critical",St),Or.bumpVerticalPos(q.stopy-Or.getVerticalPos()),Or.models.addLoop(q);break;case i.db.LINETYPE.BREAK_START:Ud(M,P,St.boxMargin,St.boxMargin+St.boxTextMargin,ae=>Or.newLoop(ae));break;case i.db.LINETYPE.BREAK_END:q=Or.endLoop(),await mo.drawLoop(d,q,"break",St),Or.bumpVerticalPos(q.stopy-Or.getVerticalPos()),Or.models.addLoop(q);break;default:try{J=P.msgModel,J.starty=Or.getVerticalPos(),J.sequenceIndex=B,J.sequenceVisible=i.db.showSequenceNumbers();let ae=await H5e(d,J);V5e(P,J,ae,G,p,g,y),L.push({messageModel:J,lineStartY:ae}),Or.models.addMessage(J)}catch(ae){Ce.error("error while drawing message",ae)}}[i.db.LINETYPE.SOLID_OPEN,i.db.LINETYPE.DOTTED_OPEN,i.db.LINETYPE.SOLID,i.db.LINETYPE.DOTTED,i.db.LINETYPE.SOLID_CROSS,i.db.LINETYPE.DOTTED_CROSS,i.db.LINETYPE.SOLID_POINT,i.db.LINETYPE.DOTTED_POINT,i.db.LINETYPE.BIDIRECTIONAL_SOLID,i.db.LINETYPE.BIDIRECTIONAL_DOTTED].includes(P.type)&&(B=B+O),G++}Ce.debug("createdActors",g),Ce.debug("destroyedActors",y),await oB(d,p,x,!1);for(let P of L)await $we(d,P.messageModel,P.lineStartY,i);St.mirrorActors&&await oB(d,p,x,!0),$.forEach(P=>mo.drawBackgroundRect(d,P)),kK(d,p,x,St);for(let P of Or.models.boxes)P.height=Or.getVerticalPos()-P.y,Or.insert(P.x,P.y,P.x+P.width,P.height),P.startx=P.x,P.starty=P.y,P.stopx=P.startx+P.width,P.stopy=P.starty+P.height,P.stroke="rgb(0,0,0, 0.5)",mo.drawBox(d,P,St);w&&Or.bumpVerticalPos(St.boxMargin);let z=CK(d,p,x,h),{bounds:F}=Or.getBounds();F.startx===void 0&&(F.startx=0),F.starty===void 0&&(F.starty=0),F.stopx===void 0&&(F.stopx=0),F.stopy===void 0&&(F.stopy=0);let X=F.stopy-F.starty;X<z.maxHeight&&(X=z.maxHeight);let I=X+2*St.diagramMarginY;St.mirrorActors&&(I=I-St.boxMargin+St.bottomMarginAdj);let j=F.stopx-F.startx;j<z.maxWidth&&(j=z.maxWidth);let H=j+2*St.diagramMarginX;E&&d.append("text").text(E).attr("x",(F.stopx-F.startx)/2-2*St.diagramMarginX).attr("y",-25),Oo(d,I,H,St.useMaxWidth);let V=E?40:0;d.attr("viewBox",F.startx-St.diagramMarginX+" -"+(St.diagramMarginY+V)+" "+H+" "+(I+V)),Ce.debug("models:",Or.models)},"draw"),k(W5e,"getMaxMessageWidthPerActor"),Uwe=k(function(e){let t=0,r=sB(St);for(let i in e.links){let n=qn.calculateTextDimensions(i,r).width+2*St.wrapPadding+2*St.boxMargin;t<n&&(t=n)}return t},"getRequiredPopupWidth"),k(Y5e,"calculateActorMargins"),jwe=k(async function(e,t,r){let i=t.get(e.from),n=t.get(e.to),a=i.x,s=n.x,u=e.wrap&&e.message,h=No(e.message)?await Vg(e.message,at()):qn.calculateTextDimensions(u?qn.wrapLabel(e.message,St.width,Jv(St)):e.message,Jv(St)),d={width:u?St.width:zr.getMax(St.width,h.width+2*St.noteMargin),height:0,startx:i.x,stopx:0,starty:0,stopy:0,message:e.message};return e.placement===r.db.PLACEMENT.RIGHTOF?(d.width=u?zr.getMax(St.width,h.width):zr.getMax(i.width/2+n.width/2,h.width+2*St.noteMargin),d.startx=a+(i.width+St.actorMargin)/2):e.placement===r.db.PLACEMENT.LEFTOF?(d.width=u?zr.getMax(St.width,h.width+2*St.noteMargin):zr.getMax(i.width/2+n.width/2,h.width+2*St.noteMargin),d.startx=a-d.width+(i.width-St.actorMargin)/2):e.to===e.from?(h=qn.calculateTextDimensions(u?qn.wrapLabel(e.message,zr.getMax(St.width,i.width),Jv(St)):e.message,Jv(St)),d.width=u?zr.getMax(St.width,i.width):zr.getMax(i.width,St.width,h.width+2*St.noteMargin),d.startx=a+(i.width-d.width)/2):(d.width=Math.abs(a+i.width/2-(s+n.width/2))+St.actorMargin,d.startx=a<s?a+i.width/2-St.actorMargin/2:s+n.width/2-St.actorMargin/2),u&&(d.message=qn.wrapLabel(e.message,d.width-2*St.wrapPadding,Jv(St))),Ce.debug(`NM:[${d.startx},${d.stopx},${d.starty},${d.stopy}:${d.width},${d.height}=${e.message}]`),d},"buildNoteModel"),Hwe=k(function(e,t,r){if(![r.db.LINETYPE.SOLID_OPEN,r.db.LINETYPE.DOTTED_OPEN,r.db.LINETYPE.SOLID,r.db.LINETYPE.DOTTED,r.db.LINETYPE.SOLID_CROSS,r.db.LINETYPE.DOTTED_CROSS,r.db.LINETYPE.SOLID_POINT,r.db.LINETYPE.DOTTED_POINT,r.db.LINETYPE.BIDIRECTIONAL_SOLID,r.db.LINETYPE.BIDIRECTIONAL_DOTTED].includes(e.type))return{};let[i,n]=AK(e.from,t),[a,s]=AK(e.to,t),u=i<=a,h=u?n:i,d=u?a:s,p=Math.abs(a-s)>2,g=k(_=>u?-_:_,"adjustValue");e.from===e.to?d=h:(e.activate&&!p&&(d+=g(St.activationWidth/2-1)),[r.db.LINETYPE.SOLID_OPEN,r.db.LINETYPE.DOTTED_OPEN].includes(e.type)||(d+=g(3)),[r.db.LINETYPE.BIDIRECTIONAL_SOLID,r.db.LINETYPE.BIDIRECTIONAL_DOTTED].includes(e.type)&&(h-=g(3)));let y=[i,n,a,s],m=Math.abs(h-d);e.wrap&&e.message&&(e.message=qn.wrapLabel(e.message,zr.getMax(m+2*St.wrapPadding,St.width),Om(St)));let x=qn.calculateTextDimensions(e.message,Om(St));return{width:zr.getMax(e.wrap?0:x.width+2*St.wrapPadding,m+2*St.wrapPadding,St.width),height:0,startx:h,stopx:d,starty:0,stopy:0,message:e.message,type:e.type,wrap:e.wrap,fromBounds:Math.min.apply(null,y),toBounds:Math.max.apply(null,y)}},"buildMessageModel"),Vwe=k(async function(e,t,r,i){let n={},a=[],s,u,h;for(let d of e){switch(d.id=qn.random({length:10}),d.type){case i.db.LINETYPE.LOOP_START:case i.db.LINETYPE.ALT_START:case i.db.LINETYPE.OPT_START:case i.db.LINETYPE.PAR_START:case i.db.LINETYPE.PAR_OVER_START:case i.db.LINETYPE.CRITICAL_START:case i.db.LINETYPE.BREAK_START:a.push({id:d.id,msg:d.message,from:Number.MAX_SAFE_INTEGER,to:Number.MIN_SAFE_INTEGER,width:0});break;case i.db.LINETYPE.ALT_ELSE:case i.db.LINETYPE.PAR_AND:case i.db.LINETYPE.CRITICAL_OPTION:d.message&&(s=a.pop(),n[s.id]=s,n[d.id]=s,a.push(s));break;case i.db.LINETYPE.LOOP_END:case i.db.LINETYPE.ALT_END:case i.db.LINETYPE.OPT_END:case i.db.LINETYPE.PAR_END:case i.db.LINETYPE.CRITICAL_END:case i.db.LINETYPE.BREAK_END:s=a.pop(),n[s.id]=s;break;case i.db.LINETYPE.ACTIVE_START:{let p=t.get(d.from?d.from:d.to.actor),g=CS(d.from?d.from:d.to.actor).length,y=p.x+p.width/2+(g-1)*St.activationWidth/2,m={startx:y,stopx:y+St.activationWidth,actor:d.from,enabled:!0};Or.activations.push(m)}break;case i.db.LINETYPE.ACTIVE_END:{let p=Or.activations.map(g=>g.actor).lastIndexOf(d.from);Or.activations.splice(p,1).splice(0,1)}break}d.placement!==void 0?(u=await jwe(d,t,i),d.noteModel=u,a.forEach(p=>{s=p,s.from=zr.getMin(s.from,u.startx),s.to=zr.getMax(s.to,u.startx+u.width),s.width=zr.getMax(s.width,Math.abs(s.from-s.to))-St.labelBoxWidth})):(h=Hwe(d,t,i),d.msgModel=h,h.startx&&h.stopx&&a.length>0&&a.forEach(p=>{if(s=p,h.startx===h.stopx){let g=t.get(d.from),y=t.get(d.to);s.from=zr.getMin(g.x-h.width/2,g.x-g.width/2,s.from),s.to=zr.getMax(y.x+h.width/2,y.x+g.width/2,s.to),s.width=zr.getMax(s.width,Math.abs(s.to-s.from))-St.labelBoxWidth}else s.from=zr.getMin(h.startx,s.from),s.to=zr.getMax(h.stopx,s.to),s.width=zr.getMax(s.width,h.width)-St.labelBoxWidth}))}return Or.activations=[],Ce.debug("Loop type widths:",n),n},"calculateLoopBounds"),Wwe={bounds:Or,drawActors:oB,drawActorsPopup:CK,setConf:SK,draw:Gwe},Ywe={parser:q5e,db:vK,renderer:Wwe,styles:vwe,init:k(({wrap:e})=>{vK.setWrap(e)},"init")}});function MK(e){let t;switch(e){case 0:t="aggregation";break;case 1:t="extension";break;case 2:t="composition";break;case 3:t="dependency";break;case 4:t="lollipop";break;default:t="none"}return t}var lB,LK,RK,DK,SS,AS,bs,IK,C5,ex,NK,Yc,uB,S5,Bm,Pm,qwe,tx,OK,BK,Xwe,Kwe,Zwe,Qwe,Jwe,e6e,t6e,PK,r6e,i6e,n6e,hB,a6e,s6e,o6e,l6e,u6e,h6e,c6e,d6e,Hf,FK,cB,$K,p6e,f6e,g6e,m6e,y6e,v6e,x6e,MS,b6e,zK,_6e,w6e,k6e,GK,T6e=D(()=>{Ov(),fm(),Os(),Qn(),ha(),lB=function(){var e=k(function(Kt,ne,He,Te){for(He=He||{},Te=Kt.length;Te--;He[Kt[Te]]=ne);return He},"o"),t=[1,18],r=[1,19],i=[1,20],n=[1,41],a=[1,42],s=[1,26],u=[1,24],h=[1,25],d=[1,32],p=[1,33],g=[1,34],y=[1,45],m=[1,35],x=[1,36],_=[1,37],E=[1,38],w=[1,27],C=[1,28],A=[1,29],M=[1,30],N=[1,31],B=[1,44],O=[1,46],L=[1,43],$=[1,47],G=[1,9],z=[1,8,9],F=[1,58],X=[1,59],I=[1,60],j=[1,61],H=[1,62],V=[1,63],P=[1,64],q=[1,8,9,41],Z=[1,76],J=[1,8,9,12,13,22,39,41,44,66,67,68,69,70,71,72,77,79],ae=[1,8,9,12,13,17,20,22,39,41,44,48,58,66,67,68,69,70,71,72,77,79,84,99,101,102],ue=[13,58,84,99,101,102],be=[13,58,71,72,84,99,101,102],Le=[13,58,66,67,68,69,70,84,99,101,102],xe=[1,98],Ae=[1,115],oe=[1,107],he=[1,113],le=[1,108],ke=[1,109],pe=[1,110],qe=[1,111],me=[1,112],st=[1,114],we=[22,58,59,80,84,85,86,87,88,89],Et=[1,8,9,39,41,44],wt=[1,8,9,22],Tt=[1,143],er=[1,8,9,59],tr=[1,8,9,22,58,59,80,84,85,86,87,88,89],kr={trace:k(function(){},"trace"),yy:{},symbols_:{error:2,start:3,mermaidDoc:4,statements:5,graphConfig:6,CLASS_DIAGRAM:7,NEWLINE:8,EOF:9,statement:10,classLabel:11,SQS:12,STR:13,SQE:14,namespaceName:15,alphaNumToken:16,DOT:17,className:18,classLiteralName:19,GENERICTYPE:20,relationStatement:21,LABEL:22,namespaceStatement:23,classStatement:24,memberStatement:25,annotationStatement:26,clickStatement:27,styleStatement:28,cssClassStatement:29,noteStatement:30,classDefStatement:31,direction:32,acc_title:33,acc_title_value:34,acc_descr:35,acc_descr_value:36,acc_descr_multiline_value:37,namespaceIdentifier:38,STRUCT_START:39,classStatements:40,STRUCT_STOP:41,NAMESPACE:42,classIdentifier:43,STYLE_SEPARATOR:44,members:45,CLASS:46,ANNOTATION_START:47,ANNOTATION_END:48,MEMBER:49,SEPARATOR:50,relation:51,NOTE_FOR:52,noteText:53,NOTE:54,CLASSDEF:55,classList:56,stylesOpt:57,ALPHA:58,COMMA:59,direction_tb:60,direction_bt:61,direction_rl:62,direction_lr:63,relationType:64,lineType:65,AGGREGATION:66,EXTENSION:67,COMPOSITION:68,DEPENDENCY:69,LOLLIPOP:70,LINE:71,DOTTED_LINE:72,CALLBACK:73,LINK:74,LINK_TARGET:75,CLICK:76,CALLBACK_NAME:77,CALLBACK_ARGS:78,HREF:79,STYLE:80,CSSCLASS:81,style:82,styleComponent:83,NUM:84,COLON:85,UNIT:86,SPACE:87,BRKT:88,PCT:89,commentToken:90,textToken:91,graphCodeTokens:92,textNoTagsToken:93,TAGSTART:94,TAGEND:95,"==":96,"--":97,DEFAULT:98,MINUS:99,keywords:100,UNICODE_TEXT:101,BQUOTE_STR:102,$accept:0,$end:1},terminals_:{2:"error",7:"CLASS_DIAGRAM",8:"NEWLINE",9:"EOF",12:"SQS",13:"STR",14:"SQE",17:"DOT",20:"GENERICTYPE",22:"LABEL",33:"acc_title",34:"acc_title_value",35:"acc_descr",36:"acc_descr_value",37:"acc_descr_multiline_value",39:"STRUCT_START",41:"STRUCT_STOP",42:"NAMESPACE",44:"STYLE_SEPARATOR",46:"CLASS",47:"ANNOTATION_START",48:"ANNOTATION_END",49:"MEMBER",50:"SEPARATOR",52:"NOTE_FOR",54:"NOTE",55:"CLASSDEF",58:"ALPHA",59:"COMMA",60:"direction_tb",61:"direction_bt",62:"direction_rl",63:"direction_lr",66:"AGGREGATION",67:"EXTENSION",68:"COMPOSITION",69:"DEPENDENCY",70:"LOLLIPOP",71:"LINE",72:"DOTTED_LINE",73:"CALLBACK",74:"LINK",75:"LINK_TARGET",76:"CLICK",77:"CALLBACK_NAME",78:"CALLBACK_ARGS",79:"HREF",80:"STYLE",81:"CSSCLASS",84:"NUM",85:"COLON",86:"UNIT",87:"SPACE",88:"BRKT",89:"PCT",92:"graphCodeTokens",94:"TAGSTART",95:"TAGEND",96:"==",97:"--",98:"DEFAULT",99:"MINUS",100:"keywords",101:"UNICODE_TEXT",102:"BQUOTE_STR"},productions_:[0,[3,1],[3,1],[4,1],[6,4],[5,1],[5,2],[5,3],[11,3],[15,1],[15,3],[15,2],[18,1],[18,3],[18,1],[18,2],[18,2],[18,2],[10,1],[10,2],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,2],[10,2],[10,1],[23,4],[23,5],[38,2],[40,1],[40,2],[40,3],[24,1],[24,3],[24,4],[24,6],[43,2],[43,3],[26,4],[45,1],[45,2],[25,1],[25,2],[25,1],[25,1],[21,3],[21,4],[21,4],[21,5],[30,3],[30,2],[31,3],[56,1],[56,3],[32,1],[32,1],[32,1],[32,1],[51,3],[51,2],[51,2],[51,1],[64,1],[64,1],[64,1],[64,1],[64,1],[65,1],[65,1],[27,3],[27,4],[27,3],[27,4],[27,4],[27,5],[27,3],[27,4],[27,4],[27,5],[27,4],[27,5],[27,5],[27,6],[28,3],[29,3],[57,1],[57,3],[82,1],[82,2],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[90,1],[90,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[93,1],[93,1],[93,1],[93,1],[16,1],[16,1],[16,1],[16,1],[19,1],[53,1]],performAction:k(function(Kt,ne,He,Te,Qe,ce,Ut){var fe=ce.length-1;switch(Qe){case 8:this.$=ce[fe-1];break;case 9:case 12:case 14:this.$=ce[fe];break;case 10:case 13:this.$=ce[fe-2]+"."+ce[fe];break;case 11:case 15:this.$=ce[fe-1]+ce[fe];break;case 16:case 17:this.$=ce[fe-1]+"~"+ce[fe]+"~";break;case 18:Te.addRelation(ce[fe]);break;case 19:ce[fe-1].title=Te.cleanupLabel(ce[fe]),Te.addRelation(ce[fe-1]);break;case 30:this.$=ce[fe].trim(),Te.setAccTitle(this.$);break;case 31:case 32:this.$=ce[fe].trim(),Te.setAccDescription(this.$);break;case 33:Te.addClassesToNamespace(ce[fe-3],ce[fe-1]);break;case 34:Te.addClassesToNamespace(ce[fe-4],ce[fe-1]);break;case 35:this.$=ce[fe],Te.addNamespace(ce[fe]);break;case 36:this.$=[ce[fe]];break;case 37:this.$=[ce[fe-1]];break;case 38:ce[fe].unshift(ce[fe-2]),this.$=ce[fe];break;case 40:Te.setCssClass(ce[fe-2],ce[fe]);break;case 41:Te.addMembers(ce[fe-3],ce[fe-1]);break;case 42:Te.setCssClass(ce[fe-5],ce[fe-3]),Te.addMembers(ce[fe-5],ce[fe-1]);break;case 43:this.$=ce[fe],Te.addClass(ce[fe]);break;case 44:this.$=ce[fe-1],Te.addClass(ce[fe-1]),Te.setClassLabel(ce[fe-1],ce[fe]);break;case 45:Te.addAnnotation(ce[fe],ce[fe-2]);break;case 46:case 59:this.$=[ce[fe]];break;case 47:ce[fe].push(ce[fe-1]),this.$=ce[fe];break;case 48:break;case 49:Te.addMember(ce[fe-1],Te.cleanupLabel(ce[fe]));break;case 50:break;case 51:break;case 52:this.$={id1:ce[fe-2],id2:ce[fe],relation:ce[fe-1],relationTitle1:"none",relationTitle2:"none"};break;case 53:this.$={id1:ce[fe-3],id2:ce[fe],relation:ce[fe-1],relationTitle1:ce[fe-2],relationTitle2:"none"};break;case 54:this.$={id1:ce[fe-3],id2:ce[fe],relation:ce[fe-2],relationTitle1:"none",relationTitle2:ce[fe-1]};break;case 55:this.$={id1:ce[fe-4],id2:ce[fe],relation:ce[fe-2],relationTitle1:ce[fe-3],relationTitle2:ce[fe-1]};break;case 56:Te.addNote(ce[fe],ce[fe-1]);break;case 57:Te.addNote(ce[fe]);break;case 58:this.$=ce[fe-2],Te.defineClass(ce[fe-1],ce[fe]);break;case 60:this.$=ce[fe-2].concat([ce[fe]]);break;case 61:Te.setDirection("TB");break;case 62:Te.setDirection("BT");break;case 63:Te.setDirection("RL");break;case 64:Te.setDirection("LR");break;case 65:this.$={type1:ce[fe-2],type2:ce[fe],lineType:ce[fe-1]};break;case 66:this.$={type1:"none",type2:ce[fe],lineType:ce[fe-1]};break;case 67:this.$={type1:ce[fe-1],type2:"none",lineType:ce[fe]};break;case 68:this.$={type1:"none",type2:"none",lineType:ce[fe]};break;case 69:this.$=Te.relationType.AGGREGATION;break;case 70:this.$=Te.relationType.EXTENSION;break;case 71:this.$=Te.relationType.COMPOSITION;break;case 72:this.$=Te.relationType.DEPENDENCY;break;case 73:this.$=Te.relationType.LOLLIPOP;break;case 74:this.$=Te.lineType.LINE;break;case 75:this.$=Te.lineType.DOTTED_LINE;break;case 76:case 82:this.$=ce[fe-2],Te.setClickEvent(ce[fe-1],ce[fe]);break;case 77:case 83:this.$=ce[fe-3],Te.setClickEvent(ce[fe-2],ce[fe-1]),Te.setTooltip(ce[fe-2],ce[fe]);break;case 78:this.$=ce[fe-2],Te.setLink(ce[fe-1],ce[fe]);break;case 79:this.$=ce[fe-3],Te.setLink(ce[fe-2],ce[fe-1],ce[fe]);break;case 80:this.$=ce[fe-3],Te.setLink(ce[fe-2],ce[fe-1]),Te.setTooltip(ce[fe-2],ce[fe]);break;case 81:this.$=ce[fe-4],Te.setLink(ce[fe-3],ce[fe-2],ce[fe]),Te.setTooltip(ce[fe-3],ce[fe-1]);break;case 84:this.$=ce[fe-3],Te.setClickEvent(ce[fe-2],ce[fe-1],ce[fe]);break;case 85:this.$=ce[fe-4],Te.setClickEvent(ce[fe-3],ce[fe-2],ce[fe-1]),Te.setTooltip(ce[fe-3],ce[fe]);break;case 86:this.$=ce[fe-3],Te.setLink(ce[fe-2],ce[fe]);break;case 87:this.$=ce[fe-4],Te.setLink(ce[fe-3],ce[fe-1],ce[fe]);break;case 88:this.$=ce[fe-4],Te.setLink(ce[fe-3],ce[fe-1]),Te.setTooltip(ce[fe-3],ce[fe]);break;case 89:this.$=ce[fe-5],Te.setLink(ce[fe-4],ce[fe-2],ce[fe]),Te.setTooltip(ce[fe-4],ce[fe-1]);break;case 90:this.$=ce[fe-2],Te.setCssStyle(ce[fe-1],ce[fe]);break;case 91:Te.setCssClass(ce[fe-1],ce[fe]);break;case 92:this.$=[ce[fe]];break;case 93:ce[fe-2].push(ce[fe]),this.$=ce[fe-2];break;case 95:this.$=ce[fe-1]+ce[fe];break}},"anonymous"),table:[{3:1,4:2,5:3,6:4,7:[1,6],10:5,16:39,18:21,19:40,21:7,23:8,24:9,25:10,26:11,27:12,28:13,29:14,30:15,31:16,32:17,33:t,35:r,37:i,38:22,42:n,43:23,46:a,47:s,49:u,50:h,52:d,54:p,55:g,58:y,60:m,61:x,62:_,63:E,73:w,74:C,76:A,80:M,81:N,84:B,99:O,101:L,102:$},{1:[3]},{1:[2,1]},{1:[2,2]},{1:[2,3]},e(G,[2,5],{8:[1,48]}),{8:[1,49]},e(z,[2,18],{22:[1,50]}),e(z,[2,20]),e(z,[2,21]),e(z,[2,22]),e(z,[2,23]),e(z,[2,24]),e(z,[2,25]),e(z,[2,26]),e(z,[2,27]),e(z,[2,28]),e(z,[2,29]),{34:[1,51]},{36:[1,52]},e(z,[2,32]),e(z,[2,48],{51:53,64:56,65:57,13:[1,54],22:[1,55],66:F,67:X,68:I,69:j,70:H,71:V,72:P}),{39:[1,65]},e(q,[2,39],{39:[1,67],44:[1,66]}),e(z,[2,50]),e(z,[2,51]),{16:68,58:y,84:B,99:O,101:L},{16:39,18:69,19:40,58:y,84:B,99:O,101:L,102:$},{16:39,18:70,19:40,58:y,84:B,99:O,101:L,102:$},{16:39,18:71,19:40,58:y,84:B,99:O,101:L,102:$},{58:[1,72]},{13:[1,73]},{16:39,18:74,19:40,58:y,84:B,99:O,101:L,102:$},{13:Z,53:75},{56:77,58:[1,78]},e(z,[2,61]),e(z,[2,62]),e(z,[2,63]),e(z,[2,64]),e(J,[2,12],{16:39,19:40,18:80,17:[1,79],20:[1,81],58:y,84:B,99:O,101:L,102:$}),e(J,[2,14],{20:[1,82]}),{15:83,16:84,58:y,84:B,99:O,101:L},{16:39,18:85,19:40,58:y,84:B,99:O,101:L,102:$},e(ae,[2,118]),e(ae,[2,119]),e(ae,[2,120]),e(ae,[2,121]),e([1,8,9,12,13,20,22,39,41,44,66,67,68,69,70,71,72,77,79],[2,122]),e(G,[2,6],{10:5,21:7,23:8,24:9,25:10,26:11,27:12,28:13,29:14,30:15,31:16,32:17,18:21,38:22,43:23,16:39,19:40,5:86,33:t,35:r,37:i,42:n,46:a,47:s,49:u,50:h,52:d,54:p,55:g,58:y,60:m,61:x,62:_,63:E,73:w,74:C,76:A,80:M,81:N,84:B,99:O,101:L,102:$}),{5:87,10:5,16:39,18:21,19:40,21:7,23:8,24:9,25:10,26:11,27:12,28:13,29:14,30:15,31:16,32:17,33:t,35:r,37:i,38:22,42:n,43:23,46:a,47:s,49:u,50:h,52:d,54:p,55:g,58:y,60:m,61:x,62:_,63:E,73:w,74:C,76:A,80:M,81:N,84:B,99:O,101:L,102:$},e(z,[2,19]),e(z,[2,30]),e(z,[2,31]),{13:[1,89],16:39,18:88,19:40,58:y,84:B,99:O,101:L,102:$},{51:90,64:56,65:57,66:F,67:X,68:I,69:j,70:H,71:V,72:P},e(z,[2,49]),{65:91,71:V,72:P},e(ue,[2,68],{64:92,66:F,67:X,68:I,69:j,70:H}),e(be,[2,69]),e(be,[2,70]),e(be,[2,71]),e(be,[2,72]),e(be,[2,73]),e(Le,[2,74]),e(Le,[2,75]),{8:[1,94],24:95,40:93,43:23,46:a},{16:96,58:y,84:B,99:O,101:L},{45:97,49:xe},{48:[1,99]},{13:[1,100]},{13:[1,101]},{77:[1,102],79:[1,103]},{22:Ae,57:104,58:oe,80:he,82:105,83:106,84:le,85:ke,86:pe,87:qe,88:me,89:st},{58:[1,116]},{13:Z,53:117},e(z,[2,57]),e(z,[2,123]),{22:Ae,57:118,58:oe,59:[1,119],80:he,82:105,83:106,84:le,85:ke,86:pe,87:qe,88:me,89:st},e(we,[2,59]),{16:39,18:120,19:40,58:y,84:B,99:O,101:L,102:$},e(J,[2,15]),e(J,[2,16]),e(J,[2,17]),{39:[2,35]},{15:122,16:84,17:[1,121],39:[2,9],58:y,84:B,99:O,101:L},e(Et,[2,43],{11:123,12:[1,124]}),e(G,[2,7]),{9:[1,125]},e(wt,[2,52]),{16:39,18:126,19:40,58:y,84:B,99:O,101:L,102:$},{13:[1,128],16:39,18:127,19:40,58:y,84:B,99:O,101:L,102:$},e(ue,[2,67],{64:129,66:F,67:X,68:I,69:j,70:H}),e(ue,[2,66]),{41:[1,130]},{24:95,40:131,43:23,46:a},{8:[1,132],41:[2,36]},e(q,[2,40],{39:[1,133]}),{41:[1,134]},{41:[2,46],45:135,49:xe},{16:39,18:136,19:40,58:y,84:B,99:O,101:L,102:$},e(z,[2,76],{13:[1,137]}),e(z,[2,78],{13:[1,139],75:[1,138]}),e(z,[2,82],{13:[1,140],78:[1,141]}),{13:[1,142]},e(z,[2,90],{59:Tt}),e(er,[2,92],{83:144,22:Ae,58:oe,80:he,84:le,85:ke,86:pe,87:qe,88:me,89:st}),e(tr,[2,94]),e(tr,[2,96]),e(tr,[2,97]),e(tr,[2,98]),e(tr,[2,99]),e(tr,[2,100]),e(tr,[2,101]),e(tr,[2,102]),e(tr,[2,103]),e(tr,[2,104]),e(z,[2,91]),e(z,[2,56]),e(z,[2,58],{59:Tt}),{58:[1,145]},e(J,[2,13]),{15:146,16:84,58:y,84:B,99:O,101:L},{39:[2,11]},e(Et,[2,44]),{13:[1,147]},{1:[2,4]},e(wt,[2,54]),e(wt,[2,53]),{16:39,18:148,19:40,58:y,84:B,99:O,101:L,102:$},e(ue,[2,65]),e(z,[2,33]),{41:[1,149]},{24:95,40:150,41:[2,37],43:23,46:a},{45:151,49:xe},e(q,[2,41]),{41:[2,47]},e(z,[2,45]),e(z,[2,77]),e(z,[2,79]),e(z,[2,80],{75:[1,152]}),e(z,[2,83]),e(z,[2,84],{13:[1,153]}),e(z,[2,86],{13:[1,155],75:[1,154]}),{22:Ae,58:oe,80:he,82:156,83:106,84:le,85:ke,86:pe,87:qe,88:me,89:st},e(tr,[2,95]),e(we,[2,60]),{39:[2,10]},{14:[1,157]},e(wt,[2,55]),e(z,[2,34]),{41:[2,38]},{41:[1,158]},e(z,[2,81]),e(z,[2,85]),e(z,[2,87]),e(z,[2,88],{75:[1,159]}),e(er,[2,93],{83:144,22:Ae,58:oe,80:he,84:le,85:ke,86:pe,87:qe,88:me,89:st}),e(Et,[2,8]),e(q,[2,42]),e(z,[2,89])],defaultActions:{2:[2,1],3:[2,2],4:[2,3],83:[2,35],122:[2,11],125:[2,4],135:[2,47],146:[2,10],150:[2,38]},parseError:k(function(Kt,ne){if(ne.recoverable)this.trace(Kt);else{var He=new Error(Kt);throw He.hash=ne,He}},"parseError"),parse:k(function(Kt){var ne=this,He=[0],Te=[],Qe=[null],ce=[],Ut=this.table,fe="",ze=0,yt=0,bt=0,At=2,ct=1,zt=ce.slice.call(arguments,1),ft=Object.create(this.lexer),Pr={yy:{}};for(var Mi in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Mi)&&(Pr.yy[Mi]=this.yy[Mi]);ft.setInput(Kt,Pr.yy),Pr.yy.lexer=ft,Pr.yy.parser=this,typeof ft.yylloc>"u"&&(ft.yylloc={});var Di=ft.yylloc;ce.push(Di);var ri=ft.options&&ft.options.ranges;typeof Pr.yy.parseError=="function"?this.parseError=Pr.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Gi(Hn){He.length=He.length-2*Hn,Qe.length=Qe.length-Hn,ce.length=ce.length-Hn}k(Gi,"popStack");function Br(){var Hn;return Hn=Te.pop()||ft.lex()||ct,typeof Hn!="number"&&(Hn instanceof Array&&(Te=Hn,Hn=Te.pop()),Hn=ne.symbols_[Hn]||Hn),Hn}k(Br,"lex");for(var sr,hr,Ci,_r,ln,en,bi={},gi,Fr,Bi,Xr;;){if(Ci=He[He.length-1],this.defaultActions[Ci]?_r=this.defaultActions[Ci]:((sr===null||typeof sr>"u")&&(sr=Br()),_r=Ut[Ci]&&Ut[Ci][sr]),typeof _r>"u"||!_r.length||!_r[0]){var xa="";Xr=[];for(gi in Ut[Ci])this.terminals_[gi]&&gi>At&&Xr.push("'"+this.terminals_[gi]+"'");ft.showPosition?xa="Parse error on line "+(ze+1)+`:
`+ft.showPosition()+`
Expecting `+Xr.join(", ")+", got '"+(this.terminals_[sr]||sr)+"'":xa="Parse error on line "+(ze+1)+": Unexpected "+(sr==ct?"end of input":"'"+(this.terminals_[sr]||sr)+"'"),this.parseError(xa,{text:ft.match,token:this.terminals_[sr]||sr,line:ft.yylineno,loc:Di,expected:Xr})}if(_r[0]instanceof Array&&_r.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Ci+", token: "+sr);switch(_r[0]){case 1:He.push(sr),Qe.push(ft.yytext),ce.push(ft.yylloc),He.push(_r[1]),sr=null,hr?(sr=hr,hr=null):(yt=ft.yyleng,fe=ft.yytext,ze=ft.yylineno,Di=ft.yylloc,bt>0&&bt--);break;case 2:if(Fr=this.productions_[_r[1]][1],bi.$=Qe[Qe.length-Fr],bi._$={first_line:ce[ce.length-(Fr||1)].first_line,last_line:ce[ce.length-1].last_line,first_column:ce[ce.length-(Fr||1)].first_column,last_column:ce[ce.length-1].last_column},ri&&(bi._$.range=[ce[ce.length-(Fr||1)].range[0],ce[ce.length-1].range[1]]),en=this.performAction.apply(bi,[fe,yt,ze,Pr.yy,_r[1],Qe,ce].concat(zt)),typeof en<"u")return en;Fr&&(He=He.slice(0,-1*Fr*2),Qe=Qe.slice(0,-1*Fr),ce=ce.slice(0,-1*Fr)),He.push(this.productions_[_r[1]][0]),Qe.push(bi.$),ce.push(bi._$),Bi=Ut[He[He.length-2]][He[He.length-1]],He.push(Bi);break;case 3:return!0}}return!0},"parse")},fr=function(){var Kt={EOF:1,parseError:k(function(ne,He){if(this.yy.parser)this.yy.parser.parseError(ne,He);else throw new Error(ne)},"parseError"),setInput:k(function(ne,He){return this.yy=He||this.yy||{},this._input=ne,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:k(function(){var ne=this._input[0];this.yytext+=ne,this.yyleng++,this.offset++,this.match+=ne,this.matched+=ne;var He=ne.match(/(?:\r\n?|\n).*/g);return He?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),ne},"input"),unput:k(function(ne){var He=ne.length,Te=ne.split(/(?:\r\n?|\n)/g);this._input=ne+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-He),this.offset-=He;var Qe=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Te.length-1&&(this.yylineno-=Te.length-1);var ce=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Te?(Te.length===Qe.length?this.yylloc.first_column:0)+Qe[Qe.length-Te.length].length-Te[0].length:this.yylloc.first_column-He},this.options.ranges&&(this.yylloc.range=[ce[0],ce[0]+this.yyleng-He]),this.yyleng=this.yytext.length,this},"unput"),more:k(function(){return this._more=!0,this},"more"),reject:k(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:k(function(ne){this.unput(this.match.slice(ne))},"less"),pastInput:k(function(){var ne=this.matched.substr(0,this.matched.length-this.match.length);return(ne.length>20?"...":"")+ne.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:k(function(){var ne=this.match;return ne.length<20&&(ne+=this._input.substr(0,20-ne.length)),(ne.substr(0,20)+(ne.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:k(function(){var ne=this.pastInput(),He=new Array(ne.length+1).join("-");return ne+this.upcomingInput()+`
`+He+"^"},"showPosition"),test_match:k(function(ne,He){var Te,Qe,ce;if(this.options.backtrack_lexer&&(ce={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(ce.yylloc.range=this.yylloc.range.slice(0))),Qe=ne[0].match(/(?:\r\n?|\n).*/g),Qe&&(this.yylineno+=Qe.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Qe?Qe[Qe.length-1].length-Qe[Qe.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+ne[0].length},this.yytext+=ne[0],this.match+=ne[0],this.matches=ne,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(ne[0].length),this.matched+=ne[0],Te=this.performAction.call(this,this.yy,this,He,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Te)return Te;if(this._backtrack){for(var Ut in ce)this[Ut]=ce[Ut];return!1}return!1},"test_match"),next:k(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var ne,He,Te,Qe;this._more||(this.yytext="",this.match="");for(var ce=this._currentRules(),Ut=0;Ut<ce.length;Ut++)if(Te=this._input.match(this.rules[ce[Ut]]),Te&&(!He||Te[0].length>He[0].length)){if(He=Te,Qe=Ut,this.options.backtrack_lexer){if(ne=this.test_match(Te,ce[Ut]),ne!==!1)return ne;if(this._backtrack){He=!1;continue}else return!1}else if(!this.options.flex)break}return He?(ne=this.test_match(He,ce[Qe]),ne!==!1?ne:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:k(function(){var ne=this.next();return ne||this.lex()},"lex"),begin:k(function(ne){this.conditionStack.push(ne)},"begin"),popState:k(function(){var ne=this.conditionStack.length-1;return ne>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:k(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:k(function(ne){return ne=this.conditionStack.length-1-Math.abs(ne||0),ne>=0?this.conditionStack[ne]:"INITIAL"},"topState"),pushState:k(function(ne){this.begin(ne)},"pushState"),stateStackSize:k(function(){return this.conditionStack.length},"stateStackSize"),options:{},performAction:k(function(ne,He,Te,Qe){var ce=Qe;switch(Te){case 0:return 60;case 1:return 61;case 2:return 62;case 3:return 63;case 4:break;case 5:break;case 6:return this.begin("acc_title"),33;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),35;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:return 8;case 14:break;case 15:return 7;case 16:return 7;case 17:return"EDGE_STATE";case 18:this.begin("callback_name");break;case 19:this.popState();break;case 20:this.popState(),this.begin("callback_args");break;case 21:return 77;case 22:this.popState();break;case 23:return 78;case 24:this.popState();break;case 25:return"STR";case 26:this.begin("string");break;case 27:return 80;case 28:return 55;case 29:return this.begin("namespace"),42;case 30:return this.popState(),8;case 31:break;case 32:return this.begin("namespace-body"),39;case 33:return this.popState(),41;case 34:return"EOF_IN_STRUCT";case 35:return 8;case 36:break;case 37:return"EDGE_STATE";case 38:return this.begin("class"),46;case 39:return this.popState(),8;case 40:break;case 41:return this.popState(),this.popState(),41;case 42:return this.begin("class-body"),39;case 43:return this.popState(),41;case 44:return"EOF_IN_STRUCT";case 45:return"EDGE_STATE";case 46:return"OPEN_IN_STRUCT";case 47:break;case 48:return"MEMBER";case 49:return 81;case 50:return 73;case 51:return 74;case 52:return 76;case 53:return 52;case 54:return 54;case 55:return 47;case 56:return 48;case 57:return 79;case 58:this.popState();break;case 59:return"GENERICTYPE";case 60:this.begin("generic");break;case 61:this.popState();break;case 62:return"BQUOTE_STR";case 63:this.begin("bqstring");break;case 64:return 75;case 65:return 75;case 66:return 75;case 67:return 75;case 68:return 67;case 69:return 67;case 70:return 69;case 71:return 69;case 72:return 68;case 73:return 66;case 74:return 70;case 75:return 71;case 76:return 72;case 77:return 22;case 78:return 44;case 79:return 99;case 80:return 17;case 81:return"PLUS";case 82:return 85;case 83:return 59;case 84:return 88;case 85:return 88;case 86:return 89;case 87:return"EQUALS";case 88:return"EQUALS";case 89:return 58;case 90:return 12;case 91:return 14;case 92:return"PUNCTUATION";case 93:return 84;case 94:return 101;case 95:return 87;case 96:return 87;case 97:return 9}},"anonymous"),rules:[/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:classDiagram-v2\b)/,/^(?:classDiagram\b)/,/^(?:\[\*\])/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:["])/,/^(?:[^"]*)/,/^(?:["])/,/^(?:style\b)/,/^(?:classDef\b)/,/^(?:namespace\b)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:[{])/,/^(?:[}])/,/^(?:$)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:\[\*\])/,/^(?:class\b)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:[}])/,/^(?:[{])/,/^(?:[}])/,/^(?:$)/,/^(?:\[\*\])/,/^(?:[{])/,/^(?:[\n])/,/^(?:[^{}\n]*)/,/^(?:cssClass\b)/,/^(?:callback\b)/,/^(?:link\b)/,/^(?:click\b)/,/^(?:note for\b)/,/^(?:note\b)/,/^(?:<<)/,/^(?:>>)/,/^(?:href\b)/,/^(?:[~])/,/^(?:[^~]*)/,/^(?:~)/,/^(?:[`])/,/^(?:[^`]+)/,/^(?:[`])/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:\s*<\|)/,/^(?:\s*\|>)/,/^(?:\s*>)/,/^(?:\s*<)/,/^(?:\s*\*)/,/^(?:\s*o\b)/,/^(?:\s*\(\))/,/^(?:--)/,/^(?:\.\.)/,/^(?::{1}[^:\n;]+)/,/^(?::{3})/,/^(?:-)/,/^(?:\.)/,/^(?:\+)/,/^(?::)/,/^(?:,)/,/^(?:#)/,/^(?:#)/,/^(?:%)/,/^(?:=)/,/^(?:=)/,/^(?:\w+)/,/^(?:\[)/,/^(?:\])/,/^(?:[!"#$%&'*+,-.`?\\/])/,/^(?:[0-9]+)/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\s)/,/^(?:\s)/,/^(?:$)/],conditions:{"namespace-body":{rules:[26,33,34,35,36,37,38,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},namespace:{rules:[26,29,30,31,32,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},"class-body":{rules:[26,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},class:{rules:[26,39,40,41,42,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},acc_descr_multiline:{rules:[11,12,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},acc_descr:{rules:[9,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},acc_title:{rules:[7,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},callback_args:{rules:[22,23,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},callback_name:{rules:[19,20,21,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},href:{rules:[26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},struct:{rules:[26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},generic:{rules:[26,49,50,51,52,53,54,55,56,57,58,59,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},bqstring:{rules:[26,49,50,51,52,53,54,55,56,57,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},string:{rules:[24,25,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,8,10,13,14,15,16,17,18,26,27,28,29,38,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97],inclusive:!0}}};return Kt}();kr.lexer=fr;function Mt(){this.yy={}}return k(Mt,"Parser"),Mt.prototype=kr,kr.Parser=Mt,new Mt}(),lB.parser=lB,LK=lB,RK=["#","+","~","-",""],DK=class{static{k(this,"ClassMember")}constructor(e,t){this.memberType=t,this.visibility="",this.classifier="",this.text="";let r=Da(e,at());this.parseMember(r)}getDisplayDetails(){let e=this.visibility+_c(this.id);this.memberType==="method"&&(e+=`(${_c(this.parameters.trim())})`,this.returnType&&(e+=" : "+_c(this.returnType))),e=e.trim();let t=this.parseClassifier();return{displayText:e,cssStyle:t}}parseMember(e){let t="";if(this.memberType==="method"){let i=/([#+~-])?(.+)\((.*)\)([\s$*])?(.*)([$*])?/.exec(e);if(i){let n=i[1]?i[1].trim():"";if(RK.includes(n)&&(this.visibility=n),this.id=i[2],this.parameters=i[3]?i[3].trim():"",t=i[4]?i[4].trim():"",this.returnType=i[5]?i[5].trim():"",t===""){let a=this.returnType.substring(this.returnType.length-1);/[$*]/.exec(a)&&(t=a,this.returnType=this.returnType.substring(0,this.returnType.length-1))}}}else{let i=e.length,n=e.substring(0,1),a=e.substring(i-1);RK.includes(n)&&(this.visibility=n),/[$*]/.exec(a)&&(t=a),this.id=e.substring(this.visibility===""?0:1,t===""?i:i-1)}this.classifier=t,this.id=this.id.startsWith(" ")?" "+this.id.trim():this.id.trim();let r=`${this.visibility?"\\"+this.visibility:""}${_c(this.id)}${this.memberType==="method"?`(${_c(this.parameters)})${this.returnType?" : "+_c(this.returnType):""}`:""}`;this.text=r.replaceAll("<","&lt;").replaceAll(">","&gt;"),this.text.startsWith("\\&lt;")&&(this.text=this.text.replace("\\&lt;","~"))}parseClassifier(){switch(this.classifier){case"*":return"font-style:italic;";case"$":return"text-decoration:underline;";default:return""}}},SS="classId-",AS=[],bs=new Map,IK=new Map,C5=[],ex=[],NK=0,Yc=new Map,uB=0,S5=[],Bm=k(e=>zr.sanitizeText(e,at()),"sanitizeText"),Pm=k(function(e){let t=zr.sanitizeText(e,at()),r="",i=t;if(t.indexOf("~")>0){let n=t.split("~");i=Bm(n[0]),r=Bm(n[1])}return{className:i,type:r}},"splitClassNameAndType"),qwe=k(function(e,t){let r=zr.sanitizeText(e,at());t&&(t=Bm(t));let{className:i}=Pm(r);bs.get(i).label=t,bs.get(i).text=`${t}${bs.get(i).type?`<${bs.get(i).type}>`:""}`},"setClassLabel"),tx=k(function(e){let t=zr.sanitizeText(e,at()),{className:r,type:i}=Pm(t);if(bs.has(r))return;let n=zr.sanitizeText(r,at());bs.set(n,{id:n,type:i,label:n,text:`${n}${i?`&lt;${i}&gt;`:""}`,shape:"classBox",cssClasses:"default",methods:[],members:[],annotations:[],styles:[],domId:SS+n+"-"+NK}),NK++},"addClass"),OK=k(function(e,t){let r={id:`interface${ex.length}`,label:e,classId:t};ex.push(r)},"addInterface"),BK=k(function(e){let t=zr.sanitizeText(e,at());if(bs.has(t))return bs.get(t).domId;throw new Error("Class not found: "+t)},"lookUpDomId"),Xwe=k(function(){AS=[],bs=new Map,C5=[],ex=[],S5=[],S5.push(FK),Yc=new Map,uB=0,cB="TB",ho()},"clear"),Kwe=k(function(e){return bs.get(e)},"getClass"),Zwe=k(function(){return bs},"getClasses"),Qwe=k(function(){return AS},"getRelations"),Jwe=k(function(){return C5},"getNotes"),e6e=k(function(e){Ce.debug("Adding relation: "+JSON.stringify(e));let t=[Hf.LOLLIPOP,Hf.AGGREGATION,Hf.COMPOSITION,Hf.DEPENDENCY,Hf.EXTENSION];e.relation.type1===Hf.LOLLIPOP&&!t.includes(e.relation.type2)?(tx(e.id2),OK(e.id1,e.id2),e.id1=`interface${ex.length-1}`):e.relation.type2===Hf.LOLLIPOP&&!t.includes(e.relation.type1)?(tx(e.id1),OK(e.id2,e.id1),e.id2=`interface${ex.length-1}`):(tx(e.id1),tx(e.id2)),e.id1=Pm(e.id1).className,e.id2=Pm(e.id2).className,e.relationTitle1=zr.sanitizeText(e.relationTitle1.trim(),at()),e.relationTitle2=zr.sanitizeText(e.relationTitle2.trim(),at()),AS.push(e)},"addRelation"),t6e=k(function(e,t){let r=Pm(e).className;bs.get(r).annotations.push(t)},"addAnnotation"),PK=k(function(e,t){tx(e);let r=Pm(e).className,i=bs.get(r);if(typeof t=="string"){let n=t.trim();n.startsWith("<<")&&n.endsWith(">>")?i.annotations.push(Bm(n.substring(2,n.length-2))):n.indexOf(")")>0?i.methods.push(new DK(n,"method")):n&&i.members.push(new DK(n,"attribute"))}},"addMember"),r6e=k(function(e,t){Array.isArray(t)&&(t.reverse(),t.forEach(r=>PK(e,r)))},"addMembers"),i6e=k(function(e,t){let r={id:`note${C5.length}`,class:t,text:e};C5.push(r)},"addNote"),n6e=k(function(e){return e.startsWith(":")&&(e=e.substring(1)),Bm(e.trim())},"cleanupLabel"),hB=k(function(e,t){e.split(",").forEach(function(r){let i=r;/\d/.exec(r[0])&&(i=SS+i);let n=bs.get(i);n&&(n.cssClasses+=" "+t)})},"setCssClass"),a6e=k(function(e,t){for(let r of e){let i=IK.get(r);i===void 0&&(i={id:r,styles:[],textStyles:[]},IK.set(r,i)),t&&t.forEach(function(n){if(/color/.exec(n)){let a=n.replace("fill","bgFill");i.textStyles.push(a)}i.styles.push(n)}),bs.forEach(n=>{n.cssClasses.includes(r)&&n.styles.push(...t.flatMap(a=>a.split(",")))})}},"defineClass"),s6e=k(function(e,t){e.split(",").forEach(function(r){t!==void 0&&(bs.get(r).tooltip=Bm(t))})},"setTooltip"),o6e=k(function(e,t){return t&&Yc.has(t)?Yc.get(t).classes.get(e).tooltip:bs.get(e).tooltip},"getTooltip"),l6e=k(function(e,t,r){let i=at();e.split(",").forEach(function(n){let a=n;/\d/.exec(n[0])&&(a=SS+a);let s=bs.get(a);s&&(s.link=qn.formatUrl(t,i),i.securityLevel==="sandbox"?s.linkTarget="_top":typeof r=="string"?s.linkTarget=Bm(r):s.linkTarget="_blank")}),hB(e,"clickable")},"setLink"),u6e=k(function(e,t,r){e.split(",").forEach(function(i){h6e(i,t,r),bs.get(i).haveCallback=!0}),hB(e,"clickable")},"setClickEvent"),h6e=k(function(e,t,r){let i=zr.sanitizeText(e,at());if(at().securityLevel!=="loose"||t===void 0)return;let n=i;if(bs.has(n)){let a=BK(n),s=[];if(typeof r=="string"){s=r.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let u=0;u<s.length;u++){let h=s[u].trim();h.startsWith('"')&&h.endsWith('"')&&(h=h.substr(1,h.length-2)),s[u]=h}}s.length===0&&s.push(a),S5.push(function(){let u=document.querySelector(`[id="${a}"]`);u!==null&&u.addEventListener("click",function(){qn.runFunc(t,...s)},!1)})}},"setClickFunc"),c6e=k(function(e){S5.forEach(function(t){t(e)})},"bindFunctions"),d6e={LINE:0,DOTTED_LINE:1},Hf={AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3,LOLLIPOP:4},FK=k(function(e){let t=Nr(".mermaidTooltip");(t._groups||t)[0][0]===null&&(t=Nr("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),Nr(e).select("svg").selectAll("g.node").on("mouseover",function(){let r=Nr(this);if(r.attr("title")===null)return;let i=this.getBoundingClientRect();t.transition().duration(200).style("opacity",".9"),t.text(r.attr("title")).style("left",window.scrollX+i.left+(i.right-i.left)/2+"px").style("top",window.scrollY+i.top-14+document.body.scrollTop+"px"),t.html(t.html().replace(/&lt;br\/&gt;/g,"<br/>")),r.classed("hover",!0)}).on("mouseout",function(){t.transition().duration(500).style("opacity",0),Nr(this).classed("hover",!1)})},"setupToolTips"),S5.push(FK),cB="TB",$K=k(()=>cB,"getDirection"),p6e=k(e=>{cB=e},"setDirection"),f6e=k(function(e){Yc.has(e)||(Yc.set(e,{id:e,classes:new Map,children:{},domId:SS+e+"-"+uB}),uB++)},"addNamespace"),g6e=k(function(e){return Yc.get(e)},"getNamespace"),m6e=k(function(){return Yc},"getNamespaces"),y6e=k(function(e,t){if(Yc.has(e))for(let r of t){let{className:i}=Pm(r);bs.get(i).parent=e,Yc.get(e).classes.set(i,bs.get(i))}},"addClassesToNamespace"),v6e=k(function(e,t){let r=bs.get(e);if(!(!t||!r))for(let i of t)i.includes(",")?r.styles.push(...i.split(",")):r.styles.push(i)},"setCssStyle"),k(MK,"getArrowMarker"),x6e=k(()=>{let e=[],t=[],r=at();for(let n of Yc.keys()){let a=Yc.get(n);if(a){let s={id:a.id,label:a.id,isGroup:!0,padding:r.class.padding??16,shape:"rect",cssStyles:["fill: none","stroke: black"],look:r.look};e.push(s)}}for(let n of bs.keys()){let a=bs.get(n);if(a){let s=a;s.parentId=a.parent,s.look=r.look,e.push(s)}}let i=0;for(let n of C5){i++;let a={id:n.id,label:n.text,isGroup:!1,shape:"note",padding:r.class.padding??6,cssStyles:["text-align: left","white-space: nowrap",`fill: ${r.themeVariables.noteBkgColor}`,`stroke: ${r.themeVariables.noteBorderColor}`],look:r.look};e.push(a);let s=bs.get(n.class)?.id??"";if(s){let u={id:`edgeNote${i}`,start:n.id,end:s,type:"normal",thickness:"normal",classes:"relation",arrowTypeStart:"none",arrowTypeEnd:"none",arrowheadStyle:"",labelStyle:[""],style:["fill: none"],pattern:"dotted",look:r.look};t.push(u)}}for(let n of ex){let a={id:n.id,label:n.label,isGroup:!1,shape:"rect",cssStyles:["opacity: 0;"],look:r.look};e.push(a)}i=0;for(let n of AS){i++;let a={id:pj(n.id1,n.id2,{prefix:"id",counter:i}),start:n.id1,end:n.id2,type:"normal",label:n.title,labelpos:"c",thickness:"normal",classes:"relation",arrowTypeStart:MK(n.relation.type1),arrowTypeEnd:MK(n.relation.type2),startLabelRight:n.relationTitle1==="none"?"":n.relationTitle1,endLabelLeft:n.relationTitle2==="none"?"":n.relationTitle2,arrowheadStyle:"",labelStyle:["display: inline-block"],style:n.style||"",pattern:n.relation.lineType==1?"dashed":"solid",look:r.look};t.push(a)}return{nodes:e,edges:t,other:{},config:r,direction:$K()}},"getData"),MS={setAccTitle:Ks,getAccTitle:Bo,getAccDescription:Po,setAccDescription:_o,getConfig:k(()=>at().class,"getConfig"),addClass:tx,bindFunctions:c6e,clear:Xwe,getClass:Kwe,getClasses:Zwe,getNotes:Jwe,addAnnotation:t6e,addNote:i6e,getRelations:Qwe,addRelation:e6e,getDirection:$K,setDirection:p6e,addMember:PK,addMembers:r6e,cleanupLabel:n6e,lineType:d6e,relationType:Hf,setClickEvent:u6e,setCssClass:hB,defineClass:a6e,setLink:l6e,getTooltip:o6e,setTooltip:s6e,lookUpDomId:BK,setDiagramTitle:Fo,getDiagramTitle:$o,setClassLabel:qwe,addNamespace:f6e,addClassesToNamespace:y6e,getNamespace:g6e,getNamespaces:m6e,setCssStyle:v6e,getData:x6e},b6e=k(e=>`g.classGroup text {
  fill: ${e.nodeBorder||e.classText};
  stroke: none;
  font-family: ${e.fontFamily};
  font-size: 10px;

  .title {
    font-weight: bolder;
  }

}

.nodeLabel, .edgeLabel {
  color: ${e.classText};
}
.edgeLabel .label rect {
  fill: ${e.mainBkg};
}
.label text {
  fill: ${e.classText};
}

.labelBkg {
  background: ${e.mainBkg};
}
.edgeLabel .label span {
  background: ${e.mainBkg};
}

.classTitle {
  font-weight: bolder;
}
.node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${e.mainBkg};
    stroke: ${e.nodeBorder};
    stroke-width: 1px;
  }


.divider {
  stroke: ${e.nodeBorder};
  stroke-width: 1;
}

g.clickable {
  cursor: pointer;
}

g.classGroup rect {
  fill: ${e.mainBkg};
  stroke: ${e.nodeBorder};
}

g.classGroup line {
  stroke: ${e.nodeBorder};
  stroke-width: 1;
}

.classLabel .box {
  stroke: none;
  stroke-width: 0;
  fill: ${e.mainBkg};
  opacity: 0.5;
}

.classLabel .label {
  fill: ${e.nodeBorder};
  font-size: 10px;
}

.relation {
  stroke: ${e.lineColor};
  stroke-width: 1;
  fill: none;
}

.dashed-line{
  stroke-dasharray: 3;
}

.dotted-line{
  stroke-dasharray: 1 2;
}

#compositionStart, .composition {
  fill: ${e.lineColor} !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#compositionEnd, .composition {
  fill: ${e.lineColor} !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#dependencyStart, .dependency {
  fill: ${e.lineColor} !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#dependencyStart, .dependency {
  fill: ${e.lineColor} !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#extensionStart, .extension {
  fill: transparent !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#extensionEnd, .extension {
  fill: transparent !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#aggregationStart, .aggregation {
  fill: transparent !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#aggregationEnd, .aggregation {
  fill: transparent !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#lollipopStart, .lollipop {
  fill: ${e.mainBkg} !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#lollipopEnd, .lollipop {
  fill: ${e.mainBkg} !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

.edgeTerminals {
  font-size: 11px;
  line-height: initial;
}

.classTitleText {
  text-anchor: middle;
  font-size: 18px;
  fill: ${e.textColor};
}
`,"getStyles"),zK=b6e,_6e=k((e,t="TB")=>{if(!e.doc)return t;let r=t;for(let i of e.doc)i.stmt==="dir"&&(r=i.value);return r},"getDir"),w6e=k(function(e,t){return t.db.getClasses()},"getClasses"),k6e=k(async function(e,t,r,i){Ce.info("REF0:"),Ce.info("Drawing class diagram (v3)",t);let{securityLevel:n,state:a,layout:s}=at(),u=i.db.getData(),h=kI(t,n);u.type=i.type,u.layoutAlgorithm=zV(s),u.nodeSpacing=a?.nodeSpacing||50,u.rankSpacing=a?.rankSpacing||50,u.markers=["aggregation","extension","composition","dependency","lollipop"],u.diagramId=t,await fI(u,h),qn.insertTitle(h,"classDiagramTitleText",a?.titleTopMargin??25,i.db.getDiagramTitle()),TI(h,8,"classDiagram",a?.useMaxWidth??!0)},"draw"),GK={getClasses:w6e,draw:k6e,getDir:_6e}}),E6e={};oi(E6e,{diagram:()=>C6e});var C6e,KXe=D(()=>{T6e(),Ov(),fm(),sm(),B0(),Oh(),xf(),uh(),ch(),Os(),Qn(),C6e={parser:LK,db:MS,renderer:GK,styles:zK,init:k(e=>{e.class||(e.class={}),e.class.arrowMarkerAbsolute=e.arrowMarkerAbsolute,MS.clear()},"init")}}),S6e={};oi(S6e,{diagram:()=>A6e});var A6e,ZXe=D(()=>{T6e(),Ov(),fm(),sm(),B0(),Oh(),xf(),uh(),ch(),Os(),Qn(),A6e={parser:LK,db:MS,renderer:GK,styles:zK,init:k(e=>{e.class||(e.class={}),e.class.arrowMarkerAbsolute=e.arrowMarkerAbsolute,MS.clear()},"init")}});function dB(e="",t=0,r="",i=xB){let n=r!==null&&r.length>0?`${i}${r}`:"";return`${Q6e}-${e}${n}-${t}`}function LS(e,t,r){if(!t.id||t.id==="</join></fork>"||t.id==="</choice>")return;t.cssClasses&&(Array.isArray(t.cssCompiledStyles)||(t.cssCompiledStyles=[]),t.cssClasses.split(" ").forEach(n=>{if(r.get(n)){let a=r.get(n);t.cssCompiledStyles=[...t.cssCompiledStyles,...a.styles]}}));let i=e.find(n=>n.id===t.id);i?Object.assign(i,t):e.push(t)}function M6e(e){return e?.classes?.join(" ")??""}function L6e(e){return e?.styles??[]}function UK(){return new Map}function pB(e=""){let t=e;return e===bB&&(R5++,t=`${aZ}${R5}`),t}function fB(e="",t=A5){return e===bB?aZ:t}function R6e(e=""){let t=e;return e===sZ&&(R5++,t=`${oZ}${R5}`),t}function D6e(e="",t=A5){return e===sZ?oZ:t}function I6e(e,t,r){let i=pB(e.id.trim()),n=fB(e.id.trim(),e.type),a=pB(t.id.trim()),s=fB(t.id.trim(),t.type);Wf(i,n,e.doc,e.description,e.note,e.classes,e.styles,e.textStyles),Wf(a,s,t.doc,t.description,t.note,t.classes,t.styles,t.textStyles),qu.relations.push({id1:i,id2:a,relationTitle:zr.sanitizeText(r,at())})}var gB,jK,N6e,HK,RS,mB,O6e,B6e,P6e,A5,VK,WK,YK,qK,XK,KK,yB,vB,F6e,$6e,ZK,QK,z6e,G6e,M5,U6e,j6e,JK,H6e,V6e,W6e,Y6e,q6e,X6e,K6e,Z6e,eZ,tZ,Q6e,xB,J6e,rZ,iZ,eke,tke,rke,DS,Vf,ike,nZ,L5,nke,bB,aZ,sZ,oZ,lZ,uZ,ake,ske,IS,_B,hZ,NS,rx,cZ,OS,qu,R5,dZ,oke,lke,BS,uke,hke,PS,wB,cke,Wf,pZ,Fm,fZ,dke,pke,gZ,kB,fke,gke,mZ,mke,TB,yke,vke,xke,bke,_ke,wke,Z0,kke,yZ,Tke=D(()=>{Ov(),fm(),Os(),Qn(),gB=function(){var e=k(function(P,q,Z,J){for(Z=Z||{},J=P.length;J--;Z[P[J]]=q);return Z},"o"),t=[1,2],r=[1,3],i=[1,4],n=[2,4],a=[1,9],s=[1,11],u=[1,16],h=[1,17],d=[1,18],p=[1,19],g=[1,32],y=[1,20],m=[1,21],x=[1,22],_=[1,23],E=[1,24],w=[1,26],C=[1,27],A=[1,28],M=[1,29],N=[1,30],B=[1,31],O=[1,34],L=[1,35],$=[1,36],G=[1,37],z=[1,33],F=[1,4,5,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,45,48,49,50,51,54],X=[1,4,5,14,15,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,45,48,49,50,51,54],I=[4,5,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,45,48,49,50,51,54],j={trace:k(function(){},"trace"),yy:{},symbols_:{error:2,start:3,SPACE:4,NL:5,SD:6,document:7,line:8,statement:9,classDefStatement:10,styleStatement:11,cssClassStatement:12,idStatement:13,DESCR:14,"-->":15,HIDE_EMPTY:16,scale:17,WIDTH:18,COMPOSIT_STATE:19,STRUCT_START:20,STRUCT_STOP:21,STATE_DESCR:22,AS:23,ID:24,FORK:25,JOIN:26,CHOICE:27,CONCURRENT:28,note:29,notePosition:30,NOTE_TEXT:31,direction:32,acc_title:33,acc_title_value:34,acc_descr:35,acc_descr_value:36,acc_descr_multiline_value:37,classDef:38,CLASSDEF_ID:39,CLASSDEF_STYLEOPTS:40,DEFAULT:41,style:42,STYLE_IDS:43,STYLEDEF_STYLEOPTS:44,class:45,CLASSENTITY_IDS:46,STYLECLASS:47,direction_tb:48,direction_bt:49,direction_rl:50,direction_lr:51,eol:52,";":53,EDGE_STATE:54,STYLE_SEPARATOR:55,left_of:56,right_of:57,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NL",6:"SD",14:"DESCR",15:"-->",16:"HIDE_EMPTY",17:"scale",18:"WIDTH",19:"COMPOSIT_STATE",20:"STRUCT_START",21:"STRUCT_STOP",22:"STATE_DESCR",23:"AS",24:"ID",25:"FORK",26:"JOIN",27:"CHOICE",28:"CONCURRENT",29:"note",31:"NOTE_TEXT",33:"acc_title",34:"acc_title_value",35:"acc_descr",36:"acc_descr_value",37:"acc_descr_multiline_value",38:"classDef",39:"CLASSDEF_ID",40:"CLASSDEF_STYLEOPTS",41:"DEFAULT",42:"style",43:"STYLE_IDS",44:"STYLEDEF_STYLEOPTS",45:"class",46:"CLASSENTITY_IDS",47:"STYLECLASS",48:"direction_tb",49:"direction_bt",50:"direction_rl",51:"direction_lr",53:";",54:"EDGE_STATE",55:"STYLE_SEPARATOR",56:"left_of",57:"right_of"},productions_:[0,[3,2],[3,2],[3,2],[7,0],[7,2],[8,2],[8,1],[8,1],[9,1],[9,1],[9,1],[9,1],[9,2],[9,3],[9,4],[9,1],[9,2],[9,1],[9,4],[9,3],[9,6],[9,1],[9,1],[9,1],[9,1],[9,4],[9,4],[9,1],[9,2],[9,2],[9,1],[10,3],[10,3],[11,3],[12,3],[32,1],[32,1],[32,1],[32,1],[52,1],[52,1],[13,1],[13,1],[13,3],[13,3],[30,1],[30,1]],performAction:k(function(P,q,Z,J,ae,ue,be){var Le=ue.length-1;switch(ae){case 3:return J.setRootDoc(ue[Le]),ue[Le];case 4:this.$=[];break;case 5:ue[Le]!="nl"&&(ue[Le-1].push(ue[Le]),this.$=ue[Le-1]);break;case 6:case 7:this.$=ue[Le];break;case 8:this.$="nl";break;case 12:this.$=ue[Le];break;case 13:let he=ue[Le-1];he.description=J.trimColon(ue[Le]),this.$=he;break;case 14:this.$={stmt:"relation",state1:ue[Le-2],state2:ue[Le]};break;case 15:let le=J.trimColon(ue[Le]);this.$={stmt:"relation",state1:ue[Le-3],state2:ue[Le-1],description:le};break;case 19:this.$={stmt:"state",id:ue[Le-3],type:"default",description:"",doc:ue[Le-1]};break;case 20:var xe=ue[Le],Ae=ue[Le-2].trim();if(ue[Le].match(":")){var oe=ue[Le].split(":");xe=oe[0],Ae=[Ae,oe[1]]}this.$={stmt:"state",id:xe,type:"default",description:Ae};break;case 21:this.$={stmt:"state",id:ue[Le-3],type:"default",description:ue[Le-5],doc:ue[Le-1]};break;case 22:this.$={stmt:"state",id:ue[Le],type:"fork"};break;case 23:this.$={stmt:"state",id:ue[Le],type:"join"};break;case 24:this.$={stmt:"state",id:ue[Le],type:"choice"};break;case 25:this.$={stmt:"state",id:J.getDividerId(),type:"divider"};break;case 26:this.$={stmt:"state",id:ue[Le-1].trim(),note:{position:ue[Le-2].trim(),text:ue[Le].trim()}};break;case 29:this.$=ue[Le].trim(),J.setAccTitle(this.$);break;case 30:case 31:this.$=ue[Le].trim(),J.setAccDescription(this.$);break;case 32:case 33:this.$={stmt:"classDef",id:ue[Le-1].trim(),classes:ue[Le].trim()};break;case 34:this.$={stmt:"style",id:ue[Le-1].trim(),styleClass:ue[Le].trim()};break;case 35:this.$={stmt:"applyClass",id:ue[Le-1].trim(),styleClass:ue[Le].trim()};break;case 36:J.setDirection("TB"),this.$={stmt:"dir",value:"TB"};break;case 37:J.setDirection("BT"),this.$={stmt:"dir",value:"BT"};break;case 38:J.setDirection("RL"),this.$={stmt:"dir",value:"RL"};break;case 39:J.setDirection("LR"),this.$={stmt:"dir",value:"LR"};break;case 42:case 43:this.$={stmt:"state",id:ue[Le].trim(),type:"default",description:""};break;case 44:this.$={stmt:"state",id:ue[Le-2].trim(),classes:[ue[Le].trim()],type:"default",description:""};break;case 45:this.$={stmt:"state",id:ue[Le-2].trim(),classes:[ue[Le].trim()],type:"default",description:""};break}},"anonymous"),table:[{3:1,4:t,5:r,6:i},{1:[3]},{3:5,4:t,5:r,6:i},{3:6,4:t,5:r,6:i},e([1,4,5,16,17,19,22,24,25,26,27,28,29,33,35,37,38,42,45,48,49,50,51,54],n,{7:7}),{1:[2,1]},{1:[2,2]},{1:[2,3],4:a,5:s,8:8,9:10,10:12,11:13,12:14,13:15,16:u,17:h,19:d,22:p,24:g,25:y,26:m,27:x,28:_,29:E,32:25,33:w,35:C,37:A,38:M,42:N,45:B,48:O,49:L,50:$,51:G,54:z},e(F,[2,5]),{9:38,10:12,11:13,12:14,13:15,16:u,17:h,19:d,22:p,24:g,25:y,26:m,27:x,28:_,29:E,32:25,33:w,35:C,37:A,38:M,42:N,45:B,48:O,49:L,50:$,51:G,54:z},e(F,[2,7]),e(F,[2,8]),e(F,[2,9]),e(F,[2,10]),e(F,[2,11]),e(F,[2,12],{14:[1,39],15:[1,40]}),e(F,[2,16]),{18:[1,41]},e(F,[2,18],{20:[1,42]}),{23:[1,43]},e(F,[2,22]),e(F,[2,23]),e(F,[2,24]),e(F,[2,25]),{30:44,31:[1,45],56:[1,46],57:[1,47]},e(F,[2,28]),{34:[1,48]},{36:[1,49]},e(F,[2,31]),{39:[1,50],41:[1,51]},{43:[1,52]},{46:[1,53]},e(X,[2,42],{55:[1,54]}),e(X,[2,43],{55:[1,55]}),e(F,[2,36]),e(F,[2,37]),e(F,[2,38]),e(F,[2,39]),e(F,[2,6]),e(F,[2,13]),{13:56,24:g,54:z},e(F,[2,17]),e(I,n,{7:57}),{24:[1,58]},{24:[1,59]},{23:[1,60]},{24:[2,46]},{24:[2,47]},e(F,[2,29]),e(F,[2,30]),{40:[1,61]},{40:[1,62]},{44:[1,63]},{47:[1,64]},{24:[1,65]},{24:[1,66]},e(F,[2,14],{14:[1,67]}),{4:a,5:s,8:8,9:10,10:12,11:13,12:14,13:15,16:u,17:h,19:d,21:[1,68],22:p,24:g,25:y,26:m,27:x,28:_,29:E,32:25,33:w,35:C,37:A,38:M,42:N,45:B,48:O,49:L,50:$,51:G,54:z},e(F,[2,20],{20:[1,69]}),{31:[1,70]},{24:[1,71]},e(F,[2,32]),e(F,[2,33]),e(F,[2,34]),e(F,[2,35]),e(X,[2,44]),e(X,[2,45]),e(F,[2,15]),e(F,[2,19]),e(I,n,{7:72}),e(F,[2,26]),e(F,[2,27]),{4:a,5:s,8:8,9:10,10:12,11:13,12:14,13:15,16:u,17:h,19:d,21:[1,73],22:p,24:g,25:y,26:m,27:x,28:_,29:E,32:25,33:w,35:C,37:A,38:M,42:N,45:B,48:O,49:L,50:$,51:G,54:z},e(F,[2,21])],defaultActions:{5:[2,1],6:[2,2],46:[2,46],47:[2,47]},parseError:k(function(P,q){if(q.recoverable)this.trace(P);else{var Z=new Error(P);throw Z.hash=q,Z}},"parseError"),parse:k(function(P){var q=this,Z=[0],J=[],ae=[null],ue=[],be=this.table,Le="",xe=0,Ae=0,oe=0,he=2,le=1,ke=ue.slice.call(arguments,1),pe=Object.create(this.lexer),qe={yy:{}};for(var me in this.yy)Object.prototype.hasOwnProperty.call(this.yy,me)&&(qe.yy[me]=this.yy[me]);pe.setInput(P,qe.yy),qe.yy.lexer=pe,qe.yy.parser=this,typeof pe.yylloc>"u"&&(pe.yylloc={});var st=pe.yylloc;ue.push(st);var we=pe.options&&pe.options.ranges;typeof qe.yy.parseError=="function"?this.parseError=qe.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Et(Ut){Z.length=Z.length-2*Ut,ae.length=ae.length-Ut,ue.length=ue.length-Ut}k(Et,"popStack");function wt(){var Ut;return Ut=J.pop()||pe.lex()||le,typeof Ut!="number"&&(Ut instanceof Array&&(J=Ut,Ut=J.pop()),Ut=q.symbols_[Ut]||Ut),Ut}k(wt,"lex");for(var Tt,er,tr,kr,fr,Mt,Kt={},ne,He,Te,Qe;;){if(tr=Z[Z.length-1],this.defaultActions[tr]?kr=this.defaultActions[tr]:((Tt===null||typeof Tt>"u")&&(Tt=wt()),kr=be[tr]&&be[tr][Tt]),typeof kr>"u"||!kr.length||!kr[0]){var ce="";Qe=[];for(ne in be[tr])this.terminals_[ne]&&ne>he&&Qe.push("'"+this.terminals_[ne]+"'");pe.showPosition?ce="Parse error on line "+(xe+1)+`:
`+pe.showPosition()+`
Expecting `+Qe.join(", ")+", got '"+(this.terminals_[Tt]||Tt)+"'":ce="Parse error on line "+(xe+1)+": Unexpected "+(Tt==le?"end of input":"'"+(this.terminals_[Tt]||Tt)+"'"),this.parseError(ce,{text:pe.match,token:this.terminals_[Tt]||Tt,line:pe.yylineno,loc:st,expected:Qe})}if(kr[0]instanceof Array&&kr.length>1)throw new Error("Parse Error: multiple actions possible at state: "+tr+", token: "+Tt);switch(kr[0]){case 1:Z.push(Tt),ae.push(pe.yytext),ue.push(pe.yylloc),Z.push(kr[1]),Tt=null,er?(Tt=er,er=null):(Ae=pe.yyleng,Le=pe.yytext,xe=pe.yylineno,st=pe.yylloc,oe>0&&oe--);break;case 2:if(He=this.productions_[kr[1]][1],Kt.$=ae[ae.length-He],Kt._$={first_line:ue[ue.length-(He||1)].first_line,last_line:ue[ue.length-1].last_line,first_column:ue[ue.length-(He||1)].first_column,last_column:ue[ue.length-1].last_column},we&&(Kt._$.range=[ue[ue.length-(He||1)].range[0],ue[ue.length-1].range[1]]),Mt=this.performAction.apply(Kt,[Le,Ae,xe,qe.yy,kr[1],ae,ue].concat(ke)),typeof Mt<"u")return Mt;He&&(Z=Z.slice(0,-1*He*2),ae=ae.slice(0,-1*He),ue=ue.slice(0,-1*He)),Z.push(this.productions_[kr[1]][0]),ae.push(Kt.$),ue.push(Kt._$),Te=be[Z[Z.length-2]][Z[Z.length-1]],Z.push(Te);break;case 3:return!0}}return!0},"parse")},H=function(){var P={EOF:1,parseError:k(function(q,Z){if(this.yy.parser)this.yy.parser.parseError(q,Z);else throw new Error(q)},"parseError"),setInput:k(function(q,Z){return this.yy=Z||this.yy||{},this._input=q,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:k(function(){var q=this._input[0];this.yytext+=q,this.yyleng++,this.offset++,this.match+=q,this.matched+=q;var Z=q.match(/(?:\r\n?|\n).*/g);return Z?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),q},"input"),unput:k(function(q){var Z=q.length,J=q.split(/(?:\r\n?|\n)/g);this._input=q+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Z),this.offset-=Z;var ae=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),J.length-1&&(this.yylineno-=J.length-1);var ue=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:J?(J.length===ae.length?this.yylloc.first_column:0)+ae[ae.length-J.length].length-J[0].length:this.yylloc.first_column-Z},this.options.ranges&&(this.yylloc.range=[ue[0],ue[0]+this.yyleng-Z]),this.yyleng=this.yytext.length,this},"unput"),more:k(function(){return this._more=!0,this},"more"),reject:k(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:k(function(q){this.unput(this.match.slice(q))},"less"),pastInput:k(function(){var q=this.matched.substr(0,this.matched.length-this.match.length);return(q.length>20?"...":"")+q.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:k(function(){var q=this.match;return q.length<20&&(q+=this._input.substr(0,20-q.length)),(q.substr(0,20)+(q.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:k(function(){var q=this.pastInput(),Z=new Array(q.length+1).join("-");return q+this.upcomingInput()+`
`+Z+"^"},"showPosition"),test_match:k(function(q,Z){var J,ae,ue;if(this.options.backtrack_lexer&&(ue={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(ue.yylloc.range=this.yylloc.range.slice(0))),ae=q[0].match(/(?:\r\n?|\n).*/g),ae&&(this.yylineno+=ae.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:ae?ae[ae.length-1].length-ae[ae.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+q[0].length},this.yytext+=q[0],this.match+=q[0],this.matches=q,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(q[0].length),this.matched+=q[0],J=this.performAction.call(this,this.yy,this,Z,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),J)return J;if(this._backtrack){for(var be in ue)this[be]=ue[be];return!1}return!1},"test_match"),next:k(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var q,Z,J,ae;this._more||(this.yytext="",this.match="");for(var ue=this._currentRules(),be=0;be<ue.length;be++)if(J=this._input.match(this.rules[ue[be]]),J&&(!Z||J[0].length>Z[0].length)){if(Z=J,ae=be,this.options.backtrack_lexer){if(q=this.test_match(J,ue[be]),q!==!1)return q;if(this._backtrack){Z=!1;continue}else return!1}else if(!this.options.flex)break}return Z?(q=this.test_match(Z,ue[ae]),q!==!1?q:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:k(function(){var q=this.next();return q||this.lex()},"lex"),begin:k(function(q){this.conditionStack.push(q)},"begin"),popState:k(function(){var q=this.conditionStack.length-1;return q>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:k(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:k(function(q){return q=this.conditionStack.length-1-Math.abs(q||0),q>=0?this.conditionStack[q]:"INITIAL"},"topState"),pushState:k(function(q){this.begin(q)},"pushState"),stateStackSize:k(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:k(function(q,Z,J,ae){var ue=ae;switch(J){case 0:return 41;case 1:return 48;case 2:return 49;case 3:return 50;case 4:return 51;case 5:break;case 6:break;case 7:return 5;case 8:break;case 9:break;case 10:break;case 11:break;case 12:return this.pushState("SCALE"),17;case 13:return 18;case 14:this.popState();break;case 15:return this.begin("acc_title"),33;case 16:return this.popState(),"acc_title_value";case 17:return this.begin("acc_descr"),35;case 18:return this.popState(),"acc_descr_value";case 19:this.begin("acc_descr_multiline");break;case 20:this.popState();break;case 21:return"acc_descr_multiline_value";case 22:return this.pushState("CLASSDEF"),38;case 23:return this.popState(),this.pushState("CLASSDEFID"),"DEFAULT_CLASSDEF_ID";case 24:return this.popState(),this.pushState("CLASSDEFID"),39;case 25:return this.popState(),40;case 26:return this.pushState("CLASS"),45;case 27:return this.popState(),this.pushState("CLASS_STYLE"),46;case 28:return this.popState(),47;case 29:return this.pushState("STYLE"),42;case 30:return this.popState(),this.pushState("STYLEDEF_STYLES"),43;case 31:return this.popState(),44;case 32:return this.pushState("SCALE"),17;case 33:return 18;case 34:this.popState();break;case 35:this.pushState("STATE");break;case 36:return this.popState(),Z.yytext=Z.yytext.slice(0,-8).trim(),25;case 37:return this.popState(),Z.yytext=Z.yytext.slice(0,-8).trim(),26;case 38:return this.popState(),Z.yytext=Z.yytext.slice(0,-10).trim(),27;case 39:return this.popState(),Z.yytext=Z.yytext.slice(0,-8).trim(),25;case 40:return this.popState(),Z.yytext=Z.yytext.slice(0,-8).trim(),26;case 41:return this.popState(),Z.yytext=Z.yytext.slice(0,-10).trim(),27;case 42:return 48;case 43:return 49;case 44:return 50;case 45:return 51;case 46:this.pushState("STATE_STRING");break;case 47:return this.pushState("STATE_ID"),"AS";case 48:return this.popState(),"ID";case 49:this.popState();break;case 50:return"STATE_DESCR";case 51:return 19;case 52:this.popState();break;case 53:return this.popState(),this.pushState("struct"),20;case 54:break;case 55:return this.popState(),21;case 56:break;case 57:return this.begin("NOTE"),29;case 58:return this.popState(),this.pushState("NOTE_ID"),56;case 59:return this.popState(),this.pushState("NOTE_ID"),57;case 60:this.popState(),this.pushState("FLOATING_NOTE");break;case 61:return this.popState(),this.pushState("FLOATING_NOTE_ID"),"AS";case 62:break;case 63:return"NOTE_TEXT";case 64:return this.popState(),"ID";case 65:return this.popState(),this.pushState("NOTE_TEXT"),24;case 66:return this.popState(),Z.yytext=Z.yytext.substr(2).trim(),31;case 67:return this.popState(),Z.yytext=Z.yytext.slice(0,-8).trim(),31;case 68:return 6;case 69:return 6;case 70:return 16;case 71:return 54;case 72:return 24;case 73:return Z.yytext=Z.yytext.trim(),14;case 74:return 15;case 75:return 28;case 76:return 55;case 77:return 5;case 78:return"INVALID"}},"anonymous"),rules:[/^(?:default\b)/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:[\s]+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:classDef\s+)/i,/^(?:DEFAULT\s+)/i,/^(?:\w+\s+)/i,/^(?:[^\n]*)/i,/^(?:class\s+)/i,/^(?:(\w+)+((,\s*\w+)*))/i,/^(?:[^\n]*)/i,/^(?:style\s+)/i,/^(?:[\w,]+\s+)/i,/^(?:[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:state\s+)/i,/^(?:.*<<fork>>)/i,/^(?:.*<<join>>)/i,/^(?:.*<<choice>>)/i,/^(?:.*\[\[fork\]\])/i,/^(?:.*\[\[join\]\])/i,/^(?:.*\[\[choice\]\])/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:["])/i,/^(?:\s*as\s+)/i,/^(?:[^\n\{]*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n\s\{]+)/i,/^(?:\n)/i,/^(?:\{)/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:\})/i,/^(?:[\n])/i,/^(?:note\s+)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:")/i,/^(?:\s*as\s*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n]*)/i,/^(?:\s*[^:\n\s\-]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:[\s\S]*?end note\b)/i,/^(?:stateDiagram\s+)/i,/^(?:stateDiagram-v2\s+)/i,/^(?:hide empty description\b)/i,/^(?:\[\*\])/i,/^(?:[^:\n\s\-\{]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:-->)/i,/^(?:--)/i,/^(?::::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{LINE:{rules:[9,10],inclusive:!1},struct:{rules:[9,10,22,26,29,35,42,43,44,45,54,55,56,57,71,72,73,74,75],inclusive:!1},FLOATING_NOTE_ID:{rules:[64],inclusive:!1},FLOATING_NOTE:{rules:[61,62,63],inclusive:!1},NOTE_TEXT:{rules:[66,67],inclusive:!1},NOTE_ID:{rules:[65],inclusive:!1},NOTE:{rules:[58,59,60],inclusive:!1},STYLEDEF_STYLEOPTS:{rules:[],inclusive:!1},STYLEDEF_STYLES:{rules:[31],inclusive:!1},STYLE_IDS:{rules:[],inclusive:!1},STYLE:{rules:[30],inclusive:!1},CLASS_STYLE:{rules:[28],inclusive:!1},CLASS:{rules:[27],inclusive:!1},CLASSDEFID:{rules:[25],inclusive:!1},CLASSDEF:{rules:[23,24],inclusive:!1},acc_descr_multiline:{rules:[20,21],inclusive:!1},acc_descr:{rules:[18],inclusive:!1},acc_title:{rules:[16],inclusive:!1},SCALE:{rules:[13,14,33,34],inclusive:!1},ALIAS:{rules:[],inclusive:!1},STATE_ID:{rules:[48],inclusive:!1},STATE_STRING:{rules:[49,50],inclusive:!1},FORK_STATE:{rules:[],inclusive:!1},STATE:{rules:[9,10,36,37,38,39,40,41,46,47,51,52,53],inclusive:!1},ID:{rules:[9,10],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,8,10,11,12,15,17,19,22,26,29,32,35,53,57,68,69,70,71,72,73,74,76,77,78],inclusive:!0}}};return P}();j.lexer=H;function V(){this.yy={}}return k(V,"Parser"),V.prototype=j,j.Parser=V,new V}(),gB.parser=gB,jK=gB,N6e="LR",HK="TB",RS="state",mB="relation",O6e="classDef",B6e="style",P6e="applyClass",A5="default",VK="divider",WK="fill:none",YK="fill: #333",qK="c",XK="text",KK="normal",yB="rect",vB="rectWithTitle",F6e="stateStart",$6e="stateEnd",ZK="divider",QK="roundedWithTitle",z6e="note",G6e="noteGroup",M5="statediagram",U6e="state",j6e=`${M5}-${U6e}`,JK="transition",H6e="note",V6e="note-edge",W6e=`${JK} ${V6e}`,Y6e=`${M5}-${H6e}`,q6e="cluster",X6e=`${M5}-${q6e}`,K6e="cluster-alt",Z6e=`${M5}-${K6e}`,eZ="parent",tZ="note",Q6e="state",xB="----",J6e=`${xB}${tZ}`,rZ=`${xB}${eZ}`,iZ=k((e,t=HK)=>{if(!e.doc)return t;let r=t;for(let i of e.doc)i.stmt==="dir"&&(r=i.value);return r},"getDir"),eke=k(function(e,t){return t.db.extract(t.db.getRootDocV2()),t.db.getClasses()},"getClasses"),tke=k(async function(e,t,r,i){Ce.info("REF0:"),Ce.info("Drawing state diagram (v2)",t);let{securityLevel:n,state:a,layout:s}=at();i.db.extract(i.db.getRootDocV2());let u=i.db.getData(),h=kI(t,n);u.type=i.type,u.layoutAlgorithm=s,u.nodeSpacing=a?.nodeSpacing||50,u.rankSpacing=a?.rankSpacing||50,u.markers=["barb"],u.diagramId=t,await fI(u,h),qn.insertTitle(h,"statediagramTitleText",a?.titleTopMargin??25,i.db.getDiagramTitle()),TI(h,8,M5,a?.useMaxWidth??!0)},"draw"),rke={getClasses:eke,draw:tke,getDir:iZ},DS=new Map,Vf=0,k(dB,"stateDomId"),ike=k((e,t,r,i,n,a,s,u)=>{Ce.trace("items",t),t.forEach(h=>{switch(h.stmt){case RS:L5(e,h,r,i,n,a,s,u);break;case A5:L5(e,h,r,i,n,a,s,u);break;case mB:{L5(e,h.state1,r,i,n,a,s,u),L5(e,h.state2,r,i,n,a,s,u);let d={id:"edge"+Vf,start:h.state1.id,end:h.state2.id,arrowhead:"normal",arrowTypeEnd:"arrow_barb",style:WK,labelStyle:"",label:zr.sanitizeText(h.description,at()),arrowheadStyle:YK,labelpos:qK,labelType:XK,thickness:KK,classes:JK,look:s};n.push(d),Vf++}break}})},"setupDoc"),nZ=k((e,t=HK)=>{let r=t;if(e.doc)for(let i of e.doc)i.stmt==="dir"&&(r=i.value);return r},"getDir"),k(LS,"insertOrUpdateNode"),k(M6e,"getClassesFromDbInfo"),k(L6e,"getStylesFromDbInfo"),L5=k((e,t,r,i,n,a,s,u)=>{let h=t.id,d=r.get(h),p=M6e(d),g=L6e(d);if(Ce.info("dataFetcher parsedItem",t,d,g),h!=="root"){let y=yB;t.start===!0?y=F6e:t.start===!1&&(y=$6e),t.type!==A5&&(y=t.type),DS.get(h)||DS.set(h,{id:h,shape:y,description:zr.sanitizeText(h,at()),cssClasses:`${p} ${j6e}`,cssStyles:g});let m=DS.get(h);t.description&&(Array.isArray(m.description)?(m.shape=vB,m.description.push(t.description)):m.description?.length>0?(m.shape=vB,m.description===h?m.description=[t.description]:m.description=[m.description,t.description]):(m.shape=yB,m.description=t.description),m.description=zr.sanitizeTextOrArray(m.description,at())),m.description?.length===1&&m.shape===vB&&(m.type==="group"?m.shape=QK:m.shape=yB),!m.type&&t.doc&&(Ce.info("Setting cluster for XCX",h,nZ(t)),m.type="group",m.isGroup=!0,m.dir=nZ(t),m.shape=t.type===VK?ZK:QK,m.cssClasses=`${m.cssClasses} ${X6e} ${a?Z6e:""}`);let x={labelStyle:"",shape:m.shape,label:m.description,cssClasses:m.cssClasses,cssCompiledStyles:[],cssStyles:m.cssStyles,id:h,dir:m.dir,domId:dB(h,Vf),type:m.type,isGroup:m.type==="group",padding:8,rx:10,ry:10,look:s};if(x.shape===ZK&&(x.label=""),e&&e.id!=="root"&&(Ce.trace("Setting node ",h," to be child of its parent ",e.id),x.parentId=e.id),x.centerLabel=!0,t.note){let _={labelStyle:"",shape:z6e,label:t.note.text,cssClasses:Y6e,cssStyles:[],cssCompilesStyles:[],id:h+J6e+"-"+Vf,domId:dB(h,Vf,tZ),type:m.type,isGroup:m.type==="group",padding:at().flowchart.padding,look:s,position:t.note.position},E=h+rZ,w={labelStyle:"",shape:G6e,label:t.note.text,cssClasses:m.cssClasses,cssStyles:[],id:h+rZ,domId:dB(h,Vf,eZ),type:"group",isGroup:!0,padding:16,look:s,position:t.note.position};Vf++,w.id=E,_.parentId=E,LS(i,w,u),LS(i,_,u),LS(i,x,u);let C=h,A=_.id;t.note.position==="left of"&&(C=_.id,A=h),n.push({id:C+"-"+A,start:C,end:A,arrowhead:"none",arrowTypeEnd:"",style:WK,labelStyle:"",classes:W6e,arrowheadStyle:YK,labelpos:qK,labelType:XK,thickness:KK,look:s})}else LS(i,x,u)}t.doc&&(Ce.trace("Adding nodes children "),ike(t,t.doc,r,i,n,!a,s,u))},"dataFetcher"),nke=k(()=>{DS.clear(),Vf=0},"reset"),bB="[*]",aZ="start",sZ=bB,oZ="end",lZ="color",uZ="fill",ake="bgFill",ske=",",k(UK,"newClassesList"),IS=[],_B=[],hZ=N6e,NS=[],rx=UK(),cZ=k(()=>({relations:[],states:new Map,documents:{}}),"newDoc"),OS={root:cZ()},qu=OS.root,R5=0,dZ=0,oke={LINE:0,DOTTED_LINE:1},lke={AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3},BS=k(e=>JSON.parse(JSON.stringify(e)),"clone"),uke=k(e=>{Ce.info("Setting root doc",e),NS=e},"setRootDoc"),hke=k(()=>NS,"getRootDoc"),PS=k((e,t,r)=>{if(t.stmt===mB)PS(e,t.state1,!0),PS(e,t.state2,!1);else if(t.stmt===RS&&(t.id==="[*]"?(t.id=r?e.id+"_start":e.id+"_end",t.start=r):t.id=t.id.trim()),t.doc){let i=[],n=[],a;for(a=0;a<t.doc.length;a++)if(t.doc[a].type===VK){let s=BS(t.doc[a]);s.doc=BS(n),i.push(s),n=[]}else n.push(t.doc[a]);if(i.length>0&&n.length>0){let s={stmt:RS,id:hj(),type:"divider",doc:BS(n)};i.push(BS(s)),t.doc=i}t.doc.forEach(s=>PS(t,s,!0))}},"docTranslator"),wB=k(()=>(PS({id:"root"},{id:"root",doc:NS},!0),{id:"root",doc:NS}),"getRootDocV2"),cke=k(e=>{let t;e.doc?t=e.doc:t=e,Ce.info(t),pZ(!0),Ce.info("Extract initial document:",t),t.forEach(n=>{switch(Ce.warn("Statement",n.stmt),n.stmt){case RS:Wf(n.id.trim(),n.type,n.doc,n.description,n.note,n.classes,n.styles,n.textStyles);break;case mB:gZ(n.state1,n.state2,n.description);break;case O6e:mZ(n.id.trim(),n.classes);break;case B6e:{let a=n.id.trim().split(","),s=n.styleClass.split(",");a.forEach(u=>{let h=Fm(u);if(h===void 0){let d=u.trim();Wf(d),h=Fm(d)}h.styles=s.map(d=>d.replace(/;/g,"")?.trim())})}break;case P6e:TB(n.id.trim(),n.styleClass);break}});let r=fZ(),i=at().look;nke(),L5(void 0,wB(),r,IS,_B,!0,i,rx),IS.forEach(n=>{if(Array.isArray(n.label)){if(n.description=n.label.slice(1),n.isGroup&&n.description.length>0)throw new Error("Group nodes can only have label. Remove the additional description for node ["+n.id+"]");n.label=n.label[0]}})},"extract"),Wf=k(function(e,t=A5,r=null,i=null,n=null,a=null,s=null,u=null){let h=e?.trim();if(qu.states.has(h)?(qu.states.get(h).doc||(qu.states.get(h).doc=r),qu.states.get(h).type||(qu.states.get(h).type=t)):(Ce.info("Adding state ",h,i),qu.states.set(h,{id:h,descriptions:[],type:t,doc:r,note:n,classes:[],styles:[],textStyles:[]})),i&&(Ce.info("Setting state description",h,i),typeof i=="string"&&kB(h,i.trim()),typeof i=="object"&&i.forEach(d=>kB(h,d.trim()))),n){let d=qu.states.get(h);d.note=n,d.note.text=zr.sanitizeText(d.note.text,at())}a&&(Ce.info("Setting state classes",h,a),(typeof a=="string"?[a]:a).forEach(d=>TB(h,d.trim()))),s&&(Ce.info("Setting state styles",h,s),(typeof s=="string"?[s]:s).forEach(d=>yke(h,d.trim()))),u&&(Ce.info("Setting state styles",h,s),(typeof u=="string"?[u]:u).forEach(d=>vke(h,d.trim())))},"addState"),pZ=k(function(e){IS=[],_B=[],OS={root:cZ()},qu=OS.root,R5=0,rx=UK(),e||ho()},"clear"),Fm=k(function(e){return qu.states.get(e)},"getState"),fZ=k(function(){return qu.states},"getStates"),dke=k(function(){Ce.info("Documents = ",OS)},"logDocuments"),pke=k(function(){return qu.relations},"getRelations"),k(pB,"startIdIfNeeded"),k(fB,"startTypeIfNeeded"),k(R6e,"endIdIfNeeded"),k(D6e,"endTypeIfNeeded"),k(I6e,"addRelationObjs"),gZ=k(function(e,t,r){if(typeof e=="object")I6e(e,t,r);else{let i=pB(e.trim()),n=fB(e),a=R6e(t.trim()),s=D6e(t);Wf(i,n),Wf(a,s),qu.relations.push({id1:i,id2:a,title:zr.sanitizeText(r,at())})}},"addRelation"),kB=k(function(e,t){let r=qu.states.get(e),i=t.startsWith(":")?t.replace(":","").trim():t;r.descriptions.push(zr.sanitizeText(i,at()))},"addDescription"),fke=k(function(e){return e.substring(0,1)===":"?e.substr(2).trim():e.trim()},"cleanupLabel"),gke=k(()=>(dZ++,"divider-id-"+dZ),"getDividerId"),mZ=k(function(e,t=""){rx.has(e)||rx.set(e,{id:e,styles:[],textStyles:[]});let r=rx.get(e);t?.split(ske).forEach(i=>{let n=i.replace(/([^;]*);/,"$1").trim();if(RegExp(lZ).exec(i)){let a=n.replace(uZ,ake).replace(lZ,uZ);r.textStyles.push(a)}r.styles.push(n)})},"addStyleClass"),mke=k(function(){return rx},"getClasses"),TB=k(function(e,t){e.split(",").forEach(function(r){let i=Fm(r);if(i===void 0){let n=r.trim();Wf(n),i=Fm(n)}i.classes.push(t)})},"setCssClass"),yke=k(function(e,t){let r=Fm(e);r!==void 0&&r.styles.push(t)},"setStyle"),vke=k(function(e,t){let r=Fm(e);r!==void 0&&r.textStyles.push(t)},"setTextStyle"),xke=k(()=>hZ,"getDirection"),bke=k(e=>{hZ=e},"setDirection"),_ke=k(e=>e&&e[0]===":"?e.substr(1).trim():e.trim(),"trimColon"),wke=k(()=>{let e=at();return{nodes:IS,edges:_B,other:{},config:e,direction:iZ(wB())}},"getData"),Z0={getConfig:k(()=>at().state,"getConfig"),getData:wke,addState:Wf,clear:pZ,getState:Fm,getStates:fZ,getRelations:pke,getClasses:mke,getDirection:xke,addRelation:gZ,getDividerId:gke,setDirection:bke,cleanupLabel:fke,lineType:oke,relationType:lke,logDocuments:dke,getRootDoc:hke,setRootDoc:uke,getRootDocV2:wB,extract:cke,trimColon:_ke,getAccTitle:Bo,setAccTitle:Ks,getAccDescription:Po,setAccDescription:_o,addStyleClass:mZ,setCssClass:TB,addDescription:kB,setDiagramTitle:Fo,getDiagramTitle:$o},kke=k(e=>`
defs #statediagram-barbEnd {
    fill: ${e.transitionColor};
    stroke: ${e.transitionColor};
  }
g.stateGroup text {
  fill: ${e.nodeBorder};
  stroke: none;
  font-size: 10px;
}
g.stateGroup text {
  fill: ${e.textColor};
  stroke: none;
  font-size: 10px;

}
g.stateGroup .state-title {
  font-weight: bolder;
  fill: ${e.stateLabelColor};
}

g.stateGroup rect {
  fill: ${e.mainBkg};
  stroke: ${e.nodeBorder};
}

g.stateGroup line {
  stroke: ${e.lineColor};
  stroke-width: 1;
}

.transition {
  stroke: ${e.transitionColor};
  stroke-width: 1;
  fill: none;
}

.stateGroup .composit {
  fill: ${e.background};
  border-bottom: 1px
}

.stateGroup .alt-composit {
  fill: #e0e0e0;
  border-bottom: 1px
}

.state-note {
  stroke: ${e.noteBorderColor};
  fill: ${e.noteBkgColor};

  text {
    fill: ${e.noteTextColor};
    stroke: none;
    font-size: 10px;
  }
}

.stateLabel .box {
  stroke: none;
  stroke-width: 0;
  fill: ${e.mainBkg};
  opacity: 0.5;
}

.edgeLabel .label rect {
  fill: ${e.labelBackgroundColor};
  opacity: 0.5;
}
.edgeLabel {
  background-color: ${e.edgeLabelBackground};
  p {
    background-color: ${e.edgeLabelBackground};
  }
  rect {
    opacity: 0.5;
    background-color: ${e.edgeLabelBackground};
    fill: ${e.edgeLabelBackground};
  }
  text-align: center;
}
.edgeLabel .label text {
  fill: ${e.transitionLabelColor||e.tertiaryTextColor};
}
.label div .edgeLabel {
  color: ${e.transitionLabelColor||e.tertiaryTextColor};
}

.stateLabel text {
  fill: ${e.stateLabelColor};
  font-size: 10px;
  font-weight: bold;
}

.node circle.state-start {
  fill: ${e.specialStateColor};
  stroke: ${e.specialStateColor};
}

.node .fork-join {
  fill: ${e.specialStateColor};
  stroke: ${e.specialStateColor};
}

.node circle.state-end {
  fill: ${e.innerEndBackground};
  stroke: ${e.background};
  stroke-width: 1.5
}
.end-state-inner {
  fill: ${e.compositeBackground||e.background};
  // stroke: ${e.background};
  stroke-width: 1.5
}

.node rect {
  fill: ${e.stateBkg||e.mainBkg};
  stroke: ${e.stateBorder||e.nodeBorder};
  stroke-width: 1px;
}
.node polygon {
  fill: ${e.mainBkg};
  stroke: ${e.stateBorder||e.nodeBorder};;
  stroke-width: 1px;
}
#statediagram-barbEnd {
  fill: ${e.lineColor};
}

.statediagram-cluster rect {
  fill: ${e.compositeTitleBackground};
  stroke: ${e.stateBorder||e.nodeBorder};
  stroke-width: 1px;
}

.cluster-label, .nodeLabel {
  color: ${e.stateLabelColor};
  // line-height: 1;
}

.statediagram-cluster rect.outer {
  rx: 5px;
  ry: 5px;
}
.statediagram-state .divider {
  stroke: ${e.stateBorder||e.nodeBorder};
}

.statediagram-state .title-state {
  rx: 5px;
  ry: 5px;
}
.statediagram-cluster.statediagram-cluster .inner {
  fill: ${e.compositeBackground||e.background};
}
.statediagram-cluster.statediagram-cluster-alt .inner {
  fill: ${e.altBackground?e.altBackground:"#efefef"};
}

.statediagram-cluster .inner {
  rx:0;
  ry:0;
}

.statediagram-state rect.basic {
  rx: 5px;
  ry: 5px;
}
.statediagram-state rect.divider {
  stroke-dasharray: 10,10;
  fill: ${e.altBackground?e.altBackground:"#efefef"};
}

.note-edge {
  stroke-dasharray: 5;
}

.statediagram-note rect {
  fill: ${e.noteBkgColor};
  stroke: ${e.noteBorderColor};
  stroke-width: 1px;
  rx: 0;
  ry: 0;
}
.statediagram-note rect {
  fill: ${e.noteBkgColor};
  stroke: ${e.noteBorderColor};
  stroke-width: 1px;
  rx: 0;
  ry: 0;
}

.statediagram-note text {
  fill: ${e.noteTextColor};
}

.statediagram-note .nodeLabel {
  color: ${e.noteTextColor};
}
.statediagram .edgeLabel {
  color: red; // ${e.noteTextColor};
}

#dependencyStart, #dependencyEnd {
  fill: ${e.lineColor};
  stroke: ${e.lineColor};
  stroke-width: 1;
}

.statediagramTitleText {
  text-anchor: middle;
  font-size: 18px;
  fill: ${e.textColor};
}
`,"getStyles"),yZ=kke}),Eke={};oi(Eke,{diagram:()=>Vke});var EB,Cke,Ske,vZ,Ake,Mke,Lke,Rke,Dke,Ike,Nke,Oke,Bke,Pke,Fke,xZ,bZ,$ke,lc,CB,zke,Gke,Uke,jke,_Z,Hke,Vke,QXe=D(()=>{Tke(),Ov(),fm(),sm(),B0(),Oh(),xf(),uh(),ch(),Os(),Qn(),ha(),pI(),Qh(),ha(),EB={},Cke=k((e,t)=>{EB[e]=t},"set"),Ske=k(e=>EB[e],"get"),vZ=k(()=>Object.keys(EB),"keys"),Ake=k(()=>vZ().length,"size"),Mke={get:Ske,set:Cke,keys:vZ,size:Ake},Lke=k(e=>e.append("circle").attr("class","start-state").attr("r",at().state.sizeUnit).attr("cx",at().state.padding+at().state.sizeUnit).attr("cy",at().state.padding+at().state.sizeUnit),"drawStartState"),Rke=k(e=>e.append("line").style("stroke","grey").style("stroke-dasharray","3").attr("x1",at().state.textHeight).attr("class","divider").attr("x2",at().state.textHeight*2).attr("y1",0).attr("y2",0),"drawDivider"),Dke=k((e,t)=>{let r=e.append("text").attr("x",2*at().state.padding).attr("y",at().state.textHeight+2*at().state.padding).attr("font-size",at().state.fontSize).attr("class","state-title").text(t.id),i=r.node().getBBox();return e.insert("rect",":first-child").attr("x",at().state.padding).attr("y",at().state.padding).attr("width",i.width+2*at().state.padding).attr("height",i.height+2*at().state.padding).attr("rx",at().state.radius),r},"drawSimpleState"),Ike=k((e,t)=>{let r=k(function(g,y,m){let x=g.append("tspan").attr("x",2*at().state.padding).text(y);m||x.attr("dy",at().state.textHeight)},"addTspan"),i=e.append("text").attr("x",2*at().state.padding).attr("y",at().state.textHeight+1.3*at().state.padding).attr("font-size",at().state.fontSize).attr("class","state-title").text(t.descriptions[0]).node().getBBox(),n=i.height,a=e.append("text").attr("x",at().state.padding).attr("y",n+at().state.padding*.4+at().state.dividerMargin+at().state.textHeight).attr("class","state-description"),s=!0,u=!0;t.descriptions.forEach(function(g){s||(r(a,g,u),u=!1),s=!1});let h=e.append("line").attr("x1",at().state.padding).attr("y1",at().state.padding+n+at().state.dividerMargin/2).attr("y2",at().state.padding+n+at().state.dividerMargin/2).attr("class","descr-divider"),d=a.node().getBBox(),p=Math.max(d.width,i.width);return h.attr("x2",p+3*at().state.padding),e.insert("rect",":first-child").attr("x",at().state.padding).attr("y",at().state.padding).attr("width",p+2*at().state.padding).attr("height",d.height+n+2*at().state.padding).attr("rx",at().state.radius),e},"drawDescrState"),Nke=k((e,t,r)=>{let i=at().state.padding,n=2*at().state.padding,a=e.node().getBBox(),s=a.width,u=a.x,h=e.append("text").attr("x",0).attr("y",at().state.titleShift).attr("font-size",at().state.fontSize).attr("class","state-title").text(t.id),d=h.node().getBBox().width+n,p=Math.max(d,s);p===s&&(p=p+n);let g,y=e.node().getBBox();t.doc,g=u-i,d>s&&(g=(s-p)/2+i),Math.abs(u-y.x)<i&&d>s&&(g=u-(d-s)/2);let m=1-at().state.textHeight;return e.insert("rect",":first-child").attr("x",g).attr("y",m).attr("class",r?"alt-composit":"composit").attr("width",p).attr("height",y.height+at().state.textHeight+at().state.titleShift+1).attr("rx","0"),h.attr("x",g+i),d<=s&&h.attr("x",u+(p-n)/2-d/2+i),e.insert("rect",":first-child").attr("x",g).attr("y",at().state.titleShift-at().state.textHeight-at().state.padding).attr("width",p).attr("height",at().state.textHeight*3).attr("rx",at().state.radius),e.insert("rect",":first-child").attr("x",g).attr("y",at().state.titleShift-at().state.textHeight-at().state.padding).attr("width",p).attr("height",y.height+3+2*at().state.textHeight).attr("rx",at().state.radius),e},"addTitleAndBox"),Oke=k(e=>(e.append("circle").attr("class","end-state-outer").attr("r",at().state.sizeUnit+at().state.miniPadding).attr("cx",at().state.padding+at().state.sizeUnit+at().state.miniPadding).attr("cy",at().state.padding+at().state.sizeUnit+at().state.miniPadding),e.append("circle").attr("class","end-state-inner").attr("r",at().state.sizeUnit).attr("cx",at().state.padding+at().state.sizeUnit+2).attr("cy",at().state.padding+at().state.sizeUnit+2)),"drawEndState"),Bke=k((e,t)=>{let r=at().state.forkWidth,i=at().state.forkHeight;if(t.parentId){let n=r;r=i,i=n}return e.append("rect").style("stroke","black").style("fill","black").attr("width",r).attr("height",i).attr("x",at().state.padding).attr("y",at().state.padding)},"drawForkJoinState"),Pke=k((e,t,r,i)=>{let n=0,a=i.append("text");a.style("text-anchor","start"),a.attr("class","noteText");let s=e.replace(/\r\n/g,"<br/>");s=s.replace(/\n/g,"<br/>");let u=s.split(zr.lineBreakRegex),h=1.25*at().state.noteMargin;for(let d of u){let p=d.trim();if(p.length>0){let g=a.append("tspan");if(g.text(p),h===0){let y=g.node().getBBox();h+=y.height}n+=h,g.attr("x",t+at().state.noteMargin),g.attr("y",r+n+1.25*at().state.noteMargin)}}return{textWidth:a.node().getBBox().width,textHeight:n}},"_drawLongText"),Fke=k((e,t)=>{t.attr("class","state-note");let r=t.append("rect").attr("x",0).attr("y",at().state.padding),i=t.append("g"),{textWidth:n,textHeight:a}=Pke(e,0,0,i);return r.attr("height",a+2*at().state.noteMargin),r.attr("width",n+at().state.noteMargin*2),r},"drawNote"),xZ=k(function(e,t){let r=t.id,i={id:r,label:t.id,width:0,height:0},n=e.append("g").attr("id",r).attr("class","stateGroup");t.type==="start"&&Lke(n),t.type==="end"&&Oke(n),(t.type==="fork"||t.type==="join")&&Bke(n,t),t.type==="note"&&Fke(t.note.text,n),t.type==="divider"&&Rke(n),t.type==="default"&&t.descriptions.length===0&&Dke(n,t),t.type==="default"&&t.descriptions.length>0&&Ike(n,t);let a=n.node().getBBox();return i.width=a.width+2*at().state.padding,i.height=a.height+2*at().state.padding,Mke.set(r,i),i},"drawState"),bZ=0,$ke=k(function(e,t,r){let i=k(function(h){switch(h){case Z0.relationType.AGGREGATION:return"aggregation";case Z0.relationType.EXTENSION:return"extension";case Z0.relationType.COMPOSITION:return"composition";case Z0.relationType.DEPENDENCY:return"dependency"}},"getRelationType");t.points=t.points.filter(h=>!Number.isNaN(h.y));let n=t.points,a=vv().x(function(h){return h.x}).y(function(h){return h.y}).curve(cC),s=e.append("path").attr("d",a(n)).attr("id","edge"+bZ).attr("class","transition"),u="";if(at().state.arrowMarkerAbsolute&&(u=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,u=u.replace(/\(/g,"\\("),u=u.replace(/\)/g,"\\)")),s.attr("marker-end","url("+u+"#"+i(Z0.relationType.DEPENDENCY)+"End)"),r.title!==void 0){let h=e.append("g").attr("class","stateLabel"),{x:d,y:p}=qn.calcLabelPosition(t.points),g=zr.getRows(r.title),y=0,m=[],x=0,_=0;for(let C=0;C<=g.length;C++){let A=h.append("text").attr("text-anchor","middle").text(g[C]).attr("x",d).attr("y",p+y),M=A.node().getBBox();x=Math.max(x,M.width),_=Math.min(_,M.x),Ce.info(M.x,d,p+y),y===0&&(y=A.node().getBBox().height,Ce.info("Title height",y,p)),m.push(A)}let E=y*g.length;if(g.length>1){let C=(g.length-1)*y*.5;m.forEach((A,M)=>A.attr("y",p+M*y-C)),E=y*g.length}let w=h.node().getBBox();h.insert("rect",":first-child").attr("class","box").attr("x",d-x/2-at().state.padding/2).attr("y",p-E/2-at().state.padding/2-3.5).attr("width",x+at().state.padding).attr("height",E+at().state.padding),Ce.info(w)}bZ++},"drawEdge"),CB={},zke=k(function(){},"setConf"),Gke=k(function(e){e.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"insertMarkers"),Uke=k(function(e,t,r,i){lc=at().state;let n=at().securityLevel,a;n==="sandbox"&&(a=Nr("#i"+t));let s=Nr(n==="sandbox"?a.nodes()[0].contentDocument.body:"body"),u=n==="sandbox"?a.nodes()[0].contentDocument:document;Ce.debug("Rendering diagram "+e);let h=s.select(`[id='${t}']`);Gke(h);let d=i.db.getRootDoc();_Z(d,h,void 0,!1,s,u,i);let p=lc.padding,g=h.node().getBBox(),y=g.width+p*2,m=g.height+p*2,x=y*1.75;Oo(h,m,x,lc.useMaxWidth),h.attr("viewBox",`${g.x-lc.padding}  ${g.y-lc.padding} `+y+" "+m)},"draw"),jke=k(e=>e?e.length*lc.fontSizeFactor:1,"getLabelWidth"),_Z=k((e,t,r,i,n,a,s)=>{let u=new Vl({compound:!0,multigraph:!0}),h,d=!0;for(h=0;h<e.length;h++)if(e[h].stmt==="relation"){d=!1;break}r?u.setGraph({rankdir:"LR",multigraph:!0,compound:!0,ranker:"tight-tree",ranksep:d?1:lc.edgeLengthFactor,nodeSep:d?1:50,isMultiGraph:!0}):u.setGraph({rankdir:"TB",multigraph:!0,compound:!0,ranksep:d?1:lc.edgeLengthFactor,nodeSep:d?1:50,ranker:"tight-tree",isMultiGraph:!0}),u.setDefaultEdgeLabel(function(){return{}}),s.db.extract(e);let p=s.db.getStates(),g=s.db.getRelations(),y=Object.keys(p),m=!0;for(let C of y){let A=p[C];r&&(A.parentId=r);let M;if(A.doc){let N=t.append("g").attr("id",A.id).attr("class","stateGroup");if(M=_Z(A.doc,N,A.id,!i,n,a,s),m){N=Nke(N,A,i);let B=N.node().getBBox();M.width=B.width,M.height=B.height+lc.padding/2,CB[A.id]={y:lc.compositTitleSize}}else{let B=N.node().getBBox();M.width=B.width,M.height=B.height}}else M=xZ(t,A,u);if(A.note){let N={descriptions:[],id:A.id+"-note",note:A.note,type:"note"},B=xZ(t,N,u);A.note.position==="left of"?(u.setNode(M.id+"-note",B),u.setNode(M.id,M)):(u.setNode(M.id,M),u.setNode(M.id+"-note",B)),u.setParent(M.id,M.id+"-group"),u.setParent(M.id+"-note",M.id+"-group")}else u.setNode(M.id,M)}Ce.debug("Count=",u.nodeCount(),u);let x=0;g.forEach(function(C){x++,Ce.debug("Setting edge",C),u.setEdge(C.id1,C.id2,{relation:C,width:jke(C.title),height:lc.labelHeight*zr.getRows(C.title).length,labelpos:"c"},"id"+x)}),dI(u),Ce.debug("Graph after layout",u.nodes());let _=t.node();u.nodes().forEach(function(C){C!==void 0&&u.node(C)!==void 0?(Ce.warn("Node "+C+": "+JSON.stringify(u.node(C))),n.select("#"+_.id+" #"+C).attr("transform","translate("+(u.node(C).x-u.node(C).width/2)+","+(u.node(C).y+(CB[C]?CB[C].y:0)-u.node(C).height/2)+" )"),n.select("#"+_.id+" #"+C).attr("data-x-shift",u.node(C).x-u.node(C).width/2),a.querySelectorAll("#"+_.id+" #"+C+" .divider").forEach(A=>{let M=A.parentElement,N=0,B=0;M&&(M.parentElement&&(N=M.parentElement.getBBox().width),B=parseInt(M.getAttribute("data-x-shift"),10),Number.isNaN(B)&&(B=0)),A.setAttribute("x1",0-B+8),A.setAttribute("x2",N-B-8)})):Ce.debug("No Node "+C+": "+JSON.stringify(u.node(C)))});let E=_.getBBox();u.edges().forEach(function(C){C!==void 0&&u.edge(C)!==void 0&&(Ce.debug("Edge "+C.v+" -> "+C.w+": "+JSON.stringify(u.edge(C))),$ke(t,u.edge(C),u.edge(C).relation))}),E=_.getBBox();let w={id:r||"root",label:r||"root",width:0,height:0};return w.width=E.width+2*lc.padding,w.height=E.height+2*lc.padding,Ce.debug("Doc rendered",w,u),w},"renderDoc"),Hke={setConf:zke,draw:Uke},Vke={parser:jK,db:Z0,renderer:Hke,styles:yZ,init:k(e=>{e.state||(e.state={}),e.state.arrowMarkerAbsolute=e.arrowMarkerAbsolute,Z0.clear()},"init")}}),Wke={};oi(Wke,{diagram:()=>Yke});var Yke,JXe=D(()=>{Tke(),Ov(),fm(),sm(),B0(),Oh(),xf(),uh(),ch(),Os(),Qn(),Yke={parser:jK,db:Z0,renderer:rke,styles:yZ,init:k(e=>{e.state||(e.state={}),e.state.arrowMarkerAbsolute=e.arrowMarkerAbsolute,Z0.clear()},"init")}}),qke={};oi(qke,{diagram:()=>mTe});function Xke(e){let t=at().journey,r=60;Object.keys(Q0).forEach(i=>{let n=Q0[i].color,a={cx:20,cy:r,r:7,fill:n,stroke:"#000",pos:Q0[i].position};N5.drawCircle(e,a);let s={x:40,y:r+7,fill:"#666",text:i,textMargin:t.boxTextMargin|5};N5.drawText(e,s),r+=20})}var SB,Kke,ix,AB,D5,I5,Zke,Qke,Jke,eTe,tTe,rTe,iTe,wZ,nTe,kZ,aTe,sTe,MB,oTe,TZ,EZ,lTe,uTe,CZ,hTe,cTe,SZ,dTe,N5,pTe,Q0,FS,$m,fTe,uc,LB,AZ,gTe,MZ,mTe,eKe=D(()=>{jV(),Qn(),ha(),ha(),SB=function(){var e=k(function(g,y,m,x){for(m=m||{},x=g.length;x--;m[g[x]]=y);return m},"o"),t=[6,8,10,11,12,14,16,17,18],r=[1,9],i=[1,10],n=[1,11],a=[1,12],s=[1,13],u=[1,14],h={trace:k(function(){},"trace"),yy:{},symbols_:{error:2,start:3,journey:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NEWLINE:10,title:11,acc_title:12,acc_title_value:13,acc_descr:14,acc_descr_value:15,acc_descr_multiline_value:16,section:17,taskName:18,taskData:19,$accept:0,$end:1},terminals_:{2:"error",4:"journey",6:"EOF",8:"SPACE",10:"NEWLINE",11:"title",12:"acc_title",13:"acc_title_value",14:"acc_descr",15:"acc_descr_value",16:"acc_descr_multiline_value",17:"section",18:"taskName",19:"taskData"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[9,1],[9,2],[9,2],[9,1],[9,1],[9,2]],performAction:k(function(g,y,m,x,_,E,w){var C=E.length-1;switch(_){case 1:return E[C-1];case 2:this.$=[];break;case 3:E[C-1].push(E[C]),this.$=E[C-1];break;case 4:case 5:this.$=E[C];break;case 6:case 7:this.$=[];break;case 8:x.setDiagramTitle(E[C].substr(6)),this.$=E[C].substr(6);break;case 9:this.$=E[C].trim(),x.setAccTitle(this.$);break;case 10:case 11:this.$=E[C].trim(),x.setAccDescription(this.$);break;case 12:x.addSection(E[C].substr(8)),this.$=E[C].substr(8);break;case 13:x.addTask(E[C-1],E[C]),this.$="task";break}},"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},e(t,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:r,12:i,14:n,16:a,17:s,18:u},e(t,[2,7],{1:[2,1]}),e(t,[2,3]),{9:15,11:r,12:i,14:n,16:a,17:s,18:u},e(t,[2,5]),e(t,[2,6]),e(t,[2,8]),{13:[1,16]},{15:[1,17]},e(t,[2,11]),e(t,[2,12]),{19:[1,18]},e(t,[2,4]),e(t,[2,9]),e(t,[2,10]),e(t,[2,13])],defaultActions:{},parseError:k(function(g,y){if(y.recoverable)this.trace(g);else{var m=new Error(g);throw m.hash=y,m}},"parseError"),parse:k(function(g){var y=this,m=[0],x=[],_=[null],E=[],w=this.table,C="",A=0,M=0,N=0,B=2,O=1,L=E.slice.call(arguments,1),$=Object.create(this.lexer),G={yy:{}};for(var z in this.yy)Object.prototype.hasOwnProperty.call(this.yy,z)&&(G.yy[z]=this.yy[z]);$.setInput(g,G.yy),G.yy.lexer=$,G.yy.parser=this,typeof $.yylloc>"u"&&($.yylloc={});var F=$.yylloc;E.push(F);var X=$.options&&$.options.ranges;typeof G.yy.parseError=="function"?this.parseError=G.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function I(oe){m.length=m.length-2*oe,_.length=_.length-oe,E.length=E.length-oe}k(I,"popStack");function j(){var oe;return oe=x.pop()||$.lex()||O,typeof oe!="number"&&(oe instanceof Array&&(x=oe,oe=x.pop()),oe=y.symbols_[oe]||oe),oe}k(j,"lex");for(var H,V,P,q,Z,J,ae={},ue,be,Le,xe;;){if(P=m[m.length-1],this.defaultActions[P]?q=this.defaultActions[P]:((H===null||typeof H>"u")&&(H=j()),q=w[P]&&w[P][H]),typeof q>"u"||!q.length||!q[0]){var Ae="";xe=[];for(ue in w[P])this.terminals_[ue]&&ue>B&&xe.push("'"+this.terminals_[ue]+"'");$.showPosition?Ae="Parse error on line "+(A+1)+`:
`+$.showPosition()+`
Expecting `+xe.join(", ")+", got '"+(this.terminals_[H]||H)+"'":Ae="Parse error on line "+(A+1)+": Unexpected "+(H==O?"end of input":"'"+(this.terminals_[H]||H)+"'"),this.parseError(Ae,{text:$.match,token:this.terminals_[H]||H,line:$.yylineno,loc:F,expected:xe})}if(q[0]instanceof Array&&q.length>1)throw new Error("Parse Error: multiple actions possible at state: "+P+", token: "+H);switch(q[0]){case 1:m.push(H),_.push($.yytext),E.push($.yylloc),m.push(q[1]),H=null,V?(H=V,V=null):(M=$.yyleng,C=$.yytext,A=$.yylineno,F=$.yylloc,N>0&&N--);break;case 2:if(be=this.productions_[q[1]][1],ae.$=_[_.length-be],ae._$={first_line:E[E.length-(be||1)].first_line,last_line:E[E.length-1].last_line,first_column:E[E.length-(be||1)].first_column,last_column:E[E.length-1].last_column},X&&(ae._$.range=[E[E.length-(be||1)].range[0],E[E.length-1].range[1]]),J=this.performAction.apply(ae,[C,M,A,G.yy,q[1],_,E].concat(L)),typeof J<"u")return J;be&&(m=m.slice(0,-1*be*2),_=_.slice(0,-1*be),E=E.slice(0,-1*be)),m.push(this.productions_[q[1]][0]),_.push(ae.$),E.push(ae._$),Le=w[m[m.length-2]][m[m.length-1]],m.push(Le);break;case 3:return!0}}return!0},"parse")},d=function(){var g={EOF:1,parseError:k(function(y,m){if(this.yy.parser)this.yy.parser.parseError(y,m);else throw new Error(y)},"parseError"),setInput:k(function(y,m){return this.yy=m||this.yy||{},this._input=y,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:k(function(){var y=this._input[0];this.yytext+=y,this.yyleng++,this.offset++,this.match+=y,this.matched+=y;var m=y.match(/(?:\r\n?|\n).*/g);return m?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),y},"input"),unput:k(function(y){var m=y.length,x=y.split(/(?:\r\n?|\n)/g);this._input=y+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-m),this.offset-=m;var _=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),x.length-1&&(this.yylineno-=x.length-1);var E=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:x?(x.length===_.length?this.yylloc.first_column:0)+_[_.length-x.length].length-x[0].length:this.yylloc.first_column-m},this.options.ranges&&(this.yylloc.range=[E[0],E[0]+this.yyleng-m]),this.yyleng=this.yytext.length,this},"unput"),more:k(function(){return this._more=!0,this},"more"),reject:k(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:k(function(y){this.unput(this.match.slice(y))},"less"),pastInput:k(function(){var y=this.matched.substr(0,this.matched.length-this.match.length);return(y.length>20?"...":"")+y.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:k(function(){var y=this.match;return y.length<20&&(y+=this._input.substr(0,20-y.length)),(y.substr(0,20)+(y.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:k(function(){var y=this.pastInput(),m=new Array(y.length+1).join("-");return y+this.upcomingInput()+`
`+m+"^"},"showPosition"),test_match:k(function(y,m){var x,_,E;if(this.options.backtrack_lexer&&(E={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(E.yylloc.range=this.yylloc.range.slice(0))),_=y[0].match(/(?:\r\n?|\n).*/g),_&&(this.yylineno+=_.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:_?_[_.length-1].length-_[_.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+y[0].length},this.yytext+=y[0],this.match+=y[0],this.matches=y,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(y[0].length),this.matched+=y[0],x=this.performAction.call(this,this.yy,this,m,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),x)return x;if(this._backtrack){for(var w in E)this[w]=E[w];return!1}return!1},"test_match"),next:k(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var y,m,x,_;this._more||(this.yytext="",this.match="");for(var E=this._currentRules(),w=0;w<E.length;w++)if(x=this._input.match(this.rules[E[w]]),x&&(!m||x[0].length>m[0].length)){if(m=x,_=w,this.options.backtrack_lexer){if(y=this.test_match(x,E[w]),y!==!1)return y;if(this._backtrack){m=!1;continue}else return!1}else if(!this.options.flex)break}return m?(y=this.test_match(m,E[_]),y!==!1?y:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:k(function(){var y=this.next();return y||this.lex()},"lex"),begin:k(function(y){this.conditionStack.push(y)},"begin"),popState:k(function(){var y=this.conditionStack.length-1;return y>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:k(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:k(function(y){return y=this.conditionStack.length-1-Math.abs(y||0),y>=0?this.conditionStack[y]:"INITIAL"},"topState"),pushState:k(function(y){this.begin(y)},"pushState"),stateStackSize:k(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:k(function(y,m,x,_){var E=_;switch(x){case 0:break;case 1:break;case 2:return 10;case 3:break;case 4:break;case 5:return 4;case 6:return 11;case 7:return this.begin("acc_title"),12;case 8:return this.popState(),"acc_title_value";case 9:return this.begin("acc_descr"),14;case 10:return this.popState(),"acc_descr_value";case 11:this.begin("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:return 17;case 15:return 18;case 16:return 19;case 17:return":";case 18:return 6;case 19:return"INVALID"}},"anonymous"),rules:[/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:journey\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:section\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,9,11,14,15,16,17,18,19],inclusive:!0}}};return g}();h.lexer=d;function p(){this.yy={}}return k(p,"Parser"),p.prototype=h,h.Parser=p,new p}(),SB.parser=SB,Kke=SB,ix="",AB=[],D5=[],I5=[],Zke=k(function(){AB.length=0,D5.length=0,ix="",I5.length=0,ho()},"clear"),Qke=k(function(e){ix=e,AB.push(e)},"addSection"),Jke=k(function(){return AB},"getSections"),eTe=k(function(){let e=wZ(),t=100,r=0;for(;!e&&r<t;)e=wZ(),r++;return D5.push(...I5),D5},"getTasks"),tTe=k(function(){let e=[];return D5.forEach(t=>{t.people&&e.push(...t.people)}),[...new Set(e)].sort()},"updateActors"),rTe=k(function(e,t){let r=t.substr(1).split(":"),i=0,n=[];r.length===1?(i=Number(r[0]),n=[]):(i=Number(r[0]),n=r[1].split(","));let a=n.map(u=>u.trim()),s={section:ix,type:ix,people:a,task:e,score:i};I5.push(s)},"addTask"),iTe=k(function(e){let t={section:ix,type:ix,description:e,task:e,classes:[]};D5.push(t)},"addTaskOrg"),wZ=k(function(){let e=k(function(r){return I5[r].processed},"compileTask"),t=!0;for(let[r,i]of I5.entries())e(r),t=t&&i.processed;return t},"compileTasks"),nTe=k(function(){return tTe()},"getActors"),kZ={getConfig:k(()=>at().journey,"getConfig"),clear:Zke,setDiagramTitle:Fo,getDiagramTitle:$o,setAccTitle:Ks,getAccTitle:Bo,setAccDescription:_o,getAccDescription:Po,addSection:Qke,getSections:Jke,getTasks:eTe,addTask:rTe,addTaskOrg:iTe,getActors:nTe},aTe=k(e=>`.label {
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
    color: ${e.textColor};
  }
  .mouth {
    stroke: #666;
  }

  line {
    stroke: ${e.textColor}
  }

  .legend {
    fill: ${e.textColor};
  }

  .label text {
    fill: #333;
  }
  .label {
    color: ${e.textColor}
  }

  .face {
    ${e.faceColor?`fill: ${e.faceColor}`:"fill: #FFF8DC"};
    stroke: #999;
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${e.mainBkg};
    stroke: ${e.nodeBorder};
    stroke-width: 1px;
  }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${e.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${e.lineColor};
    stroke-width: 1.5px;
  }

  .flowchart-link {
    stroke: ${e.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${e.edgeLabelBackground};
    rect {
      opacity: 0.5;
    }
    text-align: center;
  }

  .cluster rect {
  }

  .cluster text {
    fill: ${e.titleColor};
  }

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
    font-size: 12px;
    background: ${e.tertiaryColor};
    border: 1px solid ${e.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .task-type-0, .section-type-0  {
    ${e.fillType0?`fill: ${e.fillType0}`:""};
  }
  .task-type-1, .section-type-1  {
    ${e.fillType0?`fill: ${e.fillType1}`:""};
  }
  .task-type-2, .section-type-2  {
    ${e.fillType0?`fill: ${e.fillType2}`:""};
  }
  .task-type-3, .section-type-3  {
    ${e.fillType0?`fill: ${e.fillType3}`:""};
  }
  .task-type-4, .section-type-4  {
    ${e.fillType0?`fill: ${e.fillType4}`:""};
  }
  .task-type-5, .section-type-5  {
    ${e.fillType0?`fill: ${e.fillType5}`:""};
  }
  .task-type-6, .section-type-6  {
    ${e.fillType0?`fill: ${e.fillType6}`:""};
  }
  .task-type-7, .section-type-7  {
    ${e.fillType0?`fill: ${e.fillType7}`:""};
  }

  .actor-0 {
    ${e.actor0?`fill: ${e.actor0}`:""};
  }
  .actor-1 {
    ${e.actor1?`fill: ${e.actor1}`:""};
  }
  .actor-2 {
    ${e.actor2?`fill: ${e.actor2}`:""};
  }
  .actor-3 {
    ${e.actor3?`fill: ${e.actor3}`:""};
  }
  .actor-4 {
    ${e.actor4?`fill: ${e.actor4}`:""};
  }
  .actor-5 {
    ${e.actor5?`fill: ${e.actor5}`:""};
  }
`,"getStyles"),sTe=aTe,MB=k(function(e,t){return u7(e,t)},"drawRect"),oTe=k(function(e,t){let r=e.append("circle").attr("cx",t.cx).attr("cy",t.cy).attr("class","face").attr("r",15).attr("stroke-width",2).attr("overflow","visible"),i=e.append("g");i.append("circle").attr("cx",t.cx-15/3).attr("cy",t.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),i.append("circle").attr("cx",t.cx+15/3).attr("cy",t.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666");function n(u){let h=e_().startAngle(Math.PI/2).endAngle(3*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);u.append("path").attr("class","mouth").attr("d",h).attr("transform","translate("+t.cx+","+(t.cy+2)+")")}k(n,"smile");function a(u){let h=e_().startAngle(3*Math.PI/2).endAngle(5*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);u.append("path").attr("class","mouth").attr("d",h).attr("transform","translate("+t.cx+","+(t.cy+7)+")")}k(a,"sad");function s(u){u.append("line").attr("class","mouth").attr("stroke",2).attr("x1",t.cx-5).attr("y1",t.cy+7).attr("x2",t.cx+5).attr("y2",t.cy+7).attr("class","mouth").attr("stroke-width","1px").attr("stroke","#666")}return k(s,"ambivalent"),t.score>3?n(i):t.score<3?a(i):s(i),r},"drawFace"),TZ=k(function(e,t){let r=e.append("circle");return r.attr("cx",t.cx),r.attr("cy",t.cy),r.attr("class","actor-"+t.pos),r.attr("fill",t.fill),r.attr("stroke",t.stroke),r.attr("r",t.r),r.class!==void 0&&r.attr("class",r.class),t.title!==void 0&&r.append("title").text(t.title),r},"drawCircle"),EZ=k(function(e,t){return _fe(e,t)},"drawText"),lTe=k(function(e,t){function r(n,a,s,u,h){return n+","+a+" "+(n+s)+","+a+" "+(n+s)+","+(a+u-h)+" "+(n+s-h*1.2)+","+(a+u)+" "+n+","+(a+u)}k(r,"genPoints");let i=e.append("polygon");i.attr("points",r(t.x,t.y,50,20,7)),i.attr("class","labelBox"),t.y=t.y+t.labelMargin,t.x=t.x+.5*t.labelMargin,EZ(e,t)},"drawLabel"),uTe=k(function(e,t,r){let i=e.append("g"),n=mm();n.x=t.x,n.y=t.y,n.fill=t.fill,n.width=r.width*t.taskCount+r.diagramMarginX*(t.taskCount-1),n.height=r.height,n.class="journey-section section-type-"+t.num,n.rx=3,n.ry=3,MB(i,n),SZ(r)(t.text,i,n.x,n.y,n.width,n.height,{class:"journey-section section-type-"+t.num},r,t.colour)},"drawSection"),CZ=-1,hTe=k(function(e,t,r){let i=t.x+r.width/2,n=e.append("g");CZ++;let a=300+5*30;n.append("line").attr("id","task"+CZ).attr("x1",i).attr("y1",t.y).attr("x2",i).attr("y2",a).attr("class","task-line").attr("stroke-width","1px").attr("stroke-dasharray","4 2").attr("stroke","#666"),oTe(n,{cx:i,cy:300+(5-t.score)*30,score:t.score});let s=mm();s.x=t.x,s.y=t.y,s.fill=t.fill,s.width=r.width,s.height=r.height,s.class="task task-type-"+t.num,s.rx=3,s.ry=3,MB(n,s);let u=t.x+14;t.people.forEach(h=>{let d=t.actors[h].color,p={cx:u,cy:t.y,r:7,fill:d,stroke:"#000",title:h,pos:t.actors[h].position};TZ(n,p),u+=10}),SZ(r)(t.task,n,s.x,s.y,s.width,s.height,{class:"task"},r,t.colour)},"drawTask"),cTe=k(function(e,t){UV(e,t)},"drawBackgroundRect"),SZ=function(){function e(n,a,s,u,h,d,p,g){let y=a.append("text").attr("x",s+h/2).attr("y",u+d/2+5).style("font-color",g).style("text-anchor","middle").text(n);i(y,p)}k(e,"byText");function t(n,a,s,u,h,d,p,g,y){let{taskFontSize:m,taskFontFamily:x}=g,_=n.split(/<br\s*\/?>/gi);for(let E=0;E<_.length;E++){let w=E*m-m*(_.length-1)/2,C=a.append("text").attr("x",s+h/2).attr("y",u).attr("fill",y).style("text-anchor","middle").style("font-size",m).style("font-family",x);C.append("tspan").attr("x",s+h/2).attr("dy",w).text(_[E]),C.attr("y",u+d/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),i(C,p)}}k(t,"byTspan");function r(n,a,s,u,h,d,p,g){let y=a.append("switch"),m=y.append("foreignObject").attr("x",s).attr("y",u).attr("width",h).attr("height",d).attr("position","fixed").append("xhtml:div").style("display","table").style("height","100%").style("width","100%");m.append("div").attr("class","label").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(n),t(n,y,s,u,h,d,p,g),i(m,p)}k(r,"byFo");function i(n,a){for(let s in a)s in a&&n.attr(s,a[s])}return k(i,"_setTextAttrs"),function(n){return n.textPlacement==="fo"?r:n.textPlacement==="old"?e:t}}(),dTe=k(function(e){e.append("defs").append("marker").attr("id","arrowhead").attr("refX",5).attr("refY",2).attr("markerWidth",6).attr("markerHeight",4).attr("orient","auto").append("path").attr("d","M 0,0 V 4 L6,2 Z")},"initGraphics"),N5={drawRect:MB,drawCircle:TZ,drawSection:uTe,drawText:EZ,drawLabel:lTe,drawTask:hTe,drawBackgroundRect:cTe,initGraphics:dTe},pTe=k(function(e){Object.keys(e).forEach(function(t){FS[t]=e[t]})},"setConf"),Q0={},k(Xke,"drawActorLegend"),FS=at().journey,$m=FS.leftMargin,fTe=k(function(e,t,r,i){let n=at().journey,a=at().securityLevel,s;a==="sandbox"&&(s=Nr("#i"+t));let u=Nr(a==="sandbox"?s.nodes()[0].contentDocument.body:"body");uc.init();let h=u.select("#"+t);N5.initGraphics(h);let d=i.db.getTasks(),p=i.db.getDiagramTitle(),g=i.db.getActors();for(let w in Q0)delete Q0[w];let y=0;g.forEach(w=>{Q0[w]={color:n.actorColours[y%n.actorColours.length],position:y},y++}),Xke(h),uc.insert(0,0,$m,Object.keys(Q0).length*50),gTe(h,d,0);let m=uc.getBounds();p&&h.append("text").text(p).attr("x",$m).attr("font-size","4ex").attr("font-weight","bold").attr("y",25);let x=m.stopy-m.starty+2*n.diagramMarginY,_=$m+m.stopx+2*n.diagramMarginX;Oo(h,x,_,n.useMaxWidth),h.append("line").attr("x1",$m).attr("y1",n.height*4).attr("x2",_-$m-4).attr("y2",n.height*4).attr("stroke-width",4).attr("stroke","black").attr("marker-end","url(#arrowhead)");let E=p?70:0;h.attr("viewBox",`${m.startx} -25 ${_} ${x+E}`),h.attr("preserveAspectRatio","xMinYMin meet"),h.attr("height",x+E+25)},"draw"),uc={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],init:k(function(){this.sequenceItems=[],this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0},"init"),updateVal:k(function(e,t,r,i){e[t]===void 0?e[t]=r:e[t]=i(r,e[t])},"updateVal"),updateBounds:k(function(e,t,r,i){let n=at().journey,a=this,s=0;function u(h){return k(function(d){s++;let p=a.sequenceItems.length-s+1;a.updateVal(d,"starty",t-p*n.boxMargin,Math.min),a.updateVal(d,"stopy",i+p*n.boxMargin,Math.max),a.updateVal(uc.data,"startx",e-p*n.boxMargin,Math.min),a.updateVal(uc.data,"stopx",r+p*n.boxMargin,Math.max),h!=="activation"&&(a.updateVal(d,"startx",e-p*n.boxMargin,Math.min),a.updateVal(d,"stopx",r+p*n.boxMargin,Math.max),a.updateVal(uc.data,"starty",t-p*n.boxMargin,Math.min),a.updateVal(uc.data,"stopy",i+p*n.boxMargin,Math.max))},"updateItemBounds")}k(u,"updateFn"),this.sequenceItems.forEach(u())},"updateBounds"),insert:k(function(e,t,r,i){let n=Math.min(e,r),a=Math.max(e,r),s=Math.min(t,i),u=Math.max(t,i);this.updateVal(uc.data,"startx",n,Math.min),this.updateVal(uc.data,"starty",s,Math.min),this.updateVal(uc.data,"stopx",a,Math.max),this.updateVal(uc.data,"stopy",u,Math.max),this.updateBounds(n,s,a,u)},"insert"),bumpVerticalPos:k(function(e){this.verticalPos=this.verticalPos+e,this.data.stopy=this.verticalPos},"bumpVerticalPos"),getVerticalPos:k(function(){return this.verticalPos},"getVerticalPos"),getBounds:k(function(){return this.data},"getBounds")},LB=FS.sectionFills,AZ=FS.sectionColours,gTe=k(function(e,t,r){let i=at().journey,n="",a=i.height*2+i.diagramMarginY,s=r+a,u=0,h="#CCC",d="black",p=0;for(let[g,y]of t.entries()){if(n!==y.section){h=LB[u%LB.length],p=u%LB.length,d=AZ[u%AZ.length];let x=0,_=y.section;for(let w=g;w<t.length&&t[w].section==_;w++)x=x+1;let E={x:g*i.taskMargin+g*i.width+$m,y:50,text:y.section,fill:h,num:p,colour:d,taskCount:x};N5.drawSection(e,E,i),n=y.section,u++}let m=y.people.reduce((x,_)=>(Q0[_]&&(x[_]=Q0[_]),x),{});y.x=g*i.taskMargin+g*i.width+$m,y.y=s,y.width=i.diagramMarginX,y.height=i.diagramMarginY,y.colour=d,y.fill=h,y.num=p,y.actors=m,N5.drawTask(e,y,i),uc.insert(y.x,y.y,y.x+y.width+i.taskMargin,300+5*30)}},"drawTasks"),MZ={setConf:pTe,draw:fTe},mTe={parser:Kke,db:kZ,renderer:MZ,styles:sTe,init:k(e=>{MZ.setConf(e.journey),kZ.clear()},"init")}}),yTe={};oi(yTe,{diagram:()=>FTe});function LZ(e,t){e.each(function(){var r=Nr(this),i=r.text().split(/(\s+|<br>)/).reverse(),n,a=[],s=1.1,u=r.attr("y"),h=parseFloat(r.attr("dy")),d=r.text(null).append("tspan").attr("x",0).attr("y",u).attr("dy",h+"em");for(let p=0;p<i.length;p++)n=i[i.length-1-p],a.push(n),d.text(a.join(" ").trim()),(d.node().getComputedTextLength()>t||n==="<br>")&&(a.pop(),d.text(a.join(" ").trim()),n==="<br>"?a=[""]:a=[n],d=r.append("tspan").attr("x",0).attr("y",u).attr("dy",s+"em").text(n))})}var RB,vTe,RZ,nx,DZ,DB,$S,ax,IZ,NZ,OZ,BZ,PZ,FZ,$Z,zZ,GZ,xTe,bTe,zS,_Te,wTe,UZ,kTe,TTe,jZ,ETe,CTe,STe,IB,HZ,ATe,MTe,LTe,RTe,zm,DTe,VZ,ITe,NTe,OTe,BTe,PTe,FTe,tKe=D(()=>{Qn(),ha(),ha(),Ge(),RB=function(){var e=k(function(y,m,x,_){for(x=x||{},_=y.length;_--;x[y[_]]=m);return x},"o"),t=[6,8,10,11,12,14,16,17,20,21],r=[1,9],i=[1,10],n=[1,11],a=[1,12],s=[1,13],u=[1,16],h=[1,17],d={trace:k(function(){},"trace"),yy:{},symbols_:{error:2,start:3,timeline:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NEWLINE:10,title:11,acc_title:12,acc_title_value:13,acc_descr:14,acc_descr_value:15,acc_descr_multiline_value:16,section:17,period_statement:18,event_statement:19,period:20,event:21,$accept:0,$end:1},terminals_:{2:"error",4:"timeline",6:"EOF",8:"SPACE",10:"NEWLINE",11:"title",12:"acc_title",13:"acc_title_value",14:"acc_descr",15:"acc_descr_value",16:"acc_descr_multiline_value",17:"section",20:"period",21:"event"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[9,1],[9,2],[9,2],[9,1],[9,1],[9,1],[9,1],[18,1],[19,1]],performAction:k(function(y,m,x,_,E,w,C){var A=w.length-1;switch(E){case 1:return w[A-1];case 2:this.$=[];break;case 3:w[A-1].push(w[A]),this.$=w[A-1];break;case 4:case 5:this.$=w[A];break;case 6:case 7:this.$=[];break;case 8:_.getCommonDb().setDiagramTitle(w[A].substr(6)),this.$=w[A].substr(6);break;case 9:this.$=w[A].trim(),_.getCommonDb().setAccTitle(this.$);break;case 10:case 11:this.$=w[A].trim(),_.getCommonDb().setAccDescription(this.$);break;case 12:_.addSection(w[A].substr(8)),this.$=w[A].substr(8);break;case 15:_.addTask(w[A],0,""),this.$=w[A];break;case 16:_.addEvent(w[A].substr(2)),this.$=w[A];break}},"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},e(t,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:r,12:i,14:n,16:a,17:s,18:14,19:15,20:u,21:h},e(t,[2,7],{1:[2,1]}),e(t,[2,3]),{9:18,11:r,12:i,14:n,16:a,17:s,18:14,19:15,20:u,21:h},e(t,[2,5]),e(t,[2,6]),e(t,[2,8]),{13:[1,19]},{15:[1,20]},e(t,[2,11]),e(t,[2,12]),e(t,[2,13]),e(t,[2,14]),e(t,[2,15]),e(t,[2,16]),e(t,[2,4]),e(t,[2,9]),e(t,[2,10])],defaultActions:{},parseError:k(function(y,m){if(m.recoverable)this.trace(y);else{var x=new Error(y);throw x.hash=m,x}},"parseError"),parse:k(function(y){var m=this,x=[0],_=[],E=[null],w=[],C=this.table,A="",M=0,N=0,B=0,O=2,L=1,$=w.slice.call(arguments,1),G=Object.create(this.lexer),z={yy:{}};for(var F in this.yy)Object.prototype.hasOwnProperty.call(this.yy,F)&&(z.yy[F]=this.yy[F]);G.setInput(y,z.yy),z.yy.lexer=G,z.yy.parser=this,typeof G.yylloc>"u"&&(G.yylloc={});var X=G.yylloc;w.push(X);var I=G.options&&G.options.ranges;typeof z.yy.parseError=="function"?this.parseError=z.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function j(he){x.length=x.length-2*he,E.length=E.length-he,w.length=w.length-he}k(j,"popStack");function H(){var he;return he=_.pop()||G.lex()||L,typeof he!="number"&&(he instanceof Array&&(_=he,he=_.pop()),he=m.symbols_[he]||he),he}k(H,"lex");for(var V,P,q,Z,J,ae,ue={},be,Le,xe,Ae;;){if(q=x[x.length-1],this.defaultActions[q]?Z=this.defaultActions[q]:((V===null||typeof V>"u")&&(V=H()),Z=C[q]&&C[q][V]),typeof Z>"u"||!Z.length||!Z[0]){var oe="";Ae=[];for(be in C[q])this.terminals_[be]&&be>O&&Ae.push("'"+this.terminals_[be]+"'");G.showPosition?oe="Parse error on line "+(M+1)+`:
`+G.showPosition()+`
Expecting `+Ae.join(", ")+", got '"+(this.terminals_[V]||V)+"'":oe="Parse error on line "+(M+1)+": Unexpected "+(V==L?"end of input":"'"+(this.terminals_[V]||V)+"'"),this.parseError(oe,{text:G.match,token:this.terminals_[V]||V,line:G.yylineno,loc:X,expected:Ae})}if(Z[0]instanceof Array&&Z.length>1)throw new Error("Parse Error: multiple actions possible at state: "+q+", token: "+V);switch(Z[0]){case 1:x.push(V),E.push(G.yytext),w.push(G.yylloc),x.push(Z[1]),V=null,P?(V=P,P=null):(N=G.yyleng,A=G.yytext,M=G.yylineno,X=G.yylloc,B>0&&B--);break;case 2:if(Le=this.productions_[Z[1]][1],ue.$=E[E.length-Le],ue._$={first_line:w[w.length-(Le||1)].first_line,last_line:w[w.length-1].last_line,first_column:w[w.length-(Le||1)].first_column,last_column:w[w.length-1].last_column},I&&(ue._$.range=[w[w.length-(Le||1)].range[0],w[w.length-1].range[1]]),ae=this.performAction.apply(ue,[A,N,M,z.yy,Z[1],E,w].concat($)),typeof ae<"u")return ae;Le&&(x=x.slice(0,-1*Le*2),E=E.slice(0,-1*Le),w=w.slice(0,-1*Le)),x.push(this.productions_[Z[1]][0]),E.push(ue.$),w.push(ue._$),xe=C[x[x.length-2]][x[x.length-1]],x.push(xe);break;case 3:return!0}}return!0},"parse")},p=function(){var y={EOF:1,parseError:k(function(m,x){if(this.yy.parser)this.yy.parser.parseError(m,x);else throw new Error(m)},"parseError"),setInput:k(function(m,x){return this.yy=x||this.yy||{},this._input=m,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:k(function(){var m=this._input[0];this.yytext+=m,this.yyleng++,this.offset++,this.match+=m,this.matched+=m;var x=m.match(/(?:\r\n?|\n).*/g);return x?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),m},"input"),unput:k(function(m){var x=m.length,_=m.split(/(?:\r\n?|\n)/g);this._input=m+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-x),this.offset-=x;var E=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),_.length-1&&(this.yylineno-=_.length-1);var w=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:_?(_.length===E.length?this.yylloc.first_column:0)+E[E.length-_.length].length-_[0].length:this.yylloc.first_column-x},this.options.ranges&&(this.yylloc.range=[w[0],w[0]+this.yyleng-x]),this.yyleng=this.yytext.length,this},"unput"),more:k(function(){return this._more=!0,this},"more"),reject:k(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:k(function(m){this.unput(this.match.slice(m))},"less"),pastInput:k(function(){var m=this.matched.substr(0,this.matched.length-this.match.length);return(m.length>20?"...":"")+m.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:k(function(){var m=this.match;return m.length<20&&(m+=this._input.substr(0,20-m.length)),(m.substr(0,20)+(m.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:k(function(){var m=this.pastInput(),x=new Array(m.length+1).join("-");return m+this.upcomingInput()+`
`+x+"^"},"showPosition"),test_match:k(function(m,x){var _,E,w;if(this.options.backtrack_lexer&&(w={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(w.yylloc.range=this.yylloc.range.slice(0))),E=m[0].match(/(?:\r\n?|\n).*/g),E&&(this.yylineno+=E.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:E?E[E.length-1].length-E[E.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+m[0].length},this.yytext+=m[0],this.match+=m[0],this.matches=m,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(m[0].length),this.matched+=m[0],_=this.performAction.call(this,this.yy,this,x,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),_)return _;if(this._backtrack){for(var C in w)this[C]=w[C];return!1}return!1},"test_match"),next:k(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var m,x,_,E;this._more||(this.yytext="",this.match="");for(var w=this._currentRules(),C=0;C<w.length;C++)if(_=this._input.match(this.rules[w[C]]),_&&(!x||_[0].length>x[0].length)){if(x=_,E=C,this.options.backtrack_lexer){if(m=this.test_match(_,w[C]),m!==!1)return m;if(this._backtrack){x=!1;continue}else return!1}else if(!this.options.flex)break}return x?(m=this.test_match(x,w[E]),m!==!1?m:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:k(function(){var m=this.next();return m||this.lex()},"lex"),begin:k(function(m){this.conditionStack.push(m)},"begin"),popState:k(function(){var m=this.conditionStack.length-1;return m>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:k(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:k(function(m){return m=this.conditionStack.length-1-Math.abs(m||0),m>=0?this.conditionStack[m]:"INITIAL"},"topState"),pushState:k(function(m){this.begin(m)},"pushState"),stateStackSize:k(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:k(function(m,x,_,E){var w=E;switch(_){case 0:break;case 1:break;case 2:return 10;case 3:break;case 4:break;case 5:return 4;case 6:return 11;case 7:return this.begin("acc_title"),12;case 8:return this.popState(),"acc_title_value";case 9:return this.begin("acc_descr"),14;case 10:return this.popState(),"acc_descr_value";case 11:this.begin("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:return 17;case 15:return 21;case 16:return 20;case 17:return 6;case 18:return"INVALID"}},"anonymous"),rules:[/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:timeline\b)/i,/^(?:title\s[^\n]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:section\s[^:\n]+)/i,/^(?::\s[^:\n]+)/i,/^(?:[^#:\n]+)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,9,11,14,15,16,17,18],inclusive:!0}}};return y}();d.lexer=p;function g(){this.yy={}}return k(g,"Parser"),g.prototype=d,d.Parser=g,new g}(),RB.parser=RB,vTe=RB,RZ={},By(RZ,{addEvent:()=>$Z,addSection:()=>OZ,addTask:()=>FZ,addTaskOrg:()=>zZ,clear:()=>NZ,default:()=>xTe,getCommonDb:()=>IZ,getSections:()=>BZ,getTasks:()=>PZ}),nx="",DZ=0,DB=[],$S=[],ax=[],IZ=k(()=>qg,"getCommonDb"),NZ=k(function(){DB.length=0,$S.length=0,nx="",ax.length=0,ho()},"clear"),OZ=k(function(e){nx=e,DB.push(e)},"addSection"),BZ=k(function(){return DB},"getSections"),PZ=k(function(){let e=GZ(),t=100,r=0;for(;!e&&r<t;)e=GZ(),r++;return $S.push(...ax),$S},"getTasks"),FZ=k(function(e,t,r){let i={id:DZ++,section:nx,type:nx,task:e,score:t||0,events:r?[r]:[]};ax.push(i)},"addTask"),$Z=k(function(e){ax.find(t=>t.id===DZ-1).events.push(e)},"addEvent"),zZ=k(function(e){let t={section:nx,type:nx,description:e,task:e,classes:[]};$S.push(t)},"addTaskOrg"),GZ=k(function(){let e=k(function(r){return ax[r].processed},"compileTask"),t=!0;for(let[r,i]of ax.entries())e(r),t=t&&i.processed;return t},"compileTasks"),xTe={clear:NZ,getCommonDb:IZ,addSection:OZ,getSections:BZ,getTasks:PZ,addTask:FZ,addTaskOrg:zZ,addEvent:$Z},bTe=12,zS=k(function(e,t){let r=e.append("rect");return r.attr("x",t.x),r.attr("y",t.y),r.attr("fill",t.fill),r.attr("stroke",t.stroke),r.attr("width",t.width),r.attr("height",t.height),r.attr("rx",t.rx),r.attr("ry",t.ry),t.class!==void 0&&r.attr("class",t.class),r},"drawRect"),_Te=k(function(e,t){let r=e.append("circle").attr("cx",t.cx).attr("cy",t.cy).attr("class","face").attr("r",15).attr("stroke-width",2).attr("overflow","visible"),i=e.append("g");i.append("circle").attr("cx",t.cx-15/3).attr("cy",t.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),i.append("circle").attr("cx",t.cx+15/3).attr("cy",t.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666");function n(u){let h=e_().startAngle(Math.PI/2).endAngle(3*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);u.append("path").attr("class","mouth").attr("d",h).attr("transform","translate("+t.cx+","+(t.cy+2)+")")}k(n,"smile");function a(u){let h=e_().startAngle(3*Math.PI/2).endAngle(5*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);u.append("path").attr("class","mouth").attr("d",h).attr("transform","translate("+t.cx+","+(t.cy+7)+")")}k(a,"sad");function s(u){u.append("line").attr("class","mouth").attr("stroke",2).attr("x1",t.cx-5).attr("y1",t.cy+7).attr("x2",t.cx+5).attr("y2",t.cy+7).attr("class","mouth").attr("stroke-width","1px").attr("stroke","#666")}return k(s,"ambivalent"),t.score>3?n(i):t.score<3?a(i):s(i),r},"drawFace"),wTe=k(function(e,t){let r=e.append("circle");return r.attr("cx",t.cx),r.attr("cy",t.cy),r.attr("class","actor-"+t.pos),r.attr("fill",t.fill),r.attr("stroke",t.stroke),r.attr("r",t.r),r.class!==void 0&&r.attr("class",r.class),t.title!==void 0&&r.append("title").text(t.title),r},"drawCircle"),UZ=k(function(e,t){let r=t.text.replace(/<br\s*\/?>/gi," "),i=e.append("text");i.attr("x",t.x),i.attr("y",t.y),i.attr("class","legend"),i.style("text-anchor",t.anchor),t.class!==void 0&&i.attr("class",t.class);let n=i.append("tspan");return n.attr("x",t.x+t.textMargin*2),n.text(r),i},"drawText"),kTe=k(function(e,t){function r(n,a,s,u,h){return n+","+a+" "+(n+s)+","+a+" "+(n+s)+","+(a+u-h)+" "+(n+s-h*1.2)+","+(a+u)+" "+n+","+(a+u)}k(r,"genPoints");let i=e.append("polygon");i.attr("points",r(t.x,t.y,50,20,7)),i.attr("class","labelBox"),t.y=t.y+t.labelMargin,t.x=t.x+.5*t.labelMargin,UZ(e,t)},"drawLabel"),TTe=k(function(e,t,r){let i=e.append("g"),n=IB();n.x=t.x,n.y=t.y,n.fill=t.fill,n.width=r.width,n.height=r.height,n.class="journey-section section-type-"+t.num,n.rx=3,n.ry=3,zS(i,n),HZ(r)(t.text,i,n.x,n.y,n.width,n.height,{class:"journey-section section-type-"+t.num},r,t.colour)},"drawSection"),jZ=-1,ETe=k(function(e,t,r){let i=t.x+r.width/2,n=e.append("g");jZ++;let a=300+5*30;n.append("line").attr("id","task"+jZ).attr("x1",i).attr("y1",t.y).attr("x2",i).attr("y2",a).attr("class","task-line").attr("stroke-width","1px").attr("stroke-dasharray","4 2").attr("stroke","#666"),_Te(n,{cx:i,cy:300+(5-t.score)*30,score:t.score});let s=IB();s.x=t.x,s.y=t.y,s.fill=t.fill,s.width=r.width,s.height=r.height,s.class="task task-type-"+t.num,s.rx=3,s.ry=3,zS(n,s),HZ(r)(t.task,n,s.x,s.y,s.width,s.height,{class:"task"},r,t.colour)},"drawTask"),CTe=k(function(e,t){zS(e,{x:t.startx,y:t.starty,width:t.stopx-t.startx,height:t.stopy-t.starty,fill:t.fill,class:"rect"}).lower()},"drawBackgroundRect"),STe=k(function(){return{x:0,y:0,fill:void 0,"text-anchor":"start",width:100,height:100,textMargin:0,rx:0,ry:0}},"getTextObj"),IB=k(function(){return{x:0,y:0,width:100,anchor:"start",height:100,rx:0,ry:0}},"getNoteRect"),HZ=function(){function e(n,a,s,u,h,d,p,g){let y=a.append("text").attr("x",s+h/2).attr("y",u+d/2+5).style("font-color",g).style("text-anchor","middle").text(n);i(y,p)}k(e,"byText");function t(n,a,s,u,h,d,p,g,y){let{taskFontSize:m,taskFontFamily:x}=g,_=n.split(/<br\s*\/?>/gi);for(let E=0;E<_.length;E++){let w=E*m-m*(_.length-1)/2,C=a.append("text").attr("x",s+h/2).attr("y",u).attr("fill",y).style("text-anchor","middle").style("font-size",m).style("font-family",x);C.append("tspan").attr("x",s+h/2).attr("dy",w).text(_[E]),C.attr("y",u+d/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),i(C,p)}}k(t,"byTspan");function r(n,a,s,u,h,d,p,g){let y=a.append("switch"),m=y.append("foreignObject").attr("x",s).attr("y",u).attr("width",h).attr("height",d).attr("position","fixed").append("xhtml:div").style("display","table").style("height","100%").style("width","100%");m.append("div").attr("class","label").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(n),t(n,y,s,u,h,d,p,g),i(m,p)}k(r,"byFo");function i(n,a){for(let s in a)s in a&&n.attr(s,a[s])}return k(i,"_setTextAttrs"),function(n){return n.textPlacement==="fo"?r:n.textPlacement==="old"?e:t}}(),ATe=k(function(e){e.append("defs").append("marker").attr("id","arrowhead").attr("refX",5).attr("refY",2).attr("markerWidth",6).attr("markerHeight",4).attr("orient","auto").append("path").attr("d","M 0,0 V 4 L6,2 Z")},"initGraphics"),k(LZ,"wrap"),MTe=k(function(e,t,r,i){let n=r%bTe-1,a=e.append("g");t.section=n,a.attr("class",(t.class?t.class+" ":"")+"timeline-node "+("section-"+n));let s=a.append("g"),u=a.append("g"),h=u.append("text").text(t.descr).attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle").call(LZ,t.width).node().getBBox(),d=i.fontSize?.replace?i.fontSize.replace("px",""):i.fontSize;return t.height=h.height+d*1.1*.5+t.padding,t.height=Math.max(t.height,t.maxHeight),t.width=t.width+2*t.padding,u.attr("transform","translate("+t.width/2+", "+t.padding/2+")"),RTe(s,t,n,i),t},"drawNode"),LTe=k(function(e,t,r){let i=e.append("g"),n=i.append("text").text(t.descr).attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle").call(LZ,t.width).node().getBBox(),a=r.fontSize?.replace?r.fontSize.replace("px",""):r.fontSize;return i.remove(),n.height+a*1.1*.5+t.padding},"getVirtualNodeHeight"),RTe=k(function(e,t,r){e.append("path").attr("id","node-"+t.id).attr("class","node-bkg node-"+t.type).attr("d",`M0 ${t.height-5} v${-t.height+2*5} q0,-5 5,-5 h${t.width-2*5} q5,0 5,5 v${t.height-5} H0 Z`),e.append("line").attr("class","node-line-"+r).attr("x1",0).attr("y1",t.height).attr("x2",t.width).attr("y2",t.height)},"defaultBkg"),zm={drawRect:zS,drawCircle:wTe,drawSection:TTe,drawText:UZ,drawLabel:kTe,drawTask:ETe,drawBackgroundRect:CTe,getTextObj:STe,getNoteRect:IB,initGraphics:ATe,drawNode:MTe,getVirtualNodeHeight:LTe},DTe=k(function(e,t,r,i){let n=at(),a=n.leftMargin??50;Ce.debug("timeline",i.db);let s=n.securityLevel,u;s==="sandbox"&&(u=Nr("#i"+t));let h=Nr(s==="sandbox"?u.nodes()[0].contentDocument.body:"body").select("#"+t);h.append("g");let d=i.db.getTasks(),p=i.db.getCommonDb().getDiagramTitle();Ce.debug("task",d),zm.initGraphics(h);let g=i.db.getSections();Ce.debug("sections",g);let y=0,m=0,x=0,_=0,E=50+a,w=50;_=50;let C=0,A=!0;g.forEach(function(O){let L={number:C,descr:O,section:C,width:150,padding:20,maxHeight:y},$=zm.getVirtualNodeHeight(h,L,n);Ce.debug("sectionHeight before draw",$),y=Math.max(y,$+20)});let M=0,N=0;Ce.debug("tasks.length",d.length);for(let[O,L]of d.entries()){let $={number:O,descr:L,section:L.section,width:150,padding:20,maxHeight:m},G=zm.getVirtualNodeHeight(h,$,n);Ce.debug("taskHeight before draw",G),m=Math.max(m,G+20),M=Math.max(M,L.events.length);let z=0;for(let F of L.events){let X={descr:F,section:L.section,number:L.section,width:150,padding:20,maxHeight:50};z+=zm.getVirtualNodeHeight(h,X,n)}N=Math.max(N,z)}Ce.debug("maxSectionHeight before draw",y),Ce.debug("maxTaskHeight before draw",m),g&&g.length>0?g.forEach(O=>{let L=d.filter(F=>F.section===O),$={number:C,descr:O,section:C,width:200*Math.max(L.length,1)-50,padding:20,maxHeight:y};Ce.debug("sectionNode",$);let G=h.append("g"),z=zm.drawNode(G,$,C,n);Ce.debug("sectionNode output",z),G.attr("transform",`translate(${E}, ${_})`),w+=y+50,L.length>0&&VZ(h,L,C,E,w,m,n,M,N,y,!1),E+=200*Math.max(L.length,1),w=_,C++}):(A=!1,VZ(h,d,C,E,w,m,n,M,N,y,!0));let B=h.node().getBBox();Ce.debug("bounds",B),p&&h.append("text").text(p).attr("x",B.width/2-a).attr("font-size","4ex").attr("font-weight","bold").attr("y",20),x=A?y+m+150:m+100,h.append("g").attr("class","lineWrapper").append("line").attr("x1",a).attr("y1",x).attr("x2",B.width+3*a).attr("y2",x).attr("stroke-width",4).attr("stroke","black").attr("marker-end","url(#arrowhead)"),$p(void 0,h,n.timeline?.padding??50,n.timeline?.useMaxWidth??!1)},"draw"),VZ=k(function(e,t,r,i,n,a,s,u,h,d,p){for(let g of t){let y={descr:g.task,section:r,number:r,width:150,padding:20,maxHeight:a};Ce.debug("taskNode",y);let m=e.append("g").attr("class","taskWrapper"),x=zm.drawNode(m,y,r,s).height;if(Ce.debug("taskHeight after draw",x),m.attr("transform",`translate(${i}, ${n})`),a=Math.max(a,x),g.events){let _=e.append("g").attr("class","lineWrapper"),E=a;n+=100,E=E+ITe(e,g.events,r,i,n,s),n-=100,_.append("line").attr("x1",i+190/2).attr("y1",n+a).attr("x2",i+190/2).attr("y2",n+a+(p?a:d)+h+120).attr("stroke-width",2).attr("stroke","black").attr("marker-end","url(#arrowhead)").attr("stroke-dasharray","5,5")}i=i+200,p&&!s.timeline?.disableMulticolor&&r++}n=n-10},"drawTasks"),ITe=k(function(e,t,r,i,n,a){let s=0,u=n;n=n+100;for(let h of t){let d={descr:h,section:r,number:r,width:150,padding:20,maxHeight:50};Ce.debug("eventNode",d);let p=e.append("g").attr("class","eventWrapper"),g=zm.drawNode(p,d,r,a).height;s=s+g,p.attr("transform",`translate(${i}, ${n})`),n=n+10+g}return n=u,s},"drawEvents"),NTe={setConf:k(()=>{},"setConf"),draw:DTe},OTe=k(e=>{let t="";for(let r=0;r<e.THEME_COLOR_LIMIT;r++)e["lineColor"+r]=e["lineColor"+r]||e["cScaleInv"+r],Rs(e["lineColor"+r])?e["lineColor"+r]=Cr(e["lineColor"+r],20):e["lineColor"+r]=Fi(e["lineColor"+r],20);for(let r=0;r<e.THEME_COLOR_LIMIT;r++){let i=""+(17-3*r);t+=`
    .section-${r-1} rect, .section-${r-1} path, .section-${r-1} circle, .section-${r-1} path  {
      fill: ${e["cScale"+r]};
    }
    .section-${r-1} text {
     fill: ${e["cScaleLabel"+r]};
    }
    .node-icon-${r-1} {
      font-size: 40px;
      color: ${e["cScaleLabel"+r]};
    }
    .section-edge-${r-1}{
      stroke: ${e["cScale"+r]};
    }
    .edge-depth-${r-1}{
      stroke-width: ${i};
    }
    .section-${r-1} line {
      stroke: ${e["cScaleInv"+r]} ;
      stroke-width: 3;
    }

    .lineWrapper line{
      stroke: ${e["cScaleLabel"+r]} ;
    }

    .disabled, .disabled circle, .disabled text {
      fill: lightgray;
    }
    .disabled text {
      fill: #efefef;
    }
    `}return t},"genSections"),BTe=k(e=>`
  .edge {
    stroke-width: 3;
  }
  ${OTe(e)}
  .section-root rect, .section-root path, .section-root circle  {
    fill: ${e.git0};
  }
  .section-root text {
    fill: ${e.gitBranchLabel0};
  }
  .icon-container {
    height:100%;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .edge {
    fill: none;
  }
  .eventWrapper  {
   filter: brightness(120%);
  }
`,"getStyles"),PTe=BTe,FTe={db:RZ,renderer:NTe,parser:vTe,styles:PTe}});function ll(e){"@babel/helpers - typeof";return ll=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ll(e)}function WZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $Te(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function YZ(e,t,r){return t&&$Te(e.prototype,t),r&&$Te(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function zTe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hd(e,t){return rKe(e)||iKe(e,t)||GTe(e,t)||nKe()}function rKe(e){if(Array.isArray(e))return e}function iKe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i=[],n=!0,a=!1,s,u;try{for(r=r.call(e);!(n=(s=r.next()).done)&&(i.push(s.value),!(t&&i.length===t));n=!0);}catch(h){a=!0,u=h}finally{try{!n&&r.return!=null&&r.return()}finally{if(a)throw u}}return i}}function GTe(e,t){if(e){if(typeof e=="string")return UTe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return UTe(e,t)}}function UTe(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function nKe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jTe(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=GTe(e))||t&&e&&typeof e.length=="number"){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(h){throw h},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,s=!1,u;return{s:function(){r=r.call(e)},n:function(){var h=r.next();return a=h.done,h},e:function(h){s=!0,u=h},f:function(){try{!a&&r.return!=null&&r.return()}finally{if(s)throw u}}}}function aKe(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function sKe(e,t){return t={exports:{}},e(t,t.exports),t.exports}function oKe(e){for(var t=e.length;t--&&HEe.test(e.charAt(t)););return t}function lKe(e){return e&&e.slice(0,VEe(e)+1).replace(WEe,"")}function uKe(e){var t=XEe.call(e,V5),r=e[V5];try{e[V5]=void 0;var i=!0}catch{}var n=KEe.call(e);return i&&(t?e[V5]=r:delete e[V5]),n}function hKe(e){return JEe.call(e)}function cKe(e){return e==null?e===void 0?rCe:tCe:dQ&&dQ in Object(e)?ZEe(e):eCe(e)}function dKe(e){return e!=null&&typeof e=="object"}function pKe(e){return typeof e=="symbol"||iCe(e)&&pQ(e)==nCe}function fKe(e){if(typeof e=="number")return e;if(W5(e))return fQ;if(Gm(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Gm(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=YEe(e);var r=sCe.test(e);return r||oCe.test(e)?lCe(e.slice(2),r?2:8):aCe.test(e)?fQ:+e}function gKe(e,t,r){var i,n,a,s,u,h,d=0,p=!1,g=!1,y=!0;if(typeof e!="function")throw new TypeError(uCe);t=gQ(t)||0,Gm(r)&&(p=!!r.leading,g="maxWait"in r,a=g?hCe(gQ(r.maxWait)||0,t):a,y="trailing"in r?!!r.trailing:y);function m(B){var O=i,L=n;return i=n=void 0,d=B,s=e.apply(L,O),s}function x(B){return d=B,u=setTimeout(w,t),p?m(B):s}function _(B){var O=B-h,L=B-d,$=t-O;return g?cCe($,a-L):$}function E(B){var O=B-h,L=B-d;return h===void 0||O>=t||O<0||g&&L>=a}function w(){var B=UB();if(E(B))return C(B);u=setTimeout(w,_(B))}function C(B){return u=void 0,y&&i?m(B):(i=n=void 0,s)}function A(){u!==void 0&&clearTimeout(u),d=0,i=h=n=u=void 0}function M(){return u===void 0?s:C(UB())}function N(){var B=UB(),O=E(B);if(i=arguments,n=this,h=B,O){if(u===void 0)return x(h);if(g)return clearTimeout(u),u=setTimeout(w,t),m(h)}return u===void 0&&(u=setTimeout(w,t)),s}return N.cancel=A,N.flush=M,N}function NB(e,t,r,i,n,a){var s;return Hs(e)?s=e:s=fx[e]||fx.euclidean,t===0&&Hs(e)?s(n,a):s(t,r,i,n,a)}function mKe(e,t){if(l8(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||W5(e)?!0:rSe.test(e)||!tSe.test(e)||t!=null&&e in Object(t)}function yKe(e){if(!Gm(e))return!1;var t=pQ(e);return t==aSe||t==sSe||t==nSe||t==oSe}function vKe(e){return!!aJ&&aJ in e}function xKe(e){if(e!=null){try{return dSe.call(e)}catch{}try{return e+""}catch{}}return""}function bKe(e){if(!Gm(e)||hSe(e))return!1;var t=lSe(e)?bSe:gSe;return t.test(pSe(e))}function _Ke(e,t){return e?.[t]}function wKe(e,t){var r=wSe(e,t);return _Se(r)?r:void 0}function kKe(){this.__data__=rw?rw(null):{},this.size=0}function TKe(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function EKe(e){var t=this.__data__;if(rw){var r=t[e];return r===CSe?void 0:r}return ASe.call(t,e)?t[e]:void 0}function CKe(e){var t=this.__data__;return rw?t[e]!==void 0:RSe.call(t,e)}function SKe(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=rw&&t===void 0?ISe:t,this}function O5(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}function AKe(){this.__data__=[],this.size=0}function MKe(e,t){return e===t||e!==e&&t!==t}function LKe(e,t){for(var r=e.length;r--;)if(oJ(e[r][0],t))return r;return-1}function RKe(e){var t=this.__data__,r=u8(t,e);if(r<0)return!1;var i=t.length-1;return r==i?t.pop():PSe.call(t,r,1),--this.size,!0}function DKe(e){var t=this.__data__,r=u8(t,e);return r<0?void 0:t[r][1]}function IKe(e){return u8(this.__data__,e)>-1}function NKe(e,t){var r=this.__data__,i=u8(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this}function B5(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}function OKe(){this.size=0,this.__data__={hash:new sJ,map:new(HSe||USe),string:new sJ}}function BKe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function PKe(e,t){var r=e.__data__;return WSe(t)?r[typeof t=="string"?"string":"hash"]:r.map}function FKe(e){var t=h8(this,e).delete(e);return this.size-=t?1:0,t}function $Ke(e){return h8(this,e).get(e)}function zKe(e){return h8(this,e).has(e)}function GKe(e,t){var r=h8(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this}function P5(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}function qZ(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(ZSe);var r=function(){var i=arguments,n=t?t.apply(this,i):i[0],a=r.cache;if(a.has(n))return a.get(n);var s=e.apply(this,i);return r.cache=a.set(n,s)||a,s};return r.cache=new(qZ.Cache||lJ),r}function UKe(e){var t=QSe(e,function(i){return r.size===JSe&&r.clear(),i}),r=t.cache;return t}function jKe(e,t){for(var r=-1,i=e==null?0:e.length,n=Array(i);++r<i;)n[r]=t(e[r],r,e);return n}function HTe(e){if(typeof e=="string")return e;if(l8(e))return hJ(e,HTe)+"";if(W5(e))return dJ?dJ.call(e):"";var t=e+"";return t=="0"&&1/e==-n8e?"-0":t}function HKe(e){return e==null?"":a8e(e)}function VKe(e,t){return l8(e)?e:iSe(e,t)?[e]:uJ(pJ(e))}function WKe(e){if(typeof e=="string"||W5(e))return e;var t=e+"";return t=="0"&&1/e==-s8e?"-0":t}function YKe(e,t){t=fJ(t,e);for(var r=0,i=t.length;e!=null&&r<i;)e=e[sP(t[r++])];return r&&r==i?e:void 0}function qKe(e,t,r){var i=e==null?void 0:o8e(e,t);return i===void 0?r:i}function XKe(e,t,r){t=="__proto__"&&gJ?gJ(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function KKe(e,t,r){var i=e[t];(!(d8e.call(e,t)&&oJ(i,r))||r===void 0&&!(t in e))&&h8e(e,t,r)}function ZKe(e,t){var r=typeof e;return t=t??f8e,!!t&&(r=="number"||r!="symbol"&&g8e.test(e))&&e>-1&&e%1==0&&e<t}function QKe(e,t,r,i){if(!Gm(e))return e;t=fJ(t,e);for(var n=-1,a=t.length,s=a-1,u=e;u!=null&&++n<a;){var h=sP(t[n]),d=r;if(h==="__proto__"||h==="constructor"||h==="prototype")return e;if(n!=s){var p=u[h];d=i?i(p,h,u):void 0,d===void 0&&(d=Gm(p)?p:m8e(t[n+1])?[]:{})}p8e(u,h,d),u=u[h]}return e}function JKe(e,t,r){return e==null?e:y8e(e,t,r)}function eZe(e,t){var r=-1,i=e.length;for(t||(t=Array(i));++r<i;)t[r]=e[r];return t}function tZe(e){return l8(e)?hJ(e,sP):W5(e)?[e]:x8e(uJ(pJ(e)))}function XZ(e,t,r,i){for(var n=[],a=new lx,s=e.cy(),u=s.hasCompoundNodes(),h=0;h<e.length;h++){var d=e[h];r?n.push(d):u&&i(n,a,d)}for(;n.length>0;){var p=n.shift();t(p),a.add(p.id()),u&&i(n,a,p)}return e}function VTe(e,t,r){if(r.isParent())for(var i=r._private.children,n=0;n<i.length;n++){var a=i[n];t.has(a.id())||e.push(a)}}function WTe(e,t,r){if(r.isChild()){var i=r._private.parent;t.has(i.id())||e.push(i)}}function rZe(e,t,r){WTe(e,t,r),VTe(e,t,r)}function KZ(e){return function(t){var r=this;if(t===void 0&&(t=!0),r.length!==0)if(r.isNode()&&!r.removed()){for(var i=0,n=r[0],a=n._private.edges,s=0;s<a.length;s++){var u=a[s];!t&&u.isLoop()||(i+=e(n,u))}return i}else return}}function F5(e,t){return function(r){for(var i,n=this.nodes(),a=0;a<n.length;a++){var s=n[a],u=s[e](r);u!==void 0&&(i===void 0||t(u,i))&&(i=u)}return i}}function GS(){return!1}function OB(){return!0}function BB(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:nAe,t=arguments.length>1?arguments[1]:void 0,r=0;r<MJ.length;r++){var i=MJ[r];this[i]=e[i]||AJ[i]}this.context=t||this.context,this.listeners=[],this.emitting=0}function YTe(e,t,r){var i=r._private,n=i.styleCache=i.styleCache||[],a;return(a=n[e])!=null||(a=n[e]=t(r)),a}function PB(e,t){return e=Um(e),function(r){return YTe(e,t,r)}}function FB(e,t){e=Um(e);var r=function(i){return t.call(i)};return function(){var i=this[0];if(i)return YTe(e,r,i)}}function ZZ(e,t){var r=e._private,i=r.data.parent?e.parents():null;if(i)for(var n=0;n<i.length;n++){var a=i[n];if(!t(a))return!1}return!0}function QZ(e){var t=e.ok,r=e.edgeOkViaNode||e.ok,i=e.parentOk||e.ok;return function(){var n=this.cy();if(!n.styleEnabled())return!0;var a=this[0],s=n.hasCompoundNodes();if(a){var u=a._private;if(!t(a))return!1;if(a.isNode())return!s||ZZ(a,i);var h=u.source,d=u.target;return r(h)&&(!s||ZZ(h,r))&&(h===d||r(d)&&(!s||ZZ(d,r)))}}}function qTe(e){return function(){var t=arguments,r=[];if(t.length===2){var i=t[0],n=t[1];this.on(e.event,i,n)}else if(t.length===1&&Hs(t[0])){var a=t[0];this.on(e.event,a)}else if(t.length===0||t.length===1&&ps(t[0])){for(var s=t.length===1?t[0]:null,u=0;u<this.length;u++){var h=this[u],d=!e.ableField||h._private[e.ableField],p=h._private[e.field]!=e.value;if(e.overrideAble){var g=e.overrideAble(h);if(g!==void 0&&(d=g,!g))return this}d&&(h._private[e.field]=e.value,p&&r.push(h))}var y=this.spawn(r);y.updateStyle(),y.emit(e.event),s&&y.emit(s)}return this}}function $5(e){ig[e.field]=function(){var t=this[0];if(t){if(e.overrideField){var r=e.overrideField(t);if(r!==void 0)return r}return t._private[e.field]}},ig[e.on]=qTe({event:e.on,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!0}),ig[e.off]=qTe({event:e.off,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!1})}function XTe(e){return function(t){for(var r=[],i=0;i<this.length;i++){var n=this[i],a=n._private[e.attr];a&&r.push(a)}return this.spawn(r,!0).filter(t)}}function KTe(e){return function(t){var r=[],i=this._private.cy,n=e||{};wn(t)&&(t=i.$(t));for(var a=0;a<t.length;a++)for(var s=t[a]._private.edges,u=0;u<s.length;u++){var h=s[u],d=h._private.data,p=this.hasElementWithId(d.source)&&t.hasElementWithId(d.target),g=t.hasElementWithId(d.source)&&this.hasElementWithId(d.target),y=p||g;y&&((n.thisIsSrc||n.thisIsTgt)&&(n.thisIsSrc&&!p||n.thisIsTgt&&!g)||r.push(h))}return this.spawn(r,!0)}}function ZTe(e){var t={codirected:!1};return e=Rn({},t,e),function(r){for(var i=[],n=this.edges(),a=e,s=0;s<n.length;s++)for(var u=n[s],h=u._private,d=h.source,p=d._private.data.id,g=h.data.target,y=d._private.edges,m=0;m<y.length;m++){var x=y[m],_=x._private.data,E=_.target,w=_.source,C=E===g&&w===p,A=p===E&&g===w;(a.codirected&&C||!a.codirected&&(C||A))&&i.push(x)}return this.spawn(i,!0).filter(r)}}function iZe(e,t,r,i){var n=4,a=.001,s=1e-7,u=10,h=11,d=1/(h-1),p=typeof Float32Array<"u";if(arguments.length!==4)return!1;for(var g=0;g<4;++g)if(typeof arguments[g]!="number"||isNaN(arguments[g])||!isFinite(arguments[g]))return!1;e=Math.min(e,1),r=Math.min(r,1),e=Math.max(e,0),r=Math.max(r,0);var y=p?new Float32Array(h):new Array(h);function m(G,z){return 1-3*z+3*G}function x(G,z){return 3*z-6*G}function _(G){return 3*G}function E(G,z,F){return((m(z,F)*G+x(z,F))*G+_(z))*G}function w(G,z,F){return 3*m(z,F)*G*G+2*x(z,F)*G+_(z)}function C(G,z){for(var F=0;F<n;++F){var X=w(z,e,r);if(X===0)return z;var I=E(z,e,r)-G;z-=I/X}return z}function A(){for(var G=0;G<h;++G)y[G]=E(G*d,e,r)}function M(G,z,F){var X,I,j=0;do I=z+(F-z)/2,X=E(I,e,r)-G,X>0?F=I:z=I;while(Math.abs(X)>s&&++j<u);return I}function N(G){for(var z=0,F=1,X=h-1;F!==X&&y[F]<=G;++F)z+=d;--F;var I=(G-y[F])/(y[F+1]-y[F]),j=z+I*d,H=w(j,e,r);return H>=a?C(G,j):H===0?j:M(G,z,z+d)}var B=!1;function O(){B=!0,(e!==t||r!==i)&&A()}var L=function(G){return B||O(),e===t&&r===i?G:G===0?0:G===1?1:E(N(G),t,i)};L.getControlPoints=function(){return[{x:e,y:t},{x:r,y:i}]};var $="generateBezier("+[e,t,r,i]+")";return L.toString=function(){return $},L}function QTe(e,t,r,i,n){if(i===1||t===r)return r;var a=n(t,r,i);return e==null||((e.roundValue||e.color)&&(a=Math.round(a)),e.min!==void 0&&(a=Math.max(a,e.min)),e.max!==void 0&&(a=Math.min(a,e.max))),a}function JTe(e,t){return e.pfValue!=null||e.value!=null?e.pfValue!=null&&(t==null||t.type.units!=="%")?e.pfValue:e.value:e}function z5(e,t,r,i,n){var a=n!=null?n.type:null;r<0?r=0:r>1&&(r=1);var s=JTe(e,n),u=JTe(t,n);if(Ei(s)&&Ei(u))return QTe(a,s,u,r,i);if(ps(s)&&ps(u)){for(var h=[],d=0;d<u.length;d++){var p=s[d],g=u[d];if(p!=null&&g!=null){var y=QTe(a,p,g,r,i);h.push(y)}else h.push(g)}return h}}function nZe(e,t,r,i){var n=!i,a=e._private,s=t._private,u=s.easing,h=s.startTime,d=i?e:e.cy(),p=d.style();if(!s.easingImpl)if(u==null)s.easingImpl=b8.linear;else{var g;if(wn(u)){var y=p.parse("transition-timing-function",u);g=y.value}else g=u;var m,x;wn(g)?(m=g,x=[]):(m=g[1],x=g.slice(2).map(function(q){return+q})),x.length>0?(m==="spring"&&x.push(s.duration),s.easingImpl=b8[m].apply(null,x)):s.easingImpl=b8[m]}var _=s.easingImpl,E;if(s.duration===0?E=1:E=(r-h)/s.duration,s.applying&&(E=s.progress),E<0?E=0:E>1&&(E=1),s.delay==null){var w=s.startPosition,C=s.position;if(C&&n&&!e.locked()){var A={};US(w.x,C.x)&&(A.x=z5(w.x,C.x,E,_)),US(w.y,C.y)&&(A.y=z5(w.y,C.y,E,_)),e.position(A)}var M=s.startPan,N=s.pan,B=a.pan,O=N!=null&&i;O&&(US(M.x,N.x)&&(B.x=z5(M.x,N.x,E,_)),US(M.y,N.y)&&(B.y=z5(M.y,N.y,E,_)),e.emit("pan"));var L=s.startZoom,$=s.zoom,G=$!=null&&i;G&&(US(L,$)&&(a.zoom=Q5(a.minZoom,z5(L,$,E,_),a.maxZoom)),e.emit("zoom")),(O||G)&&e.emit("viewport");var z=s.style;if(z&&z.length>0&&n){for(var F=0;F<z.length;F++){var X=z[F],I=X.name,j=X,H=s.startStyle[I],V=p.properties[H.name],P=z5(H,j,E,_,V);p.overrideBypass(e,I,P)}e.emit("style")}}return s.progress=E,E}function US(e,t){return e==null||t==null?!1:Ei(e)&&Ei(t)?!0:!!(e&&t)}function aZe(e,t,r,i){var n=t._private;n.started=!0,n.startTime=r-n.progress*n.duration}function eEe(e,t){var r=t._private.aniEles,i=[];function n(p,g){var y=p._private,m=y.animation.current,x=y.animation.queue,_=!1;if(m.length===0){var E=x.shift();E&&m.push(E)}for(var w=function(N){for(var B=N.length-1;B>=0;B--){var O=N[B];O()}N.splice(0,N.length)},C=m.length-1;C>=0;C--){var A=m[C],M=A._private;if(M.stopped){m.splice(C,1),M.hooked=!1,M.playing=!1,M.started=!1,w(M.frames);continue}!M.playing&&!M.applying||(M.playing&&M.applying&&(M.applying=!1),M.started||aZe(p,A,e),nZe(p,A,e,g),M.applying&&(M.applying=!1),w(M.frames),M.step!=null&&M.step(e),A.completed()&&(m.splice(C,1),M.hooked=!1,M.playing=!1,M.started=!1,w(M.completes)),_=!0)}return!g&&m.length===0&&x.length===0&&i.push(p),_}for(var a=!1,s=0;s<r.length;s++){var u=r[s],h=n(u);a=a||h}var d=n(t,!0);(a||d)&&(r.length>0?t.notify("draw",r):t.notify("draw")),r.unmerge(i),t.emit("step")}function tEe(e){this.options=Rn({},kAe,TAe,e)}function rEe(e){this.options=Rn({},EAe,e)}function iEe(e){this.options=Rn({},CAe,e)}function $B(e){this.options=Rn({},SAe,e),this.options.layout=this;var t=this.options.eles.nodes(),r=this.options.eles.edges(),i=r.filter(function(n){var a=n.source().data("id"),s=n.target().data("id"),u=t.some(function(d){return d.data("id")===a}),h=t.some(function(d){return d.data("id")===s});return!u||!h});this.options.eles=this.options.eles.not(i)}function nEe(e){this.options=Rn({},jAe,e)}function JZ(e){this.options=Rn({},HAe,e)}function aEe(e){this.options=Rn({},VAe,e)}function sEe(e){this.options=Rn({},WAe,e)}function oEe(e){this.options=e,this.notifications=0}function lEe(e,t){t.radius===0?e.lineTo(t.cx,t.cy):e.arc(t.cx,t.cy,t.radius,t.startAngle,t.endAngle,t.counterClockwise)}function eQ(e,t,r,i){var n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;return i===0||t.radius===0?{cx:t.x,cy:t.y,radius:0,startX:t.x,startY:t.y,stopX:t.x,stopY:t.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(e9e(e,t,r,i,n),{cx:WJ,cy:YJ,radius:wx,startX:KAe,startY:ZAe,stopX:qJ,stopY:XJ,startAngle:Xd.ang+Math.PI/2*bx,endAngle:dc.ang-Math.PI/2*bx,counterClockwise:mP})}function uEe(e){var t=[];if(e!=null){for(var r=0;r<e.length;r+=2){var i=e[r],n=e[r+1];t.push({x:i,y:n})}return t}}function sZe(e,t,r){for(var i=function(h,d,p,g){return ul(h,d,p,g)},n=t._private,a=n.rstyle.bezierPts,s=0;s<e.bezierProjPcts.length;s++){var u=e.bezierProjPcts[s];a.push({x:i(r[0],r[2],r[4],u),y:i(r[1],r[3],r[5],u)})}}function oZe(e,t){for(var r=0;r<t.length;r++){var i=t[r];e.lineTo(i.x,i.y)}}function lZe(e,t,r){for(var i,n=0;n<t.length;n++){var a=t[n];n===0&&(i=a),e.lineTo(a.x,a.y)}e.quadraticCurveTo(r.x,r.y,i.x,i.y)}function hEe(e,t,r){e.beginPath&&e.beginPath();for(var i=t,n=0;n<i.length;n++){var a=i[n];e.lineTo(a.x,a.y)}var s=r,u=r[0];e.moveTo(u.x,u.y);for(var n=1;n<s.length;n++){var a=s[n];e.lineTo(a.x,a.y)}e.closePath&&e.closePath()}function uZe(e,t,r,i,n){e.beginPath&&e.beginPath(),e.arc(r,i,n,0,Math.PI*2,!1);var a=t,s=a[0];e.moveTo(s.x,s.y);for(var u=0;u<a.length;u++){var h=a[u];e.lineTo(h.x,h.y)}e.closePath&&e.closePath()}function hZe(e,t,r,i){e.arc(t,r,i,0,Math.PI*2,!1)}function tQ(e,t,r,i,n){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5,s=arguments.length>6?arguments[6]:void 0;e.beginPath(),e.moveTo(t+a,r),e.lineTo(t+i-a,r),e.quadraticCurveTo(t+i,r,t+i,r+a),e.lineTo(t+i,r+n-a),e.quadraticCurveTo(t+i,r+n,t+i-a,r+n),e.lineTo(t+a,r+n),e.quadraticCurveTo(t,r+n,t,r+n-a),e.lineTo(t,r+a),e.quadraticCurveTo(t,r,t+a,r),e.closePath(),s?e.stroke():e.fill()}function cZe(e,t){for(var r=atob(e),i=new ArrayBuffer(r.length),n=new Uint8Array(i),a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return new Blob([i],{type:t})}function cEe(e){var t=e.indexOf(",");return e.substr(t+1)}function dEe(e,t,r){var i=function(){return t.toDataURL(r,e.quality)};switch(e.output){case"blob-promise":return new gx(function(n,a){try{t.toBlob(function(s){s!=null?n(s):a(new Error("`canvas.toBlob()` sent a null value in its callback"))},r,e.quality)}catch(s){a(s)}});case"blob":return cZe(cEe(i()),r);case"base64":return cEe(i());case"base64uri":default:return i()}}function pEe(e){var t=this,r=t.cy.window(),i=r.document;t.data={canvases:new Array(Ga.CANVAS_LAYERS),contexts:new Array(Ga.CANVAS_LAYERS),canvasNeedsRedraw:new Array(Ga.CANVAS_LAYERS),bufferCanvases:new Array(Ga.BUFFER_COUNT),bufferContexts:new Array(Ga.CANVAS_LAYERS)};var n="-webkit-tap-highlight-color",a="rgba(0,0,0,0)";t.data.canvasContainer=i.createElement("div");var s=t.data.canvasContainer.style;t.data.canvasContainer.style[n]=a,s.position="relative",s.zIndex="0",s.overflow="hidden";var u=e.cy.container();u.appendChild(t.data.canvasContainer),u.style[n]=a;var h={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};EEe()&&(h["-ms-touch-action"]="none",h["touch-action"]="none");for(var d=0;d<Ga.CANVAS_LAYERS;d++){var p=t.data.canvases[d]=i.createElement("canvas");t.data.contexts[d]=p.getContext("2d"),Object.keys(h).forEach(function(oe){p.style[oe]=h[oe]}),p.style.position="absolute",p.setAttribute("data-id","layer"+d),p.style.zIndex=String(Ga.CANVAS_LAYERS-d),t.data.canvasContainer.appendChild(p),t.data.canvasNeedsRedraw[d]=!1}t.data.topCanvas=t.data.canvases[0],t.data.canvases[Ga.NODE].setAttribute("data-id","layer"+Ga.NODE+"-node"),t.data.canvases[Ga.SELECT_BOX].setAttribute("data-id","layer"+Ga.SELECT_BOX+"-selectbox"),t.data.canvases[Ga.DRAG].setAttribute("data-id","layer"+Ga.DRAG+"-drag");for(var d=0;d<Ga.BUFFER_COUNT;d++)t.data.bufferCanvases[d]=i.createElement("canvas"),t.data.bufferContexts[d]=t.data.bufferCanvases[d].getContext("2d"),t.data.bufferCanvases[d].style.position="absolute",t.data.bufferCanvases[d].setAttribute("data-id","buffer"+d),t.data.bufferCanvases[d].style.zIndex=String(-d-1),t.data.bufferCanvases[d].style.visibility="hidden";t.pathsEnabled=!0;var g=Xu(),y=function(oe){return{x:(oe.x1+oe.x2)/2,y:(oe.y1+oe.y2)/2}},m=function(oe){return{x:-oe.w/2,y:-oe.h/2}},x=function(oe){var he=oe[0]._private,le=he.oldBackgroundTimestamp===he.backgroundTimestamp;return!le},_=function(oe){return oe[0]._private.nodeKey},E=function(oe){return oe[0]._private.labelStyleKey},w=function(oe){return oe[0]._private.sourceLabelStyleKey},C=function(oe){return oe[0]._private.targetLabelStyleKey},A=function(oe,he,le,ke,pe){return t.drawElement(oe,he,le,!1,!1,pe)},M=function(oe,he,le,ke,pe){return t.drawElementText(oe,he,le,ke,"main",pe)},N=function(oe,he,le,ke,pe){return t.drawElementText(oe,he,le,ke,"source",pe)},B=function(oe,he,le,ke,pe){return t.drawElementText(oe,he,le,ke,"target",pe)},O=function(oe){return oe.boundingBox(),oe[0]._private.bodyBounds},L=function(oe){return oe.boundingBox(),oe[0]._private.labelBounds.main||g},$=function(oe){return oe.boundingBox(),oe[0]._private.labelBounds.source||g},G=function(oe){return oe.boundingBox(),oe[0]._private.labelBounds.target||g},z=function(oe,he){return he},F=function(oe){return y(O(oe))},X=function(oe,he,le){var ke=oe?oe+"-":"";return{x:he.x+le.pstyle(ke+"text-margin-x").pfValue,y:he.y+le.pstyle(ke+"text-margin-y").pfValue}},I=function(oe,he,le){var ke=oe[0]._private.rscratch;return{x:ke[he],y:ke[le]}},j=function(oe){return X("",I(oe,"labelX","labelY"),oe)},H=function(oe){return X("source",I(oe,"sourceLabelX","sourceLabelY"),oe)},V=function(oe){return X("target",I(oe,"targetLabelX","targetLabelY"),oe)},P=function(oe){return m(O(oe))},q=function(oe){return m($(oe))},Z=function(oe){return m(G(oe))},J=function(oe){var he=L(oe),le=m(L(oe));if(oe.isNode()){switch(oe.pstyle("text-halign").value){case"left":le.x=-he.w-(he.leftPad||0);break;case"right":le.x=-(he.rightPad||0);break}switch(oe.pstyle("text-valign").value){case"top":le.y=-he.h-(he.topPad||0);break;case"bottom":le.y=-(he.botPad||0);break}}return le},ae=t.data.eleTxrCache=new pw(t,{getKey:_,doesEleInvalidateKey:x,drawElement:A,getBoundingBox:O,getRotationPoint:F,getRotationOffset:P,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),ue=t.data.lblTxrCache=new pw(t,{getKey:E,drawElement:M,getBoundingBox:L,getRotationPoint:j,getRotationOffset:J,isVisible:z}),be=t.data.slbTxrCache=new pw(t,{getKey:w,drawElement:N,getBoundingBox:$,getRotationPoint:H,getRotationOffset:q,isVisible:z}),Le=t.data.tlbTxrCache=new pw(t,{getKey:C,drawElement:B,getBoundingBox:G,getRotationPoint:V,getRotationOffset:Z,isVisible:z}),xe=t.data.lyrTxrCache=new hee(t);t.onUpdateEleCalcs(function(oe,he){ae.invalidateElements(he),ue.invalidateElements(he),be.invalidateElements(he),Le.invalidateElements(he),xe.invalidateElements(he);for(var le=0;le<he.length;le++){var ke=he[le]._private;ke.oldBackgroundTimestamp=ke.backgroundTimestamp}});var Ae=function(oe){for(var he=0;he<oe.length;he++)xe.enqueueElementRefinement(oe[he].ele)};ae.onDequeue(Ae),ue.onDequeue(Ae),be.onDequeue(Ae),Le.onDequeue(Ae)}function fEe(e,t,r){var i=r,n=function(O){Xa("Can not register `"+t+"` for `"+e+"` since `"+O+"` already exists in the prototype and can not be overridden")};if(e==="core"){if(uw.prototype[t])return n(t);uw.prototype[t]=r}else if(e==="collection"){if(Dl.prototype[t])return n(t);Dl.prototype[t]=r}else if(e==="layout"){for(var a=function(O){this.options=O,r.call(this,O),Ba(this._private)||(this._private={}),this._private.cy=O.cy,this._private.listeners=[],this.createEmitter()},s=a.prototype=Object.create(r.prototype),u=[],h=0;h<u.length;h++){var d=u[h];s[d]=s[d]||function(){return this}}s.start&&!s.run?s.run=function(){return this.start(),this}:!s.start&&s.run&&(s.start=function(){return this.run(),this});var p=r.prototype.stop;s.stop=function(){var O=this.options;if(O&&O.animate){var L=this.animations;if(L)for(var $=0;$<L.length;$++)L[$].stop()}return p?p.call(this):this.emit("layoutstop"),this},s.destroy||(s.destroy=function(){return this}),s.cy=function(){return this._private.cy};var g=function(O){return O._private.cy},y={addEventFields:function(O,L){L.layout=O,L.cy=g(O),L.target=O},bubble:function(){return!0},parent:function(O){return g(O)}};Rn(s,{createEmitter:function(){return this._private.emitter=new BB(y,this),this},emitter:function(){return this._private.emitter},on:function(O,L){return this.emitter().on(O,L),this},one:function(O,L){return this.emitter().one(O,L),this},once:function(O,L){return this.emitter().one(O,L),this},removeListener:function(O,L){return this.emitter().removeListener(O,L),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(O,L){return this.emitter().emit(O,L),this}}),Ka.eventAliasesOn(s),i=a}else if(e==="renderer"&&t!=="null"&&t!=="base"){var m=gEe("renderer","base"),x=m.prototype,_=r,E=r.prototype,w=function(){m.apply(this,arguments),_.apply(this,arguments)},C=w.prototype;for(var A in x){var M=x[A],N=E[A]!=null;if(N)return n(A);C[A]=M}for(var B in E)C[B]=E[B];x.clientFunctions.forEach(function(O){C[O]=C[O]||function(){no("Renderer does not implement `renderer."+O+"()` on its prototype")}}),i=w}else if(e==="__proto__"||e==="constructor"||e==="prototype")return no(e+" is an illegal type to be registered, possibly lead to prototype pollutions");return uQ({map:xee,keys:[e,t],value:i})}function gEe(e,t){return hQ({map:xee,keys:[e,t]})}function dZe(e,t,r,i,n){return uQ({map:bee,keys:[e,t,r,i],value:n})}function pZe(e,t,r,i){return hQ({map:bee,keys:[e,t,r,i]})}var qo,rQ,mEe,iQ,yEe,vEe,G5,wn,Hs,ps,Ba,xEe,Ei,bEe,jS,bh,U5,nQ,zB,aQ,_Ee,Yf,wEe,kEe,TEe,EEe,j5,GB,HS,sQ,oQ,Xo,CEe,SEe,AEe,MEe,LEe,REe,lQ,DEe,Rn,IEe,NEe,OEe,BEe,PEe,FEe,uQ,hQ,Gm,H5,$Ee,zEe,GEe,UEe,VS,jEe,UB,HEe,VEe,WEe,YEe,qEe,sx,cQ,XEe,KEe,V5,ZEe,QEe,JEe,eCe,tCe,rCe,dQ,pQ,iCe,nCe,W5,fQ,aCe,sCe,oCe,lCe,gQ,uCe,hCe,cCe,WS,jB,mQ,dCe,YS,J0,ox,yQ,Y5,vQ,q5,X5,pCe,qf,qS,fCe,Um,xQ,gCe,bQ,mCe,yCe,HB,_Q,XS,wQ,VB,no,kQ,Xa,vCe,Vd,xCe,TQ,bCe,EQ,Ll,Xf,WB,_Ce,qc,Kf,wCe,Wd,kCe,TCe,lx,KS,CQ,K5,ECe,Z5,CCe,SCe,ACe,MCe,LCe,RCe,DCe,ICe,NCe,OCe,BCe,YB,PCe,FCe,ZS,SQ,ux,$Ce,zCe,GCe,UCe,jCe,QS,qB,AQ,jm,Hm,HCe,ul,hx,VCe,Q5,Xu,WCe,YCe,qCe,MQ,XCe,JS,e8,LQ,XB,cx,KCe,RQ,DQ,ZCe,QCe,JCe,e7e,t7e,r7e,Ku,ep,i7e,t8,r8,n7e,Vm,J5,KB,Zf,ew,a7e,i8,gu,IQ,ZB,Wm,NQ,QB,s7e,JB,o7e,l7e,OQ,dx,BQ,px,u7e,eP,h7e,c7e,d7e,p7e,PQ,f7e,g7e,m7e,y7e,v7e,x7e,b7e,FQ,_7e,w7e,$Q,zQ,GQ,k7e,T7e,tw,fx,E7e,tP,n8,rP,UQ,jQ,C7e,S7e,A7e,HQ,VQ,M7e,L7e,R7e,D7e,I7e,WQ,N7e,O7e,B7e,P7e,YQ,a8,F7e,$7e,qQ,z7e,G7e,U7e,j7e,H7e,V7e,XQ,W7e,KQ,Y7e,q7e,X7e,s8,K7e,o8,Z7e,ZQ,QQ,JQ,eJ,tp,tJ,rJ,iJ,nJ,Q7e,gx,iP,Ym,J7e,eSe,l8,tSe,rSe,iSe,nSe,aSe,sSe,oSe,lSe,uSe,nP,aJ,hSe,cSe,dSe,pSe,fSe,gSe,mSe,ySe,vSe,xSe,bSe,_Se,wSe,aP,kSe,rw,TSe,ESe,CSe,SSe,ASe,MSe,LSe,RSe,DSe,ISe,NSe,sJ,OSe,oJ,u8,BSe,PSe,FSe,$Se,zSe,GSe,USe,jSe,HSe,VSe,WSe,h8,YSe,qSe,XSe,KSe,lJ,ZSe,QSe,JSe,e8e,t8e,r8e,i8e,uJ,hJ,n8e,cJ,dJ,a8e,pJ,fJ,s8e,sP,o8e,l8e,u8e,gJ,h8e,c8e,d8e,p8e,f8e,g8e,m8e,y8e,v8e,x8e,b8e,_8e,w8e,Ka,k8e,c8,Pa,us,Xi,oP,T8e,E8e,C8e,mx,Qf,lP,S8e,A8e,M8e,L8e,R8e,mJ,D8e,I8e,uP,N8e,ao,Ms,O8e,B8e,P8e,Jf,eg,tg,hc,yx,d8,F8e,$8e,p8,Yd,z8e,yJ,vJ,G8e,iw,qm,cc,Xc,Xm,nw,f8,hP,U8e,j8e,xJ,bJ,_J,aw,wJ,kJ,H8e,g8,m8,TJ,V8e,W8e,Y8e,q8e,X8e,K8e,Z8e,Q8e,J8e,EJ,eAe,tAe,rAe,CJ,SJ,iAe,AJ,MJ,nAe,rg,LJ,RJ,aAe,sAe,y8,DJ,IJ,za,oAe,NJ,v8,lAe,uAe,x8,Rl,vx,hAe,cAe,dAe,pAe,ig,Wl,OJ,BJ,PJ,Dl,_s,fAe,gAe,ws,b8,mAe,yAe,_8,FJ,cP,w8,vAe,xAe,dP,k8,Yl,sw,bAe,ow,pP,qd,T8,fP,Il,E8,ql,Xl,_Ae,wAe,Km,lw,uw,C8,kAe,TAe,xx,$J,EAe,CAe,zJ,SAe,AAe,MAe,LAe,fZe,RAe,GJ,DAe,IAe,NAe,UJ,OAe,BAe,S8,PAe,FAe,$Ae,zAe,GAe,UAe,jJ,jAe,HAe,VAe,WAe,YAe,HJ,VJ,gP,Zm,A8,WJ,YJ,Xd,dc,qAe,XAe,bx,mP,ng,_x,wx,rp,hw,yP,KAe,ZAe,qJ,XJ,QAe,KJ,JAe,e9e,Kl,cw,vP,Kd,ZJ,QJ,t9e,JJ,eee,tee,M8,L8,ree,iee,kx,ip,dw,nee,r9e,aee,Tx,xP,see,i9e,oee,R8,D8,bP,n9e,a9e,s9e,o9e,l9e,u9e,h9e,c9e,d9e,p9e,f9e,g9e,m9e,y9e,Ex,v9e,pw,Ko,x9e,fw,I8,b9e,_9e,w9e,k9e,T9e,E9e,C9e,S9e,lee,A9e,uee,M9e,hee,Nl,cee,L9e,dee,R9e,Zd,D9e,I9e,N9e,O9e,B9e,_P,np,pee,wP,Qm,Cx,fee,_h,P9e,ag,gee,mee,kP,TP,yee,Sx,gw,vee,F9e,Ga,$9e,z9e,G9e,xee,bee,EP,_ee,Jm,U9e,Qd,j9e=D(()=>{for(qo=typeof window>"u"?null:window,rQ=qo?qo.navigator:null,qo&&qo.document,mEe=ll(""),iQ=ll({}),yEe=ll(function(){}),vEe=typeof HTMLElement>"u"?"undefined":ll(HTMLElement),G5=function(e){return e&&e.instanceString&&Hs(e.instanceString)?e.instanceString():null},wn=function(e){return e!=null&&ll(e)==mEe},Hs=function(e){return e!=null&&ll(e)===yEe},ps=function(e){return!bh(e)&&(Array.isArray?Array.isArray(e):e!=null&&e instanceof Array)},Ba=function(e){return e!=null&&ll(e)===iQ&&!ps(e)&&e.constructor===Object},xEe=function(e){return e!=null&&ll(e)===iQ},Ei=function(e){return e!=null&&ll(e)===ll(1)&&!isNaN(e)},bEe=function(e){return Ei(e)&&Math.floor(e)===e},jS=function(e){if(vEe!=="undefined")return e!=null&&e instanceof HTMLElement},bh=function(e){return U5(e)||nQ(e)},U5=function(e){return G5(e)==="collection"&&e._private.single},nQ=function(e){return G5(e)==="collection"&&!e._private.single},zB=function(e){return G5(e)==="core"},aQ=function(e){return G5(e)==="stylesheet"},_Ee=function(e){return G5(e)==="event"},Yf=function(e){return e==null?!0:!!(e===""||e.match(/^\s+$/))},wEe=function(e){return typeof HTMLElement>"u"?!1:e instanceof HTMLElement},kEe=function(e){return Ba(e)&&Ei(e.x1)&&Ei(e.x2)&&Ei(e.y1)&&Ei(e.y2)},TEe=function(e){return xEe(e)&&Hs(e.then)},EEe=function(){return rQ&&rQ.userAgent.match(/msie|trident|edge/i)},j5=function(e,t){t||(t=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var i=[],n=0;n<arguments.length;n++)i.push(arguments[n]);return i.join("$")});var r=function i(){var n=this,a=arguments,s,u=t.apply(n,a),h=i.cache;return(s=h[u])||(s=h[u]=e.apply(n,a)),s};return r.cache={},r},GB=j5(function(e){return e.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}),HS=j5(function(e){return e.replace(/(-\w)/g,function(t){return t[1].toUpperCase()})}),sQ=j5(function(e,t){return e+t[0].toUpperCase()+t.substring(1)},function(e,t){return e+"$"+t}),oQ=function(e){return Yf(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},Xo="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",CEe="rgb[a]?\\(("+Xo+"[%]?)\\s*,\\s*("+Xo+"[%]?)\\s*,\\s*("+Xo+"[%]?)(?:\\s*,\\s*("+Xo+"))?\\)",SEe="rgb[a]?\\((?:"+Xo+"[%]?)\\s*,\\s*(?:"+Xo+"[%]?)\\s*,\\s*(?:"+Xo+"[%]?)(?:\\s*,\\s*(?:"+Xo+"))?\\)",AEe="hsl[a]?\\(("+Xo+")\\s*,\\s*("+Xo+"[%])\\s*,\\s*("+Xo+"[%])(?:\\s*,\\s*("+Xo+"))?\\)",MEe="hsl[a]?\\((?:"+Xo+")\\s*,\\s*(?:"+Xo+"[%])\\s*,\\s*(?:"+Xo+"[%])(?:\\s*,\\s*(?:"+Xo+"))?\\)",LEe="\\#[0-9a-fA-F]{3}",REe="\\#[0-9a-fA-F]{6}",lQ=function(e,t){return e<t?-1:e>t?1:0},DEe=function(e,t){return-1*lQ(e,t)},Rn=Object.assign!=null?Object.assign.bind(Object):function(e){for(var t=arguments,r=1;r<t.length;r++){var i=t[r];if(i!=null)for(var n=Object.keys(i),a=0;a<n.length;a++){var s=n[a];e[s]=i[s]}}return e},IEe=function(e){if(!(!(e.length===4||e.length===7)||e[0]!=="#")){var t=e.length===4,r,i,n,a=16;return t?(r=parseInt(e[1]+e[1],a),i=parseInt(e[2]+e[2],a),n=parseInt(e[3]+e[3],a)):(r=parseInt(e[1]+e[2],a),i=parseInt(e[3]+e[4],a),n=parseInt(e[5]+e[6],a)),[r,i,n]}},NEe=function(e){var t,r,i,n,a,s,u,h;function d(m,x,_){return _<0&&(_+=1),_>1&&(_-=1),_<1/6?m+(x-m)*6*_:_<1/2?x:_<2/3?m+(x-m)*(2/3-_)*6:m}var p=new RegExp("^"+AEe+"$").exec(e);if(p){if(r=parseInt(p[1]),r<0?r=(360- -1*r%360)%360:r>360&&(r=r%360),r/=360,i=parseFloat(p[2]),i<0||i>100||(i=i/100,n=parseFloat(p[3]),n<0||n>100)||(n=n/100,a=p[4],a!==void 0&&(a=parseFloat(a),a<0||a>1)))return;if(i===0)s=u=h=Math.round(n*255);else{var g=n<.5?n*(1+i):n+i-n*i,y=2*n-g;s=Math.round(255*d(y,g,r+1/3)),u=Math.round(255*d(y,g,r)),h=Math.round(255*d(y,g,r-1/3))}t=[s,u,h,a]}return t},OEe=function(e){var t,r=new RegExp("^"+CEe+"$").exec(e);if(r){t=[];for(var i=[],n=1;n<=3;n++){var a=r[n];if(a[a.length-1]==="%"&&(i[n]=!0),a=parseFloat(a),i[n]&&(a=a/100*255),a<0||a>255)return;t.push(Math.floor(a))}var s=i[1]||i[2]||i[3],u=i[1]&&i[2]&&i[3];if(s&&!u)return;var h=r[4];if(h!==void 0){if(h=parseFloat(h),h<0||h>1)return;t.push(h)}}return t},BEe=function(e){return FEe[e.toLowerCase()]},PEe=function(e){return(ps(e)?e:null)||BEe(e)||IEe(e)||OEe(e)||NEe(e)},FEe={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},uQ=function(e){for(var t=e.map,r=e.keys,i=r.length,n=0;n<i;n++){var a=r[n];if(Ba(a))throw Error("Tried to set map with object key");n<r.length-1?(t[a]==null&&(t[a]={}),t=t[a]):t[a]=e.value}},hQ=function(e){for(var t=e.map,r=e.keys,i=r.length,n=0;n<i;n++){var a=r[n];if(Ba(a))throw Error("Tried to get map with object key");if(t=t[a],t==null)return t}return t},Gm=aKe,H5=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$Ee=typeof H5=="object"&&H5&&H5.Object===Object&&H5,zEe=$Ee,GEe=typeof self=="object"&&self&&self.Object===Object&&self,UEe=zEe||GEe||Function("return this")(),VS=UEe,jEe=function(){return VS.Date.now()},UB=jEe,HEe=/\s/,VEe=oKe,WEe=/^\s+/,YEe=lKe,qEe=VS.Symbol,sx=qEe,cQ=Object.prototype,XEe=cQ.hasOwnProperty,KEe=cQ.toString,V5=sx?sx.toStringTag:void 0,ZEe=uKe,QEe=Object.prototype,JEe=QEe.toString,eCe=hKe,tCe="[object Null]",rCe="[object Undefined]",dQ=sx?sx.toStringTag:void 0,pQ=cKe,iCe=dKe,nCe="[object Symbol]",W5=pKe,fQ=NaN,aCe=/^[-+]0x[0-9a-f]+$/i,sCe=/^0b[01]+$/i,oCe=/^0o[0-7]+$/i,lCe=parseInt,gQ=fKe,uCe="Expected a function",hCe=Math.max,cCe=Math.min,WS=gKe,jB=qo?qo.performance:null,mQ=jB&&jB.now?function(){return jB.now()}:function(){return Date.now()},dCe=function(){if(qo){if(qo.requestAnimationFrame)return function(e){qo.requestAnimationFrame(e)};if(qo.mozRequestAnimationFrame)return function(e){qo.mozRequestAnimationFrame(e)};if(qo.webkitRequestAnimationFrame)return function(e){qo.webkitRequestAnimationFrame(e)};if(qo.msRequestAnimationFrame)return function(e){qo.msRequestAnimationFrame(e)}}return function(e){e&&setTimeout(function(){e(mQ())},1e3/60)}}(),YS=function(e){return dCe(e)},J0=mQ,ox=9261,yQ=65599,Y5=5381,vQ=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ox,r=t,i;i=e.next(),!i.done;)r=r*yQ+i.value|0;return r},q5=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ox;return t*yQ+e|0},X5=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Y5;return(t<<5)+t+e|0},pCe=function(e,t){return e*2097152+t},qf=function(e){return e[0]*2097152+e[1]},qS=function(e,t){return[q5(e[0],t[0]),X5(e[1],t[1])]},fCe=function(e,t){var r={value:0,done:!1},i=0,n=e.length,a={next:function(){return i<n?r.value=e[i++]:r.done=!0,r}};return vQ(a,t)},Um=function(e,t){var r={value:0,done:!1},i=0,n=e.length,a={next:function(){return i<n?r.value=e.charCodeAt(i++):r.done=!0,r}};return vQ(a,t)},xQ=function(){return gCe(arguments)},gCe=function(e){for(var t,r=0;r<e.length;r++){var i=e[r];r===0?t=Um(i):t=Um(i,t)}return t},bQ=!0,mCe=console.warn!=null,yCe=console.trace!=null,HB=Number.MAX_SAFE_INTEGER||9007199254740991,_Q=function(){return!0},XS=function(){return!1},wQ=function(){return 0},VB=function(){},no=function(e){throw new Error(e)},kQ=function(e){if(e!==void 0)bQ=!!e;else return bQ},Xa=function(e){kQ()&&(mCe?console.warn(e):(console.log(e),yCe&&console.trace()))},vCe=function(e){return Rn({},e)},Vd=function(e){return e==null?e:ps(e)?e.slice():Ba(e)?vCe(e):e},xCe=function(e){return e.slice()},TQ=function(e,t){for(t=e="";e++<36;t+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return t},bCe={},EQ=function(){return bCe},Ll=function(e){var t=Object.keys(e);return function(r){for(var i={},n=0;n<t.length;n++){var a=t[n],s=r?.[a];i[a]=s===void 0?e[a]:s}return i}},Xf=function(e,t,r){for(var i=e.length-1;i>=0&&!(e[i]===t&&(e.splice(i,1),r));i--);},WB=function(e){e.splice(0,e.length)},_Ce=function(e,t){for(var r=0;r<t.length;r++){var i=t[r];e.push(i)}},qc=function(e,t,r){return r&&(t=sQ(r,t)),e[t]},Kf=function(e,t,r,i){r&&(t=sQ(r,t)),e[t]=i},wCe=function(){function e(){WZ(this,e),this._obj={}}return YZ(e,[{key:"set",value:function(t,r){return this._obj[t]=r,this}},{key:"delete",value:function(t){return this._obj[t]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(t){return this._obj[t]!==void 0}},{key:"get",value:function(t){return this._obj[t]}}]),e}(),Wd=typeof Map<"u"?Map:wCe,kCe="undefined",TCe=function(){function e(t){if(WZ(this,e),this._obj=Object.create(null),this.size=0,t!=null){var r;t.instanceString!=null&&t.instanceString()===this.instanceString()?r=t.toArray():r=t;for(var i=0;i<r.length;i++)this.add(r[i])}}return YZ(e,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(t){var r=this._obj;r[t]!==1&&(r[t]=1,this.size++)}},{key:"delete",value:function(t){var r=this._obj;r[t]===1&&(r[t]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(t){return this._obj[t]===1}},{key:"toArray",value:function(){var t=this;return Object.keys(this._obj).filter(function(r){return t.has(r)})}},{key:"forEach",value:function(t,r){return this.toArray().forEach(t,r)}}]),e}(),lx=(typeof Set>"u"?"undefined":ll(Set))!==kCe?Set:TCe,KS=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0||t===void 0||!zB(e)){no("An element must have a core reference and parameters set");return}var i=t.group;if(i==null&&(t.data&&t.data.source!=null&&t.data.target!=null?i="edges":i="nodes"),i!=="nodes"&&i!=="edges"){no("An element must be of type `nodes` or `edges`; you specified `"+i+"`");return}this.length=1,this[0]=this;var n=this._private={cy:e,single:!0,data:t.data||{},position:t.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:i,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!t.selected,selectable:t.selectable===void 0?!0:!!t.selectable,locked:!!t.locked,grabbed:!1,grabbable:t.grabbable===void 0?!0:!!t.grabbable,pannable:t.pannable===void 0?i==="edges":!!t.pannable,active:!1,classes:new lx,animation:{current:[],queue:[]},rscratch:{},scratch:t.scratch||{},edges:[],children:[],parent:t.parent&&t.parent.isNode()?t.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(n.position.x==null&&(n.position.x=0),n.position.y==null&&(n.position.y=0),t.renderedPosition){var a=t.renderedPosition,s=e.pan(),u=e.zoom();n.position={x:(a.x-s.x)/u,y:(a.y-s.y)/u}}var h=[];ps(t.classes)?h=t.classes:wn(t.classes)&&(h=t.classes.split(/\s+/));for(var d=0,p=h.length;d<p;d++){var g=h[d];!g||g===""||n.classes.add(g)}this.createEmitter();var y=t.style||t.css;y&&(Xa("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(y)),(r===void 0||r)&&this.restore()},CQ=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(t,r,i){var n;Ba(t)&&!bh(t)&&(n=t,t=n.roots||n.root,r=n.visit,i=n.directed),i=arguments.length===2&&!Hs(r)?r:i,r=Hs(r)?r:function(){};for(var a=this._private.cy,s=t=wn(t)?this.filter(t):t,u=[],h=[],d={},p={},g={},y=0,m,x=this.byGroup(),_=x.nodes,E=x.edges,w=0;w<s.length;w++){var C=s[w],A=C.id();C.isNode()&&(u.unshift(C),e.bfs&&(g[A]=!0,h.push(C)),p[A]=0)}for(var M=function(){var G=e.bfs?u.shift():u.pop(),z=G.id();if(e.dfs){if(g[z])return"continue";g[z]=!0,h.push(G)}var F=p[z],X=d[z],I=X!=null?X.source():null,j=X!=null?X.target():null,H=X==null?void 0:G.same(I)?j[0]:I[0],V=void 0;if(V=r(G,X,H,y++,F),V===!0)return m=G,"break";if(V===!1)return"break";for(var P=G.connectedEdges().filter(function(ue){return(!i||ue.source().same(G))&&E.has(ue)}),q=0;q<P.length;q++){var Z=P[q],J=Z.connectedNodes().filter(function(ue){return!ue.same(G)&&_.has(ue)}),ae=J.id();J.length!==0&&!g[ae]&&(J=J[0],u.push(J),e.bfs&&(g[ae]=!0,h.push(J)),d[ae]=Z,p[ae]=p[z]+1)}};u.length!==0;){var N=M();if(N!=="continue"&&N==="break")break}for(var B=a.collection(),O=0;O<h.length;O++){var L=h[O],$=d[L.id()];$!=null&&B.push($),B.push(L)}return{path:a.collection(B),found:a.collection(m)}}},K5={breadthFirstSearch:CQ({bfs:!0}),depthFirstSearch:CQ({dfs:!0})},K5.bfs=K5.breadthFirstSearch,K5.dfs=K5.depthFirstSearch,ECe=sKe(function(e,t){(function(){var r,i,n,a,s,u,h,d,p,g,y,m,x,_,E;n=Math.floor,g=Math.min,i=function(w,C){return w<C?-1:w>C?1:0},p=function(w,C,A,M,N){var B;if(A==null&&(A=0),N==null&&(N=i),A<0)throw new Error("lo must be non-negative");for(M==null&&(M=w.length);A<M;)B=n((A+M)/2),N(C,w[B])<0?M=B:A=B+1;return[].splice.apply(w,[A,A-A].concat(C)),C},u=function(w,C,A){return A==null&&(A=i),w.push(C),_(w,0,w.length-1,A)},s=function(w,C){var A,M;return C==null&&(C=i),A=w.pop(),w.length?(M=w[0],w[0]=A,E(w,0,C)):M=A,M},d=function(w,C,A){var M;return A==null&&(A=i),M=w[0],w[0]=C,E(w,0,A),M},h=function(w,C,A){var M;return A==null&&(A=i),w.length&&A(w[0],C)<0&&(M=[w[0],C],C=M[0],w[0]=M[1],E(w,0,A)),C},a=function(w,C){var A,M,N,B,O,L;for(C==null&&(C=i),B=function(){L=[];for(var $=0,G=n(w.length/2);0<=G?$<G:$>G;0<=G?$++:$--)L.push($);return L}.apply(this).reverse(),O=[],M=0,N=B.length;M<N;M++)A=B[M],O.push(E(w,A,C));return O},x=function(w,C,A){var M;if(A==null&&(A=i),M=w.indexOf(C),M!==-1)return _(w,0,M,A),E(w,M,A)},y=function(w,C,A){var M,N,B,O,L;if(A==null&&(A=i),N=w.slice(0,C),!N.length)return N;for(a(N,A),L=w.slice(C),B=0,O=L.length;B<O;B++)M=L[B],h(N,M,A);return N.sort(A).reverse()},m=function(w,C,A){var M,N,B,O,L,$,G,z,F;if(A==null&&(A=i),C*10<=w.length){if(B=w.slice(0,C).sort(A),!B.length)return B;for(N=B[B.length-1],G=w.slice(C),O=0,$=G.length;O<$;O++)M=G[O],A(M,N)<0&&(p(B,M,0,null,A),B.pop(),N=B[B.length-1]);return B}for(a(w,A),F=[],L=0,z=g(C,w.length);0<=z?L<z:L>z;0<=z?++L:--L)F.push(s(w,A));return F},_=function(w,C,A,M){var N,B,O;for(M==null&&(M=i),N=w[A];A>C;){if(O=A-1>>1,B=w[O],M(N,B)<0){w[A]=B,A=O;continue}break}return w[A]=N},E=function(w,C,A){var M,N,B,O,L;for(A==null&&(A=i),N=w.length,L=C,B=w[C],M=2*C+1;M<N;)O=M+1,O<N&&!(A(w[M],w[O])<0)&&(M=O),w[C]=w[M],C=M,M=2*C+1;return w[C]=B,_(w,L,C,A)},r=function(){w.push=u,w.pop=s,w.replace=d,w.pushpop=h,w.heapify=a,w.updateItem=x,w.nlargest=y,w.nsmallest=m;function w(C){this.cmp=C??i,this.nodes=[]}return w.prototype.push=function(C){return u(this.nodes,C,this.cmp)},w.prototype.pop=function(){return s(this.nodes,this.cmp)},w.prototype.peek=function(){return this.nodes[0]},w.prototype.contains=function(C){return this.nodes.indexOf(C)!==-1},w.prototype.replace=function(C){return d(this.nodes,C,this.cmp)},w.prototype.pushpop=function(C){return h(this.nodes,C,this.cmp)},w.prototype.heapify=function(){return a(this.nodes,this.cmp)},w.prototype.updateItem=function(C){return x(this.nodes,C,this.cmp)},w.prototype.clear=function(){return this.nodes=[]},w.prototype.empty=function(){return this.nodes.length===0},w.prototype.size=function(){return this.nodes.length},w.prototype.clone=function(){var C;return C=new w,C.nodes=this.nodes.slice(0),C},w.prototype.toArray=function(){return this.nodes.slice(0)},w.prototype.insert=w.prototype.push,w.prototype.top=w.prototype.peek,w.prototype.front=w.prototype.peek,w.prototype.has=w.prototype.contains,w.prototype.copy=w.prototype.clone,w}(),function(w,C){return e.exports=C()}(this,function(){return r})}).call(H5)}),Z5=ECe,CCe=Ll({root:null,weight:function(e){return 1},directed:!1}),SCe={dijkstra:function(e){if(!Ba(e)){var t=arguments;e={root:t[0],weight:t[1],directed:t[2]}}var r=CCe(e),i=r.root,n=r.weight,a=r.directed,s=this,u=n,h=wn(i)?this.filter(i)[0]:i[0],d={},p={},g={},y=this.byGroup(),m=y.nodes,x=y.edges;x.unmergeBy(function(I){return I.isLoop()});for(var _=function(I){return d[I.id()]},E=function(I,j){d[I.id()]=j,w.updateItem(I)},w=new Z5(function(I,j){return _(I)-_(j)}),C=0;C<m.length;C++){var A=m[C];d[A.id()]=A.same(h)?0:1/0,w.push(A)}for(var M=function(I,j){for(var H=(a?I.edgesTo(j):I.edgesWith(j)).intersect(x),V=1/0,P,q=0;q<H.length;q++){var Z=H[q],J=u(Z);(J<V||!P)&&(V=J,P=Z)}return{edge:P,dist:V}};w.size()>0;){var N=w.pop(),B=_(N),O=N.id();if(g[O]=B,B!==1/0)for(var L=N.neighborhood().intersect(m),$=0;$<L.length;$++){var G=L[$],z=G.id(),F=M(N,G),X=B+F.dist;X<_(G)&&(E(G,X),p[z]={node:N,edge:F.edge})}}return{distanceTo:function(I){var j=wn(I)?m.filter(I)[0]:I[0];return g[j.id()]},pathTo:function(I){var j=wn(I)?m.filter(I)[0]:I[0],H=[],V=j,P=V.id();if(j.length>0)for(H.unshift(j);p[P];){var q=p[P];H.unshift(q.edge),H.unshift(q.node),V=q.node,P=V.id()}return s.spawn(H)}}}},ACe={kruskal:function(e){e=e||function(C){return 1};for(var t=this.byGroup(),r=t.nodes,i=t.edges,n=r.length,a=new Array(n),s=r,u=function(C){for(var A=0;A<a.length;A++){var M=a[A];if(M.has(C))return A}},h=0;h<n;h++)a[h]=this.spawn(r[h]);for(var d=i.sort(function(C,A){return e(C)-e(A)}),p=0;p<d.length;p++){var g=d[p],y=g.source()[0],m=g.target()[0],x=u(y),_=u(m),E=a[x],w=a[_];x!==_&&(s.merge(g),E.merge(w),a.splice(_,1))}return s}},MCe=Ll({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),LCe={aStar:function(e){var t=this.cy(),r=MCe(e),i=r.root,n=r.goal,a=r.heuristic,s=r.directed,u=r.weight;i=t.collection(i)[0],n=t.collection(n)[0];var h=i.id(),d=n.id(),p={},g={},y={},m=new Z5(function(q,Z){return g[q.id()]-g[Z.id()]}),x=new lx,_={},E={},w=function(q,Z){m.push(q),x.add(Z)},C,A,M=function(){C=m.pop(),A=C.id(),x.delete(A)},N=function(q){return x.has(q)};w(i,h),p[h]=0,g[h]=a(i);for(var B=0;m.size()>0;){if(M(),B++,A===d){for(var O=[],L=n,$=d,G=E[$];O.unshift(L),G!=null&&O.unshift(G),L=_[$],L!=null;)$=L.id(),G=E[$];return{found:!0,distance:p[A],path:this.spawn(O),steps:B}}y[A]=!0;for(var z=C._private.edges,F=0;F<z.length;F++){var X=z[F];if(this.hasElementWithId(X.id())&&!(s&&X.data("source")!==A)){var I=X.source(),j=X.target(),H=I.id()!==A?I:j,V=H.id();if(this.hasElementWithId(V)&&!y[V]){var P=p[A]+u(X);if(!N(V)){p[V]=P,g[V]=P+a(H),w(H,V),_[V]=C,E[V]=X;continue}P<p[V]&&(p[V]=P,g[V]=P+a(H),_[V]=C,E[V]=X)}}}}return{found:!1,distance:void 0,path:void 0,steps:B}}},RCe=Ll({weight:function(e){return 1},directed:!1}),DCe={floydWarshall:function(e){for(var t=this.cy(),r=RCe(e),i=r.weight,n=r.directed,a=i,s=this.byGroup(),u=s.nodes,h=s.edges,d=u.length,p=d*d,g=function(J){return u.indexOf(J)},y=function(J){return u[J]},m=new Array(p),x=0;x<p;x++){var _=x%d,E=(x-_)/d;E===_?m[x]=0:m[x]=1/0}for(var w=new Array(p),C=new Array(p),A=0;A<h.length;A++){var M=h[A],N=M.source()[0],B=M.target()[0];if(N!==B){var O=g(N),L=g(B),$=O*d+L,G=a(M);if(m[$]>G&&(m[$]=G,w[$]=L,C[$]=M),!n){var z=L*d+O;!n&&m[z]>G&&(m[z]=G,w[z]=O,C[z]=M)}}}for(var F=0;F<d;F++)for(var X=0;X<d;X++)for(var I=X*d+F,j=0;j<d;j++){var H=X*d+j,V=F*d+j;m[I]+m[V]<m[H]&&(m[H]=m[I]+m[V],w[H]=w[I])}var P=function(J){return(wn(J)?t.filter(J):J)[0]},q=function(J){return g(P(J))},Z={distance:function(J,ae){var ue=q(J),be=q(ae);return m[ue*d+be]},path:function(J,ae){var ue=q(J),be=q(ae),Le=y(ue);if(ue===be)return Le.collection();if(w[ue*d+be]==null)return t.collection();var xe=t.collection(),Ae=ue,oe;for(xe.merge(Le);ue!==be;)Ae=ue,ue=w[ue*d+be],oe=C[Ae*d+ue],xe.merge(oe),xe.merge(y(ue));return xe}};return Z}},ICe=Ll({weight:function(e){return 1},directed:!1,root:null}),NCe={bellmanFord:function(e){var t=this,r=ICe(e),i=r.weight,n=r.directed,a=r.root,s=i,u=this,h=this.cy(),d=this.byGroup(),p=d.edges,g=d.nodes,y=g.length,m=new Wd,x=!1,_=[];a=h.collection(a)[0],p.unmergeBy(function(we){return we.isLoop()});for(var E=p.length,w=function(we){var Et=m.get(we.id());return Et||(Et={},m.set(we.id(),Et)),Et},C=function(we){return(wn(we)?h.$(we):we)[0]},A=function(we){return w(C(we)).dist},M=function(we){for(var Et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a,wt=C(we),Tt=[],er=wt;;){if(er==null)return t.spawn();var tr=w(er),kr=tr.edge,fr=tr.pred;if(Tt.unshift(er[0]),er.same(Et)&&Tt.length>0)break;kr!=null&&Tt.unshift(kr),er=fr}return u.spawn(Tt)},N=0;N<y;N++){var B=g[N],O=w(B);B.same(a)?O.dist=0:O.dist=1/0,O.pred=null,O.edge=null}for(var L=!1,$=function(we,Et,wt,Tt,er,tr){var kr=Tt.dist+tr;kr<er.dist&&!wt.same(Tt.edge)&&(er.dist=kr,er.pred=we,er.edge=wt,L=!0)},G=1;G<y;G++){L=!1;for(var z=0;z<E;z++){var F=p[z],X=F.source(),I=F.target(),j=s(F),H=w(X),V=w(I);$(X,I,F,H,V,j),n||$(I,X,F,V,H,j)}if(!L)break}if(L)for(var P=[],q=0;q<E;q++){var Z=p[q],J=Z.source(),ae=Z.target(),ue=s(Z),be=w(J).dist,Le=w(ae).dist;if(be+ue<Le||!n&&Le+ue<be)if(x||(Xa("Graph contains a negative weight cycle for Bellman-Ford"),x=!0),e.findNegativeWeightCycles!==!1){var xe=[];be+ue<Le&&xe.push(J),!n&&Le+ue<be&&xe.push(ae);for(var Ae=xe.length,oe=0;oe<Ae;oe++){var he=xe[oe],le=[he];le.push(w(he).edge);for(var ke=w(he).pred;le.indexOf(ke)===-1;)le.push(ke),le.push(w(ke).edge),ke=w(ke).pred;le=le.slice(le.indexOf(ke));for(var pe=le[0].id(),qe=0,me=2;me<le.length;me+=2)le[me].id()<pe&&(pe=le[me].id(),qe=me);le=le.slice(qe).concat(le.slice(0,qe)),le.push(le[0]);var st=le.map(function(we){return we.id()}).join(",");P.indexOf(st)===-1&&(_.push(u.spawn(le)),P.push(st))}}else break}return{distanceTo:A,pathTo:M,hasNegativeWeightCycle:x,negativeWeightCycles:_}}},OCe=Math.sqrt(2),BCe=function(e,t,r){r.length===0&&no("Karger-Stein must be run on a connected (sub)graph");for(var i=r[e],n=i[1],a=i[2],s=t[n],u=t[a],h=r,d=h.length-1;d>=0;d--){var p=h[d],g=p[1],y=p[2];(t[g]===s&&t[y]===u||t[g]===u&&t[y]===s)&&h.splice(d,1)}for(var m=0;m<h.length;m++){var x=h[m];x[1]===u?(h[m]=x.slice(),h[m][1]=s):x[2]===u&&(h[m]=x.slice(),h[m][2]=s)}for(var _=0;_<t.length;_++)t[_]===u&&(t[_]=s);return h},YB=function(e,t,r,i){for(;r>i;){var n=Math.floor(Math.random()*t.length);t=BCe(n,e,t),r--}return t},PCe={kargerStein:function(){var e=this,t=this.byGroup(),r=t.nodes,i=t.edges;i.unmergeBy(function(V){return V.isLoop()});var n=r.length,a=i.length,s=Math.ceil(Math.pow(Math.log(n)/Math.LN2,2)),u=Math.floor(n/OCe);if(n<2){no("At least 2 nodes are required for Karger-Stein algorithm");return}for(var h=[],d=0;d<a;d++){var p=i[d];h.push([d,r.indexOf(p.source()),r.indexOf(p.target())])}for(var g=1/0,y=[],m=new Array(n),x=new Array(n),_=new Array(n),E=function(V,P){for(var q=0;q<n;q++)P[q]=V[q]},w=0;w<=s;w++){for(var C=0;C<n;C++)x[C]=C;var A=YB(x,h.slice(),n,u),M=A.slice();E(x,_);var N=YB(x,A,u,2),B=YB(_,M,u,2);N.length<=B.length&&N.length<g?(g=N.length,y=N,E(x,m)):B.length<=N.length&&B.length<g&&(g=B.length,y=B,E(_,m))}for(var O=this.spawn(y.map(function(V){return i[V[0]]})),L=this.spawn(),$=this.spawn(),G=m[0],z=0;z<m.length;z++){var F=m[z],X=r[z];F===G?L.merge(X):$.merge(X)}var I=function(V){var P=e.spawn();return V.forEach(function(q){P.merge(q),q.connectedEdges().forEach(function(Z){e.contains(Z)&&!O.contains(Z)&&P.merge(Z)})}),P},j=[I(L),I($)],H={cut:O,components:j,partition1:L,partition2:$};return H}},FCe=function(e){return{x:e.x,y:e.y}},ZS=function(e,t,r){return{x:e.x*t+r.x,y:e.y*t+r.y}},SQ=function(e,t,r){return{x:(e.x-r.x)/t,y:(e.y-r.y)/t}},ux=function(e){return{x:e[0],y:e[1]}},$Ce=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=1/0,n=t;n<r;n++){var a=e[n];isFinite(a)&&(i=Math.min(a,i))}return i},zCe=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=-1/0,n=t;n<r;n++){var a=e[n];isFinite(a)&&(i=Math.max(a,i))}return i},GCe=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=0,n=0,a=t;a<r;a++){var s=e[a];isFinite(s)&&(i+=s,n++)}return i/n},UCe=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;i?e=e.slice(t,r):(r<e.length&&e.splice(r,e.length-r),t>0&&e.splice(0,t));for(var s=0,u=e.length-1;u>=0;u--){var h=e[u];a?isFinite(h)||(e[u]=-1/0,s++):e.splice(u,1)}n&&e.sort(function(g,y){return g-y});var d=e.length,p=Math.floor(d/2);return d%2!==0?e[p+1+s]:(e[p-1+s]+e[p+s])/2},jCe=function(e){return Math.PI*e/180},QS=function(e,t){return Math.atan2(t,e)-Math.PI/2},qB=Math.log2||function(e){return Math.log(e)/Math.log(2)},AQ=function(e){return e>0?1:e<0?-1:0},jm=function(e,t){return Math.sqrt(Hm(e,t))},Hm=function(e,t){var r=t.x-e.x,i=t.y-e.y;return r*r+i*i},HCe=function(e){for(var t=e.length,r=0,i=0;i<t;i++)r+=e[i];for(var n=0;n<t;n++)e[n]=e[n]/r;return e},ul=function(e,t,r,i){return(1-i)*(1-i)*e+2*(1-i)*i*t+i*i*r},hx=function(e,t,r,i){return{x:ul(e.x,t.x,r.x,i),y:ul(e.y,t.y,r.y,i)}},VCe=function(e,t,r,i){var n={x:t.x-e.x,y:t.y-e.y},a=jm(e,t),s={x:n.x/a,y:n.y/a};return r=r??0,i=i??r*a,{x:e.x+s.x*i,y:e.y+s.y*i}},Q5=function(e,t,r){return Math.max(e,Math.min(r,t))},Xu=function(e){if(e==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(e.x1!=null&&e.y1!=null){if(e.x2!=null&&e.y2!=null&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(e.w!=null&&e.h!=null&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},WCe=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}},YCe=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},qCe=function(e,t,r){return{x1:e.x1+t,x2:e.x2+t,y1:e.y1+r,y2:e.y2+r,w:e.w,h:e.h}},MQ=function(e,t){e.x1=Math.min(e.x1,t.x1),e.x2=Math.max(e.x2,t.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,t.y1),e.y2=Math.max(e.y2,t.y2),e.h=e.y2-e.y1},XCe=function(e,t,r){e.x1=Math.min(e.x1,t),e.x2=Math.max(e.x2,t),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,r),e.y2=Math.max(e.y2,r),e.h=e.y2-e.y1},JS=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.x1-=t,e.x2+=t,e.y1-=t,e.y2+=t,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},e8=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],r,i,n,a;if(t.length===1)r=i=n=a=t[0];else if(t.length===2)r=n=t[0],a=i=t[1];else if(t.length===4){var s=Hd(t,4);r=s[0],i=s[1],n=s[2],a=s[3]}return e.x1-=a,e.x2+=i,e.y1-=r,e.y2+=n,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},LQ=function(e,t){e.x1=t.x1,e.y1=t.y1,e.x2=t.x2,e.y2=t.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},XB=function(e,t){return!(e.x1>t.x2||t.x1>e.x2||e.x2<t.x1||t.x2<e.x1||e.y2<t.y1||t.y2<e.y1||e.y1>t.y2||t.y1>e.y2)},cx=function(e,t,r){return e.x1<=t&&t<=e.x2&&e.y1<=r&&r<=e.y2},KCe=function(e,t){return cx(e,t.x,t.y)},RQ=function(e,t){return cx(e,t.x1,t.y1)&&cx(e,t.x2,t.y2)},DQ=function(e,t,r,i,n,a,s){var u=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"auto",h=u==="auto"?Wm(n,a):u,d=n/2,p=a/2;h=Math.min(h,d,p);var g=h!==d,y=h!==p,m;if(g){var x=r-d+h-s,_=i-p-s,E=r+d-h+s,w=_;if(m=Zf(e,t,r,i,x,_,E,w,!1),m.length>0)return m}if(y){var C=r+d+s,A=i-p+h-s,M=C,N=i+p-h+s;if(m=Zf(e,t,r,i,C,A,M,N,!1),m.length>0)return m}if(g){var B=r-d+h-s,O=i+p+s,L=r+d-h+s,$=O;if(m=Zf(e,t,r,i,B,O,L,$,!1),m.length>0)return m}if(y){var G=r-d-s,z=i-p+h-s,F=G,X=i+p-h+s;if(m=Zf(e,t,r,i,G,z,F,X,!1),m.length>0)return m}var I;{var j=r-d+h,H=i-p+h;if(I=J5(e,t,r,i,j,H,h+s),I.length>0&&I[0]<=j&&I[1]<=H)return[I[0],I[1]]}{var V=r+d-h,P=i-p+h;if(I=J5(e,t,r,i,V,P,h+s),I.length>0&&I[0]>=V&&I[1]<=P)return[I[0],I[1]]}{var q=r+d-h,Z=i+p-h;if(I=J5(e,t,r,i,q,Z,h+s),I.length>0&&I[0]>=q&&I[1]>=Z)return[I[0],I[1]]}{var J=r-d+h,ae=i+p-h;if(I=J5(e,t,r,i,J,ae,h+s),I.length>0&&I[0]<=J&&I[1]>=ae)return[I[0],I[1]]}return[]},ZCe=function(e,t,r,i,n,a,s){var u=s,h=Math.min(r,n),d=Math.max(r,n),p=Math.min(i,a),g=Math.max(i,a);return h-u<=e&&e<=d+u&&p-u<=t&&t<=g+u},QCe=function(e,t,r,i,n,a,s,u,h){var d={x1:Math.min(r,s,n)-h,x2:Math.max(r,s,n)+h,y1:Math.min(i,u,a)-h,y2:Math.max(i,u,a)+h};return!(e<d.x1||e>d.x2||t<d.y1||t>d.y2)},JCe=function(e,t,r,i){r-=i;var n=t*t-4*e*r;if(n<0)return[];var a=Math.sqrt(n),s=2*e,u=(-t+a)/s,h=(-t-a)/s;return[u,h]},e7e=function(e,t,r,i,n){var a=1e-5;e===0&&(e=a),t/=e,r/=e,i/=e;var s,u,h,d,p,g,y,m;if(u=(3*r-t*t)/9,h=-(27*i)+t*(9*r-2*(t*t)),h/=54,s=u*u*u+h*h,n[1]=0,y=t/3,s>0){p=h+Math.sqrt(s),p=p<0?-Math.pow(-p,1/3):Math.pow(p,1/3),g=h-Math.sqrt(s),g=g<0?-Math.pow(-g,1/3):Math.pow(g,1/3),n[0]=-y+p+g,y+=(p+g)/2,n[4]=n[2]=-y,y=Math.sqrt(3)*(-g+p)/2,n[3]=y,n[5]=-y;return}if(n[5]=n[3]=0,s===0){m=h<0?-Math.pow(-h,1/3):Math.pow(h,1/3),n[0]=-y+2*m,n[4]=n[2]=-(m+y);return}u=-u,d=u*u*u,d=Math.acos(h/Math.sqrt(d)),m=2*Math.sqrt(u),n[0]=-y+m*Math.cos(d/3),n[2]=-y+m*Math.cos((d+2*Math.PI)/3),n[4]=-y+m*Math.cos((d+4*Math.PI)/3)},t7e=function(e,t,r,i,n,a,s,u){var h=1*r*r-4*r*n+2*r*s+4*n*n-4*n*s+s*s+i*i-4*i*a+2*i*u+4*a*a-4*a*u+u*u,d=1*9*r*n-3*r*r-3*r*s-6*n*n+3*n*s+9*i*a-3*i*i-3*i*u-6*a*a+3*a*u,p=1*3*r*r-6*r*n+r*s-r*e+2*n*n+2*n*e-s*e+3*i*i-6*i*a+i*u-i*t+2*a*a+2*a*t-u*t,g=1*r*n-r*r+r*e-n*e+i*a-i*i+i*t-a*t,y=[];e7e(h,d,p,g,y);for(var m=1e-7,x=[],_=0;_<6;_+=2)Math.abs(y[_+1])<m&&y[_]>=0&&y[_]<=1&&x.push(y[_]);x.push(1),x.push(0);for(var E=-1,w,C,A,M=0;M<x.length;M++)w=Math.pow(1-x[M],2)*r+2*(1-x[M])*x[M]*n+x[M]*x[M]*s,C=Math.pow(1-x[M],2)*i+2*(1-x[M])*x[M]*a+x[M]*x[M]*u,A=Math.pow(w-e,2)+Math.pow(C-t,2),E>=0?A<E&&(E=A):E=A;return E},r7e=function(e,t,r,i,n,a){var s=[e-r,t-i],u=[n-r,a-i],h=u[0]*u[0]+u[1]*u[1],d=s[0]*s[0]+s[1]*s[1],p=s[0]*u[0]+s[1]*u[1],g=p*p/h;return p<0?d:g>h?(e-n)*(e-n)+(t-a)*(t-a):d-g},Ku=function(e,t,r){for(var i,n,a,s,u,h=0,d=0;d<r.length/2;d++)if(i=r[d*2],n=r[d*2+1],d+1<r.length/2?(a=r[(d+1)*2],s=r[(d+1)*2+1]):(a=r[(d+1-r.length/2)*2],s=r[(d+1-r.length/2)*2+1]),!(i==e&&a==e))if(i>=e&&e>=a||i<=e&&e<=a)u=(e-i)/(a-i)*(s-n)+n,u>t&&h++;else continue;return h%2!==0},ep=function(e,t,r,i,n,a,s,u,h){var d=new Array(r.length),p;u[0]!=null?(p=Math.atan(u[1]/u[0]),u[0]<0?p=p+Math.PI/2:p=-p-Math.PI/2):p=u;for(var g=Math.cos(-p),y=Math.sin(-p),m=0;m<d.length/2;m++)d[m*2]=a/2*(r[m*2]*g-r[m*2+1]*y),d[m*2+1]=s/2*(r[m*2+1]*g+r[m*2]*y),d[m*2]+=i,d[m*2+1]+=n;var x;if(h>0){var _=r8(d,-h);x=t8(_)}else x=d;return Ku(e,t,x)},i7e=function(e,t,r,i,n,a,s,u){for(var h=new Array(r.length*2),d=0;d<u.length;d++){var p=u[d];h[d*4+0]=p.startX,h[d*4+1]=p.startY,h[d*4+2]=p.stopX,h[d*4+3]=p.stopY;var g=Math.pow(p.cx-e,2)+Math.pow(p.cy-t,2);if(g<=Math.pow(p.radius,2))return!0}return Ku(e,t,h)},t8=function(e){for(var t=new Array(e.length/2),r,i,n,a,s,u,h,d,p=0;p<e.length/4;p++){r=e[p*4],i=e[p*4+1],n=e[p*4+2],a=e[p*4+3],p<e.length/4-1?(s=e[(p+1)*4],u=e[(p+1)*4+1],h=e[(p+1)*4+2],d=e[(p+1)*4+3]):(s=e[0],u=e[1],h=e[2],d=e[3]);var g=Zf(r,i,n,a,s,u,h,d,!0);t[p*2]=g[0],t[p*2+1]=g[1]}return t},r8=function(e,t){for(var r=new Array(e.length*2),i,n,a,s,u=0;u<e.length/2;u++){i=e[u*2],n=e[u*2+1],u<e.length/2-1?(a=e[(u+1)*2],s=e[(u+1)*2+1]):(a=e[0],s=e[1]);var h=s-n,d=-(a-i),p=Math.sqrt(h*h+d*d),g=h/p,y=d/p;r[u*4]=i+g*t,r[u*4+1]=n+y*t,r[u*4+2]=a+g*t,r[u*4+3]=s+y*t}return r},n7e=function(e,t,r,i,n,a){var s=r-e,u=i-t;s/=n,u/=a;var h=Math.sqrt(s*s+u*u),d=h-1;if(d<0)return[];var p=d/h;return[(r-e)*p+e,(i-t)*p+t]},Vm=function(e,t,r,i,n,a,s){return e-=n,t-=a,e/=r/2+s,t/=i/2+s,e*e+t*t<=1},J5=function(e,t,r,i,n,a,s){var u=[r-e,i-t],h=[e-n,t-a],d=u[0]*u[0]+u[1]*u[1],p=2*(h[0]*u[0]+h[1]*u[1]),g=h[0]*h[0]+h[1]*h[1]-s*s,y=p*p-4*d*g;if(y<0)return[];var m=(-p+Math.sqrt(y))/(2*d),x=(-p-Math.sqrt(y))/(2*d),_=Math.min(m,x),E=Math.max(m,x),w=[];if(_>=0&&_<=1&&w.push(_),E>=0&&E<=1&&w.push(E),w.length===0)return[];var C=w[0]*u[0]+e,A=w[0]*u[1]+t;if(w.length>1){if(w[0]==w[1])return[C,A];var M=w[1]*u[0]+e,N=w[1]*u[1]+t;return[C,A,M,N]}else return[C,A]},KB=function(e,t,r){return t<=e&&e<=r||r<=e&&e<=t?e:e<=t&&t<=r||r<=t&&t<=e?t:r},Zf=function(e,t,r,i,n,a,s,u,h){var d=e-n,p=r-e,g=s-n,y=t-a,m=i-t,x=u-a,_=g*y-x*d,E=p*y-m*d,w=x*p-g*m;if(w!==0){var C=_/w,A=E/w,M=.001,N=0-M,B=1+M;return N<=C&&C<=B&&N<=A&&A<=B?[e+C*p,t+C*m]:h?[e+C*p,t+C*m]:[]}else return _===0||E===0?KB(e,r,s)===s?[s,u]:KB(e,r,n)===n?[n,a]:KB(n,s,r)===r?[r,i]:[]:[]},ew=function(e,t,r,i,n,a,s,u){var h=[],d,p=new Array(r.length),g=!0;a==null&&(g=!1);var y;if(g){for(var m=0;m<p.length/2;m++)p[m*2]=r[m*2]*a+i,p[m*2+1]=r[m*2+1]*s+n;if(u>0){var x=r8(p,-u);y=t8(x)}else y=p}else y=r;for(var _,E,w,C,A=0;A<y.length/2;A++)_=y[A*2],E=y[A*2+1],A<y.length/2-1?(w=y[(A+1)*2],C=y[(A+1)*2+1]):(w=y[0],C=y[1]),d=Zf(e,t,i,n,_,E,w,C),d.length!==0&&h.push(d[0],d[1]);return h},a7e=function(e,t,r,i,n,a,s,u,h){var d=[],p,g=new Array(r.length*2);h.forEach(function(w,C){C===0?(g[g.length-2]=w.startX,g[g.length-1]=w.startY):(g[C*4-2]=w.startX,g[C*4-1]=w.startY),g[C*4]=w.stopX,g[C*4+1]=w.stopY,p=J5(e,t,i,n,w.cx,w.cy,w.radius),p.length!==0&&d.push(p[0],p[1])});for(var y=0;y<g.length/4;y++)p=Zf(e,t,i,n,g[y*4],g[y*4+1],g[y*4+2],g[y*4+3],!1),p.length!==0&&d.push(p[0],p[1]);if(d.length>2){for(var m=[d[0],d[1]],x=Math.pow(m[0]-e,2)+Math.pow(m[1]-t,2),_=1;_<d.length/2;_++){var E=Math.pow(d[_*2]-e,2)+Math.pow(d[_*2+1]-t,2);E<=x&&(m[0]=d[_*2],m[1]=d[_*2+1],x=E)}return m}return d},i8=function(e,t,r){var i=[e[0]-t[0],e[1]-t[1]],n=Math.sqrt(i[0]*i[0]+i[1]*i[1]),a=(n-r)/n;return a<0&&(a=1e-5),[t[0]+a*i[0],t[1]+a*i[1]]},gu=function(e,t){var r=ZB(e,t);return r=IQ(r),r},IQ=function(e){for(var t,r,i=e.length/2,n=1/0,a=1/0,s=-1/0,u=-1/0,h=0;h<i;h++)t=e[2*h],r=e[2*h+1],n=Math.min(n,t),s=Math.max(s,t),a=Math.min(a,r),u=Math.max(u,r);for(var d=2/(s-n),p=2/(u-a),g=0;g<i;g++)t=e[2*g]=e[2*g]*d,r=e[2*g+1]=e[2*g+1]*p,n=Math.min(n,t),s=Math.max(s,t),a=Math.min(a,r),u=Math.max(u,r);if(a<-1)for(var y=0;y<i;y++)r=e[2*y+1]=e[2*y+1]+(-1-a);return e},ZB=function(e,t){var r=1/e*2*Math.PI,i=e%2===0?Math.PI/2+r/2:Math.PI/2;i+=t;for(var n=new Array(e*2),a,s=0;s<e;s++)a=s*r+i,n[2*s]=Math.cos(a),n[2*s+1]=Math.sin(-a);return n},Wm=function(e,t){return Math.min(e/4,t/4,8)},NQ=function(e,t){return Math.min(e/10,t/10,8)},QB=function(){return 8},s7e=function(e,t,r){return[e-2*t+r,2*(t-e),e]},JB=function(e,t){return{heightOffset:Math.min(15,.05*t),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}},o7e=Ll({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),l7e={pageRank:function(e){for(var t=o7e(e),r=t.dampingFactor,i=t.precision,n=t.iterations,a=t.weight,s=this._private.cy,u=this.byGroup(),h=u.nodes,d=u.edges,p=h.length,g=p*p,y=d.length,m=new Array(g),x=new Array(p),_=(1-r)/p,E=0;E<p;E++){for(var w=0;w<p;w++){var C=E*p+w;m[C]=0}x[E]=0}for(var A=0;A<y;A++){var M=d[A],N=M.data("source"),B=M.data("target");if(N!==B){var O=h.indexOfId(N),L=h.indexOfId(B),$=a(M),G=L*p+O;m[G]+=$,x[O]+=$}}for(var z=1/p+_,F=0;F<p;F++)if(x[F]===0)for(var X=0;X<p;X++){var I=X*p+F;m[I]=z}else for(var j=0;j<p;j++){var H=j*p+F;m[H]=m[H]/x[F]+_}for(var V=new Array(p),P=new Array(p),q,Z=0;Z<p;Z++)V[Z]=1;for(var J=0;J<n;J++){for(var ae=0;ae<p;ae++)P[ae]=0;for(var ue=0;ue<p;ue++)for(var be=0;be<p;be++){var Le=ue*p+be;P[ue]+=m[Le]*V[be]}HCe(P),q=V,V=P,P=q;for(var xe=0,Ae=0;Ae<p;Ae++){var oe=q[Ae]-V[Ae];xe+=oe*oe}if(xe<i)break}var he={rank:function(le){return le=s.collection(le)[0],V[h.indexOf(le)]}};return he}},OQ=Ll({root:null,weight:function(e){return 1},directed:!1,alpha:0}),dx={degreeCentralityNormalized:function(e){e=OQ(e);var t=this.cy(),r=this.nodes(),i=r.length;if(e.directed){for(var n={},a={},s=0,u=0,h=0;h<i;h++){var d=r[h],p=d.id();e.root=d;var g=this.degreeCentrality(e);s<g.indegree&&(s=g.indegree),u<g.outdegree&&(u=g.outdegree),n[p]=g.indegree,a[p]=g.outdegree}return{indegree:function(w){return s==0?0:(wn(w)&&(w=t.filter(w)),n[w.id()]/s)},outdegree:function(w){return u===0?0:(wn(w)&&(w=t.filter(w)),a[w.id()]/u)}}}else{for(var y={},m=0,x=0;x<i;x++){var _=r[x];e.root=_;var E=this.degreeCentrality(e);m<E.degree&&(m=E.degree),y[_.id()]=E.degree}return{degree:function(w){return m===0?0:(wn(w)&&(w=t.filter(w)),y[w.id()]/m)}}}},degreeCentrality:function(e){e=OQ(e);var t=this.cy(),r=this,i=e,n=i.root,a=i.weight,s=i.directed,u=i.alpha;if(n=t.collection(n)[0],s){for(var h=n.connectedEdges(),d=h.filter(function(N){return N.target().same(n)&&r.has(N)}),p=h.filter(function(N){return N.source().same(n)&&r.has(N)}),g=d.length,y=p.length,m=0,x=0,_=0;_<d.length;_++)m+=a(d[_]);for(var E=0;E<p.length;E++)x+=a(p[E]);return{indegree:Math.pow(g,1-u)*Math.pow(m,u),outdegree:Math.pow(y,1-u)*Math.pow(x,u)}}else{for(var w=n.connectedEdges().intersection(r),C=w.length,A=0,M=0;M<w.length;M++)A+=a(w[M]);return{degree:Math.pow(C,1-u)*Math.pow(A,u)}}}},dx.dc=dx.degreeCentrality,dx.dcn=dx.degreeCentralityNormalised=dx.degreeCentralityNormalized,BQ=Ll({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),px={closenessCentralityNormalized:function(e){for(var t=BQ(e),r=t.harmonic,i=t.weight,n=t.directed,a=this.cy(),s={},u=0,h=this.nodes(),d=this.floydWarshall({weight:i,directed:n}),p=0;p<h.length;p++){for(var g=0,y=h[p],m=0;m<h.length;m++)if(p!==m){var x=d.distance(y,h[m]);r?g+=1/x:g+=x}r||(g=1/g),u<g&&(u=g),s[y.id()]=g}return{closeness:function(_){return u==0?0:(wn(_)?_=a.filter(_)[0].id():_=_.id(),s[_]/u)}}},closenessCentrality:function(e){var t=BQ(e),r=t.root,i=t.weight,n=t.directed,a=t.harmonic;r=this.filter(r)[0];for(var s=this.dijkstra({root:r,weight:i,directed:n}),u=0,h=this.nodes(),d=0;d<h.length;d++){var p=h[d];if(!p.same(r)){var g=s.distanceTo(p);a?u+=1/g:u+=g}}return a?u:1/u}},px.cc=px.closenessCentrality,px.ccn=px.closenessCentralityNormalised=px.closenessCentralityNormalized,u7e=Ll({weight:null,directed:!1}),eP={betweennessCentrality:function(e){for(var t=u7e(e),r=t.directed,i=t.weight,n=i!=null,a=this.cy(),s=this.nodes(),u={},h={},d=0,p={set:function(w,C){h[w]=C,C>d&&(d=C)},get:function(w){return h[w]}},g=0;g<s.length;g++){var y=s[g],m=y.id();r?u[m]=y.outgoers().nodes():u[m]=y.openNeighborhood().nodes(),p.set(m,0)}for(var x=function(w){for(var C=s[w].id(),A=[],M={},N={},B={},O=new Z5(function(ue,be){return B[ue]-B[be]}),L=0;L<s.length;L++){var $=s[L].id();M[$]=[],N[$]=0,B[$]=1/0}for(N[C]=1,B[C]=0,O.push(C);!O.empty();){var G=O.pop();if(A.push(G),n)for(var z=0;z<u[G].length;z++){var F=u[G][z],X=a.getElementById(G),I=void 0;X.edgesTo(F).length>0?I=X.edgesTo(F)[0]:I=F.edgesTo(X)[0];var j=i(I);F=F.id(),B[F]>B[G]+j&&(B[F]=B[G]+j,O.nodes.indexOf(F)<0?O.push(F):O.updateItem(F),N[F]=0,M[F]=[]),B[F]==B[G]+j&&(N[F]=N[F]+N[G],M[F].push(G))}else for(var H=0;H<u[G].length;H++){var V=u[G][H].id();B[V]==1/0&&(O.push(V),B[V]=B[G]+1),B[V]==B[G]+1&&(N[V]=N[V]+N[G],M[V].push(G))}}for(var P={},q=0;q<s.length;q++)P[s[q].id()]=0;for(;A.length>0;){for(var Z=A.pop(),J=0;J<M[Z].length;J++){var ae=M[Z][J];P[ae]=P[ae]+N[ae]/N[Z]*(1+P[Z])}Z!=s[w].id()&&p.set(Z,p.get(Z)+P[Z])}},_=0;_<s.length;_++)x(_);var E={betweenness:function(w){var C=a.collection(w).id();return p.get(C)},betweennessNormalized:function(w){if(d==0)return 0;var C=a.collection(w).id();return p.get(C)/d}};return E.betweennessNormalised=E.betweennessNormalized,E}},eP.bc=eP.betweennessCentrality,h7e=Ll({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(e){return 1}]}),c7e=function(e){return h7e(e)},d7e=function(e,t){for(var r=0,i=0;i<t.length;i++)r+=t[i](e);return r},p7e=function(e,t,r){for(var i=0;i<t;i++)e[i*t+i]=r},PQ=function(e,t){for(var r,i=0;i<t;i++){r=0;for(var n=0;n<t;n++)r+=e[n*t+i];for(var a=0;a<t;a++)e[a*t+i]=e[a*t+i]/r}},f7e=function(e,t,r){for(var i=new Array(r*r),n=0;n<r;n++){for(var a=0;a<r;a++)i[n*r+a]=0;for(var s=0;s<r;s++)for(var u=0;u<r;u++)i[n*r+u]+=e[n*r+s]*t[s*r+u]}return i},g7e=function(e,t,r){for(var i=e.slice(0),n=1;n<r;n++)e=f7e(e,i,t);return e},m7e=function(e,t,r){for(var i=new Array(t*t),n=0;n<t*t;n++)i[n]=Math.pow(e[n],r);return PQ(i,t),i},y7e=function(e,t,r,i){for(var n=0;n<r;n++){var a=Math.round(e[n]*Math.pow(10,i))/Math.pow(10,i),s=Math.round(t[n]*Math.pow(10,i))/Math.pow(10,i);if(a!==s)return!1}return!0},v7e=function(e,t,r,i){for(var n=[],a=0;a<t;a++){for(var s=[],u=0;u<t;u++)Math.round(e[a*t+u]*1e3)/1e3>0&&s.push(r[u]);s.length!==0&&n.push(i.collection(s))}return n},x7e=function(e,t){for(var r=0;r<e.length;r++)if(!t[r]||e[r].id()!==t[r].id())return!1;return!0},b7e=function(e){for(var t=0;t<e.length;t++)for(var r=0;r<e.length;r++)t!=r&&x7e(e[t],e[r])&&e.splice(r,1);return e},FQ=function(e){for(var t=this.nodes(),r=this.edges(),i=this.cy(),n=c7e(e),a={},s=0;s<t.length;s++)a[t[s].id()]=s;for(var u=t.length,h=u*u,d=new Array(h),p,g=0;g<h;g++)d[g]=0;for(var y=0;y<r.length;y++){var m=r[y],x=a[m.source().id()],_=a[m.target().id()],E=d7e(m,n.attributes);d[x*u+_]+=E,d[_*u+x]+=E}p7e(d,u,n.multFactor),PQ(d,u);for(var w=!0,C=0;w&&C<n.maxIterations;)w=!1,p=g7e(d,u,n.expandFactor),d=m7e(p,u,n.inflateFactor),y7e(d,p,h,4)||(w=!0),C++;var A=v7e(d,u,t,i);return A=b7e(A),A},_7e={markovClustering:FQ,mcl:FQ},w7e=function(e){return e},$Q=function(e,t){return Math.abs(t-e)},zQ=function(e,t,r){return e+$Q(t,r)},GQ=function(e,t,r){return e+Math.pow(r-t,2)},k7e=function(e){return Math.sqrt(e)},T7e=function(e,t,r){return Math.max(e,$Q(t,r))},tw=function(e,t,r,i,n){for(var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:w7e,s=i,u,h,d=0;d<e;d++)u=t(d),h=r(d),s=n(s,u,h);return a(s)},fx={euclidean:function(e,t,r){return e>=2?tw(e,t,r,0,GQ,k7e):tw(e,t,r,0,zQ)},squaredEuclidean:function(e,t,r){return tw(e,t,r,0,GQ)},manhattan:function(e,t,r){return tw(e,t,r,0,zQ)},max:function(e,t,r){return tw(e,t,r,-1/0,T7e)}},fx["squared-euclidean"]=fx.squaredEuclidean,fx.squaredeuclidean=fx.squaredEuclidean,E7e=Ll({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),tP=function(e){return E7e(e)},n8=function(e,t,r,i,n){var a=n!=="kMedoids",s=a?function(p){return r[p]}:function(p){return i[p](r)},u=function(p){return i[p](t)},h=r,d=t;return NB(e,i.length,s,u,h,d)},rP=function(e,t,r){for(var i=r.length,n=new Array(i),a=new Array(i),s=new Array(t),u=null,h=0;h<i;h++)n[h]=e.min(r[h]).value,a[h]=e.max(r[h]).value;for(var d=0;d<t;d++){u=[];for(var p=0;p<i;p++)u[p]=Math.random()*(a[p]-n[p])+n[p];s[d]=u}return s},UQ=function(e,t,r,i,n){for(var a=1/0,s=0,u=0;u<t.length;u++){var h=n8(r,e,t[u],i,n);h<a&&(a=h,s=u)}return s},jQ=function(e,t,r){for(var i=[],n=null,a=0;a<t.length;a++)n=t[a],r[n.id()]===e&&i.push(n);return i},C7e=function(e,t,r){return Math.abs(t-e)<=r},S7e=function(e,t,r){for(var i=0;i<e.length;i++)for(var n=0;n<e[i].length;n++){var a=Math.abs(e[i][n]-t[i][n]);if(a>r)return!1}return!0},A7e=function(e,t,r){for(var i=0;i<r;i++)if(e===t[i])return!0;return!1},HQ=function(e,t){var r=new Array(t);if(e.length<50)for(var i=0;i<t;i++){for(var n=e[Math.floor(Math.random()*e.length)];A7e(n,r,i);)n=e[Math.floor(Math.random()*e.length)];r[i]=n}else for(var a=0;a<t;a++)r[a]=e[Math.floor(Math.random()*e.length)];return r},VQ=function(e,t,r){for(var i=0,n=0;n<t.length;n++)i+=n8("manhattan",t[n],e,r,"kMedoids");return i},M7e=function(e){var t=this.cy(),r=this.nodes(),i=null,n=tP(e),a=new Array(n.k),s={},u;n.testMode?typeof n.testCentroids=="number"?(n.testCentroids,u=rP(r,n.k,n.attributes)):ll(n.testCentroids)==="object"?u=n.testCentroids:u=rP(r,n.k,n.attributes):u=rP(r,n.k,n.attributes);for(var h=!0,d=0;h&&d<n.maxIterations;){for(var p=0;p<r.length;p++)i=r[p],s[i.id()]=UQ(i,u,n.distance,n.attributes,"kMeans");h=!1;for(var g=0;g<n.k;g++){var y=jQ(g,r,s);if(y.length!==0){for(var m=n.attributes.length,x=u[g],_=new Array(m),E=new Array(m),w=0;w<m;w++){E[w]=0;for(var C=0;C<y.length;C++)i=y[C],E[w]+=n.attributes[w](i);_[w]=E[w]/y.length,C7e(_[w],x[w],n.sensitivityThreshold)||(h=!0)}u[g]=_,a[g]=t.collection(y)}}d++}return a},L7e=function(e){var t=this.cy(),r=this.nodes(),i=null,n=tP(e),a=new Array(n.k),s,u={},h,d=new Array(n.k);n.testMode?typeof n.testCentroids=="number"||(ll(n.testCentroids)==="object"?s=n.testCentroids:s=HQ(r,n.k)):s=HQ(r,n.k);for(var p=!0,g=0;p&&g<n.maxIterations;){for(var y=0;y<r.length;y++)i=r[y],u[i.id()]=UQ(i,s,n.distance,n.attributes,"kMedoids");p=!1;for(var m=0;m<s.length;m++){var x=jQ(m,r,u);if(x.length!==0){d[m]=VQ(s[m],x,n.attributes);for(var _=0;_<x.length;_++)h=VQ(x[_],x,n.attributes),h<d[m]&&(d[m]=h,s[m]=x[_],p=!0);a[m]=t.collection(x)}}g++}return a},R7e=function(e,t,r,i,n){for(var a,s,u=0;u<t.length;u++)for(var h=0;h<e.length;h++)i[u][h]=Math.pow(r[u][h],n.m);for(var d=0;d<e.length;d++)for(var p=0;p<n.attributes.length;p++){a=0,s=0;for(var g=0;g<t.length;g++)a+=i[g][d]*n.attributes[p](t[g]),s+=i[g][d];e[d][p]=a/s}},D7e=function(e,t,r,i,n){for(var a=0;a<e.length;a++)t[a]=e[a].slice();for(var s,u,h,d=2/(n.m-1),p=0;p<r.length;p++)for(var g=0;g<i.length;g++){s=0;for(var y=0;y<r.length;y++)u=n8(n.distance,i[g],r[p],n.attributes,"cmeans"),h=n8(n.distance,i[g],r[y],n.attributes,"cmeans"),s+=Math.pow(u/h,d);e[g][p]=1/s}},I7e=function(e,t,r,i){for(var n=new Array(r.k),a=0;a<n.length;a++)n[a]=[];for(var s,u,h=0;h<t.length;h++){s=-1/0,u=-1;for(var d=0;d<t[0].length;d++)t[h][d]>s&&(s=t[h][d],u=d);n[u].push(e[h])}for(var p=0;p<n.length;p++)n[p]=i.collection(n[p]);return n},WQ=function(e){var t=this.cy(),r=this.nodes(),i=tP(e),n,a,s,u,h;u=new Array(r.length);for(var d=0;d<r.length;d++)u[d]=new Array(i.k);s=new Array(r.length);for(var p=0;p<r.length;p++)s[p]=new Array(i.k);for(var g=0;g<r.length;g++){for(var y=0,m=0;m<i.k;m++)s[g][m]=Math.random(),y+=s[g][m];for(var x=0;x<i.k;x++)s[g][x]=s[g][x]/y}a=new Array(i.k);for(var _=0;_<i.k;_++)a[_]=new Array(i.attributes.length);h=new Array(r.length);for(var E=0;E<r.length;E++)h[E]=new Array(i.k);for(var w=!0,C=0;w&&C<i.maxIterations;)w=!1,R7e(a,r,s,h,i),D7e(s,u,a,r,i),S7e(s,u,i.sensitivityThreshold)||(w=!0),C++;return n=I7e(r,s,i,t),{clusters:n,degreeOfMembership:s}},N7e={kMeans:M7e,kMedoids:L7e,fuzzyCMeans:WQ,fcm:WQ},O7e=Ll({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),B7e={single:"min",complete:"max"},P7e=function(e){var t=O7e(e),r=B7e[t.linkage];return r!=null&&(t.linkage=r),t},YQ=function(e,t,r,i,n){for(var a=0,s=1/0,u,h=n.attributes,d=function(O,L){return NB(n.distance,h.length,function($){return h[$](O)},function($){return h[$](L)},O,L)},p=0;p<e.length;p++){var g=e[p].key,y=r[g][i[g]];y<s&&(a=g,s=y)}if(n.mode==="threshold"&&s>=n.threshold||n.mode==="dendrogram"&&e.length===1)return!1;var m=t[a],x=t[i[a]],_;n.mode==="dendrogram"?_={left:m,right:x,key:m.key}:_={value:m.value.concat(x.value),key:m.key},e[m.index]=_,e.splice(x.index,1),t[m.key]=_;for(var E=0;E<e.length;E++){var w=e[E];m.key===w.key?u=1/0:n.linkage==="min"?(u=r[m.key][w.key],r[m.key][w.key]>r[x.key][w.key]&&(u=r[x.key][w.key])):n.linkage==="max"?(u=r[m.key][w.key],r[m.key][w.key]<r[x.key][w.key]&&(u=r[x.key][w.key])):n.linkage==="mean"?u=(r[m.key][w.key]*m.size+r[x.key][w.key]*x.size)/(m.size+x.size):n.mode==="dendrogram"?u=d(w.value,m.value):u=d(w.value[0],m.value[0]),r[m.key][w.key]=r[w.key][m.key]=u}for(var C=0;C<e.length;C++){var A=e[C].key;if(i[A]===m.key||i[A]===x.key){for(var M=A,N=0;N<e.length;N++){var B=e[N].key;r[A][B]<r[A][M]&&(M=B)}i[A]=M}e[C].index=C}return m.key=x.key=m.index=x.index=null,!0},a8=function e(t,r,i){t&&(t.value?r.push(t.value):(t.left&&e(t.left,r),t.right&&e(t.right,r)))},F7e=function e(t,r){if(!t)return"";if(t.left&&t.right){var i=e(t.left,r),n=e(t.right,r),a=r.add({group:"nodes",data:{id:i+","+n}});return r.add({group:"edges",data:{source:i,target:a.id()}}),r.add({group:"edges",data:{source:n,target:a.id()}}),a.id()}else if(t.value)return t.value.id()},$7e=function e(t,r,i){if(!t)return[];var n=[],a=[],s=[];return r===0?(t.left&&a8(t.left,n),t.right&&a8(t.right,a),s=n.concat(a),[i.collection(s)]):r===1?t.value?[i.collection(t.value)]:(t.left&&a8(t.left,n),t.right&&a8(t.right,a),[i.collection(n),i.collection(a)]):t.value?[i.collection(t.value)]:(t.left&&(n=e(t.left,r-1,i)),t.right&&(a=e(t.right,r-1,i)),n.concat(a))},qQ=function(e){for(var t=this.cy(),r=this.nodes(),i=P7e(e),n=i.attributes,a=function(w,C){return NB(i.distance,n.length,function(A){return n[A](w)},function(A){return n[A](C)},w,C)},s=[],u=[],h=[],d=[],p=0;p<r.length;p++){var g={value:i.mode==="dendrogram"?r[p]:[r[p]],key:p,index:p};s[p]=g,d[p]=g,u[p]=[],h[p]=0}for(var y=0;y<s.length;y++)for(var m=0;m<=y;m++){var x=void 0;i.mode==="dendrogram"?x=y===m?1/0:a(s[y].value,s[m].value):x=y===m?1/0:a(s[y].value[0],s[m].value[0]),u[y][m]=x,u[m][y]=x,x<u[y][h[y]]&&(h[y]=m)}for(var _=YQ(s,d,u,h,i);_;)_=YQ(s,d,u,h,i);var E;return i.mode==="dendrogram"?(E=$7e(s[0],i.dendrogramDepth,t),i.addDendrogram&&F7e(s[0],t)):(E=new Array(s.length),s.forEach(function(w,C){w.key=w.index=null,E[C]=t.collection(w.value)})),E},z7e={hierarchicalClustering:qQ,hca:qQ},G7e=Ll({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),U7e=function(e){var t=e.damping,r=e.preference;.5<=t&&t<1||no("Damping must range on [0.5, 1).  Got: ".concat(t));var i=["median","mean","min","max"];return i.some(function(n){return n===r})||Ei(r)||no("Preference must be one of [".concat(i.map(function(n){return"'".concat(n,"'")}).join(", "),"] or a number.  Got: ").concat(r)),G7e(e)},j7e=function(e,t,r,i){var n=function(a,s){return i[s](a)};return-NB(e,i.length,function(a){return n(t,a)},function(a){return n(r,a)},t,r)},H7e=function(e,t){var r=null;return t==="median"?r=UCe(e):t==="mean"?r=GCe(e):t==="min"?r=$Ce(e):t==="max"?r=zCe(e):r=t,r},V7e=function(e,t,r){for(var i=[],n=0;n<e;n++)t[n*e+n]+r[n*e+n]>0&&i.push(n);return i},XQ=function(e,t,r){for(var i=[],n=0;n<e;n++){for(var a=-1,s=-1/0,u=0;u<r.length;u++){var h=r[u];t[n*e+h]>s&&(a=h,s=t[n*e+h])}a>0&&i.push(a)}for(var d=0;d<r.length;d++)i[r[d]]=r[d];return i},W7e=function(e,t,r){for(var i=XQ(e,t,r),n=0;n<r.length;n++){for(var a=[],s=0;s<i.length;s++)i[s]===r[n]&&a.push(s);for(var u=-1,h=-1/0,d=0;d<a.length;d++){for(var p=0,g=0;g<a.length;g++)p+=t[a[g]*e+a[d]];p>h&&(u=d,h=p)}r[n]=a[u]}return i=XQ(e,t,r),i},KQ=function(e){for(var t=this.cy(),r=this.nodes(),i=U7e(e),n={},a=0;a<r.length;a++)n[r[a].id()]=a;var s,u,h,d,p,g;s=r.length,u=s*s,h=new Array(u);for(var y=0;y<u;y++)h[y]=-1/0;for(var m=0;m<s;m++)for(var x=0;x<s;x++)m!==x&&(h[m*s+x]=j7e(i.distance,r[m],r[x],i.attributes));d=H7e(h,i.preference);for(var _=0;_<s;_++)h[_*s+_]=d;p=new Array(u);for(var E=0;E<u;E++)p[E]=0;g=new Array(u);for(var w=0;w<u;w++)g[w]=0;for(var C=new Array(s),A=new Array(s),M=new Array(s),N=0;N<s;N++)C[N]=0,A[N]=0,M[N]=0;for(var B=new Array(s*i.minIterations),O=0;O<B.length;O++)B[O]=0;var L;for(L=0;L<i.maxIterations;L++){for(var $=0;$<s;$++){for(var G=-1/0,z=-1/0,F=-1,X=0,I=0;I<s;I++)C[I]=p[$*s+I],X=g[$*s+I]+h[$*s+I],X>=G?(z=G,G=X,F=I):X>z&&(z=X);for(var j=0;j<s;j++)p[$*s+j]=(1-i.damping)*(h[$*s+j]-G)+i.damping*C[j];p[$*s+F]=(1-i.damping)*(h[$*s+F]-z)+i.damping*C[F]}for(var H=0;H<s;H++){for(var V=0,P=0;P<s;P++)C[P]=g[P*s+H],A[P]=Math.max(0,p[P*s+H]),V+=A[P];V-=A[H],A[H]=p[H*s+H],V+=A[H];for(var q=0;q<s;q++)g[q*s+H]=(1-i.damping)*Math.min(0,V-A[q])+i.damping*C[q];g[H*s+H]=(1-i.damping)*(V-A[H])+i.damping*C[H]}for(var Z=0,J=0;J<s;J++){var ae=g[J*s+J]+p[J*s+J]>0?1:0;B[L%i.minIterations*s+J]=ae,Z+=ae}if(Z>0&&(L>=i.minIterations-1||L==i.maxIterations-1)){for(var ue=0,be=0;be<s;be++){M[be]=0;for(var Le=0;Le<i.minIterations;Le++)M[be]+=B[Le*s+be];(M[be]===0||M[be]===i.minIterations)&&ue++}if(ue===s)break}}for(var xe=V7e(s,p,g),Ae=W7e(s,h,xe),oe={},he=0;he<xe.length;he++)oe[xe[he]]=[];for(var le=0;le<r.length;le++){var ke=n[r[le].id()],pe=Ae[ke];pe!=null&&oe[pe].push(r[le])}for(var qe=new Array(xe.length),me=0;me<xe.length;me++)qe[me]=t.collection(oe[xe[me]]);return qe},Y7e={affinityPropagation:KQ,ap:KQ},q7e=Ll({root:void 0,directed:!1}),X7e={hierholzer:function(e){if(!Ba(e)){var t=arguments;e={root:t[0],directed:t[1]}}var r=q7e(e),i=r.root,n=r.directed,a=this,s=!1,u,h,d;i&&(d=wn(i)?this.filter(i)[0].id():i[0].id());var p={},g={};n?a.forEach(function(w){var C=w.id();if(w.isNode()){var A=w.indegree(!0),M=w.outdegree(!0),N=A-M,B=M-A;N==1?u?s=!0:u=C:B==1?h?s=!0:h=C:(B>1||N>1)&&(s=!0),p[C]=[],w.outgoers().forEach(function(O){O.isEdge()&&p[C].push(O.id())})}else g[C]=[void 0,w.target().id()]}):a.forEach(function(w){var C=w.id();if(w.isNode()){var A=w.degree(!0);A%2&&(u?h?s=!0:h=C:u=C),p[C]=[],w.connectedEdges().forEach(function(M){return p[C].push(M.id())})}else g[C]=[w.source().id(),w.target().id()]});var y={found:!1,trail:void 0};if(s)return y;if(h&&u)if(n){if(d&&h!=d)return y;d=h}else{if(d&&h!=d&&u!=d)return y;d||(d=h)}else d||(d=a[0].id());var m=function(w){for(var C=w,A=[w],M,N,B;p[C].length;)M=p[C].shift(),N=g[M][0],B=g[M][1],C!=B?(p[B]=p[B].filter(function(O){return O!=M}),C=B):!n&&C!=N&&(p[N]=p[N].filter(function(O){return O!=M}),C=N),A.unshift(M),A.unshift(C);return A},x=[],_=[];for(_=m(d);_.length!=1;)p[_[0]].length==0?(x.unshift(a.getElementById(_.shift())),x.unshift(a.getElementById(_.shift()))):_=m(_.shift()).concat(_);x.unshift(a.getElementById(_.shift()));for(var E in p)if(p[E].length)return y;return y.found=!0,y.trail=this.spawn(x,!0),y}},s8=function(){var e=this,t={},r=0,i=0,n=[],a=[],s={},u=function(p,g){for(var y=a.length-1,m=[],x=e.spawn();a[y].x!=p||a[y].y!=g;)m.push(a.pop().edge),y--;m.push(a.pop().edge),m.forEach(function(_){var E=_.connectedNodes().intersection(e);x.merge(_),E.forEach(function(w){var C=w.id(),A=w.connectedEdges().intersection(e);x.merge(w),t[C].cutVertex?x.merge(A.filter(function(M){return M.isLoop()})):x.merge(A)})}),n.push(x)},h=function p(g,y,m){g===m&&(i+=1),t[y]={id:r,low:r++,cutVertex:!1};var x=e.getElementById(y).connectedEdges().intersection(e);if(x.size()===0)n.push(e.spawn(e.getElementById(y)));else{var _,E,w,C;x.forEach(function(A){_=A.source().id(),E=A.target().id(),w=_===y?E:_,w!==m&&(C=A.id(),s[C]||(s[C]=!0,a.push({x:y,y:w,edge:A})),w in t?t[y].low=Math.min(t[y].low,t[w].id):(p(g,w,y),t[y].low=Math.min(t[y].low,t[w].low),t[y].id<=t[w].low&&(t[y].cutVertex=!0,u(y,w))))})}};e.forEach(function(p){if(p.isNode()){var g=p.id();g in t||(i=0,h(g,g),t[g].cutVertex=i>1)}});var d=Object.keys(t).filter(function(p){return t[p].cutVertex}).map(function(p){return e.getElementById(p)});return{cut:e.spawn(d),components:n}},K7e={hopcroftTarjanBiconnected:s8,htbc:s8,htb:s8,hopcroftTarjanBiconnectedComponents:s8},o8=function(){var e=this,t={},r=0,i=[],n=[],a=e.spawn(e),s=function u(h){n.push(h),t[h]={index:r,low:r++,explored:!1};var d=e.getElementById(h).connectedEdges().intersection(e);if(d.forEach(function(x){var _=x.target().id();_!==h&&(_ in t||u(_),t[_].explored||(t[h].low=Math.min(t[h].low,t[_].low)))}),t[h].index===t[h].low){for(var p=e.spawn();;){var g=n.pop();if(p.merge(e.getElementById(g)),t[g].low=t[h].index,t[g].explored=!0,g===h)break}var y=p.edgesWith(p),m=p.merge(y);i.push(m),a=a.difference(m)}};return e.forEach(function(u){if(u.isNode()){var h=u.id();h in t||s(h)}}),{cut:a,components:i}},Z7e={tarjanStronglyConnected:o8,tsc:o8,tscc:o8,tarjanStronglyConnectedComponents:o8},ZQ={},[K5,SCe,ACe,LCe,DCe,NCe,PCe,l7e,dx,px,eP,_7e,N7e,z7e,Y7e,X7e,K7e,Z7e].forEach(function(e){Rn(ZQ,e)}),QQ=0,JQ=1,eJ=2,tp=function e(t){if(!(this instanceof e))return new e(t);this.id="Thenable/1.0.7",this.state=QQ,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof t=="function"&&t.call(this,this.fulfill.bind(this),this.reject.bind(this))},tp.prototype={fulfill:function(e){return tJ(this,JQ,"fulfillValue",e)},reject:function(e){return tJ(this,eJ,"rejectReason",e)},then:function(e,t){var r=this,i=new tp;return r.onFulfilled.push(nJ(e,i,"fulfill")),r.onRejected.push(nJ(t,i,"reject")),rJ(r),i.proxy}},tJ=function(e,t,r,i){return e.state===QQ&&(e.state=t,e[r]=i,rJ(e)),e},rJ=function(e){e.state===JQ?iJ(e,"onFulfilled",e.fulfillValue):e.state===eJ&&iJ(e,"onRejected",e.rejectReason)},iJ=function(e,t,r){if(e[t].length!==0){var i=e[t];e[t]=[];var n=function(){for(var a=0;a<i.length;a++)i[a](r)};typeof setImmediate=="function"?setImmediate(n):setTimeout(n,0)}},nJ=function(e,t,r){return function(i){if(typeof e!="function")t[r].call(t,i);else{var n;try{n=e(i)}catch(a){t.reject(a);return}Q7e(t,n)}}},Q7e=function e(t,r){if(t===r||t.proxy===r){t.reject(new TypeError("cannot resolve promise with itself"));return}var i;if(ll(r)==="object"&&r!==null||typeof r=="function")try{i=r.then}catch(a){t.reject(a);return}if(typeof i=="function"){var n=!1;try{i.call(r,function(a){n||(n=!0,a===r?t.reject(new TypeError("circular thenable chain")):e(t,a))},function(a){n||(n=!0,t.reject(a))})}catch(a){n||t.reject(a)}return}t.fulfill(r)},tp.all=function(e){return new tp(function(t,r){for(var i=new Array(e.length),n=0,a=function(u,h){i[u]=h,n++,n===e.length&&t(i)},s=0;s<e.length;s++)(function(u){var h=e[u],d=h!=null&&h.then!=null;if(d)h.then(function(g){a(u,g)},function(g){r(g)});else{var p=h;a(u,p)}})(s)})},tp.resolve=function(e){return new tp(function(t,r){t(e)})},tp.reject=function(e){return new tp(function(t,r){r(e)})},gx=typeof Promise<"u"?Promise:tp,iP=function(e,t,r){var i=zB(e),n=!i,a=this._private=Rn({duration:1e3},t,r);if(a.target=e,a.style=a.style||a.css,a.started=!1,a.playing=!1,a.hooked=!1,a.applying=!1,a.progress=0,a.completes=[],a.frames=[],a.complete&&Hs(a.complete)&&a.completes.push(a.complete),n){var s=e.position();a.startPosition=a.startPosition||{x:s.x,y:s.y},a.startStyle=a.startStyle||e.cy().style().getAnimationStartStyle(e,a.style)}if(i){var u=e.pan();a.startPan={x:u.x,y:u.y},a.startZoom=e.zoom()}this.length=1,this[0]=this},Ym=iP.prototype,Rn(Ym,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var t,r=e.target._private.animation;e.queue?t=r.queue:t=r.current,t.push(this),bh(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return e.progress===1&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var t=this._private;return e===void 0?t.progress*t.duration:this.progress(e/t.duration)},progress:function(e){var t=this._private,r=t.playing;return e===void 0?t.progress:(r&&this.pause(),t.progress=e,t.started=!1,r&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var e=this._private,t=e.playing;t&&this.pause(),e.progress=1-e.progress,e.started=!1;var r=function(u,h){var d=e[u];d!=null&&(e[u]=e[h],e[h]=d)};if(r("zoom","startZoom"),r("pan","startPan"),r("position","startPosition"),e.style)for(var i=0;i<e.style.length;i++){var n=e.style[i],a=n.name,s=e.startStyle[a];e.startStyle[a]=n,e.style[i]=s}return t&&this.play(),this},promise:function(e){var t=this._private,r;switch(e){case"frame":r=t.frames;break;default:case"complete":case"completed":r=t.completes}return new gx(function(i,n){r.push(function(){i()})})}}),Ym.complete=Ym.completed,Ym.run=Ym.play,Ym.running=Ym.playing,J7e={animated:function(){return function(){var e=this,t=e.length!==void 0,r=t?e:[e],i=this._private.cy||this;if(!i.styleEnabled())return!1;var n=r[0];if(n)return n._private.animation.current.length>0}},clearQueue:function(){return function(){var e=this,t=e.length!==void 0,r=t?e:[e],i=this._private.cy||this;if(!i.styleEnabled())return this;for(var n=0;n<r.length;n++){var a=r[n];a._private.animation.queue=[]}return this}},delay:function(){return function(e,t){var r=this._private.cy||this;return r.styleEnabled()?this.animate({delay:e,duration:e,complete:t}):this}},delayAnimation:function(){return function(e,t){var r=this._private.cy||this;return r.styleEnabled()?this.animation({delay:e,duration:e,complete:t}):this}},animation:function(){return function(e,t){var r=this,i=r.length!==void 0,n=i?r:[r],a=this._private.cy||this,s=!i,u=!s;if(!a.styleEnabled())return this;var h=a.style();e=Rn({},e,t);var d=Object.keys(e).length===0;if(d)return new iP(n[0],e);switch(e.duration===void 0&&(e.duration=400),e.duration){case"slow":e.duration=600;break;case"fast":e.duration=200;break}if(u&&(e.style=h.getPropsList(e.style||e.css),e.css=void 0),u&&e.renderedPosition!=null){var p=e.renderedPosition,g=a.pan(),y=a.zoom();e.position=SQ(p,y,g)}if(s&&e.panBy!=null){var m=e.panBy,x=a.pan();e.pan={x:x.x+m.x,y:x.y+m.y}}var _=e.center||e.centre;if(s&&_!=null){var E=a.getCenterPan(_.eles,e.zoom);E!=null&&(e.pan=E)}if(s&&e.fit!=null){var w=e.fit,C=a.getFitViewport(w.eles||w.boundingBox,w.padding);C!=null&&(e.pan=C.pan,e.zoom=C.zoom)}if(s&&Ba(e.zoom)){var A=a.getZoomedViewport(e.zoom);A!=null?(A.zoomed&&(e.zoom=A.zoom),A.panned&&(e.pan=A.pan)):e.zoom=null}return new iP(n[0],e)}},animate:function(){return function(e,t){var r=this,i=r.length!==void 0,n=i?r:[r],a=this._private.cy||this;if(!a.styleEnabled())return this;t&&(e=Rn({},e,t));for(var s=0;s<n.length;s++){var u=n[s],h=u.animated()&&(e.queue===void 0||e.queue),d=u.animation(e,h?{queue:!0}:void 0);d.play()}return this}},stop:function(){return function(e,t){var r=this,i=r.length!==void 0,n=i?r:[r],a=this._private.cy||this;if(!a.styleEnabled())return this;for(var s=0;s<n.length;s++){for(var u=n[s],h=u._private,d=h.animation.current,p=0;p<d.length;p++){var g=d[p],y=g._private;t&&(y.duration=0)}e&&(h.animation.queue=[]),t||(h.animation.current=[])}return a.notify("draw"),this}}},eSe=Array.isArray,l8=eSe,tSe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,rSe=/^\w*$/,iSe=mKe,nSe="[object AsyncFunction]",aSe="[object Function]",sSe="[object GeneratorFunction]",oSe="[object Proxy]",lSe=yKe,uSe=VS["__core-js_shared__"],nP=uSe,aJ=function(){var e=/[^.]+$/.exec(nP&&nP.keys&&nP.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),hSe=vKe,cSe=Function.prototype,dSe=cSe.toString,pSe=xKe,fSe=/[\\^$.*+?()[\]{}|]/g,gSe=/^\[object .+?Constructor\]$/,mSe=Function.prototype,ySe=Object.prototype,vSe=mSe.toString,xSe=ySe.hasOwnProperty,bSe=RegExp("^"+vSe.call(xSe).replace(fSe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_Se=bKe,wSe=_Ke,aP=wKe,kSe=aP(Object,"create"),rw=kSe,TSe=kKe,ESe=TKe,CSe="__lodash_hash_undefined__",SSe=Object.prototype,ASe=SSe.hasOwnProperty,MSe=EKe,LSe=Object.prototype,RSe=LSe.hasOwnProperty,DSe=CKe,ISe="__lodash_hash_undefined__",NSe=SKe,O5.prototype.clear=TSe,O5.prototype.delete=ESe,O5.prototype.get=MSe,O5.prototype.has=DSe,O5.prototype.set=NSe,sJ=O5,OSe=AKe,oJ=MKe,u8=LKe,BSe=Array.prototype,PSe=BSe.splice,FSe=RKe,$Se=DKe,zSe=IKe,GSe=NKe,B5.prototype.clear=OSe,B5.prototype.delete=FSe,B5.prototype.get=$Se,B5.prototype.has=zSe,B5.prototype.set=GSe,USe=B5,jSe=aP(VS,"Map"),HSe=jSe,VSe=OKe,WSe=BKe,h8=PKe,YSe=FKe,qSe=$Ke,XSe=zKe,KSe=GKe,P5.prototype.clear=VSe,P5.prototype.delete=YSe,P5.prototype.get=qSe,P5.prototype.has=XSe,P5.prototype.set=KSe,lJ=P5,ZSe="Expected a function",qZ.Cache=lJ,QSe=qZ,JSe=500,e8e=UKe,t8e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r8e=/\\(\\)?/g,i8e=e8e(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(t8e,function(r,i,n,a){t.push(n?a.replace(r8e,"$1"):i||r)}),t}),uJ=i8e,hJ=jKe,n8e=1/0,cJ=sx?sx.prototype:void 0,dJ=cJ?cJ.toString:void 0,a8e=HTe,pJ=HKe,fJ=VKe,s8e=1/0,sP=WKe,o8e=YKe,l8e=qKe,u8e=function(){try{var e=aP(Object,"defineProperty");return e({},"",{}),e}catch{}}(),gJ=u8e,h8e=XKe,c8e=Object.prototype,d8e=c8e.hasOwnProperty,p8e=KKe,f8e=9007199254740991,g8e=/^(?:0|[1-9]\d*)$/,m8e=ZKe,y8e=QKe,v8e=JKe,x8e=eZe,b8e=tZe,_8e={data:function(e){var t={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(r){},beforeSet:function(r,i){},onSet:function(r){},canSet:function(r){return!0}};return e=Rn({},t,e),function(r,i){var n=e,a=this,s=a.length!==void 0,u=s?a:[a],h=s?a[0]:a;if(wn(r)){var d=r.indexOf(".")!==-1,p=d&&b8e(r);if(n.allowGetting&&i===void 0){var g;return h&&(n.beforeGet(h),p&&h._private[n.field][r]===void 0?g=l8e(h._private[n.field],p):g=h._private[n.field][r]),g}else if(n.allowSetting&&i!==void 0){var y=!n.immutableKeys[r];if(y){var m=zTe({},r,i);n.beforeSet(a,m);for(var x=0,_=u.length;x<_;x++){var E=u[x];n.canSet(E)&&(p&&h._private[n.field][r]===void 0?v8e(E._private[n.field],p,i):E._private[n.field][r]=i)}n.updateStyle&&a.updateStyle(),n.onSet(a),n.settingTriggersEvent&&a[n.triggerFnName](n.settingEvent)}}}else if(n.allowSetting&&Ba(r)){var w=r,C,A,M=Object.keys(w);n.beforeSet(a,w);for(var N=0;N<M.length;N++){C=M[N],A=w[C];var B=!n.immutableKeys[C];if(B)for(var O=0;O<u.length;O++){var L=u[O];n.canSet(L)&&(L._private[n.field][C]=A)}}n.updateStyle&&a.updateStyle(),n.onSet(a),n.settingTriggersEvent&&a[n.triggerFnName](n.settingEvent)}else if(n.allowBinding&&Hs(r)){var $=r;a.on(n.bindingEvent,$)}else if(n.allowGetting&&r===void 0){var G;return h&&(n.beforeGet(h),G=h._private[n.field]),G}return a}},removeData:function(e){var t={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=Rn({},t,e),function(r){var i=e,n=this,a=n.length!==void 0,s=a?n:[n];if(wn(r)){for(var u=r.split(/\s+/),h=u.length,d=0;d<h;d++){var p=u[d];if(!Yf(p)){var g=!i.immutableKeys[p];if(g)for(var y=0,m=s.length;y<m;y++)s[y]._private[i.field][p]=void 0}}i.triggerEvent&&n[i.triggerFnName](i.event)}else if(r===void 0){for(var x=0,_=s.length;x<_;x++)for(var E=s[x]._private[i.field],w=Object.keys(E),C=0;C<w.length;C++){var A=w[C],M=!i.immutableKeys[A];M&&(E[A]=void 0)}i.triggerEvent&&n[i.triggerFnName](i.event)}return n}}},w8e={eventAliasesOn:function(e){var t=e;t.addListener=t.listen=t.bind=t.on,t.unlisten=t.unbind=t.off=t.removeListener,t.trigger=t.emit,t.pon=t.promiseOn=function(r,i){var n=this,a=Array.prototype.slice.call(arguments,0);return new gx(function(s,u){var h=function(g){n.off.apply(n,p),s(g)},d=a.concat([h]),p=d.concat([]);n.on.apply(n,d)})}}},Ka={},[J7e,_8e,w8e].forEach(function(e){Rn(Ka,e)}),k8e={animate:Ka.animate(),animation:Ka.animation(),animated:Ka.animated(),clearQueue:Ka.clearQueue(),delay:Ka.delay(),delayAnimation:Ka.delayAnimation(),stop:Ka.stop()},c8={classes:function(e){var t=this;if(e===void 0){var r=[];return t[0]._private.classes.forEach(function(m){return r.push(m)}),r}else ps(e)||(e=(e||"").match(/\S+/g)||[]);for(var i=[],n=new lx(e),a=0;a<t.length;a++){for(var s=t[a],u=s._private,h=u.classes,d=!1,p=0;p<e.length;p++){var g=e[p],y=h.has(g);if(!y){d=!0;break}}d||(d=h.size!==e.length),d&&(u.classes=n,i.push(s))}return i.length>0&&this.spawn(i).updateStyle().emit("class"),t},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var t=this[0];return t!=null&&t._private.classes.has(e)},toggleClass:function(e,t){ps(e)||(e=e.match(/\S+/g)||[]);for(var r=this,i=t===void 0,n=[],a=0,s=r.length;a<s;a++)for(var u=r[a],h=u._private.classes,d=!1,p=0;p<e.length;p++){var g=e[p],y=h.has(g),m=!1;t||i&&!y?(h.add(g),m=!0):(!t||i&&y)&&(h.delete(g),m=!0),!d&&m&&(n.push(u),d=!0)}return n.length>0&&this.spawn(n).updateStyle().emit("class"),r},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,t){var r=this;if(t==null)t=250;else if(t===0)return r;return r.addClass(e),setTimeout(function(){r.removeClass(e)},t),r}},c8.className=c8.classNames=c8.classes,Pa={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:Xo,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"},Pa.variable="(?:[\\w-.]|(?:\\\\"+Pa.metaChar+"))+",Pa.className="(?:[\\w-]|(?:\\\\"+Pa.metaChar+"))+",Pa.value=Pa.string+"|"+Pa.number,Pa.id=Pa.variable,function(){var e,t,r;for(e=Pa.comparatorOp.split("|"),r=0;r<e.length;r++)t=e[r],Pa.comparatorOp+="|@"+t;for(e=Pa.comparatorOp.split("|"),r=0;r<e.length;r++)t=e[r],!(t.indexOf("!")>=0)&&t!=="="&&(Pa.comparatorOp+="|\\!"+t)}(),us=function(){return{checks:[]}},Xi={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},oP=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(e,t){return DEe(e.selector,t.selector)}),T8e=function(){for(var e={},t,r=0;r<oP.length;r++)t=oP[r],e[t.selector]=t.matches;return e}(),E8e=function(e,t){return T8e[e](t)},C8e="("+oP.map(function(e){return e.selector}).join("|")+")",mx=function(e){return e.replace(new RegExp("\\\\("+Pa.metaChar+")","g"),function(t,r){return r})},Qf=function(e,t,r){e[e.length-1]=r},lP=[{name:"group",query:!0,regex:"("+Pa.group+")",populate:function(e,t,r){var i=Hd(r,1),n=i[0];t.checks.push({type:Xi.GROUP,value:n==="*"?n:n+"s"})}},{name:"state",query:!0,regex:C8e,populate:function(e,t,r){var i=Hd(r,1),n=i[0];t.checks.push({type:Xi.STATE,value:n})}},{name:"id",query:!0,regex:"\\#("+Pa.id+")",populate:function(e,t,r){var i=Hd(r,1),n=i[0];t.checks.push({type:Xi.ID,value:mx(n)})}},{name:"className",query:!0,regex:"\\.("+Pa.className+")",populate:function(e,t,r){var i=Hd(r,1),n=i[0];t.checks.push({type:Xi.CLASS,value:mx(n)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+Pa.variable+")\\s*\\]",populate:function(e,t,r){var i=Hd(r,1),n=i[0];t.checks.push({type:Xi.DATA_EXIST,field:mx(n)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+Pa.variable+")\\s*("+Pa.comparatorOp+")\\s*("+Pa.value+")\\s*\\]",populate:function(e,t,r){var i=Hd(r,3),n=i[0],a=i[1],s=i[2],u=new RegExp("^"+Pa.string+"$").exec(s)!=null;u?s=s.substring(1,s.length-1):s=parseFloat(s),t.checks.push({type:Xi.DATA_COMPARE,field:mx(n),operator:a,value:s})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+Pa.boolOp+")\\s*("+Pa.variable+")\\s*\\]",populate:function(e,t,r){var i=Hd(r,2),n=i[0],a=i[1];t.checks.push({type:Xi.DATA_BOOL,field:mx(a),operator:n})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+Pa.meta+")\\s*("+Pa.comparatorOp+")\\s*("+Pa.number+")\\s*\\]\\]",populate:function(e,t,r){var i=Hd(r,3),n=i[0],a=i[1],s=i[2];t.checks.push({type:Xi.META_COMPARE,field:mx(n),operator:a,value:parseFloat(s)})}},{name:"nextQuery",separator:!0,regex:Pa.separator,populate:function(e,t){var r=e.currentSubject,i=e.edgeCount,n=e.compoundCount,a=e[e.length-1];r!=null&&(a.subject=r,e.currentSubject=null),a.edgeCount=i,a.compoundCount=n,e.edgeCount=0,e.compoundCount=0;var s=e[e.length++]=us();return s}},{name:"directedEdge",separator:!0,regex:Pa.directedEdge,populate:function(e,t){if(e.currentSubject==null){var r=us(),i=t,n=us();return r.checks.push({type:Xi.DIRECTED_EDGE,source:i,target:n}),Qf(e,t,r),e.edgeCount++,n}else{var a=us(),s=t,u=us();return a.checks.push({type:Xi.NODE_SOURCE,source:s,target:u}),Qf(e,t,a),e.edgeCount++,u}}},{name:"undirectedEdge",separator:!0,regex:Pa.undirectedEdge,populate:function(e,t){if(e.currentSubject==null){var r=us(),i=t,n=us();return r.checks.push({type:Xi.UNDIRECTED_EDGE,nodes:[i,n]}),Qf(e,t,r),e.edgeCount++,n}else{var a=us(),s=t,u=us();return a.checks.push({type:Xi.NODE_NEIGHBOR,node:s,neighbor:u}),Qf(e,t,a),u}}},{name:"child",separator:!0,regex:Pa.child,populate:function(e,t){if(e.currentSubject==null){var r=us(),i=us(),n=e[e.length-1];return r.checks.push({type:Xi.CHILD,parent:n,child:i}),Qf(e,t,r),e.compoundCount++,i}else if(e.currentSubject===t){var a=us(),s=e[e.length-1],u=us(),h=us(),d=us(),p=us();return a.checks.push({type:Xi.COMPOUND_SPLIT,left:s,right:u,subject:h}),h.checks=t.checks,t.checks=[{type:Xi.TRUE}],p.checks.push({type:Xi.TRUE}),u.checks.push({type:Xi.PARENT,parent:p,child:d}),Qf(e,s,a),e.currentSubject=h,e.compoundCount++,d}else{var g=us(),y=us(),m=[{type:Xi.PARENT,parent:g,child:y}];return g.checks=t.checks,t.checks=m,e.compoundCount++,y}}},{name:"descendant",separator:!0,regex:Pa.descendant,populate:function(e,t){if(e.currentSubject==null){var r=us(),i=us(),n=e[e.length-1];return r.checks.push({type:Xi.DESCENDANT,ancestor:n,descendant:i}),Qf(e,t,r),e.compoundCount++,i}else if(e.currentSubject===t){var a=us(),s=e[e.length-1],u=us(),h=us(),d=us(),p=us();return a.checks.push({type:Xi.COMPOUND_SPLIT,left:s,right:u,subject:h}),h.checks=t.checks,t.checks=[{type:Xi.TRUE}],p.checks.push({type:Xi.TRUE}),u.checks.push({type:Xi.ANCESTOR,ancestor:p,descendant:d}),Qf(e,s,a),e.currentSubject=h,e.compoundCount++,d}else{var g=us(),y=us(),m=[{type:Xi.ANCESTOR,ancestor:g,descendant:y}];return g.checks=t.checks,t.checks=m,e.compoundCount++,y}}},{name:"subject",modifier:!0,regex:Pa.subject,populate:function(e,t){if(e.currentSubject!=null&&e.currentSubject!==t)return Xa("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=t;var r=e[e.length-1],i=r.checks[0],n=i==null?null:i.type;n===Xi.DIRECTED_EDGE?i.type=Xi.NODE_TARGET:n===Xi.UNDIRECTED_EDGE&&(i.type=Xi.NODE_NEIGHBOR,i.node=i.nodes[1],i.neighbor=i.nodes[0],i.nodes=null)}}],lP.forEach(function(e){return e.regexObj=new RegExp("^"+e.regex)}),S8e=function(e){for(var t,r,i,n=0;n<lP.length;n++){var a=lP[n],s=a.name,u=e.match(a.regexObj);if(u!=null){r=u,t=a,i=s;var h=u[0];e=e.substring(h.length);break}}return{expr:t,match:r,name:i,remaining:e}},A8e=function(e){var t=e.match(/^\s+/);if(t){var r=t[0];e=e.substring(r.length)}return e},M8e=function(e){var t=this,r=t.inputText=e,i=t[0]=us();for(t.length=1,r=A8e(r);;){var n=S8e(r);if(n.expr==null)return Xa("The selector `"+e+"`is invalid"),!1;var a=n.match.slice(1),s=n.expr.populate(t,i,a);if(s===!1)return!1;if(s!=null&&(i=s),r=n.remaining,r.match(/^\s*$/))break}var u=t[t.length-1];t.currentSubject!=null&&(u.subject=t.currentSubject),u.edgeCount=t.edgeCount,u.compoundCount=t.compoundCount;for(var h=0;h<t.length;h++){var d=t[h];if(d.compoundCount>0&&d.edgeCount>0)return Xa("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(d.edgeCount>1)return Xa("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;d.edgeCount===1&&Xa("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},L8e=function(){if(this.toStringCache!=null)return this.toStringCache;for(var e=function(h){return h??""},t=function(h){return wn(h)?'"'+h+'"':e(h)},r=function(h){return" "+h+" "},i=function(h,d){var p=h.type,g=h.value;switch(p){case Xi.GROUP:{var y=e(g);return y.substring(0,y.length-1)}case Xi.DATA_COMPARE:{var m=h.field,x=h.operator;return"["+m+r(e(x))+t(g)+"]"}case Xi.DATA_BOOL:{var _=h.operator,E=h.field;return"["+e(_)+E+"]"}case Xi.DATA_EXIST:{var w=h.field;return"["+w+"]"}case Xi.META_COMPARE:{var C=h.operator,A=h.field;return"[["+A+r(e(C))+t(g)+"]]"}case Xi.STATE:return g;case Xi.ID:return"#"+g;case Xi.CLASS:return"."+g;case Xi.PARENT:case Xi.CHILD:return n(h.parent,d)+r(">")+n(h.child,d);case Xi.ANCESTOR:case Xi.DESCENDANT:return n(h.ancestor,d)+" "+n(h.descendant,d);case Xi.COMPOUND_SPLIT:{var M=n(h.left,d),N=n(h.subject,d),B=n(h.right,d);return M+(M.length>0?" ":"")+N+B}case Xi.TRUE:return""}},n=function(h,d){return h.checks.reduce(function(p,g,y){return p+(d===h&&y===0?"$":"")+i(g,d)},"")},a="",s=0;s<this.length;s++){var u=this[s];a+=n(u,u.subject),this.length>1&&s<this.length-1&&(a+=", ")}return this.toStringCache=a,a},R8e={parse:M8e,toString:L8e},mJ=function(e,t,r){var i,n=wn(e),a=Ei(e),s=wn(r),u,h,d=!1,p=!1,g=!1;switch(t.indexOf("!")>=0&&(t=t.replace("!",""),p=!0),t.indexOf("@")>=0&&(t=t.replace("@",""),d=!0),(n||s||d)&&(u=!n&&!a?"":""+e,h=""+r),d&&(e=u=u.toLowerCase(),r=h=h.toLowerCase()),t){case"*=":i=u.indexOf(h)>=0;break;case"$=":i=u.indexOf(h,u.length-h.length)>=0;break;case"^=":i=u.indexOf(h)===0;break;case"=":i=e===r;break;case">":g=!0,i=e>r;break;case">=":g=!0,i=e>=r;break;case"<":g=!0,i=e<r;break;case"<=":g=!0,i=e<=r;break;default:i=!1;break}return p&&(e!=null||!g)&&(i=!i),i},D8e=function(e,t){switch(t){case"?":return!!e;case"!":return!e;case"^":return e===void 0}},I8e=function(e){return e!==void 0},uP=function(e,t){return e.data(t)},N8e=function(e,t){return e[t]()},ao=[],Ms=function(e,t){return e.checks.every(function(r){return ao[r.type](r,t)})},ao[Xi.GROUP]=function(e,t){var r=e.value;return r==="*"||r===t.group()},ao[Xi.STATE]=function(e,t){var r=e.value;return E8e(r,t)},ao[Xi.ID]=function(e,t){var r=e.value;return t.id()===r},ao[Xi.CLASS]=function(e,t){var r=e.value;return t.hasClass(r)},ao[Xi.META_COMPARE]=function(e,t){var r=e.field,i=e.operator,n=e.value;return mJ(N8e(t,r),i,n)},ao[Xi.DATA_COMPARE]=function(e,t){var r=e.field,i=e.operator,n=e.value;return mJ(uP(t,r),i,n)},ao[Xi.DATA_BOOL]=function(e,t){var r=e.field,i=e.operator;return D8e(uP(t,r),i)},ao[Xi.DATA_EXIST]=function(e,t){var r=e.field;return e.operator,I8e(uP(t,r))},ao[Xi.UNDIRECTED_EDGE]=function(e,t){var r=e.nodes[0],i=e.nodes[1],n=t.source(),a=t.target();return Ms(r,n)&&Ms(i,a)||Ms(i,n)&&Ms(r,a)},ao[Xi.NODE_NEIGHBOR]=function(e,t){return Ms(e.node,t)&&t.neighborhood().some(function(r){return r.isNode()&&Ms(e.neighbor,r)})},ao[Xi.DIRECTED_EDGE]=function(e,t){return Ms(e.source,t.source())&&Ms(e.target,t.target())},ao[Xi.NODE_SOURCE]=function(e,t){return Ms(e.source,t)&&t.outgoers().some(function(r){return r.isNode()&&Ms(e.target,r)})},ao[Xi.NODE_TARGET]=function(e,t){return Ms(e.target,t)&&t.incomers().some(function(r){return r.isNode()&&Ms(e.source,r)})},ao[Xi.CHILD]=function(e,t){return Ms(e.child,t)&&Ms(e.parent,t.parent())},ao[Xi.PARENT]=function(e,t){return Ms(e.parent,t)&&t.children().some(function(r){return Ms(e.child,r)})},ao[Xi.DESCENDANT]=function(e,t){return Ms(e.descendant,t)&&t.ancestors().some(function(r){return Ms(e.ancestor,r)})},ao[Xi.ANCESTOR]=function(e,t){return Ms(e.ancestor,t)&&t.descendants().some(function(r){return Ms(e.descendant,r)})},ao[Xi.COMPOUND_SPLIT]=function(e,t){return Ms(e.subject,t)&&Ms(e.left,t)&&Ms(e.right,t)},ao[Xi.TRUE]=function(){return!0},ao[Xi.COLLECTION]=function(e,t){var r=e.value;return r.has(t)},ao[Xi.FILTER]=function(e,t){var r=e.value;return r(t)},O8e=function(e){var t=this;if(t.length===1&&t[0].checks.length===1&&t[0].checks[0].type===Xi.ID)return e.getElementById(t[0].checks[0].value).collection();var r=function(i){for(var n=0;n<t.length;n++){var a=t[n];if(Ms(a,i))return!0}return!1};return t.text()==null&&(r=function(){return!0}),e.filter(r)},B8e=function(e){for(var t=this,r=0;r<t.length;r++){var i=t[r];if(Ms(i,e))return!0}return!1},P8e={matches:B8e,filter:O8e},Jf=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,e==null||wn(e)&&e.match(/^\s*$/)||(bh(e)?this.addQuery({checks:[{type:Xi.COLLECTION,value:e.collection()}]}):Hs(e)?this.addQuery({checks:[{type:Xi.FILTER,value:e}]}):wn(e)?this.parse(e)||(this.invalid=!0):no("A selector must be created from a string; found "))},eg=Jf.prototype,[R8e,P8e].forEach(function(e){return Rn(eg,e)}),eg.text=function(){return this.inputText},eg.size=function(){return this.length},eg.eq=function(e){return this[e]},eg.sameText=function(e){return!this.invalid&&!e.invalid&&this.text()===e.text()},eg.addQuery=function(e){this[this.length++]=e},eg.selector=eg.toString,tg={allAre:function(e){var t=new Jf(e);return this.every(function(r){return t.matches(r)})},is:function(e){var t=new Jf(e);return this.some(function(r){return t.matches(r)})},some:function(e,t){for(var r=0;r<this.length;r++){var i=t?e.apply(t,[this[r],r,this]):e(this[r],r,this);if(i)return!0}return!1},every:function(e,t){for(var r=0;r<this.length;r++){var i=t?e.apply(t,[this[r],r,this]):e(this[r],r,this);if(!i)return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var t=this.length,r=e.length;return t!==r?!1:t===1?this[0]===e[0]:this.every(function(i){return e.hasElementWithId(i.id())})},anySame:function(e){return e=this.cy().collection(e),this.some(function(t){return e.hasElementWithId(t.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var t=this.neighborhood();return e.every(function(r){return t.hasElementWithId(r.id())})},contains:function(e){e=this.cy().collection(e);var t=this;return e.every(function(r){return t.hasElementWithId(r.id())})}},tg.allAreNeighbours=tg.allAreNeighbors,tg.has=tg.contains,tg.equal=tg.equals=tg.same,hc=function(e,t){return function(r,i,n,a){var s=r,u=this,h;if(s==null?h="":bh(s)&&s.length===1&&(h=s.id()),u.length===1&&h){var d=u[0]._private,p=d.traversalCache=d.traversalCache||{},g=p[t]=p[t]||[],y=Um(h),m=g[y];return m||(g[y]=e.call(u,r,i,n,a))}else return e.call(u,r,i,n,a)}},yx={parent:function(e){var t=[];if(this.length===1){var r=this[0]._private.parent;if(r)return r}for(var i=0;i<this.length;i++){var n=this[i],a=n._private.parent;a&&t.push(a)}return this.spawn(t,!0).filter(e)},parents:function(e){for(var t=[],r=this.parent();r.nonempty();){for(var i=0;i<r.length;i++){var n=r[i];t.push(n)}r=r.parent()}return this.spawn(t,!0).filter(e)},commonAncestors:function(e){for(var t,r=0;r<this.length;r++){var i=this[r],n=i.parents();t=t||n,t=t.intersect(n)}return t.filter(e)},orphans:function(e){return this.stdFilter(function(t){return t.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(t){return t.isChild()}).filter(e)},children:hc(function(e){for(var t=[],r=0;r<this.length;r++)for(var i=this[r],n=i._private.children,a=0;a<n.length;a++)t.push(n[a]);return this.spawn(t,!0).filter(e)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length!==0},isChildless:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length===0},isChild:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent!=null},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent==null},descendants:function(e){var t=[];function r(i){for(var n=0;n<i.length;n++){var a=i[n];t.push(a),a.children().nonempty()&&r(a.children())}}return r(this.children()),this.spawn(t,!0).filter(e)}},yx.forEachDown=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return XZ(this,e,t,VTe)},yx.forEachUp=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return XZ(this,e,t,WTe)},yx.forEachUpAndDown=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return XZ(this,e,t,rZe)},yx.ancestors=yx.parents,d8=F8e={data:Ka.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:Ka.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:Ka.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Ka.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:Ka.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:Ka.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}},d8.attr=d8.data,d8.removeAttr=d8.removeData,$8e=F8e,p8={},Rn(p8,{degree:KZ(function(e,t){return t.source().same(t.target())?2:1}),indegree:KZ(function(e,t){return t.target().same(e)?1:0}),outdegree:KZ(function(e,t){return t.source().same(e)?1:0})}),Rn(p8,{minDegree:F5("degree",function(e,t){return e<t}),maxDegree:F5("degree",function(e,t){return e>t}),minIndegree:F5("indegree",function(e,t){return e<t}),maxIndegree:F5("indegree",function(e,t){return e>t}),minOutdegree:F5("outdegree",function(e,t){return e<t}),maxOutdegree:F5("outdegree",function(e,t){return e>t})}),Rn(p8,{totalDegree:function(e){for(var t=0,r=this.nodes(),i=0;i<r.length;i++)t+=r[i].degree(e);return t}}),yJ=function(e,t,r){for(var i=0;i<e.length;i++){var n=e[i];if(!n.locked()){var a=n._private.position,s={x:t.x!=null?t.x-a.x:0,y:t.y!=null?t.y-a.y:0};n.isParent()&&!(s.x===0&&s.y===0)&&n.children().shift(s,r),n.dirtyBoundingBoxCache()}}},vJ={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,t){yJ(e,t,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}},Yd=z8e={position:Ka.data(vJ),silentPosition:Ka.data(Rn({},vJ,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,t){yJ(e,t,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,t){if(Ba(e))t?this.silentPosition(e):this.position(e);else if(Hs(e)){var r=e,i=this.cy();i.startBatch();for(var n=0;n<this.length;n++){var a=this[n],s=void 0;(s=r(a,n))&&(t?a.silentPosition(s):a.position(s))}i.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,t,r){var i;if(Ba(e)?(i={x:Ei(e.x)?e.x:0,y:Ei(e.y)?e.y:0},r=t):wn(e)&&Ei(t)&&(i={x:0,y:0},i[e]=t),i!=null){var n=this.cy();n.startBatch();for(var a=0;a<this.length;a++){var s=this[a];if(!(n.hasCompoundNodes()&&s.isChild()&&s.ancestors().anySame(this))){var u=s.position(),h={x:u.x+i.x,y:u.y+i.y};r?s.silentPosition(h):s.position(h)}}n.endBatch()}return this},silentShift:function(e,t){return Ba(e)?this.shift(e,!0):wn(e)&&Ei(t)&&this.shift(e,t,!0),this},renderedPosition:function(e,t){var r=this[0],i=this.cy(),n=i.zoom(),a=i.pan(),s=Ba(e)?e:void 0,u=s!==void 0||t!==void 0&&wn(e);if(r&&r.isNode())if(u)for(var h=0;h<this.length;h++){var d=this[h];t!==void 0?d.position(e,(t-a[e])/n):s!==void 0&&d.position(SQ(s,n,a))}else{var p=r.position();return s=ZS(p,n,a),e===void 0?s:s[e]}else if(!u)return;return this},relativePosition:function(e,t){var r=this[0],i=this.cy(),n=Ba(e)?e:void 0,a=n!==void 0||t!==void 0&&wn(e),s=i.hasCompoundNodes();if(r&&r.isNode())if(a)for(var u=0;u<this.length;u++){var h=this[u],d=s?h.parent():null,p=d&&d.length>0,g=p;p&&(d=d[0]);var y=g?d.position():{x:0,y:0};t!==void 0?h.position(e,t+y[e]):n!==void 0&&h.position({x:n.x+y.x,y:n.y+y.y})}else{var m=r.position(),x=s?r.parent():null,_=x&&x.length>0,E=_;_&&(x=x[0]);var w=E?x.position():{x:0,y:0};return n={x:m.x-w.x,y:m.y-w.y},e===void 0?n:n[e]}else if(!a)return;return this}},Yd.modelPosition=Yd.point=Yd.position,Yd.modelPositions=Yd.points=Yd.positions,Yd.renderedPoint=Yd.renderedPosition,Yd.relativePoint=Yd.relativePosition,G8e=z8e,iw=qm={},qm.renderedBoundingBox=function(e){var t=this.boundingBox(e),r=this.cy(),i=r.zoom(),n=r.pan(),a=t.x1*i+n.x,s=t.x2*i+n.x,u=t.y1*i+n.y,h=t.y2*i+n.y;return{x1:a,x2:s,y1:u,y2:h,w:s-a,h:h-u}},qm.dirtyCompoundBoundsCache=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=this.cy();return!t.styleEnabled()||!t.hasCompoundNodes()?this:(this.forEachUp(function(r){if(r.isParent()){var i=r._private;i.compoundBoundsClean=!1,i.bbCache=null,e||r.emitAndNotify("bounds")}}),this)},qm.updateCompoundBounds=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=this.cy();if(!t.styleEnabled()||!t.hasCompoundNodes())return this;if(!e&&t.batching())return this;function r(s){if(!s.isParent())return;var u=s._private,h=s.children(),d=s.pstyle("compound-sizing-wrt-labels").value==="include",p={width:{val:s.pstyle("min-width").pfValue,left:s.pstyle("min-width-bias-left"),right:s.pstyle("min-width-bias-right")},height:{val:s.pstyle("min-height").pfValue,top:s.pstyle("min-height-bias-top"),bottom:s.pstyle("min-height-bias-bottom")}},g=h.boundingBox({includeLabels:d,includeOverlays:!1,useCache:!1}),y=u.position;(g.w===0||g.h===0)&&(g={w:s.pstyle("width").pfValue,h:s.pstyle("height").pfValue},g.x1=y.x-g.w/2,g.x2=y.x+g.w/2,g.y1=y.y-g.h/2,g.y2=y.y+g.h/2);function m($,G,z){var F=0,X=0,I=G+z;return $>0&&I>0&&(F=G/I*$,X=z/I*$),{biasDiff:F,biasComplementDiff:X}}function x($,G,z,F){if(z.units==="%")switch(F){case"width":return $>0?z.pfValue*$:0;case"height":return G>0?z.pfValue*G:0;case"average":return $>0&&G>0?z.pfValue*($+G)/2:0;case"min":return $>0&&G>0?$>G?z.pfValue*G:z.pfValue*$:0;case"max":return $>0&&G>0?$>G?z.pfValue*$:z.pfValue*G:0;default:return 0}else return z.units==="px"?z.pfValue:0}var _=p.width.left.value;p.width.left.units==="px"&&p.width.val>0&&(_=_*100/p.width.val);var E=p.width.right.value;p.width.right.units==="px"&&p.width.val>0&&(E=E*100/p.width.val);var w=p.height.top.value;p.height.top.units==="px"&&p.height.val>0&&(w=w*100/p.height.val);var C=p.height.bottom.value;p.height.bottom.units==="px"&&p.height.val>0&&(C=C*100/p.height.val);var A=m(p.width.val-g.w,_,E),M=A.biasDiff,N=A.biasComplementDiff,B=m(p.height.val-g.h,w,C),O=B.biasDiff,L=B.biasComplementDiff;u.autoPadding=x(g.w,g.h,s.pstyle("padding"),s.pstyle("padding-relative-to").value),u.autoWidth=Math.max(g.w,p.width.val),y.x=(-M+g.x1+g.x2+N)/2,u.autoHeight=Math.max(g.h,p.height.val),y.y=(-O+g.y1+g.y2+L)/2}for(var i=0;i<this.length;i++){var n=this[i],a=n._private;(!a.compoundBoundsClean||e)&&(r(n),t.batching()||(a.compoundBoundsClean=!0))}return this},cc=function(e){return e===1/0||e===-1/0?0:e},Xc=function(e,t,r,i,n){i-t===0||n-r===0||t==null||r==null||i==null||n==null||(e.x1=t<e.x1?t:e.x1,e.x2=i>e.x2?i:e.x2,e.y1=r<e.y1?r:e.y1,e.y2=n>e.y2?n:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},Xm=function(e,t){return t==null?e:Xc(e,t.x1,t.y1,t.x2,t.y2)},nw=function(e,t,r){return qc(e,t,r)},f8=function(e,t,r){if(!t.cy().headless()){var i=t._private,n=i.rstyle,a=n.arrowWidth/2,s=t.pstyle(r+"-arrow-shape").value,u,h;if(s!=="none"){r==="source"?(u=n.srcX,h=n.srcY):r==="target"?(u=n.tgtX,h=n.tgtY):(u=n.midX,h=n.midY);var d=i.arrowBounds=i.arrowBounds||{},p=d[r]=d[r]||{};p.x1=u-a,p.y1=h-a,p.x2=u+a,p.y2=h+a,p.w=p.x2-p.x1,p.h=p.y2-p.y1,JS(p,1),Xc(e,p.x1,p.y1,p.x2,p.y2)}}},hP=function(e,t,r){if(!t.cy().headless()){var i;r?i=r+"-":i="";var n=t._private,a=n.rstyle,s=t.pstyle(i+"label").strValue;if(s){var u=t.pstyle("text-halign"),h=t.pstyle("text-valign"),d=nw(a,"labelWidth",r),p=nw(a,"labelHeight",r),g=nw(a,"labelX",r),y=nw(a,"labelY",r),m=t.pstyle(i+"text-margin-x").pfValue,x=t.pstyle(i+"text-margin-y").pfValue,_=t.isEdge(),E=t.pstyle(i+"text-rotation"),w=t.pstyle("text-outline-width").pfValue,C=t.pstyle("text-border-width").pfValue,A=C/2,M=t.pstyle("text-background-padding").pfValue,N=2,B=p,O=d,L=O/2,$=B/2,G,z,F,X;if(_)G=g-L,z=g+L,F=y-$,X=y+$;else{switch(u.value){case"left":G=g-O,z=g;break;case"center":G=g-L,z=g+L;break;case"right":G=g,z=g+O;break}switch(h.value){case"top":F=y-B,X=y;break;case"center":F=y-$,X=y+$;break;case"bottom":F=y,X=y+B;break}}var I=m-Math.max(w,A)-M-N,j=m+Math.max(w,A)+M+N,H=x-Math.max(w,A)-M-N,V=x+Math.max(w,A)+M+N;G+=I,z+=j,F+=H,X+=V;var P=r||"main",q=n.labelBounds,Z=q[P]=q[P]||{};Z.x1=G,Z.y1=F,Z.x2=z,Z.y2=X,Z.w=z-G,Z.h=X-F,Z.leftPad=I,Z.rightPad=j,Z.topPad=H,Z.botPad=V;var J=_&&E.strValue==="autorotate",ae=E.pfValue!=null&&E.pfValue!==0;if(J||ae){var ue=J?nw(n.rstyle,"labelAngle",r):E.pfValue,be=Math.cos(ue),Le=Math.sin(ue),xe=(G+z)/2,Ae=(F+X)/2;if(!_){switch(u.value){case"left":xe=z;break;case"right":xe=G;break}switch(h.value){case"top":Ae=X;break;case"bottom":Ae=F;break}}var oe=function(st,we){return st=st-xe,we=we-Ae,{x:st*be-we*Le+xe,y:st*Le+we*be+Ae}},he=oe(G,F),le=oe(G,X),ke=oe(z,F),pe=oe(z,X);G=Math.min(he.x,le.x,ke.x,pe.x),z=Math.max(he.x,le.x,ke.x,pe.x),F=Math.min(he.y,le.y,ke.y,pe.y),X=Math.max(he.y,le.y,ke.y,pe.y)}var qe=P+"Rot",me=q[qe]=q[qe]||{};me.x1=G,me.y1=F,me.x2=z,me.y2=X,me.w=z-G,me.h=X-F,Xc(e,G,F,z,X),Xc(n.labelBounds.all,G,F,z,X)}return e}},U8e=function(e,t){if(!t.cy().headless()){var r=t.pstyle("outline-opacity").value,i=t.pstyle("outline-width").value;if(r>0&&i>0){var n=t.pstyle("outline-offset").value,a=t.pstyle("shape").value,s=i+n,u=(e.w+s*2)/e.w,h=(e.h+s*2)/e.h,d=0,p=0;["diamond","pentagon","round-triangle"].includes(a)?(u=(e.w+s*2.4)/e.w,p=-s/3.6):["concave-hexagon","rhomboid","right-rhomboid"].includes(a)?u=(e.w+s*2.4)/e.w:a==="star"?(u=(e.w+s*2.8)/e.w,h=(e.h+s*2.6)/e.h,p=-s/3.8):a==="triangle"?(u=(e.w+s*2.8)/e.w,h=(e.h+s*2.4)/e.h,p=-s/1.4):a==="vee"&&(u=(e.w+s*4.4)/e.w,h=(e.h+s*3.8)/e.h,p=-s*.5);var g=e.h*h-e.h,y=e.w*u-e.w;if(e8(e,[Math.ceil(g/2),Math.ceil(y/2)]),d!=0||p!==0){var m=qCe(e,d,p);MQ(e,m)}}}},j8e=function(e,t){var r=e._private.cy,i=r.styleEnabled(),n=r.headless(),a=Xu(),s=e._private,u=e.isNode(),h=e.isEdge(),d,p,g,y,m,x,_=s.rstyle,E=u&&i?e.pstyle("bounds-expansion").pfValue:[0],w=function(me){return me.pstyle("display").value!=="none"},C=!i||w(e)&&(!h||w(e.source())&&w(e.target()));if(C){var A=0,M=0;i&&t.includeOverlays&&(A=e.pstyle("overlay-opacity").value,A!==0&&(M=e.pstyle("overlay-padding").value));var N=0,B=0;i&&t.includeUnderlays&&(N=e.pstyle("underlay-opacity").value,N!==0&&(B=e.pstyle("underlay-padding").value));var O=Math.max(M,B),L=0,$=0;if(i&&(L=e.pstyle("width").pfValue,$=L/2),u&&t.includeNodes){var G=e.position();m=G.x,x=G.y;var z=e.outerWidth(),F=z/2,X=e.outerHeight(),I=X/2;d=m-F,p=m+F,g=x-I,y=x+I,Xc(a,d,g,p,y),i&&t.includeOutlines&&U8e(a,e)}else if(h&&t.includeEdges)if(i&&!n){var j=e.pstyle("curve-style").strValue;if(d=Math.min(_.srcX,_.midX,_.tgtX),p=Math.max(_.srcX,_.midX,_.tgtX),g=Math.min(_.srcY,_.midY,_.tgtY),y=Math.max(_.srcY,_.midY,_.tgtY),d-=$,p+=$,g-=$,y+=$,Xc(a,d,g,p,y),j==="haystack"){var H=_.haystackPts;if(H&&H.length===2){if(d=H[0].x,g=H[0].y,p=H[1].x,y=H[1].y,d>p){var V=d;d=p,p=V}if(g>y){var P=g;g=y,y=P}Xc(a,d-$,g-$,p+$,y+$)}}else if(j==="bezier"||j==="unbundled-bezier"||j.endsWith("segments")||j.endsWith("taxi")){var q;switch(j){case"bezier":case"unbundled-bezier":q=_.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":q=_.linePts;break}if(q!=null)for(var Z=0;Z<q.length;Z++){var J=q[Z];d=J.x-$,p=J.x+$,g=J.y-$,y=J.y+$,Xc(a,d,g,p,y)}}}else{var ae=e.source(),ue=ae.position(),be=e.target(),Le=be.position();if(d=ue.x,p=Le.x,g=ue.y,y=Le.y,d>p){var xe=d;d=p,p=xe}if(g>y){var Ae=g;g=y,y=Ae}d-=$,p+=$,g-=$,y+=$,Xc(a,d,g,p,y)}if(i&&t.includeEdges&&h&&(f8(a,e,"mid-source"),f8(a,e,"mid-target"),f8(a,e,"source"),f8(a,e,"target")),i){var oe=e.pstyle("ghost").value==="yes";if(oe){var he=e.pstyle("ghost-offset-x").pfValue,le=e.pstyle("ghost-offset-y").pfValue;Xc(a,a.x1+he,a.y1+le,a.x2+he,a.y2+le)}}var ke=s.bodyBounds=s.bodyBounds||{};LQ(ke,a),e8(ke,E),JS(ke,1),i&&(d=a.x1,p=a.x2,g=a.y1,y=a.y2,Xc(a,d-O,g-O,p+O,y+O));var pe=s.overlayBounds=s.overlayBounds||{};LQ(pe,a),e8(pe,E),JS(pe,1);var qe=s.labelBounds=s.labelBounds||{};qe.all!=null?YCe(qe.all):qe.all=Xu(),i&&t.includeLabels&&(t.includeMainLabels&&hP(a,e,null),h&&(t.includeSourceLabels&&hP(a,e,"source"),t.includeTargetLabels&&hP(a,e,"target")))}return a.x1=cc(a.x1),a.y1=cc(a.y1),a.x2=cc(a.x2),a.y2=cc(a.y2),a.w=cc(a.x2-a.x1),a.h=cc(a.y2-a.y1),a.w>0&&a.h>0&&C&&(e8(a,E),JS(a,1)),a},xJ=function(e){var t=0,r=function(n){return(n?1:0)<<t++},i=0;return i+=r(e.incudeNodes),i+=r(e.includeEdges),i+=r(e.includeLabels),i+=r(e.includeMainLabels),i+=r(e.includeSourceLabels),i+=r(e.includeTargetLabels),i+=r(e.includeOverlays),i+=r(e.includeOutlines),i},bJ=function(e){if(e.isEdge()){var t=e.source().position(),r=e.target().position(),i=function(n){return Math.round(n)};return fCe([i(t.x),i(t.y),i(r.x),i(r.y)])}else return 0},_J=function(e,t){var r=e._private,i,n=e.isEdge(),a=t==null?wJ:xJ(t),s=a===wJ,u=bJ(e),h=r.bbCachePosKey===u,d=t.useCache&&h,p=function(m){return m._private.bbCache==null||m._private.styleDirty},g=!d||p(e)||n&&(p(e.source())||p(e.target()));if(g?(h||e.recalculateRenderedStyle(d),i=j8e(e,aw),r.bbCache=i,r.bbCachePosKey=u):i=r.bbCache,!s){var y=e.isNode();i=Xu(),(t.includeNodes&&y||t.includeEdges&&!y)&&(t.includeOverlays?Xm(i,r.overlayBounds):Xm(i,r.bodyBounds)),t.includeLabels&&(t.includeMainLabels&&(!n||t.includeSourceLabels&&t.includeTargetLabels)?Xm(i,r.labelBounds.all):(t.includeMainLabels&&Xm(i,r.labelBounds.mainRot),t.includeSourceLabels&&Xm(i,r.labelBounds.sourceRot),t.includeTargetLabels&&Xm(i,r.labelBounds.targetRot))),i.w=i.x2-i.x1,i.h=i.y2-i.y1}return i},aw={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},wJ=xJ(aw),kJ=Ll(aw),qm.boundingBox=function(e){var t;if(this.length===1&&this[0]._private.bbCache!=null&&!this[0]._private.styleDirty&&(e===void 0||e.useCache===void 0||e.useCache===!0))e===void 0?e=aw:e=kJ(e),t=_J(this[0],e);else{t=Xu(),e=e||aw;var r=kJ(e),i=this,n=i.cy(),a=n.styleEnabled();if(a)for(var s=0;s<i.length;s++){var u=i[s],h=u._private,d=bJ(u),p=h.bbCachePosKey===d,g=r.useCache&&p&&!h.styleDirty;u.recalculateRenderedStyle(g)}this.updateCompoundBounds(!e.useCache);for(var y=0;y<i.length;y++){var m=i[y];Xm(t,_J(m,r))}}return t.x1=cc(t.x1),t.y1=cc(t.y1),t.x2=cc(t.x2),t.y2=cc(t.y2),t.w=cc(t.x2-t.x1),t.h=cc(t.y2-t.y1),t},qm.dirtyBoundingBoxCache=function(){for(var e=0;e<this.length;e++){var t=this[e]._private;t.bbCache=null,t.bbCachePosKey=null,t.bodyBounds=null,t.overlayBounds=null,t.labelBounds.all=null,t.labelBounds.source=null,t.labelBounds.target=null,t.labelBounds.main=null,t.labelBounds.sourceRot=null,t.labelBounds.targetRot=null,t.labelBounds.mainRot=null,t.arrowBounds.source=null,t.arrowBounds.target=null,t.arrowBounds["mid-source"]=null,t.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this},qm.boundingBoxAt=function(e){var t=this.nodes(),r=this.cy(),i=r.hasCompoundNodes(),n=r.collection();if(i&&(n=t.filter(function(d){return d.isParent()}),t=t.not(n)),Ba(e)){var a=e;e=function(){return a}}var s=function(d,p){return d._private.bbAtOldPos=e(d,p)},u=function(d){return d._private.bbAtOldPos};r.startBatch(),t.forEach(s).silentPositions(e),i&&(n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),n.updateCompoundBounds(!0));var h=WCe(this.boundingBox({useCache:!1}));return t.silentPositions(u),i&&(n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),n.updateCompoundBounds(!0)),r.endBatch(),h},iw.boundingbox=iw.bb=iw.boundingBox,iw.renderedBoundingbox=iw.renderedBoundingBox,H8e=qm,g8=m8={},TJ=function(e){e.uppercaseName=oQ(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=oQ(e.outerName),g8[e.name]=function(){var t=this[0],r=t._private,i=r.cy,n=i._private.styleEnabled;if(t)if(n){if(t.isParent())return t.updateCompoundBounds(),r[e.autoName]||0;var a=t.pstyle(e.name);switch(a.strValue){case"label":return t.recalculateRenderedStyle(),r.rstyle[e.labelName]||0;default:return a.pfValue}}else return 1},g8["outer"+e.uppercaseName]=function(){var t=this[0],r=t._private,i=r.cy,n=i._private.styleEnabled;if(t)if(n){var a=t[e.name](),s=t.pstyle("border-width").pfValue,u=2*t.padding();return a+s+u}else return 1},g8["rendered"+e.uppercaseName]=function(){var t=this[0];if(t){var r=t[e.name]();return r*this.cy().zoom()}},g8["rendered"+e.uppercaseOuterName]=function(){var t=this[0];if(t){var r=t[e.outerName]();return r*this.cy().zoom()}}},TJ({name:"width"}),TJ({name:"height"}),m8.padding=function(){var e=this[0],t=e._private;return e.isParent()?(e.updateCompoundBounds(),t.autoPadding!==void 0?t.autoPadding:e.pstyle("padding").pfValue):e.pstyle("padding").pfValue},m8.paddedHeight=function(){var e=this[0];return e.height()+2*e.padding()},m8.paddedWidth=function(){var e=this[0];return e.width()+2*e.padding()},V8e=m8,W8e=function(e,t){if(e.isEdge())return t(e)},Y8e=function(e,t){if(e.isEdge()){var r=e.cy();return ZS(t(e),r.zoom(),r.pan())}},q8e=function(e,t){if(e.isEdge()){var r=e.cy(),i=r.pan(),n=r.zoom();return t(e).map(function(a){return ZS(a,n,i)})}},X8e=function(e){return e.renderer().getControlPoints(e)},K8e=function(e){return e.renderer().getSegmentPoints(e)},Z8e=function(e){return e.renderer().getSourceEndpoint(e)},Q8e=function(e){return e.renderer().getTargetEndpoint(e)},J8e=function(e){return e.renderer().getEdgeMidpoint(e)},EJ={controlPoints:{get:X8e,mult:!0},segmentPoints:{get:K8e,mult:!0},sourceEndpoint:{get:Z8e},targetEndpoint:{get:Q8e},midpoint:{get:J8e}},eAe=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},tAe=Object.keys(EJ).reduce(function(e,t){var r=EJ[t],i=eAe(t);return e[t]=function(){return W8e(this,r.get)},r.mult?e[i]=function(){return q8e(this,r.get)}:e[i]=function(){return Y8e(this,r.get)},e},{}),rAe=Rn({},G8e,H8e,V8e,tAe),CJ=function(e,t){this.recycle(e,t)},CJ.prototype={instanceString:function(){return"event"},recycle:function(e,t){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=GS,e!=null&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?OB:GS):e!=null&&e.type?t=e:this.type=e,t!=null&&(this.originalEvent=t.originalEvent,this.type=t.type!=null?t.type:this.type,this.cy=t.cy,this.target=t.target,this.position=t.position,this.renderedPosition=t.renderedPosition,this.namespace=t.namespace,this.layout=t.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var r=this.position,i=this.cy.zoom(),n=this.cy.pan();this.renderedPosition={x:r.x*i+n.x,y:r.y*i+n.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=OB;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=OB;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=OB,this.stopPropagation()},isDefaultPrevented:GS,isPropagationStopped:GS,isImmediatePropagationStopped:GS},SJ=/^([^.]+)(\.(?:[^.]+))?$/,iAe=".*",AJ={qualifierCompare:function(e,t){return e===t},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},MJ=Object.keys(AJ),nAe={},rg=BB.prototype,LJ=function(e,t,r,i,n,a,s){Hs(i)&&(n=i,i=null),s&&(a==null?a=s:a=Rn({},a,s));for(var u=ps(r)?r:r.split(/\s+/),h=0;h<u.length;h++){var d=u[h];if(!Yf(d)){var p=d.match(SJ);if(p){var g=p[1],y=p[2]?p[2]:null,m=t(e,d,g,y,i,n,a);if(m===!1)break}}}},RJ=function(e,t){return e.addEventFields(e.context,t),new CJ(t.type,t)},aAe=function(e,t,r){if(_Ee(r)){t(e,r);return}else if(Ba(r)){t(e,RJ(e,r));return}for(var i=ps(r)?r:r.split(/\s+/),n=0;n<i.length;n++){var a=i[n];if(!Yf(a)){var s=a.match(SJ);if(s){var u=s[1],h=s[2]?s[2]:null,d=RJ(e,{type:u,namespace:h,target:e.context});t(e,d)}}}},rg.on=rg.addListener=function(e,t,r,i,n){return LJ(this,function(a,s,u,h,d,p,g){Hs(p)&&a.listeners.push({event:s,callback:p,type:u,namespace:h,qualifier:d,conf:g})},e,t,r,i,n),this},rg.one=function(e,t,r,i){return this.on(e,t,r,i,{one:!0})},rg.removeListener=rg.off=function(e,t,r,i){var n=this;this.emitting!==0&&(this.listeners=xCe(this.listeners));for(var a=this.listeners,s=function(h){var d=a[h];LJ(n,function(p,g,y,m,x,_){if((d.type===y||e==="*")&&(!m&&d.namespace!==".*"||d.namespace===m)&&(!x||p.qualifierCompare(d.qualifier,x))&&(!_||d.callback===_))return a.splice(h,1),!1},e,t,r,i)},u=a.length-1;u>=0;u--)s(u);return this},rg.removeAllListeners=function(){return this.removeListener("*")},rg.emit=rg.trigger=function(e,t,r){var i=this.listeners,n=i.length;return this.emitting++,ps(t)||(t=[t]),aAe(this,function(a,s){r!=null&&(i=[{event:s.event,type:s.type,namespace:s.namespace,callback:r}],n=i.length);for(var u=function(d){var p=i[d];if(p.type===s.type&&(!p.namespace||p.namespace===s.namespace||p.namespace===iAe)&&a.eventMatches(a.context,p,s)){var g=[s];t!=null&&_Ce(g,t),a.beforeEmit(a.context,p,s),p.conf&&p.conf.one&&(a.listeners=a.listeners.filter(function(x){return x!==p}));var y=a.callbackContext(a.context,p,s),m=p.callback.apply(y,g);a.afterEmit(a.context,p,s),m===!1&&(s.stopPropagation(),s.preventDefault())}},h=0;h<n;h++)u(h);a.bubble(a.context)&&!s.isPropagationStopped()&&a.parent(a.context).emit(s,t)},e),this.emitting--,this},sAe={qualifierCompare:function(e,t){return e==null||t==null?e==null&&t==null:e.sameText(t)},eventMatches:function(e,t,r){var i=t.qualifier;return i!=null?e!==r.target&&U5(r.target)&&i.matches(r.target):!0},addEventFields:function(e,t){t.cy=e.cy(),t.target=e},callbackContext:function(e,t,r){return t.qualifier!=null?r.target:e},beforeEmit:function(e,t){t.conf&&t.conf.once&&t.conf.onceCollection.removeListener(t.event,t.qualifier,t.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},y8=function(e){return wn(e)?new Jf(e):e},DJ={createEmitter:function(){for(var e=0;e<this.length;e++){var t=this[e],r=t._private;r.emitter||(r.emitter=new BB(sAe,t))}return this},emitter:function(){return this._private.emitter},on:function(e,t,r){for(var i=y8(t),n=0;n<this.length;n++){var a=this[n];a.emitter().on(e,i,r)}return this},removeListener:function(e,t,r){for(var i=y8(t),n=0;n<this.length;n++){var a=this[n];a.emitter().removeListener(e,i,r)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){var t=this[e];t.emitter().removeAllListeners()}return this},one:function(e,t,r){for(var i=y8(t),n=0;n<this.length;n++){var a=this[n];a.emitter().one(e,i,r)}return this},once:function(e,t,r){for(var i=y8(t),n=0;n<this.length;n++){var a=this[n];a.emitter().on(e,i,r,{once:!0,onceCollection:this})}},emit:function(e,t){for(var r=0;r<this.length;r++){var i=this[r];i.emitter().emit(e,t)}return this},emitAndNotify:function(e,t){if(this.length!==0)return this.cy().notify(e,this),this.emit(e,t),this}},Ka.eventAliasesOn(DJ),IJ={nodes:function(e){return this.filter(function(t){return t.isNode()}).filter(e)},edges:function(e){return this.filter(function(t){return t.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),t=this.spawn(),r=0;r<this.length;r++){var i=this[r];i.isNode()?e.push(i):t.push(i)}return{nodes:e,edges:t}},filter:function(e,t){if(e===void 0)return this;if(wn(e)||bh(e))return new Jf(e).filter(this);if(Hs(e)){for(var r=this.spawn(),i=this,n=0;n<i.length;n++){var a=i[n],s=t?e.apply(t,[a,n,i]):e(a,n,i);s&&r.push(a)}return r}return this.spawn()},not:function(e){if(e){wn(e)&&(e=this.filter(e));for(var t=this.spawn(),r=0;r<this.length;r++){var i=this[r],n=e.has(i);n||t.push(i)}return t}else return this},absoluteComplement:function(){var e=this.cy();return e.mutableElements().not(this)},intersect:function(e){if(wn(e)){var t=e;return this.filter(t)}for(var r=this.spawn(),i=this,n=e,a=this.length<e.length,s=a?i:n,u=a?n:i,h=0;h<s.length;h++){var d=s[h];u.has(d)&&r.push(d)}return r},xor:function(e){var t=this._private.cy;wn(e)&&(e=t.$(e));var r=this.spawn(),i=this,n=e,a=function(s,u){for(var h=0;h<s.length;h++){var d=s[h],p=d._private.data.id,g=u.hasElementWithId(p);g||r.push(d)}};return a(i,n),a(n,i),r},diff:function(e){var t=this._private.cy;wn(e)&&(e=t.$(e));var r=this.spawn(),i=this.spawn(),n=this.spawn(),a=this,s=e,u=function(h,d,p){for(var g=0;g<h.length;g++){var y=h[g],m=y._private.data.id,x=d.hasElementWithId(m);x?n.merge(y):p.push(y)}};return u(a,s,r),u(s,a,i),{left:r,right:i,both:n}},add:function(e){var t=this._private.cy;if(!e)return this;if(wn(e)){var r=e;e=t.mutableElements().filter(r)}for(var i=this.spawnSelf(),n=0;n<e.length;n++){var a=e[n],s=!this.has(a);s&&i.push(a)}return i},merge:function(e){var t=this._private,r=t.cy;if(!e)return this;if(e&&wn(e)){var i=e;e=r.mutableElements().filter(i)}for(var n=t.map,a=0;a<e.length;a++){var s=e[a],u=s._private.data.id,h=!n.has(u);if(h){var d=this.length++;this[d]=s,n.set(u,{ele:s,index:d})}}return this},unmergeAt:function(e){var t=this[e],r=t.id(),i=this._private,n=i.map;this[e]=void 0,n.delete(r);var a=e===this.length-1;if(this.length>1&&!a){var s=this.length-1,u=this[s],h=u._private.data.id;this[s]=void 0,this[e]=u,n.set(h,{ele:u,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var t=this._private,r=e._private.data.id,i=t.map,n=i.get(r);if(!n)return this;var a=n.index;return this.unmergeAt(a),this},unmerge:function(e){var t=this._private.cy;if(!e)return this;if(e&&wn(e)){var r=e;e=t.mutableElements().filter(r)}for(var i=0;i<e.length;i++)this.unmergeOne(e[i]);return this},unmergeBy:function(e){for(var t=this.length-1;t>=0;t--){var r=this[t];e(r)&&this.unmergeAt(t)}return this},map:function(e,t){for(var r=[],i=this,n=0;n<i.length;n++){var a=i[n],s=t?e.apply(t,[a,n,i]):e(a,n,i);r.push(s)}return r},reduce:function(e,t){for(var r=t,i=this,n=0;n<i.length;n++)r=e(r,i[n],n,i);return r},max:function(e,t){for(var r=-1/0,i,n=this,a=0;a<n.length;a++){var s=n[a],u=t?e.apply(t,[s,a,n]):e(s,a,n);u>r&&(r=u,i=s)}return{value:r,ele:i}},min:function(e,t){for(var r=1/0,i,n=this,a=0;a<n.length;a++){var s=n[a],u=t?e.apply(t,[s,a,n]):e(s,a,n);u<r&&(r=u,i=s)}return{value:r,ele:i}}},za=IJ,za.u=za["|"]=za["+"]=za.union=za.or=za.add,za["\\"]=za["!"]=za["-"]=za.difference=za.relativeComplement=za.subtract=za.not,za.n=za["&"]=za["."]=za.and=za.intersection=za.intersect,za["^"]=za["(+)"]=za["(-)"]=za.symmetricDifference=za.symdiff=za.xor,za.fnFilter=za.filterFn=za.stdFilter=za.filter,za.complement=za.abscomp=za.absoluteComplement,oAe={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},NJ=function(e,t){var r=e.cy(),i=r.hasCompoundNodes();function n(d){var p=d.pstyle("z-compound-depth");return p.value==="auto"?i?d.zDepth():0:p.value==="bottom"?-1:p.value==="top"?HB:0}var a=n(e)-n(t);if(a!==0)return a;function s(d){var p=d.pstyle("z-index-compare");return p.value==="auto"&&d.isNode()?1:0}var u=s(e)-s(t);if(u!==0)return u;var h=e.pstyle("z-index").value-t.pstyle("z-index").value;return h!==0?h:e.poolIndex()-t.poolIndex()},v8={forEach:function(e,t){if(Hs(e))for(var r=this.length,i=0;i<r;i++){var n=this[i],a=t?e.apply(t,[n,i,this]):e(n,i,this);if(a===!1)break}return this},toArray:function(){for(var e=[],t=0;t<this.length;t++)e.push(this[t]);return e},slice:function(e,t){var r=[],i=this.length;t==null&&(t=i),e==null&&(e=0),e<0&&(e=i+e),t<0&&(t=i+t);for(var n=e;n>=0&&n<t&&n<i;n++)r.push(this[n]);return this.spawn(r)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(e){if(!Hs(e))return this;var t=this.toArray().sort(e);return this.spawn(t)},sortByZIndex:function(){return this.sort(NJ)},zDepth:function(){var e=this[0];if(e){var t=e._private,r=t.group;if(r==="nodes"){var i=t.data.parent?e.parents().size():0;return e.isParent()?i:HB-1}else{var n=t.source,a=t.target,s=n.zDepth(),u=a.zDepth();return Math.max(s,u,0)}}}},v8.each=v8.forEach,lAe=function(){var e="undefined",t=(typeof Symbol>"u"?"undefined":ll(Symbol))!=e&&ll(Symbol.iterator)!=e;t&&(v8[Symbol.iterator]=function(){var r=this,i={value:void 0,done:!1},n=0,a=this.length;return zTe({next:function(){return n<a?i.value=r[n++]:(i.value=void 0,i.done=!0),i}},Symbol.iterator,function(){return this})})},lAe(),uAe=Ll({nodeDimensionsIncludeLabels:!1}),x8={layoutDimensions:function(e){e=uAe(e);var t;if(!this.takesUpSpace())t={w:0,h:0};else if(e.nodeDimensionsIncludeLabels){var r=this.boundingBox();t={w:r.w,h:r.h}}else t={w:this.outerWidth(),h:this.outerHeight()};return(t.w===0||t.h===0)&&(t.w=t.h=1),t},layoutPositions:function(e,t,r){var i=this.nodes().filter(function(M){return!M.isParent()}),n=this.cy(),a=t.eles,s=function(M){return M.id()},u=j5(r,s);e.emit({type:"layoutstart",layout:e}),e.animations=[];var h=function(M,N,B){var O={x:N.x1+N.w/2,y:N.y1+N.h/2},L={x:(B.x-O.x)*M,y:(B.y-O.y)*M};return{x:O.x+L.x,y:O.y+L.y}},d=t.spacingFactor&&t.spacingFactor!==1,p=function(){if(!d)return null;for(var M=Xu(),N=0;N<i.length;N++){var B=i[N],O=u(B,N);XCe(M,O.x,O.y)}return M},g=p(),y=j5(function(M,N){var B=u(M,N);if(d){var O=Math.abs(t.spacingFactor);B=h(O,g,B)}return t.transform!=null&&(B=t.transform(M,B)),B},s);if(t.animate){for(var m=0;m<i.length;m++){var x=i[m],_=y(x,m),E=t.animateFilter==null||t.animateFilter(x,m);if(E){var w=x.animation({position:_,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(w)}else x.position(_)}if(t.fit){var C=n.animation({fit:{boundingBox:a.boundingBoxAt(y),padding:t.padding},duration:t.animationDuration,easing:t.animationEasing});e.animations.push(C)}else if(t.zoom!==void 0&&t.pan!==void 0){var A=n.animation({zoom:t.zoom,pan:t.pan,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(A)}e.animations.forEach(function(M){return M.play()}),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),gx.all(e.animations.map(function(M){return M.promise()})).then(function(){e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e})})}else i.positions(y),t.fit&&n.fit(t.eles,t.padding),t.zoom!=null&&n.zoom(t.zoom),t.pan&&n.pan(t.pan),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){var t=this.cy();return t.makeLayout(Rn({},e,{eles:this}))}},x8.createLayout=x8.makeLayout=x8.layout,Rl={recalculateRenderedStyle:function(e){var t=this.cy(),r=t.renderer(),i=t.styleEnabled();return r&&i&&r.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e=this.cy(),t=function(i){return i._private.styleCache=null};if(e.hasCompoundNodes()){var r;r=this.spawnSelf().merge(this.descendants()).merge(this.parents()),r.merge(r.connectedEdges()),r.forEach(t)}else this.forEach(function(i){t(i),i.connectedEdges().forEach(t)});return this},updateStyle:function(e){var t=this._private.cy;if(!t.styleEnabled())return this;if(t.batching()){var r=t._private.batchStyleEles;return r.merge(this),this}var i=t.hasCompoundNodes(),n=this;e=!!(e||e===void 0),i&&(n=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var a=n;return e?a.emitAndNotify("style"):a.emit("style"),n.forEach(function(s){return s._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(e.styleEnabled())for(var t=0;t<this.length;t++){var r=this[t];r._private.styleDirty&&(r._private.styleDirty=!1,e.style().apply(r))}},parsedStyle:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this[0],i=r.cy();if(i.styleEnabled()&&r){this.cleanStyle();var n=r._private.style[e];return n??(t?i.style().getDefaultProperty(e):null)}},numericStyle:function(e){var t=this[0];if(t.cy().styleEnabled()&&t){var r=t.pstyle(e);return r.pfValue!==void 0?r.pfValue:r.value}},numericStyleUnits:function(e){var t=this[0];if(t.cy().styleEnabled()&&t)return t.pstyle(e).units},renderedStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var r=this[0];if(r)return t.style().getRenderedStyle(r,e)},style:function(e,t){var r=this.cy();if(!r.styleEnabled())return this;var i=!1,n=r.style();if(Ba(e)){var a=e;n.applyBypass(this,a,i),this.emitAndNotify("style")}else if(wn(e))if(t===void 0){var s=this[0];return s?n.getStylePropertyValue(s,e):void 0}else n.applyBypass(this,e,t,i),this.emitAndNotify("style");else if(e===void 0){var u=this[0];return u?n.getRawStyle(u):void 0}return this},removeStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var r=!1,i=t.style(),n=this;if(e===void 0)for(var a=0;a<n.length;a++){var s=n[a];i.removeAllBypasses(s,r)}else{e=e.split(/\s+/);for(var u=0;u<n.length;u++){var h=n[u];i.removeBypasses(h,e,r)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var t=e.hasCompoundNodes(),r=this[0];if(r){var i=r._private,n=r.pstyle("opacity").value;if(!t)return n;var a=i.data.parent?r.parents():null;if(a)for(var s=0;s<a.length;s++){var u=a[s],h=u.pstyle("opacity").value;n=h*n}return n}},transparent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0],r=t.cy().hasCompoundNodes();if(t)return r?t.effectiveOpacity()===0:t.pstyle("opacity").value===0},backgrounding:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0];return!!t._private.backgrounding}},vx=PB("eleTakesUpSpace",function(e){return e.pstyle("display").value==="element"&&e.width()!==0&&(e.isNode()?e.height()!==0:!0)}),Rl.takesUpSpace=FB("takesUpSpace",QZ({ok:vx})),hAe=PB("eleInteractive",function(e){return e.pstyle("events").value==="yes"&&e.pstyle("visibility").value==="visible"&&vx(e)}),cAe=PB("parentInteractive",function(e){return e.pstyle("visibility").value==="visible"&&vx(e)}),Rl.interactive=FB("interactive",QZ({ok:hAe,parentOk:cAe,edgeOkViaNode:vx})),Rl.noninteractive=function(){var e=this[0];if(e)return!e.interactive()},dAe=PB("eleVisible",function(e){return e.pstyle("visibility").value==="visible"&&e.pstyle("opacity").pfValue!==0&&vx(e)}),pAe=vx,Rl.visible=FB("visible",QZ({ok:dAe,edgeOkViaNode:pAe})),Rl.hidden=function(){var e=this[0];if(e)return!e.visible()},Rl.isBundledBezier=FB("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1}),Rl.bypass=Rl.css=Rl.style,Rl.renderedCss=Rl.renderedStyle,Rl.removeBypass=Rl.removeCss=Rl.removeStyle,Rl.pstyle=Rl.parsedStyle,ig={},$5({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"}),$5({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()||e.pannable()?!1:void 0},on:"grabify",off:"ungrabify"}),$5({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"}),$5({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"}),ig.deselect=ig.unselect,ig.grabbed=function(){var e=this[0];if(e)return e._private.grabbed},$5({field:"active",on:"activate",off:"unactivate"}),$5({field:"pannable",on:"panify",off:"unpanify"}),ig.inactive=function(){var e=this[0];if(e)return!e._private.active},Wl={},OJ=function(e){return function(t){for(var r=this,i=[],n=0;n<r.length;n++){var a=r[n];if(a.isNode()){for(var s=!1,u=a.connectedEdges(),h=0;h<u.length;h++){var d=u[h],p=d.source(),g=d.target();if(e.noIncomingEdges&&g===a&&p!==a||e.noOutgoingEdges&&p===a&&g!==a){s=!0;break}}s||i.push(a)}}return this.spawn(i,!0).filter(t)}},BJ=function(e){return function(t){for(var r=this,i=[],n=0;n<r.length;n++){var a=r[n];if(a.isNode())for(var s=a.connectedEdges(),u=0;u<s.length;u++){var h=s[u],d=h.source(),p=h.target();e.outgoing&&d===a?(i.push(h),i.push(p)):e.incoming&&p===a&&(i.push(h),i.push(d))}}return this.spawn(i,!0).filter(t)}},PJ=function(e){return function(t){for(var r=this,i=[],n={};;){var a=e.outgoing?r.outgoers():r.incomers();if(a.length===0)break;for(var s=!1,u=0;u<a.length;u++){var h=a[u],d=h.id();n[d]||(n[d]=!0,i.push(h),s=!0)}if(!s)break;r=a}return this.spawn(i,!0).filter(t)}},Wl.clearTraversalCache=function(){for(var e=0;e<this.length;e++)this[e]._private.traversalCache=null},Rn(Wl,{roots:OJ({noIncomingEdges:!0}),leaves:OJ({noOutgoingEdges:!0}),outgoers:hc(BJ({outgoing:!0}),"outgoers"),successors:PJ({outgoing:!0}),incomers:hc(BJ({incoming:!0}),"incomers"),predecessors:PJ({incoming:!0})}),Rn(Wl,{neighborhood:hc(function(e){for(var t=[],r=this.nodes(),i=0;i<r.length;i++)for(var n=r[i],a=n.connectedEdges(),s=0;s<a.length;s++){var u=a[s],h=u.source(),d=u.target(),p=n===h?d:h;p.length>0&&t.push(p[0]),t.push(u[0])}return this.spawn(t,!0).filter(e)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}}),Wl.neighbourhood=Wl.neighborhood,Wl.closedNeighbourhood=Wl.closedNeighborhood,Wl.openNeighbourhood=Wl.openNeighborhood,Rn(Wl,{source:hc(function(e){var t=this[0],r;return t&&(r=t._private.source||t.cy().collection()),r&&e?r.filter(e):r},"source"),target:hc(function(e){var t=this[0],r;return t&&(r=t._private.target||t.cy().collection()),r&&e?r.filter(e):r},"target"),sources:XTe({attr:"source"}),targets:XTe({attr:"target"})}),Rn(Wl,{edgesWith:hc(KTe(),"edgesWith"),edgesTo:hc(KTe({thisIsSrc:!0}),"edgesTo")}),Rn(Wl,{connectedEdges:hc(function(e){for(var t=[],r=this,i=0;i<r.length;i++){var n=r[i];if(n.isNode())for(var a=n._private.edges,s=0;s<a.length;s++){var u=a[s];t.push(u)}}return this.spawn(t,!0).filter(e)},"connectedEdges"),connectedNodes:hc(function(e){for(var t=[],r=this,i=0;i<r.length;i++){var n=r[i];n.isEdge()&&(t.push(n.source()[0]),t.push(n.target()[0]))}return this.spawn(t,!0).filter(e)},"connectedNodes"),parallelEdges:hc(ZTe(),"parallelEdges"),codirectedEdges:hc(ZTe({codirected:!0}),"codirectedEdges")}),Rn(Wl,{components:function(e){var t=this,r=t.cy(),i=r.collection(),n=e==null?t.nodes():e.nodes(),a=[];e!=null&&n.empty()&&(n=e.sources());var s=function(h,d){i.merge(h),n.unmerge(h),d.merge(h)};if(n.empty())return t.spawn();var u=function(){var h=r.collection();a.push(h);var d=n[0];s(d,h),t.bfs({directed:!1,roots:d,visit:function(p){return s(p,h)}}),h.forEach(function(p){p.connectedEdges().forEach(function(g){t.has(g)&&h.has(g.source())&&h.has(g.target())&&h.merge(g)})})};do u();while(n.length>0);return a},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}}),Wl.componentsOf=Wl.components,Dl=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e===void 0){no("A collection must have a reference to the core");return}var n=new Wd,a=!1;if(!t)t=[];else if(t.length>0&&Ba(t[0])&&!U5(t[0])){a=!0;for(var s=[],u=new lx,h=0,d=t.length;h<d;h++){var p=t[h];p.data==null&&(p.data={});var g=p.data;if(g.id==null)g.id=TQ();else if(e.hasElementWithId(g.id)||u.has(g.id))continue;var y=new KS(e,p,!1);s.push(y),u.add(g.id)}t=s}this.length=0;for(var m=0,x=t.length;m<x;m++){var _=t[m][0];if(_!=null){var E=_._private.data.id;(!r||!n.has(E))&&(r&&n.set(E,{index:this.length,ele:_}),this[this.length]=_,this.length++)}}this._private={eles:this,cy:e,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(w){this.lazyMap=w},rebuildMap:function(){for(var w=this.lazyMap=new Wd,C=this.eles,A=0;A<C.length;A++){var M=C[A];w.set(M.id(),{index:A,ele:M})}}},r&&(this._private.map=n),a&&!i&&this.restore()},_s=KS.prototype=Dl.prototype=Object.create(Array.prototype),_s.instanceString=function(){return"collection"},_s.spawn=function(e,t){return new Dl(this.cy(),e,t)},_s.spawnSelf=function(){return this.spawn(this)},_s.cy=function(){return this._private.cy},_s.renderer=function(){return this._private.cy.renderer()},_s.element=function(){return this[0]},_s.collection=function(){return nQ(this)?this:new Dl(this._private.cy,[this])},_s.unique=function(){return new Dl(this._private.cy,this,!0)},_s.hasElementWithId=function(e){return e=""+e,this._private.map.has(e)},_s.getElementById=function(e){e=""+e;var t=this._private.cy,r=this._private.map.get(e);return r?r.ele:new Dl(t)},_s.$id=_s.getElementById,_s.poolIndex=function(){var e=this._private.cy,t=e._private.elements,r=this[0]._private.data.id;return t._private.map.get(r).index},_s.indexOf=function(e){var t=e[0]._private.data.id;return this._private.map.get(t).index},_s.indexOfId=function(e){return e=""+e,this._private.map.get(e).index},_s.json=function(e){var t=this.element(),r=this.cy();if(t==null&&e)return this;if(t!=null){var i=t._private;if(Ba(e)){if(r.startBatch(),e.data){t.data(e.data);var n=i.data;if(t.isEdge()){var a=!1,s={},u=e.data.source,h=e.data.target;u!=null&&u!=n.source&&(s.source=""+u,a=!0),h!=null&&h!=n.target&&(s.target=""+h,a=!0),a&&(t=t.move(s))}else{var d="parent"in e.data,p=e.data.parent;d&&(p!=null||n.parent!=null)&&p!=n.parent&&(p===void 0&&(p=null),p!=null&&(p=""+p),t=t.move({parent:p}))}}e.position&&t.position(e.position);var g=function(x,_,E){var w=e[x];w!=null&&w!==i[x]&&(w?t[_]():t[E]())};return g("removed","remove","restore"),g("selected","select","unselect"),g("selectable","selectify","unselectify"),g("locked","lock","unlock"),g("grabbable","grabify","ungrabify"),g("pannable","panify","unpanify"),e.classes!=null&&t.classes(e.classes),r.endBatch(),this}else if(e===void 0){var y={data:Vd(i.data),position:Vd(i.position),group:i.group,removed:i.removed,selected:i.selected,selectable:i.selectable,locked:i.locked,grabbable:i.grabbable,pannable:i.pannable,classes:null};y.classes="";var m=0;return i.classes.forEach(function(x){return y.classes+=m++===0?x:" "+x}),y}}},_s.jsons=function(){for(var e=[],t=0;t<this.length;t++){var r=this[t],i=r.json();e.push(i)}return e},_s.clone=function(){for(var e=this.cy(),t=[],r=0;r<this.length;r++){var i=this[r],n=i.json(),a=new KS(e,n,!1);t.push(a)}return new Dl(e,t)},_s.copy=_s.clone,_s.restore=function(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this,i=r.cy(),n=i._private,a=[],s=[],u,h=0,d=r.length;h<d;h++){var p=r[h];t&&!p.removed()||(p.isNode()?a.push(p):s.push(p))}u=a.concat(s);var g,y=function(){u.splice(g,1),g--};for(g=0;g<u.length;g++){var m=u[g],x=m._private,_=x.data;if(m.clearTraversalCache(),!(!t&&!x.removed)){if(_.id===void 0)_.id=TQ();else if(Ei(_.id))_.id=""+_.id;else if(Yf(_.id)||!wn(_.id)){no("Can not create element with invalid string ID `"+_.id+"`"),y();continue}else if(i.hasElementWithId(_.id)){no("Can not create second element with ID `"+_.id+"`"),y();continue}}var E=_.id;if(m.isNode()){var w=x.position;w.x==null&&(w.x=0),w.y==null&&(w.y=0)}if(m.isEdge()){for(var C=m,A=["source","target"],M=A.length,N=!1,B=0;B<M;B++){var O=A[B],L=_[O];Ei(L)&&(L=_[O]=""+_[O]),L==null||L===""?(no("Can not create edge `"+E+"` with unspecified "+O),N=!0):i.hasElementWithId(L)||(no("Can not create edge `"+E+"` with nonexistant "+O+" `"+L+"`"),N=!0)}if(N){y();continue}var $=i.getElementById(_.source),G=i.getElementById(_.target);$.same(G)?$._private.edges.push(C):($._private.edges.push(C),G._private.edges.push(C)),C._private.source=$,C._private.target=G}x.map=new Wd,x.map.set(E,{ele:m,index:0}),x.removed=!1,t&&i.addToPool(m)}for(var z=0;z<a.length;z++){var F=a[z],X=F._private.data;Ei(X.parent)&&(X.parent=""+X.parent);var I=X.parent,j=I!=null;if(j||F._private.parent){var H=F._private.parent?i.collection().merge(F._private.parent):i.getElementById(I);if(H.empty())X.parent=void 0;else if(H[0].removed())Xa("Node added with missing parent, reference to parent removed"),X.parent=void 0,F._private.parent=null;else{for(var V=!1,P=H;!P.empty();){if(F.same(P)){V=!0,X.parent=void 0;break}P=P.parent()}V||(H[0]._private.children.push(F),F._private.parent=H[0],n.hasCompoundNodes=!0)}}}if(u.length>0){for(var q=u.length===r.length?r:new Dl(i,u),Z=0;Z<q.length;Z++){var J=q[Z];J.isNode()||(J.parallelEdges().clearTraversalCache(),J.source().clearTraversalCache(),J.target().clearTraversalCache())}var ae;n.hasCompoundNodes?ae=i.collection().merge(q).merge(q.connectedNodes()).merge(q.parent()):ae=q,ae.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(e),e?q.emitAndNotify("add"):t&&q.emit("add")}return r},_s.removed=function(){var e=this[0];return e&&e._private.removed},_s.inside=function(){var e=this[0];return e&&!e._private.removed},_s.remove=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this,i=[],n={},a=r._private.cy;function s(I){for(var j=I._private.edges,H=0;H<j.length;H++)h(j[H])}function u(I){for(var j=I._private.children,H=0;H<j.length;H++)h(j[H])}function h(I){var j=n[I.id()];t&&I.removed()||j||(n[I.id()]=!0,I.isNode()?(i.push(I),s(I),u(I)):i.unshift(I))}for(var d=0,p=r.length;d<p;d++){var g=r[d];h(g)}function y(I,j){var H=I._private.edges;Xf(H,j),I.clearTraversalCache()}function m(I){I.clearTraversalCache()}var x=[];x.ids={};function _(I,j){j=j[0],I=I[0];var H=I._private.children,V=I.id();Xf(H,j),j._private.parent=null,x.ids[V]||(x.ids[V]=!0,x.push(I))}r.dirtyCompoundBoundsCache(),t&&a.removeFromPool(i);for(var E=0;E<i.length;E++){var w=i[E];if(w.isEdge()){var C=w.source()[0],A=w.target()[0];y(C,w),y(A,w);for(var M=w.parallelEdges(),N=0;N<M.length;N++){var B=M[N];m(B),B.isBundledBezier()&&B.dirtyBoundingBoxCache()}}else{var O=w.parent();O.length!==0&&_(O,w)}t&&(w._private.removed=!0)}var L=a._private.elements;a._private.hasCompoundNodes=!1;for(var $=0;$<L.length;$++){var G=L[$];if(G.isParent()){a._private.hasCompoundNodes=!0;break}}var z=new Dl(this.cy(),i);z.size()>0&&(e?z.emitAndNotify("remove"):t&&z.emit("remove"));for(var F=0;F<x.length;F++){var X=x[F];(!t||!X.removed())&&X.updateStyle()}return z},_s.move=function(e){var t=this._private.cy,r=this,i=!1,n=!1,a=function(m){return m==null?m:""+m};if(e.source!==void 0||e.target!==void 0){var s=a(e.source),u=a(e.target),h=s!=null&&t.hasElementWithId(s),d=u!=null&&t.hasElementWithId(u);(h||d)&&(t.batch(function(){r.remove(i,n),r.emitAndNotify("moveout");for(var m=0;m<r.length;m++){var x=r[m],_=x._private.data;x.isEdge()&&(h&&(_.source=s),d&&(_.target=u))}r.restore(i,n)}),r.emitAndNotify("move"))}else if(e.parent!==void 0){var p=a(e.parent),g=p===null||t.hasElementWithId(p);if(g){var y=p===null?void 0:p;t.batch(function(){var m=r.remove(i,n);m.emitAndNotify("moveout");for(var x=0;x<r.length;x++){var _=r[x],E=_._private.data;_.isNode()&&(E.parent=y)}m.restore(i,n)}),r.emitAndNotify("move")}}return this},[ZQ,k8e,c8,tg,yx,$8e,p8,rAe,DJ,IJ,oAe,v8,x8,Rl,ig,Wl].forEach(function(e){Rn(_s,e)}),fAe={add:function(e){var t,r=this;if(bh(e)){var i=e;if(i._private.cy===r)t=i.restore();else{for(var n=[],a=0;a<i.length;a++){var s=i[a];n.push(s.json())}t=new Dl(r,n)}}else if(ps(e)){var u=e;t=new Dl(r,u)}else if(Ba(e)&&(ps(e.nodes)||ps(e.edges))){for(var h=e,d=[],p=["nodes","edges"],g=0,y=p.length;g<y;g++){var m=p[g],x=h[m];if(ps(x))for(var _=0,E=x.length;_<E;_++){var w=Rn({group:m},x[_]);d.push(w)}}t=new Dl(r,d)}else{var C=e;t=new KS(r,C).collection()}return t},remove:function(e){if(!bh(e)&&wn(e)){var t=e;e=this.$(t)}return e.remove()}},gAe=function(){function e(i){return-i.tension*i.x-i.friction*i.v}function t(i,n,a){var s={x:i.x+a.dx*n,v:i.v+a.dv*n,tension:i.tension,friction:i.friction};return{dx:s.v,dv:e(s)}}function r(i,n){var a={dx:i.v,dv:e(i)},s=t(i,n*.5,a),u=t(i,n*.5,s),h=t(i,n,u),d=1/6*(a.dx+2*(s.dx+u.dx)+h.dx),p=1/6*(a.dv+2*(s.dv+u.dv)+h.dv);return i.x=i.x+d*n,i.v=i.v+p*n,i}return function i(n,a,s){var u={x:-1,v:0,tension:null,friction:null},h=[0],d=0,p=1/1e4,g=16/1e3,y,m,x;for(n=parseFloat(n)||500,a=parseFloat(a)||20,s=s||null,u.tension=n,u.friction=a,y=s!==null,y?(d=i(n,a),m=d/s*g):m=g;x=r(x||u,m),h.push(1+x.x),d+=16,Math.abs(x.x)>p&&Math.abs(x.v)>p;);return y?function(_){return h[_*(h.length-1)|0]}:d}}(),ws=function(e,t,r,i){var n=iZe(e,t,r,i);return function(a,s,u){return a+(s-a)*n(u)}},b8={linear:function(e,t,r){return e+(t-e)*r},ease:ws(.25,.1,.25,1),"ease-in":ws(.42,0,1,1),"ease-out":ws(0,0,.58,1),"ease-in-out":ws(.42,0,.58,1),"ease-in-sine":ws(.47,0,.745,.715),"ease-out-sine":ws(.39,.575,.565,1),"ease-in-out-sine":ws(.445,.05,.55,.95),"ease-in-quad":ws(.55,.085,.68,.53),"ease-out-quad":ws(.25,.46,.45,.94),"ease-in-out-quad":ws(.455,.03,.515,.955),"ease-in-cubic":ws(.55,.055,.675,.19),"ease-out-cubic":ws(.215,.61,.355,1),"ease-in-out-cubic":ws(.645,.045,.355,1),"ease-in-quart":ws(.895,.03,.685,.22),"ease-out-quart":ws(.165,.84,.44,1),"ease-in-out-quart":ws(.77,0,.175,1),"ease-in-quint":ws(.755,.05,.855,.06),"ease-out-quint":ws(.23,1,.32,1),"ease-in-out-quint":ws(.86,0,.07,1),"ease-in-expo":ws(.95,.05,.795,.035),"ease-out-expo":ws(.19,1,.22,1),"ease-in-out-expo":ws(1,0,0,1),"ease-in-circ":ws(.6,.04,.98,.335),"ease-out-circ":ws(.075,.82,.165,1),"ease-in-out-circ":ws(.785,.135,.15,.86),spring:function(e,t,r){if(r===0)return b8.linear;var i=gAe(e,t,r);return function(n,a,s){return n+(a-n)*i(s)}},"cubic-bezier":ws},mAe={animate:Ka.animate(),animation:Ka.animation(),animated:Ka.animated(),clearQueue:Ka.clearQueue(),delay:Ka.delay(),delayAnimation:Ka.delayAnimation(),stop:Ka.stop(),addToAnimationPool:function(e){var t=this;t.styleEnabled()&&t._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,!e.styleEnabled())return;function t(){e._private.animationsRunning&&YS(function(i){eEe(i,e),t()})}var r=e.renderer();r&&r.beforeRender?r.beforeRender(function(i,n){eEe(n,e)},r.beforeRenderPriorities.animations):t()}},yAe={qualifierCompare:function(e,t){return e==null||t==null?e==null&&t==null:e.sameText(t)},eventMatches:function(e,t,r){var i=t.qualifier;return i!=null?e!==r.target&&U5(r.target)&&i.matches(r.target):!0},addEventFields:function(e,t){t.cy=e,t.target=e},callbackContext:function(e,t,r){return t.qualifier!=null?r.target:e}},_8=function(e){return wn(e)?new Jf(e):e},FJ={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new BB(yAe,this)),this},emitter:function(){return this._private.emitter},on:function(e,t,r){return this.emitter().on(e,_8(t),r),this},removeListener:function(e,t,r){return this.emitter().removeListener(e,_8(t),r),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,t,r){return this.emitter().one(e,_8(t),r),this},once:function(e,t,r){return this.emitter().one(e,_8(t),r),this},emit:function(e,t){return this.emitter().emit(e,t),this},emitAndNotify:function(e,t){return this.emit(e),this.notify(e,t),this}},Ka.eventAliasesOn(FJ),cP={png:function(e){var t=this._private.renderer;return e=e||{},t.png(e)},jpg:function(e){var t=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",t.jpg(e)}},cP.jpeg=cP.jpg,w8={layout:function(e){var t=this;if(e==null){no("Layout options must be specified to make a layout");return}if(e.name==null){no("A `name` must be specified to make a layout");return}var r=e.name,i=t.extension("layout",r);if(i==null){no("No such layout `"+r+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var n;wn(e.eles)?n=t.$(e.eles):n=e.eles!=null?e.eles:t.$();var a=new i(Rn({},e,{cy:t,eles:n}));return a}},w8.createLayout=w8.makeLayout=w8.layout,vAe={notify:function(e,t){var r=this._private;if(this.batching()){r.batchNotifications=r.batchNotifications||{};var i=r.batchNotifications[e]=r.batchNotifications[e]||this.collection();t!=null&&i.merge(t);return}if(r.notificationsEnabled){var n=this.renderer();this.destroyed()||!n||n.notify(e,t)}},notifications:function(e){var t=this._private;return e===void 0?t.notificationsEnabled:(t.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return e.batchCount==null&&(e.batchCount=0),e.batchCount===0&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(e.batchCount===0)return this;if(e.batchCount--,e.batchCount===0){e.batchStyleEles.updateStyle();var t=this.renderer();Object.keys(e.batchNotifications).forEach(function(r){var i=e.batchNotifications[r];i.empty()?t.notify(r):t.notify(r,i)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var t=this;return this.batch(function(){for(var r=Object.keys(e),i=0;i<r.length;i++){var n=r[i],a=e[n],s=t.getElementById(n);s.data(a)}})}},xAe=Ll({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),dP={renderTo:function(e,t,r,i){var n=this._private.renderer;return n.renderTo(e,t,r,i),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var t=this,r=t.extension("renderer",e.name);if(r==null){no("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}e.wheelSensitivity!==void 0&&Xa("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var i=xAe(e);i.cy=t,t._private.renderer=new r(i),this.notify("init")},destroyRenderer:function(){var e=this;e.notify("destroy");var t=e.container();if(t)for(t._cyreg=null;t.childNodes.length>0;)t.removeChild(t.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(r){var i=r._private;i.rscratch={},i.rstyle={},i.animation.current=[],i.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}},dP.invalidateDimensions=dP.resize,k8={collection:function(e,t){return wn(e)?this.$(e):bh(e)?e.collection():ps(e)?(t||(t={}),new Dl(this,e,t.unique,t.removed)):new Dl(this)},nodes:function(e){var t=this.$(function(r){return r.isNode()});return e?t.filter(e):t},edges:function(e){var t=this.$(function(r){return r.isEdge()});return e?t.filter(e):t},$:function(e){var t=this._private.elements;return e?t.filter(e):t.spawnSelf()},mutableElements:function(){return this._private.elements}},k8.elements=k8.filter=k8.$,Yl={},sw="t",bAe="f",Yl.apply=function(e){for(var t=this,r=t._private,i=r.cy,n=i.collection(),a=0;a<e.length;a++){var s=e[a],u=t.getContextMeta(s);if(!u.empty){var h=t.getContextStyle(u),d=t.applyContextStyle(u,h,s);s._private.appliedInitStyle?t.updateTransitions(s,d.diffProps):s._private.appliedInitStyle=!0;var p=t.updateStyleHints(s);p&&n.push(s)}}return n},Yl.getPropertiesDiff=function(e,t){var r=this,i=r._private.propDiffs=r._private.propDiffs||{},n=e+"-"+t,a=i[n];if(a)return a;for(var s=[],u={},h=0;h<r.length;h++){var d=r[h],p=e[h]===sw,g=t[h]===sw,y=p!==g,m=d.mappedProperties.length>0;if(y||g&&m){var x=void 0;y&&m||y?x=d.properties:m&&(x=d.mappedProperties);for(var _=0;_<x.length;_++){for(var E=x[_],w=E.name,C=!1,A=h+1;A<r.length;A++){var M=r[A],N=t[A]===sw;if(N&&(C=M.properties[E.name]!=null,C))break}!u[w]&&!C&&(u[w]=!0,s.push(w))}}}return i[n]=s,s},Yl.getContextMeta=function(e){for(var t=this,r="",i,n=e._private.styleCxtKey||"",a=0;a<t.length;a++){var s=t[a],u=s.selector&&s.selector.matches(e);u?r+=sw:r+=bAe}return i=t.getPropertiesDiff(n,r),e._private.styleCxtKey=r,{key:r,diffPropNames:i,empty:i.length===0}},Yl.getContextStyle=function(e){var t=e.key,r=this,i=this._private.contextStyles=this._private.contextStyles||{};if(i[t])return i[t];for(var n={_private:{key:t}},a=0;a<r.length;a++){var s=r[a],u=t[a]===sw;if(u)for(var h=0;h<s.properties.length;h++){var d=s.properties[h];n[d.name]=d}}return i[t]=n,n},Yl.applyContextStyle=function(e,t,r){for(var i=this,n=e.diffPropNames,a={},s=i.types,u=0;u<n.length;u++){var h=n[u],d=t[h],p=r.pstyle(h);if(!d)if(p)p.bypass?d={name:h,deleteBypassed:!0}:d={name:h,delete:!0};else continue;if(p!==d){if(d.mapped===s.fn&&p!=null&&p.mapping!=null&&p.mapping.value===d.value){var g=p.mapping,y=g.fnValue=d.value(r);if(y===g.prevFnValue)continue}var m=a[h]={prev:p};i.applyParsedProperty(r,d),m.next=r.pstyle(h),m.next&&m.next.bypass&&(m.next=m.next.bypassed)}}return{diffProps:a}},Yl.updateStyleHints=function(e){var t=e._private,r=this,i=r.propertyGroupNames,n=r.propertyGroupKeys,a=function(le,ke,pe){return r.getPropertiesHash(le,ke,pe)},s=t.styleKey;if(e.removed())return!1;var u=t.group==="nodes",h=e._private.style;i=Object.keys(h);for(var d=0;d<n.length;d++){var p=n[d];t.styleKeys[p]=[ox,Y5]}for(var g=function(le,ke){return t.styleKeys[ke][0]=q5(le,t.styleKeys[ke][0])},y=function(le,ke){return t.styleKeys[ke][1]=X5(le,t.styleKeys[ke][1])},m=function(le,ke){g(le,ke),y(le,ke)},x=function(le,ke){for(var pe=0;pe<le.length;pe++){var qe=le.charCodeAt(pe);g(qe,ke),y(qe,ke)}},_=2e9,E=function(le){return-128<le&&le<128&&Math.floor(le)!==le?_-(le*1024|0):le},w=0;w<i.length;w++){var C=i[w],A=h[C];if(A!=null){var M=this.properties[C],N=M.type,B=M.groupKey,O=void 0;M.hashOverride!=null?O=M.hashOverride(e,A):A.pfValue!=null&&(O=A.pfValue);var L=M.enums==null?A.value:null,$=O!=null,G=L!=null,z=$||G,F=A.units;if(N.number&&z&&!N.multiple){var X=$?O:L;m(E(X),B),!$&&F!=null&&x(F,B)}else x(A.strValue,B)}}for(var I=[ox,Y5],j=0;j<n.length;j++){var H=n[j],V=t.styleKeys[H];I[0]=q5(V[0],I[0]),I[1]=X5(V[1],I[1])}t.styleKey=pCe(I[0],I[1]);var P=t.styleKeys;t.labelDimsKey=qf(P.labelDimensions);var q=a(e,["label"],P.labelDimensions);if(t.labelKey=qf(q),t.labelStyleKey=qf(qS(P.commonLabel,q)),!u){var Z=a(e,["source-label"],P.labelDimensions);t.sourceLabelKey=qf(Z),t.sourceLabelStyleKey=qf(qS(P.commonLabel,Z));var J=a(e,["target-label"],P.labelDimensions);t.targetLabelKey=qf(J),t.targetLabelStyleKey=qf(qS(P.commonLabel,J))}if(u){var ae=t.styleKeys,ue=ae.nodeBody,be=ae.nodeBorder,Le=ae.nodeOutline,xe=ae.backgroundImage,Ae=ae.compound,oe=ae.pie,he=[ue,be,Le,xe,Ae,oe].filter(function(le){return le!=null}).reduce(qS,[ox,Y5]);t.nodeKey=qf(he),t.hasPie=oe!=null&&oe[0]!==ox&&oe[1]!==Y5}return s!==t.styleKey},Yl.clearStyleHints=function(e){var t=e._private;t.styleCxtKey="",t.styleKeys={},t.styleKey=null,t.labelKey=null,t.labelStyleKey=null,t.sourceLabelKey=null,t.sourceLabelStyleKey=null,t.targetLabelKey=null,t.targetLabelStyleKey=null,t.nodeKey=null,t.hasPie=null},Yl.applyParsedProperty=function(e,t){var r=this,i=t,n=e._private.style,a,s=r.types,u=r.properties[i.name].type,h=i.bypass,d=n[i.name],p=d&&d.bypass,g=e._private,y="mapping",m=function(ae){return ae==null?null:ae.pfValue!=null?ae.pfValue:ae.value},x=function(){var ae=m(d),ue=m(i);r.checkTriggers(e,i.name,ae,ue)};if(t.name==="curve-style"&&e.isEdge()&&(t.value!=="bezier"&&e.isLoop()||t.value==="haystack"&&(e.source().isParent()||e.target().isParent()))&&(i=t=this.parse(t.name,"bezier",h)),i.delete)return n[i.name]=void 0,x(),!0;if(i.deleteBypassed)return d?d.bypass?(d.bypassed=void 0,x(),!0):!1:(x(),!0);if(i.deleteBypass)return d?d.bypass?(n[i.name]=d.bypassed,x(),!0):!1:(x(),!0);var _=function(){Xa("Do not assign mappings to elements without corresponding data (i.e. ele `"+e.id()+"` has no mapping for property `"+i.name+"` with data field `"+i.field+"`); try a `["+i.field+"]` selector to limit scope to elements with `"+i.field+"` defined")};switch(i.mapped){case s.mapData:{for(var E=i.field.split("."),w=g.data,C=0;C<E.length&&w;C++){var A=E[C];w=w[A]}if(w==null)return _(),!1;var M;if(Ei(w)){var N=i.fieldMax-i.fieldMin;N===0?M=0:M=(w-i.fieldMin)/N}else return Xa("Do not use continuous mappers without specifying numeric data (i.e. `"+i.field+": "+w+"` for `"+e.id()+"` is non-numeric)"),!1;if(M<0?M=0:M>1&&(M=1),u.color){var B=i.valueMin[0],O=i.valueMax[0],L=i.valueMin[1],$=i.valueMax[1],G=i.valueMin[2],z=i.valueMax[2],F=i.valueMin[3]==null?1:i.valueMin[3],X=i.valueMax[3]==null?1:i.valueMax[3],I=[Math.round(B+(O-B)*M),Math.round(L+($-L)*M),Math.round(G+(z-G)*M),Math.round(F+(X-F)*M)];a={bypass:i.bypass,name:i.name,value:I,strValue:"rgb("+I[0]+", "+I[1]+", "+I[2]+")"}}else if(u.number){var j=i.valueMin+(i.valueMax-i.valueMin)*M;a=this.parse(i.name,j,i.bypass,y)}else return!1;if(!a)return _(),!1;a.mapping=i,i=a;break}case s.data:{for(var H=i.field.split("."),V=g.data,P=0;P<H.length&&V;P++){var q=H[P];V=V[q]}if(V!=null&&(a=this.parse(i.name,V,i.bypass,y)),!a)return _(),!1;a.mapping=i,i=a;break}case s.fn:{var Z=i.value,J=i.fnValue!=null?i.fnValue:Z(e);if(i.prevFnValue=J,J==null)return Xa("Custom function mappers may not return null (i.e. `"+i.name+"` for ele `"+e.id()+"` is null)"),!1;if(a=this.parse(i.name,J,i.bypass,y),!a)return Xa("Custom function mappers may not return invalid values for the property type (i.e. `"+i.name+"` for ele `"+e.id()+"` is invalid)"),!1;a.mapping=Vd(i),i=a;break}case void 0:break;default:return!1}return h?(p?i.bypassed=d.bypassed:i.bypassed=d,n[i.name]=i):p?d.bypassed=i:n[i.name]=i,x(),!0},Yl.cleanElements=function(e,t){for(var r=0;r<e.length;r++){var i=e[r];if(this.clearStyleHints(i),i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),!t)i._private.style={};else for(var n=i._private.style,a=Object.keys(n),s=0;s<a.length;s++){var u=a[s],h=n[u];h!=null&&(h.bypass?h.bypassed=null:n[u]=null)}}},Yl.update=function(){var e=this._private.cy,t=e.mutableElements();t.updateStyle()},Yl.updateTransitions=function(e,t){var r=this,i=e._private,n=e.pstyle("transition-property").value,a=e.pstyle("transition-duration").pfValue,s=e.pstyle("transition-delay").pfValue;if(n.length>0&&a>0){for(var u={},h=!1,d=0;d<n.length;d++){var p=n[d],g=e.pstyle(p),y=t[p];if(y){var m=y.prev,x=m,_=y.next!=null?y.next:g,E=!1,w=void 0,C=1e-6;x&&(Ei(x.pfValue)&&Ei(_.pfValue)?(E=_.pfValue-x.pfValue,w=x.pfValue+C*E):Ei(x.value)&&Ei(_.value)?(E=_.value-x.value,w=x.value+C*E):ps(x.value)&&ps(_.value)&&(E=x.value[0]!==_.value[0]||x.value[1]!==_.value[1]||x.value[2]!==_.value[2],w=x.strValue),E&&(u[p]=_.strValue,this.applyBypass(e,p,w),h=!0))}}if(!h)return;i.transitioning=!0,new gx(function(A){s>0?e.delayAnimation(s).play().promise().then(A):A()}).then(function(){return e.animation({style:u,duration:a,easing:e.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){r.removeBypasses(e,n),e.emitAndNotify("style"),i.transitioning=!1})}else i.transitioning&&(this.removeBypasses(e,n),e.emitAndNotify("style"),i.transitioning=!1)},Yl.checkTrigger=function(e,t,r,i,n,a){var s=this.properties[t],u=n(s);u!=null&&u(r,i)&&a(s)},Yl.checkZOrderTrigger=function(e,t,r,i){var n=this;this.checkTrigger(e,t,r,i,function(a){return a.triggersZOrder},function(){n._private.cy.notify("zorder",e)})},Yl.checkBoundsTrigger=function(e,t,r,i){this.checkTrigger(e,t,r,i,function(n){return n.triggersBounds},function(n){e.dirtyCompoundBoundsCache(),e.dirtyBoundingBoxCache(),n.triggersBoundsOfParallelBeziers&&t==="curve-style"&&(r==="bezier"||i==="bezier")&&e.parallelEdges().forEach(function(a){a.isBundledBezier()&&a.dirtyBoundingBoxCache()}),n.triggersBoundsOfConnectedEdges&&t==="display"&&(r==="none"||i==="none")&&e.connectedEdges().forEach(function(a){a.dirtyBoundingBoxCache()})})},Yl.checkTriggers=function(e,t,r,i){e.dirtyStyleCache(),this.checkZOrderTrigger(e,t,r,i),this.checkBoundsTrigger(e,t,r,i)},ow={},ow.applyBypass=function(e,t,r,i){var n=this,a=[],s=!0;if(t==="*"||t==="**"){if(r!==void 0)for(var u=0;u<n.properties.length;u++){var h=n.properties[u],d=h.name,p=this.parse(d,r,!0);p&&a.push(p)}}else if(wn(t)){var g=this.parse(t,r,!0);g&&a.push(g)}else if(Ba(t)){var y=t;i=r;for(var m=Object.keys(y),x=0;x<m.length;x++){var _=m[x],E=y[_];if(E===void 0&&(E=y[HS(_)]),E!==void 0){var w=this.parse(_,E,!0);w&&a.push(w)}}}else return!1;if(a.length===0)return!1;for(var C=!1,A=0;A<e.length;A++){for(var M=e[A],N={},B=void 0,O=0;O<a.length;O++){var L=a[O];if(i){var $=M.pstyle(L.name);B=N[L.name]={prev:$}}C=this.applyParsedProperty(M,Vd(L))||C,i&&(B.next=M.pstyle(L.name))}C&&this.updateStyleHints(M),i&&this.updateTransitions(M,N,s)}return C},ow.overrideBypass=function(e,t,r){t=GB(t);for(var i=0;i<e.length;i++){var n=e[i],a=n._private.style[t],s=this.properties[t].type,u=s.color,h=s.mutiple,d=a?a.pfValue!=null?a.pfValue:a.value:null;!a||!a.bypass?this.applyBypass(n,t,r):(a.value=r,a.pfValue!=null&&(a.pfValue=r),u?a.strValue="rgb("+r.join(",")+")":h?a.strValue=r.join(" "):a.strValue=""+r,this.updateStyleHints(n)),this.checkTriggers(n,t,d,r)}},ow.removeAllBypasses=function(e,t){return this.removeBypasses(e,this.propertyNames,t)},ow.removeBypasses=function(e,t,r){for(var i=!0,n=0;n<e.length;n++){for(var a=e[n],s={},u=0;u<t.length;u++){var h=t[u],d=this.properties[h],p=a.pstyle(d.name);if(!(!p||!p.bypass)){var g="",y=this.parse(h,g,!0),m=s[d.name]={prev:p};this.applyParsedProperty(a,y),m.next=a.pstyle(d.name)}}this.updateStyleHints(a),r&&this.updateTransitions(a,s,i)}},pP={},pP.getEmSizeInPixels=function(){var e=this.containerCss("font-size");return e!=null?parseFloat(e):1},pP.containerCss=function(e){var t=this._private.cy,r=t.container(),i=t.window();if(i&&r&&i.getComputedStyle)return i.getComputedStyle(r).getPropertyValue(e)},qd={},qd.getRenderedStyle=function(e,t){return t?this.getStylePropertyValue(e,t,!0):this.getRawStyle(e,!0)},qd.getRawStyle=function(e,t){var r=this;if(e=e[0],e){for(var i={},n=0;n<r.properties.length;n++){var a=r.properties[n],s=r.getStylePropertyValue(e,a.name,t);s!=null&&(i[a.name]=s,i[HS(a.name)]=s)}return i}},qd.getIndexedStyle=function(e,t,r,i){var n=e.pstyle(t)[r][i];return n??e.cy().style().getDefaultProperty(t)[r][0]},qd.getStylePropertyValue=function(e,t,r){var i=this;if(e=e[0],e){var n=i.properties[t];n.alias&&(n=n.pointsTo);var a=n.type,s=e.pstyle(n.name);if(s){var u=s.value,h=s.units,d=s.strValue;if(r&&a.number&&u!=null&&Ei(u)){var p=e.cy().zoom(),g=function(_){return _*p},y=function(_,E){return g(_)+E},m=ps(u),x=m?h.every(function(_){return _!=null}):h!=null;return x?m?u.map(function(_,E){return y(_,h[E])}).join(" "):y(u,h):m?u.map(function(_){return wn(_)?_:""+g(_)}).join(" "):""+g(u)}else if(d!=null)return d}return null}},qd.getAnimationStartStyle=function(e,t){for(var r={},i=0;i<t.length;i++){var n=t[i],a=n.name,s=e.pstyle(a);s!==void 0&&(Ba(s)?s=this.parse(a,s.strValue):s=this.parse(a,s)),s&&(r[a]=s)}return r},qd.getPropsList=function(e){var t=this,r=[],i=e,n=t.properties;if(i)for(var a=Object.keys(i),s=0;s<a.length;s++){var u=a[s],h=i[u],d=n[u]||n[GB(u)],p=this.parse(d.name,h);p&&r.push(p)}return r},qd.getNonDefaultPropertiesHash=function(e,t,r){var i=r.slice(),n,a,s,u,h,d;for(h=0;h<t.length;h++)if(n=t[h],a=e.pstyle(n,!1),a!=null)if(a.pfValue!=null)i[0]=q5(u,i[0]),i[1]=X5(u,i[1]);else for(s=a.strValue,d=0;d<s.length;d++)u=s.charCodeAt(d),i[0]=q5(u,i[0]),i[1]=X5(u,i[1]);return i},qd.getPropertiesHash=qd.getNonDefaultPropertiesHash,T8={},T8.appendFromJson=function(e){for(var t=this,r=0;r<e.length;r++){var i=e[r],n=i.selector,a=i.style||i.css,s=Object.keys(a);t.selector(n);for(var u=0;u<s.length;u++){var h=s[u],d=a[h];t.css(h,d)}}return t},T8.fromJson=function(e){var t=this;return t.resetToDefault(),t.appendFromJson(e),t},T8.json=function(){for(var e=[],t=this.defaultLength;t<this.length;t++){for(var r=this[t],i=r.selector,n=r.properties,a={},s=0;s<n.length;s++){var u=n[s];a[u.name]=u.strValue}e.push({selector:i?i.toString():"core",style:a})}return e},fP={},fP.appendFromString=function(e){var t=this,r=this,i=""+e,n,a,s;i=i.replace(/[/][*](\s|.)+?[*][/]/g,"");function u(){i.length>n.length?i=i.substr(n.length):i=""}function h(){a.length>s.length?a=a.substr(s.length):a=""}for(;;){var d=i.match(/^\s*$/);if(d)break;var p=i.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!p){Xa("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+i);break}n=p[0];var g=p[1];if(g!=="core"){var y=new Jf(g);if(y.invalid){Xa("Skipping parsing of block: Invalid selector found in string stylesheet: "+g),u();continue}}var m=p[2],x=!1;a=m;for(var _=[];;){var E=a.match(/^\s*$/);if(E)break;var w=a.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!w){Xa("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+m),x=!0;break}s=w[0];var C=w[1],A=w[2],M=t.properties[C];if(!M){Xa("Skipping property: Invalid property name in: "+s),h();continue}var N=r.parse(C,A);if(!N){Xa("Skipping property: Invalid property definition in: "+s),h();continue}_.push({name:C,val:A}),h()}if(x){u();break}r.selector(g);for(var B=0;B<_.length;B++){var O=_[B];r.css(O.name,O.val)}u()}return r},fP.fromString=function(e){var t=this;return t.resetToDefault(),t.appendFromString(e),t},Il={},function(){var e=Xo,t=SEe,r=MEe,i=LEe,n=REe,a=function(oe){return"^"+oe+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},s=function(oe){var he=e+"|\\w+|"+t+"|"+r+"|"+i+"|"+n;return"^"+oe+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+e+")\\s*\\,\\s*("+e+")\\s*,\\s*("+he+")\\s*\\,\\s*("+he+")\\)$"},u=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];Il.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:a("data")},layoutData:{mapping:!0,regex:a("layoutData")},scratch:{mapping:!0,regex:a("scratch")},mapData:{mapping:!0,regex:s("mapData")},mapLayoutData:{mapping:!0,regex:s("mapLayoutData")},mapScratch:{mapping:!0,regex:s("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:u,singleRegexMatchValue:!0},urls:{regexes:u,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(oe,he){switch(oe.length){case 2:return he[0]!=="deg"&&he[0]!=="rad"&&he[1]!=="deg"&&he[1]!=="rad";case 1:return wn(oe[0])||he[0]==="deg"||he[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(oe){var he=oe.length;return he===1||he===2||he===4}}};var h={zeroNonZero:function(oe,he){return(oe==null||he==null)&&oe!==he||oe==0&&he!=0?!0:oe!=0&&he==0},any:function(oe,he){return oe!=he},emptyNonEmpty:function(oe,he){var le=Yf(oe),ke=Yf(he);return le&&!ke||!le&&ke}},d=Il.types,p=[{name:"label",type:d.text,triggersBounds:h.any,triggersZOrder:h.emptyNonEmpty},{name:"text-rotation",type:d.textRotation,triggersBounds:h.any},{name:"text-margin-x",type:d.bidirectionalSize,triggersBounds:h.any},{name:"text-margin-y",type:d.bidirectionalSize,triggersBounds:h.any}],g=[{name:"source-label",type:d.text,triggersBounds:h.any},{name:"source-text-rotation",type:d.textRotation,triggersBounds:h.any},{name:"source-text-margin-x",type:d.bidirectionalSize,triggersBounds:h.any},{name:"source-text-margin-y",type:d.bidirectionalSize,triggersBounds:h.any},{name:"source-text-offset",type:d.size,triggersBounds:h.any}],y=[{name:"target-label",type:d.text,triggersBounds:h.any},{name:"target-text-rotation",type:d.textRotation,triggersBounds:h.any},{name:"target-text-margin-x",type:d.bidirectionalSize,triggersBounds:h.any},{name:"target-text-margin-y",type:d.bidirectionalSize,triggersBounds:h.any},{name:"target-text-offset",type:d.size,triggersBounds:h.any}],m=[{name:"font-family",type:d.fontFamily,triggersBounds:h.any},{name:"font-style",type:d.fontStyle,triggersBounds:h.any},{name:"font-weight",type:d.fontWeight,triggersBounds:h.any},{name:"font-size",type:d.size,triggersBounds:h.any},{name:"text-transform",type:d.textTransform,triggersBounds:h.any},{name:"text-wrap",type:d.textWrap,triggersBounds:h.any},{name:"text-overflow-wrap",type:d.textOverflowWrap,triggersBounds:h.any},{name:"text-max-width",type:d.size,triggersBounds:h.any},{name:"text-outline-width",type:d.size,triggersBounds:h.any},{name:"line-height",type:d.positiveNumber,triggersBounds:h.any}],x=[{name:"text-valign",type:d.valign,triggersBounds:h.any},{name:"text-halign",type:d.halign,triggersBounds:h.any},{name:"color",type:d.color},{name:"text-outline-color",type:d.color},{name:"text-outline-opacity",type:d.zeroOneNumber},{name:"text-background-color",type:d.color},{name:"text-background-opacity",type:d.zeroOneNumber},{name:"text-background-padding",type:d.size,triggersBounds:h.any},{name:"text-border-opacity",type:d.zeroOneNumber},{name:"text-border-color",type:d.color},{name:"text-border-width",type:d.size,triggersBounds:h.any},{name:"text-border-style",type:d.borderStyle,triggersBounds:h.any},{name:"text-background-shape",type:d.textBackgroundShape,triggersBounds:h.any},{name:"text-justification",type:d.justification}],_=[{name:"events",type:d.bool,triggersZOrder:h.any},{name:"text-events",type:d.bool,triggersZOrder:h.any}],E=[{name:"display",type:d.display,triggersZOrder:h.any,triggersBounds:h.any,triggersBoundsOfConnectedEdges:!0},{name:"visibility",type:d.visibility,triggersZOrder:h.any},{name:"opacity",type:d.zeroOneNumber,triggersZOrder:h.zeroNonZero},{name:"text-opacity",type:d.zeroOneNumber},{name:"min-zoomed-font-size",type:d.size},{name:"z-compound-depth",type:d.zCompoundDepth,triggersZOrder:h.any},{name:"z-index-compare",type:d.zIndexCompare,triggersZOrder:h.any},{name:"z-index",type:d.number,triggersZOrder:h.any}],w=[{name:"overlay-padding",type:d.size,triggersBounds:h.any},{name:"overlay-color",type:d.color},{name:"overlay-opacity",type:d.zeroOneNumber,triggersBounds:h.zeroNonZero},{name:"overlay-shape",type:d.overlayShape,triggersBounds:h.any},{name:"overlay-corner-radius",type:d.cornerRadius}],C=[{name:"underlay-padding",type:d.size,triggersBounds:h.any},{name:"underlay-color",type:d.color},{name:"underlay-opacity",type:d.zeroOneNumber,triggersBounds:h.zeroNonZero},{name:"underlay-shape",type:d.overlayShape,triggersBounds:h.any},{name:"underlay-corner-radius",type:d.cornerRadius}],A=[{name:"transition-property",type:d.propList},{name:"transition-duration",type:d.time},{name:"transition-delay",type:d.time},{name:"transition-timing-function",type:d.easing}],M=function(oe,he){return he.value==="label"?-oe.poolIndex():he.pfValue},N=[{name:"height",type:d.nodeSize,triggersBounds:h.any,hashOverride:M},{name:"width",type:d.nodeSize,triggersBounds:h.any,hashOverride:M},{name:"shape",type:d.nodeShape,triggersBounds:h.any},{name:"shape-polygon-points",type:d.polygonPointList,triggersBounds:h.any},{name:"corner-radius",type:d.cornerRadius},{name:"background-color",type:d.color},{name:"background-fill",type:d.fill},{name:"background-opacity",type:d.zeroOneNumber},{name:"background-blacken",type:d.nOneOneNumber},{name:"background-gradient-stop-colors",type:d.colors},{name:"background-gradient-stop-positions",type:d.percentages},{name:"background-gradient-direction",type:d.gradientDirection},{name:"padding",type:d.sizeMaybePercent,triggersBounds:h.any},{name:"padding-relative-to",type:d.paddingRelativeTo,triggersBounds:h.any},{name:"bounds-expansion",type:d.boundsExpansion,triggersBounds:h.any}],B=[{name:"border-color",type:d.color},{name:"border-opacity",type:d.zeroOneNumber},{name:"border-width",type:d.size,triggersBounds:h.any},{name:"border-style",type:d.borderStyle},{name:"border-cap",type:d.lineCap},{name:"border-join",type:d.lineJoin},{name:"border-dash-pattern",type:d.numbers},{name:"border-dash-offset",type:d.number},{name:"border-position",type:d.linePosition}],O=[{name:"outline-color",type:d.color},{name:"outline-opacity",type:d.zeroOneNumber},{name:"outline-width",type:d.size,triggersBounds:h.any},{name:"outline-style",type:d.borderStyle},{name:"outline-offset",type:d.size,triggersBounds:h.any}],L=[{name:"background-image",type:d.urls},{name:"background-image-crossorigin",type:d.bgCrossOrigin},{name:"background-image-opacity",type:d.zeroOneNumbers},{name:"background-image-containment",type:d.bgContainment},{name:"background-image-smoothing",type:d.bools},{name:"background-position-x",type:d.bgPos},{name:"background-position-y",type:d.bgPos},{name:"background-width-relative-to",type:d.bgRelativeTo},{name:"background-height-relative-to",type:d.bgRelativeTo},{name:"background-repeat",type:d.bgRepeat},{name:"background-fit",type:d.bgFit},{name:"background-clip",type:d.bgClip},{name:"background-width",type:d.bgWH},{name:"background-height",type:d.bgWH},{name:"background-offset-x",type:d.bgPos},{name:"background-offset-y",type:d.bgPos}],$=[{name:"position",type:d.position,triggersBounds:h.any},{name:"compound-sizing-wrt-labels",type:d.compoundIncludeLabels,triggersBounds:h.any},{name:"min-width",type:d.size,triggersBounds:h.any},{name:"min-width-bias-left",type:d.sizeMaybePercent,triggersBounds:h.any},{name:"min-width-bias-right",type:d.sizeMaybePercent,triggersBounds:h.any},{name:"min-height",type:d.size,triggersBounds:h.any},{name:"min-height-bias-top",type:d.sizeMaybePercent,triggersBounds:h.any},{name:"min-height-bias-bottom",type:d.sizeMaybePercent,triggersBounds:h.any}],G=[{name:"line-style",type:d.lineStyle},{name:"line-color",type:d.color},{name:"line-fill",type:d.fill},{name:"line-cap",type:d.lineCap},{name:"line-opacity",type:d.zeroOneNumber},{name:"line-dash-pattern",type:d.numbers},{name:"line-dash-offset",type:d.number},{name:"line-outline-width",type:d.size},{name:"line-outline-color",type:d.color},{name:"line-gradient-stop-colors",type:d.colors},{name:"line-gradient-stop-positions",type:d.percentages},{name:"curve-style",type:d.curveStyle,triggersBounds:h.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:d.zeroOneNumber,triggersBounds:h.any},{name:"source-endpoint",type:d.edgeEndpoint,triggersBounds:h.any},{name:"target-endpoint",type:d.edgeEndpoint,triggersBounds:h.any},{name:"control-point-step-size",type:d.size,triggersBounds:h.any},{name:"control-point-distances",type:d.bidirectionalSizes,triggersBounds:h.any},{name:"control-point-weights",type:d.numbers,triggersBounds:h.any},{name:"segment-distances",type:d.bidirectionalSizes,triggersBounds:h.any},{name:"segment-weights",type:d.numbers,triggersBounds:h.any},{name:"segment-radii",type:d.numbers,triggersBounds:h.any},{name:"radius-type",type:d.radiusType,triggersBounds:h.any},{name:"taxi-turn",type:d.bidirectionalSizeMaybePercent,triggersBounds:h.any},{name:"taxi-turn-min-distance",type:d.size,triggersBounds:h.any},{name:"taxi-direction",type:d.axisDirection,triggersBounds:h.any},{name:"taxi-radius",type:d.number,triggersBounds:h.any},{name:"edge-distances",type:d.edgeDistances,triggersBounds:h.any},{name:"arrow-scale",type:d.positiveNumber,triggersBounds:h.any},{name:"loop-direction",type:d.angle,triggersBounds:h.any},{name:"loop-sweep",type:d.angle,triggersBounds:h.any},{name:"source-distance-from-node",type:d.size,triggersBounds:h.any},{name:"target-distance-from-node",type:d.size,triggersBounds:h.any}],z=[{name:"ghost",type:d.bool,triggersBounds:h.any},{name:"ghost-offset-x",type:d.bidirectionalSize,triggersBounds:h.any},{name:"ghost-offset-y",type:d.bidirectionalSize,triggersBounds:h.any},{name:"ghost-opacity",type:d.zeroOneNumber}],F=[{name:"selection-box-color",type:d.color},{name:"selection-box-opacity",type:d.zeroOneNumber},{name:"selection-box-border-color",type:d.color},{name:"selection-box-border-width",type:d.size},{name:"active-bg-color",type:d.color},{name:"active-bg-opacity",type:d.zeroOneNumber},{name:"active-bg-size",type:d.size},{name:"outside-texture-bg-color",type:d.color},{name:"outside-texture-bg-opacity",type:d.zeroOneNumber}],X=[];Il.pieBackgroundN=16,X.push({name:"pie-size",type:d.sizeMaybePercent});for(var I=1;I<=Il.pieBackgroundN;I++)X.push({name:"pie-"+I+"-background-color",type:d.color}),X.push({name:"pie-"+I+"-background-size",type:d.percent}),X.push({name:"pie-"+I+"-background-opacity",type:d.zeroOneNumber});var j=[],H=Il.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:d.arrowShape,triggersBounds:h.any},{name:"arrow-color",type:d.color},{name:"arrow-fill",type:d.arrowFill},{name:"arrow-width",type:d.arrowWidth}].forEach(function(oe){H.forEach(function(he){var le=he+"-"+oe.name,ke=oe.type,pe=oe.triggersBounds;j.push({name:le,type:ke,triggersBounds:pe})})},{});var V=Il.properties=[].concat(_,A,E,w,C,z,x,m,p,g,y,N,B,O,L,X,$,G,j,F),P=Il.propertyGroups={behavior:_,transition:A,visibility:E,overlay:w,underlay:C,ghost:z,commonLabel:x,labelDimensions:m,mainLabel:p,sourceLabel:g,targetLabel:y,nodeBody:N,nodeBorder:B,nodeOutline:O,backgroundImage:L,pie:X,compound:$,edgeLine:G,edgeArrow:j,core:F},q=Il.propertyGroupNames={},Z=Il.propertyGroupKeys=Object.keys(P);Z.forEach(function(oe){q[oe]=P[oe].map(function(he){return he.name}),P[oe].forEach(function(he){return he.groupKey=oe})});var J=Il.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];Il.propertyNames=V.map(function(oe){return oe.name});for(var ae=0;ae<V.length;ae++){var ue=V[ae];V[ue.name]=ue}for(var be=0;be<J.length;be++){var Le=J[be],xe=V[Le.pointsTo],Ae={name:Le.name,alias:!0,pointsTo:xe};V.push(Ae),V[Le.name]=Ae}}(),Il.getDefaultProperty=function(e){return this.getDefaultProperties()[e]},Il.getDefaultProperties=function(){var e=this._private;if(e.defaultProperties!=null)return e.defaultProperties;for(var t=Rn({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(h,d){for(var p=1;p<=Il.pieBackgroundN;p++){var g=d.name.replace("{{i}}",p),y=d.value;h[g]=y}return h},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(h,d){return Il.arrowPrefixes.forEach(function(p){var g=p+"-"+d.name,y=d.value;h[g]=y}),h},{})),r={},i=0;i<this.properties.length;i++){var n=this.properties[i];if(!n.pointsTo){var a=n.name,s=t[a],u=this.parse(a,s);r[a]=u}}return e.defaultProperties=r,e.defaultProperties},Il.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length},E8={},E8.parse=function(e,t,r,i){var n=this;if(Hs(t))return n.parseImplWarn(e,t,r,i);var a=i==="mapping"||i===!0||i===!1||i==null?"dontcare":i,s=r?"t":"f",u=""+t,h=xQ(e,u,s,a),d=n.propCache=n.propCache||[],p;return(p=d[h])||(p=d[h]=n.parseImplWarn(e,t,r,i)),(r||i==="mapping")&&(p=Vd(p),p&&(p.value=Vd(p.value))),p},E8.parseImplWarn=function(e,t,r,i){var n=this.parseImpl(e,t,r,i);return!n&&t!=null&&Xa("The style property `".concat(e,": ").concat(t,"` is invalid")),n&&(n.name==="width"||n.name==="height")&&t==="label"&&Xa("The style value of `label` is deprecated for `"+n.name+"`"),n},E8.parseImpl=function(e,t,r,i){var n=this;e=GB(e);var a=n.properties[e],s=t,u=n.types;if(!a||t===void 0)return null;a.alias&&(a=a.pointsTo,e=a.name);var h=wn(t);h&&(t=t.trim());var d=a.type;if(!d)return null;if(r&&(t===""||t===null))return{name:e,value:t,bypass:!0,deleteBypass:!0};if(Hs(t))return{name:e,value:t,strValue:"fn",mapped:u.fn,bypass:r};var p,g;if(!(!h||i||t.length<7||t[1]!=="a")){if(t.length>=7&&t[0]==="d"&&(p=new RegExp(u.data.regex).exec(t))){if(r)return!1;var y=u.data;return{name:e,value:p,strValue:""+t,mapped:y,field:p[1],bypass:r}}else if(t.length>=10&&t[0]==="m"&&(g=new RegExp(u.mapData.regex).exec(t))){if(r||d.multiple)return!1;var m=u.mapData;if(!(d.color||d.number))return!1;var x=this.parse(e,g[4]);if(!x||x.mapped)return!1;var _=this.parse(e,g[5]);if(!_||_.mapped)return!1;if(x.pfValue===_.pfValue||x.strValue===_.strValue)return Xa("`"+e+": "+t+"` is not a valid mapper because the output range is zero; converting to `"+e+": "+x.strValue+"`"),this.parse(e,x.strValue);if(d.color){var E=x.value,w=_.value,C=E[0]===w[0]&&E[1]===w[1]&&E[2]===w[2]&&(E[3]===w[3]||(E[3]==null||E[3]===1)&&(w[3]==null||w[3]===1));if(C)return!1}return{name:e,value:g,strValue:""+t,mapped:m,field:g[1],fieldMin:parseFloat(g[2]),fieldMax:parseFloat(g[3]),valueMin:x.value,valueMax:_.value,bypass:r}}}if(d.multiple&&i!=="multiple"){var A;if(h?A=t.split(/\s+/):ps(t)?A=t:A=[t],d.evenMultiple&&A.length%2!==0)return null;for(var M=[],N=[],B=[],O="",L=!1,$=0;$<A.length;$++){var G=n.parse(e,A[$],r,"multiple");L=L||wn(G.value),M.push(G.value),B.push(G.pfValue!=null?G.pfValue:G.value),N.push(G.units),O+=($>0?" ":"")+G.strValue}return d.validate&&!d.validate(M,N)?null:d.singleEnum&&L?M.length===1&&wn(M[0])?{name:e,value:M[0],strValue:M[0],bypass:r}:null:{name:e,value:M,pfValue:B,strValue:O,bypass:r,units:N}}var z=function(){for(var oe=0;oe<d.enums.length;oe++){var he=d.enums[oe];if(he===t)return{name:e,value:t,strValue:""+t,bypass:r}}return null};if(d.number){var F,X="px";if(d.units&&(F=d.units),d.implicitUnits&&(X=d.implicitUnits),!d.unitless)if(h){var I="px|em"+(d.allowPercent?"|\\%":"");F&&(I=F);var j=t.match("^("+Xo+")("+I+")?$");j&&(t=j[1],F=j[2]||X)}else(!F||d.implicitUnits)&&(F=X);if(t=parseFloat(t),isNaN(t)&&d.enums===void 0)return null;if(isNaN(t)&&d.enums!==void 0)return t=s,z();if(d.integer&&!bEe(t)||d.min!==void 0&&(t<d.min||d.strictMin&&t===d.min)||d.max!==void 0&&(t>d.max||d.strictMax&&t===d.max))return null;var H={name:e,value:t,strValue:""+t+(F||""),units:F,bypass:r};return d.unitless||F!=="px"&&F!=="em"?H.pfValue=t:H.pfValue=F==="px"||!F?t:this.getEmSizeInPixels()*t,(F==="ms"||F==="s")&&(H.pfValue=F==="ms"?t:1e3*t),(F==="deg"||F==="rad")&&(H.pfValue=F==="rad"?t:jCe(t)),F==="%"&&(H.pfValue=t/100),H}else if(d.propList){var V=[],P=""+t;if(P!=="none"){for(var q=P.split(/\s*,\s*|\s+/),Z=0;Z<q.length;Z++){var J=q[Z].trim();n.properties[J]?V.push(J):Xa("`"+J+"` is not a valid property name")}if(V.length===0)return null}return{name:e,value:V,strValue:V.length===0?"none":V.join(" "),bypass:r}}else if(d.color){var ae=PEe(t);return ae?{name:e,value:ae,pfValue:ae,strValue:"rgb("+ae[0]+","+ae[1]+","+ae[2]+")",bypass:r}:null}else if(d.regex||d.regexes){if(d.enums){var ue=z();if(ue)return ue}for(var be=d.regexes?d.regexes:[d.regex],Le=0;Le<be.length;Le++){var xe=new RegExp(be[Le]),Ae=xe.exec(t);if(Ae)return{name:e,value:d.singleRegexMatchValue?Ae[1]:Ae,strValue:""+t,bypass:r}}return null}else return d.string?{name:e,value:""+t,strValue:""+t,bypass:r}:d.enums?z():null},ql=function e(t){if(!(this instanceof e))return new e(t);if(!zB(t)){no("A style must have a core reference");return}this._private={cy:t,coreStyle:{}},this.length=0,this.resetToDefault()},Xl=ql.prototype,Xl.instanceString=function(){return"style"},Xl.clear=function(){for(var e=this._private,t=e.cy,r=t.elements(),i=0;i<this.length;i++)this[i]=void 0;return this.length=0,e.contextStyles={},e.propDiffs={},this.cleanElements(r,!0),r.forEach(function(n){var a=n[0]._private;a.styleDirty=!0,a.appliedInitStyle=!1}),this},Xl.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},Xl.core=function(e){return this._private.coreStyle[e]||this.getDefaultProperty(e)},Xl.selector=function(e){var t=e==="core"?null:new Jf(e),r=this.length++;return this[r]={selector:t,properties:[],mappedProperties:[],index:r},this},Xl.css=function(){var e=this,t=arguments;if(t.length===1)for(var r=t[0],i=0;i<e.properties.length;i++){var n=e.properties[i],a=r[n.name];a===void 0&&(a=r[HS(n.name)]),a!==void 0&&this.cssRule(n.name,a)}else t.length===2&&this.cssRule(t[0],t[1]);return this},Xl.style=Xl.css,Xl.cssRule=function(e,t){var r=this.parse(e,t);if(r){var i=this.length-1;this[i].properties.push(r),this[i].properties[r.name]=r,r.name.match(/pie-(\d+)-background-size/)&&r.value&&(this._private.hasPie=!0),r.mapped&&this[i].mappedProperties.push(r);var n=!this[i].selector;n&&(this._private.coreStyle[r.name]=r)}return this},Xl.append=function(e){return aQ(e)?e.appendToStyle(this):ps(e)?this.appendFromJson(e):wn(e)&&this.appendFromString(e),this},ql.fromJson=function(e,t){var r=new ql(e);return r.fromJson(t),r},ql.fromString=function(e,t){return new ql(e).fromString(t)},[Yl,ow,pP,qd,T8,fP,Il,E8].forEach(function(e){Rn(Xl,e)}),ql.types=Xl.types,ql.properties=Xl.properties,ql.propertyGroups=Xl.propertyGroups,ql.propertyGroupNames=Xl.propertyGroupNames,ql.propertyGroupKeys=Xl.propertyGroupKeys,_Ae={style:function(e){if(e){var t=this.setStyle(e);t.update()}return this._private.style},setStyle:function(e){var t=this._private;return aQ(e)?t.style=e.generateStyle(this):ps(e)?t.style=ql.fromJson(this,e):wn(e)?t.style=ql.fromString(this,e):t.style=ql(this),t.style},updateStyle:function(){this.mutableElements().updateStyle()}},wAe="single",Km={autolock:function(e){if(e!==void 0)this._private.autolock=!!e;else return this._private.autolock;return this},autoungrabify:function(e){if(e!==void 0)this._private.autoungrabify=!!e;else return this._private.autoungrabify;return this},autounselectify:function(e){if(e!==void 0)this._private.autounselectify=!!e;else return this._private.autounselectify;return this},selectionType:function(e){var t=this._private;if(t.selectionType==null&&(t.selectionType=wAe),e!==void 0)(e==="additive"||e==="single")&&(t.selectionType=e);else return t.selectionType;return this},panningEnabled:function(e){if(e!==void 0)this._private.panningEnabled=!!e;else return this._private.panningEnabled;return this},userPanningEnabled:function(e){if(e!==void 0)this._private.userPanningEnabled=!!e;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(e){if(e!==void 0)this._private.zoomingEnabled=!!e;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(e){if(e!==void 0)this._private.userZoomingEnabled=!!e;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(e){if(e!==void 0)this._private.boxSelectionEnabled=!!e;else return this._private.boxSelectionEnabled;return this},pan:function(){var e=arguments,t=this._private.pan,r,i,n,a,s;switch(e.length){case 0:return t;case 1:if(wn(e[0]))return r=e[0],t[r];if(Ba(e[0])){if(!this._private.panningEnabled)return this;n=e[0],a=n.x,s=n.y,Ei(a)&&(t.x=a),Ei(s)&&(t.y=s),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;r=e[0],i=e[1],(r==="x"||r==="y")&&Ei(i)&&(t[r]=i),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(e,t){var r=arguments,i=this._private.pan,n,a,s,u,h;if(!this._private.panningEnabled)return this;switch(r.length){case 1:Ba(e)&&(s=r[0],u=s.x,h=s.y,Ei(u)&&(i.x+=u),Ei(h)&&(i.y+=h),this.emit("pan viewport"));break;case 2:n=e,a=t,(n==="x"||n==="y")&&Ei(a)&&(i[n]+=a),this.emit("pan viewport");break}return this.notify("viewport"),this},fit:function(e,t){var r=this.getFitViewport(e,t);if(r){var i=this._private;i.zoom=r.zoom,i.pan=r.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,t){if(Ei(e)&&t===void 0&&(t=e,e=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var r;if(wn(e)){var i=e;e=this.$(i)}else if(kEe(e)){var n=e;r={x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2},r.w=r.x2-r.x1,r.h=r.y2-r.y1}else bh(e)||(e=this.mutableElements());if(!(bh(e)&&e.empty())){r=r||e.boundingBox();var a=this.width(),s=this.height(),u;if(t=Ei(t)?t:0,!isNaN(a)&&!isNaN(s)&&a>0&&s>0&&!isNaN(r.w)&&!isNaN(r.h)&&r.w>0&&r.h>0){u=Math.min((a-2*t)/r.w,(s-2*t)/r.h),u=u>this._private.maxZoom?this._private.maxZoom:u,u=u<this._private.minZoom?this._private.minZoom:u;var h={x:(a-u*(r.x1+r.x2))/2,y:(s-u*(r.y1+r.y2))/2};return{zoom:u,pan:h}}}}},zoomRange:function(e,t){var r=this._private;if(t==null){var i=e;e=i.min,t=i.max}return Ei(e)&&Ei(t)&&e<=t?(r.minZoom=e,r.maxZoom=t):Ei(e)&&t===void 0&&e<=r.maxZoom?r.minZoom=e:Ei(t)&&e===void 0&&t>=r.minZoom&&(r.maxZoom=t),this},minZoom:function(e){return e===void 0?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return e===void 0?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var t=this._private,r=t.pan,i=t.zoom,n,a,s=!1;if(t.zoomingEnabled||(s=!0),Ei(e)?a=e:Ba(e)&&(a=e.level,e.position!=null?n=ZS(e.position,i,r):e.renderedPosition!=null&&(n=e.renderedPosition),n!=null&&!t.panningEnabled&&(s=!0)),a=a>t.maxZoom?t.maxZoom:a,a=a<t.minZoom?t.minZoom:a,s||!Ei(a)||a===i||n!=null&&(!Ei(n.x)||!Ei(n.y)))return null;if(n!=null){var u=r,h=i,d=a,p={x:-d/h*(n.x-u.x)+n.x,y:-d/h*(n.y-u.y)+n.y};return{zoomed:!0,panned:!0,zoom:d,pan:p}}else return{zoomed:!0,panned:!1,zoom:a,pan:r}},zoom:function(e){if(e===void 0)return this._private.zoom;var t=this.getZoomedViewport(e),r=this._private;return t==null||!t.zoomed?this:(r.zoom=t.zoom,t.panned&&(r.pan.x=t.pan.x,r.pan.y=t.pan.y),this.emit("zoom"+(t.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(e){var t=this._private,r=!0,i=!0,n=[],a=!1,s=!1;if(!e)return this;if(Ei(e.zoom)||(r=!1),Ba(e.pan)||(i=!1),!r&&!i)return this;if(r){var u=e.zoom;u<t.minZoom||u>t.maxZoom||!t.zoomingEnabled?a=!0:(t.zoom=u,n.push("zoom"))}if(i&&(!a||!e.cancelOnFailedZoom)&&t.panningEnabled){var h=e.pan;Ei(h.x)&&(t.pan.x=h.x,s=!1),Ei(h.y)&&(t.pan.y=h.y,s=!1),s||n.push("pan")}return n.length>0&&(n.push("viewport"),this.emit(n.join(" ")),this.notify("viewport")),this},center:function(e){var t=this.getCenterPan(e);return t&&(this._private.pan=t,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,t){if(this._private.panningEnabled){if(wn(e)){var r=e;e=this.mutableElements().filter(r)}else bh(e)||(e=this.mutableElements());if(e.length!==0){var i=e.boundingBox(),n=this.width(),a=this.height();t=t===void 0?this._private.zoom:t;var s={x:(n-t*(i.x1+i.x2))/2,y:(a-t*(i.y1+i.y2))/2};return s}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e=this._private,t=e.container,r=this;return e.sizeCache=e.sizeCache||(t?function(){var i=r.window().getComputedStyle(t),n=function(a){return parseFloat(i.getPropertyValue(a))};return{width:t.clientWidth-n("padding-left")-n("padding-right"),height:t.clientHeight-n("padding-top")-n("padding-bottom")}}():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,t=this._private.zoom,r=this.renderedExtent(),i={x1:(r.x1-e.x)/t,x2:(r.x2-e.x)/t,y1:(r.y1-e.y)/t,y2:(r.y2-e.y)/t};return i.w=i.x2-i.x1,i.h=i.y2-i.y1,i},renderedExtent:function(){var e=this.width(),t=this.height();return{x1:0,y1:0,x2:e,y2:t,w:e,h:t}},multiClickDebounceTime:function(e){if(e)this._private.multiClickDebounceTime=e;else return this._private.multiClickDebounceTime;return this}},Km.centre=Km.center,Km.autolockNodes=Km.autolock,Km.autoungrabifyNodes=Km.autoungrabify,lw={data:Ka.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:Ka.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:Ka.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Ka.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})},lw.attr=lw.data,lw.removeAttr=lw.removeData,uw=function(e){var t=this;e=Rn({},e);var r=e.container;r&&!jS(r)&&jS(r[0])&&(r=r[0]);var i=r?r._cyreg:null;i=i||{},i&&i.cy&&(i.cy.destroy(),i={});var n=i.readies=i.readies||[];r&&(r._cyreg=i),i.cy=t;var a=qo!==void 0&&r!==void 0&&!e.headless,s=e;s.layout=Rn({name:a?"grid":"null"},s.layout),s.renderer=Rn({name:a?"canvas":"null"},s.renderer);var u=function(y,m,x){return m!==void 0?m:x!==void 0?x:y},h=this._private={container:r,ready:!1,options:s,elements:new Dl(this),listeners:[],aniEles:new Dl(this),data:s.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:u(!0,s.zoomingEnabled),userZoomingEnabled:u(!0,s.userZoomingEnabled),panningEnabled:u(!0,s.panningEnabled),userPanningEnabled:u(!0,s.userPanningEnabled),boxSelectionEnabled:u(!0,s.boxSelectionEnabled),autolock:u(!1,s.autolock,s.autolockNodes),autoungrabify:u(!1,s.autoungrabify,s.autoungrabifyNodes),autounselectify:u(!1,s.autounselectify),styleEnabled:s.styleEnabled===void 0?a:s.styleEnabled,zoom:Ei(s.zoom)?s.zoom:1,pan:{x:Ba(s.pan)&&Ei(s.pan.x)?s.pan.x:0,y:Ba(s.pan)&&Ei(s.pan.y)?s.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:u(250,s.multiClickDebounceTime)};this.createEmitter(),this.selectionType(s.selectionType),this.zoomRange({min:s.minZoom,max:s.maxZoom});var d=function(y,m){var x=y.some(TEe);if(x)return gx.all(y).then(m);m(y)};h.styleEnabled&&t.setStyle([]);var p=Rn({},s,s.renderer);t.initRenderer(p);var g=function(y,m,x){t.notifications(!1);var _=t.mutableElements();_.length>0&&_.remove(),y!=null&&(Ba(y)||ps(y))&&t.add(y),t.one("layoutready",function(w){t.notifications(!0),t.emit(w),t.one("load",m),t.emitAndNotify("load")}).one("layoutstop",function(){t.one("done",x),t.emit("done")});var E=Rn({},t._private.options.layout);E.eles=t.elements(),t.layout(E).run()};d([s.style,s.elements],function(y){var m=y[0],x=y[1];h.styleEnabled&&t.style().append(m),g(x,function(){t.startAnimationLoop(),h.ready=!0,Hs(s.ready)&&t.on("ready",s.ready);for(var _=0;_<n.length;_++){var E=n[_];t.on("ready",E)}i&&(i.readies=[]),t.emit("ready")},s.done)})},C8=uw.prototype,Rn(C8,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},window:function(){var e=this._private.container;if(e==null)return qo;var t=this._private.container.ownerDocument;return t===void 0||t==null?qo:t.defaultView||qo},mount:function(e){if(e!=null){var t=this,r=t._private,i=r.options;return!jS(e)&&jS(e[0])&&(e=e[0]),t.stopAnimationLoop(),t.destroyRenderer(),r.container=e,r.styleEnabled=!0,t.invalidateSize(),t.initRenderer(Rn({},i,i.renderer,{name:i.renderer.name==="null"?"canvas":i.renderer.name})),t.startAnimationLoop(),t.style(i.style),t.emit("mount"),t}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return Vd(this._private.options)},json:function(e){var t=this,r=t._private,i=t.mutableElements(),n=function(C){return t.getElementById(C.id())};if(Ba(e)){if(t.startBatch(),e.elements){var a={},s=function(C,A){for(var M=[],N=[],B=0;B<C.length;B++){var O=C[B];if(!O.data.id){Xa("cy.json() cannot handle elements without an ID attribute");continue}var L=""+O.data.id,$=t.getElementById(L);a[L]=!0,$.length!==0?N.push({ele:$,json:O}):(A&&(O.group=A),M.push(O))}t.add(M);for(var G=0;G<N.length;G++){var z=N[G],F=z.ele,X=z.json;F.json(X)}};if(ps(e.elements))s(e.elements);else for(var u=["nodes","edges"],h=0;h<u.length;h++){var d=u[h],p=e.elements[d];ps(p)&&s(p,d)}var g=t.collection();i.filter(function(C){return!a[C.id()]}).forEach(function(C){C.isParent()?g.merge(C):C.remove()}),g.forEach(function(C){return C.children().move({parent:null})}),g.forEach(function(C){return n(C).remove()})}e.style&&t.style(e.style),e.zoom!=null&&e.zoom!==r.zoom&&t.zoom(e.zoom),e.pan&&(e.pan.x!==r.pan.x||e.pan.y!==r.pan.y)&&t.pan(e.pan),e.data&&t.data(e.data);for(var y=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],m=0;m<y.length;m++){var x=y[m];e[x]!=null&&t[x](e[x])}return t.endBatch(),this}else{var _=!!e,E={};_?E.elements=this.elements().map(function(C){return C.json()}):(E.elements={},i.forEach(function(C){var A=C.group();E.elements[A]||(E.elements[A]=[]),E.elements[A].push(C.json())})),this._private.styleEnabled&&(E.style=t.style().json()),E.data=Vd(t.data());var w=r.options;return E.zoomingEnabled=r.zoomingEnabled,E.userZoomingEnabled=r.userZoomingEnabled,E.zoom=r.zoom,E.minZoom=r.minZoom,E.maxZoom=r.maxZoom,E.panningEnabled=r.panningEnabled,E.userPanningEnabled=r.userPanningEnabled,E.pan=Vd(r.pan),E.boxSelectionEnabled=r.boxSelectionEnabled,E.renderer=Vd(w.renderer),E.hideEdgesOnViewport=w.hideEdgesOnViewport,E.textureOnViewport=w.textureOnViewport,E.wheelSensitivity=w.wheelSensitivity,E.motionBlur=w.motionBlur,E.multiClickDebounceTime=w.multiClickDebounceTime,E}}}),C8.$id=C8.getElementById,[fAe,mAe,FJ,cP,w8,vAe,dP,k8,_Ae,Km,lw].forEach(function(e){Rn(C8,e)}),kAe={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}},TAe={maximal:!1,acyclic:!1},xx=function(e){return e.scratch("breadthfirst")},$J=function(e,t){return e.scratch("breadthfirst",t)},tEe.prototype.run=function(){var e=this.options,t=e,r=e.cy,i=t.eles,n=i.nodes().filter(function(me){return!me.isParent()}),a=i,s=t.directed,u=t.acyclic||t.maximal||t.maximalAdjustments>0,h=Xu(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),d;if(bh(t.roots))d=t.roots;else if(ps(t.roots)){for(var p=[],g=0;g<t.roots.length;g++){var y=t.roots[g],m=r.getElementById(y);p.push(m)}d=r.collection(p)}else if(wn(t.roots))d=r.$(t.roots);else if(s)d=n.roots();else{var x=i.components();d=r.collection();for(var _=function(me){var st=x[me],we=st.maxDegree(!1),Et=st.filter(function(wt){return wt.degree(!1)===we});d=d.add(Et)},E=0;E<x.length;E++)_(E)}var w=[],C={},A=function(me,st){w[st]==null&&(w[st]=[]);var we=w[st].length;w[st].push(me),$J(me,{index:we,depth:st})},M=function(me,st){var we=xx(me),Et=we.depth,wt=we.index;w[Et][wt]=null,A(me,st)};a.bfs({roots:d,directed:t.directed,visit:function(me,st,we,Et,wt){var Tt=me[0],er=Tt.id();A(Tt,wt),C[er]=!0}});for(var N=[],B=0;B<n.length;B++){var O=n[B];C[O.id()]||N.push(O)}var L=function(me){for(var st=w[me],we=0;we<st.length;we++){var Et=st[we];if(Et==null){st.splice(we,1),we--;continue}$J(Et,{depth:me,index:we})}},$=function(){for(var me=0;me<w.length;me++)L(me)},G=function(me,st){for(var we=xx(me),Et=me.incomers().filter(function(Mt){return Mt.isNode()&&i.has(Mt)}),wt=-1,Tt=me.id(),er=0;er<Et.length;er++){var tr=Et[er],kr=xx(tr);wt=Math.max(wt,kr.depth)}if(we.depth<=wt){if(!t.acyclic&&st[Tt])return null;var fr=wt+1;return M(me,fr),st[Tt]=fr,!0}return!1};if(s&&u){var z=[],F={},X=function(me){return z.push(me)},I=function(){return z.shift()};for(n.forEach(function(me){return z.push(me)});z.length>0;){var j=I(),H=G(j,F);if(H)j.outgoers().filter(function(me){return me.isNode()&&i.has(me)}).forEach(X);else if(H===null){Xa("Detected double maximal shift for node `"+j.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}$();var V=0;if(t.avoidOverlap)for(var P=0;P<n.length;P++){var q=n[P],Z=q.layoutDimensions(t),J=Z.w,ae=Z.h;V=Math.max(V,J,ae)}var ue={},be=function(me){if(ue[me.id()])return ue[me.id()];for(var st=xx(me).depth,we=me.neighborhood(),Et=0,wt=0,Tt=0;Tt<we.length;Tt++){var er=we[Tt];if(!(er.isEdge()||er.isParent()||!n.has(er))){var tr=xx(er);if(tr!=null){var kr=tr.index,fr=tr.depth;if(!(kr==null||fr==null)){var Mt=w[fr].length;fr<st&&(Et+=kr/Mt,wt++)}}}}return wt=Math.max(1,wt),Et=Et/wt,wt===0&&(Et=0),ue[me.id()]=Et,Et},Le=function(me,st){var we=be(me),Et=be(st),wt=we-Et;return wt===0?lQ(me.id(),st.id()):wt};t.depthSort!==void 0&&(Le=t.depthSort);for(var xe=0;xe<w.length;xe++)w[xe].sort(Le),L(xe);for(var Ae=[],oe=0;oe<N.length;oe++)Ae.push(N[oe]);w.unshift(Ae),$();for(var he=0,le=0;le<w.length;le++)he=Math.max(w[le].length,he);var ke={x:h.x1+h.w/2,y:h.x1+h.h/2},pe=w.reduce(function(me,st){return Math.max(me,st.length)},0),qe=function(me){var st=xx(me),we=st.depth,Et=st.index,wt=w[we].length,Tt=Math.max(h.w/((t.grid?pe:wt)+1),V),er=Math.max(h.h/(w.length+1),V),tr=Math.min(h.w/2/w.length,h.h/2/w.length);if(tr=Math.max(tr,V),t.circle){var kr=tr*we+tr-(w.length>0&&w[0].length<=3?tr/2:0),fr=2*Math.PI/w[we].length*Et;return we===0&&w[0].length===1&&(kr=1),{x:ke.x+kr*Math.cos(fr),y:ke.y+kr*Math.sin(fr)}}else{var Mt={x:ke.x+(Et+1-(wt+1)/2)*Tt,y:(we+1)*er};return Mt}};return i.nodes().layoutPositions(this,t,qe),this},EAe={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}},rEe.prototype.run=function(){var e=this.options,t=e,r=e.cy,i=t.eles,n=t.counterclockwise!==void 0?!t.counterclockwise:t.clockwise,a=i.nodes().not(":parent");t.sort&&(a=a.sort(t.sort));for(var s=Xu(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),u={x:s.x1+s.w/2,y:s.y1+s.h/2},h=t.sweep===void 0?2*Math.PI-2*Math.PI/a.length:t.sweep,d=h/Math.max(1,a.length-1),p,g=0,y=0;y<a.length;y++){var m=a[y],x=m.layoutDimensions(t),_=x.w,E=x.h;g=Math.max(g,_,E)}if(Ei(t.radius)?p=t.radius:a.length<=1?p=0:p=Math.min(s.h,s.w)/2-g,a.length>1&&t.avoidOverlap){g*=1.75;var w=Math.cos(d)-Math.cos(0),C=Math.sin(d)-Math.sin(0),A=Math.sqrt(g*g/(w*w+C*C));p=Math.max(A,p)}var M=function(N,B){var O=t.startAngle+B*d*(n?1:-1),L=p*Math.cos(O),$=p*Math.sin(O),G={x:u.x+L,y:u.y+$};return G};return i.nodes().layoutPositions(this,t,M),this},CAe={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}},iEe.prototype.run=function(){for(var e=this.options,t=e,r=t.counterclockwise!==void 0?!t.counterclockwise:t.clockwise,i=e.cy,n=t.eles,a=n.nodes().not(":parent"),s=Xu(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:i.width(),h:i.height()}),u={x:s.x1+s.w/2,y:s.y1+s.h/2},h=[],d=0,p=0;p<a.length;p++){var g=a[p],y=void 0;y=t.concentric(g),h.push({value:y,node:g}),g._private.scratch.concentric=y}a.updateStyle();for(var m=0;m<a.length;m++){var x=a[m],_=x.layoutDimensions(t);d=Math.max(d,_.w,_.h)}h.sort(function(me,st){return st.value-me.value});for(var E=t.levelWidth(a),w=[[]],C=w[0],A=0;A<h.length;A++){var M=h[A];if(C.length>0){var N=Math.abs(C[0].value-M.value);N>=E&&(C=[],w.push(C))}C.push(M)}var B=d+t.minNodeSpacing;if(!t.avoidOverlap){var O=w.length>0&&w[0].length>1,L=Math.min(s.w,s.h)/2-B,$=L/(w.length+O?1:0);B=Math.min(B,$)}for(var G=0,z=0;z<w.length;z++){var F=w[z],X=t.sweep===void 0?2*Math.PI-2*Math.PI/F.length:t.sweep,I=F.dTheta=X/Math.max(1,F.length-1);if(F.length>1&&t.avoidOverlap){var j=Math.cos(I)-Math.cos(0),H=Math.sin(I)-Math.sin(0),V=Math.sqrt(B*B/(j*j+H*H));G=Math.max(V,G)}F.r=G,G+=B}if(t.equidistant){for(var P=0,q=0,Z=0;Z<w.length;Z++){var J=w[Z],ae=J.r-q;P=Math.max(P,ae)}q=0;for(var ue=0;ue<w.length;ue++){var be=w[ue];ue===0&&(q=be.r),be.r=q,q+=P}}for(var Le={},xe=0;xe<w.length;xe++)for(var Ae=w[xe],oe=Ae.dTheta,he=Ae.r,le=0;le<Ae.length;le++){var ke=Ae[le],pe=t.startAngle+(r?1:-1)*oe*le,qe={x:u.x+he*Math.cos(pe),y:u.y+he*Math.sin(pe)};Le[ke.node.id()]=qe}return n.nodes().layoutPositions(this,t,function(me){var st=me.id();return Le[st]}),this},SAe={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,t){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1},$B.prototype.run=function(){var e=this.options,t=e.cy,r=this;r.stopped=!1,(e.animate===!0||e.animate===!1)&&r.emit({type:"layoutstart",layout:r}),e.debug===!0?zJ=!0:zJ=!1;var i=AAe(t,r,e);zJ&&fZe(i),e.randomize&&RAe(i);var n=J0(),a=function(){DAe(i,t,e),e.fit===!0&&t.fit(e.padding)},s=function(g){return!(r.stopped||g>=e.numIter||(IAe(i,e),i.temperature=i.temperature*e.coolingFactor,i.temperature<e.minTemp))},u=function(){if(e.animate===!0||e.animate===!1)a(),r.one("layoutstop",e.stop),r.emit({type:"layoutstop",layout:r});else{var g=e.eles.nodes(),y=GJ(i,e,g);g.layoutPositions(r,e,y)}},h=0,d=!0;if(e.animate===!0){var p=function g(){for(var y=0;d&&y<e.refresh;)d=s(h),h++,y++;if(!d)jJ(i,e),u();else{var m=J0();m-n>=e.animationThreshold&&a(),YS(g)}};p()}else{for(;d;)d=s(h),h++;jJ(i,e),u()}return this},$B.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this},$B.prototype.destroy=function(){return this.thread&&this.thread.stop(),this},AAe=function(e,t,r){for(var i=r.eles.edges(),n=r.eles.nodes(),a=Xu(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),s={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:n.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:i.size(),temperature:r.initialTemp,clientWidth:a.w,clientHeight:a.h,boundingBox:a},u=r.eles.components(),h={},d=0;d<u.length;d++)for(var p=u[d],g=0;g<p.length;g++){var y=p[g];h[y.id()]=d}for(var d=0;d<s.nodeSize;d++){var m=n[d],x=m.layoutDimensions(r),_={};_.isLocked=m.locked(),_.id=m.data("id"),_.parentId=m.data("parent"),_.cmptId=h[m.id()],_.children=[],_.positionX=m.position("x"),_.positionY=m.position("y"),_.offsetX=0,_.offsetY=0,_.height=x.w,_.width=x.h,_.maxX=_.positionX+_.width/2,_.minX=_.positionX-_.width/2,_.maxY=_.positionY+_.height/2,_.minY=_.positionY-_.height/2,_.padLeft=parseFloat(m.style("padding")),_.padRight=parseFloat(m.style("padding")),_.padTop=parseFloat(m.style("padding")),_.padBottom=parseFloat(m.style("padding")),_.nodeRepulsion=Hs(r.nodeRepulsion)?r.nodeRepulsion(m):r.nodeRepulsion,s.layoutNodes.push(_),s.idToIndex[_.id]=d}for(var E=[],w=0,C=-1,A=[],d=0;d<s.nodeSize;d++){var m=s.layoutNodes[d],M=m.parentId;M!=null?s.layoutNodes[s.idToIndex[M]].children.push(m.id):(E[++C]=m.id,A.push(m.id))}for(s.graphSet.push(A);w<=C;){var N=E[w++],B=s.idToIndex[N],y=s.layoutNodes[B],O=y.children;if(O.length>0){s.graphSet.push(O);for(var d=0;d<O.length;d++)E[++C]=O[d]}}for(var d=0;d<s.graphSet.length;d++)for(var L=s.graphSet[d],g=0;g<L.length;g++){var $=s.idToIndex[L[g]];s.indexToGraph[$]=d}for(var d=0;d<s.edgeSize;d++){var G=i[d],z={};z.id=G.data("id"),z.sourceId=G.data("source"),z.targetId=G.data("target");var F=Hs(r.idealEdgeLength)?r.idealEdgeLength(G):r.idealEdgeLength,X=Hs(r.edgeElasticity)?r.edgeElasticity(G):r.edgeElasticity,I=s.idToIndex[z.sourceId],j=s.idToIndex[z.targetId],H=s.indexToGraph[I],V=s.indexToGraph[j];if(H!=V){for(var P=MAe(z.sourceId,z.targetId,s),q=s.graphSet[P],Z=0,_=s.layoutNodes[I];q.indexOf(_.id)===-1;)_=s.layoutNodes[s.idToIndex[_.parentId]],Z++;for(_=s.layoutNodes[j];q.indexOf(_.id)===-1;)_=s.layoutNodes[s.idToIndex[_.parentId]],Z++;F*=Z*r.nestingFactor}z.idealLength=F,z.elasticity=X,s.layoutEdges.push(z)}return s},MAe=function(e,t,r){var i=LAe(e,t,0,r);return 2>i.count?0:i.graph},LAe=function e(t,r,i,n){var a=n.graphSet[i];if(-1<a.indexOf(t)&&-1<a.indexOf(r))return{count:2,graph:i};for(var s=0,u=0;u<a.length;u++){var h=a[u],d=n.idToIndex[h],p=n.layoutNodes[d].children;if(p.length!==0){var g=n.indexToGraph[n.idToIndex[p[0]]],y=e(t,r,g,n);if(y.count!==0)if(y.count===1){if(s++,s===2)break}else return y}}return{count:s,graph:i}},RAe=function(e,t){for(var r=e.clientWidth,i=e.clientHeight,n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];a.children.length===0&&!a.isLocked&&(a.positionX=Math.random()*r,a.positionY=Math.random()*i)}},GJ=function(e,t,r){var i=e.boundingBox,n={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return t.boundingBox&&(r.forEach(function(a){var s=e.layoutNodes[e.idToIndex[a.data("id")]];n.x1=Math.min(n.x1,s.positionX),n.x2=Math.max(n.x2,s.positionX),n.y1=Math.min(n.y1,s.positionY),n.y2=Math.max(n.y2,s.positionY)}),n.w=n.x2-n.x1,n.h=n.y2-n.y1),function(a,s){var u=e.layoutNodes[e.idToIndex[a.data("id")]];if(t.boundingBox){var h=(u.positionX-n.x1)/n.w,d=(u.positionY-n.y1)/n.h;return{x:i.x1+h*i.w,y:i.y1+d*i.h}}else return{x:u.positionX,y:u.positionY}}},DAe=function(e,t,r){var i=r.layout,n=r.eles.nodes(),a=GJ(e,r,n);n.positions(a),e.ready!==!0&&(e.ready=!0,i.one("layoutready",r.ready),i.emit({type:"layoutready",layout:this}))},IAe=function(e,t,r){NAe(e,t),PAe(e),FAe(e,t),$Ae(e),zAe(e)},NAe=function(e,t){for(var r=0;r<e.graphSet.length;r++)for(var i=e.graphSet[r],n=i.length,a=0;a<n;a++)for(var s=e.layoutNodes[e.idToIndex[i[a]]],u=a+1;u<n;u++){var h=e.layoutNodes[e.idToIndex[i[u]]];OAe(s,h,e,t)}},UJ=function(e){return-e+2*e*Math.random()},OAe=function(e,t,r,i){var n=e.cmptId,a=t.cmptId;if(!(n!==a&&!r.isCompound)){var s=t.positionX-e.positionX,u=t.positionY-e.positionY,h=1;s===0&&u===0&&(s=UJ(h),u=UJ(h));var d=BAe(e,t,s,u);if(d>0)var E=i.nodeOverlap*d,_=Math.sqrt(s*s+u*u),w=E*s/_,C=E*u/_;else var p=S8(e,s,u),g=S8(t,-1*s,-1*u),y=g.x-p.x,m=g.y-p.y,x=y*y+m*m,_=Math.sqrt(x),E=(e.nodeRepulsion+t.nodeRepulsion)/x,w=E*y/_,C=E*m/_;e.isLocked||(e.offsetX-=w,e.offsetY-=C),t.isLocked||(t.offsetX+=w,t.offsetY+=C)}},BAe=function(e,t,r,i){if(r>0)var n=e.maxX-t.minX;else var n=t.maxX-e.minX;if(i>0)var a=e.maxY-t.minY;else var a=t.maxY-e.minY;return n>=0&&a>=0?Math.sqrt(n*n+a*a):0},S8=function(e,t,r){var i=e.positionX,n=e.positionY,a=e.height||1,s=e.width||1,u=r/t,h=a/s,d={};return t===0&&0<r||t===0&&0>r?(d.x=i,d.y=n+a/2,d):0<t&&-1*h<=u&&u<=h?(d.x=i+s/2,d.y=n+s*r/2/t,d):0>t&&-1*h<=u&&u<=h?(d.x=i-s/2,d.y=n-s*r/2/t,d):0<r&&(u<=-1*h||u>=h)?(d.x=i+a*t/2/r,d.y=n+a/2,d):(0>r&&(u<=-1*h||u>=h)&&(d.x=i-a*t/2/r,d.y=n-a/2),d)},PAe=function(e,t){for(var r=0;r<e.edgeSize;r++){var i=e.layoutEdges[r],n=e.idToIndex[i.sourceId],a=e.layoutNodes[n],s=e.idToIndex[i.targetId],u=e.layoutNodes[s],h=u.positionX-a.positionX,d=u.positionY-a.positionY;if(!(h===0&&d===0)){var p=S8(a,h,d),g=S8(u,-1*h,-1*d),y=g.x-p.x,m=g.y-p.y,x=Math.sqrt(y*y+m*m),_=Math.pow(i.idealLength-x,2)/i.elasticity;if(x!==0)var E=_*y/x,w=_*m/x;else var E=0,w=0;a.isLocked||(a.offsetX+=E,a.offsetY+=w),u.isLocked||(u.offsetX-=E,u.offsetY-=w)}}},FAe=function(e,t){if(t.gravity!==0)for(var r=1,i=0;i<e.graphSet.length;i++){var n=e.graphSet[i],a=n.length;if(i===0)var h=e.clientHeight/2,d=e.clientWidth/2;else var s=e.layoutNodes[e.idToIndex[n[0]]],u=e.layoutNodes[e.idToIndex[s.parentId]],h=u.positionX,d=u.positionY;for(var p=0;p<a;p++){var g=e.layoutNodes[e.idToIndex[n[p]]];if(!g.isLocked){var y=h-g.positionX,m=d-g.positionY,x=Math.sqrt(y*y+m*m);if(x>r){var _=t.gravity*y/x,E=t.gravity*m/x;g.offsetX+=_,g.offsetY+=E}}}}},$Ae=function(e,t){var r=[],i=0,n=-1;for(r.push.apply(r,e.graphSet[0]),n+=e.graphSet[0].length;i<=n;){var a=r[i++],s=e.idToIndex[a],u=e.layoutNodes[s],h=u.children;if(0<h.length&&!u.isLocked){for(var d=u.offsetX,p=u.offsetY,g=0;g<h.length;g++){var y=e.layoutNodes[e.idToIndex[h[g]]];y.offsetX+=d,y.offsetY+=p,r[++n]=h[g]}u.offsetX=0,u.offsetY=0}}},zAe=function(e,t){for(var r=0;r<e.nodeSize;r++){var i=e.layoutNodes[r];0<i.children.length&&(i.maxX=void 0,i.minX=void 0,i.maxY=void 0,i.minY=void 0)}for(var r=0;r<e.nodeSize;r++){var i=e.layoutNodes[r];if(!(0<i.children.length||i.isLocked)){var n=GAe(i.offsetX,i.offsetY,e.temperature);i.positionX+=n.x,i.positionY+=n.y,i.offsetX=0,i.offsetY=0,i.minX=i.positionX-i.width,i.maxX=i.positionX+i.width,i.minY=i.positionY-i.height,i.maxY=i.positionY+i.height,UAe(i,e)}}for(var r=0;r<e.nodeSize;r++){var i=e.layoutNodes[r];0<i.children.length&&!i.isLocked&&(i.positionX=(i.maxX+i.minX)/2,i.positionY=(i.maxY+i.minY)/2,i.width=i.maxX-i.minX,i.height=i.maxY-i.minY)}},GAe=function(e,t,r){var i=Math.sqrt(e*e+t*t);if(i>r)var n={x:r*e/i,y:r*t/i};else var n={x:e,y:t};return n},UAe=function e(t,r){var i=t.parentId;if(i!=null){var n=r.layoutNodes[r.idToIndex[i]],a=!1;if((n.maxX==null||t.maxX+n.padRight>n.maxX)&&(n.maxX=t.maxX+n.padRight,a=!0),(n.minX==null||t.minX-n.padLeft<n.minX)&&(n.minX=t.minX-n.padLeft,a=!0),(n.maxY==null||t.maxY+n.padBottom>n.maxY)&&(n.maxY=t.maxY+n.padBottom,a=!0),(n.minY==null||t.minY-n.padTop<n.minY)&&(n.minY=t.minY-n.padTop,a=!0),a)return e(n,r)}},jJ=function(e,t){for(var r=e.layoutNodes,i=[],n=0;n<r.length;n++){var a=r[n],s=a.cmptId,u=i[s]=i[s]||[];u.push(a)}for(var h=0,n=0;n<i.length;n++){var d=i[n];if(d){d.x1=1/0,d.x2=-1/0,d.y1=1/0,d.y2=-1/0;for(var p=0;p<d.length;p++){var g=d[p];d.x1=Math.min(d.x1,g.positionX-g.width/2),d.x2=Math.max(d.x2,g.positionX+g.width/2),d.y1=Math.min(d.y1,g.positionY-g.height/2),d.y2=Math.max(d.y2,g.positionY+g.height/2)}d.w=d.x2-d.x1,d.h=d.y2-d.y1,h+=d.w*d.h}}i.sort(function(w,C){return C.w*C.h-w.w*w.h});for(var y=0,m=0,x=0,_=0,E=Math.sqrt(h)*e.clientWidth/e.clientHeight,n=0;n<i.length;n++){var d=i[n];if(d){for(var p=0;p<d.length;p++){var g=d[p];g.isLocked||(g.positionX+=y-d.x1,g.positionY+=m-d.y1)}y+=d.w+t.componentSpacing,x+=d.w+t.componentSpacing,_=Math.max(_,d.h),x>E&&(m+=_+t.componentSpacing,y=0,x=0,_=0)}}},jAe={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}},nEe.prototype.run=function(){var e=this.options,t=e,r=e.cy,i=t.eles,n=i.nodes().not(":parent");t.sort&&(n=n.sort(t.sort));var a=Xu(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(a.h===0||a.w===0)i.nodes().layoutPositions(this,t,function(ue){return{x:a.x1,y:a.y1}});else{var s=n.size(),u=Math.sqrt(s*a.h/a.w),h=Math.round(u),d=Math.round(a.w/a.h*u),p=function(ue){if(ue==null)return Math.min(h,d);var be=Math.min(h,d);be==h?h=ue:d=ue},g=function(ue){if(ue==null)return Math.max(h,d);var be=Math.max(h,d);be==h?h=ue:d=ue},y=t.rows,m=t.cols!=null?t.cols:t.columns;if(y!=null&&m!=null)h=y,d=m;else if(y!=null&&m==null)h=y,d=Math.ceil(s/h);else if(y==null&&m!=null)d=m,h=Math.ceil(s/d);else if(d*h>s){var x=p(),_=g();(x-1)*_>=s?p(x-1):(_-1)*x>=s&&g(_-1)}else for(;d*h<s;){var E=p(),w=g();(w+1)*E>=s?g(w+1):p(E+1)}var C=a.w/d,A=a.h/h;if(t.condense&&(C=0,A=0),t.avoidOverlap)for(var M=0;M<n.length;M++){var N=n[M],B=N._private.position;(B.x==null||B.y==null)&&(B.x=0,B.y=0);var O=N.layoutDimensions(t),L=t.avoidOverlapPadding,$=O.w+L,G=O.h+L;C=Math.max(C,$),A=Math.max(A,G)}for(var z={},F=function(ue,be){return!!z["c-"+ue+"-"+be]},X=function(ue,be){z["c-"+ue+"-"+be]=!0},I=0,j=0,H=function(){j++,j>=d&&(j=0,I++)},V={},P=0;P<n.length;P++){var q=n[P],Z=t.position(q);if(Z&&(Z.row!==void 0||Z.col!==void 0)){var J={row:Z.row,col:Z.col};if(J.col===void 0)for(J.col=0;F(J.row,J.col);)J.col++;else if(J.row===void 0)for(J.row=0;F(J.row,J.col);)J.row++;V[q.id()]=J,X(J.row,J.col)}}var ae=function(ue,be){var Le,xe;if(ue.locked()||ue.isParent())return!1;var Ae=V[ue.id()];if(Ae)Le=Ae.col*C+C/2+a.x1,xe=Ae.row*A+A/2+a.y1;else{for(;F(I,j);)H();Le=j*C+C/2+a.x1,xe=I*A+A/2+a.y1,X(I,j),H()}return{x:Le,y:xe}};n.layoutPositions(this,t,ae)}return this},HAe={ready:function(){},stop:function(){}},JZ.prototype.run=function(){var e=this.options,t=e.eles,r=this;return e.cy,r.emit("layoutstart"),t.nodes().positions(function(){return{x:0,y:0}}),r.one("layoutready",e.ready),r.emit("layoutready"),r.one("layoutstop",e.stop),r.emit("layoutstop"),this},JZ.prototype.stop=function(){return this},VAe={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}},aEe.prototype.run=function(){var e=this.options,t=e.eles,r=t.nodes(),i=Hs(e.positions);function n(a){if(e.positions==null)return FCe(a.position());if(i)return e.positions(a);var s=e.positions[a._private.data.id];return s??null}return r.layoutPositions(this,e,function(a,s){var u=n(a);return a.locked()||u==null?!1:u}),this},WAe={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}},sEe.prototype.run=function(){var e=this.options,t=e.cy,r=e.eles,i=Xu(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()}),n=function(a,s){return{x:i.x1+Math.round(Math.random()*i.w),y:i.y1+Math.round(Math.random()*i.h)}};return r.nodes().layoutPositions(this,e,n),this},YAe=[{name:"breadthfirst",impl:tEe},{name:"circle",impl:rEe},{name:"concentric",impl:iEe},{name:"cose",impl:$B},{name:"grid",impl:nEe},{name:"null",impl:JZ},{name:"preset",impl:aEe},{name:"random",impl:sEe}],HJ=function(){},VJ=function(){throw new Error("A headless instance can not render images")},oEe.prototype={recalculateRenderedStyle:HJ,notify:function(){this.notifications++},init:HJ,isHeadless:function(){return!0},png:VJ,jpg:VJ},gP={},gP.arrowShapeWidth=.3,gP.registerArrowShapes=function(){var e=this.arrowShapes={},t=this,r=function(h,d,p,g,y,m,x){var _=y.x-p/2-x,E=y.x+p/2+x,w=y.y-p/2-x,C=y.y+p/2+x,A=_<=h&&h<=E&&w<=d&&d<=C;return A},i=function(h,d,p,g,y){var m=h*Math.cos(g)-d*Math.sin(g),x=h*Math.sin(g)+d*Math.cos(g),_=m*p,E=x*p,w=_+y.x,C=E+y.y;return{x:w,y:C}},n=function(h,d,p,g){for(var y=[],m=0;m<h.length;m+=2){var x=h[m],_=h[m+1];y.push(i(x,_,d,p,g))}return y},a=function(h){for(var d=[],p=0;p<h.length;p++){var g=h[p];d.push(g.x,g.y)}return d},s=function(h){return h.pstyle("width").pfValue*h.pstyle("arrow-scale").pfValue*2},u=function(h,d){wn(d)&&(d=e[d]),e[h]=Rn({name:h,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(p,g,y,m,x,_){var E=a(n(this.points,y+2*_,m,x)),w=Ku(p,g,E);return w},roughCollide:r,draw:function(p,g,y,m){var x=n(this.points,g,y,m);t.arrowShapeImpl("polygon")(p,x)},spacing:function(p){return 0},gap:s},d)};u("none",{collide:XS,roughCollide:XS,draw:VB,spacing:wQ,gap:wQ}),u("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),u("arrow","triangle"),u("triangle-backcurve",{points:e.triangle.points,controlPoint:[0,-.15],roughCollide:r,draw:function(h,d,p,g,y){var m=n(this.points,d,p,g),x=this.controlPoint,_=i(x[0],x[1],d,p,g);t.arrowShapeImpl(this.name)(h,m,_)},gap:function(h){return s(h)*.8}}),u("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(h,d,p,g,y,m,x){var _=a(n(this.points,p+2*x,g,y)),E=a(n(this.pointsTee,p+2*x,g,y)),w=Ku(h,d,_)||Ku(h,d,E);return w},draw:function(h,d,p,g,y){var m=n(this.points,d,p,g),x=n(this.pointsTee,d,p,g);t.arrowShapeImpl(this.name)(h,m,x)}}),u("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(h,d,p,g,y,m,x){var _=y,E=Math.pow(_.x-h,2)+Math.pow(_.y-d,2)<=Math.pow((p+2*x)*this.radius,2),w=a(n(this.points,p+2*x,g,y));return Ku(h,d,w)||E},draw:function(h,d,p,g,y){var m=n(this.pointsTr,d,p,g);t.arrowShapeImpl(this.name)(h,m,g.x,g.y,this.radius*d)},spacing:function(h){return t.getArrowWidth(h.pstyle("width").pfValue,h.pstyle("arrow-scale").value)*this.radius}}),u("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(h,d){var p=this.baseCrossLinePts.slice(),g=d/h,y=3,m=5;return p[y]=p[y]-g,p[m]=p[m]-g,p},collide:function(h,d,p,g,y,m,x){var _=a(n(this.points,p+2*x,g,y)),E=a(n(this.crossLinePts(p,m),p+2*x,g,y)),w=Ku(h,d,_)||Ku(h,d,E);return w},draw:function(h,d,p,g,y){var m=n(this.points,d,p,g),x=n(this.crossLinePts(d,y),d,p,g);t.arrowShapeImpl(this.name)(h,m,x)}}),u("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(h){return s(h)*.525}}),u("circle",{radius:.15,collide:function(h,d,p,g,y,m,x){var _=y,E=Math.pow(_.x-h,2)+Math.pow(_.y-d,2)<=Math.pow((p+2*x)*this.radius,2);return E},draw:function(h,d,p,g,y){t.arrowShapeImpl(this.name)(h,g.x,g.y,this.radius*d)},spacing:function(h){return t.getArrowWidth(h.pstyle("width").pfValue,h.pstyle("arrow-scale").value)*this.radius}}),u("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(h){return 1},gap:function(h){return 1}}),u("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),u("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(h){return h.pstyle("width").pfValue*h.pstyle("arrow-scale").value}}),u("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(h){return .95*h.pstyle("width").pfValue*h.pstyle("arrow-scale").value}})},Zm={},Zm.projectIntoViewport=function(e,t){var r=this.cy,i=this.findContainerClientCoords(),n=i[0],a=i[1],s=i[4],u=r.pan(),h=r.zoom(),d=((e-n)/s-u.x)/h,p=((t-a)/s-u.y)/h;return[d,p]},Zm.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var e=this.container,t=e.getBoundingClientRect(),r=this.cy.window().getComputedStyle(e),i=function(E){return parseFloat(r.getPropertyValue(E))},n={left:i("padding-left"),right:i("padding-right"),top:i("padding-top"),bottom:i("padding-bottom")},a={left:i("border-left-width"),right:i("border-right-width"),top:i("border-top-width"),bottom:i("border-bottom-width")},s=e.clientWidth,u=e.clientHeight,h=n.left+n.right,d=n.top+n.bottom,p=a.left+a.right,g=t.width/(s+p),y=s-h,m=u-d,x=t.left+n.left+a.left,_=t.top+n.top+a.top;return this.containerBB=[x,_,y,m,g]},Zm.invalidateContainerClientCoordsCache=function(){this.containerBB=null},Zm.findNearestElement=function(e,t,r,i){return this.findNearestElements(e,t,r,i)[0]},Zm.findNearestElements=function(e,t,r,i){var n=this,a=this,s=a.getCachedZSortedEles(),u=[],h=a.cy.zoom(),d=a.cy.hasCompoundNodes(),p=(i?24:8)/h,g=(i?8:2)/h,y=(i?8:2)/h,m=1/0,x,_;r&&(s=s.interactive);function E(O,L){if(O.isNode()){if(_)return;_=O,u.push(O)}if(O.isEdge()&&(L==null||L<m))if(x){if(x.pstyle("z-compound-depth").value===O.pstyle("z-compound-depth").value&&x.pstyle("z-compound-depth").value===O.pstyle("z-compound-depth").value){for(var $=0;$<u.length;$++)if(u[$].isEdge()){u[$]=O,x=O,m=L??m;break}}}else u.push(O),x=O,m=L??m}function w(O){var L=O.outerWidth()+2*g,$=O.outerHeight()+2*g,G=L/2,z=$/2,F=O.position(),X=O.pstyle("corner-radius").value==="auto"?"auto":O.pstyle("corner-radius").pfValue,I=O._private.rscratch;if(F.x-G<=e&&e<=F.x+G&&F.y-z<=t&&t<=F.y+z){var j=a.nodeShapes[n.getNodeShape(O)];if(j.checkPoint(e,t,0,L,$,F.x,F.y,X,I))return E(O,0),!0}}function C(O){var L=O._private,$=L.rscratch,G=O.pstyle("width").pfValue,z=O.pstyle("arrow-scale").value,F=G/2+p,X=F*F,I=F*2,j=L.source,H=L.target,V;if($.edgeType==="segments"||$.edgeType==="straight"||$.edgeType==="haystack"){for(var P=$.allpts,q=0;q+3<P.length;q+=2)if(ZCe(e,t,P[q],P[q+1],P[q+2],P[q+3],I)&&X>(V=r7e(e,t,P[q],P[q+1],P[q+2],P[q+3])))return E(O,V),!0}else if($.edgeType==="bezier"||$.edgeType==="multibezier"||$.edgeType==="self"||$.edgeType==="compound"){for(var P=$.allpts,q=0;q+5<$.allpts.length;q+=4)if(QCe(e,t,P[q],P[q+1],P[q+2],P[q+3],P[q+4],P[q+5],I)&&X>(V=t7e(e,t,P[q],P[q+1],P[q+2],P[q+3],P[q+4],P[q+5])))return E(O,V),!0}for(var j=j||L.source,H=H||L.target,Z=n.getArrowWidth(G,z),J=[{name:"source",x:$.arrowStartX,y:$.arrowStartY,angle:$.srcArrowAngle},{name:"target",x:$.arrowEndX,y:$.arrowEndY,angle:$.tgtArrowAngle},{name:"mid-source",x:$.midX,y:$.midY,angle:$.midsrcArrowAngle},{name:"mid-target",x:$.midX,y:$.midY,angle:$.midtgtArrowAngle}],q=0;q<J.length;q++){var ae=J[q],ue=a.arrowShapes[O.pstyle(ae.name+"-arrow-shape").value],be=O.pstyle("width").pfValue;if(ue.roughCollide(e,t,Z,ae.angle,{x:ae.x,y:ae.y},be,p)&&ue.collide(e,t,Z,ae.angle,{x:ae.x,y:ae.y},be,p))return E(O),!0}d&&u.length>0&&(w(j),w(H))}function A(O,L,$){return qc(O,L,$)}function M(O,L){var $=O._private,G=y,z;L?z=L+"-":z="",O.boundingBox();var F=$.labelBounds[L||"main"],X=O.pstyle(z+"label").value,I=O.pstyle("text-events").strValue==="yes";if(!(!I||!X)){var j=A($.rscratch,"labelX",L),H=A($.rscratch,"labelY",L),V=A($.rscratch,"labelAngle",L),P=O.pstyle(z+"text-margin-x").pfValue,q=O.pstyle(z+"text-margin-y").pfValue,Z=F.x1-G-P,J=F.x2+G-P,ae=F.y1-G-q,ue=F.y2+G-q;if(V){var be=Math.cos(V),Le=Math.sin(V),xe=function(pe,qe){return pe=pe-j,qe=qe-H,{x:pe*be-qe*Le+j,y:pe*Le+qe*be+H}},Ae=xe(Z,ae),oe=xe(Z,ue),he=xe(J,ae),le=xe(J,ue),ke=[Ae.x+P,Ae.y+q,he.x+P,he.y+q,le.x+P,le.y+q,oe.x+P,oe.y+q];if(Ku(e,t,ke))return E(O),!0}else if(cx(F,e,t))return E(O),!0}}for(var N=s.length-1;N>=0;N--){var B=s[N];B.isNode()?w(B)||M(B):C(B)||M(B)||M(B,"source")||M(B,"target")}return u},Zm.getAllInBox=function(e,t,r,i){var n=this.getCachedZSortedEles().interactive,a=[],s=Math.min(e,r),u=Math.max(e,r),h=Math.min(t,i),d=Math.max(t,i);e=s,r=u,t=h,i=d;for(var p=Xu({x1:e,y1:t,x2:r,y2:i}),g=0;g<n.length;g++){var y=n[g];if(y.isNode()){var m=y,x=m.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});XB(p,x)&&!RQ(x,p)&&a.push(m)}else{var _=y,E=_._private,w=E.rscratch;if(w.startX!=null&&w.startY!=null&&!cx(p,w.startX,w.startY)||w.endX!=null&&w.endY!=null&&!cx(p,w.endX,w.endY))continue;if(w.edgeType==="bezier"||w.edgeType==="multibezier"||w.edgeType==="self"||w.edgeType==="compound"||w.edgeType==="segments"||w.edgeType==="haystack"){for(var C=E.rstyle.bezierPts||E.rstyle.linePts||E.rstyle.haystackPts,A=!0,M=0;M<C.length;M++)if(!KCe(p,C[M])){A=!1;break}A&&a.push(_)}else(w.edgeType==="haystack"||w.edgeType==="straight")&&a.push(_)}}return a},A8={},A8.calculateArrowAngles=function(e){var t=e._private.rscratch,r=t.edgeType==="haystack",i=t.edgeType==="bezier",n=t.edgeType==="multibezier",a=t.edgeType==="segments",s=t.edgeType==="compound",u=t.edgeType==="self",h,d,p,g,y,m,w,C;if(r?(p=t.haystackPts[0],g=t.haystackPts[1],y=t.haystackPts[2],m=t.haystackPts[3]):(p=t.arrowStartX,g=t.arrowStartY,y=t.arrowEndX,m=t.arrowEndY),w=t.midX,C=t.midY,a)h=p-t.segpts[0],d=g-t.segpts[1];else if(n||s||u||i){var x=t.allpts,_=ul(x[0],x[2],x[4],.1),E=ul(x[1],x[3],x[5],.1);h=p-_,d=g-E}else h=p-w,d=g-C;t.srcArrowAngle=QS(h,d);var w=t.midX,C=t.midY;if(r&&(w=(p+y)/2,C=(g+m)/2),h=y-p,d=m-g,a){var x=t.allpts;if(x.length/2%2===0){var A=x.length/2,M=A-2;h=x[A]-x[M],d=x[A+1]-x[M+1]}else if(t.isRound)h=t.midVector[1],d=-t.midVector[0];else{var A=x.length/2-1,M=A-2;h=x[A]-x[M],d=x[A+1]-x[M+1]}}else if(n||s||u){var x=t.allpts,N=t.ctrlpts,B,O,L,$;if(N.length/2%2===0){var G=x.length/2-1,z=G+2,F=z+2;B=ul(x[G],x[z],x[F],0),O=ul(x[G+1],x[z+1],x[F+1],0),L=ul(x[G],x[z],x[F],1e-4),$=ul(x[G+1],x[z+1],x[F+1],1e-4)}else{var z=x.length/2-1,G=z-2,F=z+2;B=ul(x[G],x[z],x[F],.4999),O=ul(x[G+1],x[z+1],x[F+1],.4999),L=ul(x[G],x[z],x[F],.5),$=ul(x[G+1],x[z+1],x[F+1],.5)}h=L-B,d=$-O}if(t.midtgtArrowAngle=QS(h,d),t.midDispX=h,t.midDispY=d,h*=-1,d*=-1,a){var x=t.allpts;if(x.length/2%2!==0&&!t.isRound){var A=x.length/2-1,X=A+2;h=-(x[X]-x[A]),d=-(x[X+1]-x[A+1])}}if(t.midsrcArrowAngle=QS(h,d),a)h=y-t.segpts[t.segpts.length-2],d=m-t.segpts[t.segpts.length-1];else if(n||s||u||i){var x=t.allpts,I=x.length,_=ul(x[I-6],x[I-4],x[I-2],.9),E=ul(x[I-5],x[I-3],x[I-1],.9);h=y-_,d=m-E}else h=y-w,d=m-C;t.tgtArrowAngle=QS(h,d)},A8.getArrowWidth=A8.getArrowHeight=function(e,t){var r=this.arrowWidthCache=this.arrowWidthCache||{},i=r[e+", "+t];return i||(i=Math.max(Math.pow(e*13.37,.9),29)*t,r[e+", "+t]=i,i)},Xd={},dc={},KJ=function(e,t,r){r.x=t.x-e.x,r.y=t.y-e.y,r.len=Math.sqrt(r.x*r.x+r.y*r.y),r.nx=r.x/r.len,r.ny=r.y/r.len,r.ang=Math.atan2(r.ny,r.nx)},JAe=function(e,t){t.x=e.x*-1,t.y=e.y*-1,t.nx=e.nx*-1,t.ny=e.ny*-1,t.ang=e.ang>0?-(Math.PI-e.ang):Math.PI+e.ang},e9e=function(e,t,r,i,n){if(e!==QAe?KJ(t,e,Xd):JAe(dc,Xd),KJ(t,r,dc),qAe=Xd.nx*dc.ny-Xd.ny*dc.nx,XAe=Xd.nx*dc.nx-Xd.ny*-dc.ny,ng=Math.asin(Math.max(-1,Math.min(1,qAe))),Math.abs(ng)<1e-6){WJ=t.x,YJ=t.y,wx=hw=0;return}bx=1,mP=!1,XAe<0?ng<0?ng=Math.PI+ng:(ng=Math.PI-ng,bx=-1,mP=!0):ng>0&&(bx=-1,mP=!0),t.radius!==void 0?hw=t.radius:hw=i,_x=ng/2,yP=Math.min(Xd.len/2,dc.len/2),n?(rp=Math.abs(Math.cos(_x)*hw/Math.sin(_x)),rp>yP?(rp=yP,wx=Math.abs(rp*Math.sin(_x)/Math.cos(_x))):wx=hw):(rp=Math.min(yP,hw),wx=Math.abs(rp*Math.sin(_x)/Math.cos(_x))),qJ=t.x+dc.nx*rp,XJ=t.y+dc.ny*rp,WJ=qJ-dc.ny*wx*bx,YJ=XJ+dc.nx*wx*bx,KAe=t.x+Xd.nx*rp,ZAe=t.y+Xd.ny*rp,QAe=t},Kl={},Kl.findMidptPtsEtc=function(e,t){var r=t.posPts,i=t.intersectionPts,n=t.vectorNormInverse,a,s=e.pstyle("source-endpoint"),u=e.pstyle("target-endpoint"),h=s.units!=null&&u.units!=null,d=function(M,N,B,O){var L=O-N,$=B-M,G=Math.sqrt($*$+L*L);return{x:-L/G,y:$/G}},p=e.pstyle("edge-distances").value;switch(p){case"node-position":a=r;break;case"intersection":a=i;break;case"endpoints":{if(h){var g=this.manualEndptToPx(e.source()[0],s),y=Hd(g,2),m=y[0],x=y[1],_=this.manualEndptToPx(e.target()[0],u),E=Hd(_,2),w=E[0],C=E[1],A={x1:m,y1:x,x2:w,y2:C};n=d(m,x,w,C),a=A}else Xa("Edge ".concat(e.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),a=i;break}}return{midptPts:a,vectorNormInverse:n}},Kl.findHaystackPoints=function(e){for(var t=0;t<e.length;t++){var r=e[t],i=r._private,n=i.rscratch;if(!n.haystack){var a=Math.random()*2*Math.PI;n.source={x:Math.cos(a),y:Math.sin(a)},a=Math.random()*2*Math.PI,n.target={x:Math.cos(a),y:Math.sin(a)}}var s=i.source,u=i.target,h=s.position(),d=u.position(),p=s.width(),g=u.width(),y=s.height(),m=u.height(),x=r.pstyle("haystack-radius").value,_=x/2;n.haystackPts=n.allpts=[n.source.x*p*_+h.x,n.source.y*y*_+h.y,n.target.x*g*_+d.x,n.target.y*m*_+d.y],n.midX=(n.allpts[0]+n.allpts[2])/2,n.midY=(n.allpts[1]+n.allpts[3])/2,n.edgeType="haystack",n.haystack=!0,this.storeEdgeProjections(r),this.calculateArrowAngles(r),this.recalculateEdgeLabelProjections(r),this.calculateLabelAngles(r)}},Kl.findSegmentsPoints=function(e,t){var r=e._private.rscratch,i=e.pstyle("segment-weights"),n=e.pstyle("segment-distances"),a=e.pstyle("segment-radii"),s=e.pstyle("radius-type"),u=Math.min(i.pfValue.length,n.pfValue.length),h=a.pfValue[a.pfValue.length-1],d=s.pfValue[s.pfValue.length-1];r.edgeType="segments",r.segpts=[],r.radii=[],r.isArcRadius=[];for(var p=0;p<u;p++){var g=i.pfValue[p],y=n.pfValue[p],m=1-g,x=g,_=this.findMidptPtsEtc(e,t),E=_.midptPts,w=_.vectorNormInverse,C={x:E.x1*m+E.x2*x,y:E.y1*m+E.y2*x};r.segpts.push(C.x+w.x*y,C.y+w.y*y),r.radii.push(a.pfValue[p]!==void 0?a.pfValue[p]:h),r.isArcRadius.push((s.pfValue[p]!==void 0?s.pfValue[p]:d)==="arc-radius")}},Kl.findLoopPoints=function(e,t,r,i){var n=e._private.rscratch,a=t.dirCounts,s=t.srcPos,u=e.pstyle("control-point-distances"),h=u?u.pfValue[0]:void 0,d=e.pstyle("loop-direction").pfValue,p=e.pstyle("loop-sweep").pfValue,g=e.pstyle("control-point-step-size").pfValue;n.edgeType="self";var y=r,m=g;i&&(y=0,m=h);var x=d-Math.PI/2,_=x-p/2,E=x+p/2,w=d+"_"+p;y=a[w]===void 0?a[w]=0:++a[w],n.ctrlpts=[s.x+Math.cos(_)*1.4*m*(y/3+1),s.y+Math.sin(_)*1.4*m*(y/3+1),s.x+Math.cos(E)*1.4*m*(y/3+1),s.y+Math.sin(E)*1.4*m*(y/3+1)]},Kl.findCompoundLoopPoints=function(e,t,r,i){var n=e._private.rscratch;n.edgeType="compound";var a=t.srcPos,s=t.tgtPos,u=t.srcW,h=t.srcH,d=t.tgtW,p=t.tgtH,g=e.pstyle("control-point-step-size").pfValue,y=e.pstyle("control-point-distances"),m=y?y.pfValue[0]:void 0,x=r,_=g;i&&(x=0,_=m);var E=50,w={x:a.x-u/2,y:a.y-h/2},C={x:s.x-d/2,y:s.y-p/2},A={x:Math.min(w.x,C.x),y:Math.min(w.y,C.y)},M=.5,N=Math.max(M,Math.log(u*.01)),B=Math.max(M,Math.log(d*.01));n.ctrlpts=[A.x,A.y-(1+Math.pow(E,1.12)/100)*_*(x/3+1)*N,A.x-(1+Math.pow(E,1.12)/100)*_*(x/3+1)*B,A.y]},Kl.findStraightEdgePoints=function(e){e._private.rscratch.edgeType="straight"},Kl.findBezierPoints=function(e,t,r,i,n){var a=e._private.rscratch,s=e.pstyle("control-point-step-size").pfValue,u=e.pstyle("control-point-distances"),h=e.pstyle("control-point-weights"),d=u&&h?Math.min(u.value.length,h.value.length):1,p=u?u.pfValue[0]:void 0,g=h.value[0],y=i;a.edgeType=y?"multibezier":"bezier",a.ctrlpts=[];for(var m=0;m<d;m++){var x=(.5-t.eles.length/2+r)*s*(n?-1:1),_=void 0,E=AQ(x);y&&(p=u?u.pfValue[m]:s,g=h.value[m]),i?_=p:_=p!==void 0?E*p:void 0;var w=_!==void 0?_:x,C=1-g,A=g,M=this.findMidptPtsEtc(e,t),N=M.midptPts,B=M.vectorNormInverse,O={x:N.x1*C+N.x2*A,y:N.y1*C+N.y2*A};a.ctrlpts.push(O.x+B.x*w,O.y+B.y*w)}},Kl.findTaxiPoints=function(e,t){var r=e._private.rscratch;r.edgeType="segments";var i="vertical",n="horizontal",a="leftward",s="rightward",u="downward",h="upward",d="auto",p=t.posPts,g=t.srcW,y=t.srcH,m=t.tgtW,x=t.tgtH,_=e.pstyle("edge-distances").value,E=_!=="node-position",w=e.pstyle("taxi-direction").value,C=w,A=e.pstyle("taxi-turn"),M=A.units==="%",N=A.pfValue,B=N<0,O=e.pstyle("taxi-turn-min-distance").pfValue,L=E?(g+m)/2:0,$=E?(y+x)/2:0,G=p.x2-p.x1,z=p.y2-p.y1,F=function(fe,ze){return fe>0?Math.max(fe-ze,0):Math.min(fe+ze,0)},X=F(G,L),I=F(z,$),j=!1;C===d?w=Math.abs(X)>Math.abs(I)?n:i:C===h||C===u?(w=i,j=!0):(C===a||C===s)&&(w=n,j=!0);var H=w===i,V=H?I:X,P=H?z:G,q=AQ(P),Z=!1;!(j&&(M||B))&&(C===u&&P<0||C===h&&P>0||C===a&&P>0||C===s&&P<0)&&(q*=-1,V=q*Math.abs(V),Z=!0);var J;if(M){var ae=N<0?1+N:N;J=ae*V}else{var ue=N<0?V:0;J=ue+N*q}var be=function(fe){return Math.abs(fe)<O||Math.abs(fe)>=Math.abs(V)},Le=be(J),xe=be(Math.abs(V)-Math.abs(J)),Ae=Le||xe;if(Ae&&!Z)if(H){var oe=Math.abs(P)<=y/2,he=Math.abs(G)<=m/2;if(oe){var le=(p.x1+p.x2)/2,ke=p.y1,pe=p.y2;r.segpts=[le,ke,le,pe]}else if(he){var qe=(p.y1+p.y2)/2,me=p.x1,st=p.x2;r.segpts=[me,qe,st,qe]}else r.segpts=[p.x1,p.y2]}else{var we=Math.abs(P)<=g/2,Et=Math.abs(z)<=x/2;if(we){var wt=(p.y1+p.y2)/2,Tt=p.x1,er=p.x2;r.segpts=[Tt,wt,er,wt]}else if(Et){var tr=(p.x1+p.x2)/2,kr=p.y1,fr=p.y2;r.segpts=[tr,kr,tr,fr]}else r.segpts=[p.x2,p.y1]}else if(H){var Mt=p.y1+J+(E?y/2*q:0),Kt=p.x1,ne=p.x2;r.segpts=[Kt,Mt,ne,Mt]}else{var He=p.x1+J+(E?g/2*q:0),Te=p.y1,Qe=p.y2;r.segpts=[He,Te,He,Qe]}if(r.isRound){var ce=e.pstyle("taxi-radius").value,Ut=e.pstyle("radius-type").value[0]==="arc-radius";r.radii=new Array(r.segpts.length/2).fill(ce),r.isArcRadius=new Array(r.segpts.length/2).fill(Ut)}},Kl.tryToCorrectInvalidPoints=function(e,t){var r=e._private.rscratch;if(r.edgeType==="bezier"){var i=t.srcPos,n=t.tgtPos,a=t.srcW,s=t.srcH,u=t.tgtW,h=t.tgtH,d=t.srcShape,p=t.tgtShape,g=t.srcCornerRadius,y=t.tgtCornerRadius,m=t.srcRs,x=t.tgtRs,_=!Ei(r.startX)||!Ei(r.startY),E=!Ei(r.arrowStartX)||!Ei(r.arrowStartY),w=!Ei(r.endX)||!Ei(r.endY),C=!Ei(r.arrowEndX)||!Ei(r.arrowEndY),A=3,M=this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth,N=A*M,B=jm({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.startX,y:r.startY}),O=B<N,L=jm({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.endX,y:r.endY}),$=L<N,G=!1;if(_||E||O){G=!0;var z={x:r.ctrlpts[0]-i.x,y:r.ctrlpts[1]-i.y},F=Math.sqrt(z.x*z.x+z.y*z.y),X={x:z.x/F,y:z.y/F},I=Math.max(a,s),j={x:r.ctrlpts[0]+X.x*2*I,y:r.ctrlpts[1]+X.y*2*I},H=d.intersectLine(i.x,i.y,a,s,j.x,j.y,0,g,m);O?(r.ctrlpts[0]=r.ctrlpts[0]+X.x*(N-B),r.ctrlpts[1]=r.ctrlpts[1]+X.y*(N-B)):(r.ctrlpts[0]=H[0]+X.x*N,r.ctrlpts[1]=H[1]+X.y*N)}if(w||C||$){G=!0;var V={x:r.ctrlpts[0]-n.x,y:r.ctrlpts[1]-n.y},P=Math.sqrt(V.x*V.x+V.y*V.y),q={x:V.x/P,y:V.y/P},Z=Math.max(a,s),J={x:r.ctrlpts[0]+q.x*2*Z,y:r.ctrlpts[1]+q.y*2*Z},ae=p.intersectLine(n.x,n.y,u,h,J.x,J.y,0,y,x);$?(r.ctrlpts[0]=r.ctrlpts[0]+q.x*(N-L),r.ctrlpts[1]=r.ctrlpts[1]+q.y*(N-L)):(r.ctrlpts[0]=ae[0]+q.x*N,r.ctrlpts[1]=ae[1]+q.y*N)}G&&this.findEndpoints(e)}},Kl.storeAllpts=function(e){var t=e._private.rscratch;if(t.edgeType==="multibezier"||t.edgeType==="bezier"||t.edgeType==="self"||t.edgeType==="compound"){t.allpts=[],t.allpts.push(t.startX,t.startY);for(var r=0;r+1<t.ctrlpts.length;r+=2)t.allpts.push(t.ctrlpts[r],t.ctrlpts[r+1]),r+3<t.ctrlpts.length&&t.allpts.push((t.ctrlpts[r]+t.ctrlpts[r+2])/2,(t.ctrlpts[r+1]+t.ctrlpts[r+3])/2);t.allpts.push(t.endX,t.endY);var i,n;t.ctrlpts.length/2%2===0?(i=t.allpts.length/2-1,t.midX=t.allpts[i],t.midY=t.allpts[i+1]):(i=t.allpts.length/2-3,n=.5,t.midX=ul(t.allpts[i],t.allpts[i+2],t.allpts[i+4],n),t.midY=ul(t.allpts[i+1],t.allpts[i+3],t.allpts[i+5],n))}else if(t.edgeType==="straight")t.allpts=[t.startX,t.startY,t.endX,t.endY],t.midX=(t.startX+t.endX+t.arrowStartX+t.arrowEndX)/4,t.midY=(t.startY+t.endY+t.arrowStartY+t.arrowEndY)/4;else if(t.edgeType==="segments"){if(t.allpts=[],t.allpts.push(t.startX,t.startY),t.allpts.push.apply(t.allpts,t.segpts),t.allpts.push(t.endX,t.endY),t.isRound){t.roundCorners=[];for(var a=2;a+3<t.allpts.length;a+=2){var s=t.radii[a/2-1],u=t.isArcRadius[a/2-1];t.roundCorners.push(eQ({x:t.allpts[a-2],y:t.allpts[a-1]},{x:t.allpts[a],y:t.allpts[a+1],radius:s},{x:t.allpts[a+2],y:t.allpts[a+3]},s,u))}}if(t.segpts.length%4===0){var h=t.segpts.length/2,d=h-2;t.midX=(t.segpts[d]+t.segpts[h])/2,t.midY=(t.segpts[d+1]+t.segpts[h+1])/2}else{var p=t.segpts.length/2-1;if(!t.isRound)t.midX=t.segpts[p],t.midY=t.segpts[p+1];else{var g={x:t.segpts[p],y:t.segpts[p+1]},y=t.roundCorners[p/2],m=[g.x-y.cx,g.y-y.cy],x=y.radius/Math.sqrt(Math.pow(m[0],2)+Math.pow(m[1],2));m=m.map(function(_){return _*x}),t.midX=y.cx+m[0],t.midY=y.cy+m[1],t.midVector=m}}}},Kl.checkForInvalidEdgeWarning=function(e){var t=e[0]._private.rscratch;t.nodesOverlap||Ei(t.startX)&&Ei(t.startY)&&Ei(t.endX)&&Ei(t.endY)?t.loggedErr=!1:t.loggedErr||(t.loggedErr=!0,Xa("Edge `"+e.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))},Kl.findEdgeControlPoints=function(e){var t=this;if(!(!e||e.length===0)){for(var r=this,i=r.cy,n=i.hasCompoundNodes(),a={map:new Wd,get:function(B){var O=this.map.get(B[0]);return O!=null?O.get(B[1]):null},set:function(B,O){var L=this.map.get(B[0]);L==null&&(L=new Wd,this.map.set(B[0],L)),L.set(B[1],O)}},s=[],u=[],h=0;h<e.length;h++){var d=e[h],p=d._private,g=d.pstyle("curve-style").value;if(!(d.removed()||!d.takesUpSpace())){if(g==="haystack"){u.push(d);continue}var y=g==="unbundled-bezier"||g.endsWith("segments")||g==="straight"||g==="straight-triangle"||g.endsWith("taxi"),m=g==="unbundled-bezier"||g==="bezier",x=p.source,_=p.target,E=x.poolIndex(),w=_.poolIndex(),C=[E,w].sort(),A=a.get(C);A==null&&(A={eles:[]},a.set(C,A),s.push(C)),A.eles.push(d),y&&(A.hasUnbundled=!0),m&&(A.hasBezier=!0)}}for(var M=function(B){var O=s[B],L=a.get(O),$=void 0;if(!L.hasUnbundled){var G=L.eles[0].parallelEdges().filter(function(ne){return ne.isBundledBezier()});WB(L.eles),G.forEach(function(ne){return L.eles.push(ne)}),L.eles.sort(function(ne,He){return ne.poolIndex()-He.poolIndex()})}var z=L.eles[0],F=z.source(),X=z.target();if(F.poolIndex()>X.poolIndex()){var I=F;F=X,X=I}var j=L.srcPos=F.position(),H=L.tgtPos=X.position(),V=L.srcW=F.outerWidth(),P=L.srcH=F.outerHeight(),q=L.tgtW=X.outerWidth(),Z=L.tgtH=X.outerHeight(),J=L.srcShape=r.nodeShapes[t.getNodeShape(F)],ae=L.tgtShape=r.nodeShapes[t.getNodeShape(X)],ue=L.srcCornerRadius=F.pstyle("corner-radius").value==="auto"?"auto":F.pstyle("corner-radius").pfValue,be=L.tgtCornerRadius=X.pstyle("corner-radius").value==="auto"?"auto":X.pstyle("corner-radius").pfValue,Le=L.tgtRs=X._private.rscratch,xe=L.srcRs=F._private.rscratch;L.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var Ae=0;Ae<L.eles.length;Ae++){var oe=L.eles[Ae],he=oe[0]._private.rscratch,le=oe.pstyle("curve-style").value,ke=le==="unbundled-bezier"||le.endsWith("segments")||le.endsWith("taxi"),pe=!F.same(oe.source());if(!L.calculatedIntersection&&F!==X&&(L.hasBezier||L.hasUnbundled)){L.calculatedIntersection=!0;var qe=J.intersectLine(j.x,j.y,V,P,H.x,H.y,0,ue,xe),me=L.srcIntn=qe,st=ae.intersectLine(H.x,H.y,q,Z,j.x,j.y,0,be,Le),we=L.tgtIntn=st,Et=L.intersectionPts={x1:qe[0],x2:st[0],y1:qe[1],y2:st[1]},wt=L.posPts={x1:j.x,x2:H.x,y1:j.y,y2:H.y},Tt=st[1]-qe[1],er=st[0]-qe[0],tr=Math.sqrt(er*er+Tt*Tt),kr=L.vector={x:er,y:Tt},fr=L.vectorNorm={x:kr.x/tr,y:kr.y/tr},Mt={x:-fr.y,y:fr.x};L.nodesOverlap=!Ei(tr)||ae.checkPoint(qe[0],qe[1],0,q,Z,H.x,H.y,be,Le)||J.checkPoint(st[0],st[1],0,V,P,j.x,j.y,ue,xe),L.vectorNormInverse=Mt,$={nodesOverlap:L.nodesOverlap,dirCounts:L.dirCounts,calculatedIntersection:!0,hasBezier:L.hasBezier,hasUnbundled:L.hasUnbundled,eles:L.eles,srcPos:H,srcRs:Le,tgtPos:j,tgtRs:xe,srcW:q,srcH:Z,tgtW:V,tgtH:P,srcIntn:we,tgtIntn:me,srcShape:ae,tgtShape:J,posPts:{x1:wt.x2,y1:wt.y2,x2:wt.x1,y2:wt.y1},intersectionPts:{x1:Et.x2,y1:Et.y2,x2:Et.x1,y2:Et.y1},vector:{x:-kr.x,y:-kr.y},vectorNorm:{x:-fr.x,y:-fr.y},vectorNormInverse:{x:-Mt.x,y:-Mt.y}}}var Kt=pe?$:L;he.nodesOverlap=Kt.nodesOverlap,he.srcIntn=Kt.srcIntn,he.tgtIntn=Kt.tgtIntn,he.isRound=le.startsWith("round"),n&&(F.isParent()||F.isChild()||X.isParent()||X.isChild())&&(F.parents().anySame(X)||X.parents().anySame(F)||F.same(X)&&F.isParent())?t.findCompoundLoopPoints(oe,Kt,Ae,ke):F===X?t.findLoopPoints(oe,Kt,Ae,ke):le.endsWith("segments")?t.findSegmentsPoints(oe,Kt):le.endsWith("taxi")?t.findTaxiPoints(oe,Kt):le==="straight"||!ke&&L.eles.length%2===1&&Ae===Math.floor(L.eles.length/2)?t.findStraightEdgePoints(oe):t.findBezierPoints(oe,Kt,Ae,ke,pe),t.findEndpoints(oe),t.tryToCorrectInvalidPoints(oe,Kt),t.checkForInvalidEdgeWarning(oe),t.storeAllpts(oe),t.storeEdgeProjections(oe),t.calculateArrowAngles(oe),t.recalculateEdgeLabelProjections(oe),t.calculateLabelAngles(oe)}},N=0;N<s.length;N++)M(N);this.findHaystackPoints(u)}},Kl.getSegmentPoints=function(e){var t=e[0]._private.rscratch;this.recalculateRenderedStyle(e);var r=t.edgeType;if(r==="segments")return uEe(t.segpts)},Kl.getControlPoints=function(e){var t=e[0]._private.rscratch;this.recalculateRenderedStyle(e);var r=t.edgeType;if(r==="bezier"||r==="multibezier"||r==="self"||r==="compound")return uEe(t.ctrlpts)},Kl.getEdgeMidpoint=function(e){var t=e[0]._private.rscratch;return this.recalculateRenderedStyle(e),{x:t.midX,y:t.midY}},cw={},cw.manualEndptToPx=function(e,t){var r=this,i=e.position(),n=e.outerWidth(),a=e.outerHeight(),s=e._private.rscratch;if(t.value.length===2){var u=[t.pfValue[0],t.pfValue[1]];return t.units[0]==="%"&&(u[0]=u[0]*n),t.units[1]==="%"&&(u[1]=u[1]*a),u[0]+=i.x,u[1]+=i.y,u}else{var h=t.pfValue[0];h=-Math.PI/2+h;var d=2*Math.max(n,a),p=[i.x+Math.cos(h)*d,i.y+Math.sin(h)*d];return r.nodeShapes[this.getNodeShape(e)].intersectLine(i.x,i.y,n,a,p[0],p[1],0,e.pstyle("corner-radius").value==="auto"?"auto":e.pstyle("corner-radius").pfValue,s)}},cw.findEndpoints=function(e){var t=this,r,i=e.source()[0],n=e.target()[0],a=i.position(),s=n.position(),u=e.pstyle("target-arrow-shape").value,h=e.pstyle("source-arrow-shape").value,d=e.pstyle("target-distance-from-node").pfValue,p=e.pstyle("source-distance-from-node").pfValue,g=i._private.rscratch,y=n._private.rscratch,m=e.pstyle("curve-style").value,x=e._private.rscratch,_=x.edgeType,E=m==="taxi",w=_==="self"||_==="compound",C=_==="bezier"||_==="multibezier"||w,A=_!=="bezier",M=_==="straight"||_==="segments",N=_==="segments",B=C||A||M,O=w||E,L=e.pstyle("source-endpoint"),$=O?"outside-to-node":L.value,G=i.pstyle("corner-radius").value==="auto"?"auto":i.pstyle("corner-radius").pfValue,z=e.pstyle("target-endpoint"),F=O?"outside-to-node":z.value,X=n.pstyle("corner-radius").value==="auto"?"auto":n.pstyle("corner-radius").pfValue;x.srcManEndpt=L,x.tgtManEndpt=z;var I,j,H,V;if(C){var P=[x.ctrlpts[0],x.ctrlpts[1]],q=A?[x.ctrlpts[x.ctrlpts.length-2],x.ctrlpts[x.ctrlpts.length-1]]:P;I=q,j=P}else if(M){var Z=N?x.segpts.slice(0,2):[s.x,s.y],J=N?x.segpts.slice(x.segpts.length-2):[a.x,a.y];I=J,j=Z}if(F==="inside-to-node")r=[s.x,s.y];else if(z.units)r=this.manualEndptToPx(n,z);else if(F==="outside-to-line")r=x.tgtIntn;else if(F==="outside-to-node"||F==="outside-to-node-or-label"?H=I:(F==="outside-to-line"||F==="outside-to-line-or-label")&&(H=[a.x,a.y]),r=t.nodeShapes[this.getNodeShape(n)].intersectLine(s.x,s.y,n.outerWidth(),n.outerHeight(),H[0],H[1],0,X,y),F==="outside-to-node-or-label"||F==="outside-to-line-or-label"){var ae=n._private.rscratch,ue=ae.labelWidth,be=ae.labelHeight,Le=ae.labelX,xe=ae.labelY,Ae=ue/2,oe=be/2,he=n.pstyle("text-valign").value;he==="top"?xe-=oe:he==="bottom"&&(xe+=oe);var le=n.pstyle("text-halign").value;le==="left"?Le-=Ae:le==="right"&&(Le+=Ae);var ke=ew(H[0],H[1],[Le-Ae,xe-oe,Le+Ae,xe-oe,Le+Ae,xe+oe,Le-Ae,xe+oe],s.x,s.y);if(ke.length>0){var pe=a,qe=Hm(pe,ux(r)),me=Hm(pe,ux(ke)),st=qe;if(me<qe&&(r=ke,st=me),ke.length>2){var we=Hm(pe,{x:ke[2],y:ke[3]});we<st&&(r=[ke[2],ke[3]])}}}var Et=i8(r,I,t.arrowShapes[u].spacing(e)+d),wt=i8(r,I,t.arrowShapes[u].gap(e)+d);if(x.endX=wt[0],x.endY=wt[1],x.arrowEndX=Et[0],x.arrowEndY=Et[1],$==="inside-to-node")r=[a.x,a.y];else if(L.units)r=this.manualEndptToPx(i,L);else if($==="outside-to-line")r=x.srcIntn;else if($==="outside-to-node"||$==="outside-to-node-or-label"?V=j:($==="outside-to-line"||$==="outside-to-line-or-label")&&(V=[s.x,s.y]),r=t.nodeShapes[this.getNodeShape(i)].intersectLine(a.x,a.y,i.outerWidth(),i.outerHeight(),V[0],V[1],0,G,g),$==="outside-to-node-or-label"||$==="outside-to-line-or-label"){var Tt=i._private.rscratch,er=Tt.labelWidth,tr=Tt.labelHeight,kr=Tt.labelX,fr=Tt.labelY,Mt=er/2,Kt=tr/2,ne=i.pstyle("text-valign").value;ne==="top"?fr-=Kt:ne==="bottom"&&(fr+=Kt);var He=i.pstyle("text-halign").value;He==="left"?kr-=Mt:He==="right"&&(kr+=Mt);var Te=ew(V[0],V[1],[kr-Mt,fr-Kt,kr+Mt,fr-Kt,kr+Mt,fr+Kt,kr-Mt,fr+Kt],a.x,a.y);if(Te.length>0){var Qe=s,ce=Hm(Qe,ux(r)),Ut=Hm(Qe,ux(Te)),fe=ce;if(Ut<ce&&(r=[Te[0],Te[1]],fe=Ut),Te.length>2){var ze=Hm(Qe,{x:Te[2],y:Te[3]});ze<fe&&(r=[Te[2],Te[3]])}}}var yt=i8(r,j,t.arrowShapes[h].spacing(e)+p),bt=i8(r,j,t.arrowShapes[h].gap(e)+p);x.startX=bt[0],x.startY=bt[1],x.arrowStartX=yt[0],x.arrowStartY=yt[1],B&&(!Ei(x.startX)||!Ei(x.startY)||!Ei(x.endX)||!Ei(x.endY)?x.badLine=!0:x.badLine=!1)},cw.getSourceEndpoint=function(e){var t=e[0]._private.rscratch;switch(this.recalculateRenderedStyle(e),t.edgeType){case"haystack":return{x:t.haystackPts[0],y:t.haystackPts[1]};default:return{x:t.arrowStartX,y:t.arrowStartY}}},cw.getTargetEndpoint=function(e){var t=e[0]._private.rscratch;switch(this.recalculateRenderedStyle(e),t.edgeType){case"haystack":return{x:t.haystackPts[2],y:t.haystackPts[3]};default:return{x:t.arrowEndX,y:t.arrowEndY}}},vP={},vP.storeEdgeProjections=function(e){var t=e._private,r=t.rscratch,i=r.edgeType;if(t.rstyle.bezierPts=null,t.rstyle.linePts=null,t.rstyle.haystackPts=null,i==="multibezier"||i==="bezier"||i==="self"||i==="compound"){t.rstyle.bezierPts=[];for(var n=0;n+5<r.allpts.length;n+=4)sZe(this,e,r.allpts.slice(n,n+6))}else if(i==="segments")for(var a=t.rstyle.linePts=[],n=0;n+1<r.allpts.length;n+=2)a.push({x:r.allpts[n],y:r.allpts[n+1]});else if(i==="haystack"){var s=r.haystackPts;t.rstyle.haystackPts=[{x:s[0],y:s[1]},{x:s[2],y:s[3]}]}t.rstyle.arrowWidth=this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth},vP.recalculateEdgeProjections=function(e){this.findEdgeControlPoints(e)},Kd={},Kd.recalculateNodeLabelProjection=function(e){var t=e.pstyle("label").strValue;if(!Yf(t)){var r,i,n=e._private,a=e.width(),s=e.height(),u=e.padding(),h=e.position(),d=e.pstyle("text-halign").strValue,p=e.pstyle("text-valign").strValue,g=n.rscratch,y=n.rstyle;switch(d){case"left":r=h.x-a/2-u;break;case"right":r=h.x+a/2+u;break;default:r=h.x}switch(p){case"top":i=h.y-s/2-u;break;case"bottom":i=h.y+s/2+u;break;default:i=h.y}g.labelX=r,g.labelY=i,y.labelX=r,y.labelY=i,this.calculateLabelAngles(e),this.applyLabelDimensions(e)}},ZJ=function(e,t){var r=Math.atan(t/e);return e===0&&r<0&&(r=r*-1),r},QJ=function(e,t){var r=t.x-e.x,i=t.y-e.y;return ZJ(r,i)},t9e=function(e,t,r,i){var n=Q5(0,i-.001,1),a=Q5(0,i+.001,1),s=hx(e,t,r,n),u=hx(e,t,r,a);return QJ(s,u)},Kd.recalculateEdgeLabelProjections=function(e){var t,r=e._private,i=r.rscratch,n=this,a={mid:e.pstyle("label").strValue,source:e.pstyle("source-label").strValue,target:e.pstyle("target-label").strValue};if(a.mid||a.source||a.target){t={x:i.midX,y:i.midY};var s=function(p,g,y){Kf(r.rscratch,p,g,y),Kf(r.rstyle,p,g,y)};s("labelX",null,t.x),s("labelY",null,t.y);var u=ZJ(i.midDispX,i.midDispY);s("labelAutoAngle",null,u);var h=function p(){if(p.cache)return p.cache;for(var g=[],y=0;y+5<i.allpts.length;y+=4){var m={x:i.allpts[y],y:i.allpts[y+1]},x={x:i.allpts[y+2],y:i.allpts[y+3]},_={x:i.allpts[y+4],y:i.allpts[y+5]};g.push({p0:m,p1:x,p2:_,startDist:0,length:0,segments:[]})}var E=r.rstyle.bezierPts,w=n.bezierProjPcts.length;function C(O,L,$,G,z){var F=jm(L,$),X=O.segments[O.segments.length-1],I={p0:L,p1:$,t0:G,t1:z,startDist:X?X.startDist+X.length:0,length:F};O.segments.push(I),O.length+=F}for(var A=0;A<g.length;A++){var M=g[A],N=g[A-1];N&&(M.startDist=N.startDist+N.length),C(M,M.p0,E[A*w],0,n.bezierProjPcts[0]);for(var B=0;B<w-1;B++)C(M,E[A*w+B],E[A*w+B+1],n.bezierProjPcts[B],n.bezierProjPcts[B+1]);C(M,E[A*w+w-1],M.p2,n.bezierProjPcts[w-1],1)}return p.cache=g},d=function(p){var g,y=p==="source";if(a[p]){var m=e.pstyle(p+"-text-offset").pfValue;switch(i.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var x=h(),_,E=0,w=0,C=0;C<x.length;C++){for(var A=x[y?C:x.length-1-C],M=0;M<A.segments.length;M++){var N=A.segments[y?M:A.segments.length-1-M],B=C===x.length-1&&M===A.segments.length-1;if(E=w,w+=N.length,w>=m||B){_={cp:A,segment:N};break}}if(_)break}var O=_.cp,L=_.segment,$=(m-E)/L.length,G=L.t1-L.t0,z=y?L.t0+G*$:L.t1-G*$;z=Q5(0,z,1),t=hx(O.p0,O.p1,O.p2,z),g=t9e(O.p0,O.p1,O.p2,z);break}case"straight":case"segments":case"haystack":{for(var F=0,X,I,j,H,V=i.allpts.length,P=0;P+3<V&&(y?(j={x:i.allpts[P],y:i.allpts[P+1]},H={x:i.allpts[P+2],y:i.allpts[P+3]}):(j={x:i.allpts[V-2-P],y:i.allpts[V-1-P]},H={x:i.allpts[V-4-P],y:i.allpts[V-3-P]}),X=jm(j,H),I=F,F+=X,!(F>=m));P+=2);var q=m-I,Z=q/X;Z=Q5(0,Z,1),t=VCe(j,H,Z),g=QJ(j,H);break}}s("labelX",p,t.x),s("labelY",p,t.y),s("labelAutoAngle",p,g)}};d("source"),d("target"),this.applyLabelDimensions(e)}},Kd.applyLabelDimensions=function(e){this.applyPrefixedLabelDimensions(e),e.isEdge()&&(this.applyPrefixedLabelDimensions(e,"source"),this.applyPrefixedLabelDimensions(e,"target"))},Kd.applyPrefixedLabelDimensions=function(e,t){var r=e._private,i=this.getLabelText(e,t),n=this.calculateLabelDimensions(e,i),a=e.pstyle("line-height").pfValue,s=e.pstyle("text-wrap").strValue,u=qc(r.rscratch,"labelWrapCachedLines",t)||[],h=s!=="wrap"?1:Math.max(u.length,1),d=n.height/h,p=d*a,g=n.width,y=n.height+(h-1)*(a-1)*d;Kf(r.rstyle,"labelWidth",t,g),Kf(r.rscratch,"labelWidth",t,g),Kf(r.rstyle,"labelHeight",t,y),Kf(r.rscratch,"labelHeight",t,y),Kf(r.rscratch,"labelLineHeight",t,p)},Kd.getLabelText=function(e,t){var r=e._private,i=t?t+"-":"",n=e.pstyle(i+"label").strValue,a=e.pstyle("text-transform").value,s=function(ae,ue){return ue?(Kf(r.rscratch,ae,t,ue),ue):qc(r.rscratch,ae,t)};if(!n)return"";a=="none"||(a=="uppercase"?n=n.toUpperCase():a=="lowercase"&&(n=n.toLowerCase()));var u=e.pstyle("text-wrap").value;if(u==="wrap"){var h=s("labelKey");if(h!=null&&s("labelWrapKey")===h)return s("labelWrapCachedText");for(var d="\u200B",p=n.split(`
`),g=e.pstyle("text-max-width").pfValue,y=e.pstyle("text-overflow-wrap").value,m=y==="anywhere",x=[],_=/[\s\u200b]+|$/g,E=0;E<p.length;E++){var w=p[E],C=this.calculateLabelDimensions(e,w),A=C.width;if(m){var M=w.split("").join(d);w=M}if(A>g){var N=w.matchAll(_),B="",O=0,L=jTe(N),$;try{for(L.s();!($=L.n()).done;){var G=$.value,z=G[0],F=w.substring(O,G.index);O=G.index+z.length;var X=B.length===0?F:B+F+z,I=this.calculateLabelDimensions(e,X),j=I.width;j<=g?B+=F+z:(B&&x.push(B),B=F+z)}}catch(ae){L.e(ae)}finally{L.f()}B.match(/^[\s\u200b]+$/)||x.push(B)}else x.push(w)}s("labelWrapCachedLines",x),n=s("labelWrapCachedText",x.join(`
`)),s("labelWrapKey",h)}else if(u==="ellipsis"){var H=e.pstyle("text-max-width").pfValue,V="",P="\u2026",q=!1;if(this.calculateLabelDimensions(e,n).width<H)return n;for(var Z=0;Z<n.length;Z++){var J=this.calculateLabelDimensions(e,V+n[Z]+P).width;if(J>H)break;V+=n[Z],Z===n.length-1&&(q=!0)}return q||(V+=P),V}return n},Kd.getLabelJustification=function(e){var t=e.pstyle("text-justification").strValue,r=e.pstyle("text-halign").strValue;if(t==="auto")if(e.isNode())switch(r){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return t},Kd.calculateLabelDimensions=function(e,t){var r=this,i=r.cy.window(),n=i.document,a=Um(t,e._private.labelDimsKey),s=r.labelDimCache||(r.labelDimCache=[]),u=s[a];if(u!=null)return u;var h=0,d=e.pstyle("font-style").strValue,p=e.pstyle("font-size").pfValue,g=e.pstyle("font-family").strValue,y=e.pstyle("font-weight").strValue,m=this.labelCalcCanvas,x=this.labelCalcCanvasContext;if(!m){m=this.labelCalcCanvas=n.createElement("canvas"),x=this.labelCalcCanvasContext=m.getContext("2d");var _=m.style;_.position="absolute",_.left="-9999px",_.top="-9999px",_.zIndex="-1",_.visibility="hidden",_.pointerEvents="none"}x.font="".concat(d," ").concat(y," ").concat(p,"px ").concat(g);for(var E=0,w=0,C=t.split(`
`),A=0;A<C.length;A++){var M=C[A],N=x.measureText(M),B=Math.ceil(N.width),O=p;E=Math.max(B,E),w+=O}return E+=h,w+=h,s[a]={width:E,height:w}},Kd.calculateLabelAngle=function(e,t){var r=e._private,i=r.rscratch,n=e.isEdge(),a=t?t+"-":"",s=e.pstyle(a+"text-rotation"),u=s.strValue;return u==="none"?0:n&&u==="autorotate"?i.labelAutoAngle:u==="autorotate"?0:s.pfValue},Kd.calculateLabelAngles=function(e){var t=this,r=e.isEdge(),i=e._private,n=i.rscratch;n.labelAngle=t.calculateLabelAngle(e),r&&(n.sourceLabelAngle=t.calculateLabelAngle(e,"source"),n.targetLabelAngle=t.calculateLabelAngle(e,"target"))},JJ={},eee=28,tee=!1,JJ.getNodeShape=function(e){var t=this,r=e.pstyle("shape").value;if(r==="cutrectangle"&&(e.width()<eee||e.height()<eee))return tee||(Xa("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),tee=!0),"rectangle";if(e.isParent())return r==="rectangle"||r==="roundrectangle"||r==="round-rectangle"||r==="cutrectangle"||r==="cut-rectangle"||r==="barrel"?r:"rectangle";if(r==="polygon"){var i=e.pstyle("shape-polygon-points").value;return t.nodeShapes.makePolygon(i).name}return r},M8={},M8.registerCalculationListeners=function(){var e=this.cy,t=e.collection(),r=this,i=function(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(t.merge(a),s)for(var u=0;u<a.length;u++){var h=a[u],d=h._private,p=d.rstyle;p.clean=!1,p.cleanConnected=!1}};r.binder(e).on("bounds.* dirty.*",function(a){var s=a.target;i(s)}).on("style.* background.*",function(a){var s=a.target;i(s,!1)});var n=function(a){if(a){var s=r.onUpdateEleCalcsFns;t.cleanStyle();for(var u=0;u<t.length;u++){var h=t[u],d=h._private.rstyle;h.isNode()&&!d.cleanConnected&&(i(h.connectedEdges()),d.cleanConnected=!0)}if(s)for(var p=0;p<s.length;p++){var g=s[p];g(a,t)}r.recalculateRenderedStyle(t),t=e.collection()}};r.flushRenderedStyleQueue=function(){n(!0)},r.beforeRender(n,r.beforeRenderPriorities.eleCalcs)},M8.onUpdateEleCalcs=function(e){var t=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];t.push(e)},M8.recalculateRenderedStyle=function(e,t){var r=function(A){return A._private.rstyle.cleanConnected},i=[],n=[];if(!this.destroyed){t===void 0&&(t=!0);for(var a=0;a<e.length;a++){var s=e[a],u=s._private,h=u.rstyle;s.isEdge()&&(!r(s.source())||!r(s.target()))&&(h.clean=!1),!(t&&h.clean||s.removed())&&s.pstyle("display").value!=="none"&&(u.group==="nodes"?n.push(s):i.push(s),h.clean=!0)}for(var d=0;d<n.length;d++){var p=n[d],g=p._private,y=g.rstyle,m=p.position();this.recalculateNodeLabelProjection(p),y.nodeX=m.x,y.nodeY=m.y,y.nodeW=p.pstyle("width").pfValue,y.nodeH=p.pstyle("height").pfValue}this.recalculateEdgeProjections(i);for(var x=0;x<i.length;x++){var _=i[x],E=_._private,w=E.rstyle,C=E.rscratch;w.srcX=C.arrowStartX,w.srcY=C.arrowStartY,w.tgtX=C.arrowEndX,w.tgtY=C.arrowEndY,w.midX=C.midX,w.midY=C.midY,w.labelAngle=C.labelAngle,w.sourceLabelAngle=C.sourceLabelAngle,w.targetLabelAngle=C.targetLabelAngle}}},L8={},L8.updateCachedGrabbedEles=function(){var e=this.cachedZSortedEles;if(e){e.drag=[],e.nondrag=[];for(var t=[],r=0;r<e.length;r++){var i=e[r],n=i._private.rscratch;i.grabbed()&&!i.isParent()?t.push(i):n.inDragLayer?e.drag.push(i):e.nondrag.push(i)}for(var r=0;r<t.length;r++){var i=t[r];e.drag.push(i)}}},L8.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null},L8.getCachedZSortedEles=function(e){if(e||!this.cachedZSortedEles){var t=this.cy.mutableElements().toArray();t.sort(NJ),t.interactive=t.filter(function(r){return r.interactive()}),this.cachedZSortedEles=t,this.updateCachedGrabbedEles()}else t=this.cachedZSortedEles;return t},ree={},[Zm,A8,Kl,cw,vP,Kd,JJ,M8,L8].forEach(function(e){Rn(ree,e)}),iee={},iee.getCachedImage=function(e,t,r){var i=this,n=i.imageCache=i.imageCache||{},a=n[e];if(a)return a.image.complete||a.image.addEventListener("load",r),a.image;a=n[e]=n[e]||{};var s=a.image=new Image;s.addEventListener("load",r),s.addEventListener("error",function(){s.error=!0});var u="data:",h=e.substring(0,u.length).toLowerCase()===u;return h||(t=t==="null"?null:t,s.crossOrigin=t),s.src=e,s},kx={},kx.registerBinding=function(e,t,r,i){var n=Array.prototype.slice.apply(arguments,[1]);if(Array.isArray(e)){for(var a=[],s=0;s<e.length;s++){var u=e[s];if(u!==void 0){var h=this.binder(u);a.push(h.on.apply(h,n))}}return a}var h=this.binder(e);return h.on.apply(h,n)},kx.binder=function(e){var t=this,r=t.cy.window(),i=e===r||e===r.document||e===r.document.body||wEe(e);if(t.supportsPassiveEvents==null){var n=!1;try{var a=Object.defineProperty({},"passive",{get:function(){return n=!0,!0}});r.addEventListener("test",null,a)}catch{}t.supportsPassiveEvents=n}var s=function(u,h,d){var p=Array.prototype.slice.call(arguments);return i&&t.supportsPassiveEvents&&(p[2]={capture:d??!1,passive:!1,once:!1}),t.bindings.push({target:e,args:p}),(e.addEventListener||e.on).apply(e,p),this};return{on:s,addEventListener:s,addListener:s,bind:s}},kx.nodeIsDraggable=function(e){return e&&e.isNode()&&!e.locked()&&e.grabbable()},kx.nodeIsGrabbable=function(e){return this.nodeIsDraggable(e)&&e.interactive()},kx.load=function(){var e=this,t=e.cy.window(),r=function(ne){return ne.selected()},i=function(ne){var He=ne.getRootNode();if(He&&He.nodeType===11&&He.host!==void 0)return He},n=function(ne,He,Te,Qe){ne==null&&(ne=e.cy);for(var ce=0;ce<He.length;ce++){var Ut=He[ce];ne.emit({originalEvent:Te,type:Ut,position:Qe})}},a=function(ne){return ne.shiftKey||ne.metaKey||ne.ctrlKey},s=function(ne,He){var Te=!0;if(e.cy.hasCompoundNodes()&&ne&&ne.pannable())for(var Qe=0;He&&Qe<He.length;Qe++){var ne=He[Qe];if(ne.isNode()&&ne.isParent()&&!ne.pannable()){Te=!1;break}}else Te=!0;return Te},u=function(ne){ne[0]._private.grabbed=!0},h=function(ne){ne[0]._private.grabbed=!1},d=function(ne){ne[0]._private.rscratch.inDragLayer=!0},p=function(ne){ne[0]._private.rscratch.inDragLayer=!1},g=function(ne){ne[0]._private.rscratch.isGrabTarget=!0},y=function(ne){ne[0]._private.rscratch.isGrabTarget=!1},m=function(ne,He){var Te=He.addToList,Qe=Te.has(ne);!Qe&&ne.grabbable()&&!ne.locked()&&(Te.merge(ne),u(ne))},x=function(ne,He){if(ne.cy().hasCompoundNodes()&&!(He.inDragLayer==null&&He.addToList==null)){var Te=ne.descendants();He.inDragLayer&&(Te.forEach(d),Te.connectedEdges().forEach(d)),He.addToList&&m(Te,He)}},_=function(ne,He){He=He||{};var Te=ne.cy().hasCompoundNodes();He.inDragLayer&&(ne.forEach(d),ne.neighborhood().stdFilter(function(Qe){return!Te||Qe.isEdge()}).forEach(d)),He.addToList&&ne.forEach(function(Qe){m(Qe,He)}),x(ne,He),C(ne,{inDragLayer:He.inDragLayer}),e.updateCachedGrabbedEles()},E=_,w=function(ne){ne&&(e.getCachedZSortedEles().forEach(function(He){h(He),p(He),y(He)}),e.updateCachedGrabbedEles())},C=function(ne,He){if(!(He.inDragLayer==null&&He.addToList==null)&&ne.cy().hasCompoundNodes()){var Te=ne.ancestors().orphans();if(!Te.same(ne)){var Qe=Te.descendants().spawnSelf().merge(Te).unmerge(ne).unmerge(ne.descendants()),ce=Qe.connectedEdges();He.inDragLayer&&(ce.forEach(d),Qe.forEach(d)),He.addToList&&Qe.forEach(function(Ut){m(Ut,He)})}}},A=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},M=typeof MutationObserver<"u",N=typeof ResizeObserver<"u";M?(e.removeObserver=new MutationObserver(function(ne){for(var He=0;He<ne.length;He++){var Te=ne[He],Qe=Te.removedNodes;if(Qe)for(var ce=0;ce<Qe.length;ce++){var Ut=Qe[ce];if(Ut===e.container){e.destroy();break}}}}),e.container.parentNode&&e.removeObserver.observe(e.container.parentNode,{childList:!0})):e.registerBinding(e.container,"DOMNodeRemoved",function(ne){e.destroy()});var B=WS(function(){e.cy.resize()},100);M&&(e.styleObserver=new MutationObserver(B),e.styleObserver.observe(e.container,{attributes:!0})),e.registerBinding(t,"resize",B),N&&(e.resizeObserver=new ResizeObserver(B),e.resizeObserver.observe(e.container));var O=function(ne,He){for(;ne!=null;)He(ne),ne=ne.parentNode},L=function(){e.invalidateContainerClientCoordsCache()};O(e.container,function(ne){e.registerBinding(ne,"transitionend",L),e.registerBinding(ne,"animationend",L),e.registerBinding(ne,"scroll",L)}),e.registerBinding(e.container,"contextmenu",function(ne){ne.preventDefault()});var $=function(){return e.selection[4]!==0},G=function(ne){for(var He=e.findContainerClientCoords(),Te=He[0],Qe=He[1],ce=He[2],Ut=He[3],fe=ne.touches?ne.touches:[ne],ze=!1,yt=0;yt<fe.length;yt++){var bt=fe[yt];if(Te<=bt.clientX&&bt.clientX<=Te+ce&&Qe<=bt.clientY&&bt.clientY<=Qe+Ut){ze=!0;break}}if(!ze)return!1;for(var At=e.container,ct=ne.target,zt=ct.parentNode,ft=!1;zt;){if(zt===At){ft=!0;break}zt=zt.parentNode}return!!ft};e.registerBinding(e.container,"mousedown",function(ne){if(G(ne)&&!(e.hoverData.which===1&&ne.which!==1)){ne.preventDefault(),A(),e.hoverData.capture=!0,e.hoverData.which=ne.which;var He=e.cy,Te=[ne.clientX,ne.clientY],Qe=e.projectIntoViewport(Te[0],Te[1]),ce=e.selection,Ut=e.findNearestElements(Qe[0],Qe[1],!0,!1),fe=Ut[0],ze=e.dragData.possibleDragElements;e.hoverData.mdownPos=Qe,e.hoverData.mdownGPos=Te;var yt=function(){e.hoverData.tapholdCancelled=!1,clearTimeout(e.hoverData.tapholdTimeout),e.hoverData.tapholdTimeout=setTimeout(function(){if(!e.hoverData.tapholdCancelled){var ft=e.hoverData.down;ft?ft.emit({originalEvent:ne,type:"taphold",position:{x:Qe[0],y:Qe[1]}}):He.emit({originalEvent:ne,type:"taphold",position:{x:Qe[0],y:Qe[1]}})}},e.tapholdDuration)};if(ne.which==3){e.hoverData.cxtStarted=!0;var bt={originalEvent:ne,type:"cxttapstart",position:{x:Qe[0],y:Qe[1]}};fe?(fe.activate(),fe.emit(bt),e.hoverData.down=fe):He.emit(bt),e.hoverData.downTime=new Date().getTime(),e.hoverData.cxtDragged=!1}else if(ne.which==1){fe&&fe.activate();{if(fe!=null&&e.nodeIsGrabbable(fe)){var At=function(ft){return{originalEvent:ne,type:ft,position:{x:Qe[0],y:Qe[1]}}},ct=function(ft){ft.emit(At("grab"))};if(g(fe),!fe.selected())ze=e.dragData.possibleDragElements=He.collection(),E(fe,{addToList:ze}),fe.emit(At("grabon")).emit(At("grab"));else{ze=e.dragData.possibleDragElements=He.collection();var zt=He.$(function(ft){return ft.isNode()&&ft.selected()&&e.nodeIsGrabbable(ft)});_(zt,{addToList:ze}),fe.emit(At("grabon")),zt.forEach(ct)}e.redrawHint("eles",!0),e.redrawHint("drag",!0)}e.hoverData.down=fe,e.hoverData.downs=Ut,e.hoverData.downTime=new Date().getTime()}n(fe,["mousedown","tapstart","vmousedown"],ne,{x:Qe[0],y:Qe[1]}),fe==null?(ce[4]=1,e.data.bgActivePosistion={x:Qe[0],y:Qe[1]},e.redrawHint("select",!0),e.redraw()):fe.pannable()&&(ce[4]=1),yt()}ce[0]=ce[2]=Qe[0],ce[1]=ce[3]=Qe[1]}},!1);var z=i(e.container);e.registerBinding([t,z],"mousemove",function(ne){var He=e.hoverData.capture;if(!(!He&&!G(ne))){var Te=!1,Qe=e.cy,ce=Qe.zoom(),Ut=[ne.clientX,ne.clientY],fe=e.projectIntoViewport(Ut[0],Ut[1]),ze=e.hoverData.mdownPos,yt=e.hoverData.mdownGPos,bt=e.selection,At=null;!e.hoverData.draggingEles&&!e.hoverData.dragging&&!e.hoverData.selecting&&(At=e.findNearestElement(fe[0],fe[1],!0,!1));var ct=e.hoverData.last,zt=e.hoverData.down,ft=[fe[0]-bt[2],fe[1]-bt[3]],Pr=e.dragData.possibleDragElements,Mi;if(yt){var Di=Ut[0]-yt[0],ri=Di*Di,Gi=Ut[1]-yt[1],Br=Gi*Gi,sr=ri+Br;e.hoverData.isOverThresholdDrag=Mi=sr>=e.desktopTapThreshold2}var hr=a(ne);Mi&&(e.hoverData.tapholdCancelled=!0);var Ci=function(){var xa=e.hoverData.dragDelta=e.hoverData.dragDelta||[];xa.length===0?(xa.push(ft[0]),xa.push(ft[1])):(xa[0]+=ft[0],xa[1]+=ft[1])};Te=!0,n(At,["mousemove","vmousemove","tapdrag"],ne,{x:fe[0],y:fe[1]});var _r=function(){e.data.bgActivePosistion=void 0,e.hoverData.selecting||Qe.emit({originalEvent:ne,type:"boxstart",position:{x:fe[0],y:fe[1]}}),bt[4]=1,e.hoverData.selecting=!0,e.redrawHint("select",!0),e.redraw()};if(e.hoverData.which===3){if(Mi){var ln={originalEvent:ne,type:"cxtdrag",position:{x:fe[0],y:fe[1]}};zt?zt.emit(ln):Qe.emit(ln),e.hoverData.cxtDragged=!0,(!e.hoverData.cxtOver||At!==e.hoverData.cxtOver)&&(e.hoverData.cxtOver&&e.hoverData.cxtOver.emit({originalEvent:ne,type:"cxtdragout",position:{x:fe[0],y:fe[1]}}),e.hoverData.cxtOver=At,At&&At.emit({originalEvent:ne,type:"cxtdragover",position:{x:fe[0],y:fe[1]}}))}}else if(e.hoverData.dragging){if(Te=!0,Qe.panningEnabled()&&Qe.userPanningEnabled()){var en;if(e.hoverData.justStartedPan){var bi=e.hoverData.mdownPos;en={x:(fe[0]-bi[0])*ce,y:(fe[1]-bi[1])*ce},e.hoverData.justStartedPan=!1}else en={x:ft[0]*ce,y:ft[1]*ce};Qe.panBy(en),Qe.emit("dragpan"),e.hoverData.dragged=!0}fe=e.projectIntoViewport(ne.clientX,ne.clientY)}else if(bt[4]==1&&(zt==null||zt.pannable())){if(Mi){if(!e.hoverData.dragging&&Qe.boxSelectionEnabled()&&(hr||!Qe.panningEnabled()||!Qe.userPanningEnabled()))_r();else if(!e.hoverData.selecting&&Qe.panningEnabled()&&Qe.userPanningEnabled()){var gi=s(zt,e.hoverData.downs);gi&&(e.hoverData.dragging=!0,e.hoverData.justStartedPan=!0,bt[4]=0,e.data.bgActivePosistion=ux(ze),e.redrawHint("select",!0),e.redraw())}zt&&zt.pannable()&&zt.active()&&zt.unactivate()}}else{if(zt&&zt.pannable()&&zt.active()&&zt.unactivate(),(!zt||!zt.grabbed())&&At!=ct&&(ct&&n(ct,["mouseout","tapdragout"],ne,{x:fe[0],y:fe[1]}),At&&n(At,["mouseover","tapdragover"],ne,{x:fe[0],y:fe[1]}),e.hoverData.last=At),zt)if(Mi){if(Qe.boxSelectionEnabled()&&hr)zt&&zt.grabbed()&&(w(Pr),zt.emit("freeon"),Pr.emit("free"),e.dragData.didDrag&&(zt.emit("dragfreeon"),Pr.emit("dragfree"))),_r();else if(zt&&zt.grabbed()&&e.nodeIsDraggable(zt)){var Fr=!e.dragData.didDrag;Fr&&e.redrawHint("eles",!0),e.dragData.didDrag=!0,e.hoverData.draggingEles||_(Pr,{inDragLayer:!0});var Bi={x:0,y:0};if(Ei(ft[0])&&Ei(ft[1])&&(Bi.x+=ft[0],Bi.y+=ft[1],Fr)){var Xr=e.hoverData.dragDelta;Xr&&Ei(Xr[0])&&Ei(Xr[1])&&(Bi.x+=Xr[0],Bi.y+=Xr[1])}e.hoverData.draggingEles=!0,Pr.silentShift(Bi).emit("position drag"),e.redrawHint("drag",!0),e.redraw()}}else Ci();Te=!0}if(bt[2]=fe[0],bt[3]=fe[1],Te)return ne.stopPropagation&&ne.stopPropagation(),ne.preventDefault&&ne.preventDefault(),!1}},!1);var F,X,I;e.registerBinding(t,"mouseup",function(ne){if(!(e.hoverData.which===1&&ne.which!==1&&e.hoverData.capture)){var He=e.hoverData.capture;if(He){e.hoverData.capture=!1;var Te=e.cy,Qe=e.projectIntoViewport(ne.clientX,ne.clientY),ce=e.selection,Ut=e.findNearestElement(Qe[0],Qe[1],!0,!1),fe=e.dragData.possibleDragElements,ze=e.hoverData.down,yt=a(ne);if(e.data.bgActivePosistion&&(e.redrawHint("select",!0),e.redraw()),e.hoverData.tapholdCancelled=!0,e.data.bgActivePosistion=void 0,ze&&ze.unactivate(),e.hoverData.which===3){var bt={originalEvent:ne,type:"cxttapend",position:{x:Qe[0],y:Qe[1]}};if(ze?ze.emit(bt):Te.emit(bt),!e.hoverData.cxtDragged){var At={originalEvent:ne,type:"cxttap",position:{x:Qe[0],y:Qe[1]}};ze?ze.emit(At):Te.emit(At)}e.hoverData.cxtDragged=!1,e.hoverData.which=null}else if(e.hoverData.which===1){if(n(Ut,["mouseup","tapend","vmouseup"],ne,{x:Qe[0],y:Qe[1]}),!e.dragData.didDrag&&!e.hoverData.dragged&&!e.hoverData.selecting&&!e.hoverData.isOverThresholdDrag&&(n(ze,["click","tap","vclick"],ne,{x:Qe[0],y:Qe[1]}),X=!1,ne.timeStamp-I<=Te.multiClickDebounceTime()?(F&&clearTimeout(F),X=!0,I=null,n(ze,["dblclick","dbltap","vdblclick"],ne,{x:Qe[0],y:Qe[1]})):(F=setTimeout(function(){X||n(ze,["oneclick","onetap","voneclick"],ne,{x:Qe[0],y:Qe[1]})},Te.multiClickDebounceTime()),I=ne.timeStamp)),ze==null&&!e.dragData.didDrag&&!e.hoverData.selecting&&!e.hoverData.dragged&&!a(ne)&&(Te.$(r).unselect(["tapunselect"]),fe.length>0&&e.redrawHint("eles",!0),e.dragData.possibleDragElements=fe=Te.collection()),Ut==ze&&!e.dragData.didDrag&&!e.hoverData.selecting&&Ut!=null&&Ut._private.selectable&&(e.hoverData.dragging||(Te.selectionType()==="additive"||yt?Ut.selected()?Ut.unselect(["tapunselect"]):Ut.select(["tapselect"]):yt||(Te.$(r).unmerge(Ut).unselect(["tapunselect"]),Ut.select(["tapselect"]))),e.redrawHint("eles",!0)),e.hoverData.selecting){var ct=Te.collection(e.getAllInBox(ce[0],ce[1],ce[2],ce[3]));e.redrawHint("select",!0),ct.length>0&&e.redrawHint("eles",!0),Te.emit({type:"boxend",originalEvent:ne,position:{x:Qe[0],y:Qe[1]}});var zt=function(Pr){return Pr.selectable()&&!Pr.selected()};Te.selectionType()==="additive"||yt||Te.$(r).unmerge(ct).unselect(),ct.emit("box").stdFilter(zt).select().emit("boxselect"),e.redraw()}if(e.hoverData.dragging&&(e.hoverData.dragging=!1,e.redrawHint("select",!0),e.redrawHint("eles",!0),e.redraw()),!ce[4]){e.redrawHint("drag",!0),e.redrawHint("eles",!0);var ft=ze&&ze.grabbed();w(fe),ft&&(ze.emit("freeon"),fe.emit("free"),e.dragData.didDrag&&(ze.emit("dragfreeon"),fe.emit("dragfree")))}}ce[4]=0,e.hoverData.down=null,e.hoverData.cxtStarted=!1,e.hoverData.draggingEles=!1,e.hoverData.selecting=!1,e.hoverData.isOverThresholdDrag=!1,e.dragData.didDrag=!1,e.hoverData.dragged=!1,e.hoverData.dragDelta=[],e.hoverData.mdownPos=null,e.hoverData.mdownGPos=null,e.hoverData.which=null}}},!1);var j=function(ne){if(!e.scrollingPage){var He=e.cy,Te=He.zoom(),Qe=He.pan(),ce=e.projectIntoViewport(ne.clientX,ne.clientY),Ut=[ce[0]*Te+Qe.x,ce[1]*Te+Qe.y];if(e.hoverData.draggingEles||e.hoverData.dragging||e.hoverData.cxtStarted||$()){ne.preventDefault();return}if(He.panningEnabled()&&He.userPanningEnabled()&&He.zoomingEnabled()&&He.userZoomingEnabled()){ne.preventDefault(),e.data.wheelZooming=!0,clearTimeout(e.data.wheelTimeout),e.data.wheelTimeout=setTimeout(function(){e.data.wheelZooming=!1,e.redrawHint("eles",!0),e.redraw()},150);var fe;ne.deltaY!=null?fe=ne.deltaY/-250:ne.wheelDeltaY!=null?fe=ne.wheelDeltaY/1e3:fe=ne.wheelDelta/1e3,fe=fe*e.wheelSensitivity;var ze=ne.deltaMode===1;ze&&(fe*=33);var yt=He.zoom()*Math.pow(10,fe);ne.type==="gesturechange"&&(yt=e.gestureStartZoom*ne.scale),He.zoom({level:yt,renderedPosition:{x:Ut[0],y:Ut[1]}}),He.emit(ne.type==="gesturechange"?"pinchzoom":"scrollzoom")}}};e.registerBinding(e.container,"wheel",j,!0),e.registerBinding(t,"scroll",function(ne){e.scrollingPage=!0,clearTimeout(e.scrollingPageTimeout),e.scrollingPageTimeout=setTimeout(function(){e.scrollingPage=!1},250)},!0),e.registerBinding(e.container,"gesturestart",function(ne){e.gestureStartZoom=e.cy.zoom(),e.hasTouchStarted||ne.preventDefault()},!0),e.registerBinding(e.container,"gesturechange",function(ne){e.hasTouchStarted||j(ne)},!0),e.registerBinding(e.container,"mouseout",function(ne){var He=e.projectIntoViewport(ne.clientX,ne.clientY);e.cy.emit({originalEvent:ne,type:"mouseout",position:{x:He[0],y:He[1]}})},!1),e.registerBinding(e.container,"mouseover",function(ne){var He=e.projectIntoViewport(ne.clientX,ne.clientY);e.cy.emit({originalEvent:ne,type:"mouseover",position:{x:He[0],y:He[1]}})},!1);var H,V,P,q,Z,J,ae,ue,be,Le,xe,Ae,oe,he=function(ne,He,Te,Qe){return Math.sqrt((Te-ne)*(Te-ne)+(Qe-He)*(Qe-He))},le=function(ne,He,Te,Qe){return(Te-ne)*(Te-ne)+(Qe-He)*(Qe-He)},ke;e.registerBinding(e.container,"touchstart",ke=function(ne){if(e.hasTouchStarted=!0,!!G(ne)){A(),e.touchData.capture=!0,e.data.bgActivePosistion=void 0;var He=e.cy,Te=e.touchData.now,Qe=e.touchData.earlier;if(ne.touches[0]){var ce=e.projectIntoViewport(ne.touches[0].clientX,ne.touches[0].clientY);Te[0]=ce[0],Te[1]=ce[1]}if(ne.touches[1]){var ce=e.projectIntoViewport(ne.touches[1].clientX,ne.touches[1].clientY);Te[2]=ce[0],Te[3]=ce[1]}if(ne.touches[2]){var ce=e.projectIntoViewport(ne.touches[2].clientX,ne.touches[2].clientY);Te[4]=ce[0],Te[5]=ce[1]}if(ne.touches[1]){e.touchData.singleTouchMoved=!0,w(e.dragData.touchDragEles);var Ut=e.findContainerClientCoords();be=Ut[0],Le=Ut[1],xe=Ut[2],Ae=Ut[3],H=ne.touches[0].clientX-be,V=ne.touches[0].clientY-Le,P=ne.touches[1].clientX-be,q=ne.touches[1].clientY-Le,oe=0<=H&&H<=xe&&0<=P&&P<=xe&&0<=V&&V<=Ae&&0<=q&&q<=Ae;var fe=He.pan(),ze=He.zoom();Z=he(H,V,P,q),J=le(H,V,P,q),ae=[(H+P)/2,(V+q)/2],ue=[(ae[0]-fe.x)/ze,(ae[1]-fe.y)/ze];var yt=200,bt=yt*yt;if(J<bt&&!ne.touches[2]){var At=e.findNearestElement(Te[0],Te[1],!0,!0),ct=e.findNearestElement(Te[2],Te[3],!0,!0);At&&At.isNode()?(At.activate().emit({originalEvent:ne,type:"cxttapstart",position:{x:Te[0],y:Te[1]}}),e.touchData.start=At):ct&&ct.isNode()?(ct.activate().emit({originalEvent:ne,type:"cxttapstart",position:{x:Te[0],y:Te[1]}}),e.touchData.start=ct):He.emit({originalEvent:ne,type:"cxttapstart",position:{x:Te[0],y:Te[1]}}),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!0,e.touchData.cxtDragged=!1,e.data.bgActivePosistion=void 0,e.redraw();return}}if(ne.touches[2])He.boxSelectionEnabled()&&ne.preventDefault();else if(!ne.touches[1]&&ne.touches[0]){var zt=e.findNearestElements(Te[0],Te[1],!0,!0),ft=zt[0];if(ft!=null&&(ft.activate(),e.touchData.start=ft,e.touchData.starts=zt,e.nodeIsGrabbable(ft))){var Pr=e.dragData.touchDragEles=He.collection(),Mi=null;e.redrawHint("eles",!0),e.redrawHint("drag",!0),ft.selected()?(Mi=He.$(function(sr){return sr.selected()&&e.nodeIsGrabbable(sr)}),_(Mi,{addToList:Pr})):E(ft,{addToList:Pr}),g(ft);var Di=function(sr){return{originalEvent:ne,type:sr,position:{x:Te[0],y:Te[1]}}};ft.emit(Di("grabon")),Mi?Mi.forEach(function(sr){sr.emit(Di("grab"))}):ft.emit(Di("grab"))}n(ft,["touchstart","tapstart","vmousedown"],ne,{x:Te[0],y:Te[1]}),ft==null&&(e.data.bgActivePosistion={x:ce[0],y:ce[1]},e.redrawHint("select",!0),e.redraw()),e.touchData.singleTouchMoved=!1,e.touchData.singleTouchStartTime=+new Date,clearTimeout(e.touchData.tapholdTimeout),e.touchData.tapholdTimeout=setTimeout(function(){e.touchData.singleTouchMoved===!1&&!e.pinching&&!e.touchData.selecting&&n(e.touchData.start,["taphold"],ne,{x:Te[0],y:Te[1]})},e.tapholdDuration)}if(ne.touches.length>=1){for(var ri=e.touchData.startPosition=[null,null,null,null,null,null],Gi=0;Gi<Te.length;Gi++)ri[Gi]=Qe[Gi]=Te[Gi];var Br=ne.touches[0];e.touchData.startGPosition=[Br.clientX,Br.clientY]}}},!1);var pe;e.registerBinding(t,"touchmove",pe=function(ne){var He=e.touchData.capture;if(!(!He&&!G(ne))){var Te=e.selection,Qe=e.cy,ce=e.touchData.now,Ut=e.touchData.earlier,fe=Qe.zoom();if(ne.touches[0]){var ze=e.projectIntoViewport(ne.touches[0].clientX,ne.touches[0].clientY);ce[0]=ze[0],ce[1]=ze[1]}if(ne.touches[1]){var ze=e.projectIntoViewport(ne.touches[1].clientX,ne.touches[1].clientY);ce[2]=ze[0],ce[3]=ze[1]}if(ne.touches[2]){var ze=e.projectIntoViewport(ne.touches[2].clientX,ne.touches[2].clientY);ce[4]=ze[0],ce[5]=ze[1]}var yt=e.touchData.startGPosition,bt;if(He&&ne.touches[0]&&yt){for(var At=[],ct=0;ct<ce.length;ct++)At[ct]=ce[ct]-Ut[ct];var zt=ne.touches[0].clientX-yt[0],ft=zt*zt,Pr=ne.touches[0].clientY-yt[1],Mi=Pr*Pr,Di=ft+Mi;bt=Di>=e.touchTapThreshold2}if(He&&e.touchData.cxt){ne.preventDefault();var ri=ne.touches[0].clientX-be,Gi=ne.touches[0].clientY-Le,Br=ne.touches[1].clientX-be,sr=ne.touches[1].clientY-Le,hr=le(ri,Gi,Br,sr),Ci=hr/J,_r=150,ln=_r*_r,en=1.5,bi=en*en;if(Ci>=bi||hr>=ln){e.touchData.cxt=!1,e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var gi={originalEvent:ne,type:"cxttapend",position:{x:ce[0],y:ce[1]}};e.touchData.start?(e.touchData.start.unactivate().emit(gi),e.touchData.start=null):Qe.emit(gi)}}if(He&&e.touchData.cxt){var gi={originalEvent:ne,type:"cxtdrag",position:{x:ce[0],y:ce[1]}};e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),e.touchData.start?e.touchData.start.emit(gi):Qe.emit(gi),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxtDragged=!0;var Fr=e.findNearestElement(ce[0],ce[1],!0,!0);(!e.touchData.cxtOver||Fr!==e.touchData.cxtOver)&&(e.touchData.cxtOver&&e.touchData.cxtOver.emit({originalEvent:ne,type:"cxtdragout",position:{x:ce[0],y:ce[1]}}),e.touchData.cxtOver=Fr,Fr&&Fr.emit({originalEvent:ne,type:"cxtdragover",position:{x:ce[0],y:ce[1]}}))}else if(He&&ne.touches[2]&&Qe.boxSelectionEnabled())ne.preventDefault(),e.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,e.touchData.selecting||Qe.emit({originalEvent:ne,type:"boxstart",position:{x:ce[0],y:ce[1]}}),e.touchData.selecting=!0,e.touchData.didSelect=!0,Te[4]=1,!Te||Te.length===0||Te[0]===void 0?(Te[0]=(ce[0]+ce[2]+ce[4])/3,Te[1]=(ce[1]+ce[3]+ce[5])/3,Te[2]=(ce[0]+ce[2]+ce[4])/3+1,Te[3]=(ce[1]+ce[3]+ce[5])/3+1):(Te[2]=(ce[0]+ce[2]+ce[4])/3,Te[3]=(ce[1]+ce[3]+ce[5])/3),e.redrawHint("select",!0),e.redraw();else if(He&&ne.touches[1]&&!e.touchData.didSelect&&Qe.zoomingEnabled()&&Qe.panningEnabled()&&Qe.userZoomingEnabled()&&Qe.userPanningEnabled()){ne.preventDefault(),e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var Bi=e.dragData.touchDragEles;if(Bi){e.redrawHint("drag",!0);for(var Xr=0;Xr<Bi.length;Xr++){var xa=Bi[Xr]._private;xa.grabbed=!1,xa.rscratch.inDragLayer=!1}}var Hn=e.touchData.start,ri=ne.touches[0].clientX-be,Gi=ne.touches[0].clientY-Le,Br=ne.touches[1].clientX-be,sr=ne.touches[1].clientY-Le,fa=he(ri,Gi,Br,sr),$s=fa/Z;if(oe){var Za=ri-H,Vs=Gi-V,ks=Br-P,Ws=sr-q,rt=(Za+ks)/2,vi=(Vs+Ws)/2,ai=Qe.zoom(),ga=ai*$s,Ta=Qe.pan(),as=ue[0]*ai+Ta.x,Ol=ue[1]*ai+Ta.y,So={x:-ga/ai*(as-Ta.x-rt)+as,y:-ga/ai*(Ol-Ta.y-vi)+Ol};if(Hn&&Hn.active()){var Bi=e.dragData.touchDragEles;w(Bi),e.redrawHint("drag",!0),e.redrawHint("eles",!0),Hn.unactivate().emit("freeon"),Bi.emit("free"),e.dragData.didDrag&&(Hn.emit("dragfreeon"),Bi.emit("dragfree"))}Qe.viewport({zoom:ga,pan:So,cancelOnFailedZoom:!0}),Qe.emit("pinchzoom"),Z=fa,H=ri,V=Gi,P=Br,q=sr,e.pinching=!0}if(ne.touches[0]){var ze=e.projectIntoViewport(ne.touches[0].clientX,ne.touches[0].clientY);ce[0]=ze[0],ce[1]=ze[1]}if(ne.touches[1]){var ze=e.projectIntoViewport(ne.touches[1].clientX,ne.touches[1].clientY);ce[2]=ze[0],ce[3]=ze[1]}if(ne.touches[2]){var ze=e.projectIntoViewport(ne.touches[2].clientX,ne.touches[2].clientY);ce[4]=ze[0],ce[5]=ze[1]}}else if(ne.touches[0]&&!e.touchData.didSelect){var Ea=e.touchData.start,si=e.touchData.last,Fr;if(!e.hoverData.draggingEles&&!e.swipePanning&&(Fr=e.findNearestElement(ce[0],ce[1],!0,!0)),He&&Ea!=null&&ne.preventDefault(),He&&Ea!=null&&e.nodeIsDraggable(Ea))if(bt){var Bi=e.dragData.touchDragEles,xn=!e.dragData.didDrag;xn&&_(Bi,{inDragLayer:!0}),e.dragData.didDrag=!0;var Gr={x:0,y:0};if(Ei(At[0])&&Ei(At[1])&&(Gr.x+=At[0],Gr.y+=At[1],xn)){e.redrawHint("eles",!0);var ea=e.touchData.dragDelta;ea&&Ei(ea[0])&&Ei(ea[1])&&(Gr.x+=ea[0],Gr.y+=ea[1])}e.hoverData.draggingEles=!0,Bi.silentShift(Gr).emit("position drag"),e.redrawHint("drag",!0),e.touchData.startPosition[0]==Ut[0]&&e.touchData.startPosition[1]==Ut[1]&&e.redrawHint("eles",!0),e.redraw()}else{var ea=e.touchData.dragDelta=e.touchData.dragDelta||[];ea.length===0?(ea.push(At[0]),ea.push(At[1])):(ea[0]+=At[0],ea[1]+=At[1])}if(n(Ea||Fr,["touchmove","tapdrag","vmousemove"],ne,{x:ce[0],y:ce[1]}),(!Ea||!Ea.grabbed())&&Fr!=si&&(si&&si.emit({originalEvent:ne,type:"tapdragout",position:{x:ce[0],y:ce[1]}}),Fr&&Fr.emit({originalEvent:ne,type:"tapdragover",position:{x:ce[0],y:ce[1]}})),e.touchData.last=Fr,He)for(var Xr=0;Xr<ce.length;Xr++)ce[Xr]&&e.touchData.startPosition[Xr]&&bt&&(e.touchData.singleTouchMoved=!0);if(He&&(Ea==null||Ea.pannable())&&Qe.panningEnabled()&&Qe.userPanningEnabled()){var Be=s(Ea,e.touchData.starts);Be&&(ne.preventDefault(),e.data.bgActivePosistion||(e.data.bgActivePosistion=ux(e.touchData.startPosition)),e.swipePanning?(Qe.panBy({x:At[0]*fe,y:At[1]*fe}),Qe.emit("dragpan")):bt&&(e.swipePanning=!0,Qe.panBy({x:zt*fe,y:Pr*fe}),Qe.emit("dragpan"),Ea&&(Ea.unactivate(),e.redrawHint("select",!0),e.touchData.start=null)));var ze=e.projectIntoViewport(ne.touches[0].clientX,ne.touches[0].clientY);ce[0]=ze[0],ce[1]=ze[1]}}for(var ct=0;ct<ce.length;ct++)Ut[ct]=ce[ct];He&&ne.touches.length>0&&!e.hoverData.draggingEles&&!e.swipePanning&&e.data.bgActivePosistion!=null&&(e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),e.redraw())}},!1);var qe;e.registerBinding(t,"touchcancel",qe=function(ne){var He=e.touchData.start;e.touchData.capture=!1,He&&He.unactivate()});var me,st,we,Et;if(e.registerBinding(t,"touchend",me=function(ne){var He=e.touchData.start,Te=e.touchData.capture;if(Te)ne.touches.length===0&&(e.touchData.capture=!1),ne.preventDefault();else return;var Qe=e.selection;e.swipePanning=!1,e.hoverData.draggingEles=!1;var ce=e.cy,Ut=ce.zoom(),fe=e.touchData.now,ze=e.touchData.earlier;if(ne.touches[0]){var yt=e.projectIntoViewport(ne.touches[0].clientX,ne.touches[0].clientY);fe[0]=yt[0],fe[1]=yt[1]}if(ne.touches[1]){var yt=e.projectIntoViewport(ne.touches[1].clientX,ne.touches[1].clientY);fe[2]=yt[0],fe[3]=yt[1]}if(ne.touches[2]){var yt=e.projectIntoViewport(ne.touches[2].clientX,ne.touches[2].clientY);fe[4]=yt[0],fe[5]=yt[1]}He&&He.unactivate();var bt;if(e.touchData.cxt){if(bt={originalEvent:ne,type:"cxttapend",position:{x:fe[0],y:fe[1]}},He?He.emit(bt):ce.emit(bt),!e.touchData.cxtDragged){var At={originalEvent:ne,type:"cxttap",position:{x:fe[0],y:fe[1]}};He?He.emit(At):ce.emit(At)}e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!1,e.touchData.start=null,e.redraw();return}if(!ne.touches[2]&&ce.boxSelectionEnabled()&&e.touchData.selecting){e.touchData.selecting=!1;var ct=ce.collection(e.getAllInBox(Qe[0],Qe[1],Qe[2],Qe[3]));Qe[0]=void 0,Qe[1]=void 0,Qe[2]=void 0,Qe[3]=void 0,Qe[4]=0,e.redrawHint("select",!0),ce.emit({type:"boxend",originalEvent:ne,position:{x:fe[0],y:fe[1]}});var zt=function(_r){return _r.selectable()&&!_r.selected()};ct.emit("box").stdFilter(zt).select().emit("boxselect"),ct.nonempty()&&e.redrawHint("eles",!0),e.redraw()}if(He?.unactivate(),ne.touches[2])e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);else if(!ne.touches[1]&&!ne.touches[0]&&!ne.touches[0]){e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var ft=e.dragData.touchDragEles;if(He!=null){var Pr=He._private.grabbed;w(ft),e.redrawHint("drag",!0),e.redrawHint("eles",!0),Pr&&(He.emit("freeon"),ft.emit("free"),e.dragData.didDrag&&(He.emit("dragfreeon"),ft.emit("dragfree"))),n(He,["touchend","tapend","vmouseup","tapdragout"],ne,{x:fe[0],y:fe[1]}),He.unactivate(),e.touchData.start=null}else{var Mi=e.findNearestElement(fe[0],fe[1],!0,!0);n(Mi,["touchend","tapend","vmouseup","tapdragout"],ne,{x:fe[0],y:fe[1]})}var Di=e.touchData.startPosition[0]-fe[0],ri=Di*Di,Gi=e.touchData.startPosition[1]-fe[1],Br=Gi*Gi,sr=ri+Br,hr=sr*Ut*Ut;e.touchData.singleTouchMoved||(He||ce.$(":selected").unselect(["tapunselect"]),n(He,["tap","vclick"],ne,{x:fe[0],y:fe[1]}),st=!1,ne.timeStamp-Et<=ce.multiClickDebounceTime()?(we&&clearTimeout(we),st=!0,Et=null,n(He,["dbltap","vdblclick"],ne,{x:fe[0],y:fe[1]})):(we=setTimeout(function(){st||n(He,["onetap","voneclick"],ne,{x:fe[0],y:fe[1]})},ce.multiClickDebounceTime()),Et=ne.timeStamp)),He!=null&&!e.dragData.didDrag&&He._private.selectable&&hr<e.touchTapThreshold2&&!e.pinching&&(ce.selectionType()==="single"?(ce.$(r).unmerge(He).unselect(["tapunselect"]),He.select(["tapselect"])):He.selected()?He.unselect(["tapunselect"]):He.select(["tapselect"]),e.redrawHint("eles",!0)),e.touchData.singleTouchMoved=!0}for(var Ci=0;Ci<fe.length;Ci++)ze[Ci]=fe[Ci];e.dragData.didDrag=!1,ne.touches.length===0&&(e.touchData.dragDelta=[],e.touchData.startPosition=[null,null,null,null,null,null],e.touchData.startGPosition=null,e.touchData.didSelect=!1),ne.touches.length<2&&(ne.touches.length===1&&(e.touchData.startGPosition=[ne.touches[0].clientX,ne.touches[0].clientY]),e.pinching=!1,e.redrawHint("eles",!0),e.redraw())},!1),typeof TouchEvent>"u"){var wt=[],Tt=function(ne){return{clientX:ne.clientX,clientY:ne.clientY,force:1,identifier:ne.pointerId,pageX:ne.pageX,pageY:ne.pageY,radiusX:ne.width/2,radiusY:ne.height/2,screenX:ne.screenX,screenY:ne.screenY,target:ne.target}},er=function(ne){return{event:ne,touch:Tt(ne)}},tr=function(ne){wt.push(er(ne))},kr=function(ne){for(var He=0;He<wt.length;He++){var Te=wt[He];if(Te.event.pointerId===ne.pointerId){wt.splice(He,1);return}}},fr=function(ne){var He=wt.filter(function(Te){return Te.event.pointerId===ne.pointerId})[0];He.event=ne,He.touch=Tt(ne)},Mt=function(ne){ne.touches=wt.map(function(He){return He.touch})},Kt=function(ne){return ne.pointerType==="mouse"||ne.pointerType===4};e.registerBinding(e.container,"pointerdown",function(ne){Kt(ne)||(ne.preventDefault(),tr(ne),Mt(ne),ke(ne))}),e.registerBinding(e.container,"pointerup",function(ne){Kt(ne)||(kr(ne),Mt(ne),me(ne))}),e.registerBinding(e.container,"pointercancel",function(ne){Kt(ne)||(kr(ne),Mt(ne),qe(ne))}),e.registerBinding(e.container,"pointermove",function(ne){Kt(ne)||(ne.preventDefault(),fr(ne),Mt(ne),pe(ne))})}},ip={},ip.generatePolygon=function(e,t){return this.nodeShapes[e]={renderer:this,name:e,points:t,draw:function(r,i,n,a,s,u){this.renderer.nodeShapeImpl("polygon",r,i,n,a,s,this.points)},intersectLine:function(r,i,n,a,s,u,h,d){return ew(s,u,this.points,r,i,n/2,a/2,h)},checkPoint:function(r,i,n,a,s,u,h,d){return ep(r,i,this.points,u,h,a,s,[0,-1],n)}}},ip.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,t,r,i,n,a){this.renderer.nodeShapeImpl(this.name,e,t,r,i,n)},intersectLine:function(e,t,r,i,n,a,s,u){return n7e(n,a,e,t,r/2+s,i/2+s)},checkPoint:function(e,t,r,i,n,a,s,u){return Vm(e,t,i,n,a,s,r)}}},ip.generateRoundPolygon=function(e,t){return this.nodeShapes[e]={renderer:this,name:e,points:t,getOrCreateCorners:function(r,i,n,a,s,u,h){if(u[h]!==void 0&&u[h+"-cx"]===r&&u[h+"-cy"]===i)return u[h];u[h]=new Array(t.length/2),u[h+"-cx"]=r,u[h+"-cy"]=i;var d=n/2,p=a/2;s=s==="auto"?NQ(n,a):s;for(var g=new Array(t.length/2),y=0;y<t.length/2;y++)g[y]={x:r+d*t[y*2],y:i+p*t[y*2+1]};var m,x,_,E,w=g.length;for(x=g[w-1],m=0;m<w;m++)_=g[m%w],E=g[(m+1)%w],u[h][m]=eQ(x,_,E,s),x=_,_=E;return u[h]},draw:function(r,i,n,a,s,u,h){this.renderer.nodeShapeImpl("round-polygon",r,i,n,a,s,this.points,this.getOrCreateCorners(i,n,a,s,u,h,"drawCorners"))},intersectLine:function(r,i,n,a,s,u,h,d,p){return a7e(s,u,this.points,r,i,n,a,h,this.getOrCreateCorners(r,i,n,a,d,p,"corners"))},checkPoint:function(r,i,n,a,s,u,h,d,p){return i7e(r,i,this.points,u,h,a,s,this.getOrCreateCorners(u,h,a,s,d,p,"corners"))}}},ip.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:gu(4,0),draw:function(e,t,r,i,n,a){this.renderer.nodeShapeImpl(this.name,e,t,r,i,n,this.points,a)},intersectLine:function(e,t,r,i,n,a,s,u){return DQ(n,a,e,t,r,i,s,u)},checkPoint:function(e,t,r,i,n,a,s,u){var h=i/2,d=n/2;u=u==="auto"?Wm(i,n):u,u=Math.min(h,d,u);var p=u*2;return!!(ep(e,t,this.points,a,s,i,n-p,[0,-1],r)||ep(e,t,this.points,a,s,i-p,n,[0,-1],r)||Vm(e,t,p,p,a-h+u,s-d+u,r)||Vm(e,t,p,p,a+h-u,s-d+u,r)||Vm(e,t,p,p,a+h-u,s+d-u,r)||Vm(e,t,p,p,a-h+u,s+d-u,r))}}},ip.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:QB(),points:gu(4,0),draw:function(e,t,r,i,n,a){this.renderer.nodeShapeImpl(this.name,e,t,r,i,n,null,a)},generateCutTrianglePts:function(e,t,r,i,n){var a=n==="auto"?this.cornerLength:n,s=t/2,u=e/2,h=r-u,d=r+u,p=i-s,g=i+s;return{topLeft:[h,p+a,h+a,p,h+a,p+a],topRight:[d-a,p,d,p+a,d-a,p+a],bottomRight:[d,g-a,d-a,g,d-a,g-a],bottomLeft:[h+a,g,h,g-a,h+a,g-a]}},intersectLine:function(e,t,r,i,n,a,s,u){var h=this.generateCutTrianglePts(r+2*s,i+2*s,e,t,u),d=[].concat.apply([],[h.topLeft.splice(0,4),h.topRight.splice(0,4),h.bottomRight.splice(0,4),h.bottomLeft.splice(0,4)]);return ew(n,a,d,e,t)},checkPoint:function(e,t,r,i,n,a,s,u){var h=u==="auto"?this.cornerLength:u;if(ep(e,t,this.points,a,s,i,n-2*h,[0,-1],r)||ep(e,t,this.points,a,s,i-2*h,n,[0,-1],r))return!0;var d=this.generateCutTrianglePts(i,n,a,s);return Ku(e,t,d.topLeft)||Ku(e,t,d.topRight)||Ku(e,t,d.bottomRight)||Ku(e,t,d.bottomLeft)}}},ip.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:gu(4,0),draw:function(e,t,r,i,n,a){this.renderer.nodeShapeImpl(this.name,e,t,r,i,n)},intersectLine:function(e,t,r,i,n,a,s,u){var h=.15,d=.5,p=.85,g=this.generateBarrelBezierPts(r+2*s,i+2*s,e,t),y=function(x){var _=hx({x:x[0],y:x[1]},{x:x[2],y:x[3]},{x:x[4],y:x[5]},h),E=hx({x:x[0],y:x[1]},{x:x[2],y:x[3]},{x:x[4],y:x[5]},d),w=hx({x:x[0],y:x[1]},{x:x[2],y:x[3]},{x:x[4],y:x[5]},p);return[x[0],x[1],_.x,_.y,E.x,E.y,w.x,w.y,x[4],x[5]]},m=[].concat(y(g.topLeft),y(g.topRight),y(g.bottomRight),y(g.bottomLeft));return ew(n,a,m,e,t)},generateBarrelBezierPts:function(e,t,r,i){var n=t/2,a=e/2,s=r-a,u=r+a,h=i-n,d=i+n,p=JB(e,t),g=p.heightOffset,y=p.widthOffset,m=p.ctrlPtOffsetPct*e,x={topLeft:[s,h+g,s+m,h,s+y,h],topRight:[u-y,h,u-m,h,u,h+g],bottomRight:[u,d-g,u-m,d,u-y,d],bottomLeft:[s+y,d,s+m,d,s,d-g]};return x.topLeft.isTop=!0,x.topRight.isTop=!0,x.bottomLeft.isBottom=!0,x.bottomRight.isBottom=!0,x},checkPoint:function(e,t,r,i,n,a,s,u){var h=JB(i,n),d=h.heightOffset,p=h.widthOffset;if(ep(e,t,this.points,a,s,i,n-2*d,[0,-1],r)||ep(e,t,this.points,a,s,i-2*p,n,[0,-1],r))return!0;for(var g=this.generateBarrelBezierPts(i,n,a,s),y=function(B,O,L){var $=L[4],G=L[2],z=L[0],F=L[5],X=L[1],I=Math.min($,z),j=Math.max($,z),H=Math.min(F,X),V=Math.max(F,X);if(I<=B&&B<=j&&H<=O&&O<=V){var P=s7e($,G,z),q=JCe(P[0],P[1],P[2],B),Z=q.filter(function(J){return 0<=J&&J<=1});if(Z.length>0)return Z[0]}return null},m=Object.keys(g),x=0;x<m.length;x++){var _=m[x],E=g[_],w=y(e,t,E);if(w!=null){var C=E[5],A=E[3],M=E[1],N=ul(C,A,M,w);if(E.isTop&&N<=t||E.isBottom&&t<=N)return!0}}return!1}}},ip.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:gu(4,0),draw:function(e,t,r,i,n,a){this.renderer.nodeShapeImpl(this.name,e,t,r,i,n,this.points,a)},intersectLine:function(e,t,r,i,n,a,s,u){var h=e-(r/2+s),d=t-(i/2+s),p=d,g=e+(r/2+s),y=Zf(n,a,e,t,h,d,g,p,!1);return y.length>0?y:DQ(n,a,e,t,r,i,s,u)},checkPoint:function(e,t,r,i,n,a,s,u){u=u==="auto"?Wm(i,n):u;var h=2*u;if(ep(e,t,this.points,a,s,i,n-h,[0,-1],r)||ep(e,t,this.points,a,s,i-h,n,[0,-1],r))return!0;var d=i/2+2*r,p=n/2+2*r,g=[a-d,s-p,a-d,s,a+d,s,a+d,s-p];return!!(Ku(e,t,g)||Vm(e,t,h,h,a+i/2-u,s+n/2-u,r)||Vm(e,t,h,h,a-i/2+u,s+n/2-u,r))}}},ip.registerNodeShapes=function(){var e=this.nodeShapes={},t=this;this.generateEllipse(),this.generatePolygon("triangle",gu(3,0)),this.generateRoundPolygon("round-triangle",gu(3,0)),this.generatePolygon("rectangle",gu(4,0)),e.square=e.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var r=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",r),this.generateRoundPolygon("round-diamond",r)}this.generatePolygon("pentagon",gu(5,0)),this.generateRoundPolygon("round-pentagon",gu(5,0)),this.generatePolygon("hexagon",gu(6,0)),this.generateRoundPolygon("round-hexagon",gu(6,0)),this.generatePolygon("heptagon",gu(7,0)),this.generateRoundPolygon("round-heptagon",gu(7,0)),this.generatePolygon("octagon",gu(8,0)),this.generateRoundPolygon("round-octagon",gu(8,0));var i=new Array(20);{var n=ZB(5,0),a=ZB(5,Math.PI/5),s=.5*(3-Math.sqrt(5));s*=1.57;for(var u=0;u<a.length/2;u++)a[u*2]*=s,a[u*2+1]*=s;for(var u=0;u<20/4;u++)i[u*4]=n[u*2],i[u*4+1]=n[u*2+1],i[u*4+2]=a[u*2],i[u*4+3]=a[u*2+1]}i=IQ(i),this.generatePolygon("star",i),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var h=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",h),this.generateRoundPolygon("round-tag",h)}e.makePolygon=function(d){var p=d.join("$"),g="polygon-"+p,y;return(y=this[g])?y:t.generatePolygon(g,d)}},dw={},dw.timeToRender=function(){return this.redrawTotalTime/this.redrawCount},dw.redraw=function(e){e=e||EQ();var t=this;t.averageRedrawTime===void 0&&(t.averageRedrawTime=0),t.lastRedrawTime===void 0&&(t.lastRedrawTime=0),t.lastDrawTime===void 0&&(t.lastDrawTime=0),t.requestedFrame=!0,t.renderOptions=e},dw.beforeRender=function(e,t){if(!this.destroyed){t==null&&no("Priority is not optional for beforeRender");var r=this.beforeRenderCallbacks;r.push({fn:e,priority:t}),r.sort(function(i,n){return n.priority-i.priority})}},nee=function(e,t,r){for(var i=e.beforeRenderCallbacks,n=0;n<i.length;n++)i[n].fn(t,r)},dw.startRenderLoop=function(){var e=this,t=e.cy;if(!e.renderLoopStarted){e.renderLoopStarted=!0;var r=function i(n){if(!e.destroyed){if(!t.batching())if(e.requestedFrame&&!e.skipFrame){nee(e,!0,n);var a=J0();e.render(e.renderOptions);var s=e.lastDrawTime=J0();e.averageRedrawTime===void 0&&(e.averageRedrawTime=s-a),e.redrawCount===void 0&&(e.redrawCount=0),e.redrawCount++,e.redrawTotalTime===void 0&&(e.redrawTotalTime=0);var u=s-a;e.redrawTotalTime+=u,e.lastRedrawTime=u,e.averageRedrawTime=e.averageRedrawTime/2+u/2,e.requestedFrame=!1}else nee(e,!1,n);e.skipFrame=!1,YS(i)}};YS(r)}},r9e=function(e){this.init(e)},aee=r9e,Tx=aee.prototype,Tx.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],Tx.init=function(e){var t=this;t.options=e,t.cy=e.cy;var r=t.container=e.cy.container(),i=t.cy.window();if(i){var n=i.document,a=n.head,s="__________cytoscape_stylesheet",u="__________cytoscape_container",h=n.getElementById(s)!=null;if(r.className.indexOf(u)<0&&(r.className=(r.className||"")+" "+u),!h){var d=n.createElement("style");d.id=s,d.textContent="."+u+" { position: relative; }",a.insertBefore(d,a.children[0])}var p=i.getComputedStyle(r),g=p.getPropertyValue("position");g==="static"&&Xa("A Cytoscape container has style position:static and so can not use UI extensions properly")}t.selection=[void 0,void 0,void 0,void 0,0],t.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],t.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},t.dragData={possibleDragElements:[]},t.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},t.redraws=0,t.showFps=e.showFps,t.debug=e.debug,t.hideEdgesOnViewport=e.hideEdgesOnViewport,t.textureOnViewport=e.textureOnViewport,t.wheelSensitivity=e.wheelSensitivity,t.motionBlurEnabled=e.motionBlur,t.forcedPixelRatio=Ei(e.pixelRatio)?e.pixelRatio:null,t.motionBlur=e.motionBlur,t.motionBlurOpacity=e.motionBlurOpacity,t.motionBlurTransparency=1-t.motionBlurOpacity,t.motionBlurPxRatio=1,t.mbPxRBlurry=1,t.minMbLowQualFrames=4,t.fullQualityMb=!1,t.clearedForMotionBlur=[],t.desktopTapThreshold=e.desktopTapThreshold,t.desktopTapThreshold2=e.desktopTapThreshold*e.desktopTapThreshold,t.touchTapThreshold=e.touchTapThreshold,t.touchTapThreshold2=e.touchTapThreshold*e.touchTapThreshold,t.tapholdDuration=500,t.bindings=[],t.beforeRenderCallbacks=[],t.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},t.registerNodeShapes(),t.registerArrowShapes(),t.registerCalculationListeners()},Tx.notify=function(e,t){var r=this,i=r.cy;if(!this.destroyed){if(e==="init"){r.load();return}if(e==="destroy"){r.destroy();return}(e==="add"||e==="remove"||e==="move"&&i.hasCompoundNodes()||e==="load"||e==="zorder"||e==="mount")&&r.invalidateCachedZSortedEles(),e==="viewport"&&r.redrawHint("select",!0),(e==="load"||e==="resize"||e==="mount")&&(r.invalidateContainerClientCoordsCache(),r.matchCanvasSize(r.container)),r.redrawHint("eles",!0),r.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}},Tx.destroy=function(){var e=this;e.destroyed=!0,e.cy.stopAnimationLoop();for(var t=0;t<e.bindings.length;t++){var r=e.bindings[t],i=r,n=i.target;(n.off||n.removeEventListener).apply(n,i.args)}if(e.bindings=[],e.beforeRenderCallbacks=[],e.onUpdateEleCalcsFns=[],e.removeObserver&&e.removeObserver.disconnect(),e.styleObserver&&e.styleObserver.disconnect(),e.resizeObserver&&e.resizeObserver.disconnect(),e.labelCalcDiv)try{document.body.removeChild(e.labelCalcDiv)}catch{}},Tx.isHeadless=function(){return!1},[gP,ree,iee,kx,ip,dw].forEach(function(e){Rn(Tx,e)}),xP=1e3/60,see={setupDequeueing:function(e){return function(){var t=this,r=this.renderer;if(!t.dequeueingSetup){t.dequeueingSetup=!0;var i=WS(function(){r.redrawHint("eles",!0),r.redrawHint("drag",!0),r.redraw()},e.deqRedrawThreshold),n=function(s,u){var h=J0(),d=r.averageRedrawTime,p=r.lastRedrawTime,g=[],y=r.cy.extent(),m=r.getPixelRatio();for(s||r.flushRenderedStyleQueue();;){var x=J0(),_=x-h,E=x-u;if(p<xP){var w=xP-(s?d:0);if(E>=e.deqFastCost*w)break}else if(s){if(_>=e.deqCost*p||_>=e.deqAvgCost*d)break}else if(E>=e.deqNoDrawCost*xP)break;var C=e.deq(t,m,y);if(C.length>0)for(var A=0;A<C.length;A++)g.push(C[A]);else break}g.length>0&&(e.onDeqd(t,g),!s&&e.shouldRedraw(t,g,m,y)&&i())},a=e.priority||VB;r.beforeRender(n,a(t))}}}},i9e=function(){function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:XS;WZ(this,e),this.idsByKey=new Wd,this.keyForId=new Wd,this.cachesByLvl=new Wd,this.lvls=[],this.getKey=t,this.doesEleInvalidateKey=r}return YZ(e,[{key:"getIdsFor",value:function(t){t==null&&no("Can not get id list for null key");var r=this.idsByKey,i=this.idsByKey.get(t);return i||(i=new lx,r.set(t,i)),i}},{key:"addIdForKey",value:function(t,r){t!=null&&this.getIdsFor(t).add(r)}},{key:"deleteIdForKey",value:function(t,r){t!=null&&this.getIdsFor(t).delete(r)}},{key:"getNumberOfIdsForKey",value:function(t){return t==null?0:this.getIdsFor(t).size}},{key:"updateKeyMappingFor",value:function(t){var r=t.id(),i=this.keyForId.get(r),n=this.getKey(t);this.deleteIdForKey(i,r),this.addIdForKey(n,r),this.keyForId.set(r,n)}},{key:"deleteKeyMappingFor",value:function(t){var r=t.id(),i=this.keyForId.get(r);this.deleteIdForKey(i,r),this.keyForId.delete(r)}},{key:"keyHasChangedFor",value:function(t){var r=t.id(),i=this.keyForId.get(r),n=this.getKey(t);return i!==n}},{key:"isInvalid",value:function(t){return this.keyHasChangedFor(t)||this.doesEleInvalidateKey(t)}},{key:"getCachesAt",value:function(t){var r=this.cachesByLvl,i=this.lvls,n=r.get(t);return n||(n=new Wd,r.set(t,n),i.push(t)),n}},{key:"getCache",value:function(t,r){return this.getCachesAt(r).get(t)}},{key:"get",value:function(t,r){var i=this.getKey(t),n=this.getCache(i,r);return n!=null&&this.updateKeyMappingFor(t),n}},{key:"getForCachedKey",value:function(t,r){var i=this.keyForId.get(t.id()),n=this.getCache(i,r);return n}},{key:"hasCache",value:function(t,r){return this.getCachesAt(r).has(t)}},{key:"has",value:function(t,r){var i=this.getKey(t);return this.hasCache(i,r)}},{key:"setCache",value:function(t,r,i){i.key=t,this.getCachesAt(r).set(t,i)}},{key:"set",value:function(t,r,i){var n=this.getKey(t);this.setCache(n,r,i),this.updateKeyMappingFor(t)}},{key:"deleteCache",value:function(t,r){this.getCachesAt(r).delete(t)}},{key:"delete",value:function(t,r){var i=this.getKey(t);this.deleteCache(i,r)}},{key:"invalidateKey",value:function(t){var r=this;this.lvls.forEach(function(i){return r.deleteCache(t,i)})}},{key:"invalidate",value:function(t){var r=t.id(),i=this.keyForId.get(r);this.deleteKeyMappingFor(t);var n=this.doesEleInvalidateKey(t);return n&&this.invalidateKey(i),n||this.getNumberOfIdsForKey(i)===0}}]),e}(),oee=25,R8=50,D8=-4,bP=3,n9e=7.99,a9e=8,s9e=1024,o9e=1024,l9e=1024,u9e=.2,h9e=.8,c9e=10,d9e=.15,p9e=.1,f9e=.9,g9e=.9,m9e=100,y9e=1,Ex={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},v9e=Ll({getKey:null,doesEleInvalidateKey:XS,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:_Q,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),pw=function(e,t){var r=this;r.renderer=e,r.onDequeues=[];var i=v9e(t);Rn(r,i),r.lookup=new i9e(i.getKey,i.doesEleInvalidateKey),r.setupDequeueing()},Ko=pw.prototype,Ko.reasons=Ex,Ko.getTextureQueue=function(e){var t=this;return t.eleImgCaches=t.eleImgCaches||{},t.eleImgCaches[e]=t.eleImgCaches[e]||[]},Ko.getRetiredTextureQueue=function(e){var t=this,r=t.eleImgCaches.retired=t.eleImgCaches.retired||{},i=r[e]=r[e]||[];return i},Ko.getElementQueue=function(){var e=this,t=e.eleCacheQueue=e.eleCacheQueue||new Z5(function(r,i){return i.reqs-r.reqs});return t},Ko.getElementKeyToQueue=function(){var e=this,t=e.eleKeyToCacheQueue=e.eleKeyToCacheQueue||{};return t},Ko.getElement=function(e,t,r,i,n){var a=this,s=this.renderer,u=s.cy.zoom(),h=this.lookup;if(!t||t.w===0||t.h===0||isNaN(t.w)||isNaN(t.h)||!e.visible()||e.removed()||!a.allowEdgeTxrCaching&&e.isEdge()||!a.allowParentTxrCaching&&e.isParent())return null;if(i==null&&(i=Math.ceil(qB(u*r))),i<D8)i=D8;else if(u>=n9e||i>bP)return null;var d=Math.pow(2,i),p=t.h*d,g=t.w*d,y=s.eleTextBiggerThanMin(e,d);if(!this.isVisible(e,y))return null;var m=h.get(e,i);if(m&&m.invalidated&&(m.invalidated=!1,m.texture.invalidatedWidth-=m.width),m)return m;var x;if(p<=oee?x=oee:p<=R8?x=R8:x=Math.ceil(p/R8)*R8,p>l9e||g>o9e)return null;var _=a.getTextureQueue(x),E=_[_.length-2],w=function(){return a.recycleTexture(x,g)||a.addTexture(x,g)};E||(E=_[_.length-1]),E||(E=w()),E.width-E.usedWidth<g&&(E=w());for(var C=function(j){return j&&j.scaledLabelShown===y},A=n&&n===Ex.dequeue,M=n&&n===Ex.highQuality,N=n&&n===Ex.downscale,B,O=i+1;O<=bP;O++){var L=h.get(e,O);if(L){B=L;break}}var $=B&&B.level===i+1?B:null,G=function(){E.context.drawImage($.texture.canvas,$.x,0,$.width,$.height,E.usedWidth,0,g,p)};if(E.context.setTransform(1,0,0,1,0,0),E.context.clearRect(E.usedWidth,0,g,x),C($))G();else if(C(B))if(M){for(var z=B.level;z>i;z--)$=a.getElement(e,t,r,z,Ex.downscale);G()}else return a.queueElement(e,B.level-1),B;else{var F;if(!A&&!M&&!N)for(var X=i-1;X>=D8;X--){var I=h.get(e,X);if(I){F=I;break}}if(C(F))return a.queueElement(e,i),F;E.context.translate(E.usedWidth,0),E.context.scale(d,d),this.drawElement(E.context,e,t,y,!1),E.context.scale(1/d,1/d),E.context.translate(-E.usedWidth,0)}return m={x:E.usedWidth,texture:E,level:i,scale:d,width:g,height:p,scaledLabelShown:y},E.usedWidth+=Math.ceil(g+a9e),E.eleCaches.push(m),h.set(e,i,m),a.checkTextureFullness(E),m},Ko.invalidateElements=function(e){for(var t=0;t<e.length;t++)this.invalidateElement(e[t])},Ko.invalidateElement=function(e){var t=this,r=t.lookup,i=[],n=r.isInvalid(e);if(n){for(var a=D8;a<=bP;a++){var s=r.getForCachedKey(e,a);s&&i.push(s)}var u=r.invalidate(e);if(u)for(var h=0;h<i.length;h++){var d=i[h],p=d.texture;p.invalidatedWidth+=d.width,d.invalidated=!0,t.checkTextureUtility(p)}t.removeFromQueue(e)}},Ko.checkTextureUtility=function(e){e.invalidatedWidth>=u9e*e.width&&this.retireTexture(e)},Ko.checkTextureFullness=function(e){var t=this,r=t.getTextureQueue(e.height);e.usedWidth/e.width>h9e&&e.fullnessChecks>=c9e?Xf(r,e):e.fullnessChecks++},Ko.retireTexture=function(e){var t=this,r=e.height,i=t.getTextureQueue(r),n=this.lookup;Xf(i,e),e.retired=!0;for(var a=e.eleCaches,s=0;s<a.length;s++){var u=a[s];n.deleteCache(u.key,u.level)}WB(a);var h=t.getRetiredTextureQueue(r);h.push(e)},Ko.addTexture=function(e,t){var r=this,i=r.getTextureQueue(e),n={};return i.push(n),n.eleCaches=[],n.height=e,n.width=Math.max(s9e,t),n.usedWidth=0,n.invalidatedWidth=0,n.fullnessChecks=0,n.canvas=r.renderer.makeOffscreenCanvas(n.width,n.height),n.context=n.canvas.getContext("2d"),n},Ko.recycleTexture=function(e,t){for(var r=this,i=r.getTextureQueue(e),n=r.getRetiredTextureQueue(e),a=0;a<n.length;a++){var s=n[a];if(s.width>=t)return s.retired=!1,s.usedWidth=0,s.invalidatedWidth=0,s.fullnessChecks=0,WB(s.eleCaches),s.context.setTransform(1,0,0,1,0,0),s.context.clearRect(0,0,s.width,s.height),Xf(n,s),i.push(s),s}},Ko.queueElement=function(e,t){var r=this,i=r.getElementQueue(),n=r.getElementKeyToQueue(),a=this.getKey(e),s=n[a];if(s)s.level=Math.max(s.level,t),s.eles.merge(e),s.reqs++,i.updateItem(s);else{var u={eles:e.spawn().merge(e),level:t,reqs:1,key:a};i.push(u),n[a]=u}},Ko.dequeue=function(e){for(var t=this,r=t.getElementQueue(),i=t.getElementKeyToQueue(),n=[],a=t.lookup,s=0;s<y9e&&r.size()>0;s++){var u=r.pop(),h=u.key,d=u.eles[0],p=a.hasCache(d,u.level);if(i[h]=null,!p){n.push(u);var g=t.getBoundingBox(d);t.getElement(d,g,e,u.level,Ex.dequeue)}}return n},Ko.removeFromQueue=function(e){var t=this,r=t.getElementQueue(),i=t.getElementKeyToQueue(),n=this.getKey(e),a=i[n];a!=null&&(a.eles.length===1?(a.reqs=HB,r.updateItem(a),r.pop(),i[n]=null):a.eles.unmerge(e))},Ko.onDequeue=function(e){this.onDequeues.push(e)},Ko.offDequeue=function(e){Xf(this.onDequeues,e)},Ko.setupDequeueing=see.setupDequeueing({deqRedrawThreshold:m9e,deqCost:d9e,deqAvgCost:p9e,deqNoDrawCost:f9e,deqFastCost:g9e,deq:function(e,t,r){return e.dequeue(t,r)},onDeqd:function(e,t){for(var r=0;r<e.onDequeues.length;r++){var i=e.onDequeues[r];i(t)}},shouldRedraw:function(e,t,r,i){for(var n=0;n<t.length;n++)for(var a=t[n].eles,s=0;s<a.length;s++){var u=a[s].boundingBox();if(XB(u,i))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}}),x9e=1,fw=-4,I8=2,b9e=3.99,_9e=50,w9e=50,k9e=.15,T9e=.1,E9e=.9,C9e=.9,S9e=1,lee=250,A9e=4e3*4e3,uee=32767,M9e=!0,hee=function(e){var t=this,r=t.renderer=e,i=r.cy;t.layersByLevel={},t.firstGet=!0,t.lastInvalidationTime=J0()-2*lee,t.skipping=!1,t.eleTxrDeqs=i.collection(),t.scheduleElementRefinement=WS(function(){t.refineElementTextures(t.eleTxrDeqs),t.eleTxrDeqs.unmerge(t.eleTxrDeqs)},w9e),r.beforeRender(function(a,s){s-t.lastInvalidationTime<=lee?t.skipping=!0:t.skipping=!1},r.beforeRenderPriorities.lyrTxrSkip);var n=function(a,s){return s.reqs-a.reqs};t.layersQueue=new Z5(n),t.setupDequeueing()},Nl=hee.prototype,cee=0,L9e=Math.pow(2,53)-1,Nl.makeLayer=function(e,t){var r=Math.pow(2,t),i=Math.ceil(e.w*r),n=Math.ceil(e.h*r),a=this.renderer.makeOffscreenCanvas(i,n),s={id:cee=++cee%L9e,bb:e,level:t,width:i,height:n,canvas:a,context:a.getContext("2d"),eles:[],elesQueue:[],reqs:0},u=s.context,h=-s.bb.x1,d=-s.bb.y1;return u.scale(r,r),u.translate(h,d),s},Nl.getLayers=function(e,t,r){var i=this,n=i.renderer,a=n.cy,s=a.zoom(),u=i.firstGet;if(i.firstGet=!1,r==null){if(r=Math.ceil(qB(s*t)),r<fw)r=fw;else if(s>=b9e||r>I8)return null}i.validateLayersElesOrdering(r,e);var h=i.layersByLevel,d=Math.pow(2,r),p=h[r]=h[r]||[],g,y=i.levelIsComplete(r,e),m,x=function(){var $=function(X){if(i.validateLayersElesOrdering(X,e),i.levelIsComplete(X,e))return m=h[X],!0},G=function(X){if(!m)for(var I=r+X;fw<=I&&I<=I8&&!$(I);I+=X);};G(1),G(-1);for(var z=p.length-1;z>=0;z--){var F=p[z];F.invalid&&Xf(p,F)}};if(!y)x();else return p;var _=function(){if(!g){g=Xu();for(var $=0;$<e.length;$++)MQ(g,e[$].boundingBox())}return g},E=function($){$=$||{};var G=$.after;_();var z=Math.ceil(g.w*d),F=Math.ceil(g.h*d);if(z>uee||F>uee)return null;var X=z*F;if(X>A9e)return null;var I=i.makeLayer(g,r);if(G!=null){var j=p.indexOf(G)+1;p.splice(j,0,I)}else($.insert===void 0||$.insert)&&p.unshift(I);return I};if(i.skipping&&!u)return null;for(var w=null,C=e.length/x9e,A=!u,M=0;M<e.length;M++){var N=e[M],B=N._private.rscratch,O=B.imgLayerCaches=B.imgLayerCaches||{},L=O[r];if(L){w=L;continue}if((!w||w.eles.length>=C||!RQ(w.bb,N.boundingBox()))&&(w=E({insert:!0,after:w}),!w))return null;m||A?i.queueLayer(w,N):i.drawEleInLayer(w,N,r,t),w.eles.push(N),O[r]=w}return m||(A?null:p)},Nl.getEleLevelForLayerLevel=function(e,t){return e},Nl.drawEleInLayer=function(e,t,r,i){var n=this,a=this.renderer,s=e.context,u=t.boundingBox();u.w===0||u.h===0||!t.visible()||(r=n.getEleLevelForLayerLevel(r,i),a.setImgSmoothing(s,!1),a.drawCachedElement(s,t,null,null,r,M9e),a.setImgSmoothing(s,!0))},Nl.levelIsComplete=function(e,t){var r=this,i=r.layersByLevel[e];if(!i||i.length===0)return!1;for(var n=0,a=0;a<i.length;a++){var s=i[a];if(s.reqs>0||s.invalid)return!1;n+=s.eles.length}return n===t.length},Nl.validateLayersElesOrdering=function(e,t){var r=this.layersByLevel[e];if(r)for(var i=0;i<r.length;i++){for(var n=r[i],a=-1,s=0;s<t.length;s++)if(n.eles[0]===t[s]){a=s;break}if(a<0){this.invalidateLayer(n);continue}for(var u=a,s=0;s<n.eles.length;s++)if(n.eles[s]!==t[u+s]){this.invalidateLayer(n);break}}},Nl.updateElementsInLayers=function(e,t){for(var r=this,i=U5(e[0]),n=0;n<e.length;n++)for(var a=i?null:e[n],s=i?e[n]:e[n].ele,u=s._private.rscratch,h=u.imgLayerCaches=u.imgLayerCaches||{},d=fw;d<=I8;d++){var p=h[d];p&&(a&&r.getEleLevelForLayerLevel(p.level)!==a.level||t(p,s,a))}},Nl.haveLayers=function(){for(var e=this,t=!1,r=fw;r<=I8;r++){var i=e.layersByLevel[r];if(i&&i.length>0){t=!0;break}}return t},Nl.invalidateElements=function(e){var t=this;e.length!==0&&(t.lastInvalidationTime=J0(),!(e.length===0||!t.haveLayers())&&t.updateElementsInLayers(e,function(r,i,n){t.invalidateLayer(r)}))},Nl.invalidateLayer=function(e){if(this.lastInvalidationTime=J0(),!e.invalid){var t=e.level,r=e.eles,i=this.layersByLevel[t];Xf(i,e),e.elesQueue=[],e.invalid=!0,e.replacement&&(e.replacement.invalid=!0);for(var n=0;n<r.length;n++){var a=r[n]._private.rscratch.imgLayerCaches;a&&(a[t]=null)}}},Nl.refineElementTextures=function(e){var t=this;t.updateElementsInLayers(e,function(r,i,n){var a=r.replacement;if(a||(a=r.replacement=t.makeLayer(r.bb,r.level),a.replaces=r,a.eles=r.eles),!a.reqs)for(var s=0;s<a.eles.length;s++)t.queueLayer(a,a.eles[s])})},Nl.enqueueElementRefinement=function(e){this.eleTxrDeqs.merge(e),this.scheduleElementRefinement()},Nl.queueLayer=function(e,t){var r=this,i=r.layersQueue,n=e.elesQueue,a=n.hasId=n.hasId||{};if(!e.replacement){if(t){if(a[t.id()])return;n.push(t),a[t.id()]=!0}e.reqs?(e.reqs++,i.updateItem(e)):(e.reqs=1,i.push(e))}},Nl.dequeue=function(e){for(var t=this,r=t.layersQueue,i=[],n=0;n<S9e&&r.size()!==0;){var a=r.peek();if(a.replacement){r.pop();continue}if(a.replaces&&a!==a.replaces.replacement){r.pop();continue}if(a.invalid){r.pop();continue}var s=a.elesQueue.shift();s&&(t.drawEleInLayer(a,s,a.level,e),n++),i.length===0&&i.push(!0),a.elesQueue.length===0&&(r.pop(),a.reqs=0,a.replaces&&t.applyLayerReplacement(a),t.requestRedraw())}return i},Nl.applyLayerReplacement=function(e){var t=this,r=t.layersByLevel[e.level],i=e.replaces,n=r.indexOf(i);if(!(n<0||i.invalid)){r[n]=e;for(var a=0;a<e.eles.length;a++){var s=e.eles[a]._private,u=s.imgLayerCaches=s.imgLayerCaches||{};u&&(u[e.level]=e)}t.requestRedraw()}},Nl.requestRedraw=WS(function(){var e=this.renderer;e.redrawHint("eles",!0),e.redrawHint("drag",!0),e.redraw()},100),Nl.setupDequeueing=see.setupDequeueing({deqRedrawThreshold:_9e,deqCost:k9e,deqAvgCost:T9e,deqNoDrawCost:E9e,deqFastCost:C9e,deq:function(e,t){return e.dequeue(t)},onDeqd:VB,shouldRedraw:_Q,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}}),dee={},dee.arrowShapeImpl=function(e){return(R9e||(R9e={polygon:oZe,"triangle-backcurve":lZe,"triangle-tee":hEe,"circle-triangle":uZe,"triangle-cross":hEe,circle:hZe}))[e]},Zd={},Zd.drawElement=function(e,t,r,i,n,a){var s=this;t.isNode()?s.drawNode(e,t,r,i,n,a):s.drawEdge(e,t,r,i,n,a)},Zd.drawElementOverlay=function(e,t){var r=this;t.isNode()?r.drawNodeOverlay(e,t):r.drawEdgeOverlay(e,t)},Zd.drawElementUnderlay=function(e,t){var r=this;t.isNode()?r.drawNodeUnderlay(e,t):r.drawEdgeUnderlay(e,t)},Zd.drawCachedElementPortion=function(e,t,r,i,n,a,s,u){var h=this,d=r.getBoundingBox(t);if(!(d.w===0||d.h===0)){var p=r.getElement(t,d,i,n,a);if(p!=null){var g=u(h,t);if(g===0)return;var y=s(h,t),m=d.x1,x=d.y1,_=d.w,E=d.h,w,C,A,M,N;if(y!==0){var B=r.getRotationPoint(t);A=B.x,M=B.y,e.translate(A,M),e.rotate(y),N=h.getImgSmoothing(e),N||h.setImgSmoothing(e,!0);var O=r.getRotationOffset(t);w=O.x,C=O.y}else w=m,C=x;var L;g!==1&&(L=e.globalAlpha,e.globalAlpha=L*g),e.drawImage(p.texture.canvas,p.x,0,p.width,p.height,w,C,_,E),g!==1&&(e.globalAlpha=L),y!==0&&(e.rotate(-y),e.translate(-A,-M),N||h.setImgSmoothing(e,!1))}else r.drawElement(e,t)}},D9e=function(){return 0},I9e=function(e,t){return e.getTextAngle(t,null)},N9e=function(e,t){return e.getTextAngle(t,"source")},O9e=function(e,t){return e.getTextAngle(t,"target")},B9e=function(e,t){return t.effectiveOpacity()},_P=function(e,t){return t.pstyle("text-opacity").pfValue*t.effectiveOpacity()},Zd.drawCachedElement=function(e,t,r,i,n,a){var s=this,u=s.data,h=u.eleTxrCache,d=u.lblTxrCache,p=u.slbTxrCache,g=u.tlbTxrCache,y=t.boundingBox(),m=a===!0?h.reasons.highQuality:null;if(!(y.w===0||y.h===0||!t.visible())&&(!i||XB(y,i))){var x=t.isEdge(),_=t.element()._private.rscratch.badLine;s.drawElementUnderlay(e,t),s.drawCachedElementPortion(e,t,h,r,n,m,D9e,B9e),(!x||!_)&&s.drawCachedElementPortion(e,t,d,r,n,m,I9e,_P),x&&!_&&(s.drawCachedElementPortion(e,t,p,r,n,m,N9e,_P),s.drawCachedElementPortion(e,t,g,r,n,m,O9e,_P)),s.drawElementOverlay(e,t)}},Zd.drawElements=function(e,t){for(var r=this,i=0;i<t.length;i++){var n=t[i];r.drawElement(e,n)}},Zd.drawCachedElements=function(e,t,r,i){for(var n=this,a=0;a<t.length;a++){var s=t[a];n.drawCachedElement(e,s,r,i)}},Zd.drawCachedNodes=function(e,t,r,i){for(var n=this,a=0;a<t.length;a++){var s=t[a];s.isNode()&&n.drawCachedElement(e,s,r,i)}},Zd.drawLayeredElements=function(e,t,r,i){var n=this,a=n.data.lyrTxrCache.getLayers(t,r);if(a)for(var s=0;s<a.length;s++){var u=a[s],h=u.bb;h.w===0||h.h===0||e.drawImage(u.canvas,h.x1,h.y1,h.w,h.h)}else n.drawCachedElements(e,t,r,i)},np={},np.drawEdge=function(e,t,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,s=this,u=t._private.rscratch;if(!(a&&!t.visible())&&!(u.badLine||u.allpts==null||isNaN(u.allpts[0]))){var h;r&&(h=r,e.translate(-h.x1,-h.y1));var d=a?t.pstyle("opacity").value:1,p=a?t.pstyle("line-opacity").value:1,g=t.pstyle("curve-style").value,y=t.pstyle("line-style").value,m=t.pstyle("width").pfValue,x=t.pstyle("line-cap").value,_=t.pstyle("line-outline-width").value,E=t.pstyle("line-outline-color").value,w=d*p,C=d*p,A=function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:w;g==="straight-triangle"?(s.eleStrokeStyle(e,t,I),s.drawEdgeTrianglePath(t,e,u.allpts)):(e.lineWidth=m,e.lineCap=x,s.eleStrokeStyle(e,t,I),s.drawEdgePath(t,e,u.allpts,y),e.lineCap="butt")},M=function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:w;if(e.lineWidth=m+_,e.lineCap=x,_>0)s.colorStrokeStyle(e,E[0],E[1],E[2],I);else{e.lineCap="butt";return}g==="straight-triangle"?s.drawEdgeTrianglePath(t,e,u.allpts):(s.drawEdgePath(t,e,u.allpts,y),e.lineCap="butt")},N=function(){n&&s.drawEdgeOverlay(e,t)},B=function(){n&&s.drawEdgeUnderlay(e,t)},O=function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:C;s.drawArrowheads(e,t,I)},L=function(){s.drawElementText(e,t,null,i)};e.lineJoin="round";var $=t.pstyle("ghost").value==="yes";if($){var G=t.pstyle("ghost-offset-x").pfValue,z=t.pstyle("ghost-offset-y").pfValue,F=t.pstyle("ghost-opacity").value,X=w*F;e.translate(G,z),A(X),O(X),e.translate(-G,-z)}else M();B(),A(),O(),N(),L(),r&&e.translate(h.x1,h.y1)}},pee=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,r){if(r.visible()){var i=r.pstyle("".concat(e,"-opacity")).value;if(i!==0){var n=this,a=n.usePaths(),s=r._private.rscratch,u=r.pstyle("".concat(e,"-padding")).pfValue,h=2*u,d=r.pstyle("".concat(e,"-color")).value;t.lineWidth=h,s.edgeType==="self"&&!a?t.lineCap="butt":t.lineCap="round",n.colorStrokeStyle(t,d[0],d[1],d[2],i),n.drawEdgePath(r,t,s.allpts,"solid")}}}},np.drawEdgeOverlay=pee("overlay"),np.drawEdgeUnderlay=pee("underlay"),np.drawEdgePath=function(e,t,r,i){var n=e._private.rscratch,a=t,s,u=!1,h=this.usePaths(),d=e.pstyle("line-dash-pattern").pfValue,p=e.pstyle("line-dash-offset").pfValue;if(h){var g=r.join("$"),y=n.pathCacheKey&&n.pathCacheKey===g;y?(s=t=n.pathCache,u=!0):(s=t=new Path2D,n.pathCacheKey=g,n.pathCache=s)}if(a.setLineDash)switch(i){case"dotted":a.setLineDash([1,1]);break;case"dashed":a.setLineDash(d),a.lineDashOffset=p;break;case"solid":a.setLineDash([]);break}if(!u&&!n.badLine)switch(t.beginPath&&t.beginPath(),t.moveTo(r[0],r[1]),n.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var m=2;m+3<r.length;m+=4)t.quadraticCurveTo(r[m],r[m+1],r[m+2],r[m+3]);break;case"straight":case"haystack":for(var x=2;x+1<r.length;x+=2)t.lineTo(r[x],r[x+1]);break;case"segments":if(n.isRound){var _=jTe(n.roundCorners),E;try{for(_.s();!(E=_.n()).done;){var w=E.value;lEe(t,w)}}catch(A){_.e(A)}finally{_.f()}t.lineTo(r[r.length-2],r[r.length-1])}else for(var C=2;C+1<r.length;C+=2)t.lineTo(r[C],r[C+1]);break}t=a,h?t.stroke(s):t.stroke(),t.setLineDash&&t.setLineDash([])},np.drawEdgeTrianglePath=function(e,t,r){t.fillStyle=t.strokeStyle;for(var i=e.pstyle("width").pfValue,n=0;n+1<r.length;n+=2){var a=[r[n+2]-r[n],r[n+3]-r[n+1]],s=Math.sqrt(a[0]*a[0]+a[1]*a[1]),u=[a[1]/s,-a[0]/s],h=[u[0]*i/2,u[1]*i/2];t.beginPath(),t.moveTo(r[n]-h[0],r[n+1]-h[1]),t.lineTo(r[n]+h[0],r[n+1]+h[1]),t.lineTo(r[n+2],r[n+3]),t.closePath(),t.fill()}},np.drawArrowheads=function(e,t,r){var i=t._private.rscratch,n=i.edgeType==="haystack";n||this.drawArrowhead(e,t,"source",i.arrowStartX,i.arrowStartY,i.srcArrowAngle,r),this.drawArrowhead(e,t,"mid-target",i.midX,i.midY,i.midtgtArrowAngle,r),this.drawArrowhead(e,t,"mid-source",i.midX,i.midY,i.midsrcArrowAngle,r),n||this.drawArrowhead(e,t,"target",i.arrowEndX,i.arrowEndY,i.tgtArrowAngle,r)},np.drawArrowhead=function(e,t,r,i,n,a,s){if(!(isNaN(i)||i==null||isNaN(n)||n==null||isNaN(a)||a==null)){var u=this,h=t.pstyle(r+"-arrow-shape").value;if(h!=="none"){var d=t.pstyle(r+"-arrow-fill").value==="hollow"?"both":"filled",p=t.pstyle(r+"-arrow-fill").value,g=t.pstyle("width").pfValue,y=t.pstyle(r+"-arrow-width"),m=y.value==="match-line"?g:y.pfValue;y.units==="%"&&(m*=g);var x=t.pstyle("opacity").value;s===void 0&&(s=x);var _=e.globalCompositeOperation;(s!==1||p==="hollow")&&(e.globalCompositeOperation="destination-out",u.colorFillStyle(e,255,255,255,1),u.colorStrokeStyle(e,255,255,255,1),u.drawArrowShape(t,e,d,g,h,m,i,n,a),e.globalCompositeOperation=_);var E=t.pstyle(r+"-arrow-color").value;u.colorFillStyle(e,E[0],E[1],E[2],s),u.colorStrokeStyle(e,E[0],E[1],E[2],s),u.drawArrowShape(t,e,p,g,h,m,i,n,a)}}},np.drawArrowShape=function(e,t,r,i,n,a,s,u,h){var d=this,p=this.usePaths()&&n!=="triangle-cross",g=!1,y,m=t,x={x:s,y:u},_=e.pstyle("arrow-scale").value,E=this.getArrowWidth(i,_),w=d.arrowShapes[n];if(p){var C=d.arrowPathCache=d.arrowPathCache||[],A=Um(n),M=C[A];M!=null?(y=t=M,g=!0):(y=t=new Path2D,C[A]=y)}g||(t.beginPath&&t.beginPath(),p?w.draw(t,1,0,{x:0,y:0},1):w.draw(t,E,h,x,i),t.closePath&&t.closePath()),t=m,p&&(t.translate(s,u),t.rotate(h),t.scale(E,E)),(r==="filled"||r==="both")&&(p?t.fill(y):t.fill()),(r==="hollow"||r==="both")&&(t.lineWidth=a/(p?E:1),t.lineJoin="miter",p?t.stroke(y):t.stroke()),p&&(t.scale(1/E,1/E),t.rotate(-h),t.translate(-s,-u))},wP={},wP.safeDrawImage=function(e,t,r,i,n,a,s,u,h,d){if(!(n<=0||a<=0||h<=0||d<=0))try{e.drawImage(t,r,i,n,a,s,u,h,d)}catch(p){Xa(p)}},wP.drawInscribedImage=function(e,t,r,i,n){var a=this,s=r.position(),u=s.x,h=s.y,d=r.cy().style(),p=d.getIndexedStyle.bind(d),g=p(r,"background-fit","value",i),y=p(r,"background-repeat","value",i),m=r.width(),x=r.height(),_=r.padding()*2,E=m+(p(r,"background-width-relative-to","value",i)==="inner"?0:_),w=x+(p(r,"background-height-relative-to","value",i)==="inner"?0:_),C=r._private.rscratch,A=p(r,"background-clip","value",i),M=A==="node",N=p(r,"background-image-opacity","value",i)*n,B=p(r,"background-image-smoothing","value",i),O=r.pstyle("corner-radius").value;O!=="auto"&&(O=r.pstyle("corner-radius").pfValue);var L=t.width||t.cachedW,$=t.height||t.cachedH;(L==null||$==null)&&(document.body.appendChild(t),L=t.cachedW=t.width||t.offsetWidth,$=t.cachedH=t.height||t.offsetHeight,document.body.removeChild(t));var G=L,z=$;if(p(r,"background-width","value",i)!=="auto"&&(p(r,"background-width","units",i)==="%"?G=p(r,"background-width","pfValue",i)*E:G=p(r,"background-width","pfValue",i)),p(r,"background-height","value",i)!=="auto"&&(p(r,"background-height","units",i)==="%"?z=p(r,"background-height","pfValue",i)*w:z=p(r,"background-height","pfValue",i)),!(G===0||z===0)){if(g==="contain"){var F=Math.min(E/G,w/z);G*=F,z*=F}else if(g==="cover"){var F=Math.max(E/G,w/z);G*=F,z*=F}var X=u-E/2,I=p(r,"background-position-x","units",i),j=p(r,"background-position-x","pfValue",i);I==="%"?X+=(E-G)*j:X+=j;var H=p(r,"background-offset-x","units",i),V=p(r,"background-offset-x","pfValue",i);H==="%"?X+=(E-G)*V:X+=V;var P=h-w/2,q=p(r,"background-position-y","units",i),Z=p(r,"background-position-y","pfValue",i);q==="%"?P+=(w-z)*Z:P+=Z;var J=p(r,"background-offset-y","units",i),ae=p(r,"background-offset-y","pfValue",i);J==="%"?P+=(w-z)*ae:P+=ae,C.pathCache&&(X-=u,P-=h,u=0,h=0);var ue=e.globalAlpha;e.globalAlpha=N;var be=a.getImgSmoothing(e),Le=!1;if(B==="no"&&be?(a.setImgSmoothing(e,!1),Le=!0):B==="yes"&&!be&&(a.setImgSmoothing(e,!0),Le=!0),y==="no-repeat")M&&(e.save(),C.pathCache?e.clip(C.pathCache):(a.nodeShapes[a.getNodeShape(r)].draw(e,u,h,E,w,O,C),e.clip())),a.safeDrawImage(e,t,0,0,L,$,X,P,G,z),M&&e.restore();else{var xe=e.createPattern(t,y);e.fillStyle=xe,a.nodeShapes[a.getNodeShape(r)].draw(e,u,h,E,w,O,C),e.translate(X,P),e.fill(),e.translate(-X,-P)}e.globalAlpha=ue,Le&&a.setImgSmoothing(e,be)}},Qm={},Qm.eleTextBiggerThanMin=function(e,t){if(!t){var r=e.cy().zoom(),i=this.getPixelRatio(),n=Math.ceil(qB(r*i));t=Math.pow(2,n)}var a=e.pstyle("font-size").pfValue*t,s=e.pstyle("min-zoomed-font-size").pfValue;return!(a<s)},Qm.drawElementText=function(e,t,r,i,n){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,s=this;if(i==null){if(a&&!s.eleTextBiggerThanMin(t))return}else if(i===!1)return;if(t.isNode()){var u=t.pstyle("label");if(!u||!u.value)return;var h=s.getLabelJustification(t);e.textAlign=h,e.textBaseline="bottom"}else{var d=t.element()._private.rscratch.badLine,p=t.pstyle("label"),g=t.pstyle("source-label"),y=t.pstyle("target-label");if(d||(!p||!p.value)&&(!g||!g.value)&&(!y||!y.value))return;e.textAlign="center",e.textBaseline="bottom"}var m=!r,x;r&&(x=r,e.translate(-x.x1,-x.y1)),n==null?(s.drawText(e,t,null,m,a),t.isEdge()&&(s.drawText(e,t,"source",m,a),s.drawText(e,t,"target",m,a))):s.drawText(e,t,n,m,a),r&&e.translate(x.x1,x.y1)},Qm.getFontCache=function(e){var t;this.fontCaches=this.fontCaches||[];for(var r=0;r<this.fontCaches.length;r++)if(t=this.fontCaches[r],t.context===e)return t;return t={context:e},this.fontCaches.push(t),t},Qm.setupTextStyle=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=t.pstyle("font-style").strValue,n=t.pstyle("font-size").pfValue+"px",a=t.pstyle("font-family").strValue,s=t.pstyle("font-weight").strValue,u=r?t.effectiveOpacity()*t.pstyle("text-opacity").value:1,h=t.pstyle("text-outline-opacity").value*u,d=t.pstyle("color").value,p=t.pstyle("text-outline-color").value;e.font=i+" "+s+" "+n+" "+a,e.lineJoin="round",this.colorFillStyle(e,d[0],d[1],d[2],u),this.colorStrokeStyle(e,p[0],p[1],p[2],h)},Qm.getTextAngle=function(e,t){var r,i=e._private,n=i.rscratch,a=t?t+"-":"",s=e.pstyle(a+"text-rotation"),u=qc(n,"labelAngle",t);return s.strValue==="autorotate"?r=e.isEdge()?u:0:s.strValue==="none"?r=0:r=s.pfValue,r},Qm.drawText=function(e,t,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=t._private,s=a.rscratch,u=n?t.effectiveOpacity():1;if(!(n&&(u===0||t.pstyle("text-opacity").value===0))){r==="main"&&(r=null);var h=qc(s,"labelX",r),d=qc(s,"labelY",r),p,g,y=this.getLabelText(t,r);if(y!=null&&y!==""&&!isNaN(h)&&!isNaN(d)){this.setupTextStyle(e,t,n);var m=r?r+"-":"",x=qc(s,"labelWidth",r),_=qc(s,"labelHeight",r),E=t.pstyle(m+"text-margin-x").pfValue,w=t.pstyle(m+"text-margin-y").pfValue,C=t.isEdge(),A=t.pstyle("text-halign").value,M=t.pstyle("text-valign").value;C&&(A="center",M="center"),h+=E,d+=w;var N;switch(i?N=this.getTextAngle(t,r):N=0,N!==0&&(p=h,g=d,e.translate(p,g),e.rotate(N),h=0,d=0),M){case"top":break;case"center":d+=_/2;break;case"bottom":d+=_;break}var B=t.pstyle("text-background-opacity").value,O=t.pstyle("text-border-opacity").value,L=t.pstyle("text-border-width").pfValue,$=t.pstyle("text-background-padding").pfValue,G=t.pstyle("text-background-shape").strValue,z=G.indexOf("round")===0,F=2;if(B>0||L>0&&O>0){var X=h-$;switch(A){case"left":X-=x;break;case"center":X-=x/2;break}var I=d-_-$,j=x+2*$,H=_+2*$;if(B>0){var V=e.fillStyle,P=t.pstyle("text-background-color").value;e.fillStyle="rgba("+P[0]+","+P[1]+","+P[2]+","+B*u+")",z?tQ(e,X,I,j,H,F):e.fillRect(X,I,j,H),e.fillStyle=V}if(L>0&&O>0){var q=e.strokeStyle,Z=e.lineWidth,J=t.pstyle("text-border-color").value,ae=t.pstyle("text-border-style").value;if(e.strokeStyle="rgba("+J[0]+","+J[1]+","+J[2]+","+O*u+")",e.lineWidth=L,e.setLineDash)switch(ae){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"double":e.lineWidth=L/4,e.setLineDash([]);break;case"solid":e.setLineDash([]);break}if(z?tQ(e,X,I,j,H,F,"stroke"):e.strokeRect(X,I,j,H),ae==="double"){var ue=L/2;z?tQ(e,X+ue,I+ue,j-ue*2,H-ue*2,F,"stroke"):e.strokeRect(X+ue,I+ue,j-ue*2,H-ue*2)}e.setLineDash&&e.setLineDash([]),e.lineWidth=Z,e.strokeStyle=q}}var be=2*t.pstyle("text-outline-width").pfValue;if(be>0&&(e.lineWidth=be),t.pstyle("text-wrap").value==="wrap"){var Le=qc(s,"labelWrapCachedLines",r),xe=qc(s,"labelLineHeight",r),Ae=x/2,oe=this.getLabelJustification(t);switch(oe==="auto"||(A==="left"?oe==="left"?h+=-x:oe==="center"&&(h+=-Ae):A==="center"?oe==="left"?h+=-Ae:oe==="right"&&(h+=Ae):A==="right"&&(oe==="center"?h+=Ae:oe==="right"&&(h+=x))),M){case"top":d-=(Le.length-1)*xe;break;case"center":case"bottom":d-=(Le.length-1)*xe;break}for(var he=0;he<Le.length;he++)be>0&&e.strokeText(Le[he],h,d),e.fillText(Le[he],h,d),d+=xe}else be>0&&e.strokeText(y,h,d),e.fillText(y,h,d);N!==0&&(e.rotate(-N),e.translate(-p,-g))}}},Cx={},Cx.drawNode=function(e,t,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,s=this,u,h,d=t._private,p=d.rscratch,g=t.position();if(!(!Ei(g.x)||!Ei(g.y))&&!(a&&!t.visible())){var y=a?t.effectiveOpacity():1,m=s.usePaths(),x,_=!1,E=t.padding();u=t.width()+2*E,h=t.height()+2*E;var w;r&&(w=r,e.translate(-w.x1,-w.y1));for(var C=t.pstyle("background-image"),A=C.value,M=new Array(A.length),N=new Array(A.length),B=0,O=0;O<A.length;O++){var L=A[O],$=M[O]=L!=null&&L!=="none";if($){var G=t.cy().style().getIndexedStyle(t,"background-image-crossorigin","value",O);B++,N[O]=s.getCachedImage(L,G,function(){d.backgroundTimestamp=Date.now(),t.emitAndNotify("background")})}}var z=t.pstyle("background-blacken").value,F=t.pstyle("border-width").pfValue,X=t.pstyle("background-opacity").value*y,I=t.pstyle("border-color").value,j=t.pstyle("border-style").value,H=t.pstyle("border-join").value,V=t.pstyle("border-cap").value,P=t.pstyle("border-position").value,q=t.pstyle("border-dash-pattern").pfValue,Z=t.pstyle("border-dash-offset").pfValue,J=t.pstyle("border-opacity").value*y,ae=t.pstyle("outline-width").pfValue,ue=t.pstyle("outline-color").value,be=t.pstyle("outline-style").value,Le=t.pstyle("outline-opacity").value*y,xe=t.pstyle("outline-offset").value,Ae=t.pstyle("corner-radius").value;Ae!=="auto"&&(Ae=t.pstyle("corner-radius").pfValue);var oe=function(){var Qe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:X;s.eleFillStyle(e,t,Qe)},he=function(){var Qe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:J;s.colorStrokeStyle(e,I[0],I[1],I[2],Qe)},le=function(){var Qe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Le;s.colorStrokeStyle(e,ue[0],ue[1],ue[2],Qe)},ke=function(Qe,ce,Ut,fe){var ze=s.nodePathCache=s.nodePathCache||[],yt=xQ(Ut==="polygon"?Ut+","+fe.join(","):Ut,""+ce,""+Qe,""+Ae),bt=ze[yt],At,ct=!1;return bt!=null?(At=bt,ct=!0,p.pathCache=At):(At=new Path2D,ze[yt]=p.pathCache=At),{path:At,cacheHit:ct}},pe=t.pstyle("shape").strValue,qe=t.pstyle("shape-polygon-points").pfValue;if(m){e.translate(g.x,g.y);var me=ke(u,h,pe,qe);x=me.path,_=me.cacheHit}var st=function(){if(!_){var Qe=g;m&&(Qe={x:0,y:0}),s.nodeShapes[s.getNodeShape(t)].draw(x||e,Qe.x,Qe.y,u,h,Ae,p)}m?e.fill(x):e.fill()},we=function(){for(var Qe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y,ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,Ut=d.backgrounding,fe=0,ze=0;ze<N.length;ze++){var yt=t.cy().style().getIndexedStyle(t,"background-image-containment","value",ze);if(ce&&yt==="over"||!ce&&yt==="inside"){fe++;continue}M[ze]&&N[ze].complete&&!N[ze].error&&(fe++,s.drawInscribedImage(e,N[ze],t,ze,Qe))}d.backgrounding=fe!==B,Ut!==d.backgrounding&&t.updateStyle(!1)},Et=function(){var Qe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:y;s.hasPie(t)&&(s.drawPie(e,t,ce),Qe&&(m||s.nodeShapes[s.getNodeShape(t)].draw(e,g.x,g.y,u,h,Ae,p)))},wt=function(){var Qe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y,ce=(z>0?z:-z)*Qe,Ut=z>0?0:255;z!==0&&(s.colorFillStyle(e,Ut,Ut,Ut,ce),m?e.fill(x):e.fill())},Tt=function(){if(F>0){if(e.lineWidth=F,e.lineCap=V,e.lineJoin=H,e.setLineDash)switch(j){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash(q),e.lineDashOffset=Z;break;case"solid":case"double":e.setLineDash([]);break}if(P!=="center"){if(e.save(),e.lineWidth*=2,P==="inside")m?e.clip(x):e.clip();else{var Qe=new Path2D;Qe.rect(-u/2-F,-h/2-F,u+2*F,h+2*F),Qe.addPath(x),e.clip(Qe,"evenodd")}m?e.stroke(x):e.stroke(),e.restore()}else m?e.stroke(x):e.stroke();if(j==="double"){e.lineWidth=F/3;var ce=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",m?e.stroke(x):e.stroke(),e.globalCompositeOperation=ce}e.setLineDash&&e.setLineDash([])}},er=function(){if(ae>0){if(e.lineWidth=ae,e.lineCap="butt",e.setLineDash)switch(be){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"solid":case"double":e.setLineDash([]);break}var Qe=g;m&&(Qe={x:0,y:0});var ce=s.getNodeShape(t),Ut=F;P==="inside"&&(Ut=0),P==="outside"&&(Ut*=2);var fe=(u+Ut+(ae+xe))/u,ze=(h+Ut+(ae+xe))/h,yt=u*fe,bt=h*ze,At=s.nodeShapes[ce].points,ct;if(m){var zt=ke(yt,bt,ce,At);ct=zt.path}if(ce==="ellipse")s.drawEllipsePath(ct||e,Qe.x,Qe.y,yt,bt);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(ce)){var ft=0,Pr=0,Mi=0;ce==="round-diamond"?ft=(Ut+xe+ae)*1.4:ce==="round-heptagon"?(ft=(Ut+xe+ae)*1.075,Mi=-(Ut/2+xe+ae)/35):ce==="round-hexagon"?ft=(Ut+xe+ae)*1.12:ce==="round-pentagon"?(ft=(Ut+xe+ae)*1.13,Mi=-(Ut/2+xe+ae)/15):ce==="round-tag"?(ft=(Ut+xe+ae)*1.12,Pr=(Ut/2+ae+xe)*.07):ce==="round-triangle"&&(ft=(Ut+xe+ae)*(Math.PI/2),Mi=-(Ut+xe/2+ae)/Math.PI),ft!==0&&(fe=(u+ft)/u,yt=u*fe,["round-hexagon","round-tag"].includes(ce)||(ze=(h+ft)/h,bt=h*ze)),Ae=Ae==="auto"?NQ(yt,bt):Ae;for(var Di=yt/2,ri=bt/2,Gi=Ae+(Ut+ae+xe)/2,Br=new Array(At.length/2),sr=new Array(At.length/2),hr=0;hr<At.length/2;hr++)Br[hr]={x:Qe.x+Pr+Di*At[hr*2],y:Qe.y+Mi+ri*At[hr*2+1]};var Ci,_r,ln,en,bi=Br.length;for(_r=Br[bi-1],Ci=0;Ci<bi;Ci++)ln=Br[Ci%bi],en=Br[(Ci+1)%bi],sr[Ci]=eQ(_r,ln,en,Gi),_r=ln,ln=en;s.drawRoundPolygonPath(ct||e,Qe.x+Pr,Qe.y+Mi,u*fe,h*ze,At,sr)}else if(["roundrectangle","round-rectangle"].includes(ce))Ae=Ae==="auto"?Wm(yt,bt):Ae,s.drawRoundRectanglePath(ct||e,Qe.x,Qe.y,yt,bt,Ae+(Ut+ae+xe)/2);else if(["cutrectangle","cut-rectangle"].includes(ce))Ae=Ae==="auto"?QB():Ae,s.drawCutRectanglePath(ct||e,Qe.x,Qe.y,yt,bt,null,Ae+(Ut+ae+xe)/4);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(ce))Ae=Ae==="auto"?Wm(yt,bt):Ae,s.drawBottomRoundRectanglePath(ct||e,Qe.x,Qe.y,yt,bt,Ae+(Ut+ae+xe)/2);else if(ce==="barrel")s.drawBarrelPath(ct||e,Qe.x,Qe.y,yt,bt);else if(ce.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(ce)){var gi=(Ut+ae+xe)/u;At=t8(r8(At,gi)),s.drawPolygonPath(ct||e,Qe.x,Qe.y,u,h,At)}else{var Fr=(Ut+ae+xe)/u;At=t8(r8(At,-Fr)),s.drawPolygonPath(ct||e,Qe.x,Qe.y,u,h,At)}if(m?e.stroke(ct):e.stroke(),be==="double"){e.lineWidth=Ut/3;var Bi=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",m?e.stroke(ct):e.stroke(),e.globalCompositeOperation=Bi}e.setLineDash&&e.setLineDash([])}},tr=function(){n&&s.drawNodeOverlay(e,t,g,u,h)},kr=function(){n&&s.drawNodeUnderlay(e,t,g,u,h)},fr=function(){s.drawElementText(e,t,null,i)},Mt=t.pstyle("ghost").value==="yes";if(Mt){var Kt=t.pstyle("ghost-offset-x").pfValue,ne=t.pstyle("ghost-offset-y").pfValue,He=t.pstyle("ghost-opacity").value,Te=He*y;e.translate(Kt,ne),le(),er(),oe(He*X),st(),we(Te,!0),he(He*J),Tt(),Et(z!==0||F!==0),we(Te,!1),wt(Te),e.translate(-Kt,-ne)}m&&e.translate(-g.x,-g.y),kr(),m&&e.translate(g.x,g.y),le(),er(),oe(),st(),we(y,!0),he(),Tt(),Et(z!==0||F!==0),we(y,!1),wt(),m&&e.translate(-g.x,-g.y),fr(),tr(),r&&e.translate(w.x1,w.y1)}},fee=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,r,i,n,a){var s=this;if(r.visible()){var u=r.pstyle("".concat(e,"-padding")).pfValue,h=r.pstyle("".concat(e,"-opacity")).value,d=r.pstyle("".concat(e,"-color")).value,p=r.pstyle("".concat(e,"-shape")).value,g=r.pstyle("".concat(e,"-corner-radius")).value;if(h>0){if(i=i||r.position(),n==null||a==null){var y=r.padding();n=r.width()+2*y,a=r.height()+2*y}s.colorFillStyle(t,d[0],d[1],d[2],h),s.nodeShapes[p].draw(t,i.x,i.y,n+u*2,a+u*2,g),t.fill()}}}},Cx.drawNodeOverlay=fee("overlay"),Cx.drawNodeUnderlay=fee("underlay"),Cx.hasPie=function(e){return e=e[0],e._private.hasPie},Cx.drawPie=function(e,t,r,i){t=t[0],i=i||t.position();var n=t.cy().style(),a=t.pstyle("pie-size"),s=i.x,u=i.y,h=t.width(),d=t.height(),p=Math.min(h,d)/2,g=0,y=this.usePaths();y&&(s=0,u=0),a.units==="%"?p=p*a.pfValue:a.pfValue!==void 0&&(p=a.pfValue/2);for(var m=1;m<=n.pieBackgroundN;m++){var x=t.pstyle("pie-"+m+"-background-size").value,_=t.pstyle("pie-"+m+"-background-color").value,E=t.pstyle("pie-"+m+"-background-opacity").value*r,w=x/100;w+g>1&&(w=1-g);var C=1.5*Math.PI+2*Math.PI*g,A=2*Math.PI*w,M=C+A;x===0||g>=1||g+w>1||(e.beginPath(),e.moveTo(s,u),e.arc(s,u,p,C,M),e.closePath(),this.colorFillStyle(e,_[0],_[1],_[2],E),e.fill(),g+=w)}},_h={},P9e=100,_h.getPixelRatio=function(){var e=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var t=this.cy.window(),r=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(t.devicePixelRatio||1)/r},_h.paintCache=function(e){for(var t=this.paintCaches=this.paintCaches||[],r=!0,i,n=0;n<t.length;n++)if(i=t[n],i.context===e){r=!1;break}return r&&(i={context:e},t.push(i)),i},_h.createGradientStyleFor=function(e,t,r,i,n){var a,s=this.usePaths(),u=r.pstyle(t+"-gradient-stop-colors").value,h=r.pstyle(t+"-gradient-stop-positions").pfValue;if(i==="radial-gradient")if(r.isEdge()){var d=r.sourceEndpoint(),p=r.targetEndpoint(),g=r.midpoint(),y=jm(d,g),m=jm(p,g);a=e.createRadialGradient(g.x,g.y,0,g.x,g.y,Math.max(y,m))}else{var x=s?{x:0,y:0}:r.position(),_=r.paddedWidth(),E=r.paddedHeight();a=e.createRadialGradient(x.x,x.y,0,x.x,x.y,Math.max(_,E))}else if(r.isEdge()){var w=r.sourceEndpoint(),C=r.targetEndpoint();a=e.createLinearGradient(w.x,w.y,C.x,C.y)}else{var A=s?{x:0,y:0}:r.position(),M=r.paddedWidth(),N=r.paddedHeight(),B=M/2,O=N/2,L=r.pstyle("background-gradient-direction").value;switch(L){case"to-bottom":a=e.createLinearGradient(A.x,A.y-O,A.x,A.y+O);break;case"to-top":a=e.createLinearGradient(A.x,A.y+O,A.x,A.y-O);break;case"to-left":a=e.createLinearGradient(A.x+B,A.y,A.x-B,A.y);break;case"to-right":a=e.createLinearGradient(A.x-B,A.y,A.x+B,A.y);break;case"to-bottom-right":case"to-right-bottom":a=e.createLinearGradient(A.x-B,A.y-O,A.x+B,A.y+O);break;case"to-top-right":case"to-right-top":a=e.createLinearGradient(A.x-B,A.y+O,A.x+B,A.y-O);break;case"to-bottom-left":case"to-left-bottom":a=e.createLinearGradient(A.x+B,A.y-O,A.x-B,A.y+O);break;case"to-top-left":case"to-left-top":a=e.createLinearGradient(A.x+B,A.y+O,A.x-B,A.y-O);break}}if(!a)return null;for(var $=h.length===u.length,G=u.length,z=0;z<G;z++)a.addColorStop($?h[z]:z/(G-1),"rgba("+u[z][0]+","+u[z][1]+","+u[z][2]+","+n+")");return a},_h.gradientFillStyle=function(e,t,r,i){var n=this.createGradientStyleFor(e,"background",t,r,i);if(!n)return null;e.fillStyle=n},_h.colorFillStyle=function(e,t,r,i,n){e.fillStyle="rgba("+t+","+r+","+i+","+n+")"},_h.eleFillStyle=function(e,t,r){var i=t.pstyle("background-fill").value;if(i==="linear-gradient"||i==="radial-gradient")this.gradientFillStyle(e,t,i,r);else{var n=t.pstyle("background-color").value;this.colorFillStyle(e,n[0],n[1],n[2],r)}},_h.gradientStrokeStyle=function(e,t,r,i){var n=this.createGradientStyleFor(e,"line",t,r,i);if(!n)return null;e.strokeStyle=n},_h.colorStrokeStyle=function(e,t,r,i,n){e.strokeStyle="rgba("+t+","+r+","+i+","+n+")"},_h.eleStrokeStyle=function(e,t,r){var i=t.pstyle("line-fill").value;if(i==="linear-gradient"||i==="radial-gradient")this.gradientStrokeStyle(e,t,i,r);else{var n=t.pstyle("line-color").value;this.colorStrokeStyle(e,n[0],n[1],n[2],r)}},_h.matchCanvasSize=function(e){var t=this,r=t.data,i=t.findContainerClientCoords(),n=i[2],a=i[3],s=t.getPixelRatio(),u=t.motionBlurPxRatio;(e===t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_NODE]||e===t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_DRAG])&&(s=u);var h=n*s,d=a*s,p;if(!(h===t.canvasWidth&&d===t.canvasHeight)){t.fontCaches=null;var g=r.canvasContainer;g.style.width=n+"px",g.style.height=a+"px";for(var y=0;y<t.CANVAS_LAYERS;y++)p=r.canvases[y],p.width=h,p.height=d,p.style.width=n+"px",p.style.height=a+"px";for(var y=0;y<t.BUFFER_COUNT;y++)p=r.bufferCanvases[y],p.width=h,p.height=d,p.style.width=n+"px",p.style.height=a+"px";t.textureMult=1,s<=1&&(p=r.bufferCanvases[t.TEXTURE_BUFFER],t.textureMult=2,p.width=h*t.textureMult,p.height=d*t.textureMult),t.canvasWidth=h,t.canvasHeight=d}},_h.renderTo=function(e,t,r,i){this.render({forcedContext:e,forcedZoom:t,forcedPan:r,drawAllLayers:!0,forcedPxRatio:i})},_h.render=function(e){e=e||EQ();var t=e.forcedContext,r=e.drawAllLayers,i=e.drawOnlyNodeLayer,n=e.forcedZoom,a=e.forcedPan,s=this,u=e.forcedPxRatio===void 0?this.getPixelRatio():e.forcedPxRatio,h=s.cy,d=s.data,p=d.canvasNeedsRedraw,g=s.textureOnViewport&&!t&&(s.pinching||s.hoverData.dragging||s.swipePanning||s.data.wheelZooming),y=e.motionBlur!==void 0?e.motionBlur:s.motionBlur,m=s.motionBlurPxRatio,x=h.hasCompoundNodes(),_=s.hoverData.draggingEles,E=!!(s.hoverData.selecting||s.touchData.selecting);y=y&&!t&&s.motionBlurEnabled&&!E;var w=y;t||(s.prevPxRatio!==u&&(s.invalidateContainerClientCoordsCache(),s.matchCanvasSize(s.container),s.redrawHint("eles",!0),s.redrawHint("drag",!0)),s.prevPxRatio=u),!t&&s.motionBlurTimeout&&clearTimeout(s.motionBlurTimeout),y&&(s.mbFrames==null&&(s.mbFrames=0),s.mbFrames++,s.mbFrames<3&&(w=!1),s.mbFrames>s.minMbLowQualFrames&&(s.motionBlurPxRatio=s.mbPxRBlurry)),s.clearingMotionBlur&&(s.motionBlurPxRatio=1),s.textureDrawLastFrame&&!g&&(p[s.NODE]=!0,p[s.SELECT_BOX]=!0);var C=h.style(),A=h.zoom(),M=n!==void 0?n:A,N=h.pan(),B={x:N.x,y:N.y},O={zoom:A,pan:{x:N.x,y:N.y}},L=s.prevViewport,$=L===void 0||O.zoom!==L.zoom||O.pan.x!==L.pan.x||O.pan.y!==L.pan.y;!$&&!(_&&!x)&&(s.motionBlurPxRatio=1),a&&(B=a),M*=u,B.x*=u,B.y*=u;var G=s.getCachedZSortedEles();function z(me,st,we,Et,wt){var Tt=me.globalCompositeOperation;me.globalCompositeOperation="destination-out",s.colorFillStyle(me,255,255,255,s.motionBlurTransparency),me.fillRect(st,we,Et,wt),me.globalCompositeOperation=Tt}function F(me,st){var we,Et,wt,Tt;!s.clearingMotionBlur&&(me===d.bufferContexts[s.MOTIONBLUR_BUFFER_NODE]||me===d.bufferContexts[s.MOTIONBLUR_BUFFER_DRAG])?(we={x:N.x*m,y:N.y*m},Et=A*m,wt=s.canvasWidth*m,Tt=s.canvasHeight*m):(we=B,Et=M,wt=s.canvasWidth,Tt=s.canvasHeight),me.setTransform(1,0,0,1,0,0),st==="motionBlur"?z(me,0,0,wt,Tt):!t&&(st===void 0||st)&&me.clearRect(0,0,wt,Tt),r||(me.translate(we.x,we.y),me.scale(Et,Et)),a&&me.translate(a.x,a.y),n&&me.scale(n,n)}if(g||(s.textureDrawLastFrame=!1),g){if(s.textureDrawLastFrame=!0,!s.textureCache){s.textureCache={},s.textureCache.bb=h.mutableElements().boundingBox(),s.textureCache.texture=s.data.bufferCanvases[s.TEXTURE_BUFFER];var X=s.data.bufferContexts[s.TEXTURE_BUFFER];X.setTransform(1,0,0,1,0,0),X.clearRect(0,0,s.canvasWidth*s.textureMult,s.canvasHeight*s.textureMult),s.render({forcedContext:X,drawOnlyNodeLayer:!0,forcedPxRatio:u*s.textureMult});var O=s.textureCache.viewport={zoom:h.zoom(),pan:h.pan(),width:s.canvasWidth,height:s.canvasHeight};O.mpan={x:(0-O.pan.x)/O.zoom,y:(0-O.pan.y)/O.zoom}}p[s.DRAG]=!1,p[s.NODE]=!1;var I=d.contexts[s.NODE],j=s.textureCache.texture,O=s.textureCache.viewport;I.setTransform(1,0,0,1,0,0),y?z(I,0,0,O.width,O.height):I.clearRect(0,0,O.width,O.height);var H=C.core("outside-texture-bg-color").value,V=C.core("outside-texture-bg-opacity").value;s.colorFillStyle(I,H[0],H[1],H[2],V),I.fillRect(0,0,O.width,O.height);var A=h.zoom();F(I,!1),I.clearRect(O.mpan.x,O.mpan.y,O.width/O.zoom/u,O.height/O.zoom/u),I.drawImage(j,O.mpan.x,O.mpan.y,O.width/O.zoom/u,O.height/O.zoom/u)}else s.textureOnViewport&&!t&&(s.textureCache=null);var P=h.extent(),q=s.pinching||s.hoverData.dragging||s.swipePanning||s.data.wheelZooming||s.hoverData.draggingEles||s.cy.animated(),Z=s.hideEdgesOnViewport&&q,J=[];if(J[s.NODE]=!p[s.NODE]&&y&&!s.clearedForMotionBlur[s.NODE]||s.clearingMotionBlur,J[s.NODE]&&(s.clearedForMotionBlur[s.NODE]=!0),J[s.DRAG]=!p[s.DRAG]&&y&&!s.clearedForMotionBlur[s.DRAG]||s.clearingMotionBlur,J[s.DRAG]&&(s.clearedForMotionBlur[s.DRAG]=!0),p[s.NODE]||r||i||J[s.NODE]){var ae=y&&!J[s.NODE]&&m!==1,I=t||(ae?s.data.bufferContexts[s.MOTIONBLUR_BUFFER_NODE]:d.contexts[s.NODE]),ue=y&&!ae?"motionBlur":void 0;F(I,ue),Z?s.drawCachedNodes(I,G.nondrag,u,P):s.drawLayeredElements(I,G.nondrag,u,P),s.debug&&s.drawDebugPoints(I,G.nondrag),!r&&!y&&(p[s.NODE]=!1)}if(!i&&(p[s.DRAG]||r||J[s.DRAG])){var ae=y&&!J[s.DRAG]&&m!==1,I=t||(ae?s.data.bufferContexts[s.MOTIONBLUR_BUFFER_DRAG]:d.contexts[s.DRAG]);F(I,y&&!ae?"motionBlur":void 0),Z?s.drawCachedNodes(I,G.drag,u,P):s.drawCachedElements(I,G.drag,u,P),s.debug&&s.drawDebugPoints(I,G.drag),!r&&!y&&(p[s.DRAG]=!1)}if(s.showFps||!i&&p[s.SELECT_BOX]&&!r){var I=t||d.contexts[s.SELECT_BOX];if(F(I),s.selection[4]==1&&(s.hoverData.selecting||s.touchData.selecting)){var A=s.cy.zoom(),be=C.core("selection-box-border-width").value/A;I.lineWidth=be,I.fillStyle="rgba("+C.core("selection-box-color").value[0]+","+C.core("selection-box-color").value[1]+","+C.core("selection-box-color").value[2]+","+C.core("selection-box-opacity").value+")",I.fillRect(s.selection[0],s.selection[1],s.selection[2]-s.selection[0],s.selection[3]-s.selection[1]),be>0&&(I.strokeStyle="rgba("+C.core("selection-box-border-color").value[0]+","+C.core("selection-box-border-color").value[1]+","+C.core("selection-box-border-color").value[2]+","+C.core("selection-box-opacity").value+")",I.strokeRect(s.selection[0],s.selection[1],s.selection[2]-s.selection[0],s.selection[3]-s.selection[1]))}if(d.bgActivePosistion&&!s.hoverData.selecting){var A=s.cy.zoom(),Le=d.bgActivePosistion;I.fillStyle="rgba("+C.core("active-bg-color").value[0]+","+C.core("active-bg-color").value[1]+","+C.core("active-bg-color").value[2]+","+C.core("active-bg-opacity").value+")",I.beginPath(),I.arc(Le.x,Le.y,C.core("active-bg-size").pfValue/A,0,2*Math.PI),I.fill()}var xe=s.lastRedrawTime;if(s.showFps&&xe){xe=Math.round(xe);var Ae=Math.round(1e3/xe);I.setTransform(1,0,0,1,0,0),I.fillStyle="rgba(255, 0, 0, 0.75)",I.strokeStyle="rgba(255, 0, 0, 0.75)",I.lineWidth=1,I.fillText("1 frame = "+xe+" ms = "+Ae+" fps",0,20);var oe=60;I.strokeRect(0,30,250,20),I.fillRect(0,30,250*Math.min(Ae/oe,1),20)}r||(p[s.SELECT_BOX]=!1)}if(y&&m!==1){var he=d.contexts[s.NODE],le=s.data.bufferCanvases[s.MOTIONBLUR_BUFFER_NODE],ke=d.contexts[s.DRAG],pe=s.data.bufferCanvases[s.MOTIONBLUR_BUFFER_DRAG],qe=function(me,st,we){me.setTransform(1,0,0,1,0,0),we||!w?me.clearRect(0,0,s.canvasWidth,s.canvasHeight):z(me,0,0,s.canvasWidth,s.canvasHeight);var Et=m;me.drawImage(st,0,0,s.canvasWidth*Et,s.canvasHeight*Et,0,0,s.canvasWidth,s.canvasHeight)};(p[s.NODE]||J[s.NODE])&&(qe(he,le,J[s.NODE]),p[s.NODE]=!1),(p[s.DRAG]||J[s.DRAG])&&(qe(ke,pe,J[s.DRAG]),p[s.DRAG]=!1)}s.prevViewport=O,s.clearingMotionBlur&&(s.clearingMotionBlur=!1,s.motionBlurCleared=!0,s.motionBlur=!0),y&&(s.motionBlurTimeout=setTimeout(function(){s.motionBlurTimeout=null,s.clearedForMotionBlur[s.NODE]=!1,s.clearedForMotionBlur[s.DRAG]=!1,s.motionBlur=!1,s.clearingMotionBlur=!g,s.mbFrames=0,p[s.NODE]=!0,p[s.DRAG]=!0,s.redraw()},P9e)),t||h.emit("render")},ag={},ag.drawPolygonPath=function(e,t,r,i,n,a){var s=i/2,u=n/2;e.beginPath&&e.beginPath(),e.moveTo(t+s*a[0],r+u*a[1]);for(var h=1;h<a.length/2;h++)e.lineTo(t+s*a[h*2],r+u*a[h*2+1]);e.closePath()},ag.drawRoundPolygonPath=function(e,t,r,i,n,a,s){s.forEach(function(u){return lEe(e,u)}),e.closePath()},ag.drawRoundRectanglePath=function(e,t,r,i,n,a){var s=i/2,u=n/2,h=a==="auto"?Wm(i,n):Math.min(a,u,s);e.beginPath&&e.beginPath(),e.moveTo(t,r-u),e.arcTo(t+s,r-u,t+s,r,h),e.arcTo(t+s,r+u,t,r+u,h),e.arcTo(t-s,r+u,t-s,r,h),e.arcTo(t-s,r-u,t,r-u,h),e.lineTo(t,r-u),e.closePath()},ag.drawBottomRoundRectanglePath=function(e,t,r,i,n,a){var s=i/2,u=n/2,h=a==="auto"?Wm(i,n):a;e.beginPath&&e.beginPath(),e.moveTo(t,r-u),e.lineTo(t+s,r-u),e.lineTo(t+s,r),e.arcTo(t+s,r+u,t,r+u,h),e.arcTo(t-s,r+u,t-s,r,h),e.lineTo(t-s,r-u),e.lineTo(t,r-u),e.closePath()},ag.drawCutRectanglePath=function(e,t,r,i,n,a,s){var u=i/2,h=n/2,d=s==="auto"?QB():s;e.beginPath&&e.beginPath(),e.moveTo(t-u+d,r-h),e.lineTo(t+u-d,r-h),e.lineTo(t+u,r-h+d),e.lineTo(t+u,r+h-d),e.lineTo(t+u-d,r+h),e.lineTo(t-u+d,r+h),e.lineTo(t-u,r+h-d),e.lineTo(t-u,r-h+d),e.closePath()},ag.drawBarrelPath=function(e,t,r,i,n){var a=i/2,s=n/2,u=t-a,h=t+a,d=r-s,p=r+s,g=JB(i,n),y=g.widthOffset,m=g.heightOffset,x=g.ctrlPtOffsetPct*y;e.beginPath&&e.beginPath(),e.moveTo(u,d+m),e.lineTo(u,p-m),e.quadraticCurveTo(u+x,p,u+y,p),e.lineTo(h-y,p),e.quadraticCurveTo(h-x,p,h,p-m),e.lineTo(h,d+m),e.quadraticCurveTo(h-x,d,h-y,d),e.lineTo(u+y,d),e.quadraticCurveTo(u+x,d,u,d+m),e.closePath()},gee=Math.sin(0),mee=Math.cos(0),kP={},TP={},yee=Math.PI/40,Sx=0*Math.PI;Sx<2*Math.PI;Sx+=yee)kP[Sx]=Math.sin(Sx),TP[Sx]=Math.cos(Sx);ag.drawEllipsePath=function(e,t,r,i,n){if(e.beginPath&&e.beginPath(),e.ellipse)e.ellipse(t,r,i/2,n/2,0,0,2*Math.PI);else for(var a,s,u=i/2,h=n/2,d=0*Math.PI;d<2*Math.PI;d+=yee)a=t-u*kP[d]*gee+u*TP[d]*mee,s=r+h*TP[d]*gee+h*kP[d]*mee,d===0?e.moveTo(a,s):e.lineTo(a,s);e.closePath()},gw={},gw.createBuffer=function(e,t){var r=document.createElement("canvas");return r.width=e,r.height=t,[r,r.getContext("2d")]},gw.bufferCanvasImage=function(e){var t=this.cy,r=t.mutableElements(),i=r.boundingBox(),n=this.findContainerClientCoords(),a=e.full?Math.ceil(i.w):n[2],s=e.full?Math.ceil(i.h):n[3],u=Ei(e.maxWidth)||Ei(e.maxHeight),h=this.getPixelRatio(),d=1;if(e.scale!==void 0)a*=e.scale,s*=e.scale,d=e.scale;else if(u){var p=1/0,g=1/0;Ei(e.maxWidth)&&(p=d*e.maxWidth/a),Ei(e.maxHeight)&&(g=d*e.maxHeight/s),d=Math.min(p,g),a*=d,s*=d}u||(a*=h,s*=h,d*=h);var y=document.createElement("canvas");y.width=a,y.height=s,y.style.width=a+"px",y.style.height=s+"px";var m=y.getContext("2d");if(a>0&&s>0){m.clearRect(0,0,a,s),m.globalCompositeOperation="source-over";var x=this.getCachedZSortedEles();if(e.full)m.translate(-i.x1*d,-i.y1*d),m.scale(d,d),this.drawElements(m,x),m.scale(1/d,1/d),m.translate(i.x1*d,i.y1*d);else{var _=t.pan(),E={x:_.x*d,y:_.y*d};d*=t.zoom(),m.translate(E.x,E.y),m.scale(d,d),this.drawElements(m,x),m.scale(1/d,1/d),m.translate(-E.x,-E.y)}e.bg&&(m.globalCompositeOperation="destination-over",m.fillStyle=e.bg,m.rect(0,0,a,s),m.fill())}return y},gw.png=function(e){return dEe(e,this.bufferCanvasImage(e),"image/png")},gw.jpg=function(e){return dEe(e,this.bufferCanvasImage(e),"image/jpeg")},vee={},vee.nodeShapeImpl=function(e,t,r,i,n,a,s,u){switch(e){case"ellipse":return this.drawEllipsePath(t,r,i,n,a);case"polygon":return this.drawPolygonPath(t,r,i,n,a,s);case"round-polygon":return this.drawRoundPolygonPath(t,r,i,n,a,s,u);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(t,r,i,n,a,u);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(t,r,i,n,a,s,u);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(t,r,i,n,a,u);case"barrel":return this.drawBarrelPath(t,r,i,n,a)}},F9e=pEe,Ga=pEe.prototype,Ga.CANVAS_LAYERS=3,Ga.SELECT_BOX=0,Ga.DRAG=1,Ga.NODE=2,Ga.BUFFER_COUNT=3,Ga.TEXTURE_BUFFER=0,Ga.MOTIONBLUR_BUFFER_NODE=1,Ga.MOTIONBLUR_BUFFER_DRAG=2,Ga.redrawHint=function(e,t){var r=this;switch(e){case"eles":r.data.canvasNeedsRedraw[Ga.NODE]=t;break;case"drag":r.data.canvasNeedsRedraw[Ga.DRAG]=t;break;case"select":r.data.canvasNeedsRedraw[Ga.SELECT_BOX]=t;break}},$9e=typeof Path2D<"u",Ga.path2dEnabled=function(e){if(e===void 0)return this.pathsEnabled;this.pathsEnabled=!!e},Ga.usePaths=function(){return $9e&&this.pathsEnabled},Ga.setImgSmoothing=function(e,t){e.imageSmoothingEnabled!=null?e.imageSmoothingEnabled=t:(e.webkitImageSmoothingEnabled=t,e.mozImageSmoothingEnabled=t,e.msImageSmoothingEnabled=t)},Ga.getImgSmoothing=function(e){return e.imageSmoothingEnabled!=null?e.imageSmoothingEnabled:e.webkitImageSmoothingEnabled||e.mozImageSmoothingEnabled||e.msImageSmoothingEnabled},Ga.makeOffscreenCanvas=function(e,t){var r;if((typeof OffscreenCanvas>"u"?"undefined":ll(OffscreenCanvas))!=="undefined")r=new OffscreenCanvas(e,t);else{var i=this.cy.window(),n=i.document;r=n.createElement("canvas"),r.width=e,r.height=t}return r},[dee,Zd,np,wP,Qm,Cx,_h,ag,gw,vee].forEach(function(e){Rn(Ga,e)}),z9e=[{name:"null",impl:oEe},{name:"base",impl:aee},{name:"canvas",impl:F9e}],G9e=[{type:"layout",extensions:YAe},{type:"renderer",extensions:z9e}],xee={},bee={},EP=function(){if(arguments.length===2)return gEe.apply(null,arguments);if(arguments.length===3)return fEe.apply(null,arguments);if(arguments.length===4)return pZe.apply(null,arguments);if(arguments.length===5)return dZe.apply(null,arguments);no("Invalid extension access syntax")},uw.prototype.extension=EP,G9e.forEach(function(e){e.extensions.forEach(function(t){fEe(e.type,t.name,t.impl)})}),_ee=function e(){if(!(this instanceof e))return new e;this.length=0},Jm=_ee.prototype,Jm.instanceString=function(){return"stylesheet"},Jm.selector=function(e){var t=this.length++;return this[t]={selector:e,properties:[]},this},Jm.css=function(e,t){var r=this.length-1;if(wn(e))this[r].properties.push({name:e,value:t});else if(Ba(e))for(var i=e,n=Object.keys(i),a=0;a<n.length;a++){var s=n[a],u=i[s];if(u!=null){var h=ql.properties[s]||ql.properties[HS(s)];if(h!=null){var d=h.name,p=u;this[r].properties.push({name:d,value:p})}}}return this},Jm.style=Jm.css,Jm.generateStyle=function(e){var t=new ql(e);return this.appendToStyle(t)},Jm.appendToStyle=function(e){for(var t=0;t<this.length;t++){var r=this[t],i=r.selector,n=r.properties;e.selector(i);for(var a=0;a<n.length;a++){var s=n[a];e.css(s.name,s.value)}}return e},U9e="3.30.3",Qd=function(e){if(e===void 0&&(e={}),Ba(e))return new uw(e);if(wn(e))return EP.apply(EP,arguments)},Qd.use=function(e){var t=Array.prototype.slice.call(arguments,1);return t.unshift(Qd),e.apply(null,t),this},Qd.warnings=function(e){return kQ(e)},Qd.version=U9e,Qd.stylesheet=Qd.Stylesheet=_ee}),H9e=hi((e,t)=>{(function(r,i){typeof e=="object"&&typeof t=="object"?t.exports=i():typeof define=="function"&&define.amd?define([],i):typeof e=="object"?e.layoutBase=i():r.layoutBase=i()})(e,function(){return function(r){var i={};function n(a){if(i[a])return i[a].exports;var s=i[a]={i:a,l:!1,exports:{}};return r[a].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=r,n.c=i,n.i=function(a){return a},n.d=function(a,s,u){n.o(a,s)||Object.defineProperty(a,s,{configurable:!1,enumerable:!0,get:u})},n.n=function(a){var s=a&&a.__esModule?function(){return a.default}:function(){return a};return n.d(s,"a",s),s},n.o=function(a,s){return Object.prototype.hasOwnProperty.call(a,s)},n.p="",n(n.s=26)}([function(r,i,n){"use strict";function a(){}a.QUALITY=1,a.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,a.DEFAULT_INCREMENTAL=!1,a.DEFAULT_ANIMATION_ON_LAYOUT=!0,a.DEFAULT_ANIMATION_DURING_LAYOUT=!1,a.DEFAULT_ANIMATION_PERIOD=50,a.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,a.DEFAULT_GRAPH_MARGIN=15,a.NODE_DIMENSIONS_INCLUDE_LABELS=!1,a.SIMPLE_NODE_SIZE=40,a.SIMPLE_NODE_HALF_SIZE=a.SIMPLE_NODE_SIZE/2,a.EMPTY_COMPOUND_NODE_SIZE=40,a.MIN_EDGE_LENGTH=1,a.WORLD_BOUNDARY=1e6,a.INITIAL_WORLD_BOUNDARY=a.WORLD_BOUNDARY/1e3,a.WORLD_CENTER_X=1200,a.WORLD_CENTER_Y=900,r.exports=a},function(r,i,n){"use strict";var a=n(2),s=n(8),u=n(9);function h(p,g,y){a.call(this,y),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=y,this.bendpoints=[],this.source=p,this.target=g}h.prototype=Object.create(a.prototype);for(var d in a)h[d]=a[d];h.prototype.getSource=function(){return this.source},h.prototype.getTarget=function(){return this.target},h.prototype.isInterGraph=function(){return this.isInterGraph},h.prototype.getLength=function(){return this.length},h.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},h.prototype.getBendpoints=function(){return this.bendpoints},h.prototype.getLca=function(){return this.lca},h.prototype.getSourceInLca=function(){return this.sourceInLca},h.prototype.getTargetInLca=function(){return this.targetInLca},h.prototype.getOtherEnd=function(p){if(this.source===p)return this.target;if(this.target===p)return this.source;throw"Node is not incident with this edge"},h.prototype.getOtherEndInGraph=function(p,g){for(var y=this.getOtherEnd(p),m=g.getGraphManager().getRoot();;){if(y.getOwner()==g)return y;if(y.getOwner()==m)break;y=y.getOwner().getParent()}return null},h.prototype.updateLength=function(){var p=new Array(4);this.isOverlapingSourceAndTarget=s.getIntersection(this.target.getRect(),this.source.getRect(),p),this.isOverlapingSourceAndTarget||(this.lengthX=p[0]-p[2],this.lengthY=p[1]-p[3],Math.abs(this.lengthX)<1&&(this.lengthX=u.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=u.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},h.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=u.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=u.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},r.exports=h},function(r,i,n){"use strict";function a(s){this.vGraphObject=s}r.exports=a},function(r,i,n){"use strict";var a=n(2),s=n(10),u=n(13),h=n(0),d=n(16),p=n(4);function g(m,x,_,E){_==null&&E==null&&(E=x),a.call(this,E),m.graphManager!=null&&(m=m.graphManager),this.estimatedSize=s.MIN_VALUE,this.inclusionTreeDepth=s.MAX_VALUE,this.vGraphObject=E,this.edges=[],this.graphManager=m,_!=null&&x!=null?this.rect=new u(x.x,x.y,_.width,_.height):this.rect=new u}g.prototype=Object.create(a.prototype);for(var y in a)g[y]=a[y];g.prototype.getEdges=function(){return this.edges},g.prototype.getChild=function(){return this.child},g.prototype.getOwner=function(){return this.owner},g.prototype.getWidth=function(){return this.rect.width},g.prototype.setWidth=function(m){this.rect.width=m},g.prototype.getHeight=function(){return this.rect.height},g.prototype.setHeight=function(m){this.rect.height=m},g.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},g.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},g.prototype.getCenter=function(){return new p(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},g.prototype.getLocation=function(){return new p(this.rect.x,this.rect.y)},g.prototype.getRect=function(){return this.rect},g.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},g.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},g.prototype.setRect=function(m,x){this.rect.x=m.x,this.rect.y=m.y,this.rect.width=x.width,this.rect.height=x.height},g.prototype.setCenter=function(m,x){this.rect.x=m-this.rect.width/2,this.rect.y=x-this.rect.height/2},g.prototype.setLocation=function(m,x){this.rect.x=m,this.rect.y=x},g.prototype.moveBy=function(m,x){this.rect.x+=m,this.rect.y+=x},g.prototype.getEdgeListToNode=function(m){var x=[],_,E=this;return E.edges.forEach(function(w){if(w.target==m){if(w.source!=E)throw"Incorrect edge source!";x.push(w)}}),x},g.prototype.getEdgesBetween=function(m){var x=[],_,E=this;return E.edges.forEach(function(w){if(!(w.source==E||w.target==E))throw"Incorrect edge source and/or target";(w.target==m||w.source==m)&&x.push(w)}),x},g.prototype.getNeighborsList=function(){var m=new Set,x=this;return x.edges.forEach(function(_){if(_.source==x)m.add(_.target);else{if(_.target!=x)throw"Incorrect incidency!";m.add(_.source)}}),m},g.prototype.withChildren=function(){var m=new Set,x,_;if(m.add(this),this.child!=null)for(var E=this.child.getNodes(),w=0;w<E.length;w++)x=E[w],_=x.withChildren(),_.forEach(function(C){m.add(C)});return m},g.prototype.getNoOfChildren=function(){var m=0,x;if(this.child==null)m=1;else for(var _=this.child.getNodes(),E=0;E<_.length;E++)x=_[E],m+=x.getNoOfChildren();return m==0&&(m=1),m},g.prototype.getEstimatedSize=function(){if(this.estimatedSize==s.MIN_VALUE)throw"assert failed";return this.estimatedSize},g.prototype.calcEstimatedSize=function(){return this.child==null?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},g.prototype.scatter=function(){var m,x,_=-h.INITIAL_WORLD_BOUNDARY,E=h.INITIAL_WORLD_BOUNDARY;m=h.WORLD_CENTER_X+d.nextDouble()*(E-_)+_;var w=-h.INITIAL_WORLD_BOUNDARY,C=h.INITIAL_WORLD_BOUNDARY;x=h.WORLD_CENTER_Y+d.nextDouble()*(C-w)+w,this.rect.x=m,this.rect.y=x},g.prototype.updateBounds=function(){if(this.getChild()==null)throw"assert failed";if(this.getChild().getNodes().length!=0){var m=this.getChild();if(m.updateBounds(!0),this.rect.x=m.getLeft(),this.rect.y=m.getTop(),this.setWidth(m.getRight()-m.getLeft()),this.setHeight(m.getBottom()-m.getTop()),h.NODE_DIMENSIONS_INCLUDE_LABELS){var x=m.getRight()-m.getLeft(),_=m.getBottom()-m.getTop();this.labelWidth>x&&(this.rect.x-=(this.labelWidth-x)/2,this.setWidth(this.labelWidth)),this.labelHeight>_&&(this.labelPos=="center"?this.rect.y-=(this.labelHeight-_)/2:this.labelPos=="top"&&(this.rect.y-=this.labelHeight-_),this.setHeight(this.labelHeight))}}},g.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==s.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},g.prototype.transform=function(m){var x=this.rect.x;x>h.WORLD_BOUNDARY?x=h.WORLD_BOUNDARY:x<-h.WORLD_BOUNDARY&&(x=-h.WORLD_BOUNDARY);var _=this.rect.y;_>h.WORLD_BOUNDARY?_=h.WORLD_BOUNDARY:_<-h.WORLD_BOUNDARY&&(_=-h.WORLD_BOUNDARY);var E=new p(x,_),w=m.inverseTransformPoint(E);this.setLocation(w.x,w.y)},g.prototype.getLeft=function(){return this.rect.x},g.prototype.getRight=function(){return this.rect.x+this.rect.width},g.prototype.getTop=function(){return this.rect.y},g.prototype.getBottom=function(){return this.rect.y+this.rect.height},g.prototype.getParent=function(){return this.owner==null?null:this.owner.getParent()},r.exports=g},function(r,i,n){"use strict";function a(s,u){s==null&&u==null?(this.x=0,this.y=0):(this.x=s,this.y=u)}a.prototype.getX=function(){return this.x},a.prototype.getY=function(){return this.y},a.prototype.setX=function(s){this.x=s},a.prototype.setY=function(s){this.y=s},a.prototype.getDifference=function(s){return new DimensionD(this.x-s.x,this.y-s.y)},a.prototype.getCopy=function(){return new a(this.x,this.y)},a.prototype.translate=function(s){return this.x+=s.width,this.y+=s.height,this},r.exports=a},function(r,i,n){"use strict";var a=n(2),s=n(10),u=n(0),h=n(6),d=n(3),p=n(1),g=n(13),y=n(12),m=n(11);function x(E,w,C){a.call(this,C),this.estimatedSize=s.MIN_VALUE,this.margin=u.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=E,w!=null&&w instanceof h?this.graphManager=w:w!=null&&w instanceof Layout&&(this.graphManager=w.graphManager)}x.prototype=Object.create(a.prototype);for(var _ in a)x[_]=a[_];x.prototype.getNodes=function(){return this.nodes},x.prototype.getEdges=function(){return this.edges},x.prototype.getGraphManager=function(){return this.graphManager},x.prototype.getParent=function(){return this.parent},x.prototype.getLeft=function(){return this.left},x.prototype.getRight=function(){return this.right},x.prototype.getTop=function(){return this.top},x.prototype.getBottom=function(){return this.bottom},x.prototype.isConnected=function(){return this.isConnected},x.prototype.add=function(E,w,C){if(w==null&&C==null){var A=E;if(this.graphManager==null)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(A)>-1)throw"Node already in graph!";return A.owner=this,this.getNodes().push(A),A}else{var M=E;if(!(this.getNodes().indexOf(w)>-1&&this.getNodes().indexOf(C)>-1))throw"Source or target not in graph!";if(!(w.owner==C.owner&&w.owner==this))throw"Both owners must be this graph!";return w.owner!=C.owner?null:(M.source=w,M.target=C,M.isInterGraph=!1,this.getEdges().push(M),w.edges.push(M),C!=w&&C.edges.push(M),M)}},x.prototype.remove=function(E){var w=E;if(E instanceof d){if(w==null)throw"Node is null!";if(!(w.owner!=null&&w.owner==this))throw"Owner graph is invalid!";if(this.graphManager==null)throw"Owner graph manager is invalid!";for(var C=w.edges.slice(),A,M=C.length,N=0;N<M;N++)A=C[N],A.isInterGraph?this.graphManager.remove(A):A.source.owner.remove(A);var B=this.nodes.indexOf(w);if(B==-1)throw"Node not in owner node list!";this.nodes.splice(B,1)}else if(E instanceof p){var A=E;if(A==null)throw"Edge is null!";if(!(A.source!=null&&A.target!=null))throw"Source and/or target is null!";if(!(A.source.owner!=null&&A.target.owner!=null&&A.source.owner==this&&A.target.owner==this))throw"Source and/or target owner is invalid!";var O=A.source.edges.indexOf(A),L=A.target.edges.indexOf(A);if(!(O>-1&&L>-1))throw"Source and/or target doesn't know this edge!";A.source.edges.splice(O,1),A.target!=A.source&&A.target.edges.splice(L,1);var B=A.source.owner.getEdges().indexOf(A);if(B==-1)throw"Not in owner's edge list!";A.source.owner.getEdges().splice(B,1)}},x.prototype.updateLeftTop=function(){for(var E=s.MAX_VALUE,w=s.MAX_VALUE,C,A,M,N=this.getNodes(),B=N.length,O=0;O<B;O++){var L=N[O];C=L.getTop(),A=L.getLeft(),E>C&&(E=C),w>A&&(w=A)}return E==s.MAX_VALUE?null:(N[0].getParent().paddingLeft!=null?M=N[0].getParent().paddingLeft:M=this.margin,this.left=w-M,this.top=E-M,new y(this.left,this.top))},x.prototype.updateBounds=function(E){for(var w=s.MAX_VALUE,C=-s.MAX_VALUE,A=s.MAX_VALUE,M=-s.MAX_VALUE,N,B,O,L,$,G=this.nodes,z=G.length,F=0;F<z;F++){var X=G[F];E&&X.child!=null&&X.updateBounds(),N=X.getLeft(),B=X.getRight(),O=X.getTop(),L=X.getBottom(),w>N&&(w=N),C<B&&(C=B),A>O&&(A=O),M<L&&(M=L)}var I=new g(w,A,C-w,M-A);w==s.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),G[0].getParent().paddingLeft!=null?$=G[0].getParent().paddingLeft:$=this.margin,this.left=I.x-$,this.right=I.x+I.width+$,this.top=I.y-$,this.bottom=I.y+I.height+$},x.calculateBounds=function(E){for(var w=s.MAX_VALUE,C=-s.MAX_VALUE,A=s.MAX_VALUE,M=-s.MAX_VALUE,N,B,O,L,$=E.length,G=0;G<$;G++){var z=E[G];N=z.getLeft(),B=z.getRight(),O=z.getTop(),L=z.getBottom(),w>N&&(w=N),C<B&&(C=B),A>O&&(A=O),M<L&&(M=L)}var F=new g(w,A,C-w,M-A);return F},x.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},x.prototype.getEstimatedSize=function(){if(this.estimatedSize==s.MIN_VALUE)throw"assert failed";return this.estimatedSize},x.prototype.calcEstimatedSize=function(){for(var E=0,w=this.nodes,C=w.length,A=0;A<C;A++){var M=w[A];E+=M.calcEstimatedSize()}return E==0?this.estimatedSize=u.EMPTY_COMPOUND_NODE_SIZE:this.estimatedSize=E/Math.sqrt(this.nodes.length),this.estimatedSize},x.prototype.updateConnected=function(){var E=this;if(this.nodes.length==0){this.isConnected=!0;return}var w=new m,C=new Set,A=this.nodes[0],M,N,B=A.withChildren();for(B.forEach(function(F){w.push(F),C.add(F)});w.length!==0;){A=w.shift(),M=A.getEdges();for(var O=M.length,L=0;L<O;L++){var $=M[L];if(N=$.getOtherEndInGraph(A,this),N!=null&&!C.has(N)){var G=N.withChildren();G.forEach(function(F){w.push(F),C.add(F)})}}}if(this.isConnected=!1,C.size>=this.nodes.length){var z=0;C.forEach(function(F){F.owner==E&&z++}),z==this.nodes.length&&(this.isConnected=!0)}},r.exports=x},function(r,i,n){"use strict";var a,s=n(1);function u(h){a=n(5),this.layout=h,this.graphs=[],this.edges=[]}u.prototype.addRoot=function(){var h=this.layout.newGraph(),d=this.layout.newNode(null),p=this.add(h,d);return this.setRootGraph(p),this.rootGraph},u.prototype.add=function(h,d,p,g,y){if(p==null&&g==null&&y==null){if(h==null)throw"Graph is null!";if(d==null)throw"Parent node is null!";if(this.graphs.indexOf(h)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(h),h.parent!=null)throw"Already has a parent!";if(d.child!=null)throw"Already has a child!";return h.parent=d,d.child=h,h}else{y=p,g=d,p=h;var m=g.getOwner(),x=y.getOwner();if(!(m!=null&&m.getGraphManager()==this))throw"Source not in this graph mgr!";if(!(x!=null&&x.getGraphManager()==this))throw"Target not in this graph mgr!";if(m==x)return p.isInterGraph=!1,m.add(p,g,y);if(p.isInterGraph=!0,p.source=g,p.target=y,this.edges.indexOf(p)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(p),!(p.source!=null&&p.target!=null))throw"Edge source and/or target is null!";if(!(p.source.edges.indexOf(p)==-1&&p.target.edges.indexOf(p)==-1))throw"Edge already in source and/or target incidency list!";return p.source.edges.push(p),p.target.edges.push(p),p}},u.prototype.remove=function(h){if(h instanceof a){var d=h;if(d.getGraphManager()!=this)throw"Graph not in this graph mgr";if(!(d==this.rootGraph||d.parent!=null&&d.parent.graphManager==this))throw"Invalid parent node!";var p=[];p=p.concat(d.getEdges());for(var g,y=p.length,m=0;m<y;m++)g=p[m],d.remove(g);var x=[];x=x.concat(d.getNodes());var _;y=x.length;for(var m=0;m<y;m++)_=x[m],d.remove(_);d==this.rootGraph&&this.setRootGraph(null);var E=this.graphs.indexOf(d);this.graphs.splice(E,1),d.parent=null}else if(h instanceof s){if(g=h,g==null)throw"Edge is null!";if(!g.isInterGraph)throw"Not an inter-graph edge!";if(!(g.source!=null&&g.target!=null))throw"Source and/or target is null!";if(!(g.source.edges.indexOf(g)!=-1&&g.target.edges.indexOf(g)!=-1))throw"Source and/or target doesn't know this edge!";var E=g.source.edges.indexOf(g);if(g.source.edges.splice(E,1),E=g.target.edges.indexOf(g),g.target.edges.splice(E,1),!(g.source.owner!=null&&g.source.owner.getGraphManager()!=null))throw"Edge owner graph or owner graph manager is null!";if(g.source.owner.getGraphManager().edges.indexOf(g)==-1)throw"Not in owner graph manager's edge list!";var E=g.source.owner.getGraphManager().edges.indexOf(g);g.source.owner.getGraphManager().edges.splice(E,1)}},u.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},u.prototype.getGraphs=function(){return this.graphs},u.prototype.getAllNodes=function(){if(this.allNodes==null){for(var h=[],d=this.getGraphs(),p=d.length,g=0;g<p;g++)h=h.concat(d[g].getNodes());this.allNodes=h}return this.allNodes},u.prototype.resetAllNodes=function(){this.allNodes=null},u.prototype.resetAllEdges=function(){this.allEdges=null},u.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},u.prototype.getAllEdges=function(){if(this.allEdges==null){for(var h=[],d=this.getGraphs(),p=d.length,g=0;g<d.length;g++)h=h.concat(d[g].getEdges());h=h.concat(this.edges),this.allEdges=h}return this.allEdges},u.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},u.prototype.setAllNodesToApplyGravitation=function(h){if(this.allNodesToApplyGravitation!=null)throw"assert failed";this.allNodesToApplyGravitation=h},u.prototype.getRoot=function(){return this.rootGraph},u.prototype.setRootGraph=function(h){if(h.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=h,h.parent==null&&(h.parent=this.layout.newNode("Root node"))},u.prototype.getLayout=function(){return this.layout},u.prototype.isOneAncestorOfOther=function(h,d){if(!(h!=null&&d!=null))throw"assert failed";if(h==d)return!0;var p=h.getOwner(),g;do{if(g=p.getParent(),g==null)break;if(g==d)return!0;if(p=g.getOwner(),p==null)break}while(!0);p=d.getOwner();do{if(g=p.getParent(),g==null)break;if(g==h)return!0;if(p=g.getOwner(),p==null)break}while(!0);return!1},u.prototype.calcLowestCommonAncestors=function(){for(var h,d,p,g,y,m=this.getAllEdges(),x=m.length,_=0;_<x;_++){if(h=m[_],d=h.source,p=h.target,h.lca=null,h.sourceInLca=d,h.targetInLca=p,d==p){h.lca=d.getOwner();continue}for(g=d.getOwner();h.lca==null;){for(h.targetInLca=p,y=p.getOwner();h.lca==null;){if(y==g){h.lca=y;break}if(y==this.rootGraph)break;if(h.lca!=null)throw"assert failed";h.targetInLca=y.getParent(),y=h.targetInLca.getOwner()}if(g==this.rootGraph)break;h.lca==null&&(h.sourceInLca=g.getParent(),g=h.sourceInLca.getOwner())}if(h.lca==null)throw"assert failed"}},u.prototype.calcLowestCommonAncestor=function(h,d){if(h==d)return h.getOwner();var p=h.getOwner();do{if(p==null)break;var g=d.getOwner();do{if(g==null)break;if(g==p)return g;g=g.getParent().getOwner()}while(!0);p=p.getParent().getOwner()}while(!0);return p},u.prototype.calcInclusionTreeDepths=function(h,d){h==null&&d==null&&(h=this.rootGraph,d=1);for(var p,g=h.getNodes(),y=g.length,m=0;m<y;m++)p=g[m],p.inclusionTreeDepth=d,p.child!=null&&this.calcInclusionTreeDepths(p.child,d+1)},u.prototype.includesInvalidEdge=function(){for(var h,d=this.edges.length,p=0;p<d;p++)if(h=this.edges[p],this.isOneAncestorOfOther(h.source,h.target))return!0;return!1},r.exports=u},function(r,i,n){"use strict";var a=n(0);function s(){}for(var u in a)s[u]=a[u];s.MAX_ITERATIONS=2500,s.DEFAULT_EDGE_LENGTH=50,s.DEFAULT_SPRING_STRENGTH=.45,s.DEFAULT_REPULSION_STRENGTH=4500,s.DEFAULT_GRAVITY_STRENGTH=.4,s.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,s.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,s.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,s.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,s.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,s.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,s.COOLING_ADAPTATION_FACTOR=.33,s.ADAPTATION_LOWER_NODE_LIMIT=1e3,s.ADAPTATION_UPPER_NODE_LIMIT=5e3,s.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,s.MAX_NODE_DISPLACEMENT=s.MAX_NODE_DISPLACEMENT_INCREMENTAL*3,s.MIN_REPULSION_DIST=s.DEFAULT_EDGE_LENGTH/10,s.CONVERGENCE_CHECK_PERIOD=100,s.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,s.MIN_EDGE_LENGTH=1,s.GRID_CALCULATION_CHECK_PERIOD=10,r.exports=s},function(r,i,n){"use strict";var a=n(12);function s(){}s.calcSeparationAmount=function(u,h,d,p){if(!u.intersects(h))throw"assert failed";var g=new Array(2);this.decideDirectionsForOverlappingNodes(u,h,g),d[0]=Math.min(u.getRight(),h.getRight())-Math.max(u.x,h.x),d[1]=Math.min(u.getBottom(),h.getBottom())-Math.max(u.y,h.y),u.getX()<=h.getX()&&u.getRight()>=h.getRight()?d[0]+=Math.min(h.getX()-u.getX(),u.getRight()-h.getRight()):h.getX()<=u.getX()&&h.getRight()>=u.getRight()&&(d[0]+=Math.min(u.getX()-h.getX(),h.getRight()-u.getRight())),u.getY()<=h.getY()&&u.getBottom()>=h.getBottom()?d[1]+=Math.min(h.getY()-u.getY(),u.getBottom()-h.getBottom()):h.getY()<=u.getY()&&h.getBottom()>=u.getBottom()&&(d[1]+=Math.min(u.getY()-h.getY(),h.getBottom()-u.getBottom()));var y=Math.abs((h.getCenterY()-u.getCenterY())/(h.getCenterX()-u.getCenterX()));h.getCenterY()===u.getCenterY()&&h.getCenterX()===u.getCenterX()&&(y=1);var m=y*d[0],x=d[1]/y;d[0]<x?x=d[0]:m=d[1],d[0]=-1*g[0]*(x/2+p),d[1]=-1*g[1]*(m/2+p)},s.decideDirectionsForOverlappingNodes=function(u,h,d){u.getCenterX()<h.getCenterX()?d[0]=-1:d[0]=1,u.getCenterY()<h.getCenterY()?d[1]=-1:d[1]=1},s.getIntersection2=function(u,h,d){var p=u.getCenterX(),g=u.getCenterY(),y=h.getCenterX(),m=h.getCenterY();if(u.intersects(h))return d[0]=p,d[1]=g,d[2]=y,d[3]=m,!0;var x=u.getX(),_=u.getY(),E=u.getRight(),w=u.getX(),C=u.getBottom(),A=u.getRight(),M=u.getWidthHalf(),N=u.getHeightHalf(),B=h.getX(),O=h.getY(),L=h.getRight(),$=h.getX(),G=h.getBottom(),z=h.getRight(),F=h.getWidthHalf(),X=h.getHeightHalf(),I=!1,j=!1;if(p===y){if(g>m)return d[0]=p,d[1]=_,d[2]=y,d[3]=G,!1;if(g<m)return d[0]=p,d[1]=C,d[2]=y,d[3]=O,!1}else if(g===m){if(p>y)return d[0]=x,d[1]=g,d[2]=L,d[3]=m,!1;if(p<y)return d[0]=E,d[1]=g,d[2]=B,d[3]=m,!1}else{var H=u.height/u.width,V=h.height/h.width,P=(m-g)/(y-p),q=void 0,Z=void 0,J=void 0,ae=void 0,ue=void 0,be=void 0;if(-H===P?p>y?(d[0]=w,d[1]=C,I=!0):(d[0]=E,d[1]=_,I=!0):H===P&&(p>y?(d[0]=x,d[1]=_,I=!0):(d[0]=A,d[1]=C,I=!0)),-V===P?y>p?(d[2]=$,d[3]=G,j=!0):(d[2]=L,d[3]=O,j=!0):V===P&&(y>p?(d[2]=B,d[3]=O,j=!0):(d[2]=z,d[3]=G,j=!0)),I&&j)return!1;if(p>y?g>m?(q=this.getCardinalDirection(H,P,4),Z=this.getCardinalDirection(V,P,2)):(q=this.getCardinalDirection(-H,P,3),Z=this.getCardinalDirection(-V,P,1)):g>m?(q=this.getCardinalDirection(-H,P,1),Z=this.getCardinalDirection(-V,P,3)):(q=this.getCardinalDirection(H,P,2),Z=this.getCardinalDirection(V,P,4)),!I)switch(q){case 1:ae=_,J=p+-N/P,d[0]=J,d[1]=ae;break;case 2:J=A,ae=g+M*P,d[0]=J,d[1]=ae;break;case 3:ae=C,J=p+N/P,d[0]=J,d[1]=ae;break;case 4:J=w,ae=g+-M*P,d[0]=J,d[1]=ae;break}if(!j)switch(Z){case 1:be=O,ue=y+-X/P,d[2]=ue,d[3]=be;break;case 2:ue=z,be=m+F*P,d[2]=ue,d[3]=be;break;case 3:be=G,ue=y+X/P,d[2]=ue,d[3]=be;break;case 4:ue=$,be=m+-F*P,d[2]=ue,d[3]=be;break}}return!1},s.getCardinalDirection=function(u,h,d){return u>h?d:1+d%4},s.getIntersection=function(u,h,d,p){if(p==null)return this.getIntersection2(u,h,d);var g=u.x,y=u.y,m=h.x,x=h.y,_=d.x,E=d.y,w=p.x,C=p.y,A=void 0,M=void 0,N=void 0,B=void 0,O=void 0,L=void 0,$=void 0,G=void 0,z=void 0;return N=x-y,O=g-m,$=m*y-g*x,B=C-E,L=_-w,G=w*E-_*C,z=N*L-B*O,z===0?null:(A=(O*G-L*$)/z,M=(B*$-N*G)/z,new a(A,M))},s.angleOfVector=function(u,h,d,p){var g=void 0;return u!==d?(g=Math.atan((p-h)/(d-u)),d<u?g+=Math.PI:p<h&&(g+=this.TWO_PI)):p<h?g=this.ONE_AND_HALF_PI:g=this.HALF_PI,g},s.doIntersect=function(u,h,d,p){var g=u.x,y=u.y,m=h.x,x=h.y,_=d.x,E=d.y,w=p.x,C=p.y,A=(m-g)*(C-E)-(w-_)*(x-y);if(A===0)return!1;var M=((C-E)*(w-g)+(_-w)*(C-y))/A,N=((y-x)*(w-g)+(m-g)*(C-y))/A;return 0<M&&M<1&&0<N&&N<1},s.HALF_PI=.5*Math.PI,s.ONE_AND_HALF_PI=1.5*Math.PI,s.TWO_PI=2*Math.PI,s.THREE_PI=3*Math.PI,r.exports=s},function(r,i,n){"use strict";function a(){}a.sign=function(s){return s>0?1:s<0?-1:0},a.floor=function(s){return s<0?Math.ceil(s):Math.floor(s)},a.ceil=function(s){return s<0?Math.floor(s):Math.ceil(s)},r.exports=a},function(r,i,n){"use strict";function a(){}a.MAX_VALUE=2147483647,a.MIN_VALUE=-2147483648,r.exports=a},function(r,i,n){"use strict";var a=function(){function g(y,m){for(var x=0;x<m.length;x++){var _=m[x];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(y,_.key,_)}}return function(y,m,x){return m&&g(y.prototype,m),x&&g(y,x),y}}();function s(g,y){if(!(g instanceof y))throw new TypeError("Cannot call a class as a function")}var u=function(g){return{value:g,next:null,prev:null}},h=function(g,y,m,x){return g!==null?g.next=y:x.head=y,m!==null?m.prev=y:x.tail=y,y.prev=g,y.next=m,x.length++,y},d=function(g,y){var m=g.prev,x=g.next;return m!==null?m.next=x:y.head=x,x!==null?x.prev=m:y.tail=m,g.prev=g.next=null,y.length--,g},p=function(){function g(y){var m=this;s(this,g),this.length=0,this.head=null,this.tail=null,y?.forEach(function(x){return m.push(x)})}return a(g,[{key:"size",value:function(){return this.length}},{key:"insertBefore",value:function(y,m){return h(m.prev,u(y),m,this)}},{key:"insertAfter",value:function(y,m){return h(m,u(y),m.next,this)}},{key:"insertNodeBefore",value:function(y,m){return h(m.prev,y,m,this)}},{key:"insertNodeAfter",value:function(y,m){return h(m,y,m.next,this)}},{key:"push",value:function(y){return h(this.tail,u(y),null,this)}},{key:"unshift",value:function(y){return h(null,u(y),this.head,this)}},{key:"remove",value:function(y){return d(y,this)}},{key:"pop",value:function(){return d(this.tail,this).value}},{key:"popNode",value:function(){return d(this.tail,this)}},{key:"shift",value:function(){return d(this.head,this).value}},{key:"shiftNode",value:function(){return d(this.head,this)}},{key:"get_object_at",value:function(y){if(y<=this.length()){for(var m=1,x=this.head;m<y;)x=x.next,m++;return x.value}}},{key:"set_object_at",value:function(y,m){if(y<=this.length()){for(var x=1,_=this.head;x<y;)_=_.next,x++;_.value=m}}}]),g}();r.exports=p},function(r,i,n){"use strict";function a(s,u,h){this.x=null,this.y=null,s==null&&u==null&&h==null?(this.x=0,this.y=0):typeof s=="number"&&typeof u=="number"&&h==null?(this.x=s,this.y=u):s.constructor.name=="Point"&&u==null&&h==null&&(h=s,this.x=h.x,this.y=h.y)}a.prototype.getX=function(){return this.x},a.prototype.getY=function(){return this.y},a.prototype.getLocation=function(){return new a(this.x,this.y)},a.prototype.setLocation=function(s,u,h){s.constructor.name=="Point"&&u==null&&h==null?(h=s,this.setLocation(h.x,h.y)):typeof s=="number"&&typeof u=="number"&&h==null&&(parseInt(s)==s&&parseInt(u)==u?this.move(s,u):(this.x=Math.floor(s+.5),this.y=Math.floor(u+.5)))},a.prototype.move=function(s,u){this.x=s,this.y=u},a.prototype.translate=function(s,u){this.x+=s,this.y+=u},a.prototype.equals=function(s){if(s.constructor.name=="Point"){var u=s;return this.x==u.x&&this.y==u.y}return this==s},a.prototype.toString=function(){return new a().constructor.name+"[x="+this.x+",y="+this.y+"]"},r.exports=a},function(r,i,n){"use strict";function a(s,u,h,d){this.x=0,this.y=0,this.width=0,this.height=0,s!=null&&u!=null&&h!=null&&d!=null&&(this.x=s,this.y=u,this.width=h,this.height=d)}a.prototype.getX=function(){return this.x},a.prototype.setX=function(s){this.x=s},a.prototype.getY=function(){return this.y},a.prototype.setY=function(s){this.y=s},a.prototype.getWidth=function(){return this.width},a.prototype.setWidth=function(s){this.width=s},a.prototype.getHeight=function(){return this.height},a.prototype.setHeight=function(s){this.height=s},a.prototype.getRight=function(){return this.x+this.width},a.prototype.getBottom=function(){return this.y+this.height},a.prototype.intersects=function(s){return!(this.getRight()<s.x||this.getBottom()<s.y||s.getRight()<this.x||s.getBottom()<this.y)},a.prototype.getCenterX=function(){return this.x+this.width/2},a.prototype.getMinX=function(){return this.getX()},a.prototype.getMaxX=function(){return this.getX()+this.width},a.prototype.getCenterY=function(){return this.y+this.height/2},a.prototype.getMinY=function(){return this.getY()},a.prototype.getMaxY=function(){return this.getY()+this.height},a.prototype.getWidthHalf=function(){return this.width/2},a.prototype.getHeightHalf=function(){return this.height/2},r.exports=a},function(r,i,n){"use strict";var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u};function s(){}s.lastID=0,s.createID=function(u){return s.isPrimitive(u)?u:(u.uniqueID!=null||(u.uniqueID=s.getString(),s.lastID++),u.uniqueID)},s.getString=function(u){return u==null&&(u=s.lastID),"Object#"+u},s.isPrimitive=function(u){var h=typeof u>"u"?"undefined":a(u);return u==null||h!="object"&&h!="function"},r.exports=s},function(r,i,n){"use strict";function a(_){if(Array.isArray(_)){for(var E=0,w=Array(_.length);E<_.length;E++)w[E]=_[E];return w}else return Array.from(_)}var s=n(0),u=n(6),h=n(3),d=n(1),p=n(5),g=n(4),y=n(17),m=n(27);function x(_){m.call(this),this.layoutQuality=s.QUALITY,this.createBendsAsNeeded=s.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=s.DEFAULT_INCREMENTAL,this.animationOnLayout=s.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=s.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=s.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=s.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new u(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,_!=null&&(this.isRemoteUse=_)}x.RANDOM_SEED=1,x.prototype=Object.create(m.prototype),x.prototype.getGraphManager=function(){return this.graphManager},x.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},x.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},x.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},x.prototype.newGraphManager=function(){var _=new u(this);return this.graphManager=_,_},x.prototype.newGraph=function(_){return new p(null,this.graphManager,_)},x.prototype.newNode=function(_){return new h(this.graphManager,_)},x.prototype.newEdge=function(_){return new d(null,null,_)},x.prototype.checkLayoutSuccess=function(){return this.graphManager.getRoot()==null||this.graphManager.getRoot().getNodes().length==0||this.graphManager.includesInvalidEdge()},x.prototype.runLayout=function(){this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters();var _;return this.checkLayoutSuccess()?_=!1:_=this.layout(),s.ANIMATE==="during"?!1:(_&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,_)},x.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},x.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var _,E=this.graphManager.getAllEdges(),w=0;w<E.length;w++)_=E[w];for(var C,A=this.graphManager.getRoot().getNodes(),w=0;w<A.length;w++)C=A[w];this.update(this.graphManager.getRoot())}},x.prototype.update=function(_){if(_==null)this.update2();else if(_ instanceof h){var E=_;if(E.getChild()!=null)for(var w=E.getChild().getNodes(),C=0;C<w.length;C++)update(w[C]);if(E.vGraphObject!=null){var A=E.vGraphObject;A.update(E)}}else if(_ instanceof d){var M=_;if(M.vGraphObject!=null){var N=M.vGraphObject;N.update(M)}}else if(_ instanceof p){var B=_;if(B.vGraphObject!=null){var O=B.vGraphObject;O.update(B)}}},x.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=s.QUALITY,this.animationDuringLayout=s.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=s.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=s.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=s.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=s.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=s.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},x.prototype.transform=function(_){if(_==null)this.transform(new g(0,0));else{var E=new y,w=this.graphManager.getRoot().updateLeftTop();if(w!=null){E.setWorldOrgX(_.x),E.setWorldOrgY(_.y),E.setDeviceOrgX(w.x),E.setDeviceOrgY(w.y);for(var C=this.getAllNodes(),A,M=0;M<C.length;M++)A=C[M],A.transform(E)}}},x.prototype.positionNodesRandomly=function(_){if(_==null)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var E,w,C=_.getNodes(),A=0;A<C.length;A++)E=C[A],w=E.getChild(),w==null||w.getNodes().length==0?E.scatter():(this.positionNodesRandomly(w),E.updateBounds())},x.prototype.getFlatForest=function(){for(var _=[],E=!0,w=this.graphManager.getRoot().getNodes(),C=!0,A=0;A<w.length;A++)w[A].getChild()!=null&&(C=!1);if(!C)return _;var M=new Set,N=[],B=new Map,O=[];for(O=O.concat(w);O.length>0&&E;){for(N.push(O[0]);N.length>0&&E;){var L=N[0];N.splice(0,1),M.add(L);for(var $=L.getEdges(),A=0;A<$.length;A++){var G=$[A].getOtherEnd(L);if(B.get(L)!=G)if(!M.has(G))N.push(G),B.set(G,L);else{E=!1;break}}}if(!E)_=[];else{var z=[].concat(a(M));_.push(z);for(var A=0;A<z.length;A++){var F=z[A],X=O.indexOf(F);X>-1&&O.splice(X,1)}M=new Set,B=new Map}}return _},x.prototype.createDummyNodesForBendpoints=function(_){for(var E=[],w=_.source,C=this.graphManager.calcLowestCommonAncestor(_.source,_.target),A=0;A<_.bendpoints.length;A++){var M=this.newNode(null);M.setRect(new Point(0,0),new Dimension(1,1)),C.add(M);var N=this.newEdge(null);this.graphManager.add(N,w,M),E.add(M),w=M}var N=this.newEdge(null);return this.graphManager.add(N,w,_.target),this.edgeToDummyNodes.set(_,E),_.isInterGraph()?this.graphManager.remove(_):C.remove(_),E},x.prototype.createBendpointsFromDummyNodes=function(){var _=[];_=_.concat(this.graphManager.getAllEdges()),_=[].concat(a(this.edgeToDummyNodes.keys())).concat(_);for(var E=0;E<_.length;E++){var w=_[E];if(w.bendpoints.length>0){for(var C=this.edgeToDummyNodes.get(w),A=0;A<C.length;A++){var M=C[A],N=new g(M.getCenterX(),M.getCenterY()),B=w.bendpoints.get(A);B.x=N.x,B.y=N.y,M.getOwner().remove(M)}this.graphManager.add(w,w.source,w.target)}}},x.transform=function(_,E,w,C){if(w!=null&&C!=null){var A=E;if(_<=50){var M=E/w;A-=(E-M)/50*(50-_)}else{var N=E*C;A+=(N-E)/50*(_-50)}return A}else{var B,O;return _<=50?(B=9*E/500,O=E/10):(B=9*E/50,O=-8*E),B*_+O}},x.findCenterOfTree=function(_){var E=[];E=E.concat(_);var w=[],C=new Map,A=!1,M=null;(E.length==1||E.length==2)&&(A=!0,M=E[0]);for(var N=0;N<E.length;N++){var B=E[N],O=B.getNeighborsList().size;C.set(B,B.getNeighborsList().size),O==1&&w.push(B)}var L=[];for(L=L.concat(w);!A;){var $=[];$=$.concat(L),L=[];for(var N=0;N<E.length;N++){var B=E[N],G=E.indexOf(B);G>=0&&E.splice(G,1);var z=B.getNeighborsList();z.forEach(function(I){if(w.indexOf(I)<0){var j=C.get(I),H=j-1;H==1&&L.push(I),C.set(I,H)}})}w=w.concat(L),(E.length==1||E.length==2)&&(A=!0,M=E[0])}return M},x.prototype.setGraphManager=function(_){this.graphManager=_},r.exports=x},function(r,i,n){"use strict";function a(){}a.seed=1,a.x=0,a.nextDouble=function(){return a.x=Math.sin(a.seed++)*1e4,a.x-Math.floor(a.x)},r.exports=a},function(r,i,n){"use strict";var a=n(4);function s(u,h){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}s.prototype.getWorldOrgX=function(){return this.lworldOrgX},s.prototype.setWorldOrgX=function(u){this.lworldOrgX=u},s.prototype.getWorldOrgY=function(){return this.lworldOrgY},s.prototype.setWorldOrgY=function(u){this.lworldOrgY=u},s.prototype.getWorldExtX=function(){return this.lworldExtX},s.prototype.setWorldExtX=function(u){this.lworldExtX=u},s.prototype.getWorldExtY=function(){return this.lworldExtY},s.prototype.setWorldExtY=function(u){this.lworldExtY=u},s.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},s.prototype.setDeviceOrgX=function(u){this.ldeviceOrgX=u},s.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},s.prototype.setDeviceOrgY=function(u){this.ldeviceOrgY=u},s.prototype.getDeviceExtX=function(){return this.ldeviceExtX},s.prototype.setDeviceExtX=function(u){this.ldeviceExtX=u},s.prototype.getDeviceExtY=function(){return this.ldeviceExtY},s.prototype.setDeviceExtY=function(u){this.ldeviceExtY=u},s.prototype.transformX=function(u){var h=0,d=this.lworldExtX;return d!=0&&(h=this.ldeviceOrgX+(u-this.lworldOrgX)*this.ldeviceExtX/d),h},s.prototype.transformY=function(u){var h=0,d=this.lworldExtY;return d!=0&&(h=this.ldeviceOrgY+(u-this.lworldOrgY)*this.ldeviceExtY/d),h},s.prototype.inverseTransformX=function(u){var h=0,d=this.ldeviceExtX;return d!=0&&(h=this.lworldOrgX+(u-this.ldeviceOrgX)*this.lworldExtX/d),h},s.prototype.inverseTransformY=function(u){var h=0,d=this.ldeviceExtY;return d!=0&&(h=this.lworldOrgY+(u-this.ldeviceOrgY)*this.lworldExtY/d),h},s.prototype.inverseTransformPoint=function(u){var h=new a(this.inverseTransformX(u.x),this.inverseTransformY(u.y));return h},r.exports=s},function(r,i,n){"use strict";function a(m){if(Array.isArray(m)){for(var x=0,_=Array(m.length);x<m.length;x++)_[x]=m[x];return _}else return Array.from(m)}var s=n(15),u=n(7),h=n(0),d=n(8),p=n(9);function g(){s.call(this),this.useSmartIdealEdgeLengthCalculation=u.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.idealEdgeLength=u.DEFAULT_EDGE_LENGTH,this.springConstant=u.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=u.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=u.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=u.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=u.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=u.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*u.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=u.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=u.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=u.MAX_ITERATIONS}g.prototype=Object.create(s.prototype);for(var y in s)g[y]=s[y];g.prototype.initParameters=function(){s.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=u.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},g.prototype.calcIdealEdgeLengths=function(){for(var m,x,_,E,w,C,A=this.getGraphManager().getAllEdges(),M=0;M<A.length;M++)m=A[M],m.idealLength=this.idealEdgeLength,m.isInterGraph&&(_=m.getSource(),E=m.getTarget(),w=m.getSourceInLca().getEstimatedSize(),C=m.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(m.idealLength+=w+C-2*h.SIMPLE_NODE_SIZE),x=m.getLca().getInclusionTreeDepth(),m.idealLength+=u.DEFAULT_EDGE_LENGTH*u.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(_.getInclusionTreeDepth()+E.getInclusionTreeDepth()-2*x))},g.prototype.initSpringEmbedder=function(){var m=this.getAllNodes().length;this.incremental?(m>u.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*u.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(m-u.ADAPTATION_LOWER_NODE_LIMIT)/(u.ADAPTATION_UPPER_NODE_LIMIT-u.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-u.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=u.MAX_NODE_DISPLACEMENT_INCREMENTAL):(m>u.ADAPTATION_LOWER_NODE_LIMIT?this.coolingFactor=Math.max(u.COOLING_ADAPTATION_FACTOR,1-(m-u.ADAPTATION_LOWER_NODE_LIMIT)/(u.ADAPTATION_UPPER_NODE_LIMIT-u.ADAPTATION_LOWER_NODE_LIMIT)*(1-u.COOLING_ADAPTATION_FACTOR)):this.coolingFactor=1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=u.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(this.getAllNodes().length*5,this.maxIterations),this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},g.prototype.calcSpringForces=function(){for(var m=this.getAllEdges(),x,_=0;_<m.length;_++)x=m[_],this.calcSpringForce(x,x.idealLength)},g.prototype.calcRepulsionForces=function(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,_,E,w,C,A=this.getAllNodes(),M;if(this.useFRGridVariant)for(this.totalIterations%u.GRID_CALCULATION_CHECK_PERIOD==1&&m&&this.updateGrid(),M=new Set,_=0;_<A.length;_++)w=A[_],this.calculateRepulsionForceOfANode(w,M,m,x),M.add(w);else for(_=0;_<A.length;_++)for(w=A[_],E=_+1;E<A.length;E++)C=A[E],w.getOwner()==C.getOwner()&&this.calcRepulsionForce(w,C)},g.prototype.calcGravitationalForces=function(){for(var m,x=this.getAllNodesToApplyGravitation(),_=0;_<x.length;_++)m=x[_],this.calcGravitationalForce(m)},g.prototype.moveNodes=function(){for(var m=this.getAllNodes(),x,_=0;_<m.length;_++)x=m[_],x.move()},g.prototype.calcSpringForce=function(m,x){var _=m.getSource(),E=m.getTarget(),w,C,A,M;if(this.uniformLeafNodeSizes&&_.getChild()==null&&E.getChild()==null)m.updateLengthSimple();else if(m.updateLength(),m.isOverlapingSourceAndTarget)return;w=m.getLength(),w!=0&&(C=this.springConstant*(w-x),A=C*(m.lengthX/w),M=C*(m.lengthY/w),_.springForceX+=A,_.springForceY+=M,E.springForceX-=A,E.springForceY-=M)},g.prototype.calcRepulsionForce=function(m,x){var _=m.getRect(),E=x.getRect(),w=new Array(2),C=new Array(4),A,M,N,B,O,L,$;if(_.intersects(E)){d.calcSeparationAmount(_,E,w,u.DEFAULT_EDGE_LENGTH/2),L=2*w[0],$=2*w[1];var G=m.noOfChildren*x.noOfChildren/(m.noOfChildren+x.noOfChildren);m.repulsionForceX-=G*L,m.repulsionForceY-=G*$,x.repulsionForceX+=G*L,x.repulsionForceY+=G*$}else this.uniformLeafNodeSizes&&m.getChild()==null&&x.getChild()==null?(A=E.getCenterX()-_.getCenterX(),M=E.getCenterY()-_.getCenterY()):(d.getIntersection(_,E,C),A=C[2]-C[0],M=C[3]-C[1]),Math.abs(A)<u.MIN_REPULSION_DIST&&(A=p.sign(A)*u.MIN_REPULSION_DIST),Math.abs(M)<u.MIN_REPULSION_DIST&&(M=p.sign(M)*u.MIN_REPULSION_DIST),N=A*A+M*M,B=Math.sqrt(N),O=this.repulsionConstant*m.noOfChildren*x.noOfChildren/N,L=O*A/B,$=O*M/B,m.repulsionForceX-=L,m.repulsionForceY-=$,x.repulsionForceX+=L,x.repulsionForceY+=$},g.prototype.calcGravitationalForce=function(m){var x,_,E,w,C,A,M,N;x=m.getOwner(),_=(x.getRight()+x.getLeft())/2,E=(x.getTop()+x.getBottom())/2,w=m.getCenterX()-_,C=m.getCenterY()-E,A=Math.abs(w)+m.getWidth()/2,M=Math.abs(C)+m.getHeight()/2,m.getOwner()==this.graphManager.getRoot()?(N=x.getEstimatedSize()*this.gravityRangeFactor,(A>N||M>N)&&(m.gravitationForceX=-this.gravityConstant*w,m.gravitationForceY=-this.gravityConstant*C)):(N=x.getEstimatedSize()*this.compoundGravityRangeFactor,(A>N||M>N)&&(m.gravitationForceX=-this.gravityConstant*w*this.compoundGravityConstant,m.gravitationForceY=-this.gravityConstant*C*this.compoundGravityConstant))},g.prototype.isConverged=function(){var m,x=!1;return this.totalIterations>this.maxIterations/3&&(x=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),m=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,m||x},g.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},g.prototype.calcNoOfChildrenForAllNodes=function(){for(var m,x=this.graphManager.getAllNodes(),_=0;_<x.length;_++)m=x[_],m.noOfChildren=m.getNoOfChildren()},g.prototype.calcGrid=function(m){var x=0,_=0;x=parseInt(Math.ceil((m.getRight()-m.getLeft())/this.repulsionRange)),_=parseInt(Math.ceil((m.getBottom()-m.getTop())/this.repulsionRange));for(var E=new Array(x),w=0;w<x;w++)E[w]=new Array(_);for(var w=0;w<x;w++)for(var C=0;C<_;C++)E[w][C]=new Array;return E},g.prototype.addNodeToGrid=function(m,x,_){var E=0,w=0,C=0,A=0;E=parseInt(Math.floor((m.getRect().x-x)/this.repulsionRange)),w=parseInt(Math.floor((m.getRect().width+m.getRect().x-x)/this.repulsionRange)),C=parseInt(Math.floor((m.getRect().y-_)/this.repulsionRange)),A=parseInt(Math.floor((m.getRect().height+m.getRect().y-_)/this.repulsionRange));for(var M=E;M<=w;M++)for(var N=C;N<=A;N++)this.grid[M][N].push(m),m.setGridCoordinates(E,w,C,A)},g.prototype.updateGrid=function(){var m,x,_=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),m=0;m<_.length;m++)x=_[m],this.addNodeToGrid(x,this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},g.prototype.calculateRepulsionForceOfANode=function(m,x,_,E){if(this.totalIterations%u.GRID_CALCULATION_CHECK_PERIOD==1&&_||E){var w=new Set;m.surrounding=new Array;for(var C,A=this.grid,M=m.startX-1;M<m.finishX+2;M++)for(var N=m.startY-1;N<m.finishY+2;N++)if(!(M<0||N<0||M>=A.length||N>=A[0].length)){for(var B=0;B<A[M][N].length;B++)if(C=A[M][N][B],!(m.getOwner()!=C.getOwner()||m==C)&&!x.has(C)&&!w.has(C)){var O=Math.abs(m.getCenterX()-C.getCenterX())-(m.getWidth()/2+C.getWidth()/2),L=Math.abs(m.getCenterY()-C.getCenterY())-(m.getHeight()/2+C.getHeight()/2);O<=this.repulsionRange&&L<=this.repulsionRange&&w.add(C)}}m.surrounding=[].concat(a(w))}for(M=0;M<m.surrounding.length;M++)this.calcRepulsionForce(m,m.surrounding[M])},g.prototype.calcRepulsionRange=function(){return 0},r.exports=g},function(r,i,n){"use strict";var a=n(1),s=n(7);function u(d,p,g){a.call(this,d,p,g),this.idealLength=s.DEFAULT_EDGE_LENGTH}u.prototype=Object.create(a.prototype);for(var h in a)u[h]=a[h];r.exports=u},function(r,i,n){"use strict";var a=n(3);function s(h,d,p,g){a.call(this,h,d,p,g),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}s.prototype=Object.create(a.prototype);for(var u in a)s[u]=a[u];s.prototype.setGridCoordinates=function(h,d,p,g){this.startX=h,this.finishX=d,this.startY=p,this.finishY=g},r.exports=s},function(r,i,n){"use strict";function a(s,u){this.width=0,this.height=0,s!==null&&u!==null&&(this.height=u,this.width=s)}a.prototype.getWidth=function(){return this.width},a.prototype.setWidth=function(s){this.width=s},a.prototype.getHeight=function(){return this.height},a.prototype.setHeight=function(s){this.height=s},r.exports=a},function(r,i,n){"use strict";var a=n(14);function s(){this.map={},this.keys=[]}s.prototype.put=function(u,h){var d=a.createID(u);this.contains(d)||(this.map[d]=h,this.keys.push(u))},s.prototype.contains=function(u){var h=a.createID(u);return this.map[u]!=null},s.prototype.get=function(u){var h=a.createID(u);return this.map[h]},s.prototype.keySet=function(){return this.keys},r.exports=s},function(r,i,n){"use strict";var a=n(14);function s(){this.set={}}s.prototype.add=function(u){var h=a.createID(u);this.contains(h)||(this.set[h]=u)},s.prototype.remove=function(u){delete this.set[a.createID(u)]},s.prototype.clear=function(){this.set={}},s.prototype.contains=function(u){return this.set[a.createID(u)]==u},s.prototype.isEmpty=function(){return this.size()===0},s.prototype.size=function(){return Object.keys(this.set).length},s.prototype.addAllTo=function(u){for(var h=Object.keys(this.set),d=h.length,p=0;p<d;p++)u.push(this.set[h[p]])},s.prototype.size=function(){return Object.keys(this.set).length},s.prototype.addAll=function(u){for(var h=u.length,d=0;d<h;d++){var p=u[d];this.add(p)}},r.exports=s},function(r,i,n){"use strict";var a=function(){function d(p,g){for(var y=0;y<g.length;y++){var m=g[y];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(p,m.key,m)}}return function(p,g,y){return g&&d(p.prototype,g),y&&d(p,y),p}}();function s(d,p){if(!(d instanceof p))throw new TypeError("Cannot call a class as a function")}var u=n(11),h=function(){function d(p,g){s(this,d),(g!==null||g!==void 0)&&(this.compareFunction=this._defaultCompareFunction);var y=void 0;p instanceof u?y=p.size():y=p.length,this._quicksort(p,0,y-1)}return a(d,[{key:"_quicksort",value:function(p,g,y){if(g<y){var m=this._partition(p,g,y);this._quicksort(p,g,m),this._quicksort(p,m+1,y)}}},{key:"_partition",value:function(p,g,y){for(var m=this._get(p,g),x=g,_=y;;){for(;this.compareFunction(m,this._get(p,_));)_--;for(;this.compareFunction(this._get(p,x),m);)x++;if(x<_)this._swap(p,x,_),x++,_--;else return _}}},{key:"_get",value:function(p,g){return p instanceof u?p.get_object_at(g):p[g]}},{key:"_set",value:function(p,g,y){p instanceof u?p.set_object_at(g,y):p[g]=y}},{key:"_swap",value:function(p,g,y){var m=this._get(p,g);this._set(p,g,this._get(p,y)),this._set(p,y,m)}},{key:"_defaultCompareFunction",value:function(p,g){return g>p}}]),d}();r.exports=h},function(r,i,n){"use strict";var a=function(){function h(d,p){for(var g=0;g<p.length;g++){var y=p[g];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(d,y.key,y)}}return function(d,p,g){return p&&h(d.prototype,p),g&&h(d,g),d}}();function s(h,d){if(!(h instanceof d))throw new TypeError("Cannot call a class as a function")}var u=function(){function h(d,p){var g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:-1,m=arguments.length>4&&arguments[4]!==void 0?arguments[4]:-1;s(this,h),this.sequence1=d,this.sequence2=p,this.match_score=g,this.mismatch_penalty=y,this.gap_penalty=m,this.iMax=d.length+1,this.jMax=p.length+1,this.grid=new Array(this.iMax);for(var x=0;x<this.iMax;x++){this.grid[x]=new Array(this.jMax);for(var _=0;_<this.jMax;_++)this.grid[x][_]=0}this.tracebackGrid=new Array(this.iMax);for(var E=0;E<this.iMax;E++){this.tracebackGrid[E]=new Array(this.jMax);for(var w=0;w<this.jMax;w++)this.tracebackGrid[E][w]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return a(h,[{key:"getScore",value:function(){return this.score}},{key:"getAlignments",value:function(){return this.alignments}},{key:"computeGrids",value:function(){for(var d=1;d<this.jMax;d++)this.grid[0][d]=this.grid[0][d-1]+this.gap_penalty,this.tracebackGrid[0][d]=[!1,!1,!0];for(var p=1;p<this.iMax;p++)this.grid[p][0]=this.grid[p-1][0]+this.gap_penalty,this.tracebackGrid[p][0]=[!1,!0,!1];for(var g=1;g<this.iMax;g++)for(var y=1;y<this.jMax;y++){var m=void 0;this.sequence1[g-1]===this.sequence2[y-1]?m=this.grid[g-1][y-1]+this.match_score:m=this.grid[g-1][y-1]+this.mismatch_penalty;var x=this.grid[g-1][y]+this.gap_penalty,_=this.grid[g][y-1]+this.gap_penalty,E=[m,x,_],w=this.arrayAllMaxIndexes(E);this.grid[g][y]=E[w[0]],this.tracebackGrid[g][y]=[w.includes(0),w.includes(1),w.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}},{key:"alignmentTraceback",value:function(){var d=[];for(d.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});d[0];){var p=d[0],g=this.tracebackGrid[p.pos[0]][p.pos[1]];g[0]&&d.push({pos:[p.pos[0]-1,p.pos[1]-1],seq1:this.sequence1[p.pos[0]-1]+p.seq1,seq2:this.sequence2[p.pos[1]-1]+p.seq2}),g[1]&&d.push({pos:[p.pos[0]-1,p.pos[1]],seq1:this.sequence1[p.pos[0]-1]+p.seq1,seq2:"-"+p.seq2}),g[2]&&d.push({pos:[p.pos[0],p.pos[1]-1],seq1:"-"+p.seq1,seq2:this.sequence2[p.pos[1]-1]+p.seq2}),p.pos[0]===0&&p.pos[1]===0&&this.alignments.push({sequence1:p.seq1,sequence2:p.seq2}),d.shift()}return this.alignments}},{key:"getAllIndexes",value:function(d,p){for(var g=[],y=-1;(y=d.indexOf(p,y+1))!==-1;)g.push(y);return g}},{key:"arrayAllMaxIndexes",value:function(d){return this.getAllIndexes(d,Math.max.apply(null,d))}}]),h}();r.exports=u},function(r,i,n){"use strict";var a=function(){};a.FDLayout=n(18),a.FDLayoutConstants=n(7),a.FDLayoutEdge=n(19),a.FDLayoutNode=n(20),a.DimensionD=n(21),a.HashMap=n(22),a.HashSet=n(23),a.IGeometry=n(8),a.IMath=n(9),a.Integer=n(10),a.Point=n(12),a.PointD=n(4),a.RandomSeed=n(16),a.RectangleD=n(13),a.Transform=n(17),a.UniqueIDGeneretor=n(14),a.Quicksort=n(24),a.LinkedList=n(11),a.LGraphObject=n(2),a.LGraph=n(5),a.LEdge=n(1),a.LGraphManager=n(6),a.LNode=n(3),a.Layout=n(15),a.LayoutConstants=n(0),a.NeedlemanWunsch=n(25),r.exports=a},function(r,i,n){"use strict";function a(){this.listeners=[]}var s=a.prototype;s.addListener=function(u,h){this.listeners.push({event:u,callback:h})},s.removeListener=function(u,h){for(var d=this.listeners.length;d>=0;d--){var p=this.listeners[d];p.event===u&&p.callback===h&&this.listeners.splice(d,1)}},s.emit=function(u,h){for(var d=0;d<this.listeners.length;d++){var p=this.listeners[d];u===p.event&&p.callback(h)}},r.exports=a}])})}),V9e=hi((e,t)=>{(function(r,i){typeof e=="object"&&typeof t=="object"?t.exports=i(H9e()):typeof define=="function"&&define.amd?define(["layout-base"],i):typeof e=="object"?e.coseBase=i(H9e()):r.coseBase=i(r.layoutBase)})(e,function(r){return function(i){var n={};function a(s){if(n[s])return n[s].exports;var u=n[s]={i:s,l:!1,exports:{}};return i[s].call(u.exports,u,u.exports,a),u.l=!0,u.exports}return a.m=i,a.c=n,a.i=function(s){return s},a.d=function(s,u,h){a.o(s,u)||Object.defineProperty(s,u,{configurable:!1,enumerable:!0,get:h})},a.n=function(s){var u=s&&s.__esModule?function(){return s.default}:function(){return s};return a.d(u,"a",u),u},a.o=function(s,u){return Object.prototype.hasOwnProperty.call(s,u)},a.p="",a(a.s=7)}([function(i,n){i.exports=r},function(i,n,a){"use strict";var s=a(0).FDLayoutConstants;function u(){}for(var h in s)u[h]=s[h];u.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,u.DEFAULT_RADIAL_SEPARATION=s.DEFAULT_EDGE_LENGTH,u.DEFAULT_COMPONENT_SEPERATION=60,u.TILE=!0,u.TILING_PADDING_VERTICAL=10,u.TILING_PADDING_HORIZONTAL=10,u.TREE_REDUCTION_ON_INCREMENTAL=!1,i.exports=u},function(i,n,a){"use strict";var s=a(0).FDLayoutEdge;function u(d,p,g){s.call(this,d,p,g)}u.prototype=Object.create(s.prototype);for(var h in s)u[h]=s[h];i.exports=u},function(i,n,a){"use strict";var s=a(0).LGraph;function u(d,p,g){s.call(this,d,p,g)}u.prototype=Object.create(s.prototype);for(var h in s)u[h]=s[h];i.exports=u},function(i,n,a){"use strict";var s=a(0).LGraphManager;function u(d){s.call(this,d)}u.prototype=Object.create(s.prototype);for(var h in s)u[h]=s[h];i.exports=u},function(i,n,a){"use strict";var s=a(0).FDLayoutNode,u=a(0).IMath;function h(p,g,y,m){s.call(this,p,g,y,m)}h.prototype=Object.create(s.prototype);for(var d in s)h[d]=s[d];h.prototype.move=function(){var p=this.graphManager.getLayout();this.displacementX=p.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY=p.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren,Math.abs(this.displacementX)>p.coolingFactor*p.maxNodeDisplacement&&(this.displacementX=p.coolingFactor*p.maxNodeDisplacement*u.sign(this.displacementX)),Math.abs(this.displacementY)>p.coolingFactor*p.maxNodeDisplacement&&(this.displacementY=p.coolingFactor*p.maxNodeDisplacement*u.sign(this.displacementY)),this.child==null?this.moveBy(this.displacementX,this.displacementY):this.child.getNodes().length==0?this.moveBy(this.displacementX,this.displacementY):this.propogateDisplacementToChildren(this.displacementX,this.displacementY),p.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},h.prototype.propogateDisplacementToChildren=function(p,g){for(var y=this.getChild().getNodes(),m,x=0;x<y.length;x++)m=y[x],m.getChild()==null?(m.moveBy(p,g),m.displacementX+=p,m.displacementY+=g):m.propogateDisplacementToChildren(p,g)},h.prototype.setPred1=function(p){this.pred1=p},h.prototype.getPred1=function(){return pred1},h.prototype.getPred2=function(){return pred2},h.prototype.setNext=function(p){this.next=p},h.prototype.getNext=function(){return next},h.prototype.setProcessed=function(p){this.processed=p},h.prototype.isProcessed=function(){return processed},i.exports=h},function(i,n,a){"use strict";var s=a(0).FDLayout,u=a(4),h=a(3),d=a(5),p=a(2),g=a(1),y=a(0).FDLayoutConstants,m=a(0).LayoutConstants,x=a(0).Point,_=a(0).PointD,E=a(0).Layout,w=a(0).Integer,C=a(0).IGeometry,A=a(0).LGraph,M=a(0).Transform;function N(){s.call(this),this.toBeTiled={}}N.prototype=Object.create(s.prototype);for(var B in s)N[B]=s[B];N.prototype.newGraphManager=function(){var O=new u(this);return this.graphManager=O,O},N.prototype.newGraph=function(O){return new h(null,this.graphManager,O)},N.prototype.newNode=function(O){return new d(this.graphManager,O)},N.prototype.newEdge=function(O){return new p(null,null,O)},N.prototype.initParameters=function(){s.prototype.initParameters.call(this,arguments),this.isSubLayout||(g.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=g.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=g.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.springConstant=y.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=y.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=y.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=y.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=y.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=y.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1,this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/y.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=y.CONVERGENCE_CHECK_PERIOD/this.maxIterations,this.coolingAdjuster=1)},N.prototype.layout=function(){var O=m.DEFAULT_CREATE_BENDS_AS_NEEDED;return O&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},N.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental){if(g.TREE_REDUCTION_ON_INCREMENTAL){this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var O=new Set(this.getAllNodes()),L=this.nodesWithGravity.filter(function(G){return O.has(G)});this.graphManager.setAllNodesToApplyGravitation(L)}}else{var $=this.getFlatForest();if($.length>0)this.positionNodesRadially($);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var O=new Set(this.getAllNodes()),L=this.nodesWithGravity.filter(function(F){return O.has(F)});this.graphManager.setAllNodesToApplyGravitation(L),this.positionNodesRandomly()}}return this.initSpringEmbedder(),this.runSpringEmbedder(),!0},N.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished)if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;if(this.totalIterations%y.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged())if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;this.coolingCycle++,this.layoutQuality==0?this.coolingAdjuster=this.coolingCycle:this.layoutQuality==1&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var O=new Set(this.getAllNodes()),L=this.nodesWithGravity.filter(function(z){return O.has(z)});this.graphManager.setAllNodesToApplyGravitation(L),this.graphManager.updateBounds(),this.updateGrid(),this.coolingFactor=y.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),this.coolingFactor=y.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var $=!this.isTreeGrowing&&!this.isGrowthFinished,G=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces($,G),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},N.prototype.getPositionsData=function(){for(var O=this.graphManager.getAllNodes(),L={},$=0;$<O.length;$++){var G=O[$].rect,z=O[$].id;L[z]={id:z,x:G.getCenterX(),y:G.getCenterY(),w:G.width,h:G.height}}return L},N.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var O=!1;if(y.ANIMATE==="during")this.emit("layoutstarted");else{for(;!O;)O=this.tick();this.graphManager.updateBounds()}},N.prototype.calculateNodesToApplyGravitationTo=function(){var O=[],L,$=this.graphManager.getGraphs(),G=$.length,z;for(z=0;z<G;z++)L=$[z],L.updateConnected(),L.isConnected||(O=O.concat(L.getNodes()));return O},N.prototype.createBendpoints=function(){var O=[];O=O.concat(this.graphManager.getAllEdges());var L=new Set,$;for($=0;$<O.length;$++){var G=O[$];if(!L.has(G)){var z=G.getSource(),F=G.getTarget();if(z==F)G.getBendpoints().push(new _),G.getBendpoints().push(new _),this.createDummyNodesForBendpoints(G),L.add(G);else{var X=[];if(X=X.concat(z.getEdgeListToNode(F)),X=X.concat(F.getEdgeListToNode(z)),!L.has(X[0])){if(X.length>1){var I;for(I=0;I<X.length;I++){var j=X[I];j.getBendpoints().push(new _),this.createDummyNodesForBendpoints(j)}}X.forEach(function(H){L.add(H)})}}}if(L.size==O.length)break}},N.prototype.positionNodesRadially=function(O){for(var L=new x(0,0),$=Math.ceil(Math.sqrt(O.length)),G=0,z=0,F=0,X=new _(0,0),I=0;I<O.length;I++){I%$==0&&(F=0,z=G,I!=0&&(z+=g.DEFAULT_COMPONENT_SEPERATION),G=0);var j=O[I],H=E.findCenterOfTree(j);L.x=F,L.y=z,X=N.radialLayout(j,H,L),X.y>G&&(G=Math.floor(X.y)),F=Math.floor(X.x+g.DEFAULT_COMPONENT_SEPERATION)}this.transform(new _(m.WORLD_CENTER_X-X.x/2,m.WORLD_CENTER_Y-X.y/2))},N.radialLayout=function(O,L,$){var G=Math.max(this.maxDiagonalInTree(O),g.DEFAULT_RADIAL_SEPARATION);N.branchRadialLayout(L,null,0,359,0,G);var z=A.calculateBounds(O),F=new M;F.setDeviceOrgX(z.getMinX()),F.setDeviceOrgY(z.getMinY()),F.setWorldOrgX($.x),F.setWorldOrgY($.y);for(var X=0;X<O.length;X++){var I=O[X];I.transform(F)}var j=new _(z.getMaxX(),z.getMaxY());return F.inverseTransformPoint(j)},N.branchRadialLayout=function(O,L,$,G,z,F){var X=(G-$+1)/2;X<0&&(X+=180);var I=(X+$)%360,j=I*C.TWO_PI/360,H=Math.cos(j),V=z*Math.cos(j),P=z*Math.sin(j);O.setCenter(V,P);var q=[];q=q.concat(O.getEdges());var Z=q.length;L!=null&&Z--;for(var J=0,ae=q.length,ue,be=O.getEdgesBetween(L);be.length>1;){var Le=be[0];be.splice(0,1);var xe=q.indexOf(Le);xe>=0&&q.splice(xe,1),ae--,Z--}L!=null?ue=(q.indexOf(be[0])+1)%ae:ue=0;for(var Ae=Math.abs(G-$)/Z,oe=ue;J!=Z;oe=++oe%ae){var he=q[oe].getOtherEnd(O);if(he!=L){var le=($+J*Ae)%360,ke=(le+Ae)%360;N.branchRadialLayout(he,O,le,ke,z+F,F),J++}}},N.maxDiagonalInTree=function(O){for(var L=w.MIN_VALUE,$=0;$<O.length;$++){var G=O[$],z=G.getDiagonal();z>L&&(L=z)}return L},N.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},N.prototype.groupZeroDegreeMembers=function(){var O=this,L={};this.memberGroups={},this.idToDummyNode={};for(var $=[],G=this.graphManager.getAllNodes(),z=0;z<G.length;z++){var F=G[z],X=F.getParent();this.getNodeDegreeWithChildren(F)===0&&(X.id==null||!this.getToBeTiled(X))&&$.push(F)}for(var z=0;z<$.length;z++){var F=$[z],I=F.getParent().id;typeof L[I]>"u"&&(L[I]=[]),L[I]=L[I].concat(F)}Object.keys(L).forEach(function(j){if(L[j].length>1){var H="DummyCompound_"+j;O.memberGroups[H]=L[j];var V=L[j][0].getParent(),P=new d(O.graphManager);P.id=H,P.paddingLeft=V.paddingLeft||0,P.paddingRight=V.paddingRight||0,P.paddingBottom=V.paddingBottom||0,P.paddingTop=V.paddingTop||0,O.idToDummyNode[H]=P;var q=O.getGraphManager().add(O.newGraph(),P),Z=V.getChild();Z.add(P);for(var J=0;J<L[j].length;J++){var ae=L[j][J];Z.remove(ae),q.add(ae)}}})},N.prototype.clearCompounds=function(){var O={},L={};this.performDFSOnCompounds();for(var $=0;$<this.compoundOrder.length;$++)L[this.compoundOrder[$].id]=this.compoundOrder[$],O[this.compoundOrder[$].id]=[].concat(this.compoundOrder[$].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[$].getChild()),this.compoundOrder[$].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(O,L)},N.prototype.clearZeroDegreeMembers=function(){var O=this,L=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function($){var G=O.idToDummyNode[$];L[$]=O.tileNodes(O.memberGroups[$],G.paddingLeft+G.paddingRight),G.rect.width=L[$].width,G.rect.height=L[$].height})},N.prototype.repopulateCompounds=function(){for(var O=this.compoundOrder.length-1;O>=0;O--){var L=this.compoundOrder[O],$=L.id,G=L.paddingLeft,z=L.paddingTop;this.adjustLocations(this.tiledMemberPack[$],L.rect.x,L.rect.y,G,z)}},N.prototype.repopulateZeroDegreeMembers=function(){var O=this,L=this.tiledZeroDegreePack;Object.keys(L).forEach(function($){var G=O.idToDummyNode[$],z=G.paddingLeft,F=G.paddingTop;O.adjustLocations(L[$],G.rect.x,G.rect.y,z,F)})},N.prototype.getToBeTiled=function(O){var L=O.id;if(this.toBeTiled[L]!=null)return this.toBeTiled[L];var $=O.getChild();if($==null)return this.toBeTiled[L]=!1,!1;for(var G=$.getNodes(),z=0;z<G.length;z++){var F=G[z];if(this.getNodeDegree(F)>0)return this.toBeTiled[L]=!1,!1;if(F.getChild()==null){this.toBeTiled[F.id]=!1;continue}if(!this.getToBeTiled(F))return this.toBeTiled[L]=!1,!1}return this.toBeTiled[L]=!0,!0},N.prototype.getNodeDegree=function(O){for(var L=O.id,$=O.getEdges(),G=0,z=0;z<$.length;z++){var F=$[z];F.getSource().id!==F.getTarget().id&&(G=G+1)}return G},N.prototype.getNodeDegreeWithChildren=function(O){var L=this.getNodeDegree(O);if(O.getChild()==null)return L;for(var $=O.getChild().getNodes(),G=0;G<$.length;G++){var z=$[G];L+=this.getNodeDegreeWithChildren(z)}return L},N.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},N.prototype.fillCompexOrderByDFS=function(O){for(var L=0;L<O.length;L++){var $=O[L];$.getChild()!=null&&this.fillCompexOrderByDFS($.getChild().getNodes()),this.getToBeTiled($)&&this.compoundOrder.push($)}},N.prototype.adjustLocations=function(O,L,$,G,z){L+=G,$+=z;for(var F=L,X=0;X<O.rows.length;X++){var I=O.rows[X];L=F;for(var j=0,H=0;H<I.length;H++){var V=I[H];V.rect.x=L,V.rect.y=$,L+=V.rect.width+O.horizontalPadding,V.rect.height>j&&(j=V.rect.height)}$+=j+O.verticalPadding}},N.prototype.tileCompoundMembers=function(O,L){var $=this;this.tiledMemberPack=[],Object.keys(O).forEach(function(G){var z=L[G];$.tiledMemberPack[G]=$.tileNodes(O[G],z.paddingLeft+z.paddingRight),z.rect.width=$.tiledMemberPack[G].width,z.rect.height=$.tiledMemberPack[G].height})},N.prototype.tileNodes=function(O,L){var $=g.TILING_PADDING_VERTICAL,G=g.TILING_PADDING_HORIZONTAL,z={rows:[],rowWidth:[],rowHeight:[],width:0,height:L,verticalPadding:$,horizontalPadding:G};O.sort(function(I,j){return I.rect.width*I.rect.height>j.rect.width*j.rect.height?-1:I.rect.width*I.rect.height<j.rect.width*j.rect.height?1:0});for(var F=0;F<O.length;F++){var X=O[F];z.rows.length==0?this.insertNodeToRow(z,X,0,L):this.canAddHorizontal(z,X.rect.width,X.rect.height)?this.insertNodeToRow(z,X,this.getShortestRowIndex(z),L):this.insertNodeToRow(z,X,z.rows.length,L),this.shiftToLastRow(z)}return z},N.prototype.insertNodeToRow=function(O,L,$,G){var z=G;if($==O.rows.length){var F=[];O.rows.push(F),O.rowWidth.push(z),O.rowHeight.push(0)}var X=O.rowWidth[$]+L.rect.width;O.rows[$].length>0&&(X+=O.horizontalPadding),O.rowWidth[$]=X,O.width<X&&(O.width=X);var I=L.rect.height;$>0&&(I+=O.verticalPadding);var j=0;I>O.rowHeight[$]&&(j=O.rowHeight[$],O.rowHeight[$]=I,j=O.rowHeight[$]-j),O.height+=j,O.rows[$].push(L)},N.prototype.getShortestRowIndex=function(O){for(var L=-1,$=Number.MAX_VALUE,G=0;G<O.rows.length;G++)O.rowWidth[G]<$&&(L=G,$=O.rowWidth[G]);return L},N.prototype.getLongestRowIndex=function(O){for(var L=-1,$=Number.MIN_VALUE,G=0;G<O.rows.length;G++)O.rowWidth[G]>$&&(L=G,$=O.rowWidth[G]);return L},N.prototype.canAddHorizontal=function(O,L,$){var G=this.getShortestRowIndex(O);if(G<0)return!0;var z=O.rowWidth[G];if(z+O.horizontalPadding+L<=O.width)return!0;var F=0;O.rowHeight[G]<$&&G>0&&(F=$+O.verticalPadding-O.rowHeight[G]);var X;O.width-z>=L+O.horizontalPadding?X=(O.height+F)/(z+L+O.horizontalPadding):X=(O.height+F)/O.width,F=$+O.verticalPadding;var I;return O.width<L?I=(O.height+F)/L:I=(O.height+F)/O.width,I<1&&(I=1/I),X<1&&(X=1/X),X<I},N.prototype.shiftToLastRow=function(O){var L=this.getLongestRowIndex(O),$=O.rowWidth.length-1,G=O.rows[L],z=G[G.length-1],F=z.width+O.horizontalPadding;if(O.width-O.rowWidth[$]>F&&L!=$){G.splice(-1,1),O.rows[$].push(z),O.rowWidth[L]=O.rowWidth[L]-F,O.rowWidth[$]=O.rowWidth[$]+F,O.width=O.rowWidth[instance.getLongestRowIndex(O)];for(var X=Number.MIN_VALUE,I=0;I<G.length;I++)G[I].height>X&&(X=G[I].height);L>0&&(X+=O.verticalPadding);var j=O.rowHeight[L]+O.rowHeight[$];O.rowHeight[L]=X,O.rowHeight[$]<z.height+O.verticalPadding&&(O.rowHeight[$]=z.height+O.verticalPadding);var H=O.rowHeight[L]+O.rowHeight[$];O.height+=H-j,this.shiftToLastRow(O)}},N.prototype.tilingPreLayout=function(){g.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},N.prototype.tilingPostLayout=function(){g.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},N.prototype.reduceTrees=function(){for(var O=[],L=!0,$;L;){var G=this.graphManager.getAllNodes(),z=[];L=!1;for(var F=0;F<G.length;F++)$=G[F],$.getEdges().length==1&&!$.getEdges()[0].isInterGraph&&$.getChild()==null&&(z.push([$,$.getEdges()[0],$.getOwner()]),L=!0);if(L==!0){for(var X=[],I=0;I<z.length;I++)z[I][0].getEdges().length==1&&(X.push(z[I]),z[I][0].getOwner().remove(z[I][0]));O.push(X),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=O},N.prototype.growTree=function(O){for(var L=O.length,$=O[L-1],G,z=0;z<$.length;z++)G=$[z],this.findPlaceforPrunedNode(G),G[2].add(G[0]),G[2].add(G[1],G[1].source,G[1].target);O.splice(O.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},N.prototype.findPlaceforPrunedNode=function(O){var L,$,G=O[0];G==O[1].source?$=O[1].target:$=O[1].source;var z=$.startX,F=$.finishX,X=$.startY,I=$.finishY,j=0,H=0,V=0,P=0,q=[j,V,H,P];if(X>0)for(var Z=z;Z<=F;Z++)q[0]+=this.grid[Z][X-1].length+this.grid[Z][X].length-1;if(F<this.grid.length-1)for(var Z=X;Z<=I;Z++)q[1]+=this.grid[F+1][Z].length+this.grid[F][Z].length-1;if(I<this.grid[0].length-1)for(var Z=z;Z<=F;Z++)q[2]+=this.grid[Z][I+1].length+this.grid[Z][I].length-1;if(z>0)for(var Z=X;Z<=I;Z++)q[3]+=this.grid[z-1][Z].length+this.grid[z][Z].length-1;for(var J=w.MAX_VALUE,ae,ue,be=0;be<q.length;be++)q[be]<J?(J=q[be],ae=1,ue=be):q[be]==J&&ae++;if(ae==3&&J==0)q[0]==0&&q[1]==0&&q[2]==0?L=1:q[0]==0&&q[1]==0&&q[3]==0?L=0:q[0]==0&&q[2]==0&&q[3]==0?L=3:q[1]==0&&q[2]==0&&q[3]==0&&(L=2);else if(ae==2&&J==0){var Le=Math.floor(Math.random()*2);q[0]==0&&q[1]==0?Le==0?L=0:L=1:q[0]==0&&q[2]==0?Le==0?L=0:L=2:q[0]==0&&q[3]==0?Le==0?L=0:L=3:q[1]==0&&q[2]==0?Le==0?L=1:L=2:q[1]==0&&q[3]==0?Le==0?L=1:L=3:Le==0?L=2:L=3}else if(ae==4&&J==0){var Le=Math.floor(Math.random()*4);L=Le}else L=ue;L==0?G.setCenter($.getCenterX(),$.getCenterY()-$.getHeight()/2-y.DEFAULT_EDGE_LENGTH-G.getHeight()/2):L==1?G.setCenter($.getCenterX()+$.getWidth()/2+y.DEFAULT_EDGE_LENGTH+G.getWidth()/2,$.getCenterY()):L==2?G.setCenter($.getCenterX(),$.getCenterY()+$.getHeight()/2+y.DEFAULT_EDGE_LENGTH+G.getHeight()/2):G.setCenter($.getCenterX()-$.getWidth()/2-y.DEFAULT_EDGE_LENGTH-G.getWidth()/2,$.getCenterY())},i.exports=N},function(i,n,a){"use strict";var s={};s.layoutBase=a(0),s.CoSEConstants=a(1),s.CoSEEdge=a(2),s.CoSEGraph=a(3),s.CoSEGraphManager=a(4),s.CoSELayout=a(6),s.CoSENode=a(5),i.exports=s}])})}),gZe=hi((e,t)=>{(function(r,i){typeof e=="object"&&typeof t=="object"?t.exports=i(V9e()):typeof define=="function"&&define.amd?define(["cose-base"],i):typeof e=="object"?e.cytoscapeCoseBilkent=i(V9e()):r.cytoscapeCoseBilkent=i(r.coseBase)})(e,function(r){return function(i){var n={};function a(s){if(n[s])return n[s].exports;var u=n[s]={i:s,l:!1,exports:{}};return i[s].call(u.exports,u,u.exports,a),u.l=!0,u.exports}return a.m=i,a.c=n,a.i=function(s){return s},a.d=function(s,u,h){a.o(s,u)||Object.defineProperty(s,u,{configurable:!1,enumerable:!0,get:h})},a.n=function(s){var u=s&&s.__esModule?function(){return s.default}:function(){return s};return a.d(u,"a",u),u},a.o=function(s,u){return Object.prototype.hasOwnProperty.call(s,u)},a.p="",a(a.s=1)}([function(i,n){i.exports=r},function(i,n,a){"use strict";var s=a(0).layoutBase.LayoutConstants,u=a(0).layoutBase.FDLayoutConstants,h=a(0).CoSEConstants,d=a(0).CoSELayout,p=a(0).CoSENode,g=a(0).layoutBase.PointD,y=a(0).layoutBase.DimensionD,m={ready:function(){},stop:function(){},quality:"default",nodeDimensionsIncludeLabels:!1,refresh:30,fit:!0,padding:10,randomize:!0,nodeRepulsion:4500,idealEdgeLength:50,edgeElasticity:.45,nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,animate:"end",animationDuration:500,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.5};function x(C,A){var M={};for(var N in C)M[N]=C[N];for(var N in A)M[N]=A[N];return M}function _(C){this.options=x(m,C),E(this.options)}var E=function(C){C.nodeRepulsion!=null&&(h.DEFAULT_REPULSION_STRENGTH=u.DEFAULT_REPULSION_STRENGTH=C.nodeRepulsion),C.idealEdgeLength!=null&&(h.DEFAULT_EDGE_LENGTH=u.DEFAULT_EDGE_LENGTH=C.idealEdgeLength),C.edgeElasticity!=null&&(h.DEFAULT_SPRING_STRENGTH=u.DEFAULT_SPRING_STRENGTH=C.edgeElasticity),C.nestingFactor!=null&&(h.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=u.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=C.nestingFactor),C.gravity!=null&&(h.DEFAULT_GRAVITY_STRENGTH=u.DEFAULT_GRAVITY_STRENGTH=C.gravity),C.numIter!=null&&(h.MAX_ITERATIONS=u.MAX_ITERATIONS=C.numIter),C.gravityRange!=null&&(h.DEFAULT_GRAVITY_RANGE_FACTOR=u.DEFAULT_GRAVITY_RANGE_FACTOR=C.gravityRange),C.gravityCompound!=null&&(h.DEFAULT_COMPOUND_GRAVITY_STRENGTH=u.DEFAULT_COMPOUND_GRAVITY_STRENGTH=C.gravityCompound),C.gravityRangeCompound!=null&&(h.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=u.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=C.gravityRangeCompound),C.initialEnergyOnIncremental!=null&&(h.DEFAULT_COOLING_FACTOR_INCREMENTAL=u.DEFAULT_COOLING_FACTOR_INCREMENTAL=C.initialEnergyOnIncremental),C.quality=="draft"?s.QUALITY=0:C.quality=="proof"?s.QUALITY=2:s.QUALITY=1,h.NODE_DIMENSIONS_INCLUDE_LABELS=u.NODE_DIMENSIONS_INCLUDE_LABELS=s.NODE_DIMENSIONS_INCLUDE_LABELS=C.nodeDimensionsIncludeLabels,h.DEFAULT_INCREMENTAL=u.DEFAULT_INCREMENTAL=s.DEFAULT_INCREMENTAL=!C.randomize,h.ANIMATE=u.ANIMATE=s.ANIMATE=C.animate,h.TILE=C.tile,h.TILING_PADDING_VERTICAL=typeof C.tilingPaddingVertical=="function"?C.tilingPaddingVertical.call():C.tilingPaddingVertical,h.TILING_PADDING_HORIZONTAL=typeof C.tilingPaddingHorizontal=="function"?C.tilingPaddingHorizontal.call():C.tilingPaddingHorizontal};_.prototype.run=function(){var C,A,M=this.options,N=this.idToLNode={},B=this.layout=new d,O=this;O.stopped=!1,this.cy=this.options.cy,this.cy.trigger({type:"layoutstart",layout:this});var L=B.newGraphManager();this.gm=L;var $=this.options.eles.nodes(),G=this.options.eles.edges();this.root=L.addRoot(),this.processChildrenList(this.root,this.getTopMostNodes($),B);for(var z=0;z<G.length;z++){var F=G[z],X=this.idToLNode[F.data("source")],I=this.idToLNode[F.data("target")];if(X!==I&&X.getEdgesBetween(I).length==0){var j=L.add(B.newEdge(),X,I);j.id=F.id()}}var H=function(P,q){typeof P=="number"&&(P=q);var Z=P.data("id"),J=O.idToLNode[Z];return{x:J.getRect().getCenterX(),y:J.getRect().getCenterY()}},V=function P(){for(var q=function(){M.fit&&M.cy.fit(M.eles,M.padding),C||(C=!0,O.cy.one("layoutready",M.ready),O.cy.trigger({type:"layoutready",layout:O}))},Z=O.options.refresh,J,ae=0;ae<Z&&!J;ae++)J=O.stopped||O.layout.tick();if(J){B.checkLayoutSuccess()&&!B.isSubLayout&&B.doPostLayout(),B.tilingPostLayout&&B.tilingPostLayout(),B.isLayoutFinished=!0,O.options.eles.nodes().positions(H),q(),O.cy.one("layoutstop",O.options.stop),O.cy.trigger({type:"layoutstop",layout:O}),A&&cancelAnimationFrame(A),C=!1;return}var ue=O.layout.getPositionsData();M.eles.nodes().positions(function(be,Le){if(typeof be=="number"&&(be=Le),!be.isParent()){for(var xe=be.id(),Ae=ue[xe],oe=be;Ae==null&&(Ae=ue[oe.data("parent")]||ue["DummyCompound_"+oe.data("parent")],ue[xe]=Ae,oe=oe.parent()[0],oe!=null););return Ae!=null?{x:Ae.x,y:Ae.y}:{x:be.position("x"),y:be.position("y")}}}),q(),A=requestAnimationFrame(P)};return B.addListener("layoutstarted",function(){O.options.animate==="during"&&(A=requestAnimationFrame(V))}),B.runLayout(),this.options.animate!=="during"&&(O.options.eles.nodes().not(":parent").layoutPositions(O,O.options,H),C=!1),this},_.prototype.getTopMostNodes=function(C){for(var A={},M=0;M<C.length;M++)A[C[M].id()]=!0;var N=C.filter(function(B,O){typeof B=="number"&&(B=O);for(var L=B.parent()[0];L!=null;){if(A[L.id()])return!1;L=L.parent()[0]}return!0});return N},_.prototype.processChildrenList=function(C,A,M){for(var N=A.length,B=0;B<N;B++){var O=A[B],L=O.children(),$,G=O.layoutDimensions({nodeDimensionsIncludeLabels:this.options.nodeDimensionsIncludeLabels});if(O.outerWidth()!=null&&O.outerHeight()!=null?$=C.add(new p(M.graphManager,new g(O.position("x")-G.w/2,O.position("y")-G.h/2),new y(parseFloat(G.w),parseFloat(G.h)))):$=C.add(new p(this.graphManager)),$.id=O.data("id"),$.paddingLeft=parseInt(O.css("padding")),$.paddingTop=parseInt(O.css("padding")),$.paddingRight=parseInt(O.css("padding")),$.paddingBottom=parseInt(O.css("padding")),this.options.nodeDimensionsIncludeLabels&&O.isParent()){var z=O.boundingBox({includeLabels:!0,includeNodes:!1}).w,F=O.boundingBox({includeLabels:!0,includeNodes:!1}).h,X=O.css("text-halign");$.labelWidth=z,$.labelHeight=F,$.labelPos=X}if(this.idToLNode[O.data("id")]=$,isNaN($.rect.x)&&($.rect.x=0),isNaN($.rect.y)&&($.rect.y=0),L!=null&&L.length>0){var I;I=M.getGraphManager().add(M.newGraph(),$),this.processChildrenList(I,L,M)}}},_.prototype.stop=function(){return this.stopped=!0,this};var w=function(C){C("layout","cose-bilkent",_)};typeof cytoscape<"u"&&w(cytoscape),i.exports=w}])})}),W9e={};oi(W9e,{diagram:()=>CMe});function Y9e(e,t,r,i,n){return e.insert("polygon",":first-child").attr("points",i.map(function(a){return a.x+","+a.y}).join(" ")).attr("transform","translate("+(n.width-t)/2+", "+r+")")}async function wee(e,t,r,i,n){await xMe(e,t,r,i,n),r.children&&await Promise.all(r.children.map((a,s)=>wee(e,t,a,i<0?s:i,n)))}function q9e(e,t){t.edges().map((r,i)=>{let n=r.data();if(r[0]._private.bodyBounds){let a=r[0]._private.rscratch;Ce.trace("Edge: ",i,n),e.insert("path").attr("d",`M ${a.startX},${a.startY} L ${a.midX},${a.midY} L${a.endX},${a.endY} `).attr("class","edge section-edge-"+n.section+" edge-depth-"+n.depth)}})}function kee(e,t,r,i){t.add({group:"nodes",data:{id:e.id.toString(),labelText:e.descr,height:e.height,width:e.width,level:i,nodeId:e.id,padding:e.padding,type:e.type},position:{x:e.x,y:e.y}}),e.children&&e.children.forEach(n=>{kee(n,t,r,i+1),t.add({group:"edges",data:{id:`${e.id}_${n.id}`,source:e.id,target:n.id,depth:i,section:n.section}})})}function X9e(e,t){return new Promise(r=>{let i=Nr("body").append("div").attr("id","cy").attr("style","display:none"),n=Qd({container:document.getElementById("cy"),style:[{selector:"edge",style:{"curve-style":"bezier"}}]});i.remove(),kee(e,n,t,0),n.nodes().forEach(function(a){a.layoutDimensions=()=>{let s=a.data();return{w:s.width,h:s.height}}}),n.layout({name:"cose-bilkent",quality:"proof",styleEnabled:!1,animate:!1}).run(),n.ready(a=>{Ce.info("Ready",a),r(n)})})}function K9e(e,t){t.nodes().map((r,i)=>{let n=r.data();n.x=r.position().x,n.y=r.position().y,bMe(e,n);let a=e.getElementById(n.nodeId);Ce.info("Id:",i,"Position: (",r.position().x,", ",r.position().y,")",n),a.attr("transform",`translate(${r.position().x-n.width/2}, ${r.position().y-n.height/2})`),a.attr("attr",`apa-${i})`)})}var Z9e,CP,Q9e,Kc,Tee,SP,J9e,eMe,tMe,rMe,Zo,iMe,nMe,aMe,sMe,oMe,lMe,uMe,hMe,cMe,dMe,pMe,fMe,gMe,mMe,yMe,vMe,xMe,bMe,_Me,wMe,kMe,TMe,EMe,CMe,mZe=D(()=>{ch(),Os(),gm(),Qn(),j9e(),Z9e=Ke(gZe(),1),ha(),Ge(),CP=function(){var e=k(function(M,N,B,O){for(B=B||{},O=M.length;O--;B[M[O]]=N);return B},"o"),t=[1,4],r=[1,13],i=[1,12],n=[1,15],a=[1,16],s=[1,20],u=[1,19],h=[6,7,8],d=[1,26],p=[1,24],g=[1,25],y=[6,7,11],m=[1,6,13,15,16,19,22],x=[1,33],_=[1,34],E=[1,6,7,11,13,15,16,19,22],w={trace:k(function(){},"trace"),yy:{},symbols_:{error:2,start:3,mindMap:4,spaceLines:5,SPACELINE:6,NL:7,MINDMAP:8,document:9,stop:10,EOF:11,statement:12,SPACELIST:13,node:14,ICON:15,CLASS:16,nodeWithId:17,nodeWithoutId:18,NODE_DSTART:19,NODE_DESCR:20,NODE_DEND:21,NODE_ID:22,$accept:0,$end:1},terminals_:{2:"error",6:"SPACELINE",7:"NL",8:"MINDMAP",11:"EOF",13:"SPACELIST",15:"ICON",16:"CLASS",19:"NODE_DSTART",20:"NODE_DESCR",21:"NODE_DEND",22:"NODE_ID"},productions_:[0,[3,1],[3,2],[5,1],[5,2],[5,2],[4,2],[4,3],[10,1],[10,1],[10,1],[10,2],[10,2],[9,3],[9,2],[12,2],[12,2],[12,2],[12,1],[12,1],[12,1],[12,1],[12,1],[14,1],[14,1],[18,3],[17,1],[17,4]],performAction:k(function(M,N,B,O,L,$,G){var z=$.length-1;switch(L){case 6:case 7:return O;case 8:O.getLogger().trace("Stop NL ");break;case 9:O.getLogger().trace("Stop EOF ");break;case 11:O.getLogger().trace("Stop NL2 ");break;case 12:O.getLogger().trace("Stop EOF2 ");break;case 15:O.getLogger().info("Node: ",$[z].id),O.addNode($[z-1].length,$[z].id,$[z].descr,$[z].type);break;case 16:O.getLogger().trace("Icon: ",$[z]),O.decorateNode({icon:$[z]});break;case 17:case 21:O.decorateNode({class:$[z]});break;case 18:O.getLogger().trace("SPACELIST");break;case 19:O.getLogger().trace("Node: ",$[z].id),O.addNode(0,$[z].id,$[z].descr,$[z].type);break;case 20:O.decorateNode({icon:$[z]});break;case 25:O.getLogger().trace("node found ..",$[z-2]),this.$={id:$[z-1],descr:$[z-1],type:O.getType($[z-2],$[z])};break;case 26:this.$={id:$[z],descr:$[z],type:O.nodeType.DEFAULT};break;case 27:O.getLogger().trace("node found ..",$[z-3]),this.$={id:$[z-3],descr:$[z-1],type:O.getType($[z-2],$[z])};break}},"anonymous"),table:[{3:1,4:2,5:3,6:[1,5],8:t},{1:[3]},{1:[2,1]},{4:6,6:[1,7],7:[1,8],8:t},{6:r,7:[1,10],9:9,12:11,13:i,14:14,15:n,16:a,17:17,18:18,19:s,22:u},e(h,[2,3]),{1:[2,2]},e(h,[2,4]),e(h,[2,5]),{1:[2,6],6:r,12:21,13:i,14:14,15:n,16:a,17:17,18:18,19:s,22:u},{6:r,9:22,12:11,13:i,14:14,15:n,16:a,17:17,18:18,19:s,22:u},{6:d,7:p,10:23,11:g},e(y,[2,22],{17:17,18:18,14:27,15:[1,28],16:[1,29],19:s,22:u}),e(y,[2,18]),e(y,[2,19]),e(y,[2,20]),e(y,[2,21]),e(y,[2,23]),e(y,[2,24]),e(y,[2,26],{19:[1,30]}),{20:[1,31]},{6:d,7:p,10:32,11:g},{1:[2,7],6:r,12:21,13:i,14:14,15:n,16:a,17:17,18:18,19:s,22:u},e(m,[2,14],{7:x,11:_}),e(E,[2,8]),e(E,[2,9]),e(E,[2,10]),e(y,[2,15]),e(y,[2,16]),e(y,[2,17]),{20:[1,35]},{21:[1,36]},e(m,[2,13],{7:x,11:_}),e(E,[2,11]),e(E,[2,12]),{21:[1,37]},e(y,[2,25]),e(y,[2,27])],defaultActions:{2:[2,1],6:[2,2]},parseError:k(function(M,N){if(N.recoverable)this.trace(M);else{var B=new Error(M);throw B.hash=N,B}},"parseError"),parse:k(function(M){var N=this,B=[0],O=[],L=[null],$=[],G=this.table,z="",F=0,X=0,I=0,j=2,H=1,V=$.slice.call(arguments,1),P=Object.create(this.lexer),q={yy:{}};for(var Z in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Z)&&(q.yy[Z]=this.yy[Z]);P.setInput(M,q.yy),q.yy.lexer=P,q.yy.parser=this,typeof P.yylloc>"u"&&(P.yylloc={});var J=P.yylloc;$.push(J);var ae=P.options&&P.options.ranges;typeof q.yy.parseError=="function"?this.parseError=q.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function ue(Et){B.length=B.length-2*Et,L.length=L.length-Et,$.length=$.length-Et}k(ue,"popStack");function be(){var Et;return Et=O.pop()||P.lex()||H,typeof Et!="number"&&(Et instanceof Array&&(O=Et,Et=O.pop()),Et=N.symbols_[Et]||Et),Et}k(be,"lex");for(var Le,xe,Ae,oe,he,le,ke={},pe,qe,me,st;;){if(Ae=B[B.length-1],this.defaultActions[Ae]?oe=this.defaultActions[Ae]:((Le===null||typeof Le>"u")&&(Le=be()),oe=G[Ae]&&G[Ae][Le]),typeof oe>"u"||!oe.length||!oe[0]){var we="";st=[];for(pe in G[Ae])this.terminals_[pe]&&pe>j&&st.push("'"+this.terminals_[pe]+"'");P.showPosition?we="Parse error on line "+(F+1)+`:
`+P.showPosition()+`
Expecting `+st.join(", ")+", got '"+(this.terminals_[Le]||Le)+"'":we="Parse error on line "+(F+1)+": Unexpected "+(Le==H?"end of input":"'"+(this.terminals_[Le]||Le)+"'"),this.parseError(we,{text:P.match,token:this.terminals_[Le]||Le,line:P.yylineno,loc:J,expected:st})}if(oe[0]instanceof Array&&oe.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Ae+", token: "+Le);switch(oe[0]){case 1:B.push(Le),L.push(P.yytext),$.push(P.yylloc),B.push(oe[1]),Le=null,xe?(Le=xe,xe=null):(X=P.yyleng,z=P.yytext,F=P.yylineno,J=P.yylloc,I>0&&I--);break;case 2:if(qe=this.productions_[oe[1]][1],ke.$=L[L.length-qe],ke._$={first_line:$[$.length-(qe||1)].first_line,last_line:$[$.length-1].last_line,first_column:$[$.length-(qe||1)].first_column,last_column:$[$.length-1].last_column},ae&&(ke._$.range=[$[$.length-(qe||1)].range[0],$[$.length-1].range[1]]),le=this.performAction.apply(ke,[z,X,F,q.yy,oe[1],L,$].concat(V)),typeof le<"u")return le;qe&&(B=B.slice(0,-1*qe*2),L=L.slice(0,-1*qe),$=$.slice(0,-1*qe)),B.push(this.productions_[oe[1]][0]),L.push(ke.$),$.push(ke._$),me=G[B[B.length-2]][B[B.length-1]],B.push(me);break;case 3:return!0}}return!0},"parse")},C=function(){var M={EOF:1,parseError:k(function(N,B){if(this.yy.parser)this.yy.parser.parseError(N,B);else throw new Error(N)},"parseError"),setInput:k(function(N,B){return this.yy=B||this.yy||{},this._input=N,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:k(function(){var N=this._input[0];this.yytext+=N,this.yyleng++,this.offset++,this.match+=N,this.matched+=N;var B=N.match(/(?:\r\n?|\n).*/g);return B?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),N},"input"),unput:k(function(N){var B=N.length,O=N.split(/(?:\r\n?|\n)/g);this._input=N+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-B),this.offset-=B;var L=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),O.length-1&&(this.yylineno-=O.length-1);var $=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:O?(O.length===L.length?this.yylloc.first_column:0)+L[L.length-O.length].length-O[0].length:this.yylloc.first_column-B},this.options.ranges&&(this.yylloc.range=[$[0],$[0]+this.yyleng-B]),this.yyleng=this.yytext.length,this},"unput"),more:k(function(){return this._more=!0,this},"more"),reject:k(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:k(function(N){this.unput(this.match.slice(N))},"less"),pastInput:k(function(){var N=this.matched.substr(0,this.matched.length-this.match.length);return(N.length>20?"...":"")+N.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:k(function(){var N=this.match;return N.length<20&&(N+=this._input.substr(0,20-N.length)),(N.substr(0,20)+(N.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:k(function(){var N=this.pastInput(),B=new Array(N.length+1).join("-");return N+this.upcomingInput()+`
`+B+"^"},"showPosition"),test_match:k(function(N,B){var O,L,$;if(this.options.backtrack_lexer&&($={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&($.yylloc.range=this.yylloc.range.slice(0))),L=N[0].match(/(?:\r\n?|\n).*/g),L&&(this.yylineno+=L.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:L?L[L.length-1].length-L[L.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+N[0].length},this.yytext+=N[0],this.match+=N[0],this.matches=N,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(N[0].length),this.matched+=N[0],O=this.performAction.call(this,this.yy,this,B,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),O)return O;if(this._backtrack){for(var G in $)this[G]=$[G];return!1}return!1},"test_match"),next:k(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var N,B,O,L;this._more||(this.yytext="",this.match="");for(var $=this._currentRules(),G=0;G<$.length;G++)if(O=this._input.match(this.rules[$[G]]),O&&(!B||O[0].length>B[0].length)){if(B=O,L=G,this.options.backtrack_lexer){if(N=this.test_match(O,$[G]),N!==!1)return N;if(this._backtrack){B=!1;continue}else return!1}else if(!this.options.flex)break}return B?(N=this.test_match(B,$[L]),N!==!1?N:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:k(function(){var N=this.next();return N||this.lex()},"lex"),begin:k(function(N){this.conditionStack.push(N)},"begin"),popState:k(function(){var N=this.conditionStack.length-1;return N>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:k(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:k(function(N){return N=this.conditionStack.length-1-Math.abs(N||0),N>=0?this.conditionStack[N]:"INITIAL"},"topState"),pushState:k(function(N){this.begin(N)},"pushState"),stateStackSize:k(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:k(function(N,B,O,L){var $=L;switch(O){case 0:return N.getLogger().trace("Found comment",B.yytext),6;case 1:return 8;case 2:this.begin("CLASS");break;case 3:return this.popState(),16;case 4:this.popState();break;case 5:N.getLogger().trace("Begin icon"),this.begin("ICON");break;case 6:return N.getLogger().trace("SPACELINE"),6;case 7:return 7;case 8:return 15;case 9:N.getLogger().trace("end icon"),this.popState();break;case 10:return N.getLogger().trace("Exploding node"),this.begin("NODE"),19;case 11:return N.getLogger().trace("Cloud"),this.begin("NODE"),19;case 12:return N.getLogger().trace("Explosion Bang"),this.begin("NODE"),19;case 13:return N.getLogger().trace("Cloud Bang"),this.begin("NODE"),19;case 14:return this.begin("NODE"),19;case 15:return this.begin("NODE"),19;case 16:return this.begin("NODE"),19;case 17:return this.begin("NODE"),19;case 18:return 13;case 19:return 22;case 20:return 11;case 21:this.begin("NSTR2");break;case 22:return"NODE_DESCR";case 23:this.popState();break;case 24:N.getLogger().trace("Starting NSTR"),this.begin("NSTR");break;case 25:return N.getLogger().trace("description:",B.yytext),"NODE_DESCR";case 26:this.popState();break;case 27:return this.popState(),N.getLogger().trace("node end ))"),"NODE_DEND";case 28:return this.popState(),N.getLogger().trace("node end )"),"NODE_DEND";case 29:return this.popState(),N.getLogger().trace("node end ...",B.yytext),"NODE_DEND";case 30:return this.popState(),N.getLogger().trace("node end (("),"NODE_DEND";case 31:return this.popState(),N.getLogger().trace("node end (-"),"NODE_DEND";case 32:return this.popState(),N.getLogger().trace("node end (-"),"NODE_DEND";case 33:return this.popState(),N.getLogger().trace("node end (("),"NODE_DEND";case 34:return this.popState(),N.getLogger().trace("node end (("),"NODE_DEND";case 35:return N.getLogger().trace("Long description:",B.yytext),20;case 36:return N.getLogger().trace("Long description:",B.yytext),20}},"anonymous"),rules:[/^(?:\s*%%.*)/i,/^(?:mindmap\b)/i,/^(?::::)/i,/^(?:.+)/i,/^(?:\n)/i,/^(?:::icon\()/i,/^(?:[\s]+[\n])/i,/^(?:[\n]+)/i,/^(?:[^\)]+)/i,/^(?:\))/i,/^(?:-\))/i,/^(?:\(-)/i,/^(?:\)\))/i,/^(?:\))/i,/^(?:\(\()/i,/^(?:\{\{)/i,/^(?:\()/i,/^(?:\[)/i,/^(?:[\s]+)/i,/^(?:[^\(\[\n\)\{\}]+)/i,/^(?:$)/i,/^(?:["][`])/i,/^(?:[^`"]+)/i,/^(?:[`]["])/i,/^(?:["])/i,/^(?:[^"]+)/i,/^(?:["])/i,/^(?:[\)]\))/i,/^(?:[\)])/i,/^(?:[\]])/i,/^(?:\}\})/i,/^(?:\(-)/i,/^(?:-\))/i,/^(?:\(\()/i,/^(?:\()/i,/^(?:[^\)\]\(\}]+)/i,/^(?:.+(?!\(\())/i],conditions:{CLASS:{rules:[3,4],inclusive:!1},ICON:{rules:[8,9],inclusive:!1},NSTR2:{rules:[22,23],inclusive:!1},NSTR:{rules:[25,26],inclusive:!1},NODE:{rules:[21,24,27,28,29,30,31,32,33,34,35,36],inclusive:!1},INITIAL:{rules:[0,1,2,5,6,7,10,11,12,13,14,15,16,17,18,19,20],inclusive:!0}}};return M}();w.lexer=C;function A(){this.yy={}}return k(A,"Parser"),A.prototype=w,w.Parser=A,new A}(),CP.parser=CP,Q9e=CP,Kc=[],Tee=0,SP={},J9e=k(()=>{Kc=[],Tee=0,SP={}},"clear"),eMe=k(function(e){for(let t=Kc.length-1;t>=0;t--)if(Kc[t].level<e)return Kc[t];return null},"getParent"),tMe=k(()=>Kc.length>0?Kc[0]:null,"getMindmap"),rMe=k((e,t,r,i)=>{Ce.info("addNode",e,t,r,i);let n=at(),a=n.mindmap?.padding??ka.mindmap.padding;switch(i){case Zo.ROUNDED_RECT:case Zo.RECT:case Zo.HEXAGON:a*=2}let s={id:Tee++,nodeId:Da(t,n),level:e,descr:Da(r,n),type:i,children:[],width:n.mindmap?.maxNodeWidth??ka.mindmap.maxNodeWidth,padding:a},u=eMe(e);if(u)u.children.push(s),Kc.push(s);else if(Kc.length===0)Kc.push(s);else throw new Error('There can be only one root. No parent could be found for ("'+s.descr+'")')},"addNode"),Zo={DEFAULT:0,NO_BORDER:0,ROUNDED_RECT:1,RECT:2,CIRCLE:3,CLOUD:4,BANG:5,HEXAGON:6},iMe=k((e,t)=>{switch(Ce.debug("In get type",e,t),e){case"[":return Zo.RECT;case"(":return t===")"?Zo.ROUNDED_RECT:Zo.CLOUD;case"((":return Zo.CIRCLE;case")":return Zo.CLOUD;case"))":return Zo.BANG;case"{{":return Zo.HEXAGON;default:return Zo.DEFAULT}},"getType"),nMe=k((e,t)=>{SP[e]=t},"setElementForId"),aMe=k(e=>{if(!e)return;let t=at(),r=Kc[Kc.length-1];e.icon&&(r.icon=Da(e.icon,t)),e.class&&(r.class=Da(e.class,t))},"decorateNode"),sMe=k(e=>{switch(e){case Zo.DEFAULT:return"no-border";case Zo.RECT:return"rect";case Zo.ROUNDED_RECT:return"rounded-rect";case Zo.CIRCLE:return"circle";case Zo.CLOUD:return"cloud";case Zo.BANG:return"bang";case Zo.HEXAGON:return"hexgon";default:return"no-border"}},"type2Str"),oMe=k(()=>Ce,"getLogger"),lMe=k(e=>SP[e],"getElementById"),uMe={clear:J9e,addNode:rMe,getMindmap:tMe,nodeType:Zo,getType:iMe,setElementForId:nMe,decorateNode:aMe,type2Str:sMe,getLogger:oMe,getElementById:lMe},hMe=uMe,cMe=12,dMe=k(function(e,t,r,i){t.append("path").attr("id","node-"+r.id).attr("class","node-bkg node-"+e.type2Str(r.type)).attr("d",`M0 ${r.height-5} v${-r.height+2*5} q0,-5 5,-5 h${r.width-2*5} q5,0 5,5 v${r.height-5} H0 Z`),t.append("line").attr("class","node-line-"+i).attr("x1",0).attr("y1",r.height).attr("x2",r.width).attr("y2",r.height)},"defaultBkg"),pMe=k(function(e,t,r){t.append("rect").attr("id","node-"+r.id).attr("class","node-bkg node-"+e.type2Str(r.type)).attr("height",r.height).attr("width",r.width)},"rectBkg"),fMe=k(function(e,t,r){let i=r.width,n=r.height,a=.15*i,s=.25*i,u=.35*i,h=.2*i;t.append("path").attr("id","node-"+r.id).attr("class","node-bkg node-"+e.type2Str(r.type)).attr("d",`M0 0 a${a},${a} 0 0,1 ${i*.25},${-1*i*.1}
      a${u},${u} 1 0,1 ${i*.4},${-1*i*.1}
      a${s},${s} 1 0,1 ${i*.35},${1*i*.2}

      a${a},${a} 1 0,1 ${i*.15},${1*n*.35}
      a${h},${h} 1 0,1 ${-1*i*.15},${1*n*.65}

      a${s},${a} 1 0,1 ${-1*i*.25},${i*.15}
      a${u},${u} 1 0,1 ${-1*i*.5},0
      a${a},${a} 1 0,1 ${-1*i*.25},${-1*i*.15}

      a${a},${a} 1 0,1 ${-1*i*.1},${-1*n*.35}
      a${h},${h} 1 0,1 ${i*.1},${-1*n*.65}

    H0 V0 Z`)},"cloudBkg"),gMe=k(function(e,t,r){let i=r.width,n=r.height,a=.15*i;t.append("path").attr("id","node-"+r.id).attr("class","node-bkg node-"+e.type2Str(r.type)).attr("d",`M0 0 a${a},${a} 1 0,0 ${i*.25},${-1*n*.1}
      a${a},${a} 1 0,0 ${i*.25},0
      a${a},${a} 1 0,0 ${i*.25},0
      a${a},${a} 1 0,0 ${i*.25},${1*n*.1}

      a${a},${a} 1 0,0 ${i*.15},${1*n*.33}
      a${a*.8},${a*.8} 1 0,0 0,${1*n*.34}
      a${a},${a} 1 0,0 ${-1*i*.15},${1*n*.33}

      a${a},${a} 1 0,0 ${-1*i*.25},${n*.15}
      a${a},${a} 1 0,0 ${-1*i*.25},0
      a${a},${a} 1 0,0 ${-1*i*.25},0
      a${a},${a} 1 0,0 ${-1*i*.25},${-1*n*.15}

      a${a},${a} 1 0,0 ${-1*i*.1},${-1*n*.33}
      a${a*.8},${a*.8} 1 0,0 0,${-1*n*.34}
      a${a},${a} 1 0,0 ${i*.1},${-1*n*.33}

    H0 V0 Z`)},"bangBkg"),mMe=k(function(e,t,r){t.append("circle").attr("id","node-"+r.id).attr("class","node-bkg node-"+e.type2Str(r.type)).attr("r",r.width/2)},"circleBkg"),k(Y9e,"insertPolygonShape"),yMe=k(function(e,t,r){let i=r.height,n=i/4,a=r.width-r.padding+2*n,s=[{x:n,y:0},{x:a-n,y:0},{x:a,y:-i/2},{x:a-n,y:-i},{x:n,y:-i},{x:0,y:-i/2}];Y9e(t,a,i,s,r)},"hexagonBkg"),vMe=k(function(e,t,r){t.append("rect").attr("id","node-"+r.id).attr("class","node-bkg node-"+e.type2Str(r.type)).attr("height",r.height).attr("rx",r.padding).attr("ry",r.padding).attr("width",r.width)},"roundedRectBkg"),xMe=k(async function(e,t,r,i,n){let a=n.htmlLabels,s=i%(cMe-1),u=t.append("g");r.section=s;let h="section-"+s;s<0&&(h+=" section-root"),u.attr("class",(r.class?r.class+" ":"")+"mindmap-node "+h);let d=u.append("g"),p=u.append("g"),g=r.descr.replace(/(<br\/*>)/g,`
`);await Kh(p,g,{useHtmlLabels:a,width:r.width,classes:"mindmap-node-label"},n),a||p.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle");let y=p.node().getBBox(),[m]=gf(n.fontSize);if(r.height=y.height+m*1.1*.5+r.padding,r.width=y.width+2*r.padding,r.icon)if(r.type===e.nodeType.CIRCLE)r.height+=50,r.width+=50,u.append("foreignObject").attr("height","50px").attr("width",r.width).attr("style","text-align: center;").append("div").attr("class","icon-container").append("i").attr("class","node-icon-"+s+" "+r.icon),p.attr("transform","translate("+r.width/2+", "+(r.height/2-1.5*r.padding)+")");else{r.width+=50;let x=r.height;r.height=Math.max(x,60);let _=Math.abs(r.height-x);u.append("foreignObject").attr("width","60px").attr("height",r.height).attr("style","text-align: center;margin-top:"+_/2+"px;").append("div").attr("class","icon-container").append("i").attr("class","node-icon-"+s+" "+r.icon),p.attr("transform","translate("+(25+r.width/2)+", "+(_/2+r.padding/2)+")")}else if(a){let x=(r.width-y.width)/2,_=(r.height-y.height)/2;p.attr("transform","translate("+x+", "+_+")")}else{let x=r.width/2,_=r.padding/2;p.attr("transform","translate("+x+", "+_+")")}switch(r.type){case e.nodeType.DEFAULT:dMe(e,d,r,s);break;case e.nodeType.ROUNDED_RECT:vMe(e,d,r,s);break;case e.nodeType.RECT:pMe(e,d,r,s);break;case e.nodeType.CIRCLE:d.attr("transform","translate("+r.width/2+", "+ +r.height/2+")"),mMe(e,d,r,s);break;case e.nodeType.CLOUD:fMe(e,d,r,s);break;case e.nodeType.BANG:gMe(e,d,r,s);break;case e.nodeType.HEXAGON:yMe(e,d,r,s);break}return e.setElementForId(r.id,u),r.height},"drawNode"),bMe=k(function(e,t){let r=e.getElementById(t.id),i=t.x||0,n=t.y||0;r.attr("transform","translate("+i+","+n+")")},"positionNode"),Qd.use(Z9e.default),k(wee,"drawNodes"),k(q9e,"drawEdges"),k(kee,"addNodes"),k(X9e,"layoutMindmap"),k(K9e,"positionNodes"),_Me=k(async(e,t,r,i)=>{Ce.debug(`Rendering mindmap diagram
`+e);let n=i.db,a=n.getMindmap();if(!a)return;let s=at();s.htmlLabels=!1;let u=kf(t),h=u.append("g");h.attr("class","mindmap-edges");let d=u.append("g");d.attr("class","mindmap-nodes"),await wee(n,d,a,-1,s);let p=await X9e(a,s);q9e(h,p),K9e(n,p),$p(void 0,u,s.mindmap?.padding??ka.mindmap.padding,s.mindmap?.useMaxWidth??ka.mindmap.useMaxWidth)},"draw"),wMe={draw:_Me},kMe=k(e=>{let t="";for(let r=0;r<e.THEME_COLOR_LIMIT;r++)e["lineColor"+r]=e["lineColor"+r]||e["cScaleInv"+r],Rs(e["lineColor"+r])?e["lineColor"+r]=Cr(e["lineColor"+r],20):e["lineColor"+r]=Fi(e["lineColor"+r],20);for(let r=0;r<e.THEME_COLOR_LIMIT;r++){let i=""+(17-3*r);t+=`
    .section-${r-1} rect, .section-${r-1} path, .section-${r-1} circle, .section-${r-1} polygon, .section-${r-1} path  {
      fill: ${e["cScale"+r]};
    }
    .section-${r-1} text {
     fill: ${e["cScaleLabel"+r]};
    }
    .node-icon-${r-1} {
      font-size: 40px;
      color: ${e["cScaleLabel"+r]};
    }
    .section-edge-${r-1}{
      stroke: ${e["cScale"+r]};
    }
    .edge-depth-${r-1}{
      stroke-width: ${i};
    }
    .section-${r-1} line {
      stroke: ${e["cScaleInv"+r]} ;
      stroke-width: 3;
    }

    .disabled, .disabled circle, .disabled text {
      fill: lightgray;
    }
    .disabled text {
      fill: #efefef;
    }
    `}return t},"genSections"),TMe=k(e=>`
  .edge {
    stroke-width: 3;
  }
  ${kMe(e)}
  .section-root rect, .section-root path, .section-root circle, .section-root polygon  {
    fill: ${e.git0};
  }
  .section-root text {
    fill: ${e.gitBranchLabel0};
  }
  .icon-container {
    height:100%;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .edge {
    fill: none;
  }
  .mindmap-node-label {
    dy: 1em;
    alignment-baseline: middle;
    text-anchor: middle;
    dominant-baseline: middle;
    text-align: center;
  }
`,"getStyles"),EMe=TMe,CMe={db:hMe,renderer:wMe,parser:Q9e,styles:EMe}}),SMe={};oi(SMe,{diagram:()=>WMe});var AP,AMe,pc,MP,LP,RP,MMe,LMe,Eee,RMe,DMe,Qo,IMe,NMe,OMe,BMe,PMe,FMe,$Me,zMe,GMe,UMe,jMe,HMe,VMe,WMe,yZe=D(()=>{k4(),B0(),Oh(),uh(),ch(),Os(),gm(),Qn(),Ge(),AP=function(){var e=k(function(O,L,$,G){for($=$||{},G=O.length;G--;$[O[G]]=L);return $},"o"),t=[1,4],r=[1,13],i=[1,12],n=[1,15],a=[1,16],s=[1,20],u=[1,19],h=[6,7,8],d=[1,26],p=[1,24],g=[1,25],y=[6,7,11],m=[1,31],x=[6,7,11,24],_=[1,6,13,16,17,20,23],E=[1,35],w=[1,36],C=[1,6,7,11,13,16,17,20,23],A=[1,38],M={trace:k(function(){},"trace"),yy:{},symbols_:{error:2,start:3,mindMap:4,spaceLines:5,SPACELINE:6,NL:7,KANBAN:8,document:9,stop:10,EOF:11,statement:12,SPACELIST:13,node:14,shapeData:15,ICON:16,CLASS:17,nodeWithId:18,nodeWithoutId:19,NODE_DSTART:20,NODE_DESCR:21,NODE_DEND:22,NODE_ID:23,SHAPE_DATA:24,$accept:0,$end:1},terminals_:{2:"error",6:"SPACELINE",7:"NL",8:"KANBAN",11:"EOF",13:"SPACELIST",16:"ICON",17:"CLASS",20:"NODE_DSTART",21:"NODE_DESCR",22:"NODE_DEND",23:"NODE_ID",24:"SHAPE_DATA"},productions_:[0,[3,1],[3,2],[5,1],[5,2],[5,2],[4,2],[4,3],[10,1],[10,1],[10,1],[10,2],[10,2],[9,3],[9,2],[12,3],[12,2],[12,2],[12,2],[12,1],[12,2],[12,1],[12,1],[12,1],[12,1],[14,1],[14,1],[19,3],[18,1],[18,4],[15,2],[15,1]],performAction:k(function(O,L,$,G,z,F,X){var I=F.length-1;switch(z){case 6:case 7:return G;case 8:G.getLogger().trace("Stop NL ");break;case 9:G.getLogger().trace("Stop EOF ");break;case 11:G.getLogger().trace("Stop NL2 ");break;case 12:G.getLogger().trace("Stop EOF2 ");break;case 15:G.getLogger().info("Node: ",F[I-1].id),G.addNode(F[I-2].length,F[I-1].id,F[I-1].descr,F[I-1].type,F[I]);break;case 16:G.getLogger().info("Node: ",F[I].id),G.addNode(F[I-1].length,F[I].id,F[I].descr,F[I].type);break;case 17:G.getLogger().trace("Icon: ",F[I]),G.decorateNode({icon:F[I]});break;case 18:case 23:G.decorateNode({class:F[I]});break;case 19:G.getLogger().trace("SPACELIST");break;case 20:G.getLogger().trace("Node: ",F[I-1].id),G.addNode(0,F[I-1].id,F[I-1].descr,F[I-1].type,F[I]);break;case 21:G.getLogger().trace("Node: ",F[I].id),G.addNode(0,F[I].id,F[I].descr,F[I].type);break;case 22:G.decorateNode({icon:F[I]});break;case 27:G.getLogger().trace("node found ..",F[I-2]),this.$={id:F[I-1],descr:F[I-1],type:G.getType(F[I-2],F[I])};break;case 28:this.$={id:F[I],descr:F[I],type:0};break;case 29:G.getLogger().trace("node found ..",F[I-3]),this.$={id:F[I-3],descr:F[I-1],type:G.getType(F[I-2],F[I])};break;case 30:this.$=F[I-1]+F[I];break;case 31:this.$=F[I];break}},"anonymous"),table:[{3:1,4:2,5:3,6:[1,5],8:t},{1:[3]},{1:[2,1]},{4:6,6:[1,7],7:[1,8],8:t},{6:r,7:[1,10],9:9,12:11,13:i,14:14,16:n,17:a,18:17,19:18,20:s,23:u},e(h,[2,3]),{1:[2,2]},e(h,[2,4]),e(h,[2,5]),{1:[2,6],6:r,12:21,13:i,14:14,16:n,17:a,18:17,19:18,20:s,23:u},{6:r,9:22,12:11,13:i,14:14,16:n,17:a,18:17,19:18,20:s,23:u},{6:d,7:p,10:23,11:g},e(y,[2,24],{18:17,19:18,14:27,16:[1,28],17:[1,29],20:s,23:u}),e(y,[2,19]),e(y,[2,21],{15:30,24:m}),e(y,[2,22]),e(y,[2,23]),e(x,[2,25]),e(x,[2,26]),e(x,[2,28],{20:[1,32]}),{21:[1,33]},{6:d,7:p,10:34,11:g},{1:[2,7],6:r,12:21,13:i,14:14,16:n,17:a,18:17,19:18,20:s,23:u},e(_,[2,14],{7:E,11:w}),e(C,[2,8]),e(C,[2,9]),e(C,[2,10]),e(y,[2,16],{15:37,24:m}),e(y,[2,17]),e(y,[2,18]),e(y,[2,20],{24:A}),e(x,[2,31]),{21:[1,39]},{22:[1,40]},e(_,[2,13],{7:E,11:w}),e(C,[2,11]),e(C,[2,12]),e(y,[2,15],{24:A}),e(x,[2,30]),{22:[1,41]},e(x,[2,27]),e(x,[2,29])],defaultActions:{2:[2,1],6:[2,2]},parseError:k(function(O,L){if(L.recoverable)this.trace(O);else{var $=new Error(O);throw $.hash=L,$}},"parseError"),parse:k(function(O){var L=this,$=[0],G=[],z=[null],F=[],X=this.table,I="",j=0,H=0,V=0,P=2,q=1,Z=F.slice.call(arguments,1),J=Object.create(this.lexer),ae={yy:{}};for(var ue in this.yy)Object.prototype.hasOwnProperty.call(this.yy,ue)&&(ae.yy[ue]=this.yy[ue]);J.setInput(O,ae.yy),ae.yy.lexer=J,ae.yy.parser=this,typeof J.yylloc>"u"&&(J.yylloc={});var be=J.yylloc;F.push(be);var Le=J.options&&J.options.ranges;typeof ae.yy.parseError=="function"?this.parseError=ae.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function xe(er){$.length=$.length-2*er,z.length=z.length-er,F.length=F.length-er}k(xe,"popStack");function Ae(){var er;return er=G.pop()||J.lex()||q,typeof er!="number"&&(er instanceof Array&&(G=er,er=G.pop()),er=L.symbols_[er]||er),er}k(Ae,"lex");for(var oe,he,le,ke,pe,qe,me={},st,we,Et,wt;;){if(le=$[$.length-1],this.defaultActions[le]?ke=this.defaultActions[le]:((oe===null||typeof oe>"u")&&(oe=Ae()),ke=X[le]&&X[le][oe]),typeof ke>"u"||!ke.length||!ke[0]){var Tt="";wt=[];for(st in X[le])this.terminals_[st]&&st>P&&wt.push("'"+this.terminals_[st]+"'");J.showPosition?Tt="Parse error on line "+(j+1)+`:
`+J.showPosition()+`
Expecting `+wt.join(", ")+", got '"+(this.terminals_[oe]||oe)+"'":Tt="Parse error on line "+(j+1)+": Unexpected "+(oe==q?"end of input":"'"+(this.terminals_[oe]||oe)+"'"),this.parseError(Tt,{text:J.match,token:this.terminals_[oe]||oe,line:J.yylineno,loc:be,expected:wt})}if(ke[0]instanceof Array&&ke.length>1)throw new Error("Parse Error: multiple actions possible at state: "+le+", token: "+oe);switch(ke[0]){case 1:$.push(oe),z.push(J.yytext),F.push(J.yylloc),$.push(ke[1]),oe=null,he?(oe=he,he=null):(H=J.yyleng,I=J.yytext,j=J.yylineno,be=J.yylloc,V>0&&V--);break;case 2:if(we=this.productions_[ke[1]][1],me.$=z[z.length-we],me._$={first_line:F[F.length-(we||1)].first_line,last_line:F[F.length-1].last_line,first_column:F[F.length-(we||1)].first_column,last_column:F[F.length-1].last_column},Le&&(me._$.range=[F[F.length-(we||1)].range[0],F[F.length-1].range[1]]),qe=this.performAction.apply(me,[I,H,j,ae.yy,ke[1],z,F].concat(Z)),typeof qe<"u")return qe;we&&($=$.slice(0,-1*we*2),z=z.slice(0,-1*we),F=F.slice(0,-1*we)),$.push(this.productions_[ke[1]][0]),z.push(me.$),F.push(me._$),Et=X[$[$.length-2]][$[$.length-1]],$.push(Et);break;case 3:return!0}}return!0},"parse")},N=function(){var O={EOF:1,parseError:k(function(L,$){if(this.yy.parser)this.yy.parser.parseError(L,$);else throw new Error(L)},"parseError"),setInput:k(function(L,$){return this.yy=$||this.yy||{},this._input=L,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:k(function(){var L=this._input[0];this.yytext+=L,this.yyleng++,this.offset++,this.match+=L,this.matched+=L;var $=L.match(/(?:\r\n?|\n).*/g);return $?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),L},"input"),unput:k(function(L){var $=L.length,G=L.split(/(?:\r\n?|\n)/g);this._input=L+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-$),this.offset-=$;var z=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),G.length-1&&(this.yylineno-=G.length-1);var F=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:G?(G.length===z.length?this.yylloc.first_column:0)+z[z.length-G.length].length-G[0].length:this.yylloc.first_column-$},this.options.ranges&&(this.yylloc.range=[F[0],F[0]+this.yyleng-$]),this.yyleng=this.yytext.length,this},"unput"),more:k(function(){return this._more=!0,this},"more"),reject:k(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:k(function(L){this.unput(this.match.slice(L))},"less"),pastInput:k(function(){var L=this.matched.substr(0,this.matched.length-this.match.length);return(L.length>20?"...":"")+L.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:k(function(){var L=this.match;return L.length<20&&(L+=this._input.substr(0,20-L.length)),(L.substr(0,20)+(L.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:k(function(){var L=this.pastInput(),$=new Array(L.length+1).join("-");return L+this.upcomingInput()+`
`+$+"^"},"showPosition"),test_match:k(function(L,$){var G,z,F;if(this.options.backtrack_lexer&&(F={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(F.yylloc.range=this.yylloc.range.slice(0))),z=L[0].match(/(?:\r\n?|\n).*/g),z&&(this.yylineno+=z.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:z?z[z.length-1].length-z[z.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+L[0].length},this.yytext+=L[0],this.match+=L[0],this.matches=L,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(L[0].length),this.matched+=L[0],G=this.performAction.call(this,this.yy,this,$,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),G)return G;if(this._backtrack){for(var X in F)this[X]=F[X];return!1}return!1},"test_match"),next:k(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var L,$,G,z;this._more||(this.yytext="",this.match="");for(var F=this._currentRules(),X=0;X<F.length;X++)if(G=this._input.match(this.rules[F[X]]),G&&(!$||G[0].length>$[0].length)){if($=G,z=X,this.options.backtrack_lexer){if(L=this.test_match(G,F[X]),L!==!1)return L;if(this._backtrack){$=!1;continue}else return!1}else if(!this.options.flex)break}return $?(L=this.test_match($,F[z]),L!==!1?L:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:k(function(){var L=this.next();return L||this.lex()},"lex"),begin:k(function(L){this.conditionStack.push(L)},"begin"),popState:k(function(){var L=this.conditionStack.length-1;return L>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:k(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:k(function(L){return L=this.conditionStack.length-1-Math.abs(L||0),L>=0?this.conditionStack[L]:"INITIAL"},"topState"),pushState:k(function(L){this.begin(L)},"pushState"),stateStackSize:k(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:k(function(L,$,G,z){var F=z;switch(G){case 0:return this.pushState("shapeData"),$.yytext="",24;case 1:return this.pushState("shapeDataStr"),24;case 2:return this.popState(),24;case 3:let X=/\n\s*/g;return $.yytext=$.yytext.replace(X,"<br/>"),24;case 4:return 24;case 5:this.popState();break;case 6:return L.getLogger().trace("Found comment",$.yytext),6;case 7:return 8;case 8:this.begin("CLASS");break;case 9:return this.popState(),17;case 10:this.popState();break;case 11:L.getLogger().trace("Begin icon"),this.begin("ICON");break;case 12:return L.getLogger().trace("SPACELINE"),6;case 13:return 7;case 14:return 16;case 15:L.getLogger().trace("end icon"),this.popState();break;case 16:return L.getLogger().trace("Exploding node"),this.begin("NODE"),20;case 17:return L.getLogger().trace("Cloud"),this.begin("NODE"),20;case 18:return L.getLogger().trace("Explosion Bang"),this.begin("NODE"),20;case 19:return L.getLogger().trace("Cloud Bang"),this.begin("NODE"),20;case 20:return this.begin("NODE"),20;case 21:return this.begin("NODE"),20;case 22:return this.begin("NODE"),20;case 23:return this.begin("NODE"),20;case 24:return 13;case 25:return 23;case 26:return 11;case 27:this.begin("NSTR2");break;case 28:return"NODE_DESCR";case 29:this.popState();break;case 30:L.getLogger().trace("Starting NSTR"),this.begin("NSTR");break;case 31:return L.getLogger().trace("description:",$.yytext),"NODE_DESCR";case 32:this.popState();break;case 33:return this.popState(),L.getLogger().trace("node end ))"),"NODE_DEND";case 34:return this.popState(),L.getLogger().trace("node end )"),"NODE_DEND";case 35:return this.popState(),L.getLogger().trace("node end ...",$.yytext),"NODE_DEND";case 36:return this.popState(),L.getLogger().trace("node end (("),"NODE_DEND";case 37:return this.popState(),L.getLogger().trace("node end (-"),"NODE_DEND";case 38:return this.popState(),L.getLogger().trace("node end (-"),"NODE_DEND";case 39:return this.popState(),L.getLogger().trace("node end (("),"NODE_DEND";case 40:return this.popState(),L.getLogger().trace("node end (("),"NODE_DEND";case 41:return L.getLogger().trace("Long description:",$.yytext),21;case 42:return L.getLogger().trace("Long description:",$.yytext),21}},"anonymous"),rules:[/^(?:@\{)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^\"]+)/i,/^(?:[^}^"]+)/i,/^(?:\})/i,/^(?:\s*%%.*)/i,/^(?:kanban\b)/i,/^(?::::)/i,/^(?:.+)/i,/^(?:\n)/i,/^(?:::icon\()/i,/^(?:[\s]+[\n])/i,/^(?:[\n]+)/i,/^(?:[^\)]+)/i,/^(?:\))/i,/^(?:-\))/i,/^(?:\(-)/i,/^(?:\)\))/i,/^(?:\))/i,/^(?:\(\()/i,/^(?:\{\{)/i,/^(?:\()/i,/^(?:\[)/i,/^(?:[\s]+)/i,/^(?:[^\(\[\n\)\{\}@]+)/i,/^(?:$)/i,/^(?:["][`])/i,/^(?:[^`"]+)/i,/^(?:[`]["])/i,/^(?:["])/i,/^(?:[^"]+)/i,/^(?:["])/i,/^(?:[\)]\))/i,/^(?:[\)])/i,/^(?:[\]])/i,/^(?:\}\})/i,/^(?:\(-)/i,/^(?:-\))/i,/^(?:\(\()/i,/^(?:\()/i,/^(?:[^\)\]\(\}]+)/i,/^(?:.+(?!\(\())/i],conditions:{shapeDataEndBracket:{rules:[],inclusive:!1},shapeDataStr:{rules:[2,3],inclusive:!1},shapeData:{rules:[1,4,5],inclusive:!1},CLASS:{rules:[9,10],inclusive:!1},ICON:{rules:[14,15],inclusive:!1},NSTR2:{rules:[28,29],inclusive:!1},NSTR:{rules:[31,32],inclusive:!1},NODE:{rules:[27,30,33,34,35,36,37,38,39,40,41,42],inclusive:!1},INITIAL:{rules:[0,6,7,8,11,12,13,16,17,18,19,20,21,22,23,24,25,26],inclusive:!0}}};return O}();M.lexer=N;function B(){this.yy={}}return k(B,"Parser"),B.prototype=M,M.Parser=B,new B}(),AP.parser=AP,AMe=AP,pc=[],MP=[],LP=0,RP={},MMe=k(()=>{pc=[],MP=[],LP=0,RP={}},"clear"),LMe=k(e=>{if(pc.length===0)return null;let t=pc[0].level,r=null;for(let i=pc.length-1;i>=0;i--)if(pc[i].level===t&&!r&&(r=pc[i]),pc[i].level<t)throw new Error('Items without section detected, found section ("'+pc[i].label+'")');return e===r?.level?null:r},"getSection"),Eee=k(function(){return MP},"getSections"),RMe=k(function(){let e=[],t=[],r=Eee(),i=at();for(let n of r){let a={id:n.id,label:Da(n.label??"",i),isGroup:!0,ticket:n.ticket,shape:"kanbanSection",level:n.level,look:i.look};t.push(a);let s=pc.filter(u=>u.parentId===n.id);for(let u of s){let h={id:u.id,parentId:n.id,label:Da(u.label??"",i),isGroup:!1,ticket:u?.ticket,priority:u?.priority,assigned:u?.assigned,icon:u?.icon,shape:"kanbanItem",level:u.level,rx:5,ry:5,cssStyles:["text-align: left"]};t.push(h)}}return{nodes:t,edges:e,other:{},config:at()}},"getData"),DMe=k((e,t,r,i,n)=>{let a=at(),s=a.mindmap?.padding??ka.mindmap.padding;switch(i){case Qo.ROUNDED_RECT:case Qo.RECT:case Qo.HEXAGON:s*=2}let u={id:Da(t,a)||"kbn"+LP++,level:e,label:Da(r,a),width:a.mindmap?.maxNodeWidth??ka.mindmap.maxNodeWidth,padding:s,isGroup:!1};if(n!==void 0){let d;n.includes(`
`)?d=n+`
`:d=`{
`+n+`
}`;let p=w4(d,{schema:_4});if(p.shape&&(p.shape!==p.shape.toLowerCase()||p.shape.includes("_")))throw new Error(`No such shape: ${p.shape}. Shape names should be lowercase.`);p?.shape&&p.shape==="kanbanItem"&&(u.shape=p?.shape),p?.label&&(u.label=p?.label),p?.icon&&(u.icon=p?.icon.toString()),p?.assigned&&(u.assigned=p?.assigned.toString()),p?.ticket&&(u.ticket=p?.ticket.toString()),p?.priority&&(u.priority=p?.priority)}let h=LMe(e);h?u.parentId=h.id||"kbn"+LP++:MP.push(u),pc.push(u)},"addNode"),Qo={DEFAULT:0,NO_BORDER:0,ROUNDED_RECT:1,RECT:2,CIRCLE:3,CLOUD:4,BANG:5,HEXAGON:6},IMe=k((e,t)=>{switch(Ce.debug("In get type",e,t),e){case"[":return Qo.RECT;case"(":return t===")"?Qo.ROUNDED_RECT:Qo.CLOUD;case"((":return Qo.CIRCLE;case")":return Qo.CLOUD;case"))":return Qo.BANG;case"{{":return Qo.HEXAGON;default:return Qo.DEFAULT}},"getType"),NMe=k((e,t)=>{RP[e]=t},"setElementForId"),OMe=k(e=>{if(!e)return;let t=at(),r=pc[pc.length-1];e.icon&&(r.icon=Da(e.icon,t)),e.class&&(r.cssClasses=Da(e.class,t))},"decorateNode"),BMe=k(e=>{switch(e){case Qo.DEFAULT:return"no-border";case Qo.RECT:return"rect";case Qo.ROUNDED_RECT:return"rounded-rect";case Qo.CIRCLE:return"circle";case Qo.CLOUD:return"cloud";case Qo.BANG:return"bang";case Qo.HEXAGON:return"hexgon";default:return"no-border"}},"type2Str"),PMe=k(()=>Ce,"getLogger"),FMe=k(e=>RP[e],"getElementById"),$Me={clear:MMe,addNode:DMe,getSections:Eee,getData:RMe,nodeType:Qo,getType:IMe,setElementForId:NMe,decorateNode:OMe,type2Str:BMe,getLogger:PMe,getElementById:FMe},zMe=$Me,GMe=k(async(e,t,r,i)=>{Ce.debug(`Rendering kanban diagram
`+e);let n=i.db.getData(),a=at();a.htmlLabels=!1;let s=kf(t),u=s.append("g");u.attr("class","sections");let h=s.append("g");h.attr("class","items");let d=n.nodes.filter(_=>_.isGroup),p=0,g=10,y=[],m=25;for(let _ of d){let E=a?.kanban?.sectionWidth||200;p=p+1,_.x=E*p+(p-1)*g/2,_.width=E,_.y=0,_.height=E*3,_.rx=5,_.ry=5,_.cssClasses=_.cssClasses+" section-"+p;let w=await OD(u,_);m=Math.max(m,w?.labelBBox?.height),y.push(w)}let x=0;for(let _ of d){let E=y[x];x=x+1;let w=a?.kanban?.sectionWidth||200,C=-w*3/2+m,A=C,M=n.nodes.filter(O=>O.parentId===_.id);for(let O of M){if(O.isGroup)throw new Error("Groups within groups are not allowed in Kanban diagrams");O.x=_.x,O.width=w-1.5*g;let L=(await ID(h,O,{config:a})).node().getBBox();O.y=A+L.height/2,await BD(O),A=O.y+L.height/2+g/2}let N=E.cluster.select("rect"),B=Math.max(A-C+3*g,50)+(m-25);N.attr("height",B)}$p(void 0,s,a.mindmap?.padding??ka.kanban.padding,a.mindmap?.useMaxWidth??ka.kanban.useMaxWidth)},"draw"),UMe={draw:GMe},jMe=k(e=>{let t="";for(let i=0;i<e.THEME_COLOR_LIMIT;i++)e["lineColor"+i]=e["lineColor"+i]||e["cScaleInv"+i],Rs(e["lineColor"+i])?e["lineColor"+i]=Cr(e["lineColor"+i],20):e["lineColor"+i]=Fi(e["lineColor"+i],20);let r=k((i,n)=>e.darkMode?Fi(i,n):Cr(i,n),"adjuster");for(let i=0;i<e.THEME_COLOR_LIMIT;i++){let n=""+(17-3*i);t+=`
    .section-${i-1} rect, .section-${i-1} path, .section-${i-1} circle, .section-${i-1} polygon, .section-${i-1} path  {
      fill: ${r(e["cScale"+i],10)};
      stroke: ${r(e["cScale"+i],10)};

    }
    .section-${i-1} text {
     fill: ${e["cScaleLabel"+i]};
    }
    .node-icon-${i-1} {
      font-size: 40px;
      color: ${e["cScaleLabel"+i]};
    }
    .section-edge-${i-1}{
      stroke: ${e["cScale"+i]};
    }
    .edge-depth-${i-1}{
      stroke-width: ${n};
    }
    .section-${i-1} line {
      stroke: ${e["cScaleInv"+i]} ;
      stroke-width: 3;
    }

    .disabled, .disabled circle, .disabled text {
      fill: lightgray;
    }
    .disabled text {
      fill: #efefef;
    }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${e.background};
    stroke: ${e.nodeBorder};
    stroke-width: 1px;
  }

  .kanban-ticket-link {
    fill: ${e.background};
    stroke: ${e.nodeBorder};
    text-decoration: underline;
  }
    `}return t},"genSections"),HMe=k(e=>`
  .edge {
    stroke-width: 3;
  }
  ${jMe(e)}
  .section-root rect, .section-root path, .section-root circle, .section-root polygon  {
    fill: ${e.git0};
  }
  .section-root text {
    fill: ${e.gitBranchLabel0};
  }
  .icon-container {
    height:100%;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .edge {
    fill: none;
  }
  .cluster-label, .label {
    color: ${e.textColor};
    fill: ${e.textColor};
    }
  .kanban-label {
    dy: 1em;
    alignment-baseline: middle;
    text-anchor: middle;
    dominant-baseline: middle;
    text-align: center;
  }
`,"getStyles"),VMe=HMe,WMe={db:zMe,renderer:UMe,parser:AMe,styles:VMe}});function YMe(e,t){let r;if(t===void 0)for(let i of e)i!=null&&(r<i||r===void 0&&i>=i)&&(r=i);else{let i=-1;for(let n of e)(n=t(n,++i,e))!=null&&(r<n||r===void 0&&n>=n)&&(r=n)}return r}var vZe=D(()=>{});function qMe(e,t){let r;if(t===void 0)for(let i of e)i!=null&&(r>i||r===void 0&&i>=i)&&(r=i);else{let i=-1;for(let n of e)(n=t(n,++i,e))!=null&&(r>n||r===void 0&&n>=n)&&(r=n)}return r}var xZe=D(()=>{});function Cee(e,t){let r=0;if(t===void 0)for(let i of e)(i=+i)&&(r+=i);else{let i=-1;for(let n of e)(n=+t(n,++i,e))&&(r+=n)}return r}var bZe=D(()=>{}),XMe=D(()=>{vZe(),xZe(),bZe()});function _Ze(e){return e.target.depth}function wZe(e){return e.depth}function kZe(e,t){return t-1-e.height}function KMe(e,t){return e.sourceLinks.length?e.depth:t-1}function TZe(e){return e.targetLinks.length?e.depth:e.sourceLinks.length?qMe(e.sourceLinks,_Ze)-1:0}var ZMe=D(()=>{XMe()});function DP(e){return function(){return e}}var EZe=D(()=>{});function QMe(e,t){return IP(e.source,t.source)||e.index-t.index}function JMe(e,t){return IP(e.target,t.target)||e.index-t.index}function IP(e,t){return e.y0-t.y0}function See(e){return e.value}function CZe(e){return e.index}function SZe(e){return e.nodes}function AZe(e){return e.links}function eLe(e,t){let r=e.get(t);if(!r)throw new Error("missing: "+t);return r}function tLe({nodes:e}){for(let t of e){let r=t.y0,i=r;for(let n of t.sourceLinks)n.y0=r+n.width/2,r+=n.width;for(let n of t.targetLinks)n.y1=i+n.width/2,i+=n.width}}function MZe(){let e=0,t=0,r=1,i=1,n=24,a=8,s,u=CZe,h=KMe,d,p,g=SZe,y=AZe,m=6;function x(){let j={nodes:g.apply(null,arguments),links:y.apply(null,arguments)};return _(j),E(j),w(j),C(j),N(j),tLe(j),j}x.update=function(j){return tLe(j),j},x.nodeId=function(j){return arguments.length?(u=typeof j=="function"?j:DP(j),x):u},x.nodeAlign=function(j){return arguments.length?(h=typeof j=="function"?j:DP(j),x):h},x.nodeSort=function(j){return arguments.length?(d=j,x):d},x.nodeWidth=function(j){return arguments.length?(n=+j,x):n},x.nodePadding=function(j){return arguments.length?(a=s=+j,x):a},x.nodes=function(j){return arguments.length?(g=typeof j=="function"?j:DP(j),x):g},x.links=function(j){return arguments.length?(y=typeof j=="function"?j:DP(j),x):y},x.linkSort=function(j){return arguments.length?(p=j,x):p},x.size=function(j){return arguments.length?(e=t=0,r=+j[0],i=+j[1],x):[r-e,i-t]},x.extent=function(j){return arguments.length?(e=+j[0][0],r=+j[1][0],t=+j[0][1],i=+j[1][1],x):[[e,t],[r,i]]},x.iterations=function(j){return arguments.length?(m=+j,x):m};function _({nodes:j,links:H}){for(let[P,q]of j.entries())q.index=P,q.sourceLinks=[],q.targetLinks=[];let V=new Map(j.map((P,q)=>[u(P,q,j),P]));for(let[P,q]of H.entries()){q.index=P;let{source:Z,target:J}=q;typeof Z!="object"&&(Z=q.source=eLe(V,Z)),typeof J!="object"&&(J=q.target=eLe(V,J)),Z.sourceLinks.push(q),J.targetLinks.push(q)}if(p!=null)for(let{sourceLinks:P,targetLinks:q}of j)P.sort(p),q.sort(p)}function E({nodes:j}){for(let H of j)H.value=H.fixedValue===void 0?Math.max(Cee(H.sourceLinks,See),Cee(H.targetLinks,See)):H.fixedValue}function w({nodes:j}){let H=j.length,V=new Set(j),P=new Set,q=0;for(;V.size;){for(let Z of V){Z.depth=q;for(let{target:J}of Z.sourceLinks)P.add(J)}if(++q>H)throw new Error("circular link");V=P,P=new Set}}function C({nodes:j}){let H=j.length,V=new Set(j),P=new Set,q=0;for(;V.size;){for(let Z of V){Z.height=q;for(let{source:J}of Z.targetLinks)P.add(J)}if(++q>H)throw new Error("circular link");V=P,P=new Set}}function A({nodes:j}){let H=YMe(j,q=>q.depth)+1,V=(r-e-n)/(H-1),P=new Array(H);for(let q of j){let Z=Math.max(0,Math.min(H-1,Math.floor(h.call(null,q,H))));q.layer=Z,q.x0=e+Z*V,q.x1=q.x0+n,P[Z]?P[Z].push(q):P[Z]=[q]}if(d)for(let q of P)q.sort(d);return P}function M(j){let H=qMe(j,V=>(i-t-(V.length-1)*s)/Cee(V,See));for(let V of j){let P=t;for(let q of V){q.y0=P,q.y1=P+q.value*H,P=q.y1+s;for(let Z of q.sourceLinks)Z.width=Z.value*H}P=(i-P+s)/(V.length+1);for(let q=0;q<V.length;++q){let Z=V[q];Z.y0+=P*(q+1),Z.y1+=P*(q+1)}F(V)}}function N(j){let H=A(j);s=Math.min(a,(i-t)/(YMe(H,V=>V.length)-1)),M(H);for(let V=0;V<m;++V){let P=Math.pow(.99,V),q=Math.max(1-P,(V+1)/m);O(H,P,q),B(H,P,q)}}function B(j,H,V){for(let P=1,q=j.length;P<q;++P){let Z=j[P];for(let J of Z){let ae=0,ue=0;for(let{source:Le,value:xe}of J.targetLinks){let Ae=xe*(J.layer-Le.layer);ae+=X(Le,J)*Ae,ue+=Ae}if(!(ue>0))continue;let be=(ae/ue-J.y0)*H;J.y0+=be,J.y1+=be,z(J)}d===void 0&&Z.sort(IP),L(Z,V)}}function O(j,H,V){for(let P=j.length,q=P-2;q>=0;--q){let Z=j[q];for(let J of Z){let ae=0,ue=0;for(let{target:Le,value:xe}of J.sourceLinks){let Ae=xe*(Le.layer-J.layer);ae+=I(J,Le)*Ae,ue+=Ae}if(!(ue>0))continue;let be=(ae/ue-J.y0)*H;J.y0+=be,J.y1+=be,z(J)}d===void 0&&Z.sort(IP),L(Z,V)}}function L(j,H){let V=j.length>>1,P=j[V];G(j,P.y0-s,V-1,H),$(j,P.y1+s,V+1,H),G(j,i,j.length-1,H),$(j,t,0,H)}function $(j,H,V,P){for(;V<j.length;++V){let q=j[V],Z=(H-q.y0)*P;Z>1e-6&&(q.y0+=Z,q.y1+=Z),H=q.y1+s}}function G(j,H,V,P){for(;V>=0;--V){let q=j[V],Z=(q.y1-H)*P;Z>1e-6&&(q.y0-=Z,q.y1-=Z),H=q.y0-s}}function z({sourceLinks:j,targetLinks:H}){if(p===void 0){for(let{source:{sourceLinks:V}}of H)V.sort(JMe);for(let{target:{targetLinks:V}}of j)V.sort(QMe)}}function F(j){if(p===void 0)for(let{sourceLinks:H,targetLinks:V}of j)H.sort(JMe),V.sort(QMe)}function X(j,H){let V=j.y0-(j.sourceLinks.length-1)*s/2;for(let{target:P,width:q}of j.sourceLinks){if(P===H)break;V+=q+s}for(let{source:P,width:q}of H.targetLinks){if(P===j)break;V-=q}return V}function I(j,H){let V=H.y0-(H.targetLinks.length-1)*s/2;for(let{source:P,width:q}of H.targetLinks){if(P===j)break;V+=q+s}for(let{target:P,width:q}of j.sourceLinks){if(P===H)break;V-=q}return V}return x}var LZe=D(()=>{XMe(),ZMe(),EZe()});function Aee(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function rLe(){return new Aee}var NP,OP,ey,iLe,nLe,RZe=D(()=>{NP=Math.PI,OP=2*NP,ey=1e-6,iLe=OP-ey,Aee.prototype=rLe.prototype={constructor:Aee,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,r,i){this._+="Q"+ +e+","+ +t+","+(this._x1=+r)+","+(this._y1=+i)},bezierCurveTo:function(e,t,r,i,n,a){this._+="C"+ +e+","+ +t+","+ +r+","+ +i+","+(this._x1=+n)+","+(this._y1=+a)},arcTo:function(e,t,r,i,n){e=+e,t=+t,r=+r,i=+i,n=+n;var a=this._x1,s=this._y1,u=r-e,h=i-t,d=a-e,p=s-t,g=d*d+p*p;if(n<0)throw new Error("negative radius: "+n);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(g>ey)if(!(Math.abs(p*u-h*d)>ey)||!n)this._+="L"+(this._x1=e)+","+(this._y1=t);else{var y=r-a,m=i-s,x=u*u+h*h,_=y*y+m*m,E=Math.sqrt(x),w=Math.sqrt(g),C=n*Math.tan((NP-Math.acos((x+g-_)/(2*E*w)))/2),A=C/w,M=C/E;Math.abs(A-1)>ey&&(this._+="L"+(e+A*d)+","+(t+A*p)),this._+="A"+n+","+n+",0,0,"+ +(p*y>d*m)+","+(this._x1=e+M*u)+","+(this._y1=t+M*h)}},arc:function(e,t,r,i,n,a){e=+e,t=+t,r=+r,a=!!a;var s=r*Math.cos(i),u=r*Math.sin(i),h=e+s,d=t+u,p=1^a,g=a?i-n:n-i;if(r<0)throw new Error("negative radius: "+r);this._x1===null?this._+="M"+h+","+d:(Math.abs(this._x1-h)>ey||Math.abs(this._y1-d)>ey)&&(this._+="L"+h+","+d),r&&(g<0&&(g=g%OP+OP),g>iLe?this._+="A"+r+","+r+",0,1,"+p+","+(e-s)+","+(t-u)+"A"+r+","+r+",0,1,"+p+","+(this._x1=h)+","+(this._y1=d):g>ey&&(this._+="A"+r+","+r+",0,"+ +(g>=NP)+","+p+","+(this._x1=e+r*Math.cos(n))+","+(this._y1=t+r*Math.sin(n))))},rect:function(e,t,r,i){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +r+"v"+ +i+"h"+-r+"Z"},toString:function(){return this._}},nLe=rLe}),DZe=D(()=>{RZe()});function aLe(e){return function(){return e}}var IZe=D(()=>{});function NZe(e){return e[0]}function OZe(e){return e[1]}var BZe=D(()=>{}),sLe,PZe=D(()=>{sLe=Array.prototype.slice});function FZe(e){return e.source}function $Ze(e){return e.target}function zZe(e){var t=FZe,r=$Ze,i=NZe,n=OZe,a=null;function s(){var u,h=sLe.call(arguments),d=t.apply(this,h),p=r.apply(this,h);if(a||(a=u=nLe()),e(a,+i.apply(this,(h[0]=d,h)),+n.apply(this,h),+i.apply(this,(h[0]=p,h)),+n.apply(this,h)),u)return a=null,u+""||null}return s.source=function(u){return arguments.length?(t=u,s):t},s.target=function(u){return arguments.length?(r=u,s):r},s.x=function(u){return arguments.length?(i=typeof u=="function"?u:aLe(+u),s):i},s.y=function(u){return arguments.length?(n=typeof u=="function"?u:aLe(+u),s):n},s.context=function(u){return arguments.length?(a=u??null,s):a},s}function GZe(e,t,r,i,n){e.moveTo(t,r),e.bezierCurveTo(t=(t+i)/2,r,t,n,i,n)}function UZe(){return zZe(GZe)}var jZe=D(()=>{DZe(),PZe(),IZe(),BZe()}),HZe=D(()=>{jZe()});function VZe(e){return[e.source.x1,e.y0]}function WZe(e){return[e.target.x0,e.y1]}function YZe(){return UZe().source(VZe).target(WZe)}var qZe=D(()=>{HZe()}),XZe=D(()=>{LZe(),ZMe(),qZe()}),oLe={};oi(oLe,{diagram:()=>wLe});var BP,N8,O8,B8,P8,lLe,uLe,hLe,cLe,dLe,pLe,fLe,gLe,mLe,Mee,yLe,vLe,xLe,bLe,_Le,wLe,KZe=D(()=>{Qn(),ha(),XZe(),BP=function(){var e=k(function(u,h,d,p){for(d=d||{},p=u.length;p--;d[u[p]]=h);return d},"o"),t=[1,9],r=[1,10],i=[1,5,10,12],n={trace:k(function(){},"trace"),yy:{},symbols_:{error:2,start:3,SANKEY:4,NEWLINE:5,csv:6,opt_eof:7,record:8,csv_tail:9,EOF:10,"field[source]":11,COMMA:12,"field[target]":13,"field[value]":14,field:15,escaped:16,non_escaped:17,DQUOTE:18,ESCAPED_TEXT:19,NON_ESCAPED_TEXT:20,$accept:0,$end:1},terminals_:{2:"error",4:"SANKEY",5:"NEWLINE",10:"EOF",11:"field[source]",12:"COMMA",13:"field[target]",14:"field[value]",18:"DQUOTE",19:"ESCAPED_TEXT",20:"NON_ESCAPED_TEXT"},productions_:[0,[3,4],[6,2],[9,2],[9,0],[7,1],[7,0],[8,5],[15,1],[15,1],[16,3],[17,1]],performAction:k(function(u,h,d,p,g,y,m){var x=y.length-1;switch(g){case 7:let _=p.findOrCreateNode(y[x-4].trim().replaceAll('""','"')),E=p.findOrCreateNode(y[x-2].trim().replaceAll('""','"')),w=parseFloat(y[x].trim());p.addLink(_,E,w);break;case 8:case 9:case 11:this.$=y[x];break;case 10:this.$=y[x-1];break}},"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},{5:[1,3]},{6:4,8:5,15:6,16:7,17:8,18:t,20:r},{1:[2,6],7:11,10:[1,12]},e(r,[2,4],{9:13,5:[1,14]}),{12:[1,15]},e(i,[2,8]),e(i,[2,9]),{19:[1,16]},e(i,[2,11]),{1:[2,1]},{1:[2,5]},e(r,[2,2]),{6:17,8:5,15:6,16:7,17:8,18:t,20:r},{15:18,16:7,17:8,18:t,20:r},{18:[1,19]},e(r,[2,3]),{12:[1,20]},e(i,[2,10]),{15:21,16:7,17:8,18:t,20:r},e([1,5,10],[2,7])],defaultActions:{11:[2,1],12:[2,5]},parseError:k(function(u,h){if(h.recoverable)this.trace(u);else{var d=new Error(u);throw d.hash=h,d}},"parseError"),parse:k(function(u){var h=this,d=[0],p=[],g=[null],y=[],m=this.table,x="",_=0,E=0,w=0,C=2,A=1,M=y.slice.call(arguments,1),N=Object.create(this.lexer),B={yy:{}};for(var O in this.yy)Object.prototype.hasOwnProperty.call(this.yy,O)&&(B.yy[O]=this.yy[O]);N.setInput(u,B.yy),B.yy.lexer=N,B.yy.parser=this,typeof N.yylloc>"u"&&(N.yylloc={});var L=N.yylloc;y.push(L);var $=N.options&&N.options.ranges;typeof B.yy.parseError=="function"?this.parseError=B.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function G(be){d.length=d.length-2*be,g.length=g.length-be,y.length=y.length-be}k(G,"popStack");function z(){var be;return be=p.pop()||N.lex()||A,typeof be!="number"&&(be instanceof Array&&(p=be,be=p.pop()),be=h.symbols_[be]||be),be}k(z,"lex");for(var F,X,I,j,H,V,P={},q,Z,J,ae;;){if(I=d[d.length-1],this.defaultActions[I]?j=this.defaultActions[I]:((F===null||typeof F>"u")&&(F=z()),j=m[I]&&m[I][F]),typeof j>"u"||!j.length||!j[0]){var ue="";ae=[];for(q in m[I])this.terminals_[q]&&q>C&&ae.push("'"+this.terminals_[q]+"'");N.showPosition?ue="Parse error on line "+(_+1)+`:
`+N.showPosition()+`
Expecting `+ae.join(", ")+", got '"+(this.terminals_[F]||F)+"'":ue="Parse error on line "+(_+1)+": Unexpected "+(F==A?"end of input":"'"+(this.terminals_[F]||F)+"'"),this.parseError(ue,{text:N.match,token:this.terminals_[F]||F,line:N.yylineno,loc:L,expected:ae})}if(j[0]instanceof Array&&j.length>1)throw new Error("Parse Error: multiple actions possible at state: "+I+", token: "+F);switch(j[0]){case 1:d.push(F),g.push(N.yytext),y.push(N.yylloc),d.push(j[1]),F=null,X?(F=X,X=null):(E=N.yyleng,x=N.yytext,_=N.yylineno,L=N.yylloc,w>0&&w--);break;case 2:if(Z=this.productions_[j[1]][1],P.$=g[g.length-Z],P._$={first_line:y[y.length-(Z||1)].first_line,last_line:y[y.length-1].last_line,first_column:y[y.length-(Z||1)].first_column,last_column:y[y.length-1].last_column},$&&(P._$.range=[y[y.length-(Z||1)].range[0],y[y.length-1].range[1]]),V=this.performAction.apply(P,[x,E,_,B.yy,j[1],g,y].concat(M)),typeof V<"u")return V;Z&&(d=d.slice(0,-1*Z*2),g=g.slice(0,-1*Z),y=y.slice(0,-1*Z)),d.push(this.productions_[j[1]][0]),g.push(P.$),y.push(P._$),J=m[d[d.length-2]][d[d.length-1]],d.push(J);break;case 3:return!0}}return!0},"parse")},a=function(){var u={EOF:1,parseError:k(function(h,d){if(this.yy.parser)this.yy.parser.parseError(h,d);else throw new Error(h)},"parseError"),setInput:k(function(h,d){return this.yy=d||this.yy||{},this._input=h,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:k(function(){var h=this._input[0];this.yytext+=h,this.yyleng++,this.offset++,this.match+=h,this.matched+=h;var d=h.match(/(?:\r\n?|\n).*/g);return d?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),h},"input"),unput:k(function(h){var d=h.length,p=h.split(/(?:\r\n?|\n)/g);this._input=h+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-d),this.offset-=d;var g=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),p.length-1&&(this.yylineno-=p.length-1);var y=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:p?(p.length===g.length?this.yylloc.first_column:0)+g[g.length-p.length].length-p[0].length:this.yylloc.first_column-d},this.options.ranges&&(this.yylloc.range=[y[0],y[0]+this.yyleng-d]),this.yyleng=this.yytext.length,this},"unput"),more:k(function(){return this._more=!0,this},"more"),reject:k(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:k(function(h){this.unput(this.match.slice(h))},"less"),pastInput:k(function(){var h=this.matched.substr(0,this.matched.length-this.match.length);return(h.length>20?"...":"")+h.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:k(function(){var h=this.match;return h.length<20&&(h+=this._input.substr(0,20-h.length)),(h.substr(0,20)+(h.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:k(function(){var h=this.pastInput(),d=new Array(h.length+1).join("-");return h+this.upcomingInput()+`
`+d+"^"},"showPosition"),test_match:k(function(h,d){var p,g,y;if(this.options.backtrack_lexer&&(y={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(y.yylloc.range=this.yylloc.range.slice(0))),g=h[0].match(/(?:\r\n?|\n).*/g),g&&(this.yylineno+=g.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:g?g[g.length-1].length-g[g.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+h[0].length},this.yytext+=h[0],this.match+=h[0],this.matches=h,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(h[0].length),this.matched+=h[0],p=this.performAction.call(this,this.yy,this,d,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),p)return p;if(this._backtrack){for(var m in y)this[m]=y[m];return!1}return!1},"test_match"),next:k(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var h,d,p,g;this._more||(this.yytext="",this.match="");for(var y=this._currentRules(),m=0;m<y.length;m++)if(p=this._input.match(this.rules[y[m]]),p&&(!d||p[0].length>d[0].length)){if(d=p,g=m,this.options.backtrack_lexer){if(h=this.test_match(p,y[m]),h!==!1)return h;if(this._backtrack){d=!1;continue}else return!1}else if(!this.options.flex)break}return d?(h=this.test_match(d,y[g]),h!==!1?h:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:k(function(){var h=this.next();return h||this.lex()},"lex"),begin:k(function(h){this.conditionStack.push(h)},"begin"),popState:k(function(){var h=this.conditionStack.length-1;return h>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:k(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:k(function(h){return h=this.conditionStack.length-1-Math.abs(h||0),h>=0?this.conditionStack[h]:"INITIAL"},"topState"),pushState:k(function(h){this.begin(h)},"pushState"),stateStackSize:k(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:k(function(h,d,p,g){var y=g;switch(p){case 0:return this.pushState("csv"),4;case 1:return 10;case 2:return 5;case 3:return 12;case 4:return this.pushState("escaped_text"),18;case 5:return 20;case 6:return this.popState("escaped_text"),18;case 7:return 19}},"anonymous"),rules:[/^(?:sankey-beta\b)/i,/^(?:$)/i,/^(?:((\u000D\u000A)|(\u000A)))/i,/^(?:(\u002C))/i,/^(?:(\u0022))/i,/^(?:([\u0020-\u0021\u0023-\u002B\u002D-\u007E])*)/i,/^(?:(\u0022)(?!(\u0022)))/i,/^(?:(([\u0020-\u0021\u0023-\u002B\u002D-\u007E])|(\u002C)|(\u000D)|(\u000A)|(\u0022)(\u0022))*)/i],conditions:{csv:{rules:[1,2,3,4,5,6,7],inclusive:!1},escaped_text:{rules:[6,7],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7],inclusive:!0}}};return u}();n.lexer=a;function s(){this.yy={}}return k(s,"Parser"),s.prototype=n,n.Parser=s,new s}(),BP.parser=BP,N8=BP,O8=[],B8=[],P8=new Map,lLe=k(()=>{O8=[],B8=[],P8=new Map,ho()},"clear"),uLe=class{constructor(e,t,r=0){this.source=e,this.target=t,this.value=r}static{k(this,"SankeyLink")}},hLe=k((e,t,r)=>{O8.push(new uLe(e,t,r))},"addLink"),cLe=class{constructor(e){this.ID=e}static{k(this,"SankeyNode")}},dLe=k(e=>{e=zr.sanitizeText(e,at());let t=P8.get(e);return t===void 0&&(t=new cLe(e),P8.set(e,t),B8.push(t)),t},"findOrCreateNode"),pLe=k(()=>B8,"getNodes"),fLe=k(()=>O8,"getLinks"),gLe=k(()=>({nodes:B8.map(e=>({id:e.ID})),links:O8.map(e=>({source:e.source.ID,target:e.target.ID,value:e.value}))}),"getGraph"),mLe={nodesMap:P8,getConfig:k(()=>at().sankey,"getConfig"),getNodes:pLe,getLinks:fLe,getGraph:gLe,addLink:hLe,findOrCreateNode:dLe,getAccTitle:Bo,setAccTitle:Ks,getAccDescription:Po,setAccDescription:_o,getDiagramTitle:$o,setDiagramTitle:Fo,clear:lLe},Mee=class Ate{static{k(this,"Uid")}static{this.count=0}static next(t){return new Ate(t+ ++Ate.count)}constructor(t){this.id=t,this.href=`#${t}`}toString(){return"url("+this.href+")"}},yLe={left:wZe,right:kZe,center:TZe,justify:KMe},vLe=k(function(e,t,r,i){let{securityLevel:n,sankey:a}=at(),s=Y6.sankey,u;n==="sandbox"&&(u=Nr("#i"+t));let h=Nr(n==="sandbox"?u.nodes()[0].contentDocument.body:"body"),d=n==="sandbox"?h.select(`[id="${t}"]`):Nr(`[id="${t}"]`),p=a?.width??s.width,g=a?.height??s.width,y=a?.useMaxWidth??s.useMaxWidth,m=a?.nodeAlignment??s.nodeAlignment,x=a?.prefix??s.prefix,_=a?.suffix??s.suffix,E=a?.showValues??s.showValues,w=i.db.getGraph(),C=yLe[m];MZe().nodeId(L=>L.id).nodeWidth(10).nodePadding(10+(E?15:0)).nodeAlign(C).extent([[0,0],[p,g]])(w);let A=H3(Tr);d.append("g").attr("class","nodes").selectAll(".node").data(w.nodes).join("g").attr("class","node").attr("id",L=>(L.uid=Mee.next("node-")).id).attr("transform",function(L){return"translate("+L.x0+","+L.y0+")"}).attr("x",L=>L.x0).attr("y",L=>L.y0).append("rect").attr("height",L=>L.y1-L.y0).attr("width",L=>L.x1-L.x0).attr("fill",L=>A(L.id));let M=k(({id:L,value:$})=>E?`${L}
${x}${Math.round($*100)/100}${_}`:L,"getText");d.append("g").attr("class","node-labels").attr("font-family","sans-serif").attr("font-size",14).selectAll("text").data(w.nodes).join("text").attr("x",L=>L.x0<p/2?L.x1+6:L.x0-6).attr("y",L=>(L.y1+L.y0)/2).attr("dy",`${E?"0":"0.35"}em`).attr("text-anchor",L=>L.x0<p/2?"start":"end").text(M);let N=d.append("g").attr("class","links").attr("fill","none").attr("stroke-opacity",.5).selectAll(".link").data(w.links).join("g").attr("class","link").style("mix-blend-mode","multiply"),B=a?.linkColor??"gradient";if(B==="gradient"){let L=N.append("linearGradient").attr("id",$=>($.uid=Mee.next("linearGradient-")).id).attr("gradientUnits","userSpaceOnUse").attr("x1",$=>$.source.x1).attr("x2",$=>$.target.x0);L.append("stop").attr("offset","0%").attr("stop-color",$=>A($.source.id)),L.append("stop").attr("offset","100%").attr("stop-color",$=>A($.target.id))}let O;switch(B){case"gradient":O=k(L=>L.uid,"coloring");break;case"source":O=k(L=>A(L.source.id),"coloring");break;case"target":O=k(L=>A(L.target.id),"coloring");break;default:O=B}N.append("path").attr("d",YZe()).attr("stroke",O).attr("stroke-width",L=>Math.max(1,L.width)),$p(void 0,d,0,y)},"draw"),xLe={draw:vLe},bLe=k(e=>e.replaceAll(/^[^\S\n\r]+|[^\S\n\r]+$/g,"").replaceAll(/([\n\r])+/g,`
`).trim(),"prepareTextForParsing"),_Le=N8.parse.bind(N8),N8.parse=e=>_Le(bLe(e)),wLe={parser:N8,db:mLe,renderer:xLe}}),kLe={};oi(kLe,{diagram:()=>FLe});var Lee,PP,TLe,ELe,CLe,SLe,ALe,Ax,MLe,LLe,RLe,DLe,ILe,NLe,OLe,BLe,PLe,FLe,ZZe=D(()=>{BI(),Os(),gm(),Qn(),mS(),Lee={packet:[]},PP=structuredClone(Lee),TLe=ka.packet,ELe=k(()=>{let e=ff({...TLe,...cs().packet});return e.showBits&&(e.paddingY+=10),e},"getConfig"),CLe=k(()=>PP.packet,"getPacket"),SLe=k(e=>{e.length>0&&PP.packet.push(e)},"pushWord"),ALe=k(()=>{ho(),PP=structuredClone(Lee)},"clear"),Ax={pushWord:SLe,getPacket:CLe,getConfig:ELe,clear:ALe,setAccTitle:Ks,getAccTitle:Bo,setDiagramTitle:Fo,getDiagramTitle:$o,getAccDescription:Po,setAccDescription:_o},MLe=1e4,LLe=k(e=>{b7(e,Ax);let t=-1,r=[],i=1,{bitsPerRow:n}=Ax.getConfig();for(let{start:a,end:s,label:u}of e.blocks){if(s&&s<a)throw new Error(`Packet block ${a} - ${s} is invalid. End must be greater than start.`);if(a!==t+1)throw new Error(`Packet block ${a} - ${s??a} is not contiguous. It should start from ${t+1}.`);for(t=s??a,Ce.debug(`Packet block ${a} - ${t} with label ${u}`);r.length<=n+1&&Ax.getPacket().length<MLe;){let[h,d]=RLe({start:a,end:s,label:u},i,n);if(r.push(h),h.end+1===i*n&&(Ax.pushWord(r),r=[],i++),!d)break;({start:a,end:s,label:u}=d)}}Ax.pushWord(r)},"populate"),RLe=k((e,t,r)=>{if(e.end===void 0&&(e.end=e.start),e.start>e.end)throw new Error(`Block start ${e.start} is greater than block end ${e.end}.`);return e.end+1<=t*r?[e,void 0]:[{start:e.start,end:t*r-1,label:e.label},{start:t*r,end:e.end,label:e.label}]},"getNextFittingBlock"),DLe={parse:k(async e=>{let t=await d5("packet",e);Ce.debug(t),LLe(t)},"parse")},ILe=k((e,t,r,i)=>{let n=i.db,a=n.getConfig(),{rowHeight:s,paddingY:u,bitWidth:h,bitsPerRow:d}=a,p=n.getPacket(),g=n.getDiagramTitle(),y=s+u,m=y*(p.length+1)-(g?0:s),x=h*d+2,_=kf(t);_.attr("viewbox",`0 0 ${x} ${m}`),Oo(_,m,x,a.useMaxWidth);for(let[E,w]of p.entries())NLe(_,w,E,a);_.append("text").text(g).attr("x",x/2).attr("y",m-y/2).attr("dominant-baseline","middle").attr("text-anchor","middle").attr("class","packetTitle")},"draw"),NLe=k((e,t,r,{rowHeight:i,paddingX:n,paddingY:a,bitWidth:s,bitsPerRow:u,showBits:h})=>{let d=e.append("g"),p=r*(i+a)+a;for(let g of t){let y=g.start%u*s+1,m=(g.end-g.start+1)*s-n;if(d.append("rect").attr("x",y).attr("y",p).attr("width",m).attr("height",i).attr("class","packetBlock"),d.append("text").attr("x",y+m/2).attr("y",p+i/2).attr("class","packetLabel").attr("dominant-baseline","middle").attr("text-anchor","middle").text(g.label),!h)continue;let x=g.end===g.start,_=p-2;d.append("text").attr("x",y+(x?m/2:0)).attr("y",_).attr("class","packetByte start").attr("dominant-baseline","auto").attr("text-anchor",x?"middle":"start").text(g.start),x||d.append("text").attr("x",y+m).attr("y",_).attr("class","packetByte end").attr("dominant-baseline","auto").attr("text-anchor","end").text(g.end)}},"drawWord"),OLe={draw:ILe},BLe={byteFontSize:"10px",startByteColor:"black",endByteColor:"black",labelColor:"black",labelFontSize:"12px",titleColor:"black",titleFontSize:"14px",blockStrokeColor:"black",blockStrokeWidth:"1",blockFillColor:"#efefef"},PLe=k(({packet:e}={})=>{let t=ff(BLe,e);return`
	.packetByte {
		font-size: ${t.byteFontSize};
	}
	.packetByte.start {
		fill: ${t.startByteColor};
	}
	.packetByte.end {
		fill: ${t.endByteColor};
	}
	.packetLabel {
		fill: ${t.labelColor};
		font-size: ${t.labelFontSize};
	}
	.packetTitle {
		fill: ${t.titleColor};
		font-size: ${t.titleFontSize};
	}
	.packetBlock {
		stroke: ${t.blockStrokeColor};
		stroke-width: ${t.blockStrokeWidth};
		fill: ${t.blockFillColor};
	}
	`},"styles"),FLe={parser:DLe,db:Ax,renderer:OLe,styles:PLe}}),$Le={};oi($Le,{diagram:()=>CDe});function zLe(e){switch(Ce.debug("typeStr2Type",e),e){case"[]":return"square";case"()":return Ce.debug("we have a round"),"round";case"(())":return"circle";case">]":return"rect_left_inv_arrow";case"{}":return"diamond";case"{{}}":return"hexagon";case"([])":return"stadium";case"[[]]":return"subroutine";case"[()]":return"cylinder";case"((()))":return"doublecircle";case"[//]":return"lean_right";case"[\\\\]":return"lean_left";case"[/\\]":return"trapezoid";case"[\\/]":return"inv_trapezoid";case"<[]>":return"block_arrow";default:return"na"}}function GLe(e){switch(Ce.debug("typeStr2Type",e),e){case"==":return"thick";default:return"normal"}}function ULe(e){switch(e.trim()){case"--x":return"arrow_cross";case"--o":return"arrow_circle";default:return"arrow_point"}}function jLe(e,t){if(e===0||!Number.isInteger(e))throw new Error("Columns must be an integer !== 0.");if(t<0||!Number.isInteger(t))throw new Error("Position must be a non-negative integer."+t);if(e<0)return{px:t,py:0};if(e===1)return{px:0,py:t};let r=t%e,i=Math.floor(t/e);return{px:r,py:i}}function FP(e,t,r=0,i=0){Ce.debug("setBlockSizes abc95 (start)",e.id,e?.size?.x,"block width =",e?.size,"sieblingWidth",r),e?.size?.width||(e.size={width:r,height:i,x:0,y:0});let n=0,a=0;if(e.children?.length>0){for(let m of e.children)FP(m,t);let s=BRe(e);n=s.width,a=s.height,Ce.debug("setBlockSizes abc95 maxWidth of",e.id,":s children is ",n,a);for(let m of e.children)m.size&&(Ce.debug(`abc95 Setting size of children of ${e.id} id=${m.id} ${n} ${a} ${JSON.stringify(m.size)}`),m.size.width=n*(m.widthInColumns??1)+yo*((m.widthInColumns??1)-1),m.size.height=a,m.size.x=0,m.size.y=0,Ce.debug(`abc95 updating size of ${e.id} children child:${m.id} maxWidth:${n} maxHeight:${a}`));for(let m of e.children)FP(m,t,n,a);let u=e.columns??-1,h=0;for(let m of e.children)h+=m.widthInColumns??1;let d=e.children.length;u>0&&u<h&&(d=u);let p=Math.ceil(h/d),g=d*(n+yo)+yo,y=p*(a+yo)+yo;if(g<r){Ce.debug(`Detected to small siebling: abc95 ${e.id} sieblingWidth ${r} sieblingHeight ${i} width ${g}`),g=r,y=i;let m=(r-d*yo-yo)/d,x=(i-p*yo-yo)/p;Ce.debug("Size indata abc88",e.id,"childWidth",m,"maxWidth",n),Ce.debug("Size indata abc88",e.id,"childHeight",x,"maxHeight",a),Ce.debug("Size indata abc88 xSize",d,"padding",yo);for(let _ of e.children)_.size&&(_.size.width=m,_.size.height=x,_.size.x=0,_.size.y=0)}if(Ce.debug(`abc95 (finale calc) ${e.id} xSize ${d} ySize ${p} columns ${u}${e.children.length} width=${Math.max(g,e.size?.width||0)}`),g<(e?.size?.width||0)){g=e?.size?.width||0;let m=u>0?Math.min(e.children.length,u):e.children.length;if(m>0){let x=(g-m*yo-yo)/m;Ce.debug("abc95 (growing to fit) width",e.id,g,e.size?.width,x);for(let _ of e.children)_.size&&(_.size.width=x)}}e.size={width:g,height:y,x:0,y:0}}Ce.debug("setBlockSizes abc94 (done)",e.id,e?.size?.x,e?.size?.width,e?.size?.y,e?.size?.height)}function Ree(e,t){Ce.debug(`abc85 layout blocks (=>layoutBlocks) ${e.id} x: ${e?.size?.x} y: ${e?.size?.y} width: ${e?.size?.width}`);let r=e.columns??-1;if(Ce.debug("layoutBlocks columns abc95",e.id,"=>",r,e),e.children&&e.children.length>0){let i=e?.children[0]?.size?.width??0,n=e.children.length*i+(e.children.length-1)*yo;Ce.debug("widthOfChildren 88",n,"posX");let a=0;Ce.debug("abc91 block?.size?.x",e.id,e?.size?.x);let s=e?.size?.x?e?.size?.x+(-e?.size?.width/2||0):-yo,u=0;for(let h of e.children){let d=e;if(!h.size)continue;let{width:p,height:g}=h.size,{px:y,py:m}=jLe(r,a);if(m!=u&&(u=m,s=e?.size?.x?e?.size?.x+(-e?.size?.width/2||0):-yo,Ce.debug("New row in layout for block",e.id," and child ",h.id,u)),Ce.debug(`abc89 layout blocks (child) id: ${h.id} Pos: ${a} (px, py) ${y},${m} (${d?.size?.x},${d?.size?.y}) parent: ${d.id} width: ${p}${yo}`),d.size){let x=p/2;h.size.x=s+yo+x,Ce.debug(`abc91 layout blocks (calc) px, pyid:${h.id} startingPos=X${s} new startingPosX${h.size.x} ${x} padding=${yo} width=${p} halfWidth=${x} => x:${h.size.x} y:${h.size.y} ${h.widthInColumns} (width * (child?.w || 1)) / 2 ${p*(h?.widthInColumns??1)/2}`),s=h.size.x+x,h.size.y=d.size.y-d.size.height/2+m*(g+yo)+g/2+yo,Ce.debug(`abc88 layout blocks (calc) px, pyid:${h.id}startingPosX${s}${yo}${x}=>x:${h.size.x}y:${h.size.y}${h.widthInColumns}(width * (child?.w || 1)) / 2${p*(h?.widthInColumns??1)/2}`)}h.children&&Ree(h,t),a+=h?.widthInColumns??1,Ce.debug("abc88 columnsPos",h,a)}}Ce.debug(`layout blocks (<==layoutBlocks) ${e.id} x: ${e?.size?.x} y: ${e?.size?.y} width: ${e?.size?.width}`)}function Dee(e,{minX:t,minY:r,maxX:i,maxY:n}={minX:0,minY:0,maxX:0,maxY:0}){if(e.size&&e.id!=="root"){let{x:a,y:s,width:u,height:h}=e.size;a-u/2<t&&(t=a-u/2),s-h/2<r&&(r=s-h/2),a+u/2>i&&(i=a+u/2),s+h/2>n&&(n=s+h/2)}if(e.children)for(let a of e.children)({minX:t,minY:r,maxX:i,maxY:n}=Dee(a,{minX:t,minY:r,maxX:i,maxY:n}));return{minX:t,minY:r,maxX:i,maxY:n}}function HLe(e){let t=e.getBlock("root");if(!t)return;FP(t,e,0,0),Ree(t,e),Ce.debug("getBlocks",JSON.stringify(t,null,2));let{minX:r,minY:i,maxX:n,maxY:a}=Dee(t),s=a-i,u=n-r;return{x:r,y:i,width:u,height:s}}function Iee(e,t){t&&e.attr("style",t)}function VLe(e){let t=Nr(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),r=t.append("xhtml:div"),i=e.label,n=e.isNode?"nodeLabel":"edgeLabel",a=r.append("span");return a.html(i),Iee(a,e.labelStyle),a.attr("class",n),Iee(r,e.labelStyle),r.style("display","inline-block"),r.style("white-space","nowrap"),r.attr("xmlns","http://www.w3.org/1999/xhtml"),t.node()}function F8(e,t){at().flowchart.htmlLabels&&e&&(e.style.width=t.length*9+"px",e.style.height="12px")}function WLe(e,t){return e.intersect(t)}function YLe(e,t,r,i){var n=e.x,a=e.y,s=n-i.x,u=a-i.y,h=Math.sqrt(t*t*u*u+r*r*s*s),d=Math.abs(t*r*s/h);i.x<n&&(d=-d);var p=Math.abs(t*r*u/h);return i.y<a&&(p=-p),{x:n+d,y:a+p}}function qLe(e,t,r){return jee(e,t,t,r)}function XLe(e,t,r,i){var n,a,s,u,h,d,p,g,y,m,x,_,E,w,C;if(n=t.y-e.y,s=e.x-t.x,h=t.x*e.y-e.x*t.y,y=n*r.x+s*r.y+h,m=n*i.x+s*i.y+h,!(y!==0&&m!==0&&Nee(y,m))&&(a=i.y-r.y,u=r.x-i.x,d=i.x*r.y-r.x*i.y,p=a*e.x+u*e.y+d,g=a*t.x+u*t.y+d,!(p!==0&&g!==0&&Nee(p,g))&&(x=n*u-a*s,x!==0)))return _=Math.abs(x/2),E=s*d-u*h,w=E<0?(E-_)/x:(E+_)/x,E=a*h-n*d,C=E<0?(E-_)/x:(E+_)/x,{x:w,y:C}}function Nee(e,t){return e*t>0}function KLe(e,t,r){var i=e.x,n=e.y,a=[],s=Number.POSITIVE_INFINITY,u=Number.POSITIVE_INFINITY;typeof t.forEach=="function"?t.forEach(function(x){s=Math.min(s,x.x),u=Math.min(u,x.y)}):(s=Math.min(s,t.x),u=Math.min(u,t.y));for(var h=i-e.width/2-s,d=n-e.height/2-u,p=0;p<t.length;p++){var g=t[p],y=t[p<t.length-1?p+1:0],m=XRe(e,r,{x:h+g.x,y:d+g.y},{x:h+y.x,y:d+y.y});m&&a.push(m)}return a.length?(a.length>1&&a.sort(function(x,_){var E=x.x-r.x,w=x.y-r.y,C=Math.sqrt(E*E+w*w),A=_.x-r.x,M=_.y-r.y,N=Math.sqrt(A*A+M*M);return C<N?-1:C===N?0:1}),a[0]):e}function Jd(e,t,r,i){return e.insert("polygon",":first-child").attr("points",i.map(function(n){return n.x+","+n.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-t/2+","+r/2+")")}function $P(e,t,r,i){let n=[],a=k(u=>{n.push(u,0)},"addBorder"),s=k(u=>{n.push(0,u)},"skipBorder");t.includes("t")?(Ce.debug("add top border"),a(r)):s(r),t.includes("r")?(Ce.debug("add right border"),a(i)):s(i),t.includes("b")?(Ce.debug("add bottom border"),a(r)):s(r),t.includes("l")?(Ce.debug("add left border"),a(i)):s(i),e.attr("stroke-dasharray",n.join(" "))}function Oee(e,t,r=!1){let i=e,n="default";(i?.classes?.length||0)>0&&(n=(i?.classes??[]).join(" ")),n=n+" flowchart-label";let a=0,s="",u;switch(i.type){case"round":a=5,s="rect";break;case"composite":a=0,s="composite",u=0;break;case"square":s="rect";break;case"diamond":s="question";break;case"hexagon":s="hexagon";break;case"block_arrow":s="block_arrow";break;case"odd":s="rect_left_inv_arrow";break;case"lean_right":s="lean_right";break;case"lean_left":s="lean_left";break;case"trapezoid":s="trapezoid";break;case"inv_trapezoid":s="inv_trapezoid";break;case"rect_left_inv_arrow":s="rect_left_inv_arrow";break;case"circle":s="circle";break;case"ellipse":s="ellipse";break;case"stadium":s="stadium";break;case"subroutine":s="subroutine";break;case"cylinder":s="cylinder";break;case"group":s="rect";break;case"doublecircle":s="doublecircle";break;default:s="rect"}let h=nj(i?.styles??[]),d=i.label,p=i.size??{width:0,height:0,x:0,y:0};return{labelStyle:h.labelStyle,shape:s,labelText:d,rx:a,ry:a,class:n,style:h.style,id:i.id,directions:i.directions,width:p.width,height:p.height,x:p.x,y:p.y,positioned:r,intersect:void 0,type:i.type,padding:u??cs()?.block?.padding??0}}async function ZLe(e,t,r){let i=Oee(t,r,!1);if(i.type==="group")return;let n=cs(),a=await qee(e,i,{config:n}),s=a.node().getBBox(),u=r.getBlock(i.id);u.size={width:s.width,height:s.height,x:0,y:0,node:a},r.setBlock(u),a.remove()}async function QLe(e,t,r){let i=Oee(t,r,!0);if(r.getBlock(i.id).type!=="space"){let n=cs();await qee(e,i,{config:n}),t.intersect=i?.intersect,wDe(i)}}async function zP(e,t,r,i){for(let n of t)await i(e,n,r),n.children&&await zP(e,n.children,r,i)}async function JLe(e,t,r){await zP(e,t,r,ZLe)}async function eRe(e,t,r){await zP(e,t,r,QLe)}async function tRe(e,t,r,i,n){let a=new Vl({multigraph:!0,compound:!0});a.setGraph({rankdir:"TB",nodesep:10,ranksep:10,marginx:8,marginy:8});for(let s of r)s.size&&a.setNode(s.id,{width:s.size.width,height:s.size.height,intersect:s.intersect});for(let s of t)if(s.start&&s.end){let u=i.getBlock(s.start),h=i.getBlock(s.end);if(u?.size&&h?.size){let d=u.size,p=h.size,g=[{x:d.x,y:d.y},{x:d.x+(p.x-d.x)/2,y:d.y+(p.y-d.y)/2},{x:p.x,y:p.y}];HRe(e,{v:s.start,w:s.end,name:s.id},{...s,arrowTypeEnd:s.arrowTypeEnd,arrowTypeStart:s.arrowTypeStart,points:g,classes:"edge-thickness-normal edge-pattern-solid flowchart-link LS-a1 LE-b1"},void 0,"block",a,n),s.label&&(await zRe(e,{...s,label:s.label,labelStyle:"stroke: #333; stroke-width: 1.5px;fill:none;",arrowTypeEnd:s.arrowTypeEnd,arrowTypeStart:s.arrowTypeStart,points:g,classes:"edge-thickness-normal edge-pattern-solid flowchart-link LS-a1 LE-b1"}),GRe({...s,x:g[1].x,y:g[1].y},{originalPath:g}))}}}var GP,rRe,Zc,UP,jP,Bee,Pee,iRe,Fee,nRe,$8,aRe,sRe,oRe,lRe,$ee,HP,mw,uRe,zee,hRe,cRe,dRe,pRe,fRe,gRe,mRe,yRe,vRe,xRe,bRe,_Re,z8,wRe,kRe,TRe,ERe,CRe,SRe,ARe,MRe,LRe,RRe,DRe,IRe,NRe,ORe,yo,BRe,PRe,fc,FRe,$Re,Gee,VP,Zl,zRe,GRe,URe,jRe,Uee,HRe,VRe,WRe,YRe,jee,qRe,XRe,KRe,ZRe,QRe,Fs,hl,so,JRe,eDe,Hee,wh,Vee,tDe,rDe,iDe,nDe,aDe,sDe,oDe,lDe,uDe,hDe,cDe,dDe,pDe,fDe,gDe,mDe,yDe,vDe,xDe,Wee,bDe,_De,Yee,G8,qee,wDe,kDe,TDe,EDe,CDe,QZe=D(()=>{xf(),uh(),ch(),Os(),Qn(),Oce(),Ge(),ha(),Qh(),ha(),ha(),ha(),ha(),GP=function(){var e=k(function(A,M,N,B){for(N=N||{},B=A.length;B--;N[A[B]]=M);return N},"o"),t=[1,7],r=[1,13],i=[1,14],n=[1,15],a=[1,19],s=[1,16],u=[1,17],h=[1,18],d=[8,30],p=[8,21,28,29,30,31,32,40,44,47],g=[1,23],y=[1,24],m=[8,15,16,21,28,29,30,31,32,40,44,47],x=[8,15,16,21,27,28,29,30,31,32,40,44,47],_=[1,49],E={trace:k(function(){},"trace"),yy:{},symbols_:{error:2,spaceLines:3,SPACELINE:4,NL:5,separator:6,SPACE:7,EOF:8,start:9,BLOCK_DIAGRAM_KEY:10,document:11,stop:12,statement:13,link:14,LINK:15,START_LINK:16,LINK_LABEL:17,STR:18,nodeStatement:19,columnsStatement:20,SPACE_BLOCK:21,blockStatement:22,classDefStatement:23,cssClassStatement:24,styleStatement:25,node:26,SIZE:27,COLUMNS:28,"id-block":29,end:30,block:31,NODE_ID:32,nodeShapeNLabel:33,dirList:34,DIR:35,NODE_DSTART:36,NODE_DEND:37,BLOCK_ARROW_START:38,BLOCK_ARROW_END:39,classDef:40,CLASSDEF_ID:41,CLASSDEF_STYLEOPTS:42,DEFAULT:43,class:44,CLASSENTITY_IDS:45,STYLECLASS:46,style:47,STYLE_ENTITY_IDS:48,STYLE_DEFINITION_DATA:49,$accept:0,$end:1},terminals_:{2:"error",4:"SPACELINE",5:"NL",7:"SPACE",8:"EOF",10:"BLOCK_DIAGRAM_KEY",15:"LINK",16:"START_LINK",17:"LINK_LABEL",18:"STR",21:"SPACE_BLOCK",27:"SIZE",28:"COLUMNS",29:"id-block",30:"end",31:"block",32:"NODE_ID",35:"DIR",36:"NODE_DSTART",37:"NODE_DEND",38:"BLOCK_ARROW_START",39:"BLOCK_ARROW_END",40:"classDef",41:"CLASSDEF_ID",42:"CLASSDEF_STYLEOPTS",43:"DEFAULT",44:"class",45:"CLASSENTITY_IDS",46:"STYLECLASS",47:"style",48:"STYLE_ENTITY_IDS",49:"STYLE_DEFINITION_DATA"},productions_:[0,[3,1],[3,2],[3,2],[6,1],[6,1],[6,1],[9,3],[12,1],[12,1],[12,2],[12,2],[11,1],[11,2],[14,1],[14,4],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[19,3],[19,2],[19,1],[20,1],[22,4],[22,3],[26,1],[26,2],[34,1],[34,2],[33,3],[33,4],[23,3],[23,3],[24,3],[25,3]],performAction:k(function(A,M,N,B,O,L,$){var G=L.length-1;switch(O){case 4:B.getLogger().debug("Rule: separator (NL) ");break;case 5:B.getLogger().debug("Rule: separator (Space) ");break;case 6:B.getLogger().debug("Rule: separator (EOF) ");break;case 7:B.getLogger().debug("Rule: hierarchy: ",L[G-1]),B.setHierarchy(L[G-1]);break;case 8:B.getLogger().debug("Stop NL ");break;case 9:B.getLogger().debug("Stop EOF ");break;case 10:B.getLogger().debug("Stop NL2 ");break;case 11:B.getLogger().debug("Stop EOF2 ");break;case 12:B.getLogger().debug("Rule: statement: ",L[G]),typeof L[G].length=="number"?this.$=L[G]:this.$=[L[G]];break;case 13:B.getLogger().debug("Rule: statement #2: ",L[G-1]),this.$=[L[G-1]].concat(L[G]);break;case 14:B.getLogger().debug("Rule: link: ",L[G],A),this.$={edgeTypeStr:L[G],label:""};break;case 15:B.getLogger().debug("Rule: LABEL link: ",L[G-3],L[G-1],L[G]),this.$={edgeTypeStr:L[G],label:L[G-1]};break;case 18:let z=parseInt(L[G]),F=B.generateId();this.$={id:F,type:"space",label:"",width:z,children:[]};break;case 23:B.getLogger().debug("Rule: (nodeStatement link node) ",L[G-2],L[G-1],L[G]," typestr: ",L[G-1].edgeTypeStr);let X=B.edgeStrToEdgeData(L[G-1].edgeTypeStr);this.$=[{id:L[G-2].id,label:L[G-2].label,type:L[G-2].type,directions:L[G-2].directions},{id:L[G-2].id+"-"+L[G].id,start:L[G-2].id,end:L[G].id,label:L[G-1].label,type:"edge",directions:L[G].directions,arrowTypeEnd:X,arrowTypeStart:"arrow_open"},{id:L[G].id,label:L[G].label,type:B.typeStr2Type(L[G].typeStr),directions:L[G].directions}];break;case 24:B.getLogger().debug("Rule: nodeStatement (abc88 node size) ",L[G-1],L[G]),this.$={id:L[G-1].id,label:L[G-1].label,type:B.typeStr2Type(L[G-1].typeStr),directions:L[G-1].directions,widthInColumns:parseInt(L[G],10)};break;case 25:B.getLogger().debug("Rule: nodeStatement (node) ",L[G]),this.$={id:L[G].id,label:L[G].label,type:B.typeStr2Type(L[G].typeStr),directions:L[G].directions,widthInColumns:1};break;case 26:B.getLogger().debug("APA123",this?this:"na"),B.getLogger().debug("COLUMNS: ",L[G]),this.$={type:"column-setting",columns:L[G]==="auto"?-1:parseInt(L[G])};break;case 27:B.getLogger().debug("Rule: id-block statement : ",L[G-2],L[G-1]);let I=B.generateId();this.$={...L[G-2],type:"composite",children:L[G-1]};break;case 28:B.getLogger().debug("Rule: blockStatement : ",L[G-2],L[G-1],L[G]);let j=B.generateId();this.$={id:j,type:"composite",label:"",children:L[G-1]};break;case 29:B.getLogger().debug("Rule: node (NODE_ID separator): ",L[G]),this.$={id:L[G]};break;case 30:B.getLogger().debug("Rule: node (NODE_ID nodeShapeNLabel separator): ",L[G-1],L[G]),this.$={id:L[G-1],label:L[G].label,typeStr:L[G].typeStr,directions:L[G].directions};break;case 31:B.getLogger().debug("Rule: dirList: ",L[G]),this.$=[L[G]];break;case 32:B.getLogger().debug("Rule: dirList: ",L[G-1],L[G]),this.$=[L[G-1]].concat(L[G]);break;case 33:B.getLogger().debug("Rule: nodeShapeNLabel: ",L[G-2],L[G-1],L[G]),this.$={typeStr:L[G-2]+L[G],label:L[G-1]};break;case 34:B.getLogger().debug("Rule: BLOCK_ARROW nodeShapeNLabel: ",L[G-3],L[G-2]," #3:",L[G-1],L[G]),this.$={typeStr:L[G-3]+L[G],label:L[G-2],directions:L[G-1]};break;case 35:case 36:this.$={type:"classDef",id:L[G-1].trim(),css:L[G].trim()};break;case 37:this.$={type:"applyClass",id:L[G-1].trim(),styleClass:L[G].trim()};break;case 38:this.$={type:"applyStyles",id:L[G-1].trim(),stylesStr:L[G].trim()};break}},"anonymous"),table:[{9:1,10:[1,2]},{1:[3]},{11:3,13:4,19:5,20:6,21:t,22:8,23:9,24:10,25:11,26:12,28:r,29:i,31:n,32:a,40:s,44:u,47:h},{8:[1,20]},e(d,[2,12],{13:4,19:5,20:6,22:8,23:9,24:10,25:11,26:12,11:21,21:t,28:r,29:i,31:n,32:a,40:s,44:u,47:h}),e(p,[2,16],{14:22,15:g,16:y}),e(p,[2,17]),e(p,[2,18]),e(p,[2,19]),e(p,[2,20]),e(p,[2,21]),e(p,[2,22]),e(m,[2,25],{27:[1,25]}),e(p,[2,26]),{19:26,26:12,32:a},{11:27,13:4,19:5,20:6,21:t,22:8,23:9,24:10,25:11,26:12,28:r,29:i,31:n,32:a,40:s,44:u,47:h},{41:[1,28],43:[1,29]},{45:[1,30]},{48:[1,31]},e(x,[2,29],{33:32,36:[1,33],38:[1,34]}),{1:[2,7]},e(d,[2,13]),{26:35,32:a},{32:[2,14]},{17:[1,36]},e(m,[2,24]),{11:37,13:4,14:22,15:g,16:y,19:5,20:6,21:t,22:8,23:9,24:10,25:11,26:12,28:r,29:i,31:n,32:a,40:s,44:u,47:h},{30:[1,38]},{42:[1,39]},{42:[1,40]},{46:[1,41]},{49:[1,42]},e(x,[2,30]),{18:[1,43]},{18:[1,44]},e(m,[2,23]),{18:[1,45]},{30:[1,46]},e(p,[2,28]),e(p,[2,35]),e(p,[2,36]),e(p,[2,37]),e(p,[2,38]),{37:[1,47]},{34:48,35:_},{15:[1,50]},e(p,[2,27]),e(x,[2,33]),{39:[1,51]},{34:52,35:_,39:[2,31]},{32:[2,15]},e(x,[2,34]),{39:[2,32]}],defaultActions:{20:[2,7],23:[2,14],50:[2,15],52:[2,32]},parseError:k(function(A,M){if(M.recoverable)this.trace(A);else{var N=new Error(A);throw N.hash=M,N}},"parseError"),parse:k(function(A){var M=this,N=[0],B=[],O=[null],L=[],$=this.table,G="",z=0,F=0,X=0,I=2,j=1,H=L.slice.call(arguments,1),V=Object.create(this.lexer),P={yy:{}};for(var q in this.yy)Object.prototype.hasOwnProperty.call(this.yy,q)&&(P.yy[q]=this.yy[q]);V.setInput(A,P.yy),P.yy.lexer=V,P.yy.parser=this,typeof V.yylloc>"u"&&(V.yylloc={});var Z=V.yylloc;L.push(Z);var J=V.options&&V.options.ranges;typeof P.yy.parseError=="function"?this.parseError=P.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function ae(we){N.length=N.length-2*we,O.length=O.length-we,L.length=L.length-we}k(ae,"popStack");function ue(){var we;return we=B.pop()||V.lex()||j,typeof we!="number"&&(we instanceof Array&&(B=we,we=B.pop()),we=M.symbols_[we]||we),we}k(ue,"lex");for(var be,Le,xe,Ae,oe,he,le={},ke,pe,qe,me;;){if(xe=N[N.length-1],this.defaultActions[xe]?Ae=this.defaultActions[xe]:((be===null||typeof be>"u")&&(be=ue()),Ae=$[xe]&&$[xe][be]),typeof Ae>"u"||!Ae.length||!Ae[0]){var st="";me=[];for(ke in $[xe])this.terminals_[ke]&&ke>I&&me.push("'"+this.terminals_[ke]+"'");V.showPosition?st="Parse error on line "+(z+1)+`:
`+V.showPosition()+`
Expecting `+me.join(", ")+", got '"+(this.terminals_[be]||be)+"'":st="Parse error on line "+(z+1)+": Unexpected "+(be==j?"end of input":"'"+(this.terminals_[be]||be)+"'"),this.parseError(st,{text:V.match,token:this.terminals_[be]||be,line:V.yylineno,loc:Z,expected:me})}if(Ae[0]instanceof Array&&Ae.length>1)throw new Error("Parse Error: multiple actions possible at state: "+xe+", token: "+be);switch(Ae[0]){case 1:N.push(be),O.push(V.yytext),L.push(V.yylloc),N.push(Ae[1]),be=null,Le?(be=Le,Le=null):(F=V.yyleng,G=V.yytext,z=V.yylineno,Z=V.yylloc,X>0&&X--);break;case 2:if(pe=this.productions_[Ae[1]][1],le.$=O[O.length-pe],le._$={first_line:L[L.length-(pe||1)].first_line,last_line:L[L.length-1].last_line,first_column:L[L.length-(pe||1)].first_column,last_column:L[L.length-1].last_column},J&&(le._$.range=[L[L.length-(pe||1)].range[0],L[L.length-1].range[1]]),he=this.performAction.apply(le,[G,F,z,P.yy,Ae[1],O,L].concat(H)),typeof he<"u")return he;pe&&(N=N.slice(0,-1*pe*2),O=O.slice(0,-1*pe),L=L.slice(0,-1*pe)),N.push(this.productions_[Ae[1]][0]),O.push(le.$),L.push(le._$),qe=$[N[N.length-2]][N[N.length-1]],N.push(qe);break;case 3:return!0}}return!0},"parse")},w=function(){var A={EOF:1,parseError:k(function(M,N){if(this.yy.parser)this.yy.parser.parseError(M,N);else throw new Error(M)},"parseError"),setInput:k(function(M,N){return this.yy=N||this.yy||{},this._input=M,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:k(function(){var M=this._input[0];this.yytext+=M,this.yyleng++,this.offset++,this.match+=M,this.matched+=M;var N=M.match(/(?:\r\n?|\n).*/g);return N?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),M},"input"),unput:k(function(M){var N=M.length,B=M.split(/(?:\r\n?|\n)/g);this._input=M+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-N),this.offset-=N;var O=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),B.length-1&&(this.yylineno-=B.length-1);var L=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:B?(B.length===O.length?this.yylloc.first_column:0)+O[O.length-B.length].length-B[0].length:this.yylloc.first_column-N},this.options.ranges&&(this.yylloc.range=[L[0],L[0]+this.yyleng-N]),this.yyleng=this.yytext.length,this},"unput"),more:k(function(){return this._more=!0,this},"more"),reject:k(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:k(function(M){this.unput(this.match.slice(M))},"less"),pastInput:k(function(){var M=this.matched.substr(0,this.matched.length-this.match.length);return(M.length>20?"...":"")+M.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:k(function(){var M=this.match;return M.length<20&&(M+=this._input.substr(0,20-M.length)),(M.substr(0,20)+(M.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:k(function(){var M=this.pastInput(),N=new Array(M.length+1).join("-");return M+this.upcomingInput()+`
`+N+"^"},"showPosition"),test_match:k(function(M,N){var B,O,L;if(this.options.backtrack_lexer&&(L={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(L.yylloc.range=this.yylloc.range.slice(0))),O=M[0].match(/(?:\r\n?|\n).*/g),O&&(this.yylineno+=O.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:O?O[O.length-1].length-O[O.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+M[0].length},this.yytext+=M[0],this.match+=M[0],this.matches=M,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(M[0].length),this.matched+=M[0],B=this.performAction.call(this,this.yy,this,N,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),B)return B;if(this._backtrack){for(var $ in L)this[$]=L[$];return!1}return!1},"test_match"),next:k(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var M,N,B,O;this._more||(this.yytext="",this.match="");for(var L=this._currentRules(),$=0;$<L.length;$++)if(B=this._input.match(this.rules[L[$]]),B&&(!N||B[0].length>N[0].length)){if(N=B,O=$,this.options.backtrack_lexer){if(M=this.test_match(B,L[$]),M!==!1)return M;if(this._backtrack){N=!1;continue}else return!1}else if(!this.options.flex)break}return N?(M=this.test_match(N,L[O]),M!==!1?M:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:k(function(){var M=this.next();return M||this.lex()},"lex"),begin:k(function(M){this.conditionStack.push(M)},"begin"),popState:k(function(){var M=this.conditionStack.length-1;return M>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:k(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:k(function(M){return M=this.conditionStack.length-1-Math.abs(M||0),M>=0?this.conditionStack[M]:"INITIAL"},"topState"),pushState:k(function(M){this.begin(M)},"pushState"),stateStackSize:k(function(){return this.conditionStack.length},"stateStackSize"),options:{},performAction:k(function(M,N,B,O){var L=O;switch(B){case 0:return 10;case 1:return M.getLogger().debug("Found space-block"),31;case 2:return M.getLogger().debug("Found nl-block"),31;case 3:return M.getLogger().debug("Found space-block"),29;case 4:M.getLogger().debug(".",N.yytext);break;case 5:M.getLogger().debug("_",N.yytext);break;case 6:return 5;case 7:return N.yytext=-1,28;case 8:return N.yytext=N.yytext.replace(/columns\s+/,""),M.getLogger().debug("COLUMNS (LEX)",N.yytext),28;case 9:this.pushState("md_string");break;case 10:return"MD_STR";case 11:this.popState();break;case 12:this.pushState("string");break;case 13:M.getLogger().debug("LEX: POPPING STR:",N.yytext),this.popState();break;case 14:return M.getLogger().debug("LEX: STR end:",N.yytext),"STR";case 15:return N.yytext=N.yytext.replace(/space\:/,""),M.getLogger().debug("SPACE NUM (LEX)",N.yytext),21;case 16:return N.yytext="1",M.getLogger().debug("COLUMNS (LEX)",N.yytext),21;case 17:return 43;case 18:return"LINKSTYLE";case 19:return"INTERPOLATE";case 20:return this.pushState("CLASSDEF"),40;case 21:return this.popState(),this.pushState("CLASSDEFID"),"DEFAULT_CLASSDEF_ID";case 22:return this.popState(),this.pushState("CLASSDEFID"),41;case 23:return this.popState(),42;case 24:return this.pushState("CLASS"),44;case 25:return this.popState(),this.pushState("CLASS_STYLE"),45;case 26:return this.popState(),46;case 27:return this.pushState("STYLE_STMNT"),47;case 28:return this.popState(),this.pushState("STYLE_DEFINITION"),48;case 29:return this.popState(),49;case 30:return this.pushState("acc_title"),"acc_title";case 31:return this.popState(),"acc_title_value";case 32:return this.pushState("acc_descr"),"acc_descr";case 33:return this.popState(),"acc_descr_value";case 34:this.pushState("acc_descr_multiline");break;case 35:this.popState();break;case 36:return"acc_descr_multiline_value";case 37:return 30;case 38:return this.popState(),M.getLogger().debug("Lex: (("),"NODE_DEND";case 39:return this.popState(),M.getLogger().debug("Lex: (("),"NODE_DEND";case 40:return this.popState(),M.getLogger().debug("Lex: ))"),"NODE_DEND";case 41:return this.popState(),M.getLogger().debug("Lex: (("),"NODE_DEND";case 42:return this.popState(),M.getLogger().debug("Lex: (("),"NODE_DEND";case 43:return this.popState(),M.getLogger().debug("Lex: (-"),"NODE_DEND";case 44:return this.popState(),M.getLogger().debug("Lex: -)"),"NODE_DEND";case 45:return this.popState(),M.getLogger().debug("Lex: (("),"NODE_DEND";case 46:return this.popState(),M.getLogger().debug("Lex: ]]"),"NODE_DEND";case 47:return this.popState(),M.getLogger().debug("Lex: ("),"NODE_DEND";case 48:return this.popState(),M.getLogger().debug("Lex: ])"),"NODE_DEND";case 49:return this.popState(),M.getLogger().debug("Lex: /]"),"NODE_DEND";case 50:return this.popState(),M.getLogger().debug("Lex: /]"),"NODE_DEND";case 51:return this.popState(),M.getLogger().debug("Lex: )]"),"NODE_DEND";case 52:return this.popState(),M.getLogger().debug("Lex: )"),"NODE_DEND";case 53:return this.popState(),M.getLogger().debug("Lex: ]>"),"NODE_DEND";case 54:return this.popState(),M.getLogger().debug("Lex: ]"),"NODE_DEND";case 55:return M.getLogger().debug("Lexa: -)"),this.pushState("NODE"),36;case 56:return M.getLogger().debug("Lexa: (-"),this.pushState("NODE"),36;case 57:return M.getLogger().debug("Lexa: ))"),this.pushState("NODE"),36;case 58:return M.getLogger().debug("Lexa: )"),this.pushState("NODE"),36;case 59:return M.getLogger().debug("Lex: ((("),this.pushState("NODE"),36;case 60:return M.getLogger().debug("Lexa: )"),this.pushState("NODE"),36;case 61:return M.getLogger().debug("Lexa: )"),this.pushState("NODE"),36;case 62:return M.getLogger().debug("Lexa: )"),this.pushState("NODE"),36;case 63:return M.getLogger().debug("Lexc: >"),this.pushState("NODE"),36;case 64:return M.getLogger().debug("Lexa: (["),this.pushState("NODE"),36;case 65:return M.getLogger().debug("Lexa: )"),this.pushState("NODE"),36;case 66:return this.pushState("NODE"),36;case 67:return this.pushState("NODE"),36;case 68:return this.pushState("NODE"),36;case 69:return this.pushState("NODE"),36;case 70:return this.pushState("NODE"),36;case 71:return this.pushState("NODE"),36;case 72:return this.pushState("NODE"),36;case 73:return M.getLogger().debug("Lexa: ["),this.pushState("NODE"),36;case 74:return this.pushState("BLOCK_ARROW"),M.getLogger().debug("LEX ARR START"),38;case 75:return M.getLogger().debug("Lex: NODE_ID",N.yytext),32;case 76:return M.getLogger().debug("Lex: EOF",N.yytext),8;case 77:this.pushState("md_string");break;case 78:this.pushState("md_string");break;case 79:return"NODE_DESCR";case 80:this.popState();break;case 81:M.getLogger().debug("Lex: Starting string"),this.pushState("string");break;case 82:M.getLogger().debug("LEX ARR: Starting string"),this.pushState("string");break;case 83:return M.getLogger().debug("LEX: NODE_DESCR:",N.yytext),"NODE_DESCR";case 84:M.getLogger().debug("LEX POPPING"),this.popState();break;case 85:M.getLogger().debug("Lex: =>BAE"),this.pushState("ARROW_DIR");break;case 86:return N.yytext=N.yytext.replace(/^,\s*/,""),M.getLogger().debug("Lex (right): dir:",N.yytext),"DIR";case 87:return N.yytext=N.yytext.replace(/^,\s*/,""),M.getLogger().debug("Lex (left):",N.yytext),"DIR";case 88:return N.yytext=N.yytext.replace(/^,\s*/,""),M.getLogger().debug("Lex (x):",N.yytext),"DIR";case 89:return N.yytext=N.yytext.replace(/^,\s*/,""),M.getLogger().debug("Lex (y):",N.yytext),"DIR";case 90:return N.yytext=N.yytext.replace(/^,\s*/,""),M.getLogger().debug("Lex (up):",N.yytext),"DIR";case 91:return N.yytext=N.yytext.replace(/^,\s*/,""),M.getLogger().debug("Lex (down):",N.yytext),"DIR";case 92:return N.yytext="]>",M.getLogger().debug("Lex (ARROW_DIR end):",N.yytext),this.popState(),this.popState(),"BLOCK_ARROW_END";case 93:return M.getLogger().debug("Lex: LINK","#"+N.yytext+"#"),15;case 94:return M.getLogger().debug("Lex: LINK",N.yytext),15;case 95:return M.getLogger().debug("Lex: LINK",N.yytext),15;case 96:return M.getLogger().debug("Lex: LINK",N.yytext),15;case 97:return M.getLogger().debug("Lex: START_LINK",N.yytext),this.pushState("LLABEL"),16;case 98:return M.getLogger().debug("Lex: START_LINK",N.yytext),this.pushState("LLABEL"),16;case 99:return M.getLogger().debug("Lex: START_LINK",N.yytext),this.pushState("LLABEL"),16;case 100:this.pushState("md_string");break;case 101:return M.getLogger().debug("Lex: Starting string"),this.pushState("string"),"LINK_LABEL";case 102:return this.popState(),M.getLogger().debug("Lex: LINK","#"+N.yytext+"#"),15;case 103:return this.popState(),M.getLogger().debug("Lex: LINK",N.yytext),15;case 104:return this.popState(),M.getLogger().debug("Lex: LINK",N.yytext),15;case 105:return M.getLogger().debug("Lex: COLON",N.yytext),N.yytext=N.yytext.slice(1),27}},"anonymous"),rules:[/^(?:block-beta\b)/,/^(?:block\s+)/,/^(?:block\n+)/,/^(?:block:)/,/^(?:[\s]+)/,/^(?:[\n]+)/,/^(?:((\u000D\u000A)|(\u000A)))/,/^(?:columns\s+auto\b)/,/^(?:columns\s+[\d]+)/,/^(?:["][`])/,/^(?:[^`"]+)/,/^(?:[`]["])/,/^(?:["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:space[:]\d+)/,/^(?:space\b)/,/^(?:default\b)/,/^(?:linkStyle\b)/,/^(?:interpolate\b)/,/^(?:classDef\s+)/,/^(?:DEFAULT\s+)/,/^(?:\w+\s+)/,/^(?:[^\n]*)/,/^(?:class\s+)/,/^(?:(\w+)+((,\s*\w+)*))/,/^(?:[^\n]*)/,/^(?:style\s+)/,/^(?:(\w+)+((,\s*\w+)*))/,/^(?:[^\n]*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:end\b\s*)/,/^(?:\(\(\()/,/^(?:\)\)\))/,/^(?:[\)]\))/,/^(?:\}\})/,/^(?:\})/,/^(?:\(-)/,/^(?:-\))/,/^(?:\(\()/,/^(?:\]\])/,/^(?:\()/,/^(?:\]\))/,/^(?:\\\])/,/^(?:\/\])/,/^(?:\)\])/,/^(?:[\)])/,/^(?:\]>)/,/^(?:[\]])/,/^(?:-\))/,/^(?:\(-)/,/^(?:\)\))/,/^(?:\))/,/^(?:\(\(\()/,/^(?:\(\()/,/^(?:\{\{)/,/^(?:\{)/,/^(?:>)/,/^(?:\(\[)/,/^(?:\()/,/^(?:\[\[)/,/^(?:\[\|)/,/^(?:\[\()/,/^(?:\)\)\))/,/^(?:\[\\)/,/^(?:\[\/)/,/^(?:\[\\)/,/^(?:\[)/,/^(?:<\[)/,/^(?:[^\(\[\n\-\)\{\}\s\<\>:]+)/,/^(?:$)/,/^(?:["][`])/,/^(?:["][`])/,/^(?:[^`"]+)/,/^(?:[`]["])/,/^(?:["])/,/^(?:["])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:\]>\s*\()/,/^(?:,?\s*right\s*)/,/^(?:,?\s*left\s*)/,/^(?:,?\s*x\s*)/,/^(?:,?\s*y\s*)/,/^(?:,?\s*up\s*)/,/^(?:,?\s*down\s*)/,/^(?:\)\s*)/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?:\s*~~[\~]+\s*)/,/^(?:\s*[xo<]?--\s*)/,/^(?:\s*[xo<]?==\s*)/,/^(?:\s*[xo<]?-\.\s*)/,/^(?:["][`])/,/^(?:["])/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?::\d+)/],conditions:{STYLE_DEFINITION:{rules:[29],inclusive:!1},STYLE_STMNT:{rules:[28],inclusive:!1},CLASSDEFID:{rules:[23],inclusive:!1},CLASSDEF:{rules:[21,22],inclusive:!1},CLASS_STYLE:{rules:[26],inclusive:!1},CLASS:{rules:[25],inclusive:!1},LLABEL:{rules:[100,101,102,103,104],inclusive:!1},ARROW_DIR:{rules:[86,87,88,89,90,91,92],inclusive:!1},BLOCK_ARROW:{rules:[77,82,85],inclusive:!1},NODE:{rules:[38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,78,81],inclusive:!1},md_string:{rules:[10,11,79,80],inclusive:!1},space:{rules:[],inclusive:!1},string:{rules:[13,14,83,84],inclusive:!1},acc_descr_multiline:{rules:[35,36],inclusive:!1},acc_descr:{rules:[33],inclusive:!1},acc_title:{rules:[31],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,12,15,16,17,18,19,20,24,27,30,32,34,37,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,93,94,95,96,97,98,99,105],inclusive:!0}}};return A}();E.lexer=w;function C(){this.yy={}}return k(C,"Parser"),C.prototype=E,E.Parser=C,new C}(),GP.parser=GP,rRe=GP,Zc=new Map,UP=[],jP=new Map,Bee="color",Pee="fill",iRe="bgFill",Fee=",",nRe=at(),$8=new Map,aRe=k(e=>zr.sanitizeText(e,nRe),"sanitizeText"),sRe=k(function(e,t=""){let r=$8.get(e);r||(r={id:e,styles:[],textStyles:[]},$8.set(e,r)),t?.split(Fee).forEach(i=>{let n=i.replace(/([^;]*);/,"$1").trim();if(RegExp(Bee).exec(i)){let a=n.replace(Pee,iRe).replace(Bee,Pee);r.textStyles.push(a)}r.styles.push(n)})},"addStyleClass"),oRe=k(function(e,t=""){let r=Zc.get(e);t!=null&&(r.styles=t.split(Fee))},"addStyle2Node"),lRe=k(function(e,t){e.split(",").forEach(function(r){let i=Zc.get(r);if(i===void 0){let n=r.trim();i={id:n,type:"na",children:[]},Zc.set(n,i)}i.classes||(i.classes=[]),i.classes.push(t)})},"setCssClass"),$ee=k((e,t)=>{let r=e.flat(),i=[];for(let n of r){if(n.label&&(n.label=aRe(n.label)),n.type==="classDef"){sRe(n.id,n.css);continue}if(n.type==="applyClass"){lRe(n.id,n?.styleClass??"");continue}if(n.type==="applyStyles"){n?.stylesStr&&oRe(n.id,n?.stylesStr);continue}if(n.type==="column-setting")t.columns=n.columns??-1;else if(n.type==="edge"){let a=(jP.get(n.id)??0)+1;jP.set(n.id,a),n.id=a+"-"+n.id,UP.push(n)}else{n.label||(n.type==="composite"?n.label="":n.label=n.id);let a=Zc.get(n.id);if(a===void 0?Zc.set(n.id,n):(n.type!=="na"&&(a.type=n.type),n.label!==n.id&&(a.label=n.label)),n.children&&$ee(n.children,n),n.type==="space"){let s=n.width??1;for(let u=0;u<s;u++){let h=jo(n);h.id=h.id+"-"+u,Zc.set(h.id,h),i.push(h)}}else a===void 0&&i.push(n)}}t.children=i},"populateBlockDatabase"),HP=[],mw={id:"root",type:"composite",children:[],columns:-1},uRe=k(()=>{Ce.debug("Clear called"),ho(),mw={id:"root",type:"composite",children:[],columns:-1},Zc=new Map([["root",mw]]),HP=[],$8=new Map,UP=[],jP=new Map},"clear"),k(zLe,"typeStr2Type"),k(GLe,"edgeTypeStr2Type"),k(ULe,"edgeStrToEdgeData"),zee=0,hRe=k(()=>(zee++,"id-"+Math.random().toString(36).substr(2,12)+"-"+zee),"generateId"),cRe=k(e=>{mw.children=e,$ee(e,mw),HP=mw.children},"setHierarchy"),dRe=k(e=>{let t=Zc.get(e);return t?t.columns?t.columns:t.children?t.children.length:-1:-1},"getColumns"),pRe=k(()=>[...Zc.values()],"getBlocksFlat"),fRe=k(()=>HP||[],"getBlocks"),gRe=k(()=>UP,"getEdges"),mRe=k(e=>Zc.get(e),"getBlock"),yRe=k(e=>{Zc.set(e.id,e)},"setBlock"),vRe=k(()=>console,"getLogger"),xRe=k(function(){return $8},"getClasses"),bRe={getConfig:k(()=>cs().block,"getConfig"),typeStr2Type:zLe,edgeTypeStr2Type:GLe,edgeStrToEdgeData:ULe,getLogger:vRe,getBlocksFlat:pRe,getBlocks:fRe,getEdges:gRe,setHierarchy:cRe,getBlock:mRe,setBlock:yRe,getColumns:dRe,getClasses:xRe,clear:uRe,generateId:hRe},_Re=bRe,z8=k((e,t)=>{let r=Ls,i=r(e,"r"),n=r(e,"g"),a=r(e,"b");return Nn(i,n,a,t)},"fade"),wRe=k(e=>`.label {
    font-family: ${e.fontFamily};
    color: ${e.nodeTextColor||e.textColor};
  }
  .cluster-label text {
    fill: ${e.titleColor};
  }
  .cluster-label span,p {
    color: ${e.titleColor};
  }



  .label text,span,p {
    fill: ${e.nodeTextColor||e.textColor};
    color: ${e.nodeTextColor||e.textColor};
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${e.mainBkg};
    stroke: ${e.nodeBorder};
    stroke-width: 1px;
  }
  .flowchart-label text {
    text-anchor: middle;
  }
  // .flowchart-label .text-outer-tspan {
  //   text-anchor: middle;
  // }
  // .flowchart-label .text-inner-tspan {
  //   text-anchor: start;
  // }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${e.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${e.lineColor};
    stroke-width: 2.0px;
  }

  .flowchart-link {
    stroke: ${e.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${e.edgeLabelBackground};
    rect {
      opacity: 0.5;
      background-color: ${e.edgeLabelBackground};
      fill: ${e.edgeLabelBackground};
    }
    text-align: center;
  }

  /* For html labels only */
  .labelBkg {
    background-color: ${z8(e.edgeLabelBackground,.5)};
    // background-color:
  }

  .node .cluster {
    // fill: ${z8(e.mainBkg,.5)};
    fill: ${z8(e.clusterBkg,.5)};
    stroke: ${z8(e.clusterBorder,.2)};
    box-shadow: rgba(50, 50, 93, 0.25) 0px 13px 27px -5px, rgba(0, 0, 0, 0.3) 0px 8px 16px -8px;
    stroke-width: 1px;
  }

  .cluster text {
    fill: ${e.titleColor};
  }

  .cluster span,p {
    color: ${e.titleColor};
  }
  /* .cluster div {
    color: ${e.titleColor};
  } */

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: ${e.fontFamily};
    font-size: 12px;
    background: ${e.tertiaryColor};
    border: 1px solid ${e.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .flowchartTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${e.textColor};
  }
`,"getStyles"),kRe=wRe,TRe=k((e,t,r,i)=>{t.forEach(n=>{NRe[n](e,r,i)})},"insertMarkers"),ERe=k((e,t,r)=>{Ce.trace("Making markers for ",r),e.append("defs").append("marker").attr("id",r+"_"+t+"-extensionStart").attr("class","marker extension "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-extensionEnd").attr("class","marker extension "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},"extension"),CRe=k((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-compositionStart").attr("class","marker composition "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-compositionEnd").attr("class","marker composition "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"composition"),SRe=k((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-aggregationStart").attr("class","marker aggregation "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-aggregationEnd").attr("class","marker aggregation "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"aggregation"),ARe=k((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-dependencyStart").attr("class","marker dependency "+t).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-dependencyEnd").attr("class","marker dependency "+t).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"dependency"),MRe=k((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-lollipopStart").attr("class","marker lollipop "+t).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),e.append("defs").append("marker").attr("id",r+"_"+t+"-lollipopEnd").attr("class","marker lollipop "+t).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},"lollipop"),LRe=k((e,t,r)=>{e.append("marker").attr("id",r+"_"+t+"-pointEnd").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",6).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),e.append("marker").attr("id",r+"_"+t+"-pointStart").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"point"),RRe=k((e,t,r)=>{e.append("marker").attr("id",r+"_"+t+"-circleEnd").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),e.append("marker").attr("id",r+"_"+t+"-circleStart").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"circle"),DRe=k((e,t,r)=>{e.append("marker").attr("id",r+"_"+t+"-crossEnd").attr("class","marker cross "+t).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),e.append("marker").attr("id",r+"_"+t+"-crossStart").attr("class","marker cross "+t).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},"cross"),IRe=k((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"barb"),NRe={extension:ERe,composition:CRe,aggregation:SRe,dependency:ARe,lollipop:MRe,point:LRe,circle:RRe,cross:DRe,barb:IRe},ORe=TRe,yo=at()?.block?.padding??8,k(jLe,"calculateBlockPosition"),BRe=k(e=>{let t=0,r=0;for(let i of e.children){let{width:n,height:a,x:s,y:u}=i.size??{width:0,height:0,x:0,y:0};Ce.debug("getMaxChildSize abc95 child:",i.id,"width:",n,"height:",a,"x:",s,"y:",u,i.type),i.type!=="space"&&(n>t&&(t=n/(e.widthInColumns??1)),a>r&&(r=a))}return{width:t,height:r}},"getMaxChildSize"),k(FP,"setBlockSizes"),k(Ree,"layoutBlocks"),k(Dee,"findBounds"),k(HLe,"layout"),k(Iee,"applyStyle"),k(VLe,"addHtmlLabel"),PRe=k((e,t,r,i)=>{let n=e||"";if(typeof n=="object"&&(n=n[0]),es(at().flowchart.htmlLabels)){n=n.replace(/\\n|\n/g,"<br />"),Ce.debug("vertexText"+n);let a={isNode:i,label:Aj(N0(n)),labelStyle:t.replace("fill:","color:")};return VLe(a)}else{let a=document.createElementNS("http://www.w3.org/2000/svg","text");a.setAttribute("style",t.replace("color:","fill:"));let s=[];typeof n=="string"?s=n.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(n)?s=n:s=[];for(let u of s){let h=document.createElementNS("http://www.w3.org/2000/svg","tspan");h.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),h.setAttribute("dy","1em"),h.setAttribute("x","0"),r?h.setAttribute("class","title-row"):h.setAttribute("class","row"),h.textContent=u.trim(),a.appendChild(h)}return a}},"createLabel"),fc=PRe,FRe=k((e,t,r,i,n)=>{t.arrowTypeStart&&Gee(e,"start",t.arrowTypeStart,r,i,n),t.arrowTypeEnd&&Gee(e,"end",t.arrowTypeEnd,r,i,n)},"addEdgeMarkers"),$Re={arrow_cross:"cross",arrow_point:"point",arrow_barb:"barb",arrow_circle:"circle",aggregation:"aggregation",extension:"extension",composition:"composition",dependency:"dependency",lollipop:"lollipop"},Gee=k((e,t,r,i,n,a)=>{let s=$Re[r];if(!s){Ce.warn(`Unknown arrow type: ${r}`);return}let u=t==="start"?"Start":"End";e.attr(`marker-${t}`,`url(${i}#${n}_${a}-${s}${u})`)},"addEdgeMarker"),VP={},Zl={},zRe=k((e,t)=>{let r=at(),i=es(r.flowchart.htmlLabels),n=t.labelType==="markdown"?Kh(e,t.label,{style:t.labelStyle,useHtmlLabels:i,addSvgBackground:!0},r):fc(t.label,t.labelStyle),a=e.insert("g").attr("class","edgeLabel"),s=a.insert("g").attr("class","label");s.node().appendChild(n);let u=n.getBBox();if(i){let d=n.children[0],p=Nr(n);u=d.getBoundingClientRect(),p.attr("width",u.width),p.attr("height",u.height)}s.attr("transform","translate("+-u.width/2+", "+-u.height/2+")"),VP[t.id]=a,t.width=u.width,t.height=u.height;let h;if(t.startLabelLeft){let d=fc(t.startLabelLeft,t.labelStyle),p=e.insert("g").attr("class","edgeTerminals"),g=p.insert("g").attr("class","inner");h=g.node().appendChild(d);let y=d.getBBox();g.attr("transform","translate("+-y.width/2+", "+-y.height/2+")"),Zl[t.id]||(Zl[t.id]={}),Zl[t.id].startLeft=p,F8(h,t.startLabelLeft)}if(t.startLabelRight){let d=fc(t.startLabelRight,t.labelStyle),p=e.insert("g").attr("class","edgeTerminals"),g=p.insert("g").attr("class","inner");h=p.node().appendChild(d),g.node().appendChild(d);let y=d.getBBox();g.attr("transform","translate("+-y.width/2+", "+-y.height/2+")"),Zl[t.id]||(Zl[t.id]={}),Zl[t.id].startRight=p,F8(h,t.startLabelRight)}if(t.endLabelLeft){let d=fc(t.endLabelLeft,t.labelStyle),p=e.insert("g").attr("class","edgeTerminals"),g=p.insert("g").attr("class","inner");h=g.node().appendChild(d);let y=d.getBBox();g.attr("transform","translate("+-y.width/2+", "+-y.height/2+")"),p.node().appendChild(d),Zl[t.id]||(Zl[t.id]={}),Zl[t.id].endLeft=p,F8(h,t.endLabelLeft)}if(t.endLabelRight){let d=fc(t.endLabelRight,t.labelStyle),p=e.insert("g").attr("class","edgeTerminals"),g=p.insert("g").attr("class","inner");h=g.node().appendChild(d);let y=d.getBBox();g.attr("transform","translate("+-y.width/2+", "+-y.height/2+")"),p.node().appendChild(d),Zl[t.id]||(Zl[t.id]={}),Zl[t.id].endRight=p,F8(h,t.endLabelRight)}return n},"insertEdgeLabel"),k(F8,"setTerminalWidth"),GRe=k((e,t)=>{Ce.debug("Moving label abc88 ",e.id,e.label,VP[e.id],t);let r=t.updatedPath?t.updatedPath:t.originalPath,i=at(),{subGraphTitleTotalMargin:n}=Xp(i);if(e.label){let a=VP[e.id],s=e.x,u=e.y;if(r){let h=qn.calcLabelPosition(r);Ce.debug("Moving label "+e.label+" from (",s,",",u,") to (",h.x,",",h.y,") abc88"),t.updatedPath&&(s=h.x,u=h.y)}a.attr("transform",`translate(${s}, ${u+n/2})`)}if(e.startLabelLeft){let a=Zl[e.id].startLeft,s=e.x,u=e.y;if(r){let h=qn.calcTerminalLabelPosition(e.arrowTypeStart?10:0,"start_left",r);s=h.x,u=h.y}a.attr("transform",`translate(${s}, ${u})`)}if(e.startLabelRight){let a=Zl[e.id].startRight,s=e.x,u=e.y;if(r){let h=qn.calcTerminalLabelPosition(e.arrowTypeStart?10:0,"start_right",r);s=h.x,u=h.y}a.attr("transform",`translate(${s}, ${u})`)}if(e.endLabelLeft){let a=Zl[e.id].endLeft,s=e.x,u=e.y;if(r){let h=qn.calcTerminalLabelPosition(e.arrowTypeEnd?10:0,"end_left",r);s=h.x,u=h.y}a.attr("transform",`translate(${s}, ${u})`)}if(e.endLabelRight){let a=Zl[e.id].endRight,s=e.x,u=e.y;if(r){let h=qn.calcTerminalLabelPosition(e.arrowTypeEnd?10:0,"end_right",r);s=h.x,u=h.y}a.attr("transform",`translate(${s}, ${u})`)}},"positionEdgeLabel"),URe=k((e,t)=>{let r=e.x,i=e.y,n=Math.abs(t.x-r),a=Math.abs(t.y-i),s=e.width/2,u=e.height/2;return n>=s||a>=u},"outsideNode"),jRe=k((e,t,r)=>{Ce.debug(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(t)}
  insidePoint : ${JSON.stringify(r)}
  node        : x:${e.x} y:${e.y} w:${e.width} h:${e.height}`);let i=e.x,n=e.y,a=Math.abs(i-r.x),s=e.width/2,u=r.x<t.x?s-a:s+a,h=e.height/2,d=Math.abs(t.y-r.y),p=Math.abs(t.x-r.x);if(Math.abs(n-t.y)*s>Math.abs(i-t.x)*h){let g=r.y<t.y?t.y-h-n:n-h-t.y;u=p*g/d;let y={x:r.x<t.x?r.x+u:r.x-p+u,y:r.y<t.y?r.y+d-g:r.y-d+g};return u===0&&(y.x=t.x,y.y=t.y),p===0&&(y.x=t.x),d===0&&(y.y=t.y),Ce.debug(`abc89 topp/bott calc, Q ${d}, q ${g}, R ${p}, r ${u}`,y),y}else{r.x<t.x?u=t.x-s-i:u=i-s-t.x;let g=d*u/p,y=r.x<t.x?r.x+p-u:r.x-p+u,m=r.y<t.y?r.y+g:r.y-g;return Ce.debug(`sides calc abc89, Q ${d}, q ${g}, R ${p}, r ${u}`,{_x:y,_y:m}),u===0&&(y=t.x,m=t.y),p===0&&(y=t.x),d===0&&(m=t.y),{x:y,y:m}}},"intersection"),Uee=k((e,t)=>{Ce.debug("abc88 cutPathAtIntersect",e,t);let r=[],i=e[0],n=!1;return e.forEach(a=>{if(!URe(t,a)&&!n){let s=jRe(t,i,a),u=!1;r.forEach(h=>{u=u||h.x===s.x&&h.y===s.y}),r.some(h=>h.x===s.x&&h.y===s.y)||r.push(s),n=!0}else i=a,n||r.push(a)}),r},"cutPathAtIntersect"),HRe=k(function(e,t,r,i,n,a,s){let u=r.points;Ce.debug("abc88 InsertEdge: edge=",r,"e=",t);let h=!1,d=a.node(t.v);var p=a.node(t.w);p?.intersect&&d?.intersect&&(u=u.slice(1,r.points.length-1),u.unshift(d.intersect(u[0])),u.push(p.intersect(u[u.length-1]))),r.toCluster&&(Ce.debug("to cluster abc88",i[r.toCluster]),u=Uee(r.points,i[r.toCluster].node),h=!0),r.fromCluster&&(Ce.debug("from cluster abc88",i[r.fromCluster]),u=Uee(u.reverse(),i[r.fromCluster].node).reverse(),h=!0);let g=u.filter(M=>!Number.isNaN(M.y)),y=cC;r.curve&&(n==="graph"||n==="flowchart")&&(y=r.curve);let{x:m,y:x}=Vj(r),_=vv().x(m).y(x).curve(y),E;switch(r.thickness){case"normal":E="edge-thickness-normal";break;case"thick":E="edge-thickness-thick";break;case"invisible":E="edge-thickness-thick";break;default:E=""}switch(r.pattern){case"solid":E+=" edge-pattern-solid";break;case"dotted":E+=" edge-pattern-dotted";break;case"dashed":E+=" edge-pattern-dashed";break}let w=e.append("path").attr("d",_(g)).attr("id",r.id).attr("class"," "+E+(r.classes?" "+r.classes:"")).attr("style",r.style),C="";(at().flowchart.arrowMarkerAbsolute||at().state.arrowMarkerAbsolute)&&(C=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,C=C.replace(/\(/g,"\\("),C=C.replace(/\)/g,"\\)")),FRe(w,r,C,s,n);let A={};return h&&(A.updatedPath=u),A.originalPath=r.points,A},"insertEdge"),VRe=k(e=>{let t=new Set;for(let r of e)switch(r){case"x":t.add("right"),t.add("left");break;case"y":t.add("up"),t.add("down");break;default:t.add(r);break}return t},"expandAndDeduplicateDirections"),WRe=k((e,t,r)=>{let i=VRe(e),n=2,a=t.height+2*r.padding,s=a/n,u=t.width+2*s+r.padding,h=r.padding/2;return i.has("right")&&i.has("left")&&i.has("up")&&i.has("down")?[{x:0,y:0},{x:s,y:0},{x:u/2,y:2*h},{x:u-s,y:0},{x:u,y:0},{x:u,y:-a/3},{x:u+2*h,y:-a/2},{x:u,y:-2*a/3},{x:u,y:-a},{x:u-s,y:-a},{x:u/2,y:-a-2*h},{x:s,y:-a},{x:0,y:-a},{x:0,y:-2*a/3},{x:-2*h,y:-a/2},{x:0,y:-a/3}]:i.has("right")&&i.has("left")&&i.has("up")?[{x:s,y:0},{x:u-s,y:0},{x:u,y:-a/2},{x:u-s,y:-a},{x:s,y:-a},{x:0,y:-a/2}]:i.has("right")&&i.has("left")&&i.has("down")?[{x:0,y:0},{x:s,y:-a},{x:u-s,y:-a},{x:u,y:0}]:i.has("right")&&i.has("up")&&i.has("down")?[{x:0,y:0},{x:u,y:-s},{x:u,y:-a+s},{x:0,y:-a}]:i.has("left")&&i.has("up")&&i.has("down")?[{x:u,y:0},{x:0,y:-s},{x:0,y:-a+s},{x:u,y:-a}]:i.has("right")&&i.has("left")?[{x:s,y:0},{x:s,y:-h},{x:u-s,y:-h},{x:u-s,y:0},{x:u,y:-a/2},{x:u-s,y:-a},{x:u-s,y:-a+h},{x:s,y:-a+h},{x:s,y:-a},{x:0,y:-a/2}]:i.has("up")&&i.has("down")?[{x:u/2,y:0},{x:0,y:-h},{x:s,y:-h},{x:s,y:-a+h},{x:0,y:-a+h},{x:u/2,y:-a},{x:u,y:-a+h},{x:u-s,y:-a+h},{x:u-s,y:-h},{x:u,y:-h}]:i.has("right")&&i.has("up")?[{x:0,y:0},{x:u,y:-s},{x:0,y:-a}]:i.has("right")&&i.has("down")?[{x:0,y:0},{x:u,y:0},{x:0,y:-a}]:i.has("left")&&i.has("up")?[{x:u,y:0},{x:0,y:-s},{x:u,y:-a}]:i.has("left")&&i.has("down")?[{x:u,y:0},{x:0,y:0},{x:u,y:-a}]:i.has("right")?[{x:s,y:-h},{x:s,y:-h},{x:u-s,y:-h},{x:u-s,y:0},{x:u,y:-a/2},{x:u-s,y:-a},{x:u-s,y:-a+h},{x:s,y:-a+h},{x:s,y:-a+h}]:i.has("left")?[{x:s,y:0},{x:s,y:-h},{x:u-s,y:-h},{x:u-s,y:-a+h},{x:s,y:-a+h},{x:s,y:-a},{x:0,y:-a/2}]:i.has("up")?[{x:s,y:-h},{x:s,y:-a+h},{x:0,y:-a+h},{x:u/2,y:-a},{x:u,y:-a+h},{x:u-s,y:-a+h},{x:u-s,y:-h}]:i.has("down")?[{x:u/2,y:0},{x:0,y:-h},{x:s,y:-h},{x:s,y:-a+h},{x:u-s,y:-a+h},{x:u-s,y:-h},{x:u,y:-h}]:[{x:0,y:0}]},"getArrowPoints"),k(WLe,"intersectNode"),YRe=WLe,k(YLe,"intersectEllipse"),jee=YLe,k(qLe,"intersectCircle"),qRe=qLe,k(XLe,"intersectLine"),k(Nee,"sameSign"),XRe=XLe,KRe=KLe,k(KLe,"intersectPolygon"),ZRe=k((e,t)=>{var r=e.x,i=e.y,n=t.x-r,a=t.y-i,s=e.width/2,u=e.height/2,h,d;return Math.abs(a)*s>Math.abs(n)*u?(a<0&&(u=-u),h=a===0?0:u*n/a,d=u):(n<0&&(s=-s),h=s,d=n===0?0:s*a/n),{x:r+h,y:i+d}},"intersectRect"),QRe=ZRe,Fs={node:YRe,circle:qRe,ellipse:jee,polygon:KRe,rect:QRe},hl=k(async(e,t,r,i)=>{let n=at(),a,s=t.useHtmlLabels||es(n.flowchart.htmlLabels);r?a=r:a="node default";let u=e.insert("g").attr("class",a).attr("id",t.domId||t.id),h=u.insert("g").attr("class","label").attr("style",t.labelStyle),d;t.labelText===void 0?d="":d=typeof t.labelText=="string"?t.labelText:t.labelText[0];let p=h.node(),g;t.labelType==="markdown"?g=Kh(h,Da(N0(d),n),{useHtmlLabels:s,width:t.width||n.flowchart.wrappingWidth,classes:"markdown-node-label"},n):g=p.appendChild(fc(Da(N0(d),n),t.labelStyle,!1,i));let y=g.getBBox(),m=t.padding/2;if(es(n.flowchart.htmlLabels)){let x=g.children[0],_=Nr(g),E=x.getElementsByTagName("img");if(E){let w=d.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...E].map(C=>new Promise(A=>{function M(){if(C.style.display="flex",C.style.flexDirection="column",w){let N=n.fontSize?n.fontSize:window.getComputedStyle(document.body).fontSize,B=parseInt(N,10)*5+"px";C.style.minWidth=B,C.style.maxWidth=B}else C.style.width="100%";A(C)}k(M,"setupImage"),setTimeout(()=>{C.complete&&M()}),C.addEventListener("error",M),C.addEventListener("load",M)})))}y=x.getBoundingClientRect(),_.attr("width",y.width),_.attr("height",y.height)}return s?h.attr("transform","translate("+-y.width/2+", "+-y.height/2+")"):h.attr("transform","translate(0, "+-y.height/2+")"),t.centerLabel&&h.attr("transform","translate("+-y.width/2+", "+-y.height/2+")"),h.insert("rect",":first-child"),{shapeSvg:u,bbox:y,halfPadding:m,label:h}},"labelHelper"),so=k((e,t)=>{let r=t.node().getBBox();e.width=r.width,e.height=r.height},"updateNodeBounds"),k(Jd,"insertPolygonShape"),JRe=k(async(e,t)=>{t.useHtmlLabels||at().flowchart.htmlLabels||(t.centerLabel=!0);let{shapeSvg:r,bbox:i,halfPadding:n}=await hl(e,t,"node "+t.classes,!0);Ce.info("Classes = ",t.classes);let a=r.insert("rect",":first-child");return a.attr("rx",t.rx).attr("ry",t.ry).attr("x",-i.width/2-n).attr("y",-i.height/2-n).attr("width",i.width+t.padding).attr("height",i.height+t.padding),so(t,a),t.intersect=function(s){return Fs.rect(t,s)},r},"note"),eDe=JRe,Hee=k(e=>e?" "+e:"","formatClass"),wh=k((e,t)=>`${t||"node default"}${Hee(e.classes)} ${Hee(e.class)}`,"getClassesFromNode"),Vee=k(async(e,t)=>{let{shapeSvg:r,bbox:i}=await hl(e,t,wh(t,void 0),!0),n=i.width+t.padding,a=i.height+t.padding,s=n+a,u=[{x:s/2,y:0},{x:s,y:-s/2},{x:s/2,y:-s},{x:0,y:-s/2}];Ce.info("Question main (Circle)");let h=Jd(r,s,s,u);return h.attr("style",t.style),so(t,h),t.intersect=function(d){return Ce.warn("Intersect called"),Fs.polygon(t,u,d)},r},"question"),tDe=k((e,t)=>{let r=e.insert("g").attr("class","node default").attr("id",t.domId||t.id),i=28,n=[{x:0,y:i/2},{x:i/2,y:0},{x:0,y:-i/2},{x:-i/2,y:0}];return r.insert("polygon",":first-child").attr("points",n.map(function(a){return a.x+","+a.y}).join(" ")).attr("class","state-start").attr("r",7).attr("width",28).attr("height",28),t.width=28,t.height=28,t.intersect=function(a){return Fs.circle(t,14,a)},r},"choice"),rDe=k(async(e,t)=>{let{shapeSvg:r,bbox:i}=await hl(e,t,wh(t,void 0),!0),n=4,a=i.height+t.padding,s=a/n,u=i.width+2*s+t.padding,h=[{x:s,y:0},{x:u-s,y:0},{x:u,y:-a/2},{x:u-s,y:-a},{x:s,y:-a},{x:0,y:-a/2}],d=Jd(r,u,a,h);return d.attr("style",t.style),so(t,d),t.intersect=function(p){return Fs.polygon(t,h,p)},r},"hexagon"),iDe=k(async(e,t)=>{let{shapeSvg:r,bbox:i}=await hl(e,t,void 0,!0),n=2,a=i.height+2*t.padding,s=a/n,u=i.width+2*s+t.padding,h=WRe(t.directions,i,t),d=Jd(r,u,a,h);return d.attr("style",t.style),so(t,d),t.intersect=function(p){return Fs.polygon(t,h,p)},r},"block_arrow"),nDe=k(async(e,t)=>{let{shapeSvg:r,bbox:i}=await hl(e,t,wh(t,void 0),!0),n=i.width+t.padding,a=i.height+t.padding,s=[{x:-a/2,y:0},{x:n,y:0},{x:n,y:-a},{x:-a/2,y:-a},{x:0,y:-a/2}];return Jd(r,n,a,s).attr("style",t.style),t.width=n+a,t.height=a,t.intersect=function(u){return Fs.polygon(t,s,u)},r},"rect_left_inv_arrow"),aDe=k(async(e,t)=>{let{shapeSvg:r,bbox:i}=await hl(e,t,wh(t),!0),n=i.width+t.padding,a=i.height+t.padding,s=[{x:-2*a/6,y:0},{x:n-a/6,y:0},{x:n+2*a/6,y:-a},{x:a/6,y:-a}],u=Jd(r,n,a,s);return u.attr("style",t.style),so(t,u),t.intersect=function(h){return Fs.polygon(t,s,h)},r},"lean_right"),sDe=k(async(e,t)=>{let{shapeSvg:r,bbox:i}=await hl(e,t,wh(t,void 0),!0),n=i.width+t.padding,a=i.height+t.padding,s=[{x:2*a/6,y:0},{x:n+a/6,y:0},{x:n-2*a/6,y:-a},{x:-a/6,y:-a}],u=Jd(r,n,a,s);return u.attr("style",t.style),so(t,u),t.intersect=function(h){return Fs.polygon(t,s,h)},r},"lean_left"),oDe=k(async(e,t)=>{let{shapeSvg:r,bbox:i}=await hl(e,t,wh(t,void 0),!0),n=i.width+t.padding,a=i.height+t.padding,s=[{x:-2*a/6,y:0},{x:n+2*a/6,y:0},{x:n-a/6,y:-a},{x:a/6,y:-a}],u=Jd(r,n,a,s);return u.attr("style",t.style),so(t,u),t.intersect=function(h){return Fs.polygon(t,s,h)},r},"trapezoid"),lDe=k(async(e,t)=>{let{shapeSvg:r,bbox:i}=await hl(e,t,wh(t,void 0),!0),n=i.width+t.padding,a=i.height+t.padding,s=[{x:a/6,y:0},{x:n-a/6,y:0},{x:n+2*a/6,y:-a},{x:-2*a/6,y:-a}],u=Jd(r,n,a,s);return u.attr("style",t.style),so(t,u),t.intersect=function(h){return Fs.polygon(t,s,h)},r},"inv_trapezoid"),uDe=k(async(e,t)=>{let{shapeSvg:r,bbox:i}=await hl(e,t,wh(t,void 0),!0),n=i.width+t.padding,a=i.height+t.padding,s=[{x:0,y:0},{x:n+a/2,y:0},{x:n,y:-a/2},{x:n+a/2,y:-a},{x:0,y:-a}],u=Jd(r,n,a,s);return u.attr("style",t.style),so(t,u),t.intersect=function(h){return Fs.polygon(t,s,h)},r},"rect_right_inv_arrow"),hDe=k(async(e,t)=>{let{shapeSvg:r,bbox:i}=await hl(e,t,wh(t,void 0),!0),n=i.width+t.padding,a=n/2,s=a/(2.5+n/50),u=i.height+s+t.padding,h="M 0,"+s+" a "+a+","+s+" 0,0,0 "+n+" 0 a "+a+","+s+" 0,0,0 "+-n+" 0 l 0,"+u+" a "+a+","+s+" 0,0,0 "+n+" 0 l 0,"+-u,d=r.attr("label-offset-y",s).insert("path",":first-child").attr("style",t.style).attr("d",h).attr("transform","translate("+-n/2+","+-(u/2+s)+")");return so(t,d),t.intersect=function(p){let g=Fs.rect(t,p),y=g.x-t.x;if(a!=0&&(Math.abs(y)<t.width/2||Math.abs(y)==t.width/2&&Math.abs(g.y-t.y)>t.height/2-s)){let m=s*s*(1-y*y/(a*a));m!=0&&(m=Math.sqrt(m)),m=s-m,p.y-t.y>0&&(m=-m),g.y+=m}return g},r},"cylinder"),cDe=k(async(e,t)=>{let{shapeSvg:r,bbox:i,halfPadding:n}=await hl(e,t,"node "+t.classes+" "+t.class,!0),a=r.insert("rect",":first-child"),s=t.positioned?t.width:i.width+t.padding,u=t.positioned?t.height:i.height+t.padding,h=t.positioned?-s/2:-i.width/2-n,d=t.positioned?-u/2:-i.height/2-n;if(a.attr("class","basic label-container").attr("style",t.style).attr("rx",t.rx).attr("ry",t.ry).attr("x",h).attr("y",d).attr("width",s).attr("height",u),t.props){let p=new Set(Object.keys(t.props));t.props.borders&&($P(a,t.props.borders,s,u),p.delete("borders")),p.forEach(g=>{Ce.warn(`Unknown node property ${g}`)})}return so(t,a),t.intersect=function(p){return Fs.rect(t,p)},r},"rect"),dDe=k(async(e,t)=>{let{shapeSvg:r,bbox:i,halfPadding:n}=await hl(e,t,"node "+t.classes,!0),a=r.insert("rect",":first-child"),s=t.positioned?t.width:i.width+t.padding,u=t.positioned?t.height:i.height+t.padding,h=t.positioned?-s/2:-i.width/2-n,d=t.positioned?-u/2:-i.height/2-n;if(a.attr("class","basic cluster composite label-container").attr("style",t.style).attr("rx",t.rx).attr("ry",t.ry).attr("x",h).attr("y",d).attr("width",s).attr("height",u),t.props){let p=new Set(Object.keys(t.props));t.props.borders&&($P(a,t.props.borders,s,u),p.delete("borders")),p.forEach(g=>{Ce.warn(`Unknown node property ${g}`)})}return so(t,a),t.intersect=function(p){return Fs.rect(t,p)},r},"composite"),pDe=k(async(e,t)=>{let{shapeSvg:r}=await hl(e,t,"label",!0);Ce.trace("Classes = ",t.class);let i=r.insert("rect",":first-child"),n=0,a=0;if(i.attr("width",n).attr("height",a),r.attr("class","label edgeLabel"),t.props){let s=new Set(Object.keys(t.props));t.props.borders&&($P(i,t.props.borders,n,a),s.delete("borders")),s.forEach(u=>{Ce.warn(`Unknown node property ${u}`)})}return so(t,i),t.intersect=function(s){return Fs.rect(t,s)},r},"labelRect"),k($P,"applyNodePropertyBorders"),fDe=k((e,t)=>{let r;t.classes?r="node "+t.classes:r="node default";let i=e.insert("g").attr("class",r).attr("id",t.domId||t.id),n=i.insert("rect",":first-child"),a=i.insert("line"),s=i.insert("g").attr("class","label"),u=t.labelText.flat?t.labelText.flat():t.labelText,h="";typeof u=="object"?h=u[0]:h=u,Ce.info("Label text abc79",h,u,typeof u=="object");let d=s.node().appendChild(fc(h,t.labelStyle,!0,!0)),p={width:0,height:0};if(es(at().flowchart.htmlLabels)){let _=d.children[0],E=Nr(d);p=_.getBoundingClientRect(),E.attr("width",p.width),E.attr("height",p.height)}Ce.info("Text 2",u);let g=u.slice(1,u.length),y=d.getBBox(),m=s.node().appendChild(fc(g.join?g.join("<br/>"):g,t.labelStyle,!0,!0));if(es(at().flowchart.htmlLabels)){let _=m.children[0],E=Nr(m);p=_.getBoundingClientRect(),E.attr("width",p.width),E.attr("height",p.height)}let x=t.padding/2;return Nr(m).attr("transform","translate( "+(p.width>y.width?0:(y.width-p.width)/2)+", "+(y.height+x+5)+")"),Nr(d).attr("transform","translate( "+(p.width<y.width?0:-(y.width-p.width)/2)+", 0)"),p=s.node().getBBox(),s.attr("transform","translate("+-p.width/2+", "+(-p.height/2-x+3)+")"),n.attr("class","outer title-state").attr("x",-p.width/2-x).attr("y",-p.height/2-x).attr("width",p.width+t.padding).attr("height",p.height+t.padding),a.attr("class","divider").attr("x1",-p.width/2-x).attr("x2",p.width/2+x).attr("y1",-p.height/2-x+y.height+x).attr("y2",-p.height/2-x+y.height+x),so(t,n),t.intersect=function(_){return Fs.rect(t,_)},i},"rectWithTitle"),gDe=k(async(e,t)=>{let{shapeSvg:r,bbox:i}=await hl(e,t,wh(t,void 0),!0),n=i.height+t.padding,a=i.width+n/4+t.padding,s=r.insert("rect",":first-child").attr("style",t.style).attr("rx",n/2).attr("ry",n/2).attr("x",-a/2).attr("y",-n/2).attr("width",a).attr("height",n);return so(t,s),t.intersect=function(u){return Fs.rect(t,u)},r},"stadium"),mDe=k(async(e,t)=>{let{shapeSvg:r,bbox:i,halfPadding:n}=await hl(e,t,wh(t,void 0),!0),a=r.insert("circle",":first-child");return a.attr("style",t.style).attr("rx",t.rx).attr("ry",t.ry).attr("r",i.width/2+n).attr("width",i.width+t.padding).attr("height",i.height+t.padding),Ce.info("Circle main"),so(t,a),t.intersect=function(s){return Ce.info("Circle intersect",t,i.width/2+n,s),Fs.circle(t,i.width/2+n,s)},r},"circle"),yDe=k(async(e,t)=>{let{shapeSvg:r,bbox:i,halfPadding:n}=await hl(e,t,wh(t,void 0),!0),a=5,s=r.insert("g",":first-child"),u=s.insert("circle"),h=s.insert("circle");return s.attr("class",t.class),u.attr("style",t.style).attr("rx",t.rx).attr("ry",t.ry).attr("r",i.width/2+n+a).attr("width",i.width+t.padding+a*2).attr("height",i.height+t.padding+a*2),h.attr("style",t.style).attr("rx",t.rx).attr("ry",t.ry).attr("r",i.width/2+n).attr("width",i.width+t.padding).attr("height",i.height+t.padding),Ce.info("DoubleCircle main"),so(t,u),t.intersect=function(d){return Ce.info("DoubleCircle intersect",t,i.width/2+n+a,d),Fs.circle(t,i.width/2+n+a,d)},r},"doublecircle"),vDe=k(async(e,t)=>{let{shapeSvg:r,bbox:i}=await hl(e,t,wh(t,void 0),!0),n=i.width+t.padding,a=i.height+t.padding,s=[{x:0,y:0},{x:n,y:0},{x:n,y:-a},{x:0,y:-a},{x:0,y:0},{x:-8,y:0},{x:n+8,y:0},{x:n+8,y:-a},{x:-8,y:-a},{x:-8,y:0}],u=Jd(r,n,a,s);return u.attr("style",t.style),so(t,u),t.intersect=function(h){return Fs.polygon(t,s,h)},r},"subroutine"),xDe=k((e,t)=>{let r=e.insert("g").attr("class","node default").attr("id",t.domId||t.id),i=r.insert("circle",":first-child");return i.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),so(t,i),t.intersect=function(n){return Fs.circle(t,7,n)},r},"start"),Wee=k((e,t,r)=>{let i=e.insert("g").attr("class","node default").attr("id",t.domId||t.id),n=70,a=10;r==="LR"&&(n=10,a=70);let s=i.append("rect").attr("x",-1*n/2).attr("y",-1*a/2).attr("width",n).attr("height",a).attr("class","fork-join");return so(t,s),t.height=t.height+t.padding/2,t.width=t.width+t.padding/2,t.intersect=function(u){return Fs.rect(t,u)},i},"forkJoin"),bDe=k((e,t)=>{let r=e.insert("g").attr("class","node default").attr("id",t.domId||t.id),i=r.insert("circle",":first-child"),n=r.insert("circle",":first-child");return n.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),i.attr("class","state-end").attr("r",5).attr("width",10).attr("height",10),so(t,n),t.intersect=function(a){return Fs.circle(t,7,a)},r},"end"),_De=k((e,t)=>{let r=t.padding/2,i=4,n=8,a;t.classes?a="node "+t.classes:a="node default";let s=e.insert("g").attr("class",a).attr("id",t.domId||t.id),u=s.insert("rect",":first-child"),h=s.insert("line"),d=s.insert("line"),p=0,g=i,y=s.insert("g").attr("class","label"),m=0,x=t.classData.annotations?.[0],_=t.classData.annotations[0]?"\xAB"+t.classData.annotations[0]+"\xBB":"",E=y.node().appendChild(fc(_,t.labelStyle,!0,!0)),w=E.getBBox();if(es(at().flowchart.htmlLabels)){let L=E.children[0],$=Nr(E);w=L.getBoundingClientRect(),$.attr("width",w.width),$.attr("height",w.height)}t.classData.annotations[0]&&(g+=w.height+i,p+=w.width);let C=t.classData.label;t.classData.type!==void 0&&t.classData.type!==""&&(at().flowchart.htmlLabels?C+="&lt;"+t.classData.type+"&gt;":C+="<"+t.classData.type+">");let A=y.node().appendChild(fc(C,t.labelStyle,!0,!0));Nr(A).attr("class","classTitle");let M=A.getBBox();if(es(at().flowchart.htmlLabels)){let L=A.children[0],$=Nr(A);M=L.getBoundingClientRect(),$.attr("width",M.width),$.attr("height",M.height)}g+=M.height+i,M.width>p&&(p=M.width);let N=[];t.classData.members.forEach(L=>{let $=L.getDisplayDetails(),G=$.displayText;at().flowchart.htmlLabels&&(G=G.replace(/</g,"&lt;").replace(/>/g,"&gt;"));let z=y.node().appendChild(fc(G,$.cssStyle?$.cssStyle:t.labelStyle,!0,!0)),F=z.getBBox();if(es(at().flowchart.htmlLabels)){let X=z.children[0],I=Nr(z);F=X.getBoundingClientRect(),I.attr("width",F.width),I.attr("height",F.height)}F.width>p&&(p=F.width),g+=F.height+i,N.push(z)}),g+=n;let B=[];if(t.classData.methods.forEach(L=>{let $=L.getDisplayDetails(),G=$.displayText;at().flowchart.htmlLabels&&(G=G.replace(/</g,"&lt;").replace(/>/g,"&gt;"));let z=y.node().appendChild(fc(G,$.cssStyle?$.cssStyle:t.labelStyle,!0,!0)),F=z.getBBox();if(es(at().flowchart.htmlLabels)){let X=z.children[0],I=Nr(z);F=X.getBoundingClientRect(),I.attr("width",F.width),I.attr("height",F.height)}F.width>p&&(p=F.width),g+=F.height+i,B.push(z)}),g+=n,x){let L=(p-w.width)/2;Nr(E).attr("transform","translate( "+(-1*p/2+L)+", "+-1*g/2+")"),m=w.height+i}let O=(p-M.width)/2;return Nr(A).attr("transform","translate( "+(-1*p/2+O)+", "+(-1*g/2+m)+")"),m+=M.height+i,h.attr("class","divider").attr("x1",-p/2-r).attr("x2",p/2+r).attr("y1",-g/2-r+n+m).attr("y2",-g/2-r+n+m),m+=n,N.forEach(L=>{Nr(L).attr("transform","translate( "+-p/2+", "+(-1*g/2+m+n/2)+")");let $=L?.getBBox();m+=($?.height??0)+i}),m+=n,d.attr("class","divider").attr("x1",-p/2-r).attr("x2",p/2+r).attr("y1",-g/2-r+n+m).attr("y2",-g/2-r+n+m),m+=n,B.forEach(L=>{Nr(L).attr("transform","translate( "+-p/2+", "+(-1*g/2+m)+")");let $=L?.getBBox();m+=($?.height??0)+i}),u.attr("style",t.style).attr("class","outer title-state").attr("x",-p/2-r).attr("y",-(g/2)-r).attr("width",p+t.padding).attr("height",g+t.padding),so(t,u),t.intersect=function(L){return Fs.rect(t,L)},s},"class_box"),Yee={rhombus:Vee,composite:dDe,question:Vee,rect:cDe,labelRect:pDe,rectWithTitle:fDe,choice:tDe,circle:mDe,doublecircle:yDe,stadium:gDe,hexagon:rDe,block_arrow:iDe,rect_left_inv_arrow:nDe,lean_right:aDe,lean_left:sDe,trapezoid:oDe,inv_trapezoid:lDe,rect_right_inv_arrow:uDe,cylinder:hDe,start:xDe,end:bDe,note:eDe,subroutine:vDe,fork:Wee,join:Wee,class_box:_De},G8={},qee=k(async(e,t,r)=>{let i,n;if(t.link){let a;at().securityLevel==="sandbox"?a="_top":t.linkTarget&&(a=t.linkTarget||"_blank"),i=e.insert("svg:a").attr("xlink:href",t.link).attr("target",a),n=await Yee[t.shape](i,t,r)}else n=await Yee[t.shape](e,t,r),i=n;return t.tooltip&&n.attr("title",t.tooltip),t.class&&n.attr("class","node default "+t.class),G8[t.id]=i,t.haveCallback&&G8[t.id].attr("class",G8[t.id].attr("class")+" clickable"),i},"insertNode"),wDe=k(e=>{let t=G8[e.id];Ce.trace("Transforming node",e.diff,e,"translate("+(e.x-e.width/2-5)+", "+e.width/2+")");let r=8,i=e.diff||0;return e.clusterNode?t.attr("transform","translate("+(e.x+i-e.width/2)+", "+(e.y-e.height/2-r)+")"):t.attr("transform","translate("+e.x+", "+e.y+")"),i},"positionNode"),k(Oee,"getNodeFromBlock"),k(ZLe,"calculateBlockSize"),k(QLe,"insertBlockPositioned"),k(zP,"performOperations"),k(JLe,"calculateBlockSizes"),k(eRe,"insertBlocks"),k(tRe,"insertEdges"),kDe=k(function(e,t){return t.db.getClasses()},"getClasses"),TDe=k(async function(e,t,r,i){let{securityLevel:n,block:a}=cs(),s=i.db,u;n==="sandbox"&&(u=Nr("#i"+t));let h=Nr(n==="sandbox"?u.nodes()[0].contentDocument.body:"body"),d=n==="sandbox"?h.select(`[id="${t}"]`):Nr(`[id="${t}"]`);ORe(d,["point","circle","cross"],i.type,t);let p=s.getBlocks(),g=s.getBlocksFlat(),y=s.getEdges(),m=d.insert("g").attr("class","block");await JLe(m,p,s);let x=HLe(s);if(await eRe(m,p,s),await tRe(m,y,g,s,t),x){let _=x,E=Math.max(1,Math.round(.125*(_.width/_.height))),w=_.height+E+10,C=_.width+10,{useMaxWidth:A}=a;Oo(d,w,C,!!A),Ce.debug("Here Bounds",x,_),d.attr("viewBox",`${_.x-5} ${_.y-5} ${_.width+10} ${_.height+10}`)}},"draw"),EDe={draw:TDe,getClasses:kDe},CDe={parser:rRe,db:_Re,renderer:EDe,styles:kRe}}),SDe=hi((e,t)=>{(function(r,i){typeof e=="object"&&typeof t=="object"?t.exports=i():typeof define=="function"&&define.amd?define([],i):typeof e=="object"?e.layoutBase=i():r.layoutBase=i()})(e,function(){return function(r){var i={};function n(a){if(i[a])return i[a].exports;var s=i[a]={i:a,l:!1,exports:{}};return r[a].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=r,n.c=i,n.i=function(a){return a},n.d=function(a,s,u){n.o(a,s)||Object.defineProperty(a,s,{configurable:!1,enumerable:!0,get:u})},n.n=function(a){var s=a&&a.__esModule?function(){return a.default}:function(){return a};return n.d(s,"a",s),s},n.o=function(a,s){return Object.prototype.hasOwnProperty.call(a,s)},n.p="",n(n.s=28)}([function(r,i,n){"use strict";function a(){}a.QUALITY=1,a.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,a.DEFAULT_INCREMENTAL=!1,a.DEFAULT_ANIMATION_ON_LAYOUT=!0,a.DEFAULT_ANIMATION_DURING_LAYOUT=!1,a.DEFAULT_ANIMATION_PERIOD=50,a.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,a.DEFAULT_GRAPH_MARGIN=15,a.NODE_DIMENSIONS_INCLUDE_LABELS=!1,a.SIMPLE_NODE_SIZE=40,a.SIMPLE_NODE_HALF_SIZE=a.SIMPLE_NODE_SIZE/2,a.EMPTY_COMPOUND_NODE_SIZE=40,a.MIN_EDGE_LENGTH=1,a.WORLD_BOUNDARY=1e6,a.INITIAL_WORLD_BOUNDARY=a.WORLD_BOUNDARY/1e3,a.WORLD_CENTER_X=1200,a.WORLD_CENTER_Y=900,r.exports=a},function(r,i,n){"use strict";var a=n(2),s=n(8),u=n(9);function h(p,g,y){a.call(this,y),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=y,this.bendpoints=[],this.source=p,this.target=g}h.prototype=Object.create(a.prototype);for(var d in a)h[d]=a[d];h.prototype.getSource=function(){return this.source},h.prototype.getTarget=function(){return this.target},h.prototype.isInterGraph=function(){return this.isInterGraph},h.prototype.getLength=function(){return this.length},h.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},h.prototype.getBendpoints=function(){return this.bendpoints},h.prototype.getLca=function(){return this.lca},h.prototype.getSourceInLca=function(){return this.sourceInLca},h.prototype.getTargetInLca=function(){return this.targetInLca},h.prototype.getOtherEnd=function(p){if(this.source===p)return this.target;if(this.target===p)return this.source;throw"Node is not incident with this edge"},h.prototype.getOtherEndInGraph=function(p,g){for(var y=this.getOtherEnd(p),m=g.getGraphManager().getRoot();;){if(y.getOwner()==g)return y;if(y.getOwner()==m)break;y=y.getOwner().getParent()}return null},h.prototype.updateLength=function(){var p=new Array(4);this.isOverlapingSourceAndTarget=s.getIntersection(this.target.getRect(),this.source.getRect(),p),this.isOverlapingSourceAndTarget||(this.lengthX=p[0]-p[2],this.lengthY=p[1]-p[3],Math.abs(this.lengthX)<1&&(this.lengthX=u.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=u.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},h.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=u.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=u.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},r.exports=h},function(r,i,n){"use strict";function a(s){this.vGraphObject=s}r.exports=a},function(r,i,n){"use strict";var a=n(2),s=n(10),u=n(13),h=n(0),d=n(16),p=n(5);function g(m,x,_,E){_==null&&E==null&&(E=x),a.call(this,E),m.graphManager!=null&&(m=m.graphManager),this.estimatedSize=s.MIN_VALUE,this.inclusionTreeDepth=s.MAX_VALUE,this.vGraphObject=E,this.edges=[],this.graphManager=m,_!=null&&x!=null?this.rect=new u(x.x,x.y,_.width,_.height):this.rect=new u}g.prototype=Object.create(a.prototype);for(var y in a)g[y]=a[y];g.prototype.getEdges=function(){return this.edges},g.prototype.getChild=function(){return this.child},g.prototype.getOwner=function(){return this.owner},g.prototype.getWidth=function(){return this.rect.width},g.prototype.setWidth=function(m){this.rect.width=m},g.prototype.getHeight=function(){return this.rect.height},g.prototype.setHeight=function(m){this.rect.height=m},g.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},g.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},g.prototype.getCenter=function(){return new p(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},g.prototype.getLocation=function(){return new p(this.rect.x,this.rect.y)},g.prototype.getRect=function(){return this.rect},g.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},g.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},g.prototype.setRect=function(m,x){this.rect.x=m.x,this.rect.y=m.y,this.rect.width=x.width,this.rect.height=x.height},g.prototype.setCenter=function(m,x){this.rect.x=m-this.rect.width/2,this.rect.y=x-this.rect.height/2},g.prototype.setLocation=function(m,x){this.rect.x=m,this.rect.y=x},g.prototype.moveBy=function(m,x){this.rect.x+=m,this.rect.y+=x},g.prototype.getEdgeListToNode=function(m){var x=[],_,E=this;return E.edges.forEach(function(w){if(w.target==m){if(w.source!=E)throw"Incorrect edge source!";x.push(w)}}),x},g.prototype.getEdgesBetween=function(m){var x=[],_,E=this;return E.edges.forEach(function(w){if(!(w.source==E||w.target==E))throw"Incorrect edge source and/or target";(w.target==m||w.source==m)&&x.push(w)}),x},g.prototype.getNeighborsList=function(){var m=new Set,x=this;return x.edges.forEach(function(_){if(_.source==x)m.add(_.target);else{if(_.target!=x)throw"Incorrect incidency!";m.add(_.source)}}),m},g.prototype.withChildren=function(){var m=new Set,x,_;if(m.add(this),this.child!=null)for(var E=this.child.getNodes(),w=0;w<E.length;w++)x=E[w],_=x.withChildren(),_.forEach(function(C){m.add(C)});return m},g.prototype.getNoOfChildren=function(){var m=0,x;if(this.child==null)m=1;else for(var _=this.child.getNodes(),E=0;E<_.length;E++)x=_[E],m+=x.getNoOfChildren();return m==0&&(m=1),m},g.prototype.getEstimatedSize=function(){if(this.estimatedSize==s.MIN_VALUE)throw"assert failed";return this.estimatedSize},g.prototype.calcEstimatedSize=function(){return this.child==null?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},g.prototype.scatter=function(){var m,x,_=-h.INITIAL_WORLD_BOUNDARY,E=h.INITIAL_WORLD_BOUNDARY;m=h.WORLD_CENTER_X+d.nextDouble()*(E-_)+_;var w=-h.INITIAL_WORLD_BOUNDARY,C=h.INITIAL_WORLD_BOUNDARY;x=h.WORLD_CENTER_Y+d.nextDouble()*(C-w)+w,this.rect.x=m,this.rect.y=x},g.prototype.updateBounds=function(){if(this.getChild()==null)throw"assert failed";if(this.getChild().getNodes().length!=0){var m=this.getChild();if(m.updateBounds(!0),this.rect.x=m.getLeft(),this.rect.y=m.getTop(),this.setWidth(m.getRight()-m.getLeft()),this.setHeight(m.getBottom()-m.getTop()),h.NODE_DIMENSIONS_INCLUDE_LABELS){var x=m.getRight()-m.getLeft(),_=m.getBottom()-m.getTop();this.labelWidth&&(this.labelPosHorizontal=="left"?(this.rect.x-=this.labelWidth,this.setWidth(x+this.labelWidth)):this.labelPosHorizontal=="center"&&this.labelWidth>x?(this.rect.x-=(this.labelWidth-x)/2,this.setWidth(this.labelWidth)):this.labelPosHorizontal=="right"&&this.setWidth(x+this.labelWidth)),this.labelHeight&&(this.labelPosVertical=="top"?(this.rect.y-=this.labelHeight,this.setHeight(_+this.labelHeight)):this.labelPosVertical=="center"&&this.labelHeight>_?(this.rect.y-=(this.labelHeight-_)/2,this.setHeight(this.labelHeight)):this.labelPosVertical=="bottom"&&this.setHeight(_+this.labelHeight))}}},g.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==s.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},g.prototype.transform=function(m){var x=this.rect.x;x>h.WORLD_BOUNDARY?x=h.WORLD_BOUNDARY:x<-h.WORLD_BOUNDARY&&(x=-h.WORLD_BOUNDARY);var _=this.rect.y;_>h.WORLD_BOUNDARY?_=h.WORLD_BOUNDARY:_<-h.WORLD_BOUNDARY&&(_=-h.WORLD_BOUNDARY);var E=new p(x,_),w=m.inverseTransformPoint(E);this.setLocation(w.x,w.y)},g.prototype.getLeft=function(){return this.rect.x},g.prototype.getRight=function(){return this.rect.x+this.rect.width},g.prototype.getTop=function(){return this.rect.y},g.prototype.getBottom=function(){return this.rect.y+this.rect.height},g.prototype.getParent=function(){return this.owner==null?null:this.owner.getParent()},r.exports=g},function(r,i,n){"use strict";var a=n(0);function s(){}for(var u in a)s[u]=a[u];s.MAX_ITERATIONS=2500,s.DEFAULT_EDGE_LENGTH=50,s.DEFAULT_SPRING_STRENGTH=.45,s.DEFAULT_REPULSION_STRENGTH=4500,s.DEFAULT_GRAVITY_STRENGTH=.4,s.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,s.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,s.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,s.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,s.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,s.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,s.COOLING_ADAPTATION_FACTOR=.33,s.ADAPTATION_LOWER_NODE_LIMIT=1e3,s.ADAPTATION_UPPER_NODE_LIMIT=5e3,s.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,s.MAX_NODE_DISPLACEMENT=s.MAX_NODE_DISPLACEMENT_INCREMENTAL*3,s.MIN_REPULSION_DIST=s.DEFAULT_EDGE_LENGTH/10,s.CONVERGENCE_CHECK_PERIOD=100,s.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,s.MIN_EDGE_LENGTH=1,s.GRID_CALCULATION_CHECK_PERIOD=10,r.exports=s},function(r,i,n){"use strict";function a(s,u){s==null&&u==null?(this.x=0,this.y=0):(this.x=s,this.y=u)}a.prototype.getX=function(){return this.x},a.prototype.getY=function(){return this.y},a.prototype.setX=function(s){this.x=s},a.prototype.setY=function(s){this.y=s},a.prototype.getDifference=function(s){return new DimensionD(this.x-s.x,this.y-s.y)},a.prototype.getCopy=function(){return new a(this.x,this.y)},a.prototype.translate=function(s){return this.x+=s.width,this.y+=s.height,this},r.exports=a},function(r,i,n){"use strict";var a=n(2),s=n(10),u=n(0),h=n(7),d=n(3),p=n(1),g=n(13),y=n(12),m=n(11);function x(E,w,C){a.call(this,C),this.estimatedSize=s.MIN_VALUE,this.margin=u.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=E,w!=null&&w instanceof h?this.graphManager=w:w!=null&&w instanceof Layout&&(this.graphManager=w.graphManager)}x.prototype=Object.create(a.prototype);for(var _ in a)x[_]=a[_];x.prototype.getNodes=function(){return this.nodes},x.prototype.getEdges=function(){return this.edges},x.prototype.getGraphManager=function(){return this.graphManager},x.prototype.getParent=function(){return this.parent},x.prototype.getLeft=function(){return this.left},x.prototype.getRight=function(){return this.right},x.prototype.getTop=function(){return this.top},x.prototype.getBottom=function(){return this.bottom},x.prototype.isConnected=function(){return this.isConnected},x.prototype.add=function(E,w,C){if(w==null&&C==null){var A=E;if(this.graphManager==null)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(A)>-1)throw"Node already in graph!";return A.owner=this,this.getNodes().push(A),A}else{var M=E;if(!(this.getNodes().indexOf(w)>-1&&this.getNodes().indexOf(C)>-1))throw"Source or target not in graph!";if(!(w.owner==C.owner&&w.owner==this))throw"Both owners must be this graph!";return w.owner!=C.owner?null:(M.source=w,M.target=C,M.isInterGraph=!1,this.getEdges().push(M),w.edges.push(M),C!=w&&C.edges.push(M),M)}},x.prototype.remove=function(E){var w=E;if(E instanceof d){if(w==null)throw"Node is null!";if(!(w.owner!=null&&w.owner==this))throw"Owner graph is invalid!";if(this.graphManager==null)throw"Owner graph manager is invalid!";for(var C=w.edges.slice(),A,M=C.length,N=0;N<M;N++)A=C[N],A.isInterGraph?this.graphManager.remove(A):A.source.owner.remove(A);var B=this.nodes.indexOf(w);if(B==-1)throw"Node not in owner node list!";this.nodes.splice(B,1)}else if(E instanceof p){var A=E;if(A==null)throw"Edge is null!";if(!(A.source!=null&&A.target!=null))throw"Source and/or target is null!";if(!(A.source.owner!=null&&A.target.owner!=null&&A.source.owner==this&&A.target.owner==this))throw"Source and/or target owner is invalid!";var O=A.source.edges.indexOf(A),L=A.target.edges.indexOf(A);if(!(O>-1&&L>-1))throw"Source and/or target doesn't know this edge!";A.source.edges.splice(O,1),A.target!=A.source&&A.target.edges.splice(L,1);var B=A.source.owner.getEdges().indexOf(A);if(B==-1)throw"Not in owner's edge list!";A.source.owner.getEdges().splice(B,1)}},x.prototype.updateLeftTop=function(){for(var E=s.MAX_VALUE,w=s.MAX_VALUE,C,A,M,N=this.getNodes(),B=N.length,O=0;O<B;O++){var L=N[O];C=L.getTop(),A=L.getLeft(),E>C&&(E=C),w>A&&(w=A)}return E==s.MAX_VALUE?null:(N[0].getParent().paddingLeft!=null?M=N[0].getParent().paddingLeft:M=this.margin,this.left=w-M,this.top=E-M,new y(this.left,this.top))},x.prototype.updateBounds=function(E){for(var w=s.MAX_VALUE,C=-s.MAX_VALUE,A=s.MAX_VALUE,M=-s.MAX_VALUE,N,B,O,L,$,G=this.nodes,z=G.length,F=0;F<z;F++){var X=G[F];E&&X.child!=null&&X.updateBounds(),N=X.getLeft(),B=X.getRight(),O=X.getTop(),L=X.getBottom(),w>N&&(w=N),C<B&&(C=B),A>O&&(A=O),M<L&&(M=L)}var I=new g(w,A,C-w,M-A);w==s.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),G[0].getParent().paddingLeft!=null?$=G[0].getParent().paddingLeft:$=this.margin,this.left=I.x-$,this.right=I.x+I.width+$,this.top=I.y-$,this.bottom=I.y+I.height+$},x.calculateBounds=function(E){for(var w=s.MAX_VALUE,C=-s.MAX_VALUE,A=s.MAX_VALUE,M=-s.MAX_VALUE,N,B,O,L,$=E.length,G=0;G<$;G++){var z=E[G];N=z.getLeft(),B=z.getRight(),O=z.getTop(),L=z.getBottom(),w>N&&(w=N),C<B&&(C=B),A>O&&(A=O),M<L&&(M=L)}var F=new g(w,A,C-w,M-A);return F},x.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},x.prototype.getEstimatedSize=function(){if(this.estimatedSize==s.MIN_VALUE)throw"assert failed";return this.estimatedSize},x.prototype.calcEstimatedSize=function(){for(var E=0,w=this.nodes,C=w.length,A=0;A<C;A++){var M=w[A];E+=M.calcEstimatedSize()}return E==0?this.estimatedSize=u.EMPTY_COMPOUND_NODE_SIZE:this.estimatedSize=E/Math.sqrt(this.nodes.length),this.estimatedSize},x.prototype.updateConnected=function(){var E=this;if(this.nodes.length==0){this.isConnected=!0;return}var w=new m,C=new Set,A=this.nodes[0],M,N,B=A.withChildren();for(B.forEach(function(F){w.push(F),C.add(F)});w.length!==0;){A=w.shift(),M=A.getEdges();for(var O=M.length,L=0;L<O;L++){var $=M[L];if(N=$.getOtherEndInGraph(A,this),N!=null&&!C.has(N)){var G=N.withChildren();G.forEach(function(F){w.push(F),C.add(F)})}}}if(this.isConnected=!1,C.size>=this.nodes.length){var z=0;C.forEach(function(F){F.owner==E&&z++}),z==this.nodes.length&&(this.isConnected=!0)}},r.exports=x},function(r,i,n){"use strict";var a,s=n(1);function u(h){a=n(6),this.layout=h,this.graphs=[],this.edges=[]}u.prototype.addRoot=function(){var h=this.layout.newGraph(),d=this.layout.newNode(null),p=this.add(h,d);return this.setRootGraph(p),this.rootGraph},u.prototype.add=function(h,d,p,g,y){if(p==null&&g==null&&y==null){if(h==null)throw"Graph is null!";if(d==null)throw"Parent node is null!";if(this.graphs.indexOf(h)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(h),h.parent!=null)throw"Already has a parent!";if(d.child!=null)throw"Already has a child!";return h.parent=d,d.child=h,h}else{y=p,g=d,p=h;var m=g.getOwner(),x=y.getOwner();if(!(m!=null&&m.getGraphManager()==this))throw"Source not in this graph mgr!";if(!(x!=null&&x.getGraphManager()==this))throw"Target not in this graph mgr!";if(m==x)return p.isInterGraph=!1,m.add(p,g,y);if(p.isInterGraph=!0,p.source=g,p.target=y,this.edges.indexOf(p)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(p),!(p.source!=null&&p.target!=null))throw"Edge source and/or target is null!";if(!(p.source.edges.indexOf(p)==-1&&p.target.edges.indexOf(p)==-1))throw"Edge already in source and/or target incidency list!";return p.source.edges.push(p),p.target.edges.push(p),p}},u.prototype.remove=function(h){if(h instanceof a){var d=h;if(d.getGraphManager()!=this)throw"Graph not in this graph mgr";if(!(d==this.rootGraph||d.parent!=null&&d.parent.graphManager==this))throw"Invalid parent node!";var p=[];p=p.concat(d.getEdges());for(var g,y=p.length,m=0;m<y;m++)g=p[m],d.remove(g);var x=[];x=x.concat(d.getNodes());var _;y=x.length;for(var m=0;m<y;m++)_=x[m],d.remove(_);d==this.rootGraph&&this.setRootGraph(null);var E=this.graphs.indexOf(d);this.graphs.splice(E,1),d.parent=null}else if(h instanceof s){if(g=h,g==null)throw"Edge is null!";if(!g.isInterGraph)throw"Not an inter-graph edge!";if(!(g.source!=null&&g.target!=null))throw"Source and/or target is null!";if(!(g.source.edges.indexOf(g)!=-1&&g.target.edges.indexOf(g)!=-1))throw"Source and/or target doesn't know this edge!";var E=g.source.edges.indexOf(g);if(g.source.edges.splice(E,1),E=g.target.edges.indexOf(g),g.target.edges.splice(E,1),!(g.source.owner!=null&&g.source.owner.getGraphManager()!=null))throw"Edge owner graph or owner graph manager is null!";if(g.source.owner.getGraphManager().edges.indexOf(g)==-1)throw"Not in owner graph manager's edge list!";var E=g.source.owner.getGraphManager().edges.indexOf(g);g.source.owner.getGraphManager().edges.splice(E,1)}},u.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},u.prototype.getGraphs=function(){return this.graphs},u.prototype.getAllNodes=function(){if(this.allNodes==null){for(var h=[],d=this.getGraphs(),p=d.length,g=0;g<p;g++)h=h.concat(d[g].getNodes());this.allNodes=h}return this.allNodes},u.prototype.resetAllNodes=function(){this.allNodes=null},u.prototype.resetAllEdges=function(){this.allEdges=null},u.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},u.prototype.getAllEdges=function(){if(this.allEdges==null){for(var h=[],d=this.getGraphs(),p=d.length,g=0;g<d.length;g++)h=h.concat(d[g].getEdges());h=h.concat(this.edges),this.allEdges=h}return this.allEdges},u.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},u.prototype.setAllNodesToApplyGravitation=function(h){if(this.allNodesToApplyGravitation!=null)throw"assert failed";this.allNodesToApplyGravitation=h},u.prototype.getRoot=function(){return this.rootGraph},u.prototype.setRootGraph=function(h){if(h.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=h,h.parent==null&&(h.parent=this.layout.newNode("Root node"))},u.prototype.getLayout=function(){return this.layout},u.prototype.isOneAncestorOfOther=function(h,d){if(!(h!=null&&d!=null))throw"assert failed";if(h==d)return!0;var p=h.getOwner(),g;do{if(g=p.getParent(),g==null)break;if(g==d)return!0;if(p=g.getOwner(),p==null)break}while(!0);p=d.getOwner();do{if(g=p.getParent(),g==null)break;if(g==h)return!0;if(p=g.getOwner(),p==null)break}while(!0);return!1},u.prototype.calcLowestCommonAncestors=function(){for(var h,d,p,g,y,m=this.getAllEdges(),x=m.length,_=0;_<x;_++){if(h=m[_],d=h.source,p=h.target,h.lca=null,h.sourceInLca=d,h.targetInLca=p,d==p){h.lca=d.getOwner();continue}for(g=d.getOwner();h.lca==null;){for(h.targetInLca=p,y=p.getOwner();h.lca==null;){if(y==g){h.lca=y;break}if(y==this.rootGraph)break;if(h.lca!=null)throw"assert failed";h.targetInLca=y.getParent(),y=h.targetInLca.getOwner()}if(g==this.rootGraph)break;h.lca==null&&(h.sourceInLca=g.getParent(),g=h.sourceInLca.getOwner())}if(h.lca==null)throw"assert failed"}},u.prototype.calcLowestCommonAncestor=function(h,d){if(h==d)return h.getOwner();var p=h.getOwner();do{if(p==null)break;var g=d.getOwner();do{if(g==null)break;if(g==p)return g;g=g.getParent().getOwner()}while(!0);p=p.getParent().getOwner()}while(!0);return p},u.prototype.calcInclusionTreeDepths=function(h,d){h==null&&d==null&&(h=this.rootGraph,d=1);for(var p,g=h.getNodes(),y=g.length,m=0;m<y;m++)p=g[m],p.inclusionTreeDepth=d,p.child!=null&&this.calcInclusionTreeDepths(p.child,d+1)},u.prototype.includesInvalidEdge=function(){for(var h,d=[],p=this.edges.length,g=0;g<p;g++)h=this.edges[g],this.isOneAncestorOfOther(h.source,h.target)&&d.push(h);for(var g=0;g<d.length;g++)this.remove(d[g]);return!1},r.exports=u},function(r,i,n){"use strict";var a=n(12);function s(){}s.calcSeparationAmount=function(u,h,d,p){if(!u.intersects(h))throw"assert failed";var g=new Array(2);this.decideDirectionsForOverlappingNodes(u,h,g),d[0]=Math.min(u.getRight(),h.getRight())-Math.max(u.x,h.x),d[1]=Math.min(u.getBottom(),h.getBottom())-Math.max(u.y,h.y),u.getX()<=h.getX()&&u.getRight()>=h.getRight()?d[0]+=Math.min(h.getX()-u.getX(),u.getRight()-h.getRight()):h.getX()<=u.getX()&&h.getRight()>=u.getRight()&&(d[0]+=Math.min(u.getX()-h.getX(),h.getRight()-u.getRight())),u.getY()<=h.getY()&&u.getBottom()>=h.getBottom()?d[1]+=Math.min(h.getY()-u.getY(),u.getBottom()-h.getBottom()):h.getY()<=u.getY()&&h.getBottom()>=u.getBottom()&&(d[1]+=Math.min(u.getY()-h.getY(),h.getBottom()-u.getBottom()));var y=Math.abs((h.getCenterY()-u.getCenterY())/(h.getCenterX()-u.getCenterX()));h.getCenterY()===u.getCenterY()&&h.getCenterX()===u.getCenterX()&&(y=1);var m=y*d[0],x=d[1]/y;d[0]<x?x=d[0]:m=d[1],d[0]=-1*g[0]*(x/2+p),d[1]=-1*g[1]*(m/2+p)},s.decideDirectionsForOverlappingNodes=function(u,h,d){u.getCenterX()<h.getCenterX()?d[0]=-1:d[0]=1,u.getCenterY()<h.getCenterY()?d[1]=-1:d[1]=1},s.getIntersection2=function(u,h,d){var p=u.getCenterX(),g=u.getCenterY(),y=h.getCenterX(),m=h.getCenterY();if(u.intersects(h))return d[0]=p,d[1]=g,d[2]=y,d[3]=m,!0;var x=u.getX(),_=u.getY(),E=u.getRight(),w=u.getX(),C=u.getBottom(),A=u.getRight(),M=u.getWidthHalf(),N=u.getHeightHalf(),B=h.getX(),O=h.getY(),L=h.getRight(),$=h.getX(),G=h.getBottom(),z=h.getRight(),F=h.getWidthHalf(),X=h.getHeightHalf(),I=!1,j=!1;if(p===y){if(g>m)return d[0]=p,d[1]=_,d[2]=y,d[3]=G,!1;if(g<m)return d[0]=p,d[1]=C,d[2]=y,d[3]=O,!1}else if(g===m){if(p>y)return d[0]=x,d[1]=g,d[2]=L,d[3]=m,!1;if(p<y)return d[0]=E,d[1]=g,d[2]=B,d[3]=m,!1}else{var H=u.height/u.width,V=h.height/h.width,P=(m-g)/(y-p),q=void 0,Z=void 0,J=void 0,ae=void 0,ue=void 0,be=void 0;if(-H===P?p>y?(d[0]=w,d[1]=C,I=!0):(d[0]=E,d[1]=_,I=!0):H===P&&(p>y?(d[0]=x,d[1]=_,I=!0):(d[0]=A,d[1]=C,I=!0)),-V===P?y>p?(d[2]=$,d[3]=G,j=!0):(d[2]=L,d[3]=O,j=!0):V===P&&(y>p?(d[2]=B,d[3]=O,j=!0):(d[2]=z,d[3]=G,j=!0)),I&&j)return!1;if(p>y?g>m?(q=this.getCardinalDirection(H,P,4),Z=this.getCardinalDirection(V,P,2)):(q=this.getCardinalDirection(-H,P,3),Z=this.getCardinalDirection(-V,P,1)):g>m?(q=this.getCardinalDirection(-H,P,1),Z=this.getCardinalDirection(-V,P,3)):(q=this.getCardinalDirection(H,P,2),Z=this.getCardinalDirection(V,P,4)),!I)switch(q){case 1:ae=_,J=p+-N/P,d[0]=J,d[1]=ae;break;case 2:J=A,ae=g+M*P,d[0]=J,d[1]=ae;break;case 3:ae=C,J=p+N/P,d[0]=J,d[1]=ae;break;case 4:J=w,ae=g+-M*P,d[0]=J,d[1]=ae;break}if(!j)switch(Z){case 1:be=O,ue=y+-X/P,d[2]=ue,d[3]=be;break;case 2:ue=z,be=m+F*P,d[2]=ue,d[3]=be;break;case 3:be=G,ue=y+X/P,d[2]=ue,d[3]=be;break;case 4:ue=$,be=m+-F*P,d[2]=ue,d[3]=be;break}}return!1},s.getCardinalDirection=function(u,h,d){return u>h?d:1+d%4},s.getIntersection=function(u,h,d,p){if(p==null)return this.getIntersection2(u,h,d);var g=u.x,y=u.y,m=h.x,x=h.y,_=d.x,E=d.y,w=p.x,C=p.y,A=void 0,M=void 0,N=void 0,B=void 0,O=void 0,L=void 0,$=void 0,G=void 0,z=void 0;return N=x-y,O=g-m,$=m*y-g*x,B=C-E,L=_-w,G=w*E-_*C,z=N*L-B*O,z===0?null:(A=(O*G-L*$)/z,M=(B*$-N*G)/z,new a(A,M))},s.angleOfVector=function(u,h,d,p){var g=void 0;return u!==d?(g=Math.atan((p-h)/(d-u)),d<u?g+=Math.PI:p<h&&(g+=this.TWO_PI)):p<h?g=this.ONE_AND_HALF_PI:g=this.HALF_PI,g},s.doIntersect=function(u,h,d,p){var g=u.x,y=u.y,m=h.x,x=h.y,_=d.x,E=d.y,w=p.x,C=p.y,A=(m-g)*(C-E)-(w-_)*(x-y);if(A===0)return!1;var M=((C-E)*(w-g)+(_-w)*(C-y))/A,N=((y-x)*(w-g)+(m-g)*(C-y))/A;return 0<M&&M<1&&0<N&&N<1},s.findCircleLineIntersections=function(u,h,d,p,g,y,m){var x=(d-u)*(d-u)+(p-h)*(p-h),_=2*((u-g)*(d-u)+(h-y)*(p-h)),E=(u-g)*(u-g)+(h-y)*(h-y)-m*m,w=_*_-4*x*E;if(w>=0){var C=(-_+Math.sqrt(_*_-4*x*E))/(2*x),A=(-_-Math.sqrt(_*_-4*x*E))/(2*x),M=null;return C>=0&&C<=1?[C]:A>=0&&A<=1?[A]:M}else return null},s.HALF_PI=.5*Math.PI,s.ONE_AND_HALF_PI=1.5*Math.PI,s.TWO_PI=2*Math.PI,s.THREE_PI=3*Math.PI,r.exports=s},function(r,i,n){"use strict";function a(){}a.sign=function(s){return s>0?1:s<0?-1:0},a.floor=function(s){return s<0?Math.ceil(s):Math.floor(s)},a.ceil=function(s){return s<0?Math.floor(s):Math.ceil(s)},r.exports=a},function(r,i,n){"use strict";function a(){}a.MAX_VALUE=2147483647,a.MIN_VALUE=-2147483648,r.exports=a},function(r,i,n){"use strict";var a=function(){function g(y,m){for(var x=0;x<m.length;x++){var _=m[x];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(y,_.key,_)}}return function(y,m,x){return m&&g(y.prototype,m),x&&g(y,x),y}}();function s(g,y){if(!(g instanceof y))throw new TypeError("Cannot call a class as a function")}var u=function(g){return{value:g,next:null,prev:null}},h=function(g,y,m,x){return g!==null?g.next=y:x.head=y,m!==null?m.prev=y:x.tail=y,y.prev=g,y.next=m,x.length++,y},d=function(g,y){var m=g.prev,x=g.next;return m!==null?m.next=x:y.head=x,x!==null?x.prev=m:y.tail=m,g.prev=g.next=null,y.length--,g},p=function(){function g(y){var m=this;s(this,g),this.length=0,this.head=null,this.tail=null,y?.forEach(function(x){return m.push(x)})}return a(g,[{key:"size",value:function(){return this.length}},{key:"insertBefore",value:function(y,m){return h(m.prev,u(y),m,this)}},{key:"insertAfter",value:function(y,m){return h(m,u(y),m.next,this)}},{key:"insertNodeBefore",value:function(y,m){return h(m.prev,y,m,this)}},{key:"insertNodeAfter",value:function(y,m){return h(m,y,m.next,this)}},{key:"push",value:function(y){return h(this.tail,u(y),null,this)}},{key:"unshift",value:function(y){return h(null,u(y),this.head,this)}},{key:"remove",value:function(y){return d(y,this)}},{key:"pop",value:function(){return d(this.tail,this).value}},{key:"popNode",value:function(){return d(this.tail,this)}},{key:"shift",value:function(){return d(this.head,this).value}},{key:"shiftNode",value:function(){return d(this.head,this)}},{key:"get_object_at",value:function(y){if(y<=this.length()){for(var m=1,x=this.head;m<y;)x=x.next,m++;return x.value}}},{key:"set_object_at",value:function(y,m){if(y<=this.length()){for(var x=1,_=this.head;x<y;)_=_.next,x++;_.value=m}}}]),g}();r.exports=p},function(r,i,n){"use strict";function a(s,u,h){this.x=null,this.y=null,s==null&&u==null&&h==null?(this.x=0,this.y=0):typeof s=="number"&&typeof u=="number"&&h==null?(this.x=s,this.y=u):s.constructor.name=="Point"&&u==null&&h==null&&(h=s,this.x=h.x,this.y=h.y)}a.prototype.getX=function(){return this.x},a.prototype.getY=function(){return this.y},a.prototype.getLocation=function(){return new a(this.x,this.y)},a.prototype.setLocation=function(s,u,h){s.constructor.name=="Point"&&u==null&&h==null?(h=s,this.setLocation(h.x,h.y)):typeof s=="number"&&typeof u=="number"&&h==null&&(parseInt(s)==s&&parseInt(u)==u?this.move(s,u):(this.x=Math.floor(s+.5),this.y=Math.floor(u+.5)))},a.prototype.move=function(s,u){this.x=s,this.y=u},a.prototype.translate=function(s,u){this.x+=s,this.y+=u},a.prototype.equals=function(s){if(s.constructor.name=="Point"){var u=s;return this.x==u.x&&this.y==u.y}return this==s},a.prototype.toString=function(){return new a().constructor.name+"[x="+this.x+",y="+this.y+"]"},r.exports=a},function(r,i,n){"use strict";function a(s,u,h,d){this.x=0,this.y=0,this.width=0,this.height=0,s!=null&&u!=null&&h!=null&&d!=null&&(this.x=s,this.y=u,this.width=h,this.height=d)}a.prototype.getX=function(){return this.x},a.prototype.setX=function(s){this.x=s},a.prototype.getY=function(){return this.y},a.prototype.setY=function(s){this.y=s},a.prototype.getWidth=function(){return this.width},a.prototype.setWidth=function(s){this.width=s},a.prototype.getHeight=function(){return this.height},a.prototype.setHeight=function(s){this.height=s},a.prototype.getRight=function(){return this.x+this.width},a.prototype.getBottom=function(){return this.y+this.height},a.prototype.intersects=function(s){return!(this.getRight()<s.x||this.getBottom()<s.y||s.getRight()<this.x||s.getBottom()<this.y)},a.prototype.getCenterX=function(){return this.x+this.width/2},a.prototype.getMinX=function(){return this.getX()},a.prototype.getMaxX=function(){return this.getX()+this.width},a.prototype.getCenterY=function(){return this.y+this.height/2},a.prototype.getMinY=function(){return this.getY()},a.prototype.getMaxY=function(){return this.getY()+this.height},a.prototype.getWidthHalf=function(){return this.width/2},a.prototype.getHeightHalf=function(){return this.height/2},r.exports=a},function(r,i,n){"use strict";var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u};function s(){}s.lastID=0,s.createID=function(u){return s.isPrimitive(u)?u:(u.uniqueID!=null||(u.uniqueID=s.getString(),s.lastID++),u.uniqueID)},s.getString=function(u){return u==null&&(u=s.lastID),"Object#"+u},s.isPrimitive=function(u){var h=typeof u>"u"?"undefined":a(u);return u==null||h!="object"&&h!="function"},r.exports=s},function(r,i,n){"use strict";function a(_){if(Array.isArray(_)){for(var E=0,w=Array(_.length);E<_.length;E++)w[E]=_[E];return w}else return Array.from(_)}var s=n(0),u=n(7),h=n(3),d=n(1),p=n(6),g=n(5),y=n(17),m=n(29);function x(_){m.call(this),this.layoutQuality=s.QUALITY,this.createBendsAsNeeded=s.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=s.DEFAULT_INCREMENTAL,this.animationOnLayout=s.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=s.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=s.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=s.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new u(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,_!=null&&(this.isRemoteUse=_)}x.RANDOM_SEED=1,x.prototype=Object.create(m.prototype),x.prototype.getGraphManager=function(){return this.graphManager},x.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},x.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},x.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},x.prototype.newGraphManager=function(){var _=new u(this);return this.graphManager=_,_},x.prototype.newGraph=function(_){return new p(null,this.graphManager,_)},x.prototype.newNode=function(_){return new h(this.graphManager,_)},x.prototype.newEdge=function(_){return new d(null,null,_)},x.prototype.checkLayoutSuccess=function(){return this.graphManager.getRoot()==null||this.graphManager.getRoot().getNodes().length==0||this.graphManager.includesInvalidEdge()},x.prototype.runLayout=function(){this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters();var _;return this.checkLayoutSuccess()?_=!1:_=this.layout(),s.ANIMATE==="during"?!1:(_&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,_)},x.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},x.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var _,E=this.graphManager.getAllEdges(),w=0;w<E.length;w++)_=E[w];for(var C,A=this.graphManager.getRoot().getNodes(),w=0;w<A.length;w++)C=A[w];this.update(this.graphManager.getRoot())}},x.prototype.update=function(_){if(_==null)this.update2();else if(_ instanceof h){var E=_;if(E.getChild()!=null)for(var w=E.getChild().getNodes(),C=0;C<w.length;C++)update(w[C]);if(E.vGraphObject!=null){var A=E.vGraphObject;A.update(E)}}else if(_ instanceof d){var M=_;if(M.vGraphObject!=null){var N=M.vGraphObject;N.update(M)}}else if(_ instanceof p){var B=_;if(B.vGraphObject!=null){var O=B.vGraphObject;O.update(B)}}},x.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=s.QUALITY,this.animationDuringLayout=s.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=s.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=s.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=s.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=s.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=s.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},x.prototype.transform=function(_){if(_==null)this.transform(new g(0,0));else{var E=new y,w=this.graphManager.getRoot().updateLeftTop();if(w!=null){E.setWorldOrgX(_.x),E.setWorldOrgY(_.y),E.setDeviceOrgX(w.x),E.setDeviceOrgY(w.y);for(var C=this.getAllNodes(),A,M=0;M<C.length;M++)A=C[M],A.transform(E)}}},x.prototype.positionNodesRandomly=function(_){if(_==null)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var E,w,C=_.getNodes(),A=0;A<C.length;A++)E=C[A],w=E.getChild(),w==null||w.getNodes().length==0?E.scatter():(this.positionNodesRandomly(w),E.updateBounds())},x.prototype.getFlatForest=function(){for(var _=[],E=!0,w=this.graphManager.getRoot().getNodes(),C=!0,A=0;A<w.length;A++)w[A].getChild()!=null&&(C=!1);if(!C)return _;var M=new Set,N=[],B=new Map,O=[];for(O=O.concat(w);O.length>0&&E;){for(N.push(O[0]);N.length>0&&E;){var L=N[0];N.splice(0,1),M.add(L);for(var $=L.getEdges(),A=0;A<$.length;A++){var G=$[A].getOtherEnd(L);if(B.get(L)!=G)if(!M.has(G))N.push(G),B.set(G,L);else{E=!1;break}}}if(!E)_=[];else{var z=[].concat(a(M));_.push(z);for(var A=0;A<z.length;A++){var F=z[A],X=O.indexOf(F);X>-1&&O.splice(X,1)}M=new Set,B=new Map}}return _},x.prototype.createDummyNodesForBendpoints=function(_){for(var E=[],w=_.source,C=this.graphManager.calcLowestCommonAncestor(_.source,_.target),A=0;A<_.bendpoints.length;A++){var M=this.newNode(null);M.setRect(new Point(0,0),new Dimension(1,1)),C.add(M);var N=this.newEdge(null);this.graphManager.add(N,w,M),E.add(M),w=M}var N=this.newEdge(null);return this.graphManager.add(N,w,_.target),this.edgeToDummyNodes.set(_,E),_.isInterGraph()?this.graphManager.remove(_):C.remove(_),E},x.prototype.createBendpointsFromDummyNodes=function(){var _=[];_=_.concat(this.graphManager.getAllEdges()),_=[].concat(a(this.edgeToDummyNodes.keys())).concat(_);for(var E=0;E<_.length;E++){var w=_[E];if(w.bendpoints.length>0){for(var C=this.edgeToDummyNodes.get(w),A=0;A<C.length;A++){var M=C[A],N=new g(M.getCenterX(),M.getCenterY()),B=w.bendpoints.get(A);B.x=N.x,B.y=N.y,M.getOwner().remove(M)}this.graphManager.add(w,w.source,w.target)}}},x.transform=function(_,E,w,C){if(w!=null&&C!=null){var A=E;if(_<=50){var M=E/w;A-=(E-M)/50*(50-_)}else{var N=E*C;A+=(N-E)/50*(_-50)}return A}else{var B,O;return _<=50?(B=9*E/500,O=E/10):(B=9*E/50,O=-8*E),B*_+O}},x.findCenterOfTree=function(_){var E=[];E=E.concat(_);var w=[],C=new Map,A=!1,M=null;(E.length==1||E.length==2)&&(A=!0,M=E[0]);for(var N=0;N<E.length;N++){var B=E[N],O=B.getNeighborsList().size;C.set(B,B.getNeighborsList().size),O==1&&w.push(B)}var L=[];for(L=L.concat(w);!A;){var $=[];$=$.concat(L),L=[];for(var N=0;N<E.length;N++){var B=E[N],G=E.indexOf(B);G>=0&&E.splice(G,1);var z=B.getNeighborsList();z.forEach(function(I){if(w.indexOf(I)<0){var j=C.get(I),H=j-1;H==1&&L.push(I),C.set(I,H)}})}w=w.concat(L),(E.length==1||E.length==2)&&(A=!0,M=E[0])}return M},x.prototype.setGraphManager=function(_){this.graphManager=_},r.exports=x},function(r,i,n){"use strict";function a(){}a.seed=1,a.x=0,a.nextDouble=function(){return a.x=Math.sin(a.seed++)*1e4,a.x-Math.floor(a.x)},r.exports=a},function(r,i,n){"use strict";var a=n(5);function s(u,h){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}s.prototype.getWorldOrgX=function(){return this.lworldOrgX},s.prototype.setWorldOrgX=function(u){this.lworldOrgX=u},s.prototype.getWorldOrgY=function(){return this.lworldOrgY},s.prototype.setWorldOrgY=function(u){this.lworldOrgY=u},s.prototype.getWorldExtX=function(){return this.lworldExtX},s.prototype.setWorldExtX=function(u){this.lworldExtX=u},s.prototype.getWorldExtY=function(){return this.lworldExtY},s.prototype.setWorldExtY=function(u){this.lworldExtY=u},s.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},s.prototype.setDeviceOrgX=function(u){this.ldeviceOrgX=u},s.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},s.prototype.setDeviceOrgY=function(u){this.ldeviceOrgY=u},s.prototype.getDeviceExtX=function(){return this.ldeviceExtX},s.prototype.setDeviceExtX=function(u){this.ldeviceExtX=u},s.prototype.getDeviceExtY=function(){return this.ldeviceExtY},s.prototype.setDeviceExtY=function(u){this.ldeviceExtY=u},s.prototype.transformX=function(u){var h=0,d=this.lworldExtX;return d!=0&&(h=this.ldeviceOrgX+(u-this.lworldOrgX)*this.ldeviceExtX/d),h},s.prototype.transformY=function(u){var h=0,d=this.lworldExtY;return d!=0&&(h=this.ldeviceOrgY+(u-this.lworldOrgY)*this.ldeviceExtY/d),h},s.prototype.inverseTransformX=function(u){var h=0,d=this.ldeviceExtX;return d!=0&&(h=this.lworldOrgX+(u-this.ldeviceOrgX)*this.lworldExtX/d),h},s.prototype.inverseTransformY=function(u){var h=0,d=this.ldeviceExtY;return d!=0&&(h=this.lworldOrgY+(u-this.ldeviceOrgY)*this.lworldExtY/d),h},s.prototype.inverseTransformPoint=function(u){var h=new a(this.inverseTransformX(u.x),this.inverseTransformY(u.y));return h},r.exports=s},function(r,i,n){"use strict";function a(m){if(Array.isArray(m)){for(var x=0,_=Array(m.length);x<m.length;x++)_[x]=m[x];return _}else return Array.from(m)}var s=n(15),u=n(4),h=n(0),d=n(8),p=n(9);function g(){s.call(this),this.useSmartIdealEdgeLengthCalculation=u.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=u.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=u.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=u.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=u.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*u.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=u.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=u.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=u.MAX_ITERATIONS}g.prototype=Object.create(s.prototype);for(var y in s)g[y]=s[y];g.prototype.initParameters=function(){s.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=u.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},g.prototype.calcIdealEdgeLengths=function(){for(var m,x,_,E,w,C,A,M=this.getGraphManager().getAllEdges(),N=0;N<M.length;N++)m=M[N],x=m.idealLength,m.isInterGraph&&(E=m.getSource(),w=m.getTarget(),C=m.getSourceInLca().getEstimatedSize(),A=m.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(m.idealLength+=C+A-2*h.SIMPLE_NODE_SIZE),_=m.getLca().getInclusionTreeDepth(),m.idealLength+=x*u.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(E.getInclusionTreeDepth()+w.getInclusionTreeDepth()-2*_))},g.prototype.initSpringEmbedder=function(){var m=this.getAllNodes().length;this.incremental?(m>u.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*u.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(m-u.ADAPTATION_LOWER_NODE_LIMIT)/(u.ADAPTATION_UPPER_NODE_LIMIT-u.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-u.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=u.MAX_NODE_DISPLACEMENT_INCREMENTAL):(m>u.ADAPTATION_LOWER_NODE_LIMIT?this.coolingFactor=Math.max(u.COOLING_ADAPTATION_FACTOR,1-(m-u.ADAPTATION_LOWER_NODE_LIMIT)/(u.ADAPTATION_UPPER_NODE_LIMIT-u.ADAPTATION_LOWER_NODE_LIMIT)*(1-u.COOLING_ADAPTATION_FACTOR)):this.coolingFactor=1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=u.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(this.getAllNodes().length*5,this.maxIterations),this.displacementThresholdPerNode=3*u.DEFAULT_EDGE_LENGTH/100,this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},g.prototype.calcSpringForces=function(){for(var m=this.getAllEdges(),x,_=0;_<m.length;_++)x=m[_],this.calcSpringForce(x,x.idealLength)},g.prototype.calcRepulsionForces=function(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,_,E,w,C,A=this.getAllNodes(),M;if(this.useFRGridVariant)for(this.totalIterations%u.GRID_CALCULATION_CHECK_PERIOD==1&&m&&this.updateGrid(),M=new Set,_=0;_<A.length;_++)w=A[_],this.calculateRepulsionForceOfANode(w,M,m,x),M.add(w);else for(_=0;_<A.length;_++)for(w=A[_],E=_+1;E<A.length;E++)C=A[E],w.getOwner()==C.getOwner()&&this.calcRepulsionForce(w,C)},g.prototype.calcGravitationalForces=function(){for(var m,x=this.getAllNodesToApplyGravitation(),_=0;_<x.length;_++)m=x[_],this.calcGravitationalForce(m)},g.prototype.moveNodes=function(){for(var m=this.getAllNodes(),x,_=0;_<m.length;_++)x=m[_],x.move()},g.prototype.calcSpringForce=function(m,x){var _=m.getSource(),E=m.getTarget(),w,C,A,M;if(this.uniformLeafNodeSizes&&_.getChild()==null&&E.getChild()==null)m.updateLengthSimple();else if(m.updateLength(),m.isOverlapingSourceAndTarget)return;w=m.getLength(),w!=0&&(C=m.edgeElasticity*(w-x),A=C*(m.lengthX/w),M=C*(m.lengthY/w),_.springForceX+=A,_.springForceY+=M,E.springForceX-=A,E.springForceY-=M)},g.prototype.calcRepulsionForce=function(m,x){var _=m.getRect(),E=x.getRect(),w=new Array(2),C=new Array(4),A,M,N,B,O,L,$;if(_.intersects(E)){d.calcSeparationAmount(_,E,w,u.DEFAULT_EDGE_LENGTH/2),L=2*w[0],$=2*w[1];var G=m.noOfChildren*x.noOfChildren/(m.noOfChildren+x.noOfChildren);m.repulsionForceX-=G*L,m.repulsionForceY-=G*$,x.repulsionForceX+=G*L,x.repulsionForceY+=G*$}else this.uniformLeafNodeSizes&&m.getChild()==null&&x.getChild()==null?(A=E.getCenterX()-_.getCenterX(),M=E.getCenterY()-_.getCenterY()):(d.getIntersection(_,E,C),A=C[2]-C[0],M=C[3]-C[1]),Math.abs(A)<u.MIN_REPULSION_DIST&&(A=p.sign(A)*u.MIN_REPULSION_DIST),Math.abs(M)<u.MIN_REPULSION_DIST&&(M=p.sign(M)*u.MIN_REPULSION_DIST),N=A*A+M*M,B=Math.sqrt(N),O=(m.nodeRepulsion/2+x.nodeRepulsion/2)*m.noOfChildren*x.noOfChildren/N,L=O*A/B,$=O*M/B,m.repulsionForceX-=L,m.repulsionForceY-=$,x.repulsionForceX+=L,x.repulsionForceY+=$},g.prototype.calcGravitationalForce=function(m){var x,_,E,w,C,A,M,N;x=m.getOwner(),_=(x.getRight()+x.getLeft())/2,E=(x.getTop()+x.getBottom())/2,w=m.getCenterX()-_,C=m.getCenterY()-E,A=Math.abs(w)+m.getWidth()/2,M=Math.abs(C)+m.getHeight()/2,m.getOwner()==this.graphManager.getRoot()?(N=x.getEstimatedSize()*this.gravityRangeFactor,(A>N||M>N)&&(m.gravitationForceX=-this.gravityConstant*w,m.gravitationForceY=-this.gravityConstant*C)):(N=x.getEstimatedSize()*this.compoundGravityRangeFactor,(A>N||M>N)&&(m.gravitationForceX=-this.gravityConstant*w*this.compoundGravityConstant,m.gravitationForceY=-this.gravityConstant*C*this.compoundGravityConstant))},g.prototype.isConverged=function(){var m,x=!1;return this.totalIterations>this.maxIterations/3&&(x=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),m=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,m||x},g.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},g.prototype.calcNoOfChildrenForAllNodes=function(){for(var m,x=this.graphManager.getAllNodes(),_=0;_<x.length;_++)m=x[_],m.noOfChildren=m.getNoOfChildren()},g.prototype.calcGrid=function(m){var x=0,_=0;x=parseInt(Math.ceil((m.getRight()-m.getLeft())/this.repulsionRange)),_=parseInt(Math.ceil((m.getBottom()-m.getTop())/this.repulsionRange));for(var E=new Array(x),w=0;w<x;w++)E[w]=new Array(_);for(var w=0;w<x;w++)for(var C=0;C<_;C++)E[w][C]=new Array;return E},g.prototype.addNodeToGrid=function(m,x,_){var E=0,w=0,C=0,A=0;E=parseInt(Math.floor((m.getRect().x-x)/this.repulsionRange)),w=parseInt(Math.floor((m.getRect().width+m.getRect().x-x)/this.repulsionRange)),C=parseInt(Math.floor((m.getRect().y-_)/this.repulsionRange)),A=parseInt(Math.floor((m.getRect().height+m.getRect().y-_)/this.repulsionRange));for(var M=E;M<=w;M++)for(var N=C;N<=A;N++)this.grid[M][N].push(m),m.setGridCoordinates(E,w,C,A)},g.prototype.updateGrid=function(){var m,x,_=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),m=0;m<_.length;m++)x=_[m],this.addNodeToGrid(x,this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},g.prototype.calculateRepulsionForceOfANode=function(m,x,_,E){if(this.totalIterations%u.GRID_CALCULATION_CHECK_PERIOD==1&&_||E){var w=new Set;m.surrounding=new Array;for(var C,A=this.grid,M=m.startX-1;M<m.finishX+2;M++)for(var N=m.startY-1;N<m.finishY+2;N++)if(!(M<0||N<0||M>=A.length||N>=A[0].length)){for(var B=0;B<A[M][N].length;B++)if(C=A[M][N][B],!(m.getOwner()!=C.getOwner()||m==C)&&!x.has(C)&&!w.has(C)){var O=Math.abs(m.getCenterX()-C.getCenterX())-(m.getWidth()/2+C.getWidth()/2),L=Math.abs(m.getCenterY()-C.getCenterY())-(m.getHeight()/2+C.getHeight()/2);O<=this.repulsionRange&&L<=this.repulsionRange&&w.add(C)}}m.surrounding=[].concat(a(w))}for(M=0;M<m.surrounding.length;M++)this.calcRepulsionForce(m,m.surrounding[M])},g.prototype.calcRepulsionRange=function(){return 0},r.exports=g},function(r,i,n){"use strict";var a=n(1),s=n(4);function u(d,p,g){a.call(this,d,p,g),this.idealLength=s.DEFAULT_EDGE_LENGTH,this.edgeElasticity=s.DEFAULT_SPRING_STRENGTH}u.prototype=Object.create(a.prototype);for(var h in a)u[h]=a[h];r.exports=u},function(r,i,n){"use strict";var a=n(3),s=n(4);function u(d,p,g,y){a.call(this,d,p,g,y),this.nodeRepulsion=s.DEFAULT_REPULSION_STRENGTH,this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}u.prototype=Object.create(a.prototype);for(var h in a)u[h]=a[h];u.prototype.setGridCoordinates=function(d,p,g,y){this.startX=d,this.finishX=p,this.startY=g,this.finishY=y},r.exports=u},function(r,i,n){"use strict";function a(s,u){this.width=0,this.height=0,s!==null&&u!==null&&(this.height=u,this.width=s)}a.prototype.getWidth=function(){return this.width},a.prototype.setWidth=function(s){this.width=s},a.prototype.getHeight=function(){return this.height},a.prototype.setHeight=function(s){this.height=s},r.exports=a},function(r,i,n){"use strict";var a=n(14);function s(){this.map={},this.keys=[]}s.prototype.put=function(u,h){var d=a.createID(u);this.contains(d)||(this.map[d]=h,this.keys.push(u))},s.prototype.contains=function(u){var h=a.createID(u);return this.map[u]!=null},s.prototype.get=function(u){var h=a.createID(u);return this.map[h]},s.prototype.keySet=function(){return this.keys},r.exports=s},function(r,i,n){"use strict";var a=n(14);function s(){this.set={}}s.prototype.add=function(u){var h=a.createID(u);this.contains(h)||(this.set[h]=u)},s.prototype.remove=function(u){delete this.set[a.createID(u)]},s.prototype.clear=function(){this.set={}},s.prototype.contains=function(u){return this.set[a.createID(u)]==u},s.prototype.isEmpty=function(){return this.size()===0},s.prototype.size=function(){return Object.keys(this.set).length},s.prototype.addAllTo=function(u){for(var h=Object.keys(this.set),d=h.length,p=0;p<d;p++)u.push(this.set[h[p]])},s.prototype.size=function(){return Object.keys(this.set).length},s.prototype.addAll=function(u){for(var h=u.length,d=0;d<h;d++){var p=u[d];this.add(p)}},r.exports=s},function(r,i,n){"use strict";function a(){}a.multMat=function(s,u){for(var h=[],d=0;d<s.length;d++){h[d]=[];for(var p=0;p<u[0].length;p++){h[d][p]=0;for(var g=0;g<s[0].length;g++)h[d][p]+=s[d][g]*u[g][p]}}return h},a.transpose=function(s){for(var u=[],h=0;h<s[0].length;h++){u[h]=[];for(var d=0;d<s.length;d++)u[h][d]=s[d][h]}return u},a.multCons=function(s,u){for(var h=[],d=0;d<s.length;d++)h[d]=s[d]*u;return h},a.minusOp=function(s,u){for(var h=[],d=0;d<s.length;d++)h[d]=s[d]-u[d];return h},a.dotProduct=function(s,u){for(var h=0,d=0;d<s.length;d++)h+=s[d]*u[d];return h},a.mag=function(s){return Math.sqrt(this.dotProduct(s,s))},a.normalize=function(s){for(var u=[],h=this.mag(s),d=0;d<s.length;d++)u[d]=s[d]/h;return u},a.multGamma=function(s){for(var u=[],h=0,d=0;d<s.length;d++)h+=s[d];h*=-1/s.length;for(var p=0;p<s.length;p++)u[p]=h+s[p];return u},a.multL=function(s,u,h){for(var d=[],p=[],g=[],y=0;y<u[0].length;y++){for(var m=0,x=0;x<u.length;x++)m+=-.5*u[x][y]*s[x];p[y]=m}for(var _=0;_<h.length;_++){for(var E=0,w=0;w<h.length;w++)E+=h[_][w]*p[w];g[_]=E}for(var C=0;C<u.length;C++){for(var A=0,M=0;M<u[0].length;M++)A+=u[C][M]*g[M];d[C]=A}return d},r.exports=a},function(r,i,n){"use strict";var a=function(){function d(p,g){for(var y=0;y<g.length;y++){var m=g[y];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(p,m.key,m)}}return function(p,g,y){return g&&d(p.prototype,g),y&&d(p,y),p}}();function s(d,p){if(!(d instanceof p))throw new TypeError("Cannot call a class as a function")}var u=n(11),h=function(){function d(p,g){s(this,d),(g!==null||g!==void 0)&&(this.compareFunction=this._defaultCompareFunction);var y=void 0;p instanceof u?y=p.size():y=p.length,this._quicksort(p,0,y-1)}return a(d,[{key:"_quicksort",value:function(p,g,y){if(g<y){var m=this._partition(p,g,y);this._quicksort(p,g,m),this._quicksort(p,m+1,y)}}},{key:"_partition",value:function(p,g,y){for(var m=this._get(p,g),x=g,_=y;;){for(;this.compareFunction(m,this._get(p,_));)_--;for(;this.compareFunction(this._get(p,x),m);)x++;if(x<_)this._swap(p,x,_),x++,_--;else return _}}},{key:"_get",value:function(p,g){return p instanceof u?p.get_object_at(g):p[g]}},{key:"_set",value:function(p,g,y){p instanceof u?p.set_object_at(g,y):p[g]=y}},{key:"_swap",value:function(p,g,y){var m=this._get(p,g);this._set(p,g,this._get(p,y)),this._set(p,y,m)}},{key:"_defaultCompareFunction",value:function(p,g){return g>p}}]),d}();r.exports=h},function(r,i,n){"use strict";function a(){}a.svd=function(s){this.U=null,this.V=null,this.s=null,this.m=0,this.n=0,this.m=s.length,this.n=s[0].length;var u=Math.min(this.m,this.n);this.s=function(Fr){for(var Bi=[];Fr-- >0;)Bi.push(0);return Bi}(Math.min(this.m+1,this.n)),this.U=function(Fr){var Bi=function Xr(xa){if(xa.length==0)return 0;for(var Hn=[],fa=0;fa<xa[0];fa++)Hn.push(Xr(xa.slice(1)));return Hn};return Bi(Fr)}([this.m,u]),this.V=function(Fr){var Bi=function Xr(xa){if(xa.length==0)return 0;for(var Hn=[],fa=0;fa<xa[0];fa++)Hn.push(Xr(xa.slice(1)));return Hn};return Bi(Fr)}([this.n,this.n]);for(var h=function(Fr){for(var Bi=[];Fr-- >0;)Bi.push(0);return Bi}(this.n),d=function(Fr){for(var Bi=[];Fr-- >0;)Bi.push(0);return Bi}(this.m),p=!0,g=!0,y=Math.min(this.m-1,this.n),m=Math.max(0,Math.min(this.n-2,this.m)),x=0;x<Math.max(y,m);x++){if(x<y){this.s[x]=0;for(var _=x;_<this.m;_++)this.s[x]=a.hypot(this.s[x],s[_][x]);if(this.s[x]!==0){s[x][x]<0&&(this.s[x]=-this.s[x]);for(var E=x;E<this.m;E++)s[E][x]/=this.s[x];s[x][x]+=1}this.s[x]=-this.s[x]}for(var w=x+1;w<this.n;w++){if(function(Fr,Bi){return Fr&&Bi}(x<y,this.s[x]!==0)){for(var C=0,A=x;A<this.m;A++)C+=s[A][x]*s[A][w];C=-C/s[x][x];for(var M=x;M<this.m;M++)s[M][w]+=C*s[M][x]}h[w]=s[x][w]}if(function(Fr,Bi){return Fr&&Bi}(p,x<y))for(var N=x;N<this.m;N++)this.U[N][x]=s[N][x];if(x<m){h[x]=0;for(var B=x+1;B<this.n;B++)h[x]=a.hypot(h[x],h[B]);if(h[x]!==0){h[x+1]<0&&(h[x]=-h[x]);for(var O=x+1;O<this.n;O++)h[O]/=h[x];h[x+1]+=1}if(h[x]=-h[x],function(Fr,Bi){return Fr&&Bi}(x+1<this.m,h[x]!==0)){for(var L=x+1;L<this.m;L++)d[L]=0;for(var $=x+1;$<this.n;$++)for(var G=x+1;G<this.m;G++)d[G]+=h[$]*s[G][$];for(var z=x+1;z<this.n;z++)for(var F=-h[z]/h[x+1],X=x+1;X<this.m;X++)s[X][z]+=F*d[X]}if(g)for(var I=x+1;I<this.n;I++)this.V[I][x]=h[I]}}var j=Math.min(this.n,this.m+1);if(y<this.n&&(this.s[y]=s[y][y]),this.m<j&&(this.s[j-1]=0),m+1<j&&(h[m]=s[m][j-1]),h[j-1]=0,p){for(var H=y;H<u;H++){for(var V=0;V<this.m;V++)this.U[V][H]=0;this.U[H][H]=1}for(var P=y-1;P>=0;P--)if(this.s[P]!==0){for(var q=P+1;q<u;q++){for(var Z=0,J=P;J<this.m;J++)Z+=this.U[J][P]*this.U[J][q];Z=-Z/this.U[P][P];for(var ae=P;ae<this.m;ae++)this.U[ae][q]+=Z*this.U[ae][P]}for(var ue=P;ue<this.m;ue++)this.U[ue][P]=-this.U[ue][P];this.U[P][P]=1+this.U[P][P];for(var be=0;be<P-1;be++)this.U[be][P]=0}else{for(var Le=0;Le<this.m;Le++)this.U[Le][P]=0;this.U[P][P]=1}}if(g)for(var xe=this.n-1;xe>=0;xe--){if(function(Fr,Bi){return Fr&&Bi}(xe<m,h[xe]!==0))for(var Ae=xe+1;Ae<u;Ae++){for(var oe=0,he=xe+1;he<this.n;he++)oe+=this.V[he][xe]*this.V[he][Ae];oe=-oe/this.V[xe+1][xe];for(var le=xe+1;le<this.n;le++)this.V[le][Ae]+=oe*this.V[le][xe]}for(var ke=0;ke<this.n;ke++)this.V[ke][xe]=0;this.V[xe][xe]=1}for(var pe=j-1,qe=0,me=Math.pow(2,-52),st=Math.pow(2,-966);j>0;){var we=void 0,Et=void 0;for(we=j-2;we>=-1&&we!==-1;we--)if(Math.abs(h[we])<=st+me*(Math.abs(this.s[we])+Math.abs(this.s[we+1]))){h[we]=0;break}if(we===j-2)Et=4;else{var wt=void 0;for(wt=j-1;wt>=we&&wt!==we;wt--){var Tt=(wt!==j?Math.abs(h[wt]):0)+(wt!==we+1?Math.abs(h[wt-1]):0);if(Math.abs(this.s[wt])<=st+me*Tt){this.s[wt]=0;break}}wt===we?Et=3:wt===j-1?Et=1:(Et=2,we=wt)}switch(we++,Et){case 1:{var er=h[j-2];h[j-2]=0;for(var tr=j-2;tr>=we;tr--){var kr=a.hypot(this.s[tr],er),fr=this.s[tr]/kr,Mt=er/kr;if(this.s[tr]=kr,tr!==we&&(er=-Mt*h[tr-1],h[tr-1]=fr*h[tr-1]),g)for(var Kt=0;Kt<this.n;Kt++)kr=fr*this.V[Kt][tr]+Mt*this.V[Kt][j-1],this.V[Kt][j-1]=-Mt*this.V[Kt][tr]+fr*this.V[Kt][j-1],this.V[Kt][tr]=kr}}break;case 2:{var ne=h[we-1];h[we-1]=0;for(var He=we;He<j;He++){var Te=a.hypot(this.s[He],ne),Qe=this.s[He]/Te,ce=ne/Te;if(this.s[He]=Te,ne=-ce*h[He],h[He]=Qe*h[He],p)for(var Ut=0;Ut<this.m;Ut++)Te=Qe*this.U[Ut][He]+ce*this.U[Ut][we-1],this.U[Ut][we-1]=-ce*this.U[Ut][He]+Qe*this.U[Ut][we-1],this.U[Ut][He]=Te}}break;case 3:{var fe=Math.max(Math.max(Math.max(Math.max(Math.abs(this.s[j-1]),Math.abs(this.s[j-2])),Math.abs(h[j-2])),Math.abs(this.s[we])),Math.abs(h[we])),ze=this.s[j-1]/fe,yt=this.s[j-2]/fe,bt=h[j-2]/fe,At=this.s[we]/fe,ct=h[we]/fe,zt=((yt+ze)*(yt-ze)+bt*bt)/2,ft=ze*bt*(ze*bt),Pr=0;(function(Fr,Bi){return Fr||Bi})(zt!==0,ft!==0)&&(Pr=Math.sqrt(zt*zt+ft),zt<0&&(Pr=-Pr),Pr=ft/(zt+Pr));for(var Mi=(At+ze)*(At-ze)+Pr,Di=At*ct,ri=we;ri<j-1;ri++){var Gi=a.hypot(Mi,Di),Br=Mi/Gi,sr=Di/Gi;if(ri!==we&&(h[ri-1]=Gi),Mi=Br*this.s[ri]+sr*h[ri],h[ri]=Br*h[ri]-sr*this.s[ri],Di=sr*this.s[ri+1],this.s[ri+1]=Br*this.s[ri+1],g)for(var hr=0;hr<this.n;hr++)Gi=Br*this.V[hr][ri]+sr*this.V[hr][ri+1],this.V[hr][ri+1]=-sr*this.V[hr][ri]+Br*this.V[hr][ri+1],this.V[hr][ri]=Gi;if(Gi=a.hypot(Mi,Di),Br=Mi/Gi,sr=Di/Gi,this.s[ri]=Gi,Mi=Br*h[ri]+sr*this.s[ri+1],this.s[ri+1]=-sr*h[ri]+Br*this.s[ri+1],Di=sr*h[ri+1],h[ri+1]=Br*h[ri+1],p&&ri<this.m-1)for(var Ci=0;Ci<this.m;Ci++)Gi=Br*this.U[Ci][ri]+sr*this.U[Ci][ri+1],this.U[Ci][ri+1]=-sr*this.U[Ci][ri]+Br*this.U[Ci][ri+1],this.U[Ci][ri]=Gi}h[j-2]=Mi,qe=qe+1}break;case 4:{if(this.s[we]<=0&&(this.s[we]=this.s[we]<0?-this.s[we]:0,g))for(var _r=0;_r<=pe;_r++)this.V[_r][we]=-this.V[_r][we];for(;we<pe&&!(this.s[we]>=this.s[we+1]);){var ln=this.s[we];if(this.s[we]=this.s[we+1],this.s[we+1]=ln,g&&we<this.n-1)for(var en=0;en<this.n;en++)ln=this.V[en][we+1],this.V[en][we+1]=this.V[en][we],this.V[en][we]=ln;if(p&&we<this.m-1)for(var bi=0;bi<this.m;bi++)ln=this.U[bi][we+1],this.U[bi][we+1]=this.U[bi][we],this.U[bi][we]=ln;we++}qe=0,j--}break}}var gi={U:this.U,V:this.V,S:this.s};return gi},a.hypot=function(s,u){var h=void 0;return Math.abs(s)>Math.abs(u)?(h=u/s,h=Math.abs(s)*Math.sqrt(1+h*h)):u!=0?(h=s/u,h=Math.abs(u)*Math.sqrt(1+h*h)):h=0,h},r.exports=a},function(r,i,n){"use strict";var a=function(){function h(d,p){for(var g=0;g<p.length;g++){var y=p[g];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(d,y.key,y)}}return function(d,p,g){return p&&h(d.prototype,p),g&&h(d,g),d}}();function s(h,d){if(!(h instanceof d))throw new TypeError("Cannot call a class as a function")}var u=function(){function h(d,p){var g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:-1,m=arguments.length>4&&arguments[4]!==void 0?arguments[4]:-1;s(this,h),this.sequence1=d,this.sequence2=p,this.match_score=g,this.mismatch_penalty=y,this.gap_penalty=m,this.iMax=d.length+1,this.jMax=p.length+1,this.grid=new Array(this.iMax);for(var x=0;x<this.iMax;x++){this.grid[x]=new Array(this.jMax);for(var _=0;_<this.jMax;_++)this.grid[x][_]=0}this.tracebackGrid=new Array(this.iMax);for(var E=0;E<this.iMax;E++){this.tracebackGrid[E]=new Array(this.jMax);for(var w=0;w<this.jMax;w++)this.tracebackGrid[E][w]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return a(h,[{key:"getScore",value:function(){return this.score}},{key:"getAlignments",value:function(){return this.alignments}},{key:"computeGrids",value:function(){for(var d=1;d<this.jMax;d++)this.grid[0][d]=this.grid[0][d-1]+this.gap_penalty,this.tracebackGrid[0][d]=[!1,!1,!0];for(var p=1;p<this.iMax;p++)this.grid[p][0]=this.grid[p-1][0]+this.gap_penalty,this.tracebackGrid[p][0]=[!1,!0,!1];for(var g=1;g<this.iMax;g++)for(var y=1;y<this.jMax;y++){var m=void 0;this.sequence1[g-1]===this.sequence2[y-1]?m=this.grid[g-1][y-1]+this.match_score:m=this.grid[g-1][y-1]+this.mismatch_penalty;var x=this.grid[g-1][y]+this.gap_penalty,_=this.grid[g][y-1]+this.gap_penalty,E=[m,x,_],w=this.arrayAllMaxIndexes(E);this.grid[g][y]=E[w[0]],this.tracebackGrid[g][y]=[w.includes(0),w.includes(1),w.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}},{key:"alignmentTraceback",value:function(){var d=[];for(d.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});d[0];){var p=d[0],g=this.tracebackGrid[p.pos[0]][p.pos[1]];g[0]&&d.push({pos:[p.pos[0]-1,p.pos[1]-1],seq1:this.sequence1[p.pos[0]-1]+p.seq1,seq2:this.sequence2[p.pos[1]-1]+p.seq2}),g[1]&&d.push({pos:[p.pos[0]-1,p.pos[1]],seq1:this.sequence1[p.pos[0]-1]+p.seq1,seq2:"-"+p.seq2}),g[2]&&d.push({pos:[p.pos[0],p.pos[1]-1],seq1:"-"+p.seq1,seq2:this.sequence2[p.pos[1]-1]+p.seq2}),p.pos[0]===0&&p.pos[1]===0&&this.alignments.push({sequence1:p.seq1,sequence2:p.seq2}),d.shift()}return this.alignments}},{key:"getAllIndexes",value:function(d,p){for(var g=[],y=-1;(y=d.indexOf(p,y+1))!==-1;)g.push(y);return g}},{key:"arrayAllMaxIndexes",value:function(d){return this.getAllIndexes(d,Math.max.apply(null,d))}}]),h}();r.exports=u},function(r,i,n){"use strict";var a=function(){};a.FDLayout=n(18),a.FDLayoutConstants=n(4),a.FDLayoutEdge=n(19),a.FDLayoutNode=n(20),a.DimensionD=n(21),a.HashMap=n(22),a.HashSet=n(23),a.IGeometry=n(8),a.IMath=n(9),a.Integer=n(10),a.Point=n(12),a.PointD=n(5),a.RandomSeed=n(16),a.RectangleD=n(13),a.Transform=n(17),a.UniqueIDGeneretor=n(14),a.Quicksort=n(25),a.LinkedList=n(11),a.LGraphObject=n(2),a.LGraph=n(6),a.LEdge=n(1),a.LGraphManager=n(7),a.LNode=n(3),a.Layout=n(15),a.LayoutConstants=n(0),a.NeedlemanWunsch=n(27),a.Matrix=n(24),a.SVD=n(26),r.exports=a},function(r,i,n){"use strict";function a(){this.listeners=[]}var s=a.prototype;s.addListener=function(u,h){this.listeners.push({event:u,callback:h})},s.removeListener=function(u,h){for(var d=this.listeners.length;d>=0;d--){var p=this.listeners[d];p.event===u&&p.callback===h&&this.listeners.splice(d,1)}},s.emit=function(u,h){for(var d=0;d<this.listeners.length;d++){var p=this.listeners[d];u===p.event&&p.callback(h)}},r.exports=a}])})}),ADe=hi((e,t)=>{(function(r,i){typeof e=="object"&&typeof t=="object"?t.exports=i(SDe()):typeof define=="function"&&define.amd?define(["layout-base"],i):typeof e=="object"?e.coseBase=i(SDe()):r.coseBase=i(r.layoutBase)})(e,function(r){return(()=>{"use strict";var i={45:(u,h,d)=>{var p={};p.layoutBase=d(551),p.CoSEConstants=d(806),p.CoSEEdge=d(767),p.CoSEGraph=d(880),p.CoSEGraphManager=d(578),p.CoSELayout=d(765),p.CoSENode=d(991),p.ConstraintHandler=d(902),u.exports=p},806:(u,h,d)=>{var p=d(551).FDLayoutConstants;function g(){}for(var y in p)g[y]=p[y];g.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,g.DEFAULT_RADIAL_SEPARATION=p.DEFAULT_EDGE_LENGTH,g.DEFAULT_COMPONENT_SEPERATION=60,g.TILE=!0,g.TILING_PADDING_VERTICAL=10,g.TILING_PADDING_HORIZONTAL=10,g.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,g.ENFORCE_CONSTRAINTS=!0,g.APPLY_LAYOUT=!0,g.RELAX_MOVEMENT_ON_CONSTRAINTS=!0,g.TREE_REDUCTION_ON_INCREMENTAL=!0,g.PURE_INCREMENTAL=g.DEFAULT_INCREMENTAL,u.exports=g},767:(u,h,d)=>{var p=d(551).FDLayoutEdge;function g(m,x,_){p.call(this,m,x,_)}g.prototype=Object.create(p.prototype);for(var y in p)g[y]=p[y];u.exports=g},880:(u,h,d)=>{var p=d(551).LGraph;function g(m,x,_){p.call(this,m,x,_)}g.prototype=Object.create(p.prototype);for(var y in p)g[y]=p[y];u.exports=g},578:(u,h,d)=>{var p=d(551).LGraphManager;function g(m){p.call(this,m)}g.prototype=Object.create(p.prototype);for(var y in p)g[y]=p[y];u.exports=g},765:(u,h,d)=>{var p=d(551).FDLayout,g=d(578),y=d(880),m=d(991),x=d(767),_=d(806),E=d(902),w=d(551).FDLayoutConstants,C=d(551).LayoutConstants,A=d(551).Point,M=d(551).PointD,N=d(551).DimensionD,B=d(551).Layout,O=d(551).Integer,L=d(551).IGeometry,$=d(551).LGraph,G=d(551).Transform,z=d(551).LinkedList;function F(){p.call(this),this.toBeTiled={},this.constraints={}}F.prototype=Object.create(p.prototype);for(var X in p)F[X]=p[X];F.prototype.newGraphManager=function(){var I=new g(this);return this.graphManager=I,I},F.prototype.newGraph=function(I){return new y(null,this.graphManager,I)},F.prototype.newNode=function(I){return new m(this.graphManager,I)},F.prototype.newEdge=function(I){return new x(null,null,I)},F.prototype.initParameters=function(){p.prototype.initParameters.call(this,arguments),this.isSubLayout||(_.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=_.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=_.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=w.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=w.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=w.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=w.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1)},F.prototype.initSpringEmbedder=function(){p.prototype.initSpringEmbedder.call(this),this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/w.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=.04,this.coolingAdjuster=1},F.prototype.layout=function(){var I=C.DEFAULT_CREATE_BENDS_AS_NEEDED;return I&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},F.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental){if(_.TREE_REDUCTION_ON_INCREMENTAL){this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var I=new Set(this.getAllNodes()),j=this.nodesWithGravity.filter(function(V){return I.has(V)});this.graphManager.setAllNodesToApplyGravitation(j)}}else{var H=this.getFlatForest();if(H.length>0)this.positionNodesRadially(H);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var I=new Set(this.getAllNodes()),j=this.nodesWithGravity.filter(function(q){return I.has(q)});this.graphManager.setAllNodesToApplyGravitation(j),this.positionNodesRandomly()}}return Object.keys(this.constraints).length>0&&(E.handleConstraints(this),this.initConstraintVariables()),this.initSpringEmbedder(),_.APPLY_LAYOUT&&this.runSpringEmbedder(),!0},F.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished)if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;if(this.totalIterations%w.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged())if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;this.coolingCycle++,this.layoutQuality==0?this.coolingAdjuster=this.coolingCycle:this.layoutQuality==1&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var I=new Set(this.getAllNodes()),j=this.nodesWithGravity.filter(function(P){return I.has(P)});this.graphManager.setAllNodesToApplyGravitation(j),this.graphManager.updateBounds(),this.updateGrid(),_.PURE_INCREMENTAL?this.coolingFactor=w.DEFAULT_COOLING_FACTOR_INCREMENTAL/2:this.coolingFactor=w.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),_.PURE_INCREMENTAL?this.coolingFactor=w.DEFAULT_COOLING_FACTOR_INCREMENTAL/2*((100-this.afterGrowthIterations)/100):this.coolingFactor=w.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var H=!this.isTreeGrowing&&!this.isGrowthFinished,V=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(H,V),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},F.prototype.getPositionsData=function(){for(var I=this.graphManager.getAllNodes(),j={},H=0;H<I.length;H++){var V=I[H].rect,P=I[H].id;j[P]={id:P,x:V.getCenterX(),y:V.getCenterY(),w:V.width,h:V.height}}return j},F.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var I=!1;if(w.ANIMATE==="during")this.emit("layoutstarted");else{for(;!I;)I=this.tick();this.graphManager.updateBounds()}},F.prototype.moveNodes=function(){for(var I=this.getAllNodes(),j,H=0;H<I.length;H++)j=I[H],j.calculateDisplacement();Object.keys(this.constraints).length>0&&this.updateDisplacements();for(var H=0;H<I.length;H++)j=I[H],j.move()},F.prototype.initConstraintVariables=function(){var I=this;this.idToNodeMap=new Map,this.fixedNodeSet=new Set;for(var j=this.graphManager.getAllNodes(),H=0;H<j.length;H++){var V=j[H];this.idToNodeMap.set(V.id,V)}var P=function he(le){for(var ke=le.getChild().getNodes(),pe,qe=0,me=0;me<ke.length;me++)pe=ke[me],pe.getChild()==null?I.fixedNodeSet.has(pe.id)&&(qe+=100):qe+=he(pe);return qe};if(this.constraints.fixedNodeConstraint){this.constraints.fixedNodeConstraint.forEach(function(he){I.fixedNodeSet.add(he.nodeId)});for(var j=this.graphManager.getAllNodes(),V,H=0;H<j.length;H++)if(V=j[H],V.getChild()!=null){var q=P(V);q>0&&(V.fixedNodeWeight=q)}}if(this.constraints.relativePlacementConstraint){var Z=new Map,J=new Map;if(this.dummyToNodeForVerticalAlignment=new Map,this.dummyToNodeForHorizontalAlignment=new Map,this.fixedNodesOnHorizontal=new Set,this.fixedNodesOnVertical=new Set,this.fixedNodeSet.forEach(function(he){I.fixedNodesOnHorizontal.add(he),I.fixedNodesOnVertical.add(he)}),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical)for(var ae=this.constraints.alignmentConstraint.vertical,H=0;H<ae.length;H++)this.dummyToNodeForVerticalAlignment.set("dummy"+H,[]),ae[H].forEach(function(le){Z.set(le,"dummy"+H),I.dummyToNodeForVerticalAlignment.get("dummy"+H).push(le),I.fixedNodeSet.has(le)&&I.fixedNodesOnHorizontal.add("dummy"+H)});if(this.constraints.alignmentConstraint.horizontal)for(var ue=this.constraints.alignmentConstraint.horizontal,H=0;H<ue.length;H++)this.dummyToNodeForHorizontalAlignment.set("dummy"+H,[]),ue[H].forEach(function(le){J.set(le,"dummy"+H),I.dummyToNodeForHorizontalAlignment.get("dummy"+H).push(le),I.fixedNodeSet.has(le)&&I.fixedNodesOnVertical.add("dummy"+H)})}if(_.RELAX_MOVEMENT_ON_CONSTRAINTS)this.shuffle=function(he){var le,ke,pe;for(pe=he.length-1;pe>=2*he.length/3;pe--)le=Math.floor(Math.random()*(pe+1)),ke=he[pe],he[pe]=he[le],he[le]=ke;return he},this.nodesInRelativeHorizontal=[],this.nodesInRelativeVertical=[],this.nodeToRelativeConstraintMapHorizontal=new Map,this.nodeToRelativeConstraintMapVertical=new Map,this.nodeToTempPositionMapHorizontal=new Map,this.nodeToTempPositionMapVertical=new Map,this.constraints.relativePlacementConstraint.forEach(function(he){if(he.left){var le=Z.has(he.left)?Z.get(he.left):he.left,ke=Z.has(he.right)?Z.get(he.right):he.right;I.nodesInRelativeHorizontal.includes(le)||(I.nodesInRelativeHorizontal.push(le),I.nodeToRelativeConstraintMapHorizontal.set(le,[]),I.dummyToNodeForVerticalAlignment.has(le)?I.nodeToTempPositionMapHorizontal.set(le,I.idToNodeMap.get(I.dummyToNodeForVerticalAlignment.get(le)[0]).getCenterX()):I.nodeToTempPositionMapHorizontal.set(le,I.idToNodeMap.get(le).getCenterX())),I.nodesInRelativeHorizontal.includes(ke)||(I.nodesInRelativeHorizontal.push(ke),I.nodeToRelativeConstraintMapHorizontal.set(ke,[]),I.dummyToNodeForVerticalAlignment.has(ke)?I.nodeToTempPositionMapHorizontal.set(ke,I.idToNodeMap.get(I.dummyToNodeForVerticalAlignment.get(ke)[0]).getCenterX()):I.nodeToTempPositionMapHorizontal.set(ke,I.idToNodeMap.get(ke).getCenterX())),I.nodeToRelativeConstraintMapHorizontal.get(le).push({right:ke,gap:he.gap}),I.nodeToRelativeConstraintMapHorizontal.get(ke).push({left:le,gap:he.gap})}else{var pe=J.has(he.top)?J.get(he.top):he.top,qe=J.has(he.bottom)?J.get(he.bottom):he.bottom;I.nodesInRelativeVertical.includes(pe)||(I.nodesInRelativeVertical.push(pe),I.nodeToRelativeConstraintMapVertical.set(pe,[]),I.dummyToNodeForHorizontalAlignment.has(pe)?I.nodeToTempPositionMapVertical.set(pe,I.idToNodeMap.get(I.dummyToNodeForHorizontalAlignment.get(pe)[0]).getCenterY()):I.nodeToTempPositionMapVertical.set(pe,I.idToNodeMap.get(pe).getCenterY())),I.nodesInRelativeVertical.includes(qe)||(I.nodesInRelativeVertical.push(qe),I.nodeToRelativeConstraintMapVertical.set(qe,[]),I.dummyToNodeForHorizontalAlignment.has(qe)?I.nodeToTempPositionMapVertical.set(qe,I.idToNodeMap.get(I.dummyToNodeForHorizontalAlignment.get(qe)[0]).getCenterY()):I.nodeToTempPositionMapVertical.set(qe,I.idToNodeMap.get(qe).getCenterY())),I.nodeToRelativeConstraintMapVertical.get(pe).push({bottom:qe,gap:he.gap}),I.nodeToRelativeConstraintMapVertical.get(qe).push({top:pe,gap:he.gap})}});else{var be=new Map,Le=new Map;this.constraints.relativePlacementConstraint.forEach(function(he){if(he.left){var le=Z.has(he.left)?Z.get(he.left):he.left,ke=Z.has(he.right)?Z.get(he.right):he.right;be.has(le)?be.get(le).push(ke):be.set(le,[ke]),be.has(ke)?be.get(ke).push(le):be.set(ke,[le])}else{var pe=J.has(he.top)?J.get(he.top):he.top,qe=J.has(he.bottom)?J.get(he.bottom):he.bottom;Le.has(pe)?Le.get(pe).push(qe):Le.set(pe,[qe]),Le.has(qe)?Le.get(qe).push(pe):Le.set(qe,[pe])}});var xe=function(he,le){var ke=[],pe=[],qe=new z,me=new Set,st=0;return he.forEach(function(we,Et){if(!me.has(Et)){ke[st]=[],pe[st]=!1;var wt=Et;for(qe.push(wt),me.add(wt),ke[st].push(wt);qe.length!=0;){wt=qe.shift(),le.has(wt)&&(pe[st]=!0);var Tt=he.get(wt);Tt.forEach(function(er){me.has(er)||(qe.push(er),me.add(er),ke[st].push(er))})}st++}}),{components:ke,isFixed:pe}},Ae=xe(be,I.fixedNodesOnHorizontal);this.componentsOnHorizontal=Ae.components,this.fixedComponentsOnHorizontal=Ae.isFixed;var oe=xe(Le,I.fixedNodesOnVertical);this.componentsOnVertical=oe.components,this.fixedComponentsOnVertical=oe.isFixed}}},F.prototype.updateDisplacements=function(){var I=this;if(this.constraints.fixedNodeConstraint&&this.constraints.fixedNodeConstraint.forEach(function(oe){var he=I.idToNodeMap.get(oe.nodeId);he.displacementX=0,he.displacementY=0}),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical)for(var j=this.constraints.alignmentConstraint.vertical,H=0;H<j.length;H++){for(var V=0,P=0;P<j[H].length;P++){if(this.fixedNodeSet.has(j[H][P])){V=0;break}V+=this.idToNodeMap.get(j[H][P]).displacementX}for(var q=V/j[H].length,P=0;P<j[H].length;P++)this.idToNodeMap.get(j[H][P]).displacementX=q}if(this.constraints.alignmentConstraint.horizontal)for(var Z=this.constraints.alignmentConstraint.horizontal,H=0;H<Z.length;H++){for(var J=0,P=0;P<Z[H].length;P++){if(this.fixedNodeSet.has(Z[H][P])){J=0;break}J+=this.idToNodeMap.get(Z[H][P]).displacementY}for(var ae=J/Z[H].length,P=0;P<Z[H].length;P++)this.idToNodeMap.get(Z[H][P]).displacementY=ae}}if(this.constraints.relativePlacementConstraint)if(_.RELAX_MOVEMENT_ON_CONSTRAINTS)this.totalIterations%10==0&&(this.shuffle(this.nodesInRelativeHorizontal),this.shuffle(this.nodesInRelativeVertical)),this.nodesInRelativeHorizontal.forEach(function(oe){if(!I.fixedNodesOnHorizontal.has(oe)){var he=0;I.dummyToNodeForVerticalAlignment.has(oe)?he=I.idToNodeMap.get(I.dummyToNodeForVerticalAlignment.get(oe)[0]).displacementX:he=I.idToNodeMap.get(oe).displacementX,I.nodeToRelativeConstraintMapHorizontal.get(oe).forEach(function(le){if(le.right){var ke=I.nodeToTempPositionMapHorizontal.get(le.right)-I.nodeToTempPositionMapHorizontal.get(oe)-he;ke<le.gap&&(he-=le.gap-ke)}else{var ke=I.nodeToTempPositionMapHorizontal.get(oe)-I.nodeToTempPositionMapHorizontal.get(le.left)+he;ke<le.gap&&(he+=le.gap-ke)}}),I.nodeToTempPositionMapHorizontal.set(oe,I.nodeToTempPositionMapHorizontal.get(oe)+he),I.dummyToNodeForVerticalAlignment.has(oe)?I.dummyToNodeForVerticalAlignment.get(oe).forEach(function(le){I.idToNodeMap.get(le).displacementX=he}):I.idToNodeMap.get(oe).displacementX=he}}),this.nodesInRelativeVertical.forEach(function(oe){if(!I.fixedNodesOnHorizontal.has(oe)){var he=0;I.dummyToNodeForHorizontalAlignment.has(oe)?he=I.idToNodeMap.get(I.dummyToNodeForHorizontalAlignment.get(oe)[0]).displacementY:he=I.idToNodeMap.get(oe).displacementY,I.nodeToRelativeConstraintMapVertical.get(oe).forEach(function(le){if(le.bottom){var ke=I.nodeToTempPositionMapVertical.get(le.bottom)-I.nodeToTempPositionMapVertical.get(oe)-he;ke<le.gap&&(he-=le.gap-ke)}else{var ke=I.nodeToTempPositionMapVertical.get(oe)-I.nodeToTempPositionMapVertical.get(le.top)+he;ke<le.gap&&(he+=le.gap-ke)}}),I.nodeToTempPositionMapVertical.set(oe,I.nodeToTempPositionMapVertical.get(oe)+he),I.dummyToNodeForHorizontalAlignment.has(oe)?I.dummyToNodeForHorizontalAlignment.get(oe).forEach(function(le){I.idToNodeMap.get(le).displacementY=he}):I.idToNodeMap.get(oe).displacementY=he}});else{for(var H=0;H<this.componentsOnHorizontal.length;H++){var ue=this.componentsOnHorizontal[H];if(this.fixedComponentsOnHorizontal[H])for(var P=0;P<ue.length;P++)this.dummyToNodeForVerticalAlignment.has(ue[P])?this.dummyToNodeForVerticalAlignment.get(ue[P]).forEach(function(le){I.idToNodeMap.get(le).displacementX=0}):this.idToNodeMap.get(ue[P]).displacementX=0;else{for(var be=0,Le=0,P=0;P<ue.length;P++)if(this.dummyToNodeForVerticalAlignment.has(ue[P])){var xe=this.dummyToNodeForVerticalAlignment.get(ue[P]);be+=xe.length*this.idToNodeMap.get(xe[0]).displacementX,Le+=xe.length}else be+=this.idToNodeMap.get(ue[P]).displacementX,Le++;for(var Ae=be/Le,P=0;P<ue.length;P++)this.dummyToNodeForVerticalAlignment.has(ue[P])?this.dummyToNodeForVerticalAlignment.get(ue[P]).forEach(function(le){I.idToNodeMap.get(le).displacementX=Ae}):this.idToNodeMap.get(ue[P]).displacementX=Ae}}for(var H=0;H<this.componentsOnVertical.length;H++){var ue=this.componentsOnVertical[H];if(this.fixedComponentsOnVertical[H])for(var P=0;P<ue.length;P++)this.dummyToNodeForHorizontalAlignment.has(ue[P])?this.dummyToNodeForHorizontalAlignment.get(ue[P]).forEach(function(ke){I.idToNodeMap.get(ke).displacementY=0}):this.idToNodeMap.get(ue[P]).displacementY=0;else{for(var be=0,Le=0,P=0;P<ue.length;P++)if(this.dummyToNodeForHorizontalAlignment.has(ue[P])){var xe=this.dummyToNodeForHorizontalAlignment.get(ue[P]);be+=xe.length*this.idToNodeMap.get(xe[0]).displacementY,Le+=xe.length}else be+=this.idToNodeMap.get(ue[P]).displacementY,Le++;for(var Ae=be/Le,P=0;P<ue.length;P++)this.dummyToNodeForHorizontalAlignment.has(ue[P])?this.dummyToNodeForHorizontalAlignment.get(ue[P]).forEach(function(pe){I.idToNodeMap.get(pe).displacementY=Ae}):this.idToNodeMap.get(ue[P]).displacementY=Ae}}}},F.prototype.calculateNodesToApplyGravitationTo=function(){var I=[],j,H=this.graphManager.getGraphs(),V=H.length,P;for(P=0;P<V;P++)j=H[P],j.updateConnected(),j.isConnected||(I=I.concat(j.getNodes()));return I},F.prototype.createBendpoints=function(){var I=[];I=I.concat(this.graphManager.getAllEdges());var j=new Set,H;for(H=0;H<I.length;H++){var V=I[H];if(!j.has(V)){var P=V.getSource(),q=V.getTarget();if(P==q)V.getBendpoints().push(new M),V.getBendpoints().push(new M),this.createDummyNodesForBendpoints(V),j.add(V);else{var Z=[];if(Z=Z.concat(P.getEdgeListToNode(q)),Z=Z.concat(q.getEdgeListToNode(P)),!j.has(Z[0])){if(Z.length>1){var J;for(J=0;J<Z.length;J++){var ae=Z[J];ae.getBendpoints().push(new M),this.createDummyNodesForBendpoints(ae)}}Z.forEach(function(ue){j.add(ue)})}}}if(j.size==I.length)break}},F.prototype.positionNodesRadially=function(I){for(var j=new A(0,0),H=Math.ceil(Math.sqrt(I.length)),V=0,P=0,q=0,Z=new M(0,0),J=0;J<I.length;J++){J%H==0&&(q=0,P=V,J!=0&&(P+=_.DEFAULT_COMPONENT_SEPERATION),V=0);var ae=I[J],ue=B.findCenterOfTree(ae);j.x=q,j.y=P,Z=F.radialLayout(ae,ue,j),Z.y>V&&(V=Math.floor(Z.y)),q=Math.floor(Z.x+_.DEFAULT_COMPONENT_SEPERATION)}this.transform(new M(C.WORLD_CENTER_X-Z.x/2,C.WORLD_CENTER_Y-Z.y/2))},F.radialLayout=function(I,j,H){var V=Math.max(this.maxDiagonalInTree(I),_.DEFAULT_RADIAL_SEPARATION);F.branchRadialLayout(j,null,0,359,0,V);var P=$.calculateBounds(I),q=new G;q.setDeviceOrgX(P.getMinX()),q.setDeviceOrgY(P.getMinY()),q.setWorldOrgX(H.x),q.setWorldOrgY(H.y);for(var Z=0;Z<I.length;Z++){var J=I[Z];J.transform(q)}var ae=new M(P.getMaxX(),P.getMaxY());return q.inverseTransformPoint(ae)},F.branchRadialLayout=function(I,j,H,V,P,q){var Z=(V-H+1)/2;Z<0&&(Z+=180);var J=(Z+H)%360,ae=J*L.TWO_PI/360,ue=Math.cos(ae),be=P*Math.cos(ae),Le=P*Math.sin(ae);I.setCenter(be,Le);var xe=[];xe=xe.concat(I.getEdges());var Ae=xe.length;j!=null&&Ae--;for(var oe=0,he=xe.length,le,ke=I.getEdgesBetween(j);ke.length>1;){var pe=ke[0];ke.splice(0,1);var qe=xe.indexOf(pe);qe>=0&&xe.splice(qe,1),he--,Ae--}j!=null?le=(xe.indexOf(ke[0])+1)%he:le=0;for(var me=Math.abs(V-H)/Ae,st=le;oe!=Ae;st=++st%he){var we=xe[st].getOtherEnd(I);if(we!=j){var Et=(H+oe*me)%360,wt=(Et+me)%360;F.branchRadialLayout(we,I,Et,wt,P+q,q),oe++}}},F.maxDiagonalInTree=function(I){for(var j=O.MIN_VALUE,H=0;H<I.length;H++){var V=I[H],P=V.getDiagonal();P>j&&(j=P)}return j},F.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},F.prototype.groupZeroDegreeMembers=function(){var I=this,j={};this.memberGroups={},this.idToDummyNode={};for(var H=[],V=this.graphManager.getAllNodes(),P=0;P<V.length;P++){var q=V[P],Z=q.getParent();this.getNodeDegreeWithChildren(q)===0&&(Z.id==null||!this.getToBeTiled(Z))&&H.push(q)}for(var P=0;P<H.length;P++){var q=H[P],J=q.getParent().id;typeof j[J]>"u"&&(j[J]=[]),j[J]=j[J].concat(q)}Object.keys(j).forEach(function(ae){if(j[ae].length>1){var ue="DummyCompound_"+ae;I.memberGroups[ue]=j[ae];var be=j[ae][0].getParent(),Le=new m(I.graphManager);Le.id=ue,Le.paddingLeft=be.paddingLeft||0,Le.paddingRight=be.paddingRight||0,Le.paddingBottom=be.paddingBottom||0,Le.paddingTop=be.paddingTop||0,I.idToDummyNode[ue]=Le;var xe=I.getGraphManager().add(I.newGraph(),Le),Ae=be.getChild();Ae.add(Le);for(var oe=0;oe<j[ae].length;oe++){var he=j[ae][oe];Ae.remove(he),xe.add(he)}}})},F.prototype.clearCompounds=function(){var I={},j={};this.performDFSOnCompounds();for(var H=0;H<this.compoundOrder.length;H++)j[this.compoundOrder[H].id]=this.compoundOrder[H],I[this.compoundOrder[H].id]=[].concat(this.compoundOrder[H].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[H].getChild()),this.compoundOrder[H].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(I,j)},F.prototype.clearZeroDegreeMembers=function(){var I=this,j=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function(H){var V=I.idToDummyNode[H];if(j[H]=I.tileNodes(I.memberGroups[H],V.paddingLeft+V.paddingRight),V.rect.width=j[H].width,V.rect.height=j[H].height,V.setCenter(j[H].centerX,j[H].centerY),V.labelMarginLeft=0,V.labelMarginTop=0,_.NODE_DIMENSIONS_INCLUDE_LABELS){var P=V.rect.width,q=V.rect.height;V.labelWidth&&(V.labelPosHorizontal=="left"?(V.rect.x-=V.labelWidth,V.setWidth(P+V.labelWidth),V.labelMarginLeft=V.labelWidth):V.labelPosHorizontal=="center"&&V.labelWidth>P?(V.rect.x-=(V.labelWidth-P)/2,V.setWidth(V.labelWidth),V.labelMarginLeft=(V.labelWidth-P)/2):V.labelPosHorizontal=="right"&&V.setWidth(P+V.labelWidth)),V.labelHeight&&(V.labelPosVertical=="top"?(V.rect.y-=V.labelHeight,V.setHeight(q+V.labelHeight),V.labelMarginTop=V.labelHeight):V.labelPosVertical=="center"&&V.labelHeight>q?(V.rect.y-=(V.labelHeight-q)/2,V.setHeight(V.labelHeight),V.labelMarginTop=(V.labelHeight-q)/2):V.labelPosVertical=="bottom"&&V.setHeight(q+V.labelHeight))}})},F.prototype.repopulateCompounds=function(){for(var I=this.compoundOrder.length-1;I>=0;I--){var j=this.compoundOrder[I],H=j.id,V=j.paddingLeft,P=j.paddingTop,q=j.labelMarginLeft,Z=j.labelMarginTop;this.adjustLocations(this.tiledMemberPack[H],j.rect.x,j.rect.y,V,P,q,Z)}},F.prototype.repopulateZeroDegreeMembers=function(){var I=this,j=this.tiledZeroDegreePack;Object.keys(j).forEach(function(H){var V=I.idToDummyNode[H],P=V.paddingLeft,q=V.paddingTop,Z=V.labelMarginLeft,J=V.labelMarginTop;I.adjustLocations(j[H],V.rect.x,V.rect.y,P,q,Z,J)})},F.prototype.getToBeTiled=function(I){var j=I.id;if(this.toBeTiled[j]!=null)return this.toBeTiled[j];var H=I.getChild();if(H==null)return this.toBeTiled[j]=!1,!1;for(var V=H.getNodes(),P=0;P<V.length;P++){var q=V[P];if(this.getNodeDegree(q)>0)return this.toBeTiled[j]=!1,!1;if(q.getChild()==null){this.toBeTiled[q.id]=!1;continue}if(!this.getToBeTiled(q))return this.toBeTiled[j]=!1,!1}return this.toBeTiled[j]=!0,!0},F.prototype.getNodeDegree=function(I){for(var j=I.id,H=I.getEdges(),V=0,P=0;P<H.length;P++){var q=H[P];q.getSource().id!==q.getTarget().id&&(V=V+1)}return V},F.prototype.getNodeDegreeWithChildren=function(I){var j=this.getNodeDegree(I);if(I.getChild()==null)return j;for(var H=I.getChild().getNodes(),V=0;V<H.length;V++){var P=H[V];j+=this.getNodeDegreeWithChildren(P)}return j},F.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},F.prototype.fillCompexOrderByDFS=function(I){for(var j=0;j<I.length;j++){var H=I[j];H.getChild()!=null&&this.fillCompexOrderByDFS(H.getChild().getNodes()),this.getToBeTiled(H)&&this.compoundOrder.push(H)}},F.prototype.adjustLocations=function(I,j,H,V,P,q,Z){j+=V+q,H+=P+Z;for(var J=j,ae=0;ae<I.rows.length;ae++){var ue=I.rows[ae];j=J;for(var be=0,Le=0;Le<ue.length;Le++){var xe=ue[Le];xe.rect.x=j,xe.rect.y=H,j+=xe.rect.width+I.horizontalPadding,xe.rect.height>be&&(be=xe.rect.height)}H+=be+I.verticalPadding}},F.prototype.tileCompoundMembers=function(I,j){var H=this;this.tiledMemberPack=[],Object.keys(I).forEach(function(V){var P=j[V];if(H.tiledMemberPack[V]=H.tileNodes(I[V],P.paddingLeft+P.paddingRight),P.rect.width=H.tiledMemberPack[V].width,P.rect.height=H.tiledMemberPack[V].height,P.setCenter(H.tiledMemberPack[V].centerX,H.tiledMemberPack[V].centerY),P.labelMarginLeft=0,P.labelMarginTop=0,_.NODE_DIMENSIONS_INCLUDE_LABELS){var q=P.rect.width,Z=P.rect.height;P.labelWidth&&(P.labelPosHorizontal=="left"?(P.rect.x-=P.labelWidth,P.setWidth(q+P.labelWidth),P.labelMarginLeft=P.labelWidth):P.labelPosHorizontal=="center"&&P.labelWidth>q?(P.rect.x-=(P.labelWidth-q)/2,P.setWidth(P.labelWidth),P.labelMarginLeft=(P.labelWidth-q)/2):P.labelPosHorizontal=="right"&&P.setWidth(q+P.labelWidth)),P.labelHeight&&(P.labelPosVertical=="top"?(P.rect.y-=P.labelHeight,P.setHeight(Z+P.labelHeight),P.labelMarginTop=P.labelHeight):P.labelPosVertical=="center"&&P.labelHeight>Z?(P.rect.y-=(P.labelHeight-Z)/2,P.setHeight(P.labelHeight),P.labelMarginTop=(P.labelHeight-Z)/2):P.labelPosVertical=="bottom"&&P.setHeight(Z+P.labelHeight))}})},F.prototype.tileNodes=function(I,j){var H=this.tileNodesByFavoringDim(I,j,!0),V=this.tileNodesByFavoringDim(I,j,!1),P=this.getOrgRatio(H),q=this.getOrgRatio(V),Z;return q<P?Z=V:Z=H,Z},F.prototype.getOrgRatio=function(I){var j=I.width,H=I.height,V=j/H;return V<1&&(V=1/V),V},F.prototype.calcIdealRowWidth=function(I,j){var H=_.TILING_PADDING_VERTICAL,V=_.TILING_PADDING_HORIZONTAL,P=I.length,q=0,Z=0,J=0;I.forEach(function(oe){q+=oe.getWidth(),Z+=oe.getHeight(),oe.getWidth()>J&&(J=oe.getWidth())});var ae=q/P,ue=Z/P,be=Math.pow(H-V,2)+4*(ae+V)*(ue+H)*P,Le=(V-H+Math.sqrt(be))/(2*(ae+V)),xe;j?(xe=Math.ceil(Le),xe==Le&&xe++):xe=Math.floor(Le);var Ae=xe*(ae+V)-V;return J>Ae&&(Ae=J),Ae+=V*2,Ae},F.prototype.tileNodesByFavoringDim=function(I,j,H){var V=_.TILING_PADDING_VERTICAL,P=_.TILING_PADDING_HORIZONTAL,q=_.TILING_COMPARE_BY,Z={rows:[],rowWidth:[],rowHeight:[],width:0,height:j,verticalPadding:V,horizontalPadding:P,centerX:0,centerY:0};q&&(Z.idealRowWidth=this.calcIdealRowWidth(I,H));var J=function(oe){return oe.rect.width*oe.rect.height},ae=function(oe,he){return J(he)-J(oe)};I.sort(function(oe,he){var le=ae;return Z.idealRowWidth?(le=q,le(oe.id,he.id)):le(oe,he)});for(var ue=0,be=0,Le=0;Le<I.length;Le++){var xe=I[Le];ue+=xe.getCenterX(),be+=xe.getCenterY()}Z.centerX=ue/I.length,Z.centerY=be/I.length;for(var Le=0;Le<I.length;Le++){var xe=I[Le];if(Z.rows.length==0)this.insertNodeToRow(Z,xe,0,j);else if(this.canAddHorizontal(Z,xe.rect.width,xe.rect.height)){var Ae=Z.rows.length-1;Z.idealRowWidth||(Ae=this.getShortestRowIndex(Z)),this.insertNodeToRow(Z,xe,Ae,j)}else this.insertNodeToRow(Z,xe,Z.rows.length,j);this.shiftToLastRow(Z)}return Z},F.prototype.insertNodeToRow=function(I,j,H,V){var P=V;if(H==I.rows.length){var q=[];I.rows.push(q),I.rowWidth.push(P),I.rowHeight.push(0)}var Z=I.rowWidth[H]+j.rect.width;I.rows[H].length>0&&(Z+=I.horizontalPadding),I.rowWidth[H]=Z,I.width<Z&&(I.width=Z);var J=j.rect.height;H>0&&(J+=I.verticalPadding);var ae=0;J>I.rowHeight[H]&&(ae=I.rowHeight[H],I.rowHeight[H]=J,ae=I.rowHeight[H]-ae),I.height+=ae,I.rows[H].push(j)},F.prototype.getShortestRowIndex=function(I){for(var j=-1,H=Number.MAX_VALUE,V=0;V<I.rows.length;V++)I.rowWidth[V]<H&&(j=V,H=I.rowWidth[V]);return j},F.prototype.getLongestRowIndex=function(I){for(var j=-1,H=Number.MIN_VALUE,V=0;V<I.rows.length;V++)I.rowWidth[V]>H&&(j=V,H=I.rowWidth[V]);return j},F.prototype.canAddHorizontal=function(I,j,H){if(I.idealRowWidth){var V=I.rows.length-1,P=I.rowWidth[V];return P+j+I.horizontalPadding<=I.idealRowWidth}var q=this.getShortestRowIndex(I);if(q<0)return!0;var Z=I.rowWidth[q];if(Z+I.horizontalPadding+j<=I.width)return!0;var J=0;I.rowHeight[q]<H&&q>0&&(J=H+I.verticalPadding-I.rowHeight[q]);var ae;I.width-Z>=j+I.horizontalPadding?ae=(I.height+J)/(Z+j+I.horizontalPadding):ae=(I.height+J)/I.width,J=H+I.verticalPadding;var ue;return I.width<j?ue=(I.height+J)/j:ue=(I.height+J)/I.width,ue<1&&(ue=1/ue),ae<1&&(ae=1/ae),ae<ue},F.prototype.shiftToLastRow=function(I){var j=this.getLongestRowIndex(I),H=I.rowWidth.length-1,V=I.rows[j],P=V[V.length-1],q=P.width+I.horizontalPadding;if(I.width-I.rowWidth[H]>q&&j!=H){V.splice(-1,1),I.rows[H].push(P),I.rowWidth[j]=I.rowWidth[j]-q,I.rowWidth[H]=I.rowWidth[H]+q,I.width=I.rowWidth[instance.getLongestRowIndex(I)];for(var Z=Number.MIN_VALUE,J=0;J<V.length;J++)V[J].height>Z&&(Z=V[J].height);j>0&&(Z+=I.verticalPadding);var ae=I.rowHeight[j]+I.rowHeight[H];I.rowHeight[j]=Z,I.rowHeight[H]<P.height+I.verticalPadding&&(I.rowHeight[H]=P.height+I.verticalPadding);var ue=I.rowHeight[j]+I.rowHeight[H];I.height+=ue-ae,this.shiftToLastRow(I)}},F.prototype.tilingPreLayout=function(){_.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},F.prototype.tilingPostLayout=function(){_.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},F.prototype.reduceTrees=function(){for(var I=[],j=!0,H;j;){var V=this.graphManager.getAllNodes(),P=[];j=!1;for(var q=0;q<V.length;q++)if(H=V[q],H.getEdges().length==1&&!H.getEdges()[0].isInterGraph&&H.getChild()==null){if(_.PURE_INCREMENTAL){var Z=H.getEdges()[0].getOtherEnd(H),J=new N(H.getCenterX()-Z.getCenterX(),H.getCenterY()-Z.getCenterY());P.push([H,H.getEdges()[0],H.getOwner(),J])}else P.push([H,H.getEdges()[0],H.getOwner()]);j=!0}if(j==!0){for(var ae=[],ue=0;ue<P.length;ue++)P[ue][0].getEdges().length==1&&(ae.push(P[ue]),P[ue][0].getOwner().remove(P[ue][0]));I.push(ae),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=I},F.prototype.growTree=function(I){for(var j=I.length,H=I[j-1],V,P=0;P<H.length;P++)V=H[P],this.findPlaceforPrunedNode(V),V[2].add(V[0]),V[2].add(V[1],V[1].source,V[1].target);I.splice(I.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},F.prototype.findPlaceforPrunedNode=function(I){var j,H,V=I[0];if(V==I[1].source?H=I[1].target:H=I[1].source,_.PURE_INCREMENTAL)V.setCenter(H.getCenterX()+I[3].getWidth(),H.getCenterY()+I[3].getHeight());else{var P=H.startX,q=H.finishX,Z=H.startY,J=H.finishY,ae=0,ue=0,be=0,Le=0,xe=[ae,be,ue,Le];if(Z>0)for(var Ae=P;Ae<=q;Ae++)xe[0]+=this.grid[Ae][Z-1].length+this.grid[Ae][Z].length-1;if(q<this.grid.length-1)for(var Ae=Z;Ae<=J;Ae++)xe[1]+=this.grid[q+1][Ae].length+this.grid[q][Ae].length-1;if(J<this.grid[0].length-1)for(var Ae=P;Ae<=q;Ae++)xe[2]+=this.grid[Ae][J+1].length+this.grid[Ae][J].length-1;if(P>0)for(var Ae=Z;Ae<=J;Ae++)xe[3]+=this.grid[P-1][Ae].length+this.grid[P][Ae].length-1;for(var oe=O.MAX_VALUE,he,le,ke=0;ke<xe.length;ke++)xe[ke]<oe?(oe=xe[ke],he=1,le=ke):xe[ke]==oe&&he++;if(he==3&&oe==0)xe[0]==0&&xe[1]==0&&xe[2]==0?j=1:xe[0]==0&&xe[1]==0&&xe[3]==0?j=0:xe[0]==0&&xe[2]==0&&xe[3]==0?j=3:xe[1]==0&&xe[2]==0&&xe[3]==0&&(j=2);else if(he==2&&oe==0){var pe=Math.floor(Math.random()*2);xe[0]==0&&xe[1]==0?pe==0?j=0:j=1:xe[0]==0&&xe[2]==0?pe==0?j=0:j=2:xe[0]==0&&xe[3]==0?pe==0?j=0:j=3:xe[1]==0&&xe[2]==0?pe==0?j=1:j=2:xe[1]==0&&xe[3]==0?pe==0?j=1:j=3:pe==0?j=2:j=3}else if(he==4&&oe==0){var pe=Math.floor(Math.random()*4);j=pe}else j=le;j==0?V.setCenter(H.getCenterX(),H.getCenterY()-H.getHeight()/2-w.DEFAULT_EDGE_LENGTH-V.getHeight()/2):j==1?V.setCenter(H.getCenterX()+H.getWidth()/2+w.DEFAULT_EDGE_LENGTH+V.getWidth()/2,H.getCenterY()):j==2?V.setCenter(H.getCenterX(),H.getCenterY()+H.getHeight()/2+w.DEFAULT_EDGE_LENGTH+V.getHeight()/2):V.setCenter(H.getCenterX()-H.getWidth()/2-w.DEFAULT_EDGE_LENGTH-V.getWidth()/2,H.getCenterY())}},u.exports=F},991:(u,h,d)=>{var p=d(551).FDLayoutNode,g=d(551).IMath;function y(x,_,E,w){p.call(this,x,_,E,w)}y.prototype=Object.create(p.prototype);for(var m in p)y[m]=p[m];y.prototype.calculateDisplacement=function(){var x=this.graphManager.getLayout();this.getChild()!=null&&this.fixedNodeWeight?(this.displacementX+=x.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.fixedNodeWeight,this.displacementY+=x.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.fixedNodeWeight):(this.displacementX+=x.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY+=x.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren),Math.abs(this.displacementX)>x.coolingFactor*x.maxNodeDisplacement&&(this.displacementX=x.coolingFactor*x.maxNodeDisplacement*g.sign(this.displacementX)),Math.abs(this.displacementY)>x.coolingFactor*x.maxNodeDisplacement&&(this.displacementY=x.coolingFactor*x.maxNodeDisplacement*g.sign(this.displacementY)),this.child&&this.child.getNodes().length>0&&this.propogateDisplacementToChildren(this.displacementX,this.displacementY)},y.prototype.propogateDisplacementToChildren=function(x,_){for(var E=this.getChild().getNodes(),w,C=0;C<E.length;C++)w=E[C],w.getChild()==null?(w.displacementX+=x,w.displacementY+=_):w.propogateDisplacementToChildren(x,_)},y.prototype.move=function(){var x=this.graphManager.getLayout();(this.child==null||this.child.getNodes().length==0)&&(this.moveBy(this.displacementX,this.displacementY),x.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY)),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},y.prototype.setPred1=function(x){this.pred1=x},y.prototype.getPred1=function(){return pred1},y.prototype.getPred2=function(){return pred2},y.prototype.setNext=function(x){this.next=x},y.prototype.getNext=function(){return next},y.prototype.setProcessed=function(x){this.processed=x},y.prototype.isProcessed=function(){return processed},u.exports=y},902:(u,h,d)=>{function p(E){if(Array.isArray(E)){for(var w=0,C=Array(E.length);w<E.length;w++)C[w]=E[w];return C}else return Array.from(E)}var g=d(806),y=d(551).LinkedList,m=d(551).Matrix,x=d(551).SVD;function _(){}_.handleConstraints=function(E){var w={};w.fixedNodeConstraint=E.constraints.fixedNodeConstraint,w.alignmentConstraint=E.constraints.alignmentConstraint,w.relativePlacementConstraint=E.constraints.relativePlacementConstraint;for(var C=new Map,A=new Map,M=[],N=[],B=E.getAllNodes(),O=0,L=0;L<B.length;L++){var $=B[L];$.getChild()==null&&(A.set($.id,O++),M.push($.getCenterX()),N.push($.getCenterY()),C.set($.id,$))}w.relativePlacementConstraint&&w.relativePlacementConstraint.forEach(function(fe){!fe.gap&&fe.gap!=0&&(fe.left?fe.gap=g.DEFAULT_EDGE_LENGTH+C.get(fe.left).getWidth()/2+C.get(fe.right).getWidth()/2:fe.gap=g.DEFAULT_EDGE_LENGTH+C.get(fe.top).getHeight()/2+C.get(fe.bottom).getHeight()/2)});var G=function(fe,ze){return{x:fe.x-ze.x,y:fe.y-ze.y}},z=function(fe){var ze=0,yt=0;return fe.forEach(function(bt){ze+=M[A.get(bt)],yt+=N[A.get(bt)]}),{x:ze/fe.size,y:yt/fe.size}},F=function(fe,ze,yt,bt,At){function ct(Br,sr){var hr=new Set(Br),Ci=!0,_r=!1,ln=void 0;try{for(var en=sr[Symbol.iterator](),bi;!(Ci=(bi=en.next()).done);Ci=!0){var gi=bi.value;hr.add(gi)}}catch(Fr){_r=!0,ln=Fr}finally{try{!Ci&&en.return&&en.return()}finally{if(_r)throw ln}}return hr}var zt=new Map;fe.forEach(function(Br,sr){zt.set(sr,0)}),fe.forEach(function(Br,sr){Br.forEach(function(hr){zt.set(hr.id,zt.get(hr.id)+1)})});var ft=new Map,Pr=new Map,Mi=new y;zt.forEach(function(Br,sr){Br==0?(Mi.push(sr),yt||(ze=="horizontal"?ft.set(sr,A.has(sr)?M[A.get(sr)]:bt.get(sr)):ft.set(sr,A.has(sr)?N[A.get(sr)]:bt.get(sr)))):ft.set(sr,Number.NEGATIVE_INFINITY),yt&&Pr.set(sr,new Set([sr]))}),yt&&At.forEach(function(Br){var sr=[];if(Br.forEach(function(_r){yt.has(_r)&&sr.push(_r)}),sr.length>0){var hr=0;sr.forEach(function(_r){ze=="horizontal"?(ft.set(_r,A.has(_r)?M[A.get(_r)]:bt.get(_r)),hr+=ft.get(_r)):(ft.set(_r,A.has(_r)?N[A.get(_r)]:bt.get(_r)),hr+=ft.get(_r))}),hr=hr/sr.length,Br.forEach(function(_r){yt.has(_r)||ft.set(_r,hr)})}else{var Ci=0;Br.forEach(function(_r){ze=="horizontal"?Ci+=A.has(_r)?M[A.get(_r)]:bt.get(_r):Ci+=A.has(_r)?N[A.get(_r)]:bt.get(_r)}),Ci=Ci/Br.length,Br.forEach(function(_r){ft.set(_r,Ci)})}});for(var Di=function(){var Br=Mi.shift(),sr=fe.get(Br);sr.forEach(function(hr){if(ft.get(hr.id)<ft.get(Br)+hr.gap)if(yt&&yt.has(hr.id)){var Ci=void 0;if(ze=="horizontal"?Ci=A.has(hr.id)?M[A.get(hr.id)]:bt.get(hr.id):Ci=A.has(hr.id)?N[A.get(hr.id)]:bt.get(hr.id),ft.set(hr.id,Ci),Ci<ft.get(Br)+hr.gap){var _r=ft.get(Br)+hr.gap-Ci;Pr.get(Br).forEach(function(ln){ft.set(ln,ft.get(ln)-_r)})}}else ft.set(hr.id,ft.get(Br)+hr.gap);zt.set(hr.id,zt.get(hr.id)-1),zt.get(hr.id)==0&&Mi.push(hr.id),yt&&Pr.set(hr.id,ct(Pr.get(Br),Pr.get(hr.id)))})};Mi.length!=0;)Di();if(yt){var ri=new Set;fe.forEach(function(Br,sr){Br.length==0&&ri.add(sr)});var Gi=[];Pr.forEach(function(Br,sr){if(ri.has(sr)){var hr=!1,Ci=!0,_r=!1,ln=void 0;try{for(var en=Br[Symbol.iterator](),bi;!(Ci=(bi=en.next()).done);Ci=!0){var gi=bi.value;yt.has(gi)&&(hr=!0)}}catch(Xr){_r=!0,ln=Xr}finally{try{!Ci&&en.return&&en.return()}finally{if(_r)throw ln}}if(!hr){var Fr=!1,Bi=void 0;Gi.forEach(function(Xr,xa){Xr.has([].concat(p(Br))[0])&&(Fr=!0,Bi=xa)}),Fr?Br.forEach(function(Xr){Gi[Bi].add(Xr)}):Gi.push(new Set(Br))}}}),Gi.forEach(function(Br,sr){var hr=Number.POSITIVE_INFINITY,Ci=Number.POSITIVE_INFINITY,_r=Number.NEGATIVE_INFINITY,ln=Number.NEGATIVE_INFINITY,en=!0,bi=!1,gi=void 0;try{for(var Fr=Br[Symbol.iterator](),Bi;!(en=(Bi=Fr.next()).done);en=!0){var Xr=Bi.value,xa=void 0;ze=="horizontal"?xa=A.has(Xr)?M[A.get(Xr)]:bt.get(Xr):xa=A.has(Xr)?N[A.get(Xr)]:bt.get(Xr);var Hn=ft.get(Xr);xa<hr&&(hr=xa),xa>_r&&(_r=xa),Hn<Ci&&(Ci=Hn),Hn>ln&&(ln=Hn)}}catch(vi){bi=!0,gi=vi}finally{try{!en&&Fr.return&&Fr.return()}finally{if(bi)throw gi}}var fa=(hr+_r)/2-(Ci+ln)/2,$s=!0,Za=!1,Vs=void 0;try{for(var ks=Br[Symbol.iterator](),Ws;!($s=(Ws=ks.next()).done);$s=!0){var rt=Ws.value;ft.set(rt,ft.get(rt)+fa)}}catch(vi){Za=!0,Vs=vi}finally{try{!$s&&ks.return&&ks.return()}finally{if(Za)throw Vs}}})}return ft},X=function(fe){var ze=0,yt=0,bt=0,At=0;if(fe.forEach(function(Pr){Pr.left?M[A.get(Pr.left)]-M[A.get(Pr.right)]>=0?ze++:yt++:N[A.get(Pr.top)]-N[A.get(Pr.bottom)]>=0?bt++:At++}),ze>yt&&bt>At)for(var ct=0;ct<A.size;ct++)M[ct]=-1*M[ct],N[ct]=-1*N[ct];else if(ze>yt)for(var zt=0;zt<A.size;zt++)M[zt]=-1*M[zt];else if(bt>At)for(var ft=0;ft<A.size;ft++)N[ft]=-1*N[ft]},I=function(fe){var ze=[],yt=new y,bt=new Set,At=0;return fe.forEach(function(ct,zt){if(!bt.has(zt)){ze[At]=[];var ft=zt;for(yt.push(ft),bt.add(ft),ze[At].push(ft);yt.length!=0;){ft=yt.shift();var Pr=fe.get(ft);Pr.forEach(function(Mi){bt.has(Mi.id)||(yt.push(Mi.id),bt.add(Mi.id),ze[At].push(Mi.id))})}At++}}),ze},j=function(fe){var ze=new Map;return fe.forEach(function(yt,bt){ze.set(bt,[])}),fe.forEach(function(yt,bt){yt.forEach(function(At){ze.get(bt).push(At),ze.get(At.id).push({id:bt,gap:At.gap,direction:At.direction})})}),ze},H=function(fe){var ze=new Map;return fe.forEach(function(yt,bt){ze.set(bt,[])}),fe.forEach(function(yt,bt){yt.forEach(function(At){ze.get(At.id).push({id:bt,gap:At.gap,direction:At.direction})})}),ze},V=[],P=[],q=!1,Z=!1,J=new Set,ae=new Map,ue=new Map,be=[];if(w.fixedNodeConstraint&&w.fixedNodeConstraint.forEach(function(fe){J.add(fe.nodeId)}),w.relativePlacementConstraint&&(w.relativePlacementConstraint.forEach(function(fe){fe.left?(ae.has(fe.left)?ae.get(fe.left).push({id:fe.right,gap:fe.gap,direction:"horizontal"}):ae.set(fe.left,[{id:fe.right,gap:fe.gap,direction:"horizontal"}]),ae.has(fe.right)||ae.set(fe.right,[])):(ae.has(fe.top)?ae.get(fe.top).push({id:fe.bottom,gap:fe.gap,direction:"vertical"}):ae.set(fe.top,[{id:fe.bottom,gap:fe.gap,direction:"vertical"}]),ae.has(fe.bottom)||ae.set(fe.bottom,[]))}),ue=j(ae),be=I(ue)),g.TRANSFORM_ON_CONSTRAINT_HANDLING){if(w.fixedNodeConstraint&&w.fixedNodeConstraint.length>1)w.fixedNodeConstraint.forEach(function(fe,ze){V[ze]=[fe.position.x,fe.position.y],P[ze]=[M[A.get(fe.nodeId)],N[A.get(fe.nodeId)]]}),q=!0;else if(w.alignmentConstraint)(function(){var fe=0;if(w.alignmentConstraint.vertical){for(var ze=w.alignmentConstraint.vertical,yt=function(ft){var Pr=new Set;ze[ft].forEach(function(ri){Pr.add(ri)});var Mi=new Set([].concat(p(Pr)).filter(function(ri){return J.has(ri)})),Di=void 0;Mi.size>0?Di=M[A.get(Mi.values().next().value)]:Di=z(Pr).x,ze[ft].forEach(function(ri){V[fe]=[Di,N[A.get(ri)]],P[fe]=[M[A.get(ri)],N[A.get(ri)]],fe++})},bt=0;bt<ze.length;bt++)yt(bt);q=!0}if(w.alignmentConstraint.horizontal){for(var At=w.alignmentConstraint.horizontal,ct=function(ft){var Pr=new Set;At[ft].forEach(function(ri){Pr.add(ri)});var Mi=new Set([].concat(p(Pr)).filter(function(ri){return J.has(ri)})),Di=void 0;Mi.size>0?Di=M[A.get(Mi.values().next().value)]:Di=z(Pr).y,At[ft].forEach(function(ri){V[fe]=[M[A.get(ri)],Di],P[fe]=[M[A.get(ri)],N[A.get(ri)]],fe++})},zt=0;zt<At.length;zt++)ct(zt);q=!0}w.relativePlacementConstraint&&(Z=!0)})();else if(w.relativePlacementConstraint){for(var Le=0,xe=0,Ae=0;Ae<be.length;Ae++)be[Ae].length>Le&&(Le=be[Ae].length,xe=Ae);if(Le<ue.size/2)X(w.relativePlacementConstraint),q=!1,Z=!1;else{var oe=new Map,he=new Map,le=[];be[xe].forEach(function(fe){ae.get(fe).forEach(function(ze){ze.direction=="horizontal"?(oe.has(fe)?oe.get(fe).push(ze):oe.set(fe,[ze]),oe.has(ze.id)||oe.set(ze.id,[]),le.push({left:fe,right:ze.id})):(he.has(fe)?he.get(fe).push(ze):he.set(fe,[ze]),he.has(ze.id)||he.set(ze.id,[]),le.push({top:fe,bottom:ze.id}))})}),X(le),Z=!1;var ke=F(oe,"horizontal"),pe=F(he,"vertical");be[xe].forEach(function(fe,ze){P[ze]=[M[A.get(fe)],N[A.get(fe)]],V[ze]=[],ke.has(fe)?V[ze][0]=ke.get(fe):V[ze][0]=M[A.get(fe)],pe.has(fe)?V[ze][1]=pe.get(fe):V[ze][1]=N[A.get(fe)]}),q=!0}}if(q){for(var qe=void 0,me=m.transpose(V),st=m.transpose(P),we=0;we<me.length;we++)me[we]=m.multGamma(me[we]),st[we]=m.multGamma(st[we]);var Et=m.multMat(me,m.transpose(st)),wt=x.svd(Et);qe=m.multMat(wt.V,m.transpose(wt.U));for(var Tt=0;Tt<A.size;Tt++){var er=[M[Tt],N[Tt]],tr=[qe[0][0],qe[1][0]],kr=[qe[0][1],qe[1][1]];M[Tt]=m.dotProduct(er,tr),N[Tt]=m.dotProduct(er,kr)}Z&&X(w.relativePlacementConstraint)}}if(g.ENFORCE_CONSTRAINTS){if(w.fixedNodeConstraint&&w.fixedNodeConstraint.length>0){var fr={x:0,y:0};w.fixedNodeConstraint.forEach(function(fe,ze){var yt={x:M[A.get(fe.nodeId)],y:N[A.get(fe.nodeId)]},bt=fe.position,At=G(bt,yt);fr.x+=At.x,fr.y+=At.y}),fr.x/=w.fixedNodeConstraint.length,fr.y/=w.fixedNodeConstraint.length,M.forEach(function(fe,ze){M[ze]+=fr.x}),N.forEach(function(fe,ze){N[ze]+=fr.y}),w.fixedNodeConstraint.forEach(function(fe){M[A.get(fe.nodeId)]=fe.position.x,N[A.get(fe.nodeId)]=fe.position.y})}if(w.alignmentConstraint){if(w.alignmentConstraint.vertical)for(var Mt=w.alignmentConstraint.vertical,Kt=function(fe){var ze=new Set;Mt[fe].forEach(function(At){ze.add(At)});var yt=new Set([].concat(p(ze)).filter(function(At){return J.has(At)})),bt=void 0;yt.size>0?bt=M[A.get(yt.values().next().value)]:bt=z(ze).x,ze.forEach(function(At){J.has(At)||(M[A.get(At)]=bt)})},ne=0;ne<Mt.length;ne++)Kt(ne);if(w.alignmentConstraint.horizontal)for(var He=w.alignmentConstraint.horizontal,Te=function(fe){var ze=new Set;He[fe].forEach(function(At){ze.add(At)});var yt=new Set([].concat(p(ze)).filter(function(At){return J.has(At)})),bt=void 0;yt.size>0?bt=N[A.get(yt.values().next().value)]:bt=z(ze).y,ze.forEach(function(At){J.has(At)||(N[A.get(At)]=bt)})},Qe=0;Qe<He.length;Qe++)Te(Qe)}w.relativePlacementConstraint&&function(){var fe=new Map,ze=new Map,yt=new Map,bt=new Map,At=new Map,ct=new Map,zt=new Set,ft=new Set;if(J.forEach(function(Be){zt.add(Be),ft.add(Be)}),w.alignmentConstraint){if(w.alignmentConstraint.vertical)for(var Pr=w.alignmentConstraint.vertical,Mi=function(Be){yt.set("dummy"+Be,[]),Pr[Be].forEach(function(Xn){fe.set(Xn,"dummy"+Be),yt.get("dummy"+Be).push(Xn),J.has(Xn)&&zt.add("dummy"+Be)}),At.set("dummy"+Be,M[A.get(Pr[Be][0])])},Di=0;Di<Pr.length;Di++)Mi(Di);if(w.alignmentConstraint.horizontal)for(var ri=w.alignmentConstraint.horizontal,Gi=function(Be){bt.set("dummy"+Be,[]),ri[Be].forEach(function(Xn){ze.set(Xn,"dummy"+Be),bt.get("dummy"+Be).push(Xn),J.has(Xn)&&ft.add("dummy"+Be)}),ct.set("dummy"+Be,N[A.get(ri[Be][0])])},Br=0;Br<ri.length;Br++)Gi(Br)}var sr=new Map,hr=new Map,Ci=function(Be){ae.get(Be).forEach(function(Xn){var Xe=void 0,zs=void 0;Xn.direction=="horizontal"?(Xe=fe.get(Be)?fe.get(Be):Be,fe.get(Xn.id)?zs={id:fe.get(Xn.id),gap:Xn.gap,direction:Xn.direction}:zs=Xn,sr.has(Xe)?sr.get(Xe).push(zs):sr.set(Xe,[zs]),sr.has(zs.id)||sr.set(zs.id,[])):(Xe=ze.get(Be)?ze.get(Be):Be,ze.get(Xn.id)?zs={id:ze.get(Xn.id),gap:Xn.gap,direction:Xn.direction}:zs=Xn,hr.has(Xe)?hr.get(Xe).push(zs):hr.set(Xe,[zs]),hr.has(zs.id)||hr.set(zs.id,[]))})},_r=!0,ln=!1,en=void 0;try{for(var bi=ae.keys()[Symbol.iterator](),gi;!(_r=(gi=bi.next()).done);_r=!0){var Fr=gi.value;Ci(Fr)}}catch(Be){ln=!0,en=Be}finally{try{!_r&&bi.return&&bi.return()}finally{if(ln)throw en}}var Bi=j(sr),Xr=j(hr),xa=I(Bi),Hn=I(Xr),fa=H(sr),$s=H(hr),Za=[],Vs=[];xa.forEach(function(Be,Xn){Za[Xn]=[],Be.forEach(function(Xe){fa.get(Xe).length==0&&Za[Xn].push(Xe)})}),Hn.forEach(function(Be,Xn){Vs[Xn]=[],Be.forEach(function(Xe){$s.get(Xe).length==0&&Vs[Xn].push(Xe)})});var ks=F(sr,"horizontal",zt,At,Za),Ws=F(hr,"vertical",ft,ct,Vs),rt=function(Be){yt.get(Be)?yt.get(Be).forEach(function(Xn){M[A.get(Xn)]=ks.get(Be)}):M[A.get(Be)]=ks.get(Be)},vi=!0,ai=!1,ga=void 0;try{for(var Ta=ks.keys()[Symbol.iterator](),as;!(vi=(as=Ta.next()).done);vi=!0){var Ol=as.value;rt(Ol)}}catch(Be){ai=!0,ga=Be}finally{try{!vi&&Ta.return&&Ta.return()}finally{if(ai)throw ga}}var So=function(Be){bt.get(Be)?bt.get(Be).forEach(function(Xn){N[A.get(Xn)]=Ws.get(Be)}):N[A.get(Be)]=Ws.get(Be)},Ea=!0,si=!1,xn=void 0;try{for(var Gr=Ws.keys()[Symbol.iterator](),ea;!(Ea=(ea=Gr.next()).done);Ea=!0){var Ol=ea.value;So(Ol)}}catch(Be){si=!0,xn=Be}finally{try{!Ea&&Gr.return&&Gr.return()}finally{if(si)throw xn}}}()}for(var ce=0;ce<B.length;ce++){var Ut=B[ce];Ut.getChild()==null&&Ut.setCenter(M[A.get(Ut.id)],N[A.get(Ut.id)])}},u.exports=_},551:u=>{u.exports=r}},n={};function a(u){var h=n[u];if(h!==void 0)return h.exports;var d=n[u]={exports:{}};return i[u](d,d.exports,a),d.exports}var s=a(45);return s})()})}),JZe=hi((e,t)=>{(function(r,i){typeof e=="object"&&typeof t=="object"?t.exports=i(ADe()):typeof define=="function"&&define.amd?define(["cose-base"],i):typeof e=="object"?e.cytoscapeFcose=i(ADe()):r.cytoscapeFcose=i(r.coseBase)})(e,function(r){return(()=>{"use strict";var i={658:u=>{u.exports=Object.assign!=null?Object.assign.bind(Object):function(h){for(var d=arguments.length,p=Array(d>1?d-1:0),g=1;g<d;g++)p[g-1]=arguments[g];return p.forEach(function(y){Object.keys(y).forEach(function(m){return h[m]=y[m]})}),h}},548:(u,h,d)=>{var p=function(){function m(x,_){var E=[],w=!0,C=!1,A=void 0;try{for(var M=x[Symbol.iterator](),N;!(w=(N=M.next()).done)&&(E.push(N.value),!(_&&E.length===_));w=!0);}catch(B){C=!0,A=B}finally{try{!w&&M.return&&M.return()}finally{if(C)throw A}}return E}return function(x,_){if(Array.isArray(x))return x;if(Symbol.iterator in Object(x))return m(x,_);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),g=d(140).layoutBase.LinkedList,y={};y.getTopMostNodes=function(m){for(var x={},_=0;_<m.length;_++)x[m[_].id()]=!0;var E=m.filter(function(w,C){typeof w=="number"&&(w=C);for(var A=w.parent()[0];A!=null;){if(x[A.id()])return!1;A=A.parent()[0]}return!0});return E},y.connectComponents=function(m,x,_,E){var w=new g,C=new Set,A=[],M=void 0,N=void 0,B=void 0,O=!1,L=1,$=[],G=[],z=function(){var F=m.collection();G.push(F);var X=_[0],I=m.collection();I.merge(X).merge(X.descendants().intersection(x)),A.push(X),I.forEach(function(V){w.push(V),C.add(V),F.merge(V)});for(var j=function(){X=w.shift();var V=m.collection();X.neighborhood().nodes().forEach(function(J){x.intersection(X.edgesWith(J)).length>0&&V.merge(J)});for(var P=0;P<V.length;P++){var q=V[P];if(M=_.intersection(q.union(q.ancestors())),M!=null&&!C.has(M[0])){var Z=M.union(M.descendants());Z.forEach(function(J){w.push(J),C.add(J),F.merge(J),_.has(J)&&A.push(J)})}}};w.length!=0;)j();if(F.forEach(function(V){x.intersection(V.connectedEdges()).forEach(function(P){F.has(P.source())&&F.has(P.target())&&F.merge(P)})}),A.length==_.length&&(O=!0),!O||O&&L>1){N=A[0],B=N.connectedEdges().length,A.forEach(function(V){V.connectedEdges().length<B&&(B=V.connectedEdges().length,N=V)}),$.push(N.id());var H=m.collection();H.merge(A[0]),A.forEach(function(V){H.merge(V)}),A=[],_=_.difference(H),L++}};do z();while(!O);return E&&$.length>0&&E.set("dummy"+(E.size+1),$),G},y.relocateComponent=function(m,x,_){if(!_.fixedNodeConstraint){var E=Number.POSITIVE_INFINITY,w=Number.NEGATIVE_INFINITY,C=Number.POSITIVE_INFINITY,A=Number.NEGATIVE_INFINITY;if(_.quality=="draft"){var M=!0,N=!1,B=void 0;try{for(var O=x.nodeIndexes[Symbol.iterator](),L;!(M=(L=O.next()).done);M=!0){var $=L.value,G=p($,2),z=G[0],F=G[1],X=_.cy.getElementById(z);if(X){var I=X.boundingBox(),j=x.xCoords[F]-I.w/2,H=x.xCoords[F]+I.w/2,V=x.yCoords[F]-I.h/2,P=x.yCoords[F]+I.h/2;j<E&&(E=j),H>w&&(w=H),V<C&&(C=V),P>A&&(A=P)}}}catch(ue){N=!0,B=ue}finally{try{!M&&O.return&&O.return()}finally{if(N)throw B}}var q=m.x-(w+E)/2,Z=m.y-(A+C)/2;x.xCoords=x.xCoords.map(function(ue){return ue+q}),x.yCoords=x.yCoords.map(function(ue){return ue+Z})}else{Object.keys(x).forEach(function(ue){var be=x[ue],Le=be.getRect().x,xe=be.getRect().x+be.getRect().width,Ae=be.getRect().y,oe=be.getRect().y+be.getRect().height;Le<E&&(E=Le),xe>w&&(w=xe),Ae<C&&(C=Ae),oe>A&&(A=oe)});var J=m.x-(w+E)/2,ae=m.y-(A+C)/2;Object.keys(x).forEach(function(ue){var be=x[ue];be.setCenter(be.getCenterX()+J,be.getCenterY()+ae)})}}},y.calcBoundingBox=function(m,x,_,E){for(var w=Number.MAX_SAFE_INTEGER,C=Number.MIN_SAFE_INTEGER,A=Number.MAX_SAFE_INTEGER,M=Number.MIN_SAFE_INTEGER,N=void 0,B=void 0,O=void 0,L=void 0,$=m.descendants().not(":parent"),G=$.length,z=0;z<G;z++){var F=$[z];N=x[E.get(F.id())]-F.width()/2,B=x[E.get(F.id())]+F.width()/2,O=_[E.get(F.id())]-F.height()/2,L=_[E.get(F.id())]+F.height()/2,w>N&&(w=N),C<B&&(C=B),A>O&&(A=O),M<L&&(M=L)}var X={};return X.topLeftX=w,X.topLeftY=A,X.width=C-w,X.height=M-A,X},y.calcParentsWithoutChildren=function(m,x){var _=m.collection();return x.nodes(":parent").forEach(function(E){var w=!1;E.children().forEach(function(C){C.css("display")!="none"&&(w=!0)}),w||_.merge(E)}),_},u.exports=y},816:(u,h,d)=>{var p=d(548),g=d(140).CoSELayout,y=d(140).CoSENode,m=d(140).layoutBase.PointD,x=d(140).layoutBase.DimensionD,_=d(140).layoutBase.LayoutConstants,E=d(140).layoutBase.FDLayoutConstants,w=d(140).CoSEConstants,C=function(A,M){var N=A.cy,B=A.eles,O=B.nodes(),L=B.edges(),$=void 0,G=void 0,z=void 0,F={};A.randomize&&($=M.nodeIndexes,G=M.xCoords,z=M.yCoords);var X=function(J){return typeof J=="function"},I=function(J,ae){return X(J)?J(ae):J},j=p.calcParentsWithoutChildren(N,B),H=function J(ae,ue,be,Le){for(var xe=ue.length,Ae=0;Ae<xe;Ae++){var oe=ue[Ae],he=null;oe.intersection(j).length==0&&(he=oe.children());var le=void 0,ke=oe.layoutDimensions({nodeDimensionsIncludeLabels:Le.nodeDimensionsIncludeLabels});if(oe.outerWidth()!=null&&oe.outerHeight()!=null)if(Le.randomize)if(!oe.isParent())le=ae.add(new y(be.graphManager,new m(G[$.get(oe.id())]-ke.w/2,z[$.get(oe.id())]-ke.h/2),new x(parseFloat(ke.w),parseFloat(ke.h))));else{var pe=p.calcBoundingBox(oe,G,z,$);oe.intersection(j).length==0?le=ae.add(new y(be.graphManager,new m(pe.topLeftX,pe.topLeftY),new x(pe.width,pe.height))):le=ae.add(new y(be.graphManager,new m(pe.topLeftX,pe.topLeftY),new x(parseFloat(ke.w),parseFloat(ke.h))))}else le=ae.add(new y(be.graphManager,new m(oe.position("x")-ke.w/2,oe.position("y")-ke.h/2),new x(parseFloat(ke.w),parseFloat(ke.h))));else le=ae.add(new y(this.graphManager));if(le.id=oe.data("id"),le.nodeRepulsion=I(Le.nodeRepulsion,oe),le.paddingLeft=parseInt(oe.css("padding")),le.paddingTop=parseInt(oe.css("padding")),le.paddingRight=parseInt(oe.css("padding")),le.paddingBottom=parseInt(oe.css("padding")),Le.nodeDimensionsIncludeLabels&&(le.labelWidth=oe.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).w,le.labelHeight=oe.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).h,le.labelPosVertical=oe.css("text-valign"),le.labelPosHorizontal=oe.css("text-halign")),F[oe.data("id")]=le,isNaN(le.rect.x)&&(le.rect.x=0),isNaN(le.rect.y)&&(le.rect.y=0),he!=null&&he.length>0){var qe=void 0;qe=be.getGraphManager().add(be.newGraph(),le),J(qe,he,be,Le)}}},V=function(J,ae,ue){for(var be=0,Le=0,xe=0;xe<ue.length;xe++){var Ae=ue[xe],oe=F[Ae.data("source")],he=F[Ae.data("target")];if(oe&&he&&oe!==he&&oe.getEdgesBetween(he).length==0){var le=ae.add(J.newEdge(),oe,he);le.id=Ae.id(),le.idealLength=I(A.idealEdgeLength,Ae),le.edgeElasticity=I(A.edgeElasticity,Ae),be+=le.idealLength,Le++}}A.idealEdgeLength!=null&&(Le>0?w.DEFAULT_EDGE_LENGTH=E.DEFAULT_EDGE_LENGTH=be/Le:X(A.idealEdgeLength)?w.DEFAULT_EDGE_LENGTH=E.DEFAULT_EDGE_LENGTH=50:w.DEFAULT_EDGE_LENGTH=E.DEFAULT_EDGE_LENGTH=A.idealEdgeLength,w.MIN_REPULSION_DIST=E.MIN_REPULSION_DIST=E.DEFAULT_EDGE_LENGTH/10,w.DEFAULT_RADIAL_SEPARATION=E.DEFAULT_EDGE_LENGTH)},P=function(J,ae){ae.fixedNodeConstraint&&(J.constraints.fixedNodeConstraint=ae.fixedNodeConstraint),ae.alignmentConstraint&&(J.constraints.alignmentConstraint=ae.alignmentConstraint),ae.relativePlacementConstraint&&(J.constraints.relativePlacementConstraint=ae.relativePlacementConstraint)};A.nestingFactor!=null&&(w.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=E.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=A.nestingFactor),A.gravity!=null&&(w.DEFAULT_GRAVITY_STRENGTH=E.DEFAULT_GRAVITY_STRENGTH=A.gravity),A.numIter!=null&&(w.MAX_ITERATIONS=E.MAX_ITERATIONS=A.numIter),A.gravityRange!=null&&(w.DEFAULT_GRAVITY_RANGE_FACTOR=E.DEFAULT_GRAVITY_RANGE_FACTOR=A.gravityRange),A.gravityCompound!=null&&(w.DEFAULT_COMPOUND_GRAVITY_STRENGTH=E.DEFAULT_COMPOUND_GRAVITY_STRENGTH=A.gravityCompound),A.gravityRangeCompound!=null&&(w.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=E.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=A.gravityRangeCompound),A.initialEnergyOnIncremental!=null&&(w.DEFAULT_COOLING_FACTOR_INCREMENTAL=E.DEFAULT_COOLING_FACTOR_INCREMENTAL=A.initialEnergyOnIncremental),A.tilingCompareBy!=null&&(w.TILING_COMPARE_BY=A.tilingCompareBy),A.quality=="proof"?_.QUALITY=2:_.QUALITY=0,w.NODE_DIMENSIONS_INCLUDE_LABELS=E.NODE_DIMENSIONS_INCLUDE_LABELS=_.NODE_DIMENSIONS_INCLUDE_LABELS=A.nodeDimensionsIncludeLabels,w.DEFAULT_INCREMENTAL=E.DEFAULT_INCREMENTAL=_.DEFAULT_INCREMENTAL=!A.randomize,w.ANIMATE=E.ANIMATE=_.ANIMATE=A.animate,w.TILE=A.tile,w.TILING_PADDING_VERTICAL=typeof A.tilingPaddingVertical=="function"?A.tilingPaddingVertical.call():A.tilingPaddingVertical,w.TILING_PADDING_HORIZONTAL=typeof A.tilingPaddingHorizontal=="function"?A.tilingPaddingHorizontal.call():A.tilingPaddingHorizontal,w.DEFAULT_INCREMENTAL=E.DEFAULT_INCREMENTAL=_.DEFAULT_INCREMENTAL=!0,w.PURE_INCREMENTAL=!A.randomize,_.DEFAULT_UNIFORM_LEAF_NODE_SIZES=A.uniformNodeDimensions,A.step=="transformed"&&(w.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,w.ENFORCE_CONSTRAINTS=!1,w.APPLY_LAYOUT=!1),A.step=="enforced"&&(w.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,w.ENFORCE_CONSTRAINTS=!0,w.APPLY_LAYOUT=!1),A.step=="cose"&&(w.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,w.ENFORCE_CONSTRAINTS=!1,w.APPLY_LAYOUT=!0),A.step=="all"&&(A.randomize?w.TRANSFORM_ON_CONSTRAINT_HANDLING=!0:w.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,w.ENFORCE_CONSTRAINTS=!0,w.APPLY_LAYOUT=!0),A.fixedNodeConstraint||A.alignmentConstraint||A.relativePlacementConstraint?w.TREE_REDUCTION_ON_INCREMENTAL=!1:w.TREE_REDUCTION_ON_INCREMENTAL=!0;var q=new g,Z=q.newGraphManager();return H(Z.addRoot(),p.getTopMostNodes(O),q,A),V(q,Z,L),P(q,A),q.runLayout(),F};u.exports={coseLayout:C}},212:(u,h,d)=>{var p=function(){function M(N,B){for(var O=0;O<B.length;O++){var L=B[O];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(N,L.key,L)}}return function(N,B,O){return B&&M(N.prototype,B),O&&M(N,O),N}}();function g(M,N){if(!(M instanceof N))throw new TypeError("Cannot call a class as a function")}var y=d(658),m=d(548),x=d(657),_=x.spectralLayout,E=d(816),w=E.coseLayout,C=Object.freeze({quality:"default",randomize:!0,animate:!0,animationDuration:1e3,animationEasing:void 0,fit:!0,padding:30,nodeDimensionsIncludeLabels:!1,uniformNodeDimensions:!1,packComponents:!0,step:"all",samplingType:!0,sampleSize:25,nodeSeparation:75,piTol:1e-7,nodeRepulsion:function(M){return 4500},idealEdgeLength:function(M){return 50},edgeElasticity:function(M){return .45},nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,tilingCompareBy:void 0,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.3,fixedNodeConstraint:void 0,alignmentConstraint:void 0,relativePlacementConstraint:void 0,ready:function(){},stop:function(){}}),A=function(){function M(N){g(this,M),this.options=y({},C,N)}return p(M,[{key:"run",value:function(){var N=this,B=this.options,O=B.cy,L=B.eles,$=[],G=void 0,z=void 0,F=[],X=void 0,I=[];B.fixedNodeConstraint&&(!Array.isArray(B.fixedNodeConstraint)||B.fixedNodeConstraint.length==0)&&(B.fixedNodeConstraint=void 0),B.alignmentConstraint&&(B.alignmentConstraint.vertical&&(!Array.isArray(B.alignmentConstraint.vertical)||B.alignmentConstraint.vertical.length==0)&&(B.alignmentConstraint.vertical=void 0),B.alignmentConstraint.horizontal&&(!Array.isArray(B.alignmentConstraint.horizontal)||B.alignmentConstraint.horizontal.length==0)&&(B.alignmentConstraint.horizontal=void 0)),B.relativePlacementConstraint&&(!Array.isArray(B.relativePlacementConstraint)||B.relativePlacementConstraint.length==0)&&(B.relativePlacementConstraint=void 0);var j=B.fixedNodeConstraint||B.alignmentConstraint||B.relativePlacementConstraint;j&&(B.tile=!1,B.packComponents=!1);var H=void 0,V=!1;if(O.layoutUtilities&&B.packComponents&&(H=O.layoutUtilities("get"),H||(H=O.layoutUtilities()),V=!0),L.nodes().length>0)if(V){var P=m.getTopMostNodes(B.eles.nodes());if(X=m.connectComponents(O,B.eles,P),X.forEach(function(wt){var Tt=wt.boundingBox();I.push({x:Tt.x1+Tt.w/2,y:Tt.y1+Tt.h/2})}),B.randomize&&X.forEach(function(wt){B.eles=wt,$.push(_(B))}),B.quality=="default"||B.quality=="proof"){var q=O.collection();if(B.tile){var Z=new Map,J=[],ae=[],ue=0,be={nodeIndexes:Z,xCoords:J,yCoords:ae},Le=[];if(X.forEach(function(wt,Tt){wt.edges().length==0&&(wt.nodes().forEach(function(er,tr){q.merge(wt.nodes()[tr]),er.isParent()||(be.nodeIndexes.set(wt.nodes()[tr].id(),ue++),be.xCoords.push(wt.nodes()[0].position().x),be.yCoords.push(wt.nodes()[0].position().y))}),Le.push(Tt))}),q.length>1){var xe=q.boundingBox();I.push({x:xe.x1+xe.w/2,y:xe.y1+xe.h/2}),X.push(q),$.push(be);for(var Ae=Le.length-1;Ae>=0;Ae--)X.splice(Le[Ae],1),$.splice(Le[Ae],1),I.splice(Le[Ae],1)}}X.forEach(function(wt,Tt){B.eles=wt,F.push(w(B,$[Tt])),m.relocateComponent(I[Tt],F[Tt],B)})}else X.forEach(function(wt,Tt){m.relocateComponent(I[Tt],$[Tt],B)});var oe=new Set;if(X.length>1){var he=[],le=L.filter(function(wt){return wt.css("display")=="none"});X.forEach(function(wt,Tt){var er=void 0;if(B.quality=="draft"&&(er=$[Tt].nodeIndexes),wt.nodes().not(le).length>0){var tr={};tr.edges=[],tr.nodes=[];var kr=void 0;wt.nodes().not(le).forEach(function(fr){if(B.quality=="draft")if(!fr.isParent())kr=er.get(fr.id()),tr.nodes.push({x:$[Tt].xCoords[kr]-fr.boundingbox().w/2,y:$[Tt].yCoords[kr]-fr.boundingbox().h/2,width:fr.boundingbox().w,height:fr.boundingbox().h});else{var Mt=m.calcBoundingBox(fr,$[Tt].xCoords,$[Tt].yCoords,er);tr.nodes.push({x:Mt.topLeftX,y:Mt.topLeftY,width:Mt.width,height:Mt.height})}else F[Tt][fr.id()]&&tr.nodes.push({x:F[Tt][fr.id()].getLeft(),y:F[Tt][fr.id()].getTop(),width:F[Tt][fr.id()].getWidth(),height:F[Tt][fr.id()].getHeight()})}),wt.edges().forEach(function(fr){var Mt=fr.source(),Kt=fr.target();if(Mt.css("display")!="none"&&Kt.css("display")!="none")if(B.quality=="draft"){var ne=er.get(Mt.id()),He=er.get(Kt.id()),Te=[],Qe=[];if(Mt.isParent()){var ce=m.calcBoundingBox(Mt,$[Tt].xCoords,$[Tt].yCoords,er);Te.push(ce.topLeftX+ce.width/2),Te.push(ce.topLeftY+ce.height/2)}else Te.push($[Tt].xCoords[ne]),Te.push($[Tt].yCoords[ne]);if(Kt.isParent()){var Ut=m.calcBoundingBox(Kt,$[Tt].xCoords,$[Tt].yCoords,er);Qe.push(Ut.topLeftX+Ut.width/2),Qe.push(Ut.topLeftY+Ut.height/2)}else Qe.push($[Tt].xCoords[He]),Qe.push($[Tt].yCoords[He]);tr.edges.push({startX:Te[0],startY:Te[1],endX:Qe[0],endY:Qe[1]})}else F[Tt][Mt.id()]&&F[Tt][Kt.id()]&&tr.edges.push({startX:F[Tt][Mt.id()].getCenterX(),startY:F[Tt][Mt.id()].getCenterY(),endX:F[Tt][Kt.id()].getCenterX(),endY:F[Tt][Kt.id()].getCenterY()})}),tr.nodes.length>0&&(he.push(tr),oe.add(Tt))}});var ke=H.packComponents(he,B.randomize).shifts;if(B.quality=="draft")$.forEach(function(wt,Tt){var er=wt.xCoords.map(function(kr){return kr+ke[Tt].dx}),tr=wt.yCoords.map(function(kr){return kr+ke[Tt].dy});wt.xCoords=er,wt.yCoords=tr});else{var pe=0;oe.forEach(function(wt){Object.keys(F[wt]).forEach(function(Tt){var er=F[wt][Tt];er.setCenter(er.getCenterX()+ke[pe].dx,er.getCenterY()+ke[pe].dy)}),pe++})}}}else{var qe=B.eles.boundingBox();if(I.push({x:qe.x1+qe.w/2,y:qe.y1+qe.h/2}),B.randomize){var me=_(B);$.push(me)}B.quality=="default"||B.quality=="proof"?(F.push(w(B,$[0])),m.relocateComponent(I[0],F[0],B)):m.relocateComponent(I[0],$[0],B)}var st=function(wt,Tt){if(B.quality=="default"||B.quality=="proof"){typeof wt=="number"&&(wt=Tt);var er=void 0,tr=void 0,kr=wt.data("id");return F.forEach(function(Mt){kr in Mt&&(er={x:Mt[kr].getRect().getCenterX(),y:Mt[kr].getRect().getCenterY()},tr=Mt[kr])}),B.nodeDimensionsIncludeLabels&&(tr.labelWidth&&(tr.labelPosHorizontal=="left"?er.x+=tr.labelWidth/2:tr.labelPosHorizontal=="right"&&(er.x-=tr.labelWidth/2)),tr.labelHeight&&(tr.labelPosVertical=="top"?er.y+=tr.labelHeight/2:tr.labelPosVertical=="bottom"&&(er.y-=tr.labelHeight/2))),er==null&&(er={x:wt.position("x"),y:wt.position("y")}),{x:er.x,y:er.y}}else{var fr=void 0;return $.forEach(function(Mt){var Kt=Mt.nodeIndexes.get(wt.id());Kt!=null&&(fr={x:Mt.xCoords[Kt],y:Mt.yCoords[Kt]})}),fr==null&&(fr={x:wt.position("x"),y:wt.position("y")}),{x:fr.x,y:fr.y}}};if(B.quality=="default"||B.quality=="proof"||B.randomize){var we=m.calcParentsWithoutChildren(O,L),Et=L.filter(function(wt){return wt.css("display")=="none"});B.eles=L.not(Et),L.nodes().not(":parent").not(Et).layoutPositions(N,B,st),we.length>0&&we.forEach(function(wt){wt.position(st(wt))})}else console.log("If randomize option is set to false, then quality option must be 'default' or 'proof'.")}}]),M}();u.exports=A},657:(u,h,d)=>{var p=d(548),g=d(140).layoutBase.Matrix,y=d(140).layoutBase.SVD,m=function(x){var _=x.cy,E=x.eles,w=E.nodes(),C=E.nodes(":parent"),A=new Map,M=new Map,N=new Map,B=[],O=[],L=[],$=[],G=[],z=[],F=[],X=[],I=void 0,j=void 0,H=1e8,V=1e-9,P=x.piTol,q=x.samplingType,Z=x.nodeSeparation,J=void 0,ae=function(){for(var fe=0,ze=0,yt=!1;ze<J;){fe=Math.floor(Math.random()*j),yt=!1;for(var bt=0;bt<ze;bt++)if($[bt]==fe){yt=!0;break}if(!yt)$[ze]=fe,ze++;else continue}},ue=function(fe,ze,yt){for(var bt=[],At=0,ct=0,zt=0,ft=void 0,Pr=[],Mi=0,Di=1,ri=0;ri<j;ri++)Pr[ri]=H;for(bt[ct]=fe,Pr[fe]=0;ct>=At;){zt=bt[At++];for(var Gi=B[zt],Br=0;Br<Gi.length;Br++)ft=M.get(Gi[Br]),Pr[ft]==H&&(Pr[ft]=Pr[zt]+1,bt[++ct]=ft);z[zt][ze]=Pr[zt]*Z}if(yt){for(var sr=0;sr<j;sr++)z[sr][ze]<G[sr]&&(G[sr]=z[sr][ze]);for(var hr=0;hr<j;hr++)G[hr]>Mi&&(Mi=G[hr],Di=hr)}return Di},be=function(fe){var ze=void 0;if(fe){ze=Math.floor(Math.random()*j),I=ze;for(var yt=0;yt<j;yt++)G[yt]=H;for(var bt=0;bt<J;bt++)$[bt]=ze,ze=ue(ze,bt,fe)}else{ae();for(var At=0;At<J;At++)ue($[At],At,fe,!1)}for(var ct=0;ct<j;ct++)for(var zt=0;zt<J;zt++)z[ct][zt]*=z[ct][zt];for(var ft=0;ft<J;ft++)F[ft]=[];for(var Pr=0;Pr<J;Pr++)for(var Mi=0;Mi<J;Mi++)F[Pr][Mi]=z[$[Mi]][Pr]},Le=function(){for(var fe=y.svd(F),ze=fe.S,yt=fe.U,bt=fe.V,At=ze[0]*ze[0]*ze[0],ct=[],zt=0;zt<J;zt++){ct[zt]=[];for(var ft=0;ft<J;ft++)ct[zt][ft]=0,zt==ft&&(ct[zt][ft]=ze[zt]/(ze[zt]*ze[zt]+At/(ze[zt]*ze[zt])))}X=g.multMat(g.multMat(bt,ct),g.transpose(yt))},xe=function(){for(var fe=void 0,ze=void 0,yt=[],bt=[],At=[],ct=[],zt=0;zt<j;zt++)yt[zt]=Math.random(),bt[zt]=Math.random();yt=g.normalize(yt),bt=g.normalize(bt);for(var ft=0,Pr=V,Mi=V,Di=void 0;;){ft++;for(var ri=0;ri<j;ri++)At[ri]=yt[ri];if(yt=g.multGamma(g.multL(g.multGamma(At),z,X)),fe=g.dotProduct(At,yt),yt=g.normalize(yt),Pr=g.dotProduct(At,yt),Di=Math.abs(Pr/Mi),Di<=1+P&&Di>=1)break;Mi=Pr}for(var Gi=0;Gi<j;Gi++)At[Gi]=yt[Gi];for(ft=0,Mi=V;;){ft++;for(var Br=0;Br<j;Br++)ct[Br]=bt[Br];if(ct=g.minusOp(ct,g.multCons(At,g.dotProduct(At,ct))),bt=g.multGamma(g.multL(g.multGamma(ct),z,X)),ze=g.dotProduct(ct,bt),bt=g.normalize(bt),Pr=g.dotProduct(ct,bt),Di=Math.abs(Pr/Mi),Di<=1+P&&Di>=1)break;Mi=Pr}for(var sr=0;sr<j;sr++)ct[sr]=bt[sr];O=g.multCons(At,Math.sqrt(Math.abs(fe))),L=g.multCons(ct,Math.sqrt(Math.abs(ze)))};p.connectComponents(_,E,p.getTopMostNodes(w),A),C.forEach(function(fe){p.connectComponents(_,E,p.getTopMostNodes(fe.descendants().intersection(E)),A)});for(var Ae=0,oe=0;oe<w.length;oe++)w[oe].isParent()||M.set(w[oe].id(),Ae++);var he=!0,le=!1,ke=void 0;try{for(var pe=A.keys()[Symbol.iterator](),qe;!(he=(qe=pe.next()).done);he=!0){var me=qe.value;M.set(me,Ae++)}}catch(fe){le=!0,ke=fe}finally{try{!he&&pe.return&&pe.return()}finally{if(le)throw ke}}for(var st=0;st<M.size;st++)B[st]=[];C.forEach(function(fe){for(var ze=fe.children().intersection(E);ze.nodes(":childless").length==0;)ze=ze.nodes()[0].children().intersection(E);var yt=0,bt=ze.nodes(":childless")[0].connectedEdges().length;ze.nodes(":childless").forEach(function(At,ct){At.connectedEdges().length<bt&&(bt=At.connectedEdges().length,yt=ct)}),N.set(fe.id(),ze.nodes(":childless")[yt].id())}),w.forEach(function(fe){var ze=void 0;fe.isParent()?ze=M.get(N.get(fe.id())):ze=M.get(fe.id()),fe.neighborhood().nodes().forEach(function(yt){E.intersection(fe.edgesWith(yt)).length>0&&(yt.isParent()?B[ze].push(N.get(yt.id())):B[ze].push(yt.id()))})});var we=function(fe){var ze=M.get(fe),yt=void 0;A.get(fe).forEach(function(bt){_.getElementById(bt).isParent()?yt=N.get(bt):yt=bt,B[ze].push(yt),B[M.get(yt)].push(fe)})},Et=!0,wt=!1,Tt=void 0;try{for(var er=A.keys()[Symbol.iterator](),tr;!(Et=(tr=er.next()).done);Et=!0){var kr=tr.value;we(kr)}}catch(fe){wt=!0,Tt=fe}finally{try{!Et&&er.return&&er.return()}finally{if(wt)throw Tt}}j=M.size;var fr=void 0;if(j>2){J=j<x.sampleSize?j:x.sampleSize;for(var Mt=0;Mt<j;Mt++)z[Mt]=[];for(var Kt=0;Kt<J;Kt++)X[Kt]=[];return x.quality=="draft"||x.step=="all"?(be(q),Le(),xe(),fr={nodeIndexes:M,xCoords:O,yCoords:L}):(M.forEach(function(fe,ze){O.push(_.getElementById(ze).position("x")),L.push(_.getElementById(ze).position("y"))}),fr={nodeIndexes:M,xCoords:O,yCoords:L}),fr}else{var ne=M.keys(),He=_.getElementById(ne.next().value),Te=He.position(),Qe=He.outerWidth();if(O.push(Te.x),L.push(Te.y),j==2){var ce=_.getElementById(ne.next().value),Ut=ce.outerWidth();O.push(Te.x+Qe/2+Ut/2+x.idealEdgeLength),L.push(Te.y)}return fr={nodeIndexes:M,xCoords:O,yCoords:L},fr}};u.exports={spectralLayout:m}},579:(u,h,d)=>{var p=d(212),g=function(y){y&&y("layout","fcose",p)};typeof cytoscape<"u"&&g(cytoscape),u.exports=g},140:u=>{u.exports=r}},n={};function a(u){var h=n[u];if(h!==void 0)return h.exports;var d=n[u]={exports:{}};return i[u](d,d.exports,a),d.exports}var s=a(579);return s})()})}),MDe={};oi(MDe,{diagram:()=>mIe});function cl(e){let t=at().architecture;return t?.[e]?t[e]:ete[e]}function LDe(e,t){e.forEach(r=>{t.add({group:"nodes",data:{type:"service",id:r.id,icon:r.icon,label:r.title,parent:r.in,width:cl("iconSize"),height:cl("iconSize")},classes:"node-service"})})}function RDe(e,t){e.forEach(r=>{t.add({group:"nodes",data:{type:"junction",id:r.id,parent:r.in,width:cl("iconSize"),height:cl("iconSize")},classes:"node-junction"})})}function DDe(e,t){t.nodes().map(r=>{let i=Mx(r);i.type!=="group"&&(i.x=r.position().x,i.y=r.position().y,e.getElementById(i.id).attr("transform","translate("+(i.x||0)+","+(i.y||0)+")"))})}function IDe(e,t){e.forEach(r=>{t.add({group:"nodes",data:{type:"group",id:r.id,icon:r.icon,label:r.title,parent:r.in},classes:"node-group"})})}function NDe(e,t){e.forEach(r=>{let{lhsId:i,rhsId:n,lhsInto:a,lhsGroup:s,rhsInto:u,lhsDir:h,rhsDir:d,rhsGroup:p,title:g}=r,y=Qee(r.lhsDir,r.rhsDir)?"segments":"straight",m={id:`${i}-${n}`,label:g,source:i,sourceDir:h,sourceArrow:a,sourceGroup:s,sourceEndpoint:h==="L"?"0 50%":h==="R"?"100% 50%":h==="T"?"50% 0":"50% 100%",target:n,targetDir:d,targetArrow:u,targetGroup:p,targetEndpoint:d==="L"?"0 50%":d==="R"?"100% 50%":d==="T"?"50% 0":"50% 100%"};t.add({group:"edges",data:m,classes:y})})}function ODe(e){let t=e.map(n=>{let a={},s={};return Object.entries(n).forEach(([u,[h,d]])=>{a[d]||(a[d]=[]),s[h]||(s[h]=[]),a[d].push(u),s[h].push(u)}),{horiz:Object.values(a).filter(u=>u.length>1),vert:Object.values(s).filter(u=>u.length>1)}}),[r,i]=t.reduce(([n,a],{horiz:s,vert:u})=>[[...n,...s],[...a,...u]],[[],[]]);return{horizontal:r,vertical:i}}function BDe(e){let t=[],r=k(n=>`${n[0]},${n[1]}`,"posToStr"),i=k(n=>n.split(",").map(a=>parseInt(a)),"strToPos");return e.forEach(n=>{let a=Object.fromEntries(Object.entries(n).map(([d,p])=>[r(p),d])),s=[r([0,0])],u={},h={L:[-1,0],R:[1,0],T:[0,1],B:[0,-1]};for(;s.length>0;){let d=s.shift();if(d){u[d]=1;let p=a[d];if(p){let g=i(d);Object.entries(h).forEach(([y,m])=>{let x=r([g[0]+m[0],g[1]+m[1]]),_=a[x];_&&!u[x]&&(s.push(x),t.push({[Xee[y]]:_,[Xee[$De(y)]]:p,gap:1.5*cl("iconSize")}))})}}}}),t}function PDe(e,t,r,i,{spatialMaps:n}){return new Promise(a=>{let s=Nr("body").append("div").attr("id","cy").attr("style","display:none"),u=Qd({container:document.getElementById("cy"),style:[{selector:"edge",style:{"curve-style":"straight",label:"data(label)","source-endpoint":"data(sourceEndpoint)","target-endpoint":"data(targetEndpoint)"}},{selector:"edge.segments",style:{"curve-style":"segments","segment-weights":"0","segment-distances":[.5],"edge-distances":"endpoints","source-endpoint":"data(sourceEndpoint)","target-endpoint":"data(targetEndpoint)"}},{selector:"node",style:{"compound-sizing-wrt-labels":"include"}},{selector:"node[label]",style:{"text-valign":"bottom","text-halign":"center","font-size":`${cl("fontSize")}px`}},{selector:".node-service",style:{label:"data(label)",width:"data(width)",height:"data(height)"}},{selector:".node-junction",style:{width:"data(width)",height:"data(height)"}},{selector:".node-group",style:{padding:`${cl("padding")}px`}}]});s.remove(),IDe(r,u),LDe(e,u),RDe(t,u),NDe(i,u);let h=ODe(n),d=BDe(n),p=u.layout({name:"fcose",quality:"proof",styleEnabled:!1,animate:!1,nodeDimensionsIncludeLabels:!1,idealEdgeLength(g){let[y,m]=g.connectedNodes(),{parent:x}=Mx(y),{parent:_}=Mx(m);return x===_?1.5*cl("iconSize"):.5*cl("iconSize")},edgeElasticity(g){let[y,m]=g.connectedNodes(),{parent:x}=Mx(y),{parent:_}=Mx(m);return x===_?.45:.001},alignmentConstraint:h,relativePlacementConstraint:d});p.one("layoutstop",()=>{function g(y,m,x,_){let E,w,{x:C,y:A}=y,{x:M,y:N}=m;w=(_-A+(C-x)*(A-N)/(C-M))/Math.sqrt(1+Math.pow((A-N)/(C-M),2)),E=Math.sqrt(Math.pow(_-A,2)+Math.pow(x-C,2)-Math.pow(w,2));let B=Math.sqrt(Math.pow(M-C,2)+Math.pow(N-A,2));E=E/B;let O=(M-C)*(_-A)-(N-A)*(x-C);switch(!0){case O>=0:O=1;break;case O<0:O=-1;break}let L=(M-C)*(x-C)+(N-A)*(_-A);switch(!0){case L>=0:L=1;break;case L<0:L=-1;break}return w=Math.abs(w)*O,E=E*L,{distances:w,weights:E}}k(g,"getSegmentWeights"),u.startBatch();for(let y of Object.values(u.edges()))if(y.data?.()){let{x:m,y:x}=y.source().position(),{x:_,y:E}=y.target().position();if(m!==_&&x!==E){let w=y.sourceEndpoint(),C=y.targetEndpoint(),{sourceDir:A}=Jee(y),[M,N]=sg(A)?[w.x,C.y]:[C.x,w.y],{weights:B,distances:O}=g(w,C,M,N);y.style("segment-distances",O),y.style("segment-weights",B)}}u.endBatch(),p.run()}),p.run(),u.ready(g=>{Ce.info("Ready",g),a(u)})})}var FDe,Xee,Kee,U8,$De,Zee,Zu,sg,Qee,zDe,GDe,WP,UDe,jDe,HDe,VDe,Jee,Mx,ete,ia,WDe,YDe,qDe,XDe,KDe,ZDe,QDe,JDe,eIe,tIe,rIe,iIe,nIe,aIe,j8,sIe,oIe,lIe,uIe,Lx,yw,hIe,cIe,dIe,pIe,fIe,gIe,mIe,eQe=D(()=>{Oh(),ch(),BI(),yW(),Os(),gm(),Qn(),mS(),j9e(),FDe=Ke(JZe(),1),ha(),Xee={L:"left",R:"right",T:"top",B:"bottom"},Kee={L:k(e=>`${e},${e/2} 0,${e} 0,0`,"L"),R:k(e=>`0,${e/2} ${e},0 ${e},${e}`,"R"),T:k(e=>`0,0 ${e},0 ${e/2},${e}`,"T"),B:k(e=>`${e/2},0 ${e},${e} 0,${e}`,"B")},U8={L:k((e,t)=>e-t+2,"L"),R:k((e,t)=>e-2,"R"),T:k((e,t)=>e-t+2,"T"),B:k((e,t)=>e-2,"B")},$De=k(function(e){return Zu(e)?e==="L"?"R":"L":e==="T"?"B":"T"},"getOppositeArchitectureDirection"),Zee=k(function(e){let t=e;return t==="L"||t==="R"||t==="T"||t==="B"},"isArchitectureDirection"),Zu=k(function(e){let t=e;return t==="L"||t==="R"},"isArchitectureDirectionX"),sg=k(function(e){let t=e;return t==="T"||t==="B"},"isArchitectureDirectionY"),Qee=k(function(e,t){let r=Zu(e)&&sg(t),i=sg(e)&&Zu(t);return r||i},"isArchitectureDirectionXY"),zDe=k(function(e){let t=e[0],r=e[1],i=Zu(t)&&sg(r),n=sg(t)&&Zu(r);return i||n},"isArchitecturePairXY"),GDe=k(function(e){return e!=="LL"&&e!=="RR"&&e!=="TT"&&e!=="BB"},"isValidArchitectureDirectionPair"),WP=k(function(e,t){let r=`${e}${t}`;return GDe(r)?r:void 0},"getArchitectureDirectionPair"),UDe=k(function([e,t],r){let i=r[0],n=r[1];return Zu(i)?sg(n)?[e+(i==="L"?-1:1),t+(n==="T"?1:-1)]:[e+(i==="L"?-1:1),t]:Zu(n)?[e+(n==="L"?1:-1),t+(i==="T"?1:-1)]:[e,t+(i==="T"?1:-1)]},"shiftPositionByArchitectureDirectionPair"),jDe=k(function(e){return e==="LT"||e==="TL"?[1,1]:e==="BL"||e==="LB"?[1,-1]:e==="BR"||e==="RB"?[-1,-1]:[-1,1]},"getArchitectureDirectionXYFactors"),HDe=k(function(e){return e.type==="service"},"isArchitectureService"),VDe=k(function(e){return e.type==="junction"},"isArchitectureJunction"),Jee=k(e=>e.data(),"edgeData"),Mx=k(e=>e.data(),"nodeData"),ete=ka.architecture,ia=new PI(()=>({nodes:{},groups:{},edges:[],registeredIds:{},config:ete,dataStructures:void 0,elements:{}})),WDe=k(()=>{ia.reset(),ho()},"clear"),YDe=k(function({id:e,icon:t,in:r,title:i,iconText:n}){if(ia.records.registeredIds[e]!==void 0)throw new Error(`The service id [${e}] is already in use by another ${ia.records.registeredIds[e]}`);if(r!==void 0){if(e===r)throw new Error(`The service [${e}] cannot be placed within itself`);if(ia.records.registeredIds[r]===void 0)throw new Error(`The service [${e}]'s parent does not exist. Please make sure the parent is created before this service`);if(ia.records.registeredIds[r]==="node")throw new Error(`The service [${e}]'s parent is not a group`)}ia.records.registeredIds[e]="node",ia.records.nodes[e]={id:e,type:"service",icon:t,iconText:n,title:i,edges:[],in:r}},"addService"),qDe=k(()=>Object.values(ia.records.nodes).filter(HDe),"getServices"),XDe=k(function({id:e,in:t}){ia.records.registeredIds[e]="node",ia.records.nodes[e]={id:e,type:"junction",edges:[],in:t}},"addJunction"),KDe=k(()=>Object.values(ia.records.nodes).filter(VDe),"getJunctions"),ZDe=k(()=>Object.values(ia.records.nodes),"getNodes"),QDe=k(e=>ia.records.nodes[e],"getNode"),JDe=k(function({id:e,icon:t,in:r,title:i}){if(ia.records.registeredIds[e]!==void 0)throw new Error(`The group id [${e}] is already in use by another ${ia.records.registeredIds[e]}`);if(r!==void 0){if(e===r)throw new Error(`The group [${e}] cannot be placed within itself`);if(ia.records.registeredIds[r]===void 0)throw new Error(`The group [${e}]'s parent does not exist. Please make sure the parent is created before this group`);if(ia.records.registeredIds[r]==="node")throw new Error(`The group [${e}]'s parent is not a group`)}ia.records.registeredIds[e]="group",ia.records.groups[e]={id:e,icon:t,title:i,in:r}},"addGroup"),eIe=k(()=>Object.values(ia.records.groups),"getGroups"),tIe=k(function({lhsId:e,rhsId:t,lhsDir:r,rhsDir:i,lhsInto:n,rhsInto:a,lhsGroup:s,rhsGroup:u,title:h}){if(!Zee(r))throw new Error(`Invalid direction given for left hand side of edge ${e}--${t}. Expected (L,R,T,B) got ${r}`);if(!Zee(i))throw new Error(`Invalid direction given for right hand side of edge ${e}--${t}. Expected (L,R,T,B) got ${i}`);if(ia.records.nodes[e]===void 0&&ia.records.groups[e]===void 0)throw new Error(`The left-hand id [${e}] does not yet exist. Please create the service/group before declaring an edge to it.`);if(ia.records.nodes[t]===void 0&&ia.records.groups[e]===void 0)throw new Error(`The right-hand id [${t}] does not yet exist. Please create the service/group before declaring an edge to it.`);let d=ia.records.nodes[e].in,p=ia.records.nodes[t].in;if(s&&d&&p&&d==p)throw new Error(`The left-hand id [${e}] is modified to traverse the group boundary, but the edge does not pass through two groups.`);if(u&&d&&p&&d==p)throw new Error(`The right-hand id [${t}] is modified to traverse the group boundary, but the edge does not pass through two groups.`);let g={lhsId:e,lhsDir:r,lhsInto:n,lhsGroup:s,rhsId:t,rhsDir:i,rhsInto:a,rhsGroup:u,title:h};ia.records.edges.push(g),ia.records.nodes[e]&&ia.records.nodes[t]&&(ia.records.nodes[e].edges.push(ia.records.edges[ia.records.edges.length-1]),ia.records.nodes[t].edges.push(ia.records.edges[ia.records.edges.length-1]))},"addEdge"),rIe=k(()=>ia.records.edges,"getEdges"),iIe=k(()=>{if(ia.records.dataStructures===void 0){let e=Object.entries(ia.records.nodes).reduce((s,[u,h])=>(s[u]=h.edges.reduce((d,p)=>{if(p.lhsId===u){let g=WP(p.lhsDir,p.rhsDir);g&&(d[g]=p.rhsId)}else{let g=WP(p.rhsDir,p.lhsDir);g&&(d[g]=p.lhsId)}return d},{}),s),{}),t=Object.keys(e)[0],r={[t]:1},i=Object.keys(e).reduce((s,u)=>u===t?s:{...s,[u]:1},{}),n=k(s=>{let u={[s]:[0,0]},h=[s];for(;h.length>0;){let d=h.shift();if(d){r[d]=1,delete i[d];let p=e[d],[g,y]=u[d];Object.entries(p).forEach(([m,x])=>{r[x]||(u[x]=UDe([g,y],m),h.push(x))})}}return u},"BFS"),a=[n(t)];for(;Object.keys(i).length>0;)a.push(n(Object.keys(i)[0]));ia.records.dataStructures={adjList:e,spatialMaps:a}}return ia.records.dataStructures},"getDataStructures"),nIe=k((e,t)=>{ia.records.elements[e]=t},"setElementForId"),aIe=k(e=>ia.records.elements[e],"getElementById"),j8={clear:WDe,setDiagramTitle:Fo,getDiagramTitle:$o,setAccTitle:Ks,getAccTitle:Bo,setAccDescription:_o,getAccDescription:Po,addService:YDe,getServices:qDe,addJunction:XDe,getJunctions:KDe,getNodes:ZDe,getNode:QDe,addGroup:JDe,getGroups:eIe,addEdge:tIe,getEdges:rIe,setElementForId:nIe,getElementById:aIe,getDataStructures:iIe},k(cl,"getConfigField"),sIe=k((e,t)=>{b7(e,t),e.groups.map(t.addGroup),e.services.map(r=>t.addService({...r,type:"service"})),e.junctions.map(r=>t.addJunction({...r,type:"junction"})),e.edges.map(t.addEdge)},"populateDb"),oIe={parse:k(async e=>{let t=await d5("architecture",e);Ce.debug(t),sIe(t,j8)},"parse")},lIe=k(e=>`
  .edge {
    stroke-width: ${e.archEdgeWidth};
    stroke: ${e.archEdgeColor};
    fill: none;
  }

  .arrow {
    fill: ${e.archEdgeArrowColor};
  }

  .node-bkg {
    fill: none;
    stroke: ${e.archGroupBorderColor};
    stroke-width: ${e.archGroupBorderWidth};
    stroke-dasharray: 8;
  }
  .node-icon-text {
    display: flex; 
    align-items: center;
  }
  
  .node-icon-text > div {
    color: #fff;
    margin: 1px;
    height: fit-content;
    text-align: center;
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
  }
`,"getStyles"),uIe=lIe,Lx=k(e=>`<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/>${e}</g>`,"wrapIcon"),yw={prefix:"mermaid-architecture",height:80,width:80,icons:{database:{body:Lx('<path id="b" data-name="4" d="m20,57.86c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path id="c" data-name="3" d="m20,45.95c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path id="d" data-name="2" d="m20,34.05c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse id="e" data-name="1" cx="40" cy="22.14" rx="20" ry="7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="20" y1="57.86" x2="20" y2="22.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="60" y1="57.86" x2="60" y2="22.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},server:{body:Lx('<rect x="17.5" y="17.5" width="45" height="45" rx="2" ry="2" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="32.5" x2="62.5" y2="32.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="47.5" x2="62.5" y2="47.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><g><path d="m56.25,25c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,25c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><path d="m56.25,40c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,40c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><path d="m56.25,55c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,55c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g>')},disk:{body:Lx('<rect x="20" y="15" width="40" height="50" rx="1" ry="1" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="24" cy="19.17" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="56" cy="19.17" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="24" cy="60.83" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="56" cy="60.83" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="40" cy="33.75" rx="14" ry="14.58" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="40" cy="33.75" rx="4" ry="4.17" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m37.51,42.52l-4.83,13.22c-.26.71-1.1,1.02-1.76.64l-4.18-2.42c-.66-.38-.81-1.26-.33-1.84l9.01-10.8c.88-1.05,2.56-.08,2.09,1.2Z" style="fill: #fff; stroke-width: 0px;"/>')},internet:{body:Lx('<circle cx="40" cy="40" r="22.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="40" y1="17.5" x2="40" y2="62.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="40" x2="62.5" y2="40" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m39.99,17.51c-15.28,11.1-15.28,33.88,0,44.98" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m40.01,17.51c15.28,11.1,15.28,33.88,0,44.98" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="19.75" y1="30.1" x2="60.25" y2="30.1" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="19.75" y1="49.9" x2="60.25" y2="49.9" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},cloud:{body:Lx('<path d="m65,47.5c0,2.76-2.24,5-5,5H20c-2.76,0-5-2.24-5-5,0-1.87,1.03-3.51,2.56-4.36-.04-.21-.06-.42-.06-.64,0-2.6,2.48-4.74,5.65-4.97,1.65-4.51,6.34-7.76,11.85-7.76.86,0,1.69.08,2.5.23,2.09-1.57,4.69-2.5,7.5-2.5,6.1,0,11.19,4.38,12.28,10.17,2.14.56,3.72,2.51,3.72,4.83,0,.03,0,.07-.01.1,2.29.46,4.01,2.48,4.01,4.9Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},unknown:D4,blank:{body:Lx("")}}},hIe=k(async function(e,t){let r=cl("padding"),i=cl("iconSize"),n=i/2,a=i/6,s=a/2;await Promise.all(t.edges().map(async u=>{let{source:h,sourceDir:d,sourceArrow:p,sourceGroup:g,target:y,targetDir:m,targetArrow:x,targetGroup:_,label:E}=Jee(u),{x:w,y:C}=u[0].sourceEndpoint(),{x:A,y:M}=u[0].midpoint(),{x:N,y:B}=u[0].targetEndpoint(),O=r+4;if(g&&(Zu(d)?w+=d==="L"?-O:O:C+=d==="T"?-O:O+18),_&&(Zu(m)?N+=m==="L"?-O:O:B+=m==="T"?-O:O+18),!g&&j8.getNode(h)?.type==="junction"&&(Zu(d)?w+=d==="L"?n:-n:C+=d==="T"?n:-n),!_&&j8.getNode(y)?.type==="junction"&&(Zu(m)?N+=m==="L"?n:-n:B+=m==="T"?n:-n),u[0]._private.rscratch){let L=e.insert("g");if(L.insert("path").attr("d",`M ${w},${C} L ${A},${M} L${N},${B} `).attr("class","edge"),p){let $=Zu(d)?U8[d](w,a):w-s,G=sg(d)?U8[d](C,a):C-s;L.insert("polygon").attr("points",Kee[d](a)).attr("transform",`translate(${$},${G})`).attr("class","arrow")}if(x){let $=Zu(m)?U8[m](N,a):N-s,G=sg(m)?U8[m](B,a):B-s;L.insert("polygon").attr("points",Kee[m](a)).attr("transform",`translate(${$},${G})`).attr("class","arrow")}if(E){let $=Qee(d,m)?"XY":Zu(d)?"X":"Y",G=0;$==="X"?G=Math.abs(w-N):$==="Y"?G=Math.abs(C-B)/1.5:G=Math.abs(w-N)/2;let z=L.append("g");if(await Kh(z,E,{useHtmlLabels:!1,width:G,classes:"architecture-service-label"},at()),z.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle"),$==="X")z.attr("transform","translate("+A+", "+M+")");else if($==="Y")z.attr("transform","translate("+A+", "+M+") rotate(-90)");else if($==="XY"){let F=WP(d,m);if(F&&zDe(F)){let X=z.node().getBoundingClientRect(),[I,j]=jDe(F);z.attr("dominant-baseline","auto").attr("transform",`rotate(${-1*I*j*45})`);let H=z.node().getBoundingClientRect();z.attr("transform",`
                translate(${A}, ${M-X.height/2})
                translate(${I*H.width/2}, ${j*H.height/2})
                rotate(${-1*I*j*45}, 0, ${X.height/2})
              `)}}}}}))},"drawEdges"),cIe=k(async function(e,t){let r=cl("padding")*.75,i=cl("fontSize"),n=cl("iconSize")/2;await Promise.all(t.nodes().map(async a=>{let s=Mx(a);if(s.type==="group"){let{h:u,w:h,x1:d,y1:p}=a.boundingBox();e.append("rect").attr("x",d+n).attr("y",p+n).attr("width",h).attr("height",u).attr("class","node-bkg");let g=e.append("g"),y=d,m=p;if(s.icon){let x=g.append("g");x.html(`<g>${await x0(s.icon,{height:r,width:r,fallbackPrefix:yw.prefix})}</g>`),x.attr("transform","translate("+(y+n+1)+", "+(m+n+1)+")"),y+=r,m+=i/2-1-2}if(s.label){let x=g.append("g");await Kh(x,s.label,{useHtmlLabels:!1,width:h,classes:"architecture-service-label"},at()),x.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","start").attr("text-anchor","start"),x.attr("transform","translate("+(y+n+4)+", "+(m+n+2)+")")}}}))},"drawGroups"),dIe=k(async function(e,t,r){for(let i of r){let n=t.append("g"),a=cl("iconSize");if(i.title){let d=n.append("g");await Kh(d,i.title,{useHtmlLabels:!1,width:a*1.5,classes:"architecture-service-label"},at()),d.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle"),d.attr("transform","translate("+a/2+", "+a+")")}let s=n.append("g");if(i.icon)s.html(`<g>${await x0(i.icon,{height:a,width:a,fallbackPrefix:yw.prefix})}</g>`);else if(i.iconText){s.html(`<g>${await x0("blank",{height:a,width:a,fallbackPrefix:yw.prefix})}</g>`);let d=s.append("g").append("foreignObject").attr("width",a).attr("height",a).append("div").attr("class","node-icon-text").attr("style",`height: ${a}px;`).append("div").html(i.iconText),p=parseInt(window.getComputedStyle(d.node(),null).getPropertyValue("font-size").replace(/\D/g,""))??16;d.attr("style",`-webkit-line-clamp: ${Math.floor((a-2)/p)};`)}else s.append("path").attr("class","node-bkg").attr("id","node-"+i.id).attr("d",`M0 ${a} v${-a} q0,-5 5,-5 h${a} q5,0 5,5 v${a} H0 Z`);n.attr("class","architecture-service");let{width:u,height:h}=n._groups[0][0].getBBox();i.width=u,i.height=h,e.setElementForId(i.id,n)}return 0},"drawServices"),pIe=k(function(e,t,r){r.forEach(i=>{let n=t.append("g"),a=cl("iconSize");n.append("g").append("rect").attr("id","node-"+i.id).attr("fill-opacity","0").attr("width",a).attr("height",a),n.attr("class","architecture-junction");let{width:s,height:u}=n._groups[0][0].getBBox();n.width=s,n.height=u,e.setElementForId(i.id,n)})},"drawJunctions"),I4([{name:yw.prefix,icons:yw}]),Qd.use(FDe.default),k(LDe,"addServices"),k(RDe,"addJunctions"),k(DDe,"positionNodes"),k(IDe,"addGroups"),k(NDe,"addEdges"),k(ODe,"getAlignments"),k(BDe,"getRelativeConstraints"),k(PDe,"layoutArchitecture"),fIe=k(async(e,t,r,i)=>{let n=i.db,a=n.getServices(),s=n.getJunctions(),u=n.getGroups(),h=n.getEdges(),d=n.getDataStructures(),p=kf(t),g=p.append("g");g.attr("class","architecture-edges");let y=p.append("g");y.attr("class","architecture-services");let m=p.append("g");m.attr("class","architecture-groups"),await dIe(n,y,a),pIe(n,y,s);let x=await PDe(a,s,u,h,d);await hIe(g,x),await cIe(m,x),DDe(n,x),$p(void 0,p,cl("padding"),cl("useMaxWidth"))},"draw"),gIe={draw:fIe},mIe={parser:oIe,db:j8,renderer:gIe,styles:uIe}}),ett=Object.hasOwnProperty,tQe=Ke(Ca(),1),ttt=(0,tQe.default)();function rQe(e){for(;e.firstChild;)e.removeChild(e.firstChild)}k4(),fm(),sm(),B0(),Oh(),xf(),uh(),ch(),Os(),bfe(),gm(),Qn(),pse(),ha();var yIe="comm",vIe="rule",xIe="decl",iQe="@import",nQe="@keyframes",aQe="@layer",bIe=Math.abs,tte=String.fromCharCode;function _Ie(e){return e.trim()}function YP(e,t,r){return e.replace(t,r)}function sQe(e,t,r){return e.indexOf(t,r)}function H8(e,t){return e.charCodeAt(t)|0}function vw(e,t,r){return e.slice(t,r)}function ap(e){return e.length}function oQe(e){return e.length}function qP(e,t){return t.push(e),e}var XP=1,xw=1,wIe=0,Qc=0,Jo=0,bw="";function rte(e,t,r,i,n,a,s,u){return{value:e,root:t,parent:r,type:i,props:n,children:a,line:XP,column:xw,length:s,return:"",siblings:u}}function lQe(){return Jo}function uQe(){return Jo=Qc>0?H8(bw,--Qc):0,xw--,Jo===10&&(xw=1,XP--),Jo}function e0(){return Jo=Qc<wIe?H8(bw,Qc++):0,xw++,Jo===10&&(xw=1,XP++),Jo}function ty(){return H8(bw,Qc)}function KP(){return Qc}function ZP(e,t){return vw(bw,e,t)}function V8(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function hQe(e){return XP=xw=1,wIe=ap(bw=e),Qc=0,[]}function cQe(e){return bw="",e}function ite(e){return _Ie(ZP(Qc-1,nte(e===91?e+2:e===40?e+1:e)))}function dQe(e){for(;(Jo=ty())&&Jo<33;)e0();return V8(e)>2||V8(Jo)>3?"":" "}function pQe(e,t){for(;--t&&e0()&&!(Jo<48||Jo>102||Jo>57&&Jo<65||Jo>70&&Jo<97););return ZP(e,KP()+(t<6&&ty()==32&&e0()==32))}function nte(e){for(;e0();)switch(Jo){case e:return Qc;case 34:case 39:e!==34&&e!==39&&nte(Jo);break;case 40:e===41&&nte(e);break;case 92:e0();break}return Qc}function fQe(e,t){for(;e0()&&e+Jo!==57&&!(e+Jo===84&&ty()===47););return"/*"+ZP(t,Qc-1)+"*"+tte(e===47?e:e0())}function gQe(e){for(;!V8(ty());)e0();return ZP(e,Qc)}function mQe(e){return cQe(QP("",null,null,null,[""],e=hQe(e),0,[0],e))}function QP(e,t,r,i,n,a,s,u,h){for(var d=0,p=0,g=s,y=0,m=0,x=0,_=1,E=1,w=1,C=0,A="",M=n,N=a,B=i,O=A;E;)switch(x=C,C=e0()){case 40:if(x!=108&&H8(O,g-1)==58){sQe(O+=YP(ite(C),"&","&\f"),"&\f",bIe(d?u[d-1]:0))!=-1&&(w=-1);break}case 34:case 39:case 91:O+=ite(C);break;case 9:case 10:case 13:case 32:O+=dQe(x);break;case 92:O+=pQe(KP()-1,7);continue;case 47:switch(ty()){case 42:case 47:qP(yQe(fQe(e0(),KP()),t,r,h),h),(V8(x||1)==5||V8(ty()||1)==5)&&ap(O)&&vw(O,-1,void 0)!==" "&&(O+=" ");break;default:O+="/"}break;case 123*_:u[d++]=ap(O)*w;case 125*_:case 59:case 0:switch(C){case 0:case 125:E=0;case 59+p:w==-1&&(O=YP(O,/\f/g,"")),m>0&&(ap(O)-g||_===0&&x===47)&&qP(m>32?TIe(O+";",i,r,g-1,h):TIe(YP(O," ","")+";",i,r,g-2,h),h);break;case 59:O+=";";default:if(qP(B=kIe(O,t,r,d,p,n,u,A,M=[],N=[],g,a),a),C===123)if(p===0)QP(O,t,B,B,M,a,g,u,N);else switch(y===99&&H8(O,3)===110?100:y){case 100:case 108:case 109:case 115:QP(e,B,B,i&&qP(kIe(e,B,B,0,0,n,u,A,n,M=[],g,N),N),n,N,g,u,i?M:N);break;default:QP(O,B,B,B,[""],N,0,u,N)}}d=p=m=0,_=w=1,A=O="",g=s;break;case 58:g=1+ap(O),m=x;default:if(_<1){if(C==123)--_;else if(C==125&&_++==0&&uQe()==125)continue}switch(O+=tte(C),C*_){case 38:w=p>0?1:(O+="\f",-1);break;case 44:u[d++]=(ap(O)-1)*w,w=1;break;case 64:ty()===45&&(O+=ite(e0())),y=ty(),p=g=ap(A=O+=gQe(KP())),C++;break;case 45:x===45&&ap(O)==2&&(_=0)}}return a}function kIe(e,t,r,i,n,a,s,u,h,d,p,g){for(var y=n-1,m=n===0?a:[""],x=oQe(m),_=0,E=0,w=0;_<i;++_)for(var C=0,A=vw(e,y+1,y=bIe(E=s[_])),M=e;C<x;++C)(M=_Ie(E>0?m[C]+" "+A:YP(A,/&\f/g,m[C])))&&(h[w++]=M);return rte(e,t,r,n===0?vIe:u,h,d,p,g)}function yQe(e,t,r,i){return rte(e,t,r,yIe,tte(lQe()),vw(e,2,-2),0,i)}function TIe(e,t,r,i,n){return rte(e,t,r,xIe,vw(e,0,i),vw(e,i+1,-1),i,n)}function ate(e,t){for(var r="",i=0;i<e.length;i++)r+=t(e[i],i,e,t)||"";return r}function vQe(e,t,r,i){switch(e.type){case aQe:if(e.children.length)break;case iQe:case xIe:return e.return=e.return||e.value;case yIe:return"";case nQe:return e.return=e.value+"{"+ate(e.children,i)+"}";case vIe:if(!ap(e.value=e.props.join(",")))return""}return ap(r=ate(e.children,i))?e.return=e.value+"{"+r+"}":""}cr(),aV();var EIe="c4",xQe=k(e=>/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/.test(e),"detector"),bQe=k(async()=>{let{diagram:e}=await Promise.resolve().then(()=>(uVe(),Tfe));return{id:EIe,diagram:e}},"loader"),_Qe={id:EIe,detector:xQe,loader:bQe},wQe=_Qe,CIe="flowchart",kQe=k((e,t)=>t?.flowchart?.defaultRenderer==="dagre-wrapper"||t?.flowchart?.defaultRenderer==="elk"?!1:/^\s*graph/.test(e),"detector"),TQe=k(async()=>{let{diagram:e}=await Promise.resolve().then(()=>(cW(),EI));return{id:CIe,diagram:e}},"loader"),EQe={id:CIe,detector:kQe,loader:TQe},CQe=EQe,SIe="flowchart-v2",SQe=k((e,t)=>t?.flowchart?.defaultRenderer==="dagre-d3"?!1:(t?.flowchart?.defaultRenderer==="elk"&&(t.layout="elk"),/^\s*graph/.test(e)&&t?.flowchart?.defaultRenderer==="dagre-wrapper"?!0:/^\s*flowchart/.test(e)),"detector"),AQe=k(async()=>{let{diagram:e}=await Promise.resolve().then(()=>(cW(),EI));return{id:SIe,diagram:e}},"loader"),MQe={id:SIe,detector:SQe,loader:AQe},LQe=MQe,AIe="er",RQe=k(e=>/^\s*erDiagram/.test(e),"detector"),DQe=k(async()=>{let{diagram:e}=await Promise.resolve().then(()=>(EVe(),y1e));return{id:AIe,diagram:e}},"loader"),IQe={id:AIe,detector:RQe,loader:DQe},NQe=IQe,MIe="gitGraph",OQe=k(e=>/^\s*gitGraph/.test(e),"detector"),BQe=k(async()=>{let{diagram:e}=await Promise.resolve().then(()=>($Xe(),Xbe));return{id:MIe,diagram:e}},"loader"),PQe={id:MIe,detector:OQe,loader:BQe},FQe=PQe,LIe="gantt",$Qe=k(e=>/^\s*gantt/.test(e),"detector"),zQe=k(async()=>{let{diagram:e}=await Promise.resolve().then(()=>(jXe(),V4e));return{id:LIe,diagram:e}},"loader"),GQe={id:LIe,detector:$Qe,loader:zQe},UQe=GQe,RIe="info",jQe=k(e=>/^\s*info/.test(e),"detector"),HQe=k(async()=>{let{diagram:e}=await Promise.resolve().then(()=>(HXe(),z3e));return{id:RIe,diagram:e}},"loader"),VQe={id:RIe,detector:jQe,loader:HQe},DIe="pie",WQe=k(e=>/^\s*pie/.test(e),"detector"),YQe=k(async()=>{let{diagram:e}=await Promise.resolve().then(()=>(VXe(),q3e));return{id:DIe,diagram:e}},"loader"),qQe={id:DIe,detector:WQe,loader:YQe},IIe="quadrantChart",XQe=k(e=>/^\s*quadrantChart/.test(e),"detector"),KQe=k(async()=>{let{diagram:e}=await Promise.resolve().then(()=>(WXe(),h_e));return{id:IIe,diagram:e}},"loader"),ZQe={id:IIe,detector:XQe,loader:KQe},QQe=ZQe,NIe="xychart",JQe=k(e=>/^\s*xychart-beta/.test(e),"detector"),eJe=k(async()=>{let{diagram:e}=await Promise.resolve().then(()=>(YXe(),N_e));return{id:NIe,diagram:e}},"loader"),tJe={id:NIe,detector:JQe,loader:eJe},rJe=tJe,OIe="requirement",iJe=k(e=>/^\s*requirement(Diagram)?/.test(e),"detector"),nJe=k(async()=>{let{diagram:e}=await Promise.resolve().then(()=>(qXe(),h5e));return{id:OIe,diagram:e}},"loader"),aJe={id:OIe,detector:iJe,loader:nJe},sJe=aJe,BIe="sequence",oJe=k(e=>/^\s*sequenceDiagram/.test(e),"detector"),lJe=k(async()=>{let{diagram:e}=await Promise.resolve().then(()=>(XXe(),U5e));return{id:BIe,diagram:e}},"loader"),uJe={id:BIe,detector:oJe,loader:lJe},hJe=uJe,PIe="class",cJe=k((e,t)=>t?.class?.defaultRenderer==="dagre-wrapper"?!1:/^\s*classDiagram/.test(e),"detector"),dJe=k(async()=>{let{diagram:e}=await Promise.resolve().then(()=>(KXe(),E6e));return{id:PIe,diagram:e}},"loader"),pJe={id:PIe,detector:cJe,loader:dJe},fJe=pJe,FIe="classDiagram",gJe=k((e,t)=>/^\s*classDiagram/.test(e)&&t?.class?.defaultRenderer==="dagre-wrapper"?!0:/^\s*classDiagram-v2/.test(e),"detector"),mJe=k(async()=>{let{diagram:e}=await Promise.resolve().then(()=>(ZXe(),S6e));return{id:FIe,diagram:e}},"loader"),yJe={id:FIe,detector:gJe,loader:mJe},vJe=yJe,$Ie="state",xJe=k((e,t)=>t?.state?.defaultRenderer==="dagre-wrapper"?!1:/^\s*stateDiagram/.test(e),"detector"),bJe=k(async()=>{let{diagram:e}=await Promise.resolve().then(()=>(QXe(),Eke));return{id:$Ie,diagram:e}},"loader"),_Je={id:$Ie,detector:xJe,loader:bJe},wJe=_Je,zIe="stateDiagram",kJe=k((e,t)=>!!(/^\s*stateDiagram-v2/.test(e)||/^\s*stateDiagram/.test(e)&&t?.state?.defaultRenderer==="dagre-wrapper"),"detector"),TJe=k(async()=>{let{diagram:e}=await Promise.resolve().then(()=>(JXe(),Wke));return{id:zIe,diagram:e}},"loader"),EJe={id:zIe,detector:kJe,loader:TJe},CJe=EJe,GIe="journey",SJe=k(e=>/^\s*journey/.test(e),"detector"),AJe=k(async()=>{let{diagram:e}=await Promise.resolve().then(()=>(eKe(),qke));return{id:GIe,diagram:e}},"loader"),MJe={id:GIe,detector:SJe,loader:AJe},LJe=MJe,RJe=k((e,t,r)=>{Ce.debug(`rendering svg for syntax error
`);let i=kf(t),n=i.append("g");i.attr("viewBox","0 0 2412 512"),Oo(i,100,512,!0),n.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),n.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),n.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),n.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),n.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),n.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),n.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in text"),n.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text(`mermaid version ${r}`)},"draw"),UIe={draw:RJe},DJe=UIe,IJe={db:{},renderer:UIe,parser:{parse:k(()=>{},"parse")}},NJe=IJe,jIe="flowchart-elk",OJe=k((e,t={})=>/^\s*flowchart-elk/.test(e)||/^\s*flowchart|graph/.test(e)&&t?.flowchart?.defaultRenderer==="elk"?(t.layout="elk",!0):!1,"detector"),BJe=k(async()=>{let{diagram:e}=await Promise.resolve().then(()=>(cW(),EI));return{id:jIe,diagram:e}},"loader"),PJe={id:jIe,detector:OJe,loader:BJe},FJe=PJe,HIe="timeline",$Je=k(e=>/^\s*timeline/.test(e),"detector"),zJe=k(async()=>{let{diagram:e}=await Promise.resolve().then(()=>(tKe(),yTe));return{id:HIe,diagram:e}},"loader"),GJe={id:HIe,detector:$Je,loader:zJe},UJe=GJe,VIe="mindmap",jJe=k(e=>/^\s*mindmap/.test(e),"detector"),HJe=k(async()=>{let{diagram:e}=await Promise.resolve().then(()=>(mZe(),W9e));return{id:VIe,diagram:e}},"loader"),VJe={id:VIe,detector:jJe,loader:HJe},WJe=VJe,WIe="kanban",YJe=k(e=>/^\s*kanban/.test(e),"detector"),qJe=k(async()=>{let{diagram:e}=await Promise.resolve().then(()=>(yZe(),SMe));return{id:WIe,diagram:e}},"loader"),XJe={id:WIe,detector:YJe,loader:qJe},KJe=XJe,YIe="sankey",ZJe=k(e=>/^\s*sankey-beta/.test(e),"detector"),QJe=k(async()=>{let{diagram:e}=await Promise.resolve().then(()=>(KZe(),oLe));return{id:YIe,diagram:e}},"loader"),JJe={id:YIe,detector:ZJe,loader:QJe},eet=JJe,qIe="packet",tet=k(e=>/^\s*packet-beta/.test(e),"detector"),ret=k(async()=>{let{diagram:e}=await Promise.resolve().then(()=>(ZZe(),kLe));return{id:qIe,diagram:e}},"loader"),iet={id:qIe,detector:tet,loader:ret},XIe="block",net=k(e=>/^\s*block-beta/.test(e),"detector"),aet=k(async()=>{let{diagram:e}=await Promise.resolve().then(()=>(QZe(),$Le));return{id:XIe,diagram:e}},"loader"),set={id:XIe,detector:net,loader:aet},oet=set,KIe="architecture",uet=k(e=>/^\s*architecture/.test(e),"detector"),het=k(async()=>{let{diagram:e}=await Promise.resolve().then(()=>(eQe(),MDe));return{id:KIe,diagram:e}},"loader"),cet={id:KIe,detector:uet,loader:het},det=cet,ZIe=!1,JP=k(()=>{ZIe||(ZIe=!0,Jg("error",NJe,e=>e.toLowerCase().trim()==="error"),Jg("---",{db:{clear:k(()=>{},"clear")},styles:{},renderer:{draw:k(()=>{},"draw")},parser:{parse:k(()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with un-indented `---` blocks")},"parse")},init:k(()=>null,"init")},e=>e.toLowerCase().trimStart().startsWith("---")),wb(wQe,KJe,vJe,fJe,NQe,UQe,VQe,qQe,sJe,hJe,FJe,LQe,CQe,WJe,UJe,FQe,CJe,wJe,LJe,QQe,eet,iet,rJe,oet,det))},"addDiagrams"),pet=k(async()=>{Ce.debug("Loading registered diagrams");let e=(await Promise.allSettled(Object.entries(cd).map(async([t,{detector:r,loader:i}])=>{if(i)try{Ob(t)}catch{try{let{diagram:n,id:a}=await i();Jg(a,n,r)}catch(n){throw Ce.error(`Failed to load external diagram with key ${t}. Removing from detectors.`),delete cd[t],n}}}))).filter(t=>t.status==="rejected");if(e.length>0){Ce.error(`Failed to load ${e.length} external diagrams`);for(let t of e)Ce.error(t);throw new Error(`Failed to load ${e.length} external diagrams`)}},"loadRegisteredDiagrams"),fet="graphics-document document";function QIe(e,t){e.attr("role",fet),t!==""&&e.attr("aria-roledescription",t)}k(QIe,"setA11yDiagramInfo");function JIe(e,t,r,i){if(e.insert!==void 0){if(r){let n=`chart-desc-${i}`;e.attr("aria-describedby",n),e.insert("desc",":first-child").attr("id",n).text(r)}if(t){let n=`chart-title-${i}`;e.attr("aria-labelledby",n),e.insert("title",":first-child").attr("id",n).text(t)}}}k(JIe,"addSVGa11yTitleDescription");var ste=class lOe{constructor(t,r,i,n,a){this.type=t,this.text=r,this.db=i,this.parser=n,this.renderer=a}static{k(this,"Diagram")}static async fromText(t,r={}){let i=cs(),n=Ip(t,i);t=Mae(t)+`
`;try{Ob(n)}catch{let d=SA(n);if(!d)throw new Py(`Diagram ${n} not found.`);let{id:p,diagram:g}=await d();Jg(p,g)}let{db:a,parser:s,renderer:u,init:h}=Ob(n);return s.parser&&(s.parser.yy=a),a.clear?.(),h?.(i),r.title&&a.setDiagramTitle?.(r.title),await s.parse(t),new lOe(n,t,a,s,u)}async render(t,r){await this.renderer.draw(this.text,t,r,this)}getParser(){return this.parser}getType(){return this.type}},eNe=[],get=k(()=>{eNe.forEach(e=>{e()}),eNe=[]},"attachFunctions"),met=k(e=>e.replace(/^\s*%%(?!{)[^\n]+\n?/gm,"").trimStart(),"cleanupComments");function tNe(e){let t=e.match(sh);if(!t)return{text:e,metadata:{}};let r=w4(t[1],{schema:_4})??{};r=typeof r=="object"&&!Array.isArray(r)?r:{};let i={};return r.displayMode&&(i.displayMode=r.displayMode.toString()),r.title&&(i.title=r.title.toString()),r.config&&(i.config=r.config),{text:e.slice(t[0].length),metadata:i}}k(tNe,"extractFrontMatter");var yet=k(e=>e.replace(/\r\n?/g,`
`).replace(/<(\w+)([^>]*)>/g,(t,r,i)=>"<"+r+i.replace(/="([^"]*)"/g,"='$1'")+">"),"cleanupText"),vet=k(e=>{let{text:t,metadata:r}=tNe(e),{displayMode:i,title:n,config:a={}}=r;return i&&(a.gantt||(a.gantt={}),a.gantt.displayMode=i),{title:n,config:a,text:t}},"processFrontmatter"),xet=k(e=>{let t=qn.detectInit(e)??{},r=qn.detectDirective(e,"wrap");return Array.isArray(r)?t.wrap=r.some(({type:i})=>i==="wrap"):r?.type==="wrap"&&(t.wrap=!0),{text:xae(e),directive:t}},"processDirectives");function ote(e){let t=yet(e),r=vet(t),i=xet(r.text),n=ff(r.config,i.directive);return e=met(i.text),{code:e,title:r.title,config:n}}k(ote,"preprocessDiagram");function rNe(e){let t=new TextEncoder().encode(e),r=Array.from(t,i=>String.fromCodePoint(i)).join("");return btoa(r)}k(rNe,"toBase64");var bet=5e4,_et="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa",wet="sandbox",ket="loose",Tet="http://www.w3.org/2000/svg",Eet="http://www.w3.org/1999/xlink",Cet="http://www.w3.org/1999/xhtml",Aet="100%",Met="100%",Let="border:0;margin:0;",Ret="margin:0",Det="allow-top-navigation-by-user-activation allow-popups",Iet='The "iframe" tag is not supported by your browser.',Net=["foreignobject"],Oet=["dominant-baseline"];function lte(e){let t=ote(e);return $g(),j6(t.config??{}),t}k(lte,"processAndSetConfigs");async function iNe(e,t){JP();try{let{code:r,config:i}=lte(e);return{diagramType:(await oNe(r)).type,config:i}}catch(r){if(t?.suppressErrors)return!1;throw r}}k(iNe,"parse");var nNe=k((e,t,r=[])=>`
.${e} ${t} { ${r.join(" !important; ")} !important; }`,"cssImportantStyles"),Bet=k((e,t=new Map)=>{let r="";if(e.themeCSS!==void 0&&(r+=`
${e.themeCSS}`),e.fontFamily!==void 0&&(r+=`
:root { --mermaid-font-family: ${e.fontFamily}}`),e.altFontFamily!==void 0&&(r+=`
:root { --mermaid-alt-font-family: ${e.altFontFamily}}`),t instanceof Map){let i=e.htmlLabels??e.flowchart?.htmlLabels?["> *","span"]:["rect","polygon","ellipse","circle","path"];t.forEach(n=>{Wa(n.styles)||i.forEach(a=>{r+=nNe(n.id,a,n.styles)}),Wa(n.textStyles)||(r+=nNe(n.id,"tspan",(n?.textStyles||[]).map(a=>a.replace("color","fill"))))})}return r},"createCssStyles"),Pet=k((e,t,r,i)=>{let n=Bet(e,r),a=PA(t,n,e.themeVariables);return ate(mQe(`${i}{${a}}`),vQe)},"createUserStyles"),Fet=k((e="",t,r)=>{let i=e;return!r&&!t&&(i=i.replace(/marker-end="url\([\d+./:=?A-Za-z-]*?#/g,'marker-end="url(#')),i=N0(i),i=i.replace(/<br>/g,"<br/>"),i},"cleanUpSvgCode"),$et=k((e="",t)=>{let r=t?.viewBox?.baseVal?.height?t.viewBox.baseVal.height+"px":Met,i=rNe(`<body style="${Ret}">${e}</body>`);return`<iframe style="width:${Aet};height:${r};${Let}" src="data:text/html;charset=UTF-8;base64,${i}" sandbox="${Det}">
  ${Iet}
</iframe>`},"putIntoIFrame"),aNe=k((e,t,r,i,n)=>{let a=e.append("div");a.attr("id",r),i&&a.attr("style",i);let s=a.append("svg").attr("id",t).attr("width","100%").attr("xmlns",Tet);return n&&s.attr("xmlns:xlink",n),s.append("g"),e},"appendDivSvgG");function ute(e,t){return e.append("iframe").attr("id",t).attr("style","width: 100%; height: 100%;").attr("sandbox","")}k(ute,"sandboxedIframe");var zet=k((e,t,r,i)=>{e.getElementById(t)?.remove(),e.getElementById(r)?.remove(),e.getElementById(i)?.remove()},"removeExistingElements"),Get=k(async function(e,t,r){JP();let i=lte(t);t=i.code;let n=cs();Ce.debug(n),t.length>(n?.maxTextSize??bet)&&(t=_et);let a="#"+e,s="i"+e,u="#"+s,h="d"+e,d="#"+h,p=k(()=>{let F=Nr(y?u:d).node();F&&"remove"in F&&F.remove()},"removeTempElements"),g=Nr("body"),y=n.securityLevel===wet,m=n.securityLevel===ket,x=n.fontFamily;if(r!==void 0){if(r&&(r.innerHTML=""),y){let F=ute(Nr(r),s);g=Nr(F.nodes()[0].contentDocument.body),g.node().style.margin=0}else g=Nr(r);aNe(g,e,h,`font-family: ${x}`,Eet)}else{if(zet(document,e,h,s),y){let F=ute(Nr("body"),s);g=Nr(F.nodes()[0].contentDocument.body),g.node().style.margin=0}else g=Nr("body");aNe(g,e,h)}let _,E;try{_=await ste.fromText(t,{title:i.title})}catch(F){if(n.suppressErrorRendering)throw p(),F;_=await ste.fromText("error"),E=F}let w=g.select(d).node(),C=_.type,A=w.firstChild,M=A.firstChild,N=_.renderer.getClasses?.(t,_),B=Pet(n,C,N,a),O=document.createElement("style");O.innerHTML=B,A.insertBefore(O,M);try{await _.renderer.draw(t,e,gI,_)}catch(F){throw n.suppressErrorRendering?p():DJe.draw(t,e,gI),F}let L=g.select(`${d} svg`),$=_.db.getAccTitle?.(),G=_.db.getAccDescription?.();lNe(C,L,$,G),g.select(`[id="${e}"]`).selectAll("foreignobject > *").attr("xmlns",Cet);let z=g.select(d).node().innerHTML;if(Ce.debug("config.arrowMarkerAbsolute",n.arrowMarkerAbsolute),z=Fet(z,y,es(n.arrowMarkerAbsolute)),y){let F=g.select(d+" svg").node();z=$et(z,F)}else m||(z=ar.sanitize(z,{ADD_TAGS:Net,ADD_ATTR:Oet,HTML_INTEGRATION_POINTS:{foreignobject:!0}}));if(get(),E)throw E;return p(),{diagramType:C,svg:z,bindFunctions:_.db.bindFunctions}},"render");function sNe(e={}){let t=Xs({},e);t?.fontFamily&&!t.themeVariables?.fontFamily&&(t.themeVariables||(t.themeVariables={}),t.themeVariables.fontFamily=t.fontFamily),DA(t),t?.theme&&t.theme in xc?t.themeVariables=xc[t.theme].getThemeVariables(t.themeVariables):t&&(t.themeVariables=xc.default.getThemeVariables(t.themeVariables));let r=typeof t=="object"?RA(t):G6();ah(r.logLevel),JP()}k(sNe,"initialize");var oNe=k((e,t={})=>{let{code:r}=ote(e);return ste.fromText(r,t)},"getDiagramFromText");function lNe(e,t,r,i){QIe(t,e),JIe(t,r,i,t.attr("id"))}k(lNe,"addA11yInfo");var Rx=Object.freeze({render:Get,parse:iNe,getDiagramFromText:oNe,initialize:sNe,getConfig:cs,setConfig:Pp,getSiteConfig:G6,updateSiteConfig:z6,reset:k(()=>{$g()},"reset"),globalReset:k(()=>{$g(g0)},"globalReset"),defaultConfig:g0});ah(cs().logLevel),$g(cs());var Uet=k((e,t,r)=>{Ce.warn(e),aj(e)?(r&&r(e.str,e.hash),t.push({...e,message:e.str,error:e})):(r&&r(e),e instanceof Error&&t.push({str:e.message,message:e.message,hash:e.name,error:e}))},"handleError"),uNe=k(async function(e={querySelector:".mermaid"}){try{await jet(e)}catch(t){if(aj(t)&&Ce.error(t.str),og.parseError&&og.parseError(t),!e.suppressErrors)throw Ce.error("Use the suppressErrors option to suppress these errors"),t}},"run"),jet=k(async function({postRenderCallback:e,querySelector:t,nodes:r}={querySelector:".mermaid"}){let i=Rx.getConfig();Ce.debug(`${e?"":"No "}Callback function found`);let n;if(r)n=r;else if(t)n=document.querySelectorAll(t);else throw new Error("Nodes and querySelector are both undefined");Ce.debug(`Found ${n.length} diagrams`),i?.startOnLoad!==void 0&&(Ce.debug("Start On Load: "+i?.startOnLoad),Rx.updateSiteConfig({startOnLoad:i?.startOnLoad}));let a=new qn.InitIDGenerator(i.deterministicIds,i.deterministicIDSeed),s,u=[];for(let h of Array.from(n)){if(Ce.info("Rendering diagram: "+h.id),h.getAttribute("data-processed"))continue;h.setAttribute("data-processed","true");let d=`mermaid-${a.next()}`;s=h.innerHTML,s=dse(qn.entityDecode(s)).trim().replace(/<br\s*\/?>/gi,"<br/>");let p=qn.detectInit(s);p&&Ce.debug("Detected early reinit: ",p);try{let{svg:g,bindFunctions:y}=await pNe(d,s,h);h.innerHTML=g,e&&await e(d),y&&y(h)}catch(g){Uet(g,u,og.parseError)}}if(u.length>0)throw u[0]},"runThrowsErrors"),hNe=k(function(e){Rx.initialize(e)},"initialize"),Het=k(async function(e,t,r){Ce.warn("mermaid.init is deprecated. Please use run instead."),e&&hNe(e);let i={postRenderCallback:r,querySelector:".mermaid"};typeof t=="string"?i.querySelector=t:t&&(t instanceof HTMLElement?i.nodes=[t]:i.nodes=t),await uNe(i)},"init"),Vet=k(async(e,{lazyLoad:t=!0}={})=>{JP(),wb(...e),t===!1&&await pet()},"registerExternalDiagrams"),cNe=k(function(){if(og.startOnLoad){let{startOnLoad:e}=Rx.getConfig();e&&og.run().catch(t=>Ce.error("Mermaid failed to initialize",t))}},"contentLoaded");typeof document<"u"&&window.addEventListener("load",cNe,!1);var Wet=k(function(e){og.parseError=e},"setParseErrorHandler"),eF=[],hte=!1,dNe=k(async()=>{if(!hte){for(hte=!0;eF.length>0;){let e=eF.shift();if(e)try{await e()}catch(t){Ce.error("Error executing queue",t)}}hte=!1}},"executeQueue"),Yet=k(async(e,t)=>new Promise((r,i)=>{let n=k(()=>new Promise((a,s)=>{Rx.parse(e,t).then(u=>{a(u),r(u)},u=>{Ce.error("Error parsing",u),og.parseError?.(u),s(u),i(u)})}),"performCall");eF.push(n),dNe().catch(i)}),"parse"),pNe=k((e,t,r)=>new Promise((i,n)=>{let a=k(()=>new Promise((s,u)=>{Rx.render(e,t,r).then(h=>{s(h),i(h)},h=>{Ce.error("Error parsing",h),og.parseError?.(h),u(h),n(h)})}),"performCall");eF.push(a),dNe().catch(n)}),"render"),og={startOnLoad:!0,mermaidAPI:Rx,parse:Yet,render:pNe,init:Het,run:uNe,registerExternalDiagrams:Vet,registerLayoutLoaders:$V,initialize:hNe,parseError:void 0,contentLoaded:cNe,setParseErrorHandler:Wet,detectType:Ip,registerIconPacks:I4},fNe=og,qet=class{constructor(e,t){this.container=e,this.content=t,this.setupEventListeners(),this.setupNavigationControls()}isDragging=!1;startPan={x:0,y:0};currentPan={x:0,y:0};scale=1;MIN_SCALE=.5;MAX_SCALE=3;ZOOM_SENSITIVITY=.001;setupEventListeners(){this.container.addEventListener("mousedown",this.onMouseDown.bind(this)),document.addEventListener("mousemove",this.onMouseMove.bind(this)),document.addEventListener("mouseup",this.onMouseUp.bind(this)),this.container.addEventListener("wheel",this.onWheel.bind(this),{passive:!1}),window.addEventListener("resize",this.resetTransform.bind(this))}setupNavigationControls(){let e=document.createElement("div");e.className="mermaid-controls";let t=this.createButton("+",()=>this.zoom(.1)),r=this.createButton("-",()=>this.zoom(-.1)),i=this.createButton("Reset",()=>this.resetTransform());e.appendChild(r),e.appendChild(i),e.appendChild(t),this.container.appendChild(e)}createButton(e,t){let r=document.createElement("button");return r.textContent=e,r.className="mermaid-control-button",r.addEventListener("click",t),window.addCleanup(()=>r.removeEventListener("click",t)),r}onMouseDown(e){e.button===0&&(this.isDragging=!0,this.startPan={x:e.clientX-this.currentPan.x,y:e.clientY-this.currentPan.y},this.container.style.cursor="grabbing")}onMouseMove(e){this.isDragging&&(e.preventDefault(),this.currentPan={x:e.clientX-this.startPan.x,y:e.clientY-this.startPan.y},this.updateTransform())}onMouseUp(){this.isDragging=!1,this.container.style.cursor="grab"}onWheel(e){e.preventDefault();let t=-e.deltaY*this.ZOOM_SENSITIVITY,r=Math.min(Math.max(this.scale+t,this.MIN_SCALE),this.MAX_SCALE),i=this.content.getBoundingClientRect(),n=e.clientX-i.left,a=e.clientY-i.top,s=r-this.scale;this.currentPan.x-=n*s,this.currentPan.y-=a*s,this.scale=r,this.updateTransform()}zoom(e){let t=Math.min(Math.max(this.scale+e,this.MIN_SCALE),this.MAX_SCALE),r=this.content.getBoundingClientRect(),i=r.width/2,n=r.height/2,a=t-this.scale;return this.currentPan.x-=i*a,this.currentPan.y-=n*a,this.scale=t,this.updateTransform(),this}updateTransform(){return this.content.style.transform=`translate(${this.currentPan.x}px, ${this.currentPan.y}px) scale(${this.scale})`,this}setInitialPan(e){return this.currentPan=e,this.startPan={x:0,y:0},this}resetTransform(){this.scale=1;let e=this.container.getBoundingClientRect();return this.currentPan={x:e.width/2,y:0},this.updateTransform(),this}},Xet=["--secondary","--tertiary","--gray","--light","--lightgray","--highlight","--dark","--darkgray","--codeFont"];document.addEventListener("nav",async()=>{let e=document.querySelector(".center").querySelectorAll("code.mermaid");if(e.length===0)return;let t=Xet.reduce((d,p)=>(d[p]=getComputedStyle(document.documentElement).getPropertyValue(p),d),{}),r=document.documentElement.getAttribute("saved-theme")==="dark";fNe.initialize({startOnLoad:!1,securityLevel:"loose",theme:r?"dark":"base",themeVariables:{fontFamily:t["--codeFont"],primaryColor:t["--light"],primaryTextColor:t["--darkgray"],primaryBorderColor:t["--tertiary"],lineColor:t["--darkgray"],secondaryColor:t["--secondary"],tertiaryColor:t["--tertiary"],clusterBkg:t["--light"],edgeLabelBackground:t["--highlight"]}}),await fNe.run({nodes:e});let i=document.getElementById("mermaid-container");if(!i)return;let n=null;function a(d){let p=d.target;if(!p)return;let g=i.querySelector("#mermaid-space"),y=i.querySelector(".mermaid-content");if(!y)return;rQe(y);let m=p.closest("pre");if(!m)return;let x=m.querySelector("code.mermaid > svg").cloneNode(!0);y.appendChild(x),i.classList.add("active"),g.style.cursor="grab";let _={x:g.getBoundingClientRect().width-g.offsetWidth/2,y:0};y.style.transform=`translate(${_.x}px, ${_.y}px) scale(1)`,n=new qet(g,y),n.setInitialPan(_)}function s(){i.classList.remove("active"),n=null}function u(d){d.key==="Escape"&&i.classList.contains("active")&&(d.stopPropagation(),s())}let h=i.querySelector(".close-button");h.addEventListener("click",s),document.addEventListener("keydown",u),window.addCleanup(()=>{h.removeEventListener("click",s),document.removeEventListener("keydown",u)});for(let d=0;d<e.length;d++){let p=e[d].parentElement,g=p.querySelector(".clipboard-button"),y=p.querySelector(".expand-button");if(y){let m=window.getComputedStyle(g),x=g.offsetWidth+parseFloat(m.marginLeft||"0")+parseFloat(m.marginRight||"0");y.style.right=`calc(${x}px + 0.3rem)`,p.prepend(y),y.addEventListener("click",a),window.addCleanup(()=>y.removeEventListener("click",a))}}});/*! Bundled license information:

dompurify/dist/purify.es.mjs:
  (*! @license DOMPurify 3.2.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.1/LICENSE *)

mermaid/dist/chunks/mermaid.core/chunk-S3SWNSAA.mjs:
  (*! Bundled license information:
  
  js-yaml/dist/js-yaml.mjs:
    (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
  *)

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

cytoscape/dist/cytoscape.esm.mjs:
  (*!
  Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
  Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
  Licensed under The MIT License (http://opensource.org/licenses/MIT)
  *)
  (*!
  Event object based on jQuery events, MIT license
  
  https://jquery.org/license/
  https://tldrlegal.com/license/mit-license
  https://github.com/jquery/jquery/blob/master/src/event.js
  *)
  (*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License *)
  (*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License *)

mermaid/dist/mermaid.core.mjs:
  (*! Check if previously processed *)
  (*!
   * Wait for document loaded before starting the execution
   *)
*/}(),function(){var na=Object.create,ta=Object.defineProperty,Ua=Object.getOwnPropertyDescriptor,Fa=Object.getOwnPropertyNames,On=Object.getPrototypeOf,dn=Object.prototype.hasOwnProperty,D=(Y,_e)=>()=>(_e||Y((_e={exports:{}}).exports,_e),_e.exports),hi=(Y,_e,Fe,Ue)=>{if(_e&&typeof _e=="object"||typeof _e=="function")for(let je of Fa(_e))!dn.call(Y,je)&&je!==Fe&&ta(Y,je,{get:()=>_e[je],enumerable:!(Ue=Ua(_e,je))||Ue.enumerable});return Y},oi=(Y,_e,Fe)=>(Fe=Y!=null?na(On(Y)):{},hi(_e||!Y||!Y.__esModule?ta(Fe,"default",{value:Y,enumerable:!0}):Fe,Y)),aa=D((Y,_e)=>{"use strict";_e.exports=Ue;function Fe(mt){return mt instanceof Buffer?Buffer.from(mt):new mt.constructor(mt.buffer.slice(),mt.byteOffset,mt.length)}function Ue(mt){if(mt=mt||{},mt.circles)return je(mt);let Nt=new Map;if(Nt.set(Date,Sr=>new Date(Sr)),Nt.set(Map,(Sr,ti)=>new Map(rr(Array.from(Sr),ti))),Nt.set(Set,(Sr,ti)=>new Set(rr(Array.from(Sr),ti))),mt.constructorHandlers)for(let Sr of mt.constructorHandlers)Nt.set(Sr[0],Sr[1]);let It=null;return mt.proto?ni:wr;function rr(Sr,ti){let ar=Object.keys(Sr),cr=new Array(ar.length);for(let yi=0;yi<ar.length;yi++){let qi=ar[yi],da=Sr[qi];typeof da!="object"||da===null?cr[qi]=da:da.constructor!==Object&&(It=Nt.get(da.constructor))?cr[qi]=It(da,ti):ArrayBuffer.isView(da)?cr[qi]=Fe(da):cr[qi]=ti(da)}return cr}function wr(Sr){if(typeof Sr!="object"||Sr===null)return Sr;if(Array.isArray(Sr))return rr(Sr,wr);if(Sr.constructor!==Object&&(It=Nt.get(Sr.constructor)))return It(Sr,wr);let ti={};for(let ar in Sr){if(Object.hasOwnProperty.call(Sr,ar)===!1)continue;let cr=Sr[ar];typeof cr!="object"||cr===null?ti[ar]=cr:cr.constructor!==Object&&(It=Nt.get(cr.constructor))?ti[ar]=It(cr,wr):ArrayBuffer.isView(cr)?ti[ar]=Fe(cr):ti[ar]=wr(cr)}return ti}function ni(Sr){if(typeof Sr!="object"||Sr===null)return Sr;if(Array.isArray(Sr))return rr(Sr,ni);if(Sr.constructor!==Object&&(It=Nt.get(Sr.constructor)))return It(Sr,ni);let ti={};for(let ar in Sr){let cr=Sr[ar];typeof cr!="object"||cr===null?ti[ar]=cr:cr.constructor!==Object&&(It=Nt.get(cr.constructor))?ti[ar]=It(cr,ni):ArrayBuffer.isView(cr)?ti[ar]=Fe(cr):ti[ar]=ni(cr)}return ti}}function je(mt){let Nt=[],It=[],rr=new Map;if(rr.set(Date,ar=>new Date(ar)),rr.set(Map,(ar,cr)=>new Map(ni(Array.from(ar),cr))),rr.set(Set,(ar,cr)=>new Set(ni(Array.from(ar),cr))),mt.constructorHandlers)for(let ar of mt.constructorHandlers)rr.set(ar[0],ar[1]);let wr=null;return mt.proto?ti:Sr;function ni(ar,cr){let yi=Object.keys(ar),qi=new Array(yi.length);for(let da=0;da<yi.length;da++){let $a=yi[da],ya=ar[$a];if(typeof ya!="object"||ya===null)qi[$a]=ya;else if(ya.constructor!==Object&&(wr=rr.get(ya.constructor)))qi[$a]=wr(ya,cr);else if(ArrayBuffer.isView(ya))qi[$a]=Fe(ya);else{let Ha=Nt.indexOf(ya);Ha!==-1?qi[$a]=It[Ha]:qi[$a]=cr(ya)}}return qi}function Sr(ar){if(typeof ar!="object"||ar===null)return ar;if(Array.isArray(ar))return ni(ar,Sr);if(ar.constructor!==Object&&(wr=rr.get(ar.constructor)))return wr(ar,Sr);let cr={};Nt.push(ar),It.push(cr);for(let yi in ar){if(Object.hasOwnProperty.call(ar,yi)===!1)continue;let qi=ar[yi];if(typeof qi!="object"||qi===null)cr[yi]=qi;else if(qi.constructor!==Object&&(wr=rr.get(qi.constructor)))cr[yi]=wr(qi,Sr);else if(ArrayBuffer.isView(qi))cr[yi]=Fe(qi);else{let da=Nt.indexOf(qi);da!==-1?cr[yi]=It[da]:cr[yi]=Sr(qi)}}return Nt.pop(),It.pop(),cr}function ti(ar){if(typeof ar!="object"||ar===null)return ar;if(Array.isArray(ar))return ni(ar,ti);if(ar.constructor!==Object&&(wr=rr.get(ar.constructor)))return wr(ar,ti);let cr={};Nt.push(ar),It.push(cr);for(let yi in ar){let qi=ar[yi];if(typeof qi!="object"||qi===null)cr[yi]=qi;else if(qi.constructor!==Object&&(wr=rr.get(qi.constructor)))cr[yi]=wr(qi,ti);else if(ArrayBuffer.isView(qi))cr[yi]=Fe(qi);else{let da=Nt.indexOf(qi);da!==-1?cr[yi]=It[da]:cr[yi]=ti(qi)}}return Nt.pop(),It.pop(),cr}}}),Sn=D(()=>{}),Ke=Object.hasOwnProperty,Ca=oi(aa(),1),ba=(0,Ca.default)();function Kr(Y,_e){if(!Y)return;function Fe(je){je.target===this&&(je.preventDefault(),je.stopPropagation(),_e())}function Ue(je){je.key.startsWith("Esc")&&(je.preventDefault(),_e())}Y?.addEventListener("click",Fe),window.addCleanup(()=>Y?.removeEventListener("click",Fe)),document.addEventListener("keydown",Ue),window.addCleanup(()=>document.removeEventListener("keydown",Ue))}function Ot(Y){for(;Y.firstChild;)Y.removeChild(Y.firstChild)}function Vi(Y,..._e){Y&&_e.forEach(([Fe,Ue])=>{let je=mt=>Ue(mt);Y.addEventListener(Fe,je),window.addCleanup(()=>Y.removeEventListener(Fe,je))})}var Li={propertyDefaults:{title:"Untitled",description:"No description provided"},components:{callout:{note:"Note",abstract:"Abstract",info:"Info",todo:"Todo",tip:"Tip",success:"Success",question:"Question",warning:"Warning",failure:"Failure",danger:"Danger",bug:"Bug",example:"Example",quote:"Quote"},backlinks:{title:"Backlinks",noBacklinksFound:"No backlinks found"},themeToggle:{lightMode:"Light mode",darkMode:"Dark mode"},explorer:{title:"Explorer"},footer:{createdWith:"Created with"},graph:{title:"Graph View"},recentNotes:{title:"Recent Notes",seeRemainingMore:({remaining:Y})=>`See ${Y} more \u2192`},transcludes:{transcludeOf:({targetSlug:Y})=>`Transclude of ${Y}`,linkToOriginal:"Link to original"},search:{title:"Search",searchBarPlaceholder:"Search for something"},tableOfContents:{title:"Table of Contents"},contentMeta:{readingTime:({minutes:Y})=>`${Y} min read`}},pages:{rss:{recentNotes:"Recent notes",lastFewNotes:({count:Y})=>`Last ${Y} notes`},error:{title:"Not Found",notFound:"Either this page is private or doesn't exist."},folderContent:{folder:"Folder",itemsUnderFolder:({count:Y})=>Y===1?"1 item under this folder.":`${Y} items under this folder.`},tagContent:{tag:"Tag",tagIndex:"Tag Index",itemsUnderTag:({count:Y})=>Y===1?"1 item with this tag.":`${Y} items with this tag.`,showingFirst:({count:Y})=>`Showing first ${Y} tags.`,totalTags:({count:Y})=>`Found ${Y} total tags.`}}},jr={propertyDefaults:{title:"Untitled",description:"No description provided"},components:{callout:{note:"Note",abstract:"Abstract",info:"Info",todo:"To-Do",tip:"Tip",success:"Success",question:"Question",warning:"Warning",failure:"Failure",danger:"Danger",bug:"Bug",example:"Example",quote:"Quote"},backlinks:{title:"Backlinks",noBacklinksFound:"No backlinks found"},themeToggle:{lightMode:"Light mode",darkMode:"Dark mode"},explorer:{title:"Explorer"},footer:{createdWith:"Created with"},graph:{title:"Graph View"},recentNotes:{title:"Recent Notes",seeRemainingMore:({remaining:Y})=>`See ${Y} more \u2192`},transcludes:{transcludeOf:({targetSlug:Y})=>`Transclude of ${Y}`,linkToOriginal:"Link to original"},search:{title:"Search",searchBarPlaceholder:"Search for something"},tableOfContents:{title:"Table of Contents"},contentMeta:{readingTime:({minutes:Y})=>`${Y} min read`}},pages:{rss:{recentNotes:"Recent notes",lastFewNotes:({count:Y})=>`Last ${Y} notes`},error:{title:"Not Found",notFound:"Either this page is private or doesn't exist."},folderContent:{folder:"Folder",itemsUnderFolder:({count:Y})=>Y===1?"1 item under this folder.":`${Y} items under this folder.`},tagContent:{tag:"Tag",tagIndex:"Tag Index",itemsUnderTag:({count:Y})=>Y===1?"1 item with this tag.":`${Y} items with this tag.`,showingFirst:({count:Y})=>`Showing first ${Y} tags.`,totalTags:({count:Y})=>`Found ${Y} total tags.`}}},Ir={propertyDefaults:{title:"Sans titre",description:"Aucune description fournie"},components:{callout:{note:"Note",abstract:"R\xE9sum\xE9",info:"Info",todo:"\xC0 faire",tip:"Conseil",success:"Succ\xE8s",question:"Question",warning:"Avertissement",failure:"\xC9chec",danger:"Danger",bug:"Bogue",example:"Exemple",quote:"Citation"},backlinks:{title:"Liens retour",noBacklinksFound:"Aucun lien retour trouv\xE9"},themeToggle:{lightMode:"Mode clair",darkMode:"Mode sombre"},explorer:{title:"Explorateur"},footer:{createdWith:"Cr\xE9\xE9 avec"},graph:{title:"Vue Graphique"},recentNotes:{title:"Notes R\xE9centes",seeRemainingMore:({remaining:Y})=>`Voir ${Y} de plus \u2192`},transcludes:{transcludeOf:({targetSlug:Y})=>`Transclusion de ${Y}`,linkToOriginal:"Lien vers l'original"},search:{title:"Recherche",searchBarPlaceholder:"Rechercher quelque chose"},tableOfContents:{title:"Table des Mati\xE8res"},contentMeta:{readingTime:({minutes:Y})=>`${Y} min de lecture`}},pages:{rss:{recentNotes:"Notes r\xE9centes",lastFewNotes:({count:Y})=>`Les derni\xE8res ${Y} notes`},error:{title:"Introuvable",notFound:"Cette page est soit priv\xE9e, soit elle n'existe pas."},folderContent:{folder:"Dossier",itemsUnderFolder:({count:Y})=>Y===1?"1 \xE9l\xE9ment sous ce dossier.":`${Y} \xE9l\xE9ments sous ce dossier.`},tagContent:{tag:"\xC9tiquette",tagIndex:"Index des \xE9tiquettes",itemsUnderTag:({count:Y})=>Y===1?"1 \xE9l\xE9ment avec cette \xE9tiquette.":`${Y} \xE9l\xE9ments avec cette \xE9tiquette.`,showingFirst:({count:Y})=>`Affichage des premi\xE8res ${Y} \xE9tiquettes.`,totalTags:({count:Y})=>`Trouv\xE9 ${Y} \xE9tiquettes au total.`}}},gr={propertyDefaults:{title:"Senza titolo",description:"Nessuna descrizione"},components:{callout:{note:"Nota",abstract:"Astratto",info:"Info",todo:"Da fare",tip:"Consiglio",success:"Completato",question:"Domanda",warning:"Attenzione",failure:"Errore",danger:"Pericolo",bug:"Bug",example:"Esempio",quote:"Citazione"},backlinks:{title:"Link entranti",noBacklinksFound:"Nessun link entrante"},themeToggle:{lightMode:"Tema chiaro",darkMode:"Tema scuro"},explorer:{title:"Esplora"},footer:{createdWith:"Creato con"},graph:{title:"Vista grafico"},recentNotes:{title:"Note recenti",seeRemainingMore:({remaining:Y})=>`Vedi ${Y} altro \u2192`},transcludes:{transcludeOf:({targetSlug:Y})=>`Transclusione di ${Y}`,linkToOriginal:"Link all'originale"},search:{title:"Cerca",searchBarPlaceholder:"Cerca qualcosa"},tableOfContents:{title:"Tabella dei contenuti"},contentMeta:{readingTime:({minutes:Y})=>`${Y} minuti`}},pages:{rss:{recentNotes:"Note recenti",lastFewNotes:({count:Y})=>`Ultime ${Y} note`},error:{title:"Non trovato",notFound:"Questa pagina \xE8 privata o non esiste."},folderContent:{folder:"Cartella",itemsUnderFolder:({count:Y})=>Y===1?"1 oggetto in questa cartella.":`${Y} oggetti in questa cartella.`},tagContent:{tag:"Etichetta",tagIndex:"Indice etichette",itemsUnderTag:({count:Y})=>Y===1?"1 oggetto con questa etichetta.":`${Y} oggetti con questa etichetta.`,showingFirst:({count:Y})=>`Prime ${Y} etichette.`,totalTags:({count:Y})=>`Trovate ${Y} etichette totali.`}}},Zr={propertyDefaults:{title:"\u7121\u984C",description:"\u8AAC\u660E\u306A\u3057"},components:{callout:{note:"\u30CE\u30FC\u30C8",abstract:"\u6284\u9332",info:"\u60C5\u5831",todo:"\u3084\u308B\u3079\u304D\u3053\u3068",tip:"\u30D2\u30F3\u30C8",success:"\u6210\u529F",question:"\u8CEA\u554F",warning:"\u8B66\u544A",failure:"\u5931\u6557",danger:"\u5371\u967A",bug:"\u30D0\u30B0",example:"\u4F8B",quote:"\u5F15\u7528"},backlinks:{title:"\u30D0\u30C3\u30AF\u30EA\u30F3\u30AF",noBacklinksFound:"\u30D0\u30C3\u30AF\u30EA\u30F3\u30AF\u306F\u3042\u308A\u307E\u305B\u3093"},themeToggle:{lightMode:"\u30E9\u30A4\u30C8\u30E2\u30FC\u30C9",darkMode:"\u30C0\u30FC\u30AF\u30E2\u30FC\u30C9"},explorer:{title:"\u30A8\u30AF\u30B9\u30D7\u30ED\u30FC\u30E9\u30FC"},footer:{createdWith:"\u4F5C\u6210"},graph:{title:"\u30B0\u30E9\u30D5\u30D3\u30E5\u30FC"},recentNotes:{title:"\u6700\u8FD1\u306E\u8A18\u4E8B",seeRemainingMore:({remaining:Y})=>`\u3055\u3089\u306B${Y}\u4EF6 \u2192`},transcludes:{transcludeOf:({targetSlug:Y})=>`${Y}\u306E\u307E\u3068\u3081`,linkToOriginal:"\u5143\u8A18\u4E8B\u3078\u306E\u30EA\u30F3\u30AF"},search:{title:"\u691C\u7D22",searchBarPlaceholder:"\u691C\u7D22\u30EF\u30FC\u30C9\u3092\u5165\u529B"},tableOfContents:{title:"\u76EE\u6B21"},contentMeta:{readingTime:({minutes:Y})=>`${Y} min read`}},pages:{rss:{recentNotes:"\u6700\u8FD1\u306E\u8A18\u4E8B",lastFewNotes:({count:Y})=>`\u6700\u65B0\u306E${Y}\u4EF6`},error:{title:"Not Found",notFound:"\u30DA\u30FC\u30B8\u304C\u5B58\u5728\u3057\u306A\u3044\u304B\u3001\u975E\u516C\u958B\u8A2D\u5B9A\u306B\u306A\u3063\u3066\u3044\u307E\u3059\u3002"},folderContent:{folder:"\u30D5\u30A9\u30EB\u30C0",itemsUnderFolder:({count:Y})=>`${Y}\u4EF6\u306E\u30DA\u30FC\u30B8`},tagContent:{tag:"\u30BF\u30B0",tagIndex:"\u30BF\u30B0\u4E00\u89A7",itemsUnderTag:({count:Y})=>`${Y}\u4EF6\u306E\u30DA\u30FC\u30B8`,showingFirst:({count:Y})=>`\u306E\u3046\u3061\u6700\u521D\u306E${Y}\u4EF6\u3092\u8868\u793A\u3057\u3066\u3044\u307E\u3059`,totalTags:({count:Y})=>`\u5168${Y}\u500B\u306E\u30BF\u30B0\u3092\u8868\u793A\u4E2D`}}},vr={propertyDefaults:{title:"Unbenannt",description:"Keine Beschreibung angegeben"},components:{callout:{note:"Hinweis",abstract:"Zusammenfassung",info:"Info",todo:"Zu erledigen",tip:"Tipp",success:"Erfolg",question:"Frage",warning:"Warnung",failure:"Misserfolg",danger:"Gefahr",bug:"Fehler",example:"Beispiel",quote:"Zitat"},backlinks:{title:"Backlinks",noBacklinksFound:"Keine Backlinks gefunden"},themeToggle:{lightMode:"Light Mode",darkMode:"Dark Mode"},explorer:{title:"Explorer"},footer:{createdWith:"Erstellt mit"},graph:{title:"Graphansicht"},recentNotes:{title:"Zuletzt bearbeitete Seiten",seeRemainingMore:({remaining:Y})=>`${Y} weitere ansehen \u2192`},transcludes:{transcludeOf:({targetSlug:Y})=>`Transklusion von ${Y}`,linkToOriginal:"Link zum Original"},search:{title:"Suche",searchBarPlaceholder:"Suche nach etwas"},tableOfContents:{title:"Inhaltsverzeichnis"},contentMeta:{readingTime:({minutes:Y})=>`${Y} min read`}},pages:{rss:{recentNotes:"Zuletzt bearbeitete Seiten",lastFewNotes:({count:Y})=>`Letzte ${Y} Seiten`},error:{title:"Nicht gefunden",notFound:"Diese Seite ist entweder nicht \xF6ffentlich oder existiert nicht."},folderContent:{folder:"Ordner",itemsUnderFolder:({count:Y})=>Y===1?"1 Datei in diesem Ordner.":`${Y} Dateien in diesem Ordner.`},tagContent:{tag:"Tag",tagIndex:"Tag-\xDCbersicht",itemsUnderTag:({count:Y})=>Y===1?"1 Datei mit diesem Tag.":`${Y} Dateien mit diesem Tag.`,showingFirst:({count:Y})=>`Die ersten ${Y} Tags werden angezeigt.`,totalTags:({count:Y})=>`${Y} Tags insgesamt.`}}},Vr={propertyDefaults:{title:"Naamloos",description:"Geen beschrijving gegeven."},components:{callout:{note:"Notitie",abstract:"Samenvatting",info:"Info",todo:"Te doen",tip:"Tip",success:"Succes",question:"Vraag",warning:"Waarschuwing",failure:"Mislukking",danger:"Gevaar",bug:"Bug",example:"Voorbeeld",quote:"Citaat"},backlinks:{title:"Backlinks",noBacklinksFound:"Geen backlinks gevonden"},themeToggle:{lightMode:"Lichte modus",darkMode:"Donkere modus"},explorer:{title:"Verkenner"},footer:{createdWith:"Gemaakt met"},graph:{title:"Grafiekweergave"},recentNotes:{title:"Recente notities",seeRemainingMore:({remaining:Y})=>`Zie ${Y} meer \u2192`},transcludes:{transcludeOf:({targetSlug:Y})=>`Invoeging van ${Y}`,linkToOriginal:"Link naar origineel"},search:{title:"Zoeken",searchBarPlaceholder:"Doorzoek de website"},tableOfContents:{title:"Inhoudsopgave"},contentMeta:{readingTime:({minutes:Y})=>Y===1?"1 minuut leestijd":`${Y} minuten leestijd`}},pages:{rss:{recentNotes:"Recente notities",lastFewNotes:({count:Y})=>`Laatste ${Y} notities`},error:{title:"Niet gevonden",notFound:"Deze pagina is niet zichtbaar of bestaat niet."},folderContent:{folder:"Map",itemsUnderFolder:({count:Y})=>Y===1?"1 item in deze map.":`${Y} items in deze map.`},tagContent:{tag:"Label",tagIndex:"Label-index",itemsUnderTag:({count:Y})=>Y===1?"1 item met dit label.":`${Y} items met dit label.`,showingFirst:({count:Y})=>Y===1?"Eerste label tonen.":`Eerste ${Y} labels tonen.`,totalTags:({count:Y})=>`${Y} labels gevonden.`}}},Ht={propertyDefaults:{title:"F\u0103r\u0103 titlu",description:"Nici o descriere furnizat\u0103"},components:{callout:{note:"Not\u0103",abstract:"Rezumat",info:"Informa\u021Bie",todo:"De f\u0103cut",tip:"Sfat",success:"Succes",question:"\xCEntrebare",warning:"Avertisment",failure:"E\u0219ec",danger:"Pericol",bug:"Bug",example:"Exemplu",quote:"Citat"},backlinks:{title:"Leg\u0103turi \xEEnapoi",noBacklinksFound:"Nu s-au g\u0103sit leg\u0103turi \xEEnapoi"},themeToggle:{lightMode:"Modul luminos",darkMode:"Modul \xEEntunecat"},explorer:{title:"Explorator"},footer:{createdWith:"Creat cu"},graph:{title:"Graf"},recentNotes:{title:"Noti\u021Be recente",seeRemainingMore:({remaining:Y})=>`Vezi \xEEnc\u0103 ${Y} \u2192`},transcludes:{transcludeOf:({targetSlug:Y})=>`Extras din ${Y}`,linkToOriginal:"Leg\u0103tur\u0103 c\u0103tre original"},search:{title:"C\u0103utare",searchBarPlaceholder:"Introduce\u021Bi termenul de c\u0103utare..."},tableOfContents:{title:"Cuprins"},contentMeta:{readingTime:({minutes:Y})=>Y==1?"lectur\u0103 de 1 minut":`lectur\u0103 de ${Y} minute`}},pages:{rss:{recentNotes:"Noti\u021Be recente",lastFewNotes:({count:Y})=>`Ultimele ${Y} noti\u021Be`},error:{title:"Pagina nu a fost g\u0103sit\u0103",notFound:"Fie aceast\u0103 pagin\u0103 este privat\u0103, fie nu exist\u0103."},folderContent:{folder:"Dosar",itemsUnderFolder:({count:Y})=>Y===1?"1 articol \xEEn acest dosar.":`${Y} elemente \xEEn acest dosar.`},tagContent:{tag:"Etichet\u0103",tagIndex:"Indexul etichetelor",itemsUnderTag:({count:Y})=>Y===1?"1 articol cu aceast\u0103 etichet\u0103.":`${Y} articole cu aceast\u0103 etichet\u0103.`,showingFirst:({count:Y})=>`Se afi\u0219eaz\u0103 primele ${Y} etichete.`,totalTags:({count:Y})=>`Au fost g\u0103site ${Y} etichete \xEEn total.`}}},xi={propertyDefaults:{title:"Sin t\xEDtulo",description:"Sin descripci\xF3n"},components:{callout:{note:"Nota",abstract:"Resumen",info:"Informaci\xF3n",todo:"Por hacer",tip:"Consejo",success:"\xC9xito",question:"Pregunta",warning:"Advertencia",failure:"Fallo",danger:"Peligro",bug:"Error",example:"Ejemplo",quote:"Cita"},backlinks:{title:"Enlaces de Retroceso",noBacklinksFound:"No se han encontrado enlaces traseros"},themeToggle:{lightMode:"Modo claro",darkMode:"Modo oscuro"},explorer:{title:"Explorador"},footer:{createdWith:"Creado con"},graph:{title:"Vista Gr\xE1fica"},recentNotes:{title:"Notas Recientes",seeRemainingMore:({remaining:Y})=>`Vea ${Y} m\xE1s \u2192`},transcludes:{transcludeOf:({targetSlug:Y})=>`Transcluido de ${Y}`,linkToOriginal:"Enlace al original"},search:{title:"Buscar",searchBarPlaceholder:"Busca algo"},tableOfContents:{title:"Tabla de Contenidos"},contentMeta:{readingTime:({minutes:Y})=>`${Y} min read`}},pages:{rss:{recentNotes:"Notas recientes",lastFewNotes:({count:Y})=>`\xDAltim\xE1s ${Y} notas`},error:{title:"No se encontr\xF3.",notFound:"Esta p\xE1gina es privada o no existe."},folderContent:{folder:"Carpeta",itemsUnderFolder:({count:Y})=>Y===1?"1 art\xEDculo en esta carpeta.":`${Y} art\xEDculos en esta carpeta.`},tagContent:{tag:"Etiqueta",tagIndex:"\xCDndice de Etiquetas",itemsUnderTag:({count:Y})=>Y===1?"1 art\xEDculo con esta etiqueta.":`${Y} art\xEDculos con esta etiqueta.`,showingFirst:({count:Y})=>`Mostrando las primeras ${Y} etiquetas.`,totalTags:({count:Y})=>`Se encontraron ${Y} etiquetas en total.`}}},or={propertyDefaults:{title:"\u063A\u064A\u0631 \u0645\u0639\u0646\u0648\u0646",description:"\u0644\u0645 \u064A\u062A\u0645 \u062A\u0642\u062F\u064A\u0645 \u0623\u064A \u0648\u0635\u0641"},components:{callout:{note:"\u0645\u0644\u0627\u062D\u0638\u0629",abstract:"\u0645\u0644\u062E\u0635",info:"\u0645\u0639\u0644\u0648\u0645\u0627\u062A",todo:"\u0644\u0644\u0642\u064A\u0627\u0645",tip:"\u0646\u0635\u064A\u062D\u0629",success:"\u0646\u062C\u0627\u062D",question:"\u0633\u0624\u0627\u0644",warning:"\u062A\u062D\u0630\u064A\u0631",failure:"\u0641\u0634\u0644",danger:"\u062E\u0637\u0631",bug:"\u062E\u0644\u0644",example:"\u0645\u062B\u0627\u0644",quote:"\u0627\u0642\u062A\u0628\u0627\u0633"},backlinks:{title:"\u0648\u0635\u0644\u0627\u062A \u0627\u0644\u0639\u0648\u062F\u0629",noBacklinksFound:"\u0644\u0627 \u064A\u0648\u062C\u062F \u0648\u0635\u0644\u0627\u062A \u0639\u0648\u062F\u0629"},themeToggle:{lightMode:"\u0627\u0644\u0648\u0636\u0639 \u0627\u0644\u0646\u0647\u0627\u0631\u064A",darkMode:"\u0627\u0644\u0648\u0636\u0639 \u0627\u0644\u0644\u064A\u0644\u064A"},explorer:{title:"\u0627\u0644\u0645\u0633\u062A\u0639\u0631\u0636"},footer:{createdWith:"\u0623\u064F\u0646\u0634\u0626 \u0628\u0627\u0633\u062A\u062E\u062F\u0627\u0645"},graph:{title:"\u0627\u0644\u062A\u0645\u062B\u064A\u0644 \u0627\u0644\u062A\u0641\u0627\u0639\u0644\u064A"},recentNotes:{title:"\u0622\u062E\u0631 \u0627\u0644\u0645\u0644\u0627\u062D\u0638\u0627\u062A",seeRemainingMore:({remaining:Y})=>`\u062A\u0635\u0641\u062D ${Y} \u0623\u0643\u062B\u0631 \u2192`},transcludes:{transcludeOf:({targetSlug:Y})=>`\u0645\u0642\u062A\u0628\u0633 \u0645\u0646 ${Y}`,linkToOriginal:"\u0648\u0635\u0644\u0629 \u0644\u0644\u0645\u0644\u0627\u062D\u0638\u0629 \u0627\u0644\u0631\u0626\u064A\u0633\u0629"},search:{title:"\u0628\u062D\u062B",searchBarPlaceholder:"\u0627\u0628\u062D\u062B \u0639\u0646 \u0634\u064A\u0621 \u0645\u0627"},tableOfContents:{title:"\u0641\u0647\u0631\u0633 \u0627\u0644\u0645\u062D\u062A\u0648\u064A\u0627\u062A"},contentMeta:{readingTime:({minutes:Y})=>Y==1?"\u062F\u0642\u064A\u0642\u0629 \u0623\u0648 \u0623\u0642\u0644 \u0644\u0644\u0642\u0631\u0627\u0621\u0629":Y==2?"\u062F\u0642\u064A\u0642\u062A\u0627\u0646 \u0644\u0644\u0642\u0631\u0627\u0621\u0629":`${Y} \u062F\u0642\u0627\u0626\u0642 \u0644\u0644\u0642\u0631\u0627\u0621\u0629`}},pages:{rss:{recentNotes:"\u0622\u062E\u0631 \u0627\u0644\u0645\u0644\u0627\u062D\u0638\u0627\u062A",lastFewNotes:({count:Y})=>`\u0622\u062E\u0631 ${Y} \u0645\u0644\u0627\u062D\u0638\u0629`},error:{title:"\u063A\u064A\u0631 \u0645\u0648\u062C\u0648\u062F",notFound:"\u0625\u0645\u0627 \u0623\u0646 \u0647\u0630\u0647 \u0627\u0644\u0635\u0641\u062D\u0629 \u062E\u0627\u0635\u0629 \u0623\u0648 \u063A\u064A\u0631 \u0645\u0648\u062C\u0648\u062F\u0629."},folderContent:{folder:"\u0645\u062C\u0644\u062F",itemsUnderFolder:({count:Y})=>Y===1?"\u064A\u0648\u062C\u062F \u0639\u0646\u0635\u0631 \u0648\u0627\u062D\u062F \u0641\u0642\u0637 \u062A\u062D\u062A \u0647\u0630\u0627 \u0627\u0644\u0645\u062C\u0644\u062F":`\u064A\u0648\u062C\u062F ${Y} \u0639\u0646\u0627\u0635\u0631 \u062A\u062D\u062A \u0647\u0630\u0627 \u0627\u0644\u0645\u062C\u0644\u062F.`},tagContent:{tag:"\u0627\u0644\u0648\u0633\u0645",tagIndex:"\u0645\u0624\u0634\u0631 \u0627\u0644\u0648\u0633\u0645",itemsUnderTag:({count:Y})=>Y===1?"\u064A\u0648\u062C\u062F \u0639\u0646\u0635\u0631 \u0648\u0627\u062D\u062F \u0641\u0642\u0637 \u062A\u062D\u062A \u0647\u0630\u0627 \u0627\u0644\u0648\u0633\u0645":`\u064A\u0648\u062C\u062F ${Y} \u0639\u0646\u0627\u0635\u0631 \u062A\u062D\u062A \u0647\u0630\u0627 \u0627\u0644\u0648\u0633\u0645.`,showingFirst:({count:Y})=>`\u0625\u0638\u0647\u0627\u0631 \u0623\u0648\u0644 ${Y} \u0623\u0648\u0633\u0645\u0629.`,totalTags:({count:Y})=>`\u064A\u0648\u062C\u062F ${Y} \u0623\u0648\u0633\u0645\u0629.`}}},Wr={propertyDefaults:{title:"\u0411\u0435\u0437 \u043D\u0430\u0437\u0432\u0438",description:"\u041E\u043F\u0438\u0441 \u043D\u0435 \u043D\u0430\u0434\u0430\u043D\u043E"},components:{callout:{note:"\u041F\u0440\u0438\u043C\u0456\u0442\u043A\u0430",abstract:"\u0410\u0431\u0441\u0442\u0440\u0430\u043A\u0442",info:"\u0406\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0456\u044F",todo:"\u0417\u0430\u0432\u0434\u0430\u043D\u043D\u044F",tip:"\u041F\u043E\u0440\u0430\u0434\u0430",success:"\u0423\u0441\u043F\u0456\u0445",question:"\u041F\u0438\u0442\u0430\u043D\u043D\u044F",warning:"\u041F\u043E\u043F\u0435\u0440\u0435\u0434\u0436\u0435\u043D\u043D\u044F",failure:"\u041D\u0435\u0432\u0434\u0430\u0447\u0430",danger:"\u041D\u0435\u0431\u0435\u0437\u043F\u0435\u043A\u0430",bug:"\u0411\u0430\u0433",example:"\u041F\u0440\u0438\u043A\u043B\u0430\u0434",quote:"\u0426\u0438\u0442\u0430\u0442\u0430"},backlinks:{title:"\u0417\u0432\u043E\u0440\u043E\u0442\u043D\u0456 \u043F\u043E\u0441\u0438\u043B\u0430\u043D\u043D\u044F",noBacklinksFound:"\u0417\u0432\u043E\u0440\u043E\u0442\u043D\u0438\u0445 \u043F\u043E\u0441\u0438\u043B\u0430\u043D\u044C \u043D\u0435 \u0437\u043D\u0430\u0439\u0434\u0435\u043D\u043E"},themeToggle:{lightMode:"\u0421\u0432\u0456\u0442\u043B\u0438\u0439 \u0440\u0435\u0436\u0438\u043C",darkMode:"\u0422\u0435\u043C\u043D\u0438\u0439 \u0440\u0435\u0436\u0438\u043C"},explorer:{title:"\u041F\u0440\u043E\u0432\u0456\u0434\u043D\u0438\u043A"},footer:{createdWith:"\u0421\u0442\u0432\u043E\u0440\u0435\u043D\u043E \u0437\u0430 \u0434\u043E\u043F\u043E\u043C\u043E\u0433\u043E\u044E"},graph:{title:"\u0412\u0438\u0433\u043B\u044F\u0434 \u0433\u0440\u0430\u0444\u0430"},recentNotes:{title:"\u041E\u0441\u0442\u0430\u043D\u043D\u0456 \u043D\u043E\u0442\u0430\u0442\u043A\u0438",seeRemainingMore:({remaining:Y})=>`\u041F\u0435\u0440\u0435\u0433\u043B\u044F\u043D\u0443\u0442\u0438 \u0449\u0435 ${Y} \u2192`},transcludes:{transcludeOf:({targetSlug:Y})=>`\u0412\u0438\u0434\u043E\u0431\u0443\u0442\u043E \u0437 ${Y}`,linkToOriginal:"\u041F\u043E\u0441\u0438\u043B\u0430\u043D\u043D\u044F \u043D\u0430 \u043E\u0440\u0438\u0433\u0456\u043D\u0430\u043B"},search:{title:"\u041F\u043E\u0448\u0443\u043A",searchBarPlaceholder:"\u0428\u0443\u043A\u0430\u0442\u0438 \u0449\u043E\u0441\u044C"},tableOfContents:{title:"\u0417\u043C\u0456\u0441\u0442"},contentMeta:{readingTime:({minutes:Y})=>`${Y} min read`}},pages:{rss:{recentNotes:"\u041E\u0441\u0442\u0430\u043D\u043D\u0456 \u043D\u043E\u0442\u0430\u0442\u043A\u0438",lastFewNotes:({count:Y})=>`\u041E\u0441\u0442\u0430\u043D\u043D\u0456 \u043D\u043E\u0442\u0430\u0442\u043A\u0438: ${Y}`},error:{title:"\u041D\u0435 \u0437\u043D\u0430\u0439\u0434\u0435\u043D\u043E",notFound:"\u0426\u044F \u0441\u0442\u043E\u0440\u0456\u043D\u043A\u0430 \u0430\u0431\u043E \u043F\u0440\u0438\u0432\u0430\u0442\u043D\u0430, \u0430\u0431\u043E \u043D\u0435 \u0456\u0441\u043D\u0443\u0454."},folderContent:{folder:"\u041F\u0430\u043F\u043A\u0430",itemsUnderFolder:({count:Y})=>Y===1?"\u0423 \u0446\u0456\u0439 \u043F\u0430\u043F\u0446\u0456 1 \u0435\u043B\u0435\u043C\u0435\u043D\u0442.":`\u0415\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432 \u0443 \u0446\u0456\u0439 \u043F\u0430\u043F\u0446\u0456: ${Y}.`},tagContent:{tag:"\u0422\u0435\u0433",tagIndex:"\u0406\u043D\u0434\u0435\u043A\u0441 \u0442\u0435\u0433\u0443",itemsUnderTag:({count:Y})=>Y===1?"1 \u0435\u043B\u0435\u043C\u0435\u043D\u0442 \u0437 \u0446\u0438\u043C \u0442\u0435\u0433\u043E\u043C.":`\u0415\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432 \u0437 \u0446\u0438\u043C \u0442\u0435\u0433\u043E\u043C: ${Y}.`,showingFirst:({count:Y})=>`\u041F\u043E\u043A\u0430\u0437 \u043F\u0435\u0440\u0448\u0438\u0445 ${Y} \u0442\u0435\u0433\u0456\u0432.`,totalTags:({count:Y})=>`\u0412\u0441\u044C\u043E\u0433\u043E \u0437\u043D\u0430\u0439\u0434\u0435\u043D\u043E \u0442\u0435\u0433\u0456\u0432: ${Y}.`}}},xr={propertyDefaults:{title:"\u0411\u0435\u0437 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u044F",description:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u043E\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442"},components:{callout:{note:"\u0417\u0430\u043C\u0435\u0442\u043A\u0430",abstract:"\u0420\u0435\u0437\u044E\u043C\u0435",info:"\u0418\u043D\u0444\u043E",todo:"\u0421\u0434\u0435\u043B\u0430\u0442\u044C",tip:"\u041F\u043E\u0434\u0441\u043A\u0430\u0437\u043A\u0430",success:"\u0423\u0441\u043F\u0435\u0445",question:"\u0412\u043E\u043F\u0440\u043E\u0441",warning:"\u041F\u0440\u0435\u0434\u0443\u043F\u0440\u0435\u0436\u0434\u0435\u043D\u0438\u0435",failure:"\u041D\u0435\u0443\u0434\u0430\u0447\u0430",danger:"\u041E\u043F\u0430\u0441\u043D\u043E\u0441\u0442\u044C",bug:"\u0411\u0430\u0433",example:"\u041F\u0440\u0438\u043C\u0435\u0440",quote:"\u0426\u0438\u0442\u0430\u0442\u0430"},backlinks:{title:"\u041E\u0431\u0440\u0430\u0442\u043D\u044B\u0435 \u0441\u0441\u044B\u043B\u043A\u0438",noBacklinksFound:"\u041E\u0431\u0440\u0430\u0442\u043D\u044B\u0435 \u0441\u0441\u044B\u043B\u043A\u0438 \u043E\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044E\u0442"},themeToggle:{lightMode:"\u0421\u0432\u0435\u0442\u043B\u044B\u0439 \u0440\u0435\u0436\u0438\u043C",darkMode:"\u0422\u0451\u043C\u043D\u044B\u0439 \u0440\u0435\u0436\u0438\u043C"},explorer:{title:"\u041F\u0440\u043E\u0432\u043E\u0434\u043D\u0438\u043A"},footer:{createdWith:"\u0421\u043E\u0437\u0434\u0430\u043D\u043E \u0441 \u043F\u043E\u043C\u043E\u0449\u044C\u044E"},graph:{title:"\u0412\u0438\u0434 \u0433\u0440\u0430\u0444\u0430"},recentNotes:{title:"\u041D\u0435\u0434\u0430\u0432\u043D\u0438\u0435 \u0437\u0430\u043C\u0435\u0442\u043A\u0438",seeRemainingMore:({remaining:Y})=>`\u041F\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u043E\u0441\u0442\u0430\u0432\u0448${Zt(Y,"\u0443\u044E\u0441\u044F","\u0438\u0435\u0441\u044F","\u0438\u0435\u0441\u044F")} ${Y} \u2192`},transcludes:{transcludeOf:({targetSlug:Y})=>`\u041F\u0435\u0440\u0435\u0445\u043E\u0434 \u0438\u0437 ${Y}`,linkToOriginal:"\u0421\u0441\u044B\u043B\u043A\u0430 \u043D\u0430 \u043E\u0440\u0438\u0433\u0438\u043D\u0430\u043B"},search:{title:"\u041F\u043E\u0438\u0441\u043A",searchBarPlaceholder:"\u041D\u0430\u0439\u0442\u0438 \u0447\u0442\u043E-\u043D\u0438\u0431\u0443\u0434\u044C"},tableOfContents:{title:"\u041E\u0433\u043B\u0430\u0432\u043B\u0435\u043D\u0438\u0435"},contentMeta:{readingTime:({minutes:Y})=>`\u0432\u0440\u0435\u043C\u044F \u0447\u0442\u0435\u043D\u0438\u044F ~${Y} \u043C\u0438\u043D.`}},pages:{rss:{recentNotes:"\u041D\u0435\u0434\u0430\u0432\u043D\u0438\u0435 \u0437\u0430\u043C\u0435\u0442\u043A\u0438",lastFewNotes:({count:Y})=>`\u041F\u043E\u0441\u043B\u0435\u0434\u043D${Zt(Y,"\u044F\u044F","\u0438\u0435","\u0438\u0435")} ${Y} \u0437\u0430\u043C\u0435\u0442${Zt(Y,"\u043A\u0430","\u043A\u0438","\u043E\u043A")}`},error:{title:"\u0421\u0442\u0440\u0430\u043D\u0438\u0446\u0430 \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u0430",notFound:"\u042D\u0442\u0430 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0430 \u043F\u0440\u0438\u0432\u0430\u0442\u043D\u0430\u044F \u0438\u043B\u0438 \u043D\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442"},folderContent:{folder:"\u041F\u0430\u043F\u043A\u0430",itemsUnderFolder:({count:Y})=>`\u0432 \u044D\u0442\u043E\u0439 \u043F\u0430\u043F\u043A\u0435 ${Y} \u044D\u043B\u0435\u043C\u0435\u043D\u0442${Zt(Y,"","\u0430","\u043E\u0432")}`},tagContent:{tag:"\u0422\u0435\u0433",tagIndex:"\u0418\u043D\u0434\u0435\u043A\u0441 \u0442\u0435\u0433\u043E\u0432",itemsUnderTag:({count:Y})=>`\u0441 \u044D\u0442\u0438\u043C \u0442\u0435\u0433\u043E\u043C ${Y} \u044D\u043B\u0435\u043C\u0435\u043D\u0442${Zt(Y,"","\u0430","\u043E\u0432")}`,showingFirst:({count:Y})=>`\u041F\u043E\u043A\u0430\u0437\u044B\u0432\u0430${Zt(Y,"\u0435\u0442\u0441\u044F","\u044E\u0442\u0441\u044F","\u044E\u0442\u0441\u044F")} ${Y} \u0442\u0435\u0433${Zt(Y,"","\u0430","\u043E\u0432")}`,totalTags:({count:Y})=>`\u0412\u0441\u0435\u0433\u043E ${Y} \u0442\u0435\u0433${Zt(Y,"","\u0430","\u043E\u0432")}`}}};function Zt(Y,_e,Fe,Ue){let je=Y%100,mt=je%10;return je>=10&&je<=20?Ue:mt>1&&mt<5?Fe:mt==1?_e:Ue}var dr={propertyDefaults:{title:"\uC81C\uBAA9 \uC5C6\uC74C",description:"\uC124\uBA85 \uC5C6\uC74C"},components:{callout:{note:"\uB178\uD2B8",abstract:"\uAC1C\uC694",info:"\uC815\uBCF4",todo:"\uD560\uC77C",tip:"\uD301",success:"\uC131\uACF5",question:"\uC9C8\uBB38",warning:"\uC8FC\uC758",failure:"\uC2E4\uD328",danger:"\uC704\uD5D8",bug:"\uBC84\uADF8",example:"\uC608\uC2DC",quote:"\uC778\uC6A9"},backlinks:{title:"\uBC31\uB9C1\uD06C",noBacklinksFound:"\uBC31\uB9C1\uD06C\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."},themeToggle:{lightMode:"\uB77C\uC774\uD2B8 \uBAA8\uB4DC",darkMode:"\uB2E4\uD06C \uBAA8\uB4DC"},explorer:{title:"\uD0D0\uC0C9\uAE30"},footer:{createdWith:"Created with"},graph:{title:"\uADF8\uB798\uD504 \uBDF0"},recentNotes:{title:"\uCD5C\uADFC \uAC8C\uC2DC\uAE00",seeRemainingMore:({remaining:Y})=>`${Y}\uAC74 \uB354\uBCF4\uAE30 \u2192`},transcludes:{transcludeOf:({targetSlug:Y})=>`${Y}\uC758 \uD3EC\uD568`,linkToOriginal:"\uC6D0\uBCF8 \uB9C1\uD06C"},search:{title:"\uAC80\uC0C9",searchBarPlaceholder:"\uAC80\uC0C9\uC5B4\uB97C \uC785\uB825\uD558\uC138\uC694"},tableOfContents:{title:"\uBAA9\uCC28"},contentMeta:{readingTime:({minutes:Y})=>`${Y} min read`}},pages:{rss:{recentNotes:"\uCD5C\uADFC \uAC8C\uC2DC\uAE00",lastFewNotes:({count:Y})=>`\uCD5C\uADFC ${Y} \uAC74`},error:{title:"Not Found",notFound:"\uD398\uC774\uC9C0\uAC00 \uC874\uC7AC\uD558\uC9C0 \uC54A\uAC70\uB098 \uBE44\uACF5\uAC1C \uC124\uC815\uC774 \uB418\uC5B4 \uC788\uC2B5\uB2C8\uB2E4."},folderContent:{folder:"\uD3F4\uB354",itemsUnderFolder:({count:Y})=>`${Y}\uAC74\uC758 \uD56D\uBAA9`},tagContent:{tag:"\uD0DC\uADF8",tagIndex:"\uD0DC\uADF8 \uBAA9\uB85D",itemsUnderTag:({count:Y})=>`${Y}\uAC74\uC758 \uD56D\uBAA9`,showingFirst:({count:Y})=>`\uCC98\uC74C ${Y}\uAC1C\uC758 \uD0DC\uADF8`,totalTags:({count:Y})=>`\uCD1D ${Y}\uAC1C\uC758 \uD0DC\uADF8\uB97C \uCC3E\uC558\uC2B5\uB2C8\uB2E4.`}}},nr={propertyDefaults:{title:"\u65E0\u9898",description:"\u65E0\u63CF\u8FF0"},components:{callout:{note:"\u7B14\u8BB0",abstract:"\u6458\u8981",info:"\u63D0\u793A",todo:"\u5F85\u529E",tip:"\u63D0\u793A",success:"\u6210\u529F",question:"\u95EE\u9898",warning:"\u8B66\u544A",failure:"\u5931\u8D25",danger:"\u5371\u9669",bug:"\u9519\u8BEF",example:"\u793A\u4F8B",quote:"\u5F15\u7528"},backlinks:{title:"\u53CD\u5411\u94FE\u63A5",noBacklinksFound:"\u65E0\u6CD5\u627E\u5230\u53CD\u5411\u94FE\u63A5"},themeToggle:{lightMode:"\u4EAE\u8272\u6A21\u5F0F",darkMode:"\u6697\u8272\u6A21\u5F0F"},explorer:{title:"\u63A2\u7D22"},footer:{createdWith:"Created with"},graph:{title:"\u5173\u7CFB\u56FE\u8C31"},recentNotes:{title:"\u6700\u8FD1\u7684\u7B14\u8BB0",seeRemainingMore:({remaining:Y})=>`\u67E5\u770B\u66F4\u591A${Y}\u7BC7\u7B14\u8BB0 \u2192`},transcludes:{transcludeOf:({targetSlug:Y})=>`\u5305\u542B${Y}`,linkToOriginal:"\u6307\u5411\u539F\u59CB\u7B14\u8BB0\u7684\u94FE\u63A5"},search:{title:"\u641C\u7D22",searchBarPlaceholder:"\u641C\u7D22\u4E9B\u4EC0\u4E48"},tableOfContents:{title:"\u76EE\u5F55"},contentMeta:{readingTime:({minutes:Y})=>`${Y}\u5206\u949F\u9605\u8BFB`}},pages:{rss:{recentNotes:"\u6700\u8FD1\u7684\u7B14\u8BB0",lastFewNotes:({count:Y})=>`\u6700\u8FD1\u7684${Y}\u6761\u7B14\u8BB0`},error:{title:"\u65E0\u6CD5\u627E\u5230",notFound:"\u79C1\u6709\u7B14\u8BB0\u6216\u7B14\u8BB0\u4E0D\u5B58\u5728\u3002"},folderContent:{folder:"\u6587\u4EF6\u5939",itemsUnderFolder:({count:Y})=>`\u6B64\u6587\u4EF6\u5939\u4E0B\u6709${Y}\u6761\u7B14\u8BB0\u3002`},tagContent:{tag:"\u6807\u7B7E",tagIndex:"\u6807\u7B7E\u7D22\u5F15",itemsUnderTag:({count:Y})=>`\u6B64\u6807\u7B7E\u4E0B\u6709${Y}\u6761\u7B14\u8BB0\u3002`,showingFirst:({count:Y})=>`\u663E\u793A\u524D${Y}\u4E2A\u6807\u7B7E\u3002`,totalTags:({count:Y})=>`\u603B\u5171\u6709${Y}\u4E2A\u6807\u7B7E\u3002`}}},qt={propertyDefaults:{title:"Kh\xF4ng c\xF3 ti\xEAu \u0111\u1EC1",description:"Kh\xF4ng c\xF3 m\xF4 t\u1EA3 \u0111\u01B0\u1EE3c cung c\u1EA5p"},components:{callout:{note:"Ghi Ch\xFA",abstract:"T\xF3m T\u1EAFt",info:"Th\xF4ng tin",todo:"C\u1EA7n L\xE0m",tip:"G\u1EE3i \xDD",success:"Th\xE0nh C\xF4ng",question:"Nghi V\u1EA5n",warning:"C\u1EA3nh B\xE1o",failure:"Th\u1EA5t B\u1EA1i",danger:"Nguy Hi\u1EC3m",bug:"L\u1ED7i",example:"V\xED D\u1EE5",quote:"Tr\xEDch D\u1EABn"},backlinks:{title:"Li\xEAn K\u1EBFt Ng\u01B0\u1EE3c",noBacklinksFound:"Kh\xF4ng c\xF3 li\xEAn k\u1EBFt ng\u01B0\u1EE3c \u0111\u01B0\u1EE3c t\xECm th\u1EA5y"},themeToggle:{lightMode:"S\xE1ng",darkMode:"T\u1ED1i"},explorer:{title:"Trong b\xE0i n\xE0y"},footer:{createdWith:"\u0110\u01B0\u1EE3c t\u1EA1o b\u1EDFi"},graph:{title:"Bi\u1EC3u \u0110\u1ED3"},recentNotes:{title:"B\xE0i vi\u1EBFt g\u1EA7n \u0111\xE2y",seeRemainingMore:({remaining:Y})=>`Xem ${Y} th\xEAm \u2192`},transcludes:{transcludeOf:({targetSlug:Y})=>`Bao g\u1ED3m ${Y}`,linkToOriginal:"Li\xEAn K\u1EBFt G\u1ED1c"},search:{title:"T\xECm Ki\u1EBFm",searchBarPlaceholder:"T\xECm ki\u1EBFm th\xF4ng tin"},tableOfContents:{title:"B\u1EA3ng N\u1ED9i Dung"},contentMeta:{readingTime:({minutes:Y})=>`\u0111\u1ECDc ${Y} ph\xFAt`}},pages:{rss:{recentNotes:"Nh\u1EEFng b\xE0i g\u1EA7n \u0111\xE2y",lastFewNotes:({count:Y})=>`${Y} B\xE0i g\u1EA7n \u0111\xE2y`},error:{title:"Kh\xF4ng T\xECm Th\u1EA5y",notFound:"Trang n\xE0y \u0111\u01B0\u1EE3c b\u1EA3o m\u1EADt ho\u1EB7c kh\xF4ng t\u1ED3n t\u1EA1i."},folderContent:{folder:"Th\u01B0 M\u1EE5c",itemsUnderFolder:({count:Y})=>Y===1?"1 m\u1EE5c trong th\u01B0 m\u1EE5c n\xE0y.":`${Y} m\u1EE5c trong th\u01B0 m\u1EE5c n\xE0y.`},tagContent:{tag:"Th\u1EBB",tagIndex:"Th\u1EBB M\u1EE5c L\u1EE5c",itemsUnderTag:({count:Y})=>Y===1?"1 m\u1EE5c g\u1EAFn th\u1EBB n\xE0y.":`${Y} m\u1EE5c g\u1EAFn th\u1EBB n\xE0y.`,showingFirst:({count:Y})=>`Hi\u1EC3n th\u1ECB tr\u01B0\u1EDBc ${Y} th\u1EBB.`,totalTags:({count:Y})=>`T\xECm th\u1EA5y ${Y} th\u1EBB t\u1ED5ng c\u1ED9ng.`}}},Yr={propertyDefaults:{title:"Sem t\xEDtulo",description:"Sem descri\xE7\xE3o"},components:{callout:{note:"Nota",abstract:"Abstrato",info:"Info",todo:"Pend\xEAncia",tip:"Dica",success:"Sucesso",question:"Pergunta",warning:"Aviso",failure:"Falha",danger:"Perigo",bug:"Bug",example:"Exemplo",quote:"Cita\xE7\xE3o"},backlinks:{title:"Backlinks",noBacklinksFound:"Sem backlinks encontrados"},themeToggle:{lightMode:"Tema claro",darkMode:"Tema escuro"},explorer:{title:"Explorador"},footer:{createdWith:"Criado com"},graph:{title:"Vis\xE3o de gr\xE1fico"},recentNotes:{title:"Notas recentes",seeRemainingMore:({remaining:Y})=>`Veja mais ${Y} \u2192`},transcludes:{transcludeOf:({targetSlug:Y})=>`Transcrever de ${Y}`,linkToOriginal:"Link ao original"},search:{title:"Pesquisar",searchBarPlaceholder:"Pesquisar por algo"},tableOfContents:{title:"Sum\xE1rio"},contentMeta:{readingTime:({minutes:Y})=>`Leitura de ${Y} min`}},pages:{rss:{recentNotes:"Notas recentes",lastFewNotes:({count:Y})=>`\xDAltimas ${Y} notas`},error:{title:"N\xE3o encontrado",notFound:"Esta p\xE1gina \xE9 privada ou n\xE3o existe."},folderContent:{folder:"Arquivo",itemsUnderFolder:({count:Y})=>Y===1?"1 item mneste arquivo.":`${Y} items neste arquivo.`},tagContent:{tag:"Tag",tagIndex:"Sum\xE1rio de Tags",itemsUnderTag:({count:Y})=>Y===1?"1 item com esta tag.":`${Y} items com esta tag.`,showingFirst:({count:Y})=>`Mostrando as ${Y} primeiras tags.`,totalTags:({count:Y})=>`Encontradas ${Y} tags.`}}},ii={propertyDefaults:{title:"N\xE9vtelen",description:"Nincs le\xEDr\xE1s"},components:{callout:{note:"Jegyzet",abstract:"Abstract",info:"Inform\xE1ci\xF3",todo:"Tennival\xF3",tip:"Tipp",success:"Siker",question:"K\xE9rd\xE9s",warning:"Figyelmeztet\xE9s",failure:"Hiba",danger:"Vesz\xE9ly",bug:"Bug",example:"P\xE9lda",quote:"Id\xE9zet"},backlinks:{title:"Visszautal\xE1sok",noBacklinksFound:"Nincs visszautal\xE1s"},themeToggle:{lightMode:"Vil\xE1gos m\xF3d",darkMode:"S\xF6t\xE9t m\xF3d"},explorer:{title:"F\xE1jlb\xF6ng\xE9sz\u0151"},footer:{createdWith:"K\xE9sz\xEDtve ezzel:"},graph:{title:"Grafikonn\xE9zet"},recentNotes:{title:"Legut\xF3bbi jegyzetek",seeRemainingMore:({remaining:Y})=>`${Y} tov\xE1bbi megtekint\xE9se \u2192`},transcludes:{transcludeOf:({targetSlug:Y})=>`${Y} \xE1thivatkoz\xE1sa`,linkToOriginal:"Hivatkoz\xE1s az eredetire"},search:{title:"Keres\xE9s",searchBarPlaceholder:"Keress valamire"},tableOfContents:{title:"Tartalomjegyz\xE9k"},contentMeta:{readingTime:({minutes:Y})=>`${Y} perces olvas\xE1s`}},pages:{rss:{recentNotes:"Legut\xF3bbi jegyzetek",lastFewNotes:({count:Y})=>`Legut\xF3bbi ${Y} jegyzet`},error:{title:"Nem tal\xE1lhat\xF3",notFound:"Ez a lap vagy priv\xE1t vagy nem l\xE9tezik."},folderContent:{folder:"Mappa",itemsUnderFolder:({count:Y})=>`Ebben a mapp\xE1ban ${Y} elem tal\xE1lhat\xF3.`},tagContent:{tag:"C\xEDmke",tagIndex:"C\xEDmke index",itemsUnderTag:({count:Y})=>`${Y} elem tal\xE1lhat\xF3 ezzel a c\xEDmk\xE9vel.`,showingFirst:({count:Y})=>`Els\u0151 ${Y} c\xEDmke megjelen\xEDtve.`,totalTags:({count:Y})=>`\xD6sszesen ${Y} c\xEDmke tal\xE1lhat\xF3.`}}},ki={"en-US":Li,"en-GB":jr,"fr-FR":Ir,"it-IT":gr,"ja-JP":Zr,"de-DE":vr,"nl-NL":Vr,"nl-BE":Vr,"ro-RO":Ht,"ro-MD":Ht,"es-ES":xi,"ar-SA":or,"ar-AE":or,"ar-QA":or,"ar-BH":or,"ar-KW":or,"ar-OM":or,"ar-YE":or,"ar-IR":or,"ar-SY":or,"ar-IQ":or,"ar-JO":or,"ar-PL":or,"ar-LB":or,"ar-EG":or,"ar-SD":or,"ar-LY":or,"ar-MA":or,"ar-TN":or,"ar-DZ":or,"ar-MR":or,"uk-UA":Wr,"ru-RU":xr,"ko-KR":dr,"zh-CN":nr,"vi-VN":qt,"pt-BR":Yr,"hu-HU":ii},zn="en-US",sa=Y=>ki[Y??zn],un;function ja(Y){return typeof Y<"u"?Y:!0}function fs(Y){let _e=Array(Y);for(let Fe=0;Fe<Y;Fe++)_e[Fe]=Vn();return _e}function Vn(){return Object.create(null)}function Wt(Y,_e){return _e.length-Y.length}function ir(Y){return typeof Y=="string"}function Rr(Y){return typeof Y=="object"}function Ii(Y){return typeof Y=="function"}function Ni(Y,_e){var Fe=mi;if(Y&&(_e&&(Y=Kn(Y,_e)),this.H&&(Y=Kn(Y,this.H)),this.J&&1<Y.length&&(Y=Kn(Y,this.J)),Fe||Fe==="")){if(_e=Y.split(Fe),this.filter){Y=this.filter,Fe=_e.length;let Ue=[];for(let je=0,mt=0;je<Fe;je++){let Nt=_e[je];Nt&&!Y[Nt]&&(Ue[mt++]=Nt)}Y=Ue}else Y=_e;return Y}return Y}var mi=/[\p{Z}\p{S}\p{P}\p{C}]+/u,Qi=/[\u0300-\u036f]/g;function Gn(Y,_e){let Fe=Object.keys(Y),Ue=Fe.length,je=[],mt="",Nt=0;for(let It=0,rr,wr;It<Ue;It++)rr=Fe[It],(wr=Y[rr])?(je[Nt++]=Zi(_e?"(?!\\b)"+rr+"(\\b|_)":rr),je[Nt++]=wr):mt+=(mt?"|":"")+rr;return mt&&(je[Nt++]=Zi(_e?"(?!\\b)("+mt+")(\\b|_)":"("+mt+")"),je[Nt]=""),je}function Kn(Y,_e){for(let Fe=0,Ue=_e.length;Fe<Ue&&(Y=Y.replace(_e[Fe],_e[Fe+1]),Y);Fe+=2);return Y}function Zi(Y){return new RegExp(Y,"g")}function oa(Y){let _e="",Fe="";for(let Ue=0,je=Y.length,mt;Ue<je;Ue++)(mt=Y[Ue])!==Fe&&(_e+=Fe=mt);return _e}var li={encode:nn,F:!1,G:""};function nn(Y){return Ni.call(this,(""+Y).toLowerCase(),!1)}var Pi={},_i={};function Nn(Y){an(Y,"add"),an(Y,"append"),an(Y,"search"),an(Y,"update"),an(Y,"remove")}function an(Y,_e){Y[_e+"Async"]=function(){let Fe=this,Ue=arguments;var je=Ue[Ue.length-1];let mt;return Ii(je)&&(mt=je,delete Ue[Ue.length-1]),je=new Promise(function(Nt){setTimeout(function(){Fe.async=!0;let It=Fe[_e].apply(Fe,Ue);Fe.async=!1,Nt(It)})}),mt?(je.then(mt),this):je}}function ma(Y,_e,Fe,Ue){let je=Y.length,mt=[],Nt,It,rr=0;Ue&&(Ue=[]);for(let wr=je-1;0<=wr;wr--){let ni=Y[wr],Sr=ni.length,ti=Vn(),ar=!Nt;for(let cr=0;cr<Sr;cr++){let yi=ni[cr],qi=yi.length;if(qi)for(let da=0,$a,ya;da<qi;da++)if(ya=yi[da],Nt){if(Nt[ya]){if(!wr){if(Fe)Fe--;else if(mt[rr++]=ya,rr===_e)return mt}(wr||Ue)&&(ti[ya]=1),ar=!0}if(Ue&&($a=(It[ya]||0)+1,It[ya]=$a,$a<je)){let Ha=Ue[$a-2]||(Ue[$a-2]=[]);Ha[Ha.length]=ya}}else ti[ya]=1}if(Ue)Nt||(It=ti);else if(!ar)return[];Nt=ti}if(Ue)for(let wr=Ue.length-1,ni,Sr;0<=wr;wr--){ni=Ue[wr],Sr=ni.length;for(let ti=0,ar;ti<Sr;ti++)if(ar=ni[ti],!Nt[ar]){if(Fe)Fe--;else if(mt[rr++]=ar,rr===_e)return mt;Nt[ar]=1}}return mt}function Ls(Y,_e){let Fe=Vn(),Ue=Vn(),je=[];for(let mt=0;mt<Y.length;mt++)Fe[Y[mt]]=1;for(let mt=0,Nt;mt<_e.length;mt++){Nt=_e[mt];for(let It=0,rr;It<Nt.length;It++)rr=Nt[It],Fe[rr]&&!Ue[rr]&&(Ue[rr]=1,je[je.length]=rr)}return je}function Mn(Y){this.l=Y!==!0&&Y,this.cache=Vn(),this.h=[]}function oo(Y,_e,Fe){Rr(Y)&&(Y=Y.query);let Ue=this.cache.get(Y);return Ue||(Ue=this.search(Y,_e,Fe),this.cache.set(Y,Ue)),Ue}Mn.prototype.set=function(Y,_e){if(!this.cache[Y]){var Fe=this.h.length;for(Fe===this.l?delete this.cache[this.h[Fe-1]]:Fe++,--Fe;0<Fe;Fe--)this.h[Fe]=this.h[Fe-1];this.h[0]=Y}this.cache[Y]=_e},Mn.prototype.get=function(Y){let _e=this.cache[Y];if(this.l&&_e&&(Y=this.h.indexOf(Y))){let Fe=this.h[Y-1];this.h[Y-1]=this.h[Y],this.h[Y]=Fe}return _e};var Gs={memory:{charset:"latin:extra",D:3,B:4,m:!1},performance:{D:3,B:3,s:!1,context:{depth:2,D:1}},match:{charset:"latin:extra",G:"reverse"},score:{charset:"latin:advanced",D:20,B:3,context:{depth:3,D:9}},default:{}};function ji(Y,_e,Fe,Ue,je,mt,Nt,It){setTimeout(function(){let rr=Y(Fe?Fe+"."+Ue:Ue,JSON.stringify(Nt));rr&&rr.then?rr.then(function(){_e.export(Y,_e,Fe,je,mt+1,It)}):_e.export(Y,_e,Fe,je,mt+1,It)})}function Ao(Y,_e){if(!(this instanceof Ao))return new Ao(Y);var Fe;if(Y){ir(Y)?Y=Gs[Y]:(Fe=Y.preset)&&(Y=Object.assign({},Fe[Fe],Y)),Fe=Y.charset;var Ue=Y.lang;ir(Fe)&&(Fe.indexOf(":")===-1&&(Fe+=":default"),Fe=_i[Fe]),ir(Ue)&&(Ue=Pi[Ue])}else Y={};let je,mt,Nt=Y.context||{};if(this.encode=Y.encode||Fe&&Fe.encode||nn,this.register=_e||Vn(),this.D=je=Y.resolution||9,this.G=_e=Fe&&Fe.G||Y.tokenize||"strict",this.depth=_e==="strict"&&Nt.depth,this.l=ja(Nt.bidirectional),this.s=mt=ja(Y.optimize),this.m=ja(Y.fastupdate),this.B=Y.minlength||1,this.C=Y.boost,this.map=mt?fs(je):Vn(),this.A=je=Nt.resolution||1,this.h=mt?fs(je):Vn(),this.F=Fe&&Fe.F||Y.rtl,this.H=(_e=Y.matcher||Ue&&Ue.H)&&Gn(_e,!1),this.J=(_e=Y.stemmer||Ue&&Ue.J)&&Gn(_e,!0),Fe=_e=Y.filter||Ue&&Ue.filter){Fe=_e,Ue=Vn();for(let It=0,rr=Fe.length;It<rr;It++)Ue[Fe[It]]=1;Fe=Ue}this.filter=Fe,this.cache=(_e=Y.cache)&&new Mn(_e)}un=Ao.prototype,un.append=function(Y,_e){return this.add(Y,_e,!0)},un.add=function(Y,_e,Fe,Ue){if(_e&&(Y||Y===0)){if(!Ue&&!Fe&&this.register[Y])return this.update(Y,_e);if(_e=this.encode(_e),Ue=_e.length){let wr=Vn(),ni=Vn(),Sr=this.depth,ti=this.D;for(let ar=0;ar<Ue;ar++){let cr=_e[this.F?Ue-1-ar:ar];var je=cr.length;if(cr&&je>=this.B&&(Sr||!ni[cr])){var mt=dl(ti,Ue,ar),Nt="";switch(this.G){case"full":if(2<je){for(mt=0;mt<je;mt++)for(var It=je;It>mt;It--)if(It-mt>=this.B){var rr=dl(ti,Ue,ar,je,mt);Nt=cr.substring(mt,It),Un(this,ni,Nt,rr,Y,Fe)}break}case"reverse":if(1<je){for(It=je-1;0<It;It--)Nt=cr[It]+Nt,Nt.length>=this.B&&Un(this,ni,Nt,dl(ti,Ue,ar,je,It),Y,Fe);Nt=""}case"forward":if(1<je){for(It=0;It<je;It++)Nt+=cr[It],Nt.length>=this.B&&Un(this,ni,Nt,mt,Y,Fe);break}default:if(this.C&&(mt=Math.min(mt/this.C(_e,cr,ar)|0,ti-1)),Un(this,ni,cr,mt,Y,Fe),Sr&&1<Ue&&ar<Ue-1){for(je=Vn(),Nt=this.A,mt=cr,It=Math.min(Sr+1,Ue-ar),je[mt]=1,rr=1;rr<It;rr++)if((cr=_e[this.F?Ue-1-ar-rr:ar+rr])&&cr.length>=this.B&&!je[cr]){je[cr]=1;let yi=this.l&&cr>mt;Un(this,wr,yi?mt:cr,dl(Nt+(Ue/2>Nt?0:1),Ue,ar,It-1,rr-1),Y,Fe,yi?cr:mt)}}}}}this.m||(this.register[Y]=1)}}return this};function dl(Y,_e,Fe,Ue,je){return Fe&&1<Y?_e+(Ue||0)<=Y?Fe+(je||0):(Y-1)/(_e+(Ue||0))*(Fe+(je||0))+1|0:0}function Un(Y,_e,Fe,Ue,je,mt,Nt){let It=Nt?Y.h:Y.map;(!_e[Fe]||Nt&&!_e[Fe][Nt])&&(Y.s&&(It=It[Ue]),Nt?(_e=_e[Fe]||(_e[Fe]=Vn()),_e[Nt]=1,It=It[Nt]||(It[Nt]=Vn())):_e[Fe]=1,It=It[Fe]||(It[Fe]=[]),Y.s||(It=It[Ue]||(It[Ue]=[])),mt&&It.includes(je)||(It[It.length]=je,Y.m&&(Y=Y.register[je]||(Y.register[je]=[]),Y[Y.length]=It)))}un.search=function(Y,_e,Fe){Fe||(!_e&&Rr(Y)?(Fe=Y,Y=Fe.query):Rr(_e)&&(Fe=_e));let Ue=[],je,mt,Nt=0;if(Fe){Y=Fe.query||Y,_e=Fe.limit,Nt=Fe.offset||0;var It=Fe.context;mt=Fe.suggest}if(Y&&(Y=this.encode(""+Y),je=Y.length,1<je)){Fe=Vn();var rr=[];for(let ni=0,Sr=0,ti;ni<je;ni++)if((ti=Y[ni])&&ti.length>=this.B&&!Fe[ti])if(this.s||mt||this.map[ti])rr[Sr++]=ti,Fe[ti]=1;else return Ue;Y=rr,je=Y.length}if(!je)return Ue;_e||(_e=100),It=this.depth&&1<je&&It!==!1,Fe=0;let wr;It?(wr=Y[0],Fe=1):1<je&&Y.sort(Wt);for(let ni,Sr;Fe<je;Fe++){if(Sr=Y[Fe],It?(ni=Qa(this,Ue,mt,_e,Nt,je===2,Sr,wr),mt&&ni===!1&&Ue.length||(wr=Sr)):ni=Qa(this,Ue,mt,_e,Nt,je===1,Sr),ni)return ni;if(mt&&Fe===je-1){if(rr=Ue.length,!rr){if(It){It=0,Fe=-1;continue}return Ue}if(rr===1)return Rs(Ue[0],_e,Nt)}}return ma(Ue,_e,Nt,mt)};function Qa(Y,_e,Fe,Ue,je,mt,Nt,It){let rr=[],wr=It?Y.h:Y.map;if(Y.s||(wr=Ma(wr,Nt,It,Y.l)),wr){let ni=0,Sr=Math.min(wr.length,It?Y.A:Y.D);for(let ti=0,ar=0,cr,yi;ti<Sr&&!((cr=wr[ti])&&(Y.s&&(cr=Ma(cr,Nt,It,Y.l)),je&&cr&&mt&&(yi=cr.length,yi<=je?(je-=yi,cr=null):(cr=cr.slice(je),je=0)),cr&&(rr[ni++]=cr,mt&&(ar+=cr.length,ar>=Ue))));ti++);if(ni){if(mt)return Rs(rr,Ue,0);_e[_e.length]=rr;return}}return!Fe&&rr}function Rs(Y,_e,Fe){return Y=Y.length===1?Y[0]:[].concat.apply([],Y),Fe||Y.length>_e?Y.slice(Fe,Fe+_e):Y}function Ma(Y,_e,Fe,Ue){return Fe?(Ue=Ue&&_e>Fe,Y=(Y=Y[Ue?_e:Fe])&&Y[Ue?Fe:_e]):Y=Y[_e],Y}un.contain=function(Y){return!!this.register[Y]},un.update=function(Y,_e){return this.remove(Y).add(Y,_e)},un.remove=function(Y,_e){let Fe=this.register[Y];if(Fe){if(this.m)for(let Ue=0,je;Ue<Fe.length;Ue++)je=Fe[Ue],je.splice(je.indexOf(Y),1);else Pl(this.map,Y,this.D,this.s),this.depth&&Pl(this.h,Y,this.A,this.s);if(_e||delete this.register[Y],this.cache){_e=this.cache;for(let Ue=0,je,mt;Ue<_e.h.length;Ue++)mt=_e.h[Ue],je=_e.cache[mt],je.includes(Y)&&(_e.h.splice(Ue--,1),delete _e.cache[mt])}}return this};function Pl(Y,_e,Fe,Ue,je){let mt=0;if(Y.constructor===Array)if(je)_e=Y.indexOf(_e),_e!==-1?1<Y.length&&(Y.splice(_e,1),mt++):mt++;else{je=Math.min(Y.length,Fe);for(let Nt=0,It;Nt<je;Nt++)(It=Y[Nt])&&(mt=Pl(It,_e,Fe,Ue,je),Ue||mt||delete Y[Nt])}else for(let Nt in Y)(mt=Pl(Y[Nt],_e,Fe,Ue,je))||delete Y[Nt];return mt}un.searchCache=oo,un.export=function(Y,_e,Fe,Ue,je,mt){let Nt=!0;typeof mt>"u"&&(Nt=new Promise(wr=>{mt=wr}));let It,rr;switch(je||(je=0)){case 0:if(It="reg",this.m){rr=Vn();for(let wr in this.register)rr[wr]=1}else rr=this.register;break;case 1:It="cfg",rr={doc:0,opt:this.s?1:0};break;case 2:It="map",rr=this.map;break;case 3:It="ctx",rr=this.h;break;default:typeof Fe>"u"&&mt&&mt();return}return ji(Y,_e||this,Fe,It,Ue,je,rr,mt),Nt},un.import=function(Y,_e){if(_e)switch(ir(_e)&&(_e=JSON.parse(_e)),Y){case"cfg":this.s=!!_e.opt;break;case"reg":this.m=!1,this.register=_e;break;case"map":this.map=_e;break;case"ctx":this.h=_e}},Nn(Ao.prototype);function hs(Y){Y=Y.data;var _e=self._index;let Fe=Y.args;var Ue=Y.task;switch(Ue){case"init":Ue=Y.options||{},Y=Y.factory,_e=Ue.encode,Ue.cache=!1,_e&&_e.indexOf("function")===0&&(Ue.encode=Function("return "+_e)()),Y?(Function("return "+Y)()(self),self._index=new self.FlexSearch.Index(Ue),delete self.FlexSearch):self._index=new Ao(Ue);break;default:Y=Y.id,_e=_e[Ue].apply(_e,Fe),postMessage(Ue==="search"?{id:Y,msg:_e}:{id:Y})}}var Wn=0;function el(Y){if(!(this instanceof el))return new el(Y);var _e;Y?Ii(_e=Y.encode)&&(Y.encode=_e.toString()):Y={},(_e=(self||window)._factory)&&(_e=_e.toString());let Fe=typeof window>"u"&&self.exports,Ue=this;this.o=kh(_e,Fe,Y.worker),this.h=Vn(),this.o&&(Fe?this.o.on("message",function(je){Ue.h[je.id](je.msg),delete Ue.h[je.id]}):this.o.onmessage=function(je){je=je.data,Ue.h[je.id](je.msg),delete Ue.h[je.id]},this.o.postMessage({task:"init",factory:_e,options:Y}))}Cr("add"),Cr("append"),Cr("search"),Cr("update"),Cr("remove");function Cr(Y){el.prototype[Y]=el.prototype[Y+"Async"]=function(){let _e=this,Fe=[].slice.call(arguments);var Ue=Fe[Fe.length-1];let je;return Ii(Ue)&&(je=Ue,Fe.splice(Fe.length-1,1)),Ue=new Promise(function(mt){setTimeout(function(){_e.h[++Wn]=mt,_e.o.postMessage({task:Y,id:Wn,args:Fe})})}),je?(Ue.then(je),this):Ue}}function kh(Y,_e,Fe){let Ue;try{Ue=_e?new(Sn()).Worker(__dirname+"/node/node.js"):Y?new Worker(URL.createObjectURL(new Blob(["onmessage="+hs.toString()],{type:"text/javascript"}))):new Worker(ir(Fe)?Fe:"worker/worker.js",{type:"module"})}catch{}return Ue}function Sa(Y){if(!(this instanceof Sa))return new Sa(Y);var _e=Y.document||Y.doc||Y,Fe;this.K=[],this.h=[],this.A=[],this.register=Vn(),this.key=(Fe=_e.key||_e.id)&&Fi(Fe,this.A)||"id",this.m=ja(Y.fastupdate),this.C=(Fe=_e.store)&&Fe!==!0&&[],this.store=Fe&&Vn(),this.I=(Fe=_e.tag)&&Fi(Fe,this.A),this.l=Fe&&Vn(),this.cache=(Fe=Y.cache)&&new Mn(Fe),Y.cache=!1,this.o=Y.worker,this.async=!1,Fe=Vn();let Ue=_e.index||_e.field||_e;ir(Ue)&&(Ue=[Ue]);for(let je=0,mt,Nt;je<Ue.length;je++)mt=Ue[je],ir(mt)||(Nt=mt,mt=mt.field),Nt=Rr(Nt)?Object.assign({},Y,Nt):Y,this.o&&(Fe[mt]=new el(Nt),Fe[mt].o||(this.o=!1)),this.o||(Fe[mt]=new Ao(Nt,this.register)),this.K[je]=Fi(mt,this.A),this.h[je]=mt;if(this.C)for(Y=_e.store,ir(Y)&&(Y=[Y]),_e=0;_e<Y.length;_e++)this.C[_e]=Fi(Y[_e],this.A);this.index=Fe}function Fi(Y,_e){let Fe=Y.split(":"),Ue=0;for(let je=0;je<Fe.length;je++)Y=Fe[je],0<=Y.indexOf("[]")&&(Y=Y.substring(0,Y.length-2))&&(_e[Ue]=!0),Y&&(Fe[Ue++]=Y);return Ue<Fe.length&&(Fe.length=Ue),1<Ue?Fe:Fe[0]}function Th(Y,_e){if(ir(_e))Y=Y[_e];else for(let Fe=0;Y&&Fe<_e.length;Fe++)Y=Y[_e[Fe]];return Y}function mu(Y,_e,Fe,Ue,je){if(Y=Y[je],Ue===Fe.length-1)_e[je]=Y;else if(Y)if(Y.constructor===Array)for(_e=_e[je]=Array(Y.length),je=0;je<Y.length;je++)mu(Y,_e,Fe,Ue,je);else _e=_e[je]||(_e[je]=Vn()),je=Fe[++Ue],mu(Y,_e,Fe,Ue,je)}function pt(Y,_e,Fe,Ue,je,mt,Nt,It){if(Y=Y[Nt])if(Ue===_e.length-1){if(Y.constructor===Array){if(Fe[Ue]){for(_e=0;_e<Y.length;_e++)je.add(mt,Y[_e],!0,!0);return}Y=Y.join(" ")}je.add(mt,Y,It,!0)}else if(Y.constructor===Array)for(Nt=0;Nt<Y.length;Nt++)pt(Y,_e,Fe,Ue,je,mt,Nt,It);else Nt=_e[++Ue],pt(Y,_e,Fe,Ue,je,mt,Nt,It)}un=Sa.prototype,un.add=function(Y,_e,Fe){if(Rr(Y)&&(_e=Y,Y=Th(_e,this.key)),_e&&(Y||Y===0)){if(!Fe&&this.register[Y])return this.update(Y,_e);for(let Ue=0,je,mt;Ue<this.h.length;Ue++)mt=this.h[Ue],je=this.K[Ue],ir(je)&&(je=[je]),pt(_e,je,this.A,0,this.index[mt],Y,je[0],Fe);if(this.I){let Ue=Th(_e,this.I),je=Vn();ir(Ue)&&(Ue=[Ue]);for(let mt=0,Nt,It;mt<Ue.length;mt++)if(Nt=Ue[mt],!je[Nt]&&(je[Nt]=1,It=this.l[Nt]||(this.l[Nt]=[]),!Fe||!It.includes(Y))&&(It[It.length]=Y,this.m)){let rr=this.register[Y]||(this.register[Y]=[]);rr[rr.length]=It}}if(this.store&&(!Fe||!this.store[Y])){let Ue;if(this.C){Ue=Vn();for(let je=0,mt;je<this.C.length;je++)mt=this.C[je],ir(mt)?Ue[mt]=_e[mt]:mu(_e,Ue,mt,0,mt[0])}this.store[Y]=Ue||_e}}return this},un.append=function(Y,_e){return this.add(Y,_e,!0)},un.update=function(Y,_e){return this.remove(Y).add(Y,_e)},un.remove=function(Y){if(Rr(Y)&&(Y=Th(Y,this.key)),this.register[Y]){for(var _e=0;_e<this.h.length&&(this.index[this.h[_e]].remove(Y,!this.o),!this.m);_e++);if(this.I&&!this.m)for(let Fe in this.l){_e=this.l[Fe];let Ue=_e.indexOf(Y);Ue!==-1&&(1<_e.length?_e.splice(Ue,1):delete this.l[Fe])}this.store&&delete this.store[Y],delete this.register[Y]}return this},un.search=function(Y,_e,Fe,Ue){Fe||(!_e&&Rr(Y)?(Fe=Y,Y=""):Rr(_e)&&(Fe=_e,_e=0));let je=[],mt=[],Nt,It,rr,wr,ni,Sr,ti=0;if(Fe)if(Fe.constructor===Array)rr=Fe,Fe=null;else{if(Y=Fe.query||Y,rr=(Nt=Fe.pluck)||Fe.index||Fe.field,wr=Fe.tag,It=this.store&&Fe.enrich,ni=Fe.bool==="and",_e=Fe.limit||_e||100,Sr=Fe.offset||0,wr&&(ir(wr)&&(wr=[wr]),!Y)){for(let cr=0,yi;cr<wr.length;cr++)(yi=Ts.call(this,wr[cr],_e,Sr,It))&&(je[je.length]=yi,ti++);return ti?je:[]}ir(rr)&&(rr=[rr])}rr||(rr=this.h),ni=ni&&(1<rr.length||wr&&1<wr.length);let ar=!Ue&&(this.o||this.async)&&[];for(let cr=0,yi,qi,da;cr<rr.length;cr++){let $a;if(qi=rr[cr],ir(qi)||($a=qi,qi=$a.field,Y=$a.query||Y,_e=$a.limit||_e,It=$a.enrich||It),ar)ar[cr]=this.index[qi].searchAsync(Y,_e,$a||Fe);else{if(Ue?yi=Ue[cr]:yi=this.index[qi].search(Y,_e,$a||Fe),da=yi&&yi.length,wr&&da){let ya=[],Ha=0;ni&&(ya[0]=[yi]);for(let xo=0,Ox,Ql;xo<wr.length;xo++)Ox=wr[xo],(da=(Ql=this.l[Ox])&&Ql.length)&&(Ha++,ya[ya.length]=ni?[Ql]:Ql);Ha&&(yi=ni?ma(ya,_e||100,Sr||0):Ls(yi,ya),da=yi.length)}if(da)mt[ti]=qi,je[ti++]=yi;else if(ni)return[]}}if(ar){let cr=this;return new Promise(function(yi){Promise.all(ar).then(function(qi){yi(cr.search(Y,_e,Fe,qi))})})}if(!ti)return[];if(Nt&&(!It||!this.store))return je[0];for(let cr=0,yi;cr<mt.length;cr++){if(yi=je[cr],yi.length&&It&&(yi=yu.call(this,yi)),Nt)return yi;je[cr]={field:mt[cr],result:yi}}return je};function Ts(Y,_e,Fe,Ue){let je=this.l[Y],mt=je&&je.length-Fe;if(mt&&0<mt)return(mt>_e||Fe)&&(je=je.slice(Fe,Fe+_e)),Ue&&(je=yu.call(this,je)),{tag:Y,result:je}}function yu(Y){let _e=Array(Y.length);for(let Fe=0,Ue;Fe<Y.length;Fe++)Ue=Y[Fe],_e[Fe]={id:Ue,doc:this.store[Ue]};return _e}un.contain=function(Y){return!!this.register[Y]},un.get=function(Y){return this.store[Y]},un.set=function(Y,_e){return this.store[Y]=_e,this},un.searchCache=oo,un.export=function(Y,_e,Fe,Ue,je,mt){let Nt;if(typeof mt>"u"&&(Nt=new Promise(It=>{mt=It})),je||(je=0),Ue||(Ue=0),Ue<this.h.length){let It=this.h[Ue],rr=this.index[It];_e=this,setTimeout(function(){rr.export(Y,_e,je?It:"",Ue,je++,mt)||(Ue++,je=1,_e.export(Y,_e,It,Ue,je,mt))})}else{let It,rr;switch(je){case 1:It="tag",rr=this.l,Fe=null;break;case 2:It="store",rr=this.store,Fe=null;break;default:mt();return}ji(Y,this,Fe,It,Ue,je,rr,mt)}return Nt},un.import=function(Y,_e){if(_e)switch(ir(_e)&&(_e=JSON.parse(_e)),Y){case"tag":this.l=_e;break;case"reg":this.m=!1,this.register=_e;for(let Ue=0,je;Ue<this.h.length;Ue++)je=this.index[this.h[Ue]],je.register=_e,je.m=!1;break;case"store":this.store=_e;break;default:Y=Y.split(".");let Fe=Y[0];Y=Y[1],Fe&&Y&&this.index[Fe].import(Y,_e)}},Nn(Sa.prototype);var vu={encode:Es,F:!1,G:""},vo=[Zi("[\xE0\xE1\xE2\xE3\xE4\xE5]"),"a",Zi("[\xE8\xE9\xEA\xEB]"),"e",Zi("[\xEC\xED\xEE\xEF]"),"i",Zi("[\xF2\xF3\xF4\xF5\xF6\u0151]"),"o",Zi("[\xF9\xFA\xFB\xFC\u0171]"),"u",Zi("[\xFD\u0177\xFF]"),"y",Zi("\xF1"),"n",Zi("[\xE7c]"),"k",Zi("\xDF"),"s",Zi(" & ")," and "];function Es(Y){var _e=Y=""+Y;return _e.normalize&&(_e=_e.normalize("NFD").replace(Qi,"")),Ni.call(this,_e.toLowerCase(),!Y.normalize&&vo)}var ui={encode:Ge,F:!1,G:"strict"},de=/[^a-z0-9]+/,Pe={b:"p",v:"f",w:"f",z:"s",x:"s",\u00DF:"s",d:"t",n:"m",c:"k",g:"k",j:"k",q:"k",i:"e",y:"e",u:"o"};function Ge(Y){Y=Es.call(this,Y).join(" ");let _e=[];if(Y){let Fe=Y.split(de),Ue=Fe.length;for(let je=0,mt,Nt=0;je<Ue;je++)if((Y=Fe[je])&&(!this.filter||!this.filter[Y])){mt=Y[0];let It=Pe[mt]||mt,rr=It;for(let wr=1;wr<Y.length;wr++){mt=Y[wr];let ni=Pe[mt]||mt;ni&&ni!==rr&&(It+=ni,rr=ni)}_e[Nt++]=It}}return _e}var nt={encode:dt,F:!1,G:""},gt=[Zi("ae"),"a",Zi("oe"),"o",Zi("sh"),"s",Zi("th"),"t",Zi("ph"),"f",Zi("pf"),"f",Zi("(?![aeo])h(?![aeo])"),"",Zi("(?!^[aeo])h(?!^[aeo])"),""];function dt(Y,_e){return Y&&(Y=Ge.call(this,Y).join(" "),2<Y.length&&(Y=Kn(Y,gt)),_e||(1<Y.length&&(Y=oa(Y)),Y&&(Y=Y.split(" ")))),Y||[]}var Jt={encode:br,F:!1,G:""},Vt=Zi("(?!\\b)[aeo]");function br(Y){return Y&&(Y=dt.call(this,Y,!0),1<Y.length&&(Y=Y.replace(Vt,"")),1<Y.length&&(Y=oa(Y)),Y&&(Y=Y.split(" "))),Y||[]}_i["latin:default"]=li,_i["latin:simple"]=vu,_i["latin:balance"]=ui,_i["latin:advanced"]=nt,_i["latin:extra"]=Jt;var Ai={Index:Ao,Document:Sa,Worker:el,registerCharset:function(Y,_e){_i[Y]=_e},registerLanguage:function(Y,_e){Pi[Y]=_e}},Wi=class{seed;m=2147483648;a=1103515245;c=42069;constructor(Y){this.seed=Y}next(){return this.seed=(this.a*this.seed+this.c)%this.m,this.seed/this.m}nextInt(Y,_e){return Math.floor(this.next()*(_e-Y)+Y)}choice(Y){return Y[this.nextInt(0,Y.length)]}shuffle(Y){let _e=[...Y];for(let Fe=_e.length-1;Fe>0;Fe--){let Ue=this.nextInt(0,Fe+1);[_e[Fe],_e[Ue]]=[_e[Ue],_e[Fe]]}return _e}},te="https://curius.app",ye=`${te}/aaron-pham`,Se=/^(?:https?:\/\/)?(?:www\.)?([^\/]+)/,Re={method:"POST",headers:{"Content-Type":"application/json"}},$e={id:0,link:"",title:"",favorite:!1,snippet:"",toRead:!1,createdBy:0,metadata:{full_text:"",author:"",page_type:""},createdDate:"",modifiedDate:"",lastCrawled:null,trails:[],comments:[],mentions:[],topics:[],highlights:[],userIds:[]},tt={favourite:'<svg fill="currentColor" preserveAspectRatio="xMidYMid meet" height="1rem" width="1rem" viewBox="0 0 40 40" currentItem="false" class="favorite-icon" style="vertical-align: unset"><g><path stroke-width="5" fill="rgb(236, 180, 19)" d="m5.2 18.8l6 5.5-1.7 7.7c-0.2 1 0.2 2 1 2.5 0.3 0.3 0.8 0.5 1.3 0.5 0.4 0 0.7 0 1-0.2 0 0 0.2 0 0.2-0.1l6.8-3.9 6.9 3.9s0.1 0 0.1 0.1c0.9 0.4 1.9 0.4 2.5-0.1 0.9-0.5 1.2-1.5 1-2.5l-1.6-7.7c0.6-0.5 1.6-1.5 2.6-2.5l3.2-2.8 0.2-0.2c0.6-0.7 0.8-1.7 0.5-2.5s-1-1.5-2-1.7h-0.2l-7.8-0.8-3.2-7.2s0-0.1-0.2-0.1c-0.1-1.2-1-1.7-1.8-1.7s-1.7 0.5-2.2 1.3c0 0 0 0.2-0.1 0.2l-3.2 7.2-7.8 0.8h-0.2c-0.8 0.2-1.7 0.8-2 1.7-0.2 1 0 2 0.7 2.6z"></path></g></svg>',default:'<svg width="11" height="11" fill="none" viewBox="0 0 46 46" preserveAspectRatio="none"><path stroke="#000" stroke-width="4" d="M2.828 22.627L22.627 2.828l19.799 19.8-19.8 19.798z"></path><path fill="#000" d="M17 22.657L22.657 17l5.657 5.657-5.657 5.657z"></path></svg>',youtube:'<svg width="11" height="11" fill="none" viewBox="0 0 46 46" preserveAspectRatio="none"><path d="M32.076 24.233L4.998 39.816C3.664 40.584 2 39.621 2 38.084V6.917c0-1.538 1.664-2.5 2.998-1.734l27.078 15.584c1.337.769 1.337 2.697 0 3.466z" stroke="#000" stroke-width="4"></path></svg>',github:'<svg viewBox="64 64 896 896" focusable="false" data-icon="github" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0138.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"></path></svg>',twitter:'<svg viewBox="64 64 896 896" focusable="false" data-icon="twitter" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M928 254.3c-30.6 13.2-63.9 22.7-98.2 26.4a170.1 170.1 0 0075-94 336.64 336.64 0 01-108.2 41.2A170.1 170.1 0 00672 174c-94.5 0-170.5 76.6-170.5 170.6 0 13.2 1.6 26.4 4.2 39.1-141.5-7.4-267.7-75-351.6-178.5a169.32 169.32 0 00-23.2 86.1c0 59.2 30.1 111.4 76 142.1a172 172 0 01-77.1-21.7v2.1c0 82.9 58.6 151.6 136.7 167.4a180.6 180.6 0 01-44.9 5.8c-11.1 0-21.6-1.1-32.2-2.6C211 652 273.9 701.1 348.8 702.7c-58.6 45.9-132 72.9-211.7 72.9-14.3 0-27.5-.5-41.2-2.1C171.5 822 261.2 850 357.8 850 671.4 850 843 590.2 843 364.7c0-7.4 0-14.8-.5-22.2 33.2-24.3 62.3-54.4 85.5-88.2z"></path></svg>',arxiv:'<svg width="10" height="10" fill="none" viewBox="0 0 45 45" data-icon="arxiv" preserveAspectRatio="none"><path d="M25.468 7.836C24.993 3.384 24.4 0 20.244 0c-5.64 0-9.499 4.037-9.499 5.7 0 .415.357.415.653.415.654 0 3.266-.772 4.334-2.79l.119-.06c3.265 0 4.037 1.84 4.63 7.955l.832 8.727c-2.137 1.188-10.152 5.996-14.426 8.965C.119 33.72 0 35.502 0 37.223c0 2.018 1.069 3.325 2.85 3.325 1.78 0 4.511-1.96 4.511-2.85 0-.297-.178-.356-.415-.416-.475-.059-1.9-.296-1.9-2.612 0-1.603 0-2.315 6.293-6.53 3.621-2.375 7.065-4.275 10.152-6.234 0 .12.89 9.024 1.009 10.033.475 4.69.89 8.608 5.284 8.608 5.64 0 9.498-4.036 9.498-5.699 0-.415-.296-.415-.653-.415-.593 0-3.206.772-4.334 2.79-.178.06-.474.06-.593.06-3.384 0-3.74-3.74-4.215-8.728-.178-1.9-.356-3.443-.95-9.617C45 7.896 45 5.818 45 3.325 45 1.306 43.931 0 42.21 0c-1.84 0-4.572 2.018-4.572 2.85 0 .356.357.415.416.415.475.06 1.9.297 1.9 2.612 0 1.484-.178 2.375-5.224 5.818-1.781 1.188-4.275 2.731-8.371 5.224l-.89-9.083z" fill="#000"></path></svg>'},Ct=Y=>tt[Y]??null;function ge(Y){let _e=Y.match(Se);return _e?_e[1]:""}function De(Y){let _e=new Date,Fe=Y instanceof Date?Y:new Date(Y),Ue=Math.floor((_e.getTime()-Fe.getTime())/1e3),je=Math.floor(Ue/(3600*24)),mt=Math.floor(Ue%(3600*24)/3600),Nt=Math.floor(Ue%3600/60);return je>1?`${je} days ago`:je===1?"1 day ago":mt>1?`${mt} hours ago`:mt===1?"1 hour ago":Nt>1?`${Nt} minutes ago`:Nt===1?"1 minute ago":"just now"}var Ve={Link:$e,elementType:"div",addFaIcon:!1},lt,ht=Y=>{let{Link:_e,elementType:Fe,addFaIcon:Ue}={...Ve,...Y};if(Fe===void 0)throw new Error("Element type is undefined");lt=lt||new DOMParser;let je=document.createElement(Fe);je.classList.add("curius-item-title");let mt=document.createElement("div");mt.classList.add("curius-item-link");let Nt=document.createElement("a");Object.assign(Nt,{href:_e.link,target:"_blank",rel:"noopener noreferrer",innerHTML:_e.title}),mt.appendChild(Nt);let It=document.createElement("div");if(It.classList.add("curius-item-address"),It.textContent=ge(_e.link),Ue){let wr=document.createElement("div");switch(wr.classList.add("curius-item-fa"),!0){case/twitter/.test(_e.link):wr.innerHTML=Ct("twitter");break;case/youtube/.test(_e.link):wr.innerHTML=Ct("youtube");break;case/github/.test(_e.link):wr.innerHTML=Ct("github");break;case/arxiv/.test(_e.link):wr.innerHTML=Ct("arxiv");break;default:wr.innerHTML=Ct("default");break}je.appendChild(wr)}je.append(mt,It);let rr=document.createElement("div");if(rr.classList.add("curius-item-icons"),_e.favorite){let wr=document.createElement("div");wr.classList.add("curius-item-favorite"),wr.innerHTML=Ct("favourite"),rr.appendChild(wr)}return je.appendChild(rr),je};async function vt(){try{let Y=await fetch("https://cdn.aarnphm.xyz/api/curius?query=following",Re);if(!Y.ok)throw new Error("Failed to get followings from curius");let _e=await Y.json();if(_e===void 0||_e.following===void 0)throw new Error("No following data");return _e.following}catch(Y){console.error(Y)}}async function ut(){try{let Y=await fetch("https://cdn.aarnphm.xyz/api/curius?query=user",Re);if(!Y.ok)throw new Error("Failed to get users from curius");let _e=await Y.json();if(_e===void 0||_e.user===void 0)throw new Error("Failed to fetch user");return _e.user}catch(Y){console.error(Y)}}async function xt(){try{let Y=await fetch("https://cdn.aarnphm.xyz/api/curius?query=links",Re);if(!Y.ok)throw new Error("Failed to get links from curius");let _e=await Y.json();if(_e===void 0||_e.links===void 0)throw new Error("Failed to fetch links");return _e.links}catch(Y){console.error(Y)}}async function jt(){let[Y,_e,Fe]=await Promise.all([ut(),vt(),xt()]);return{links:Fe,user:Y,following:_e}}function ur(Y){let _e=new Map;return(Y.links??[]).filter(Fe=>Fe.trails.length>0).map(Fe=>{Fe.trails.map(Ue=>{_e.has(Ue.trailName)||_e.set(Ue.trailName,{trail:Ue,links:new Map}),_e.get(Ue.trailName).links.set(Fe.id,Fe)})}),_e}var ei=Y=>{let _e=document.getElementById("trail-list"),Fe=document.getElementsByClassName("curius-trail")[0];if(!_e||!Fe)return;let Ue=parseInt(Fe.dataset.limits)??5,je=Fe.dataset.locale;Ot(_e);for(let[mt,{trail:Nt,links:It}]of Array.from(Y.entries()).slice(0,4)){let rr=Array.from(It.values()),wr=Math.max(0,rr.length-Ue);_e.appendChild(pr(mt,rr.slice(0,Ue),Nt,wr,je))}};function pr(Y,_e,Fe,Ue,je){let mt=document.createElement("li");mt.classList.add("trails-li");let Nt=document.createElement("div");Nt.classList.add("curius-trail-header"),Nt.innerHTML=`<span class="trail-title">sentier: ${Y}</span><span class="trail-description">${Fe.description}</span>`;let It=`${te}/trail/${Fe.slug}`,rr=document.createElement("ul");rr.classList.add("trail-ul"),rr.append(..._e.map(ni=>{let Sr=ht({Link:ni,elementType:"li"});return Vi(Sr,["mouseenter",()=>{let ti=Sr.querySelector(".curius-item-favorite");ti&&ti.classList.add("focus"),Sr.classList.add("focus")}],["mouseleave",()=>{let ti=Sr.querySelector(".curius-item-favorite");ti&&ti.classList.remove("focus"),Sr.classList.remove("focus")}],["click",ti=>{ti.target instanceof HTMLAnchorElement||window.open(It,"_blank")}]),Sr}));let wr=document.createElement("div");return wr.classList.add("see-more"),wr.innerHTML=`<span><a href=${It} target="_blank">${Ue>0?sa(je).components.recentNotes.seeRemainingMore({remaining:Ue}):"Void de plus \u2192"}</a></span>`,mt.append(Nt,rr,wr),mt}var Er=new Ai.Document({charset:"latin:advanced",document:{id:"id",index:[...Object.keys($e).map(Y=>({field:Y,tokenize:"forward"}))]}}),Gt=20,Dr=30,$i=Y=>{let _e=Y.split(/\s+/).filter(Ue=>Ue.trim()!==""),Fe=_e.length;if(Fe>1)for(let Ue=1;Ue<Fe;Ue++)_e.push(_e.slice(0,Ue+1).join(" "));return _e.sort((Ue,je)=>je.length-Ue.length)};function Ar(Y,_e,Fe){let Ue=$i(Y),je=_e.split(/\s+/).filter(rr=>rr!==""),mt=0,Nt=je.length-1;if(Fe){let rr=ti=>Ue.some(ar=>ti.toLowerCase().startsWith(ar.toLowerCase())),wr=je.map(rr),ni=0,Sr=0;for(let ti=0;ti<Math.max(je.length-Dr,0);ti++){let ar=wr.slice(ti,ti+Dr).reduce((cr,yi)=>cr+(yi?1:0),0);ar>=ni&&(ni=ar,Sr=ti)}mt=Math.max(Sr-Dr,0),Nt=Math.min(mt+2*Dr,je.length-1),je=je.slice(mt,Nt)}let It=je.map(rr=>{for(let wr of Ue)if(rr.toLowerCase().includes(wr.toLowerCase())){let ni=new RegExp(wr.toLowerCase(),"gi");return rr.replace(ni,'<span class="highlight">$&</span>')}return rr}).join(" ");return`${mt===0?"":"..."}${It}${Nt===je.length-1?"":"..."}`}var pn=new Date,ra=pn.getFullYear()*1e4+(pn.getMonth()+1)*100+pn.getDate(),Qr=new Wi(ra);async function Hi(Y){let _e=Qr.shuffle(Y).splice(0,20),Fe=document.getElementById("curius-bar"),Ue=document.getElementById("curius-search-container");async function je(ar){let cr=ar.target.value;Ue?.classList.toggle("active",cr!=="");let yi=await Er?.searchAsync({query:cr,limit:Gt,index:["title","snippet","topics"]})??[],qi=$a=>{let ya=yi.filter(Ha=>Ha.field===$a);return ya.length===0?[]:[...ya[0].result]},da=[...new Set([...qi("title"),...qi("snippet"),...qi("topics")])].map($a=>mt(cr,$a));It(da)}let mt=(ar,cr)=>{let yi=Y[cr];return{...yi,title:Ar(ar,yi.title),snippet:Ar(ar,yi.snippet,!0)}},Nt=document.getElementsByClassName("curius-notes")[0];function It(ar){Ue&&(Ot(Ue),ar.length===0?Ue.innerHTML='<a class="curius-search-link"><span class="curius-search-title">No results found.</span><p class="curius-search-snippet">Try another search term?</p></a>':Ue?.append(...ar.map(ti)))}function rr(ar){if(ar.key==="k"&&(ar.ctrlKey||ar.metaKey)){ar.preventDefault(),Nt?.classList.contains("active")&&Nt.classList.remove("active"),Ue?.classList.contains("active")?Sr():ni(_e);return}Ue?.classList.contains("active")&&(ar.key==="Enter"?Ue?.contains(document.activeElement)?document.activeElement.click():document.getElementsByClassName("curius-search-link")[0]?.click():ar.key==="ArrowUp"||ar.shiftKey&&ar.key==="Tab"?(ar.preventDefault(),Ue?.contains(document.activeElement)&&document.activeElement?.previousElementSibling?.focus()):(ar.key==="ArrowDown"||ar.key==="Tab")&&(ar.preventDefault(),Ue?.contains(document.activeElement)?document.activeElement?.nextElementSibling?.focus():document.getElementsByClassName("curius-search-link")[0]?.focus()))}function wr(){Fe?.classList.contains("active")||(Nt?.classList.contains("active")&&Nt.classList.remove("active"),Ue?.classList.contains("active")?Sr():ni(_e))}function ni(ar){Ue&&(Ue?.classList.add("active"),Fe?.focus(),Fe?.scrollIntoView({behavior:"smooth"}),It(ar))}function Sr(){Ue&&Ue.classList.remove("active"),Fe&&(Fe.value="")}function ti(ar){let cr=document.createElement("a");cr.classList.add("curius-search-link"),cr.target="_blank",cr.href=ar.link,cr.innerHTML=`<span class="curius-search-title">${ar.title}</span><p class="curius-search-snippet">${ar.snippet}</div>`;let yi=qi=>{qi.altKey||qi.ctrlKey||qi.metaKey||qi.shiftKey||Sr()};return cr.addEventListener("click",yi),window.addCleanup(()=>cr.removeEventListener("click",yi)),cr}document.addEventListener("keydown",rr),window.addCleanup(()=>document.removeEventListener("keydown",rr)),Fe?.addEventListener("input",je),window.addCleanup(()=>Fe?.removeEventListener("input",je)),Fe?.addEventListener("click",wr),window.addCleanup(()=>Fe?.removeEventListener("click",wr)),Kr(Ue,Sr),await Ln(Y)}async function Ln(Y){let _e=0,Fe=[];for(let Ue of Y)Fe.push(Er.addAsync(_e++,{...Ue}));return await Promise.all(Fe)}var ss=2*60*1e3,_a=null;function la(Y){let _e=document.createElement("li");_e.id=`curius-item-${Y.id}`,_e.classList.add("curius-item");let Fe=je=>{let mt=document.createElement("div");mt.classList.add("curius-item-metadata");let Nt=document.createElement("ul");Nt.classList.add("curius-item-tags"),Nt.innerHTML=je.topics.length>0?`${je.topics.map(ni=>ni.public?`<li><a href="https://curius.app/aaron-pham/${ni.slug}" target="_blank">${ni.topic}</a></li>`:"").join("")}`:"";let It=document.createElement("div");It.id=`curius-misc-${je.id}`;let rr=document.createElement("span");rr.id=`curius-span-${je.id}`;let wr=new Date(je.modifiedDate);if(rr.innerHTML=`<time datetime=${je.modifiedDate} title="${wr.toUTCString()}">${De(je.createdDate)}</time>`,It.appendChild(rr),je.highlights.length>0){let ni=document.createElement("div");ni.id=`curius-highlights-${je.id}`,ni.innerHTML=`${je.highlights.length} ${je.highlights.length>0?"highlights":"highlight"}`,It.appendChild(ni);let Sr=document.getElementById("highlight-modal"),ti=document.getElementById("highlight-modal-list");Vi(ni,["mouseenter",()=>{let ar=je.highlights;!Sr||!ti||(ti.innerHTML="",_e.classList.remove("focus"),ar.forEach(cr=>{let yi=document.createElement("li");yi.textContent=cr.highlight,ti.appendChild(yi)}),Sr.style.visibility="visible",Sr.classList.add("active"))}],["mouseleave",()=>{_e.classList.add("focus"),Sr&&(Sr.style.visibility="hidden",Sr.classList.remove("active"))}],["mousemove",({pageX:ar,pageY:cr})=>{_e.classList.remove("focus"),Sr&&(Sr.classList.add("active"),Sr.style.left=`${ar+10}px`,Sr.style.top=`${cr+10}px`)}])}return mt.append(Nt,It),mt};_e.append(ht({Link:Y,addFaIcon:!0}),Fe(Y)),_e.dataset.items=JSON.stringify(!0);let Ue=je=>{let mt=document.getElementsByClassName("curius-notes")[0];if(!(je.altKey||je.ctrlKey||je.metaKey||je.shiftKey)){if(_a&&_a.classList.remove("active"),mt&&mt.classList.remove("active"),_a=_e,_a.classList.add("active"),Y.highlights.length>0){if(!mt)return;mt.classList.add("active"),Us(Y,mt,_a)}je.target instanceof HTMLAnchorElement||mt?.classList.contains("active")||window.open(Y.link,"_blank")}};return Kr(_e,()=>_e.classList.remove("active")),Vi(_e,["click",Ue],["mouseenter",()=>{let je=_e.querySelector(".curius-item-favorite");je&&je.classList.add("focus"),_e.classList.add("focus")}],["mouseleave",()=>{let je=_e.querySelector(".curius-item-favorite");je&&je.classList.remove("focus"),_e.classList.remove("focus")}]),_e}function Us(Y,_e,Fe){let Ue=_e.querySelector("#note-link"),je=_e.querySelector(".curius-note-snippet"),mt=_e.querySelector(".curius-note-highlights");Ue.innerHTML=`<span class="curius-item-span">${Y.title}</span>`,Ue.href=Y.link,Ue.target="_blank",Ue.rel="noopener noreferrer";let Nt=document.querySelector(".icon-container"),It=()=>{_e.classList.remove("active"),Fe.classList.remove("active")};if(Nt?.addEventListener("click",It),window.addCleanup(()=>Nt?.removeEventListener("click",It)),Kr(_e,It),Ot(je),je.textContent=Y.metadata?Y.metadata.full_text:Y.snippet,Ot(mt),Y.highlights.length!==0)for(let rr of Y.highlights){let wr=document.createElement("li"),ni=document.createElement("a");ni.dataset.highlight=rr.id.toString(),ni.href=`${Y.link}?curius=${rr.userId}`,ni.target="_blank",ni.rel="noopener noreferrer",ni.textContent=rr.highlight,wr.appendChild(ni),mt.appendChild(wr)}}document.addEventListener("nav",async Y=>{if(Y.detail.url!=="curius")return;let _e=[".curius-page-container","#curius-fetching-text","#curius-fragments",".navigation-container"].map(ti=>document.querySelector(ti));if(_e.some(ti=>ti===null))return;let[Fe,Ue,je,mt]=_e,Nt=document.querySelector(".curius-friends"),It=document.getElementsByClassName("curius-trail")[0];Ue.textContent="R\xE9cup\xE9ration des liens curius",Ue.classList.toggle("active",!0);let rr=await jt();Ue.classList.toggle("active",!1);let wr=ti=>ti.length===0?(Fe.innerHTML="<p>\xC9chec de la r\xE9cup\xE9ration des liens.</p>",[]):ti.filter(ar=>ar.trails.length===0),ni=wr(rr.links);if(ni.length===0)return;ei(ur(rr)),await Hi(ni),je.append(...ni.map(la)),mt.classList.toggle("active",!0),Nt&&Nt.classList.toggle("active",!0),It&&It.classList.toggle("active",!0);let Sr=document.getElementById("curius-refetch");if(Sr){let ti=yi=>{let qi=document.getElementById("curius-refetch");!qi||!qi.classList.contains("disabled")||(yi.key==="r"||yi.key==="R")&&(yi.ctrlKey||yi.metaKey)&&(yi.preventDefault(),yi.stopPropagation())};document.addEventListener("keydown",ti),window.addCleanup(()=>document.removeEventListener("keydown",ti));let ar=!1,cr=async()=>{if(ar)return;let yi=document.getElementById("curius-search-container");yi?.classList.contains("active")&&yi.classList.remove("active"),Sr.classList.add("disabled"),Sr.style.opacity="0.5";let qi=document.getElementById("trail-list"),da=document.getElementsByClassName("curius-notes")[0];Ot(je),Ot(qi),da?.classList.toggle("active",!1),mt.classList.toggle("active",!1),Nt?.classList.toggle("active",!1),It?.classList.toggle("active",!1),Ue.classList.toggle("active",!0),Ue.textContent="Rafra\xEEchissement des liens curius";let $a=await jt();Ue.classList.toggle("active",!1),ei(ur($a));let ya=wr($a.links);ya.length!==0&&(await Hi($a.links),je.append(...ya.map(la)),mt.classList.toggle("active",!0),Nt?.classList.toggle("active",!0),It?.classList.toggle("active",!0),ar=!0,setTimeout(()=>{Sr.classList.remove("disabled"),ar=!1},ss))};Sr.addEventListener("click",cr),window.addCleanup(()=>Sr.removeEventListener("click",cr)),Vi(Sr,["mouseenter",()=>Sr.style.opacity=Sr.classList.contains("disabled")?"0.5":"1"],["mouseleave",()=>Sr.style.opacity=Sr.classList.contains("disabled")?"0.5":"1"])}})}(),function(){var na=Object.create,ta=Object.defineProperty,Ua=Object.getOwnPropertyDescriptor,Fa=Object.getOwnPropertyNames,On=Object.getPrototypeOf,dn=Object.prototype.hasOwnProperty,D=(de,Pe)=>()=>(Pe||de((Pe={exports:{}}).exports,Pe),Pe.exports),hi=(de,Pe,Ge,nt)=>{if(Pe&&typeof Pe=="object"||typeof Pe=="function")for(let gt of Fa(Pe))!dn.call(de,gt)&&gt!==Ge&&ta(de,gt,{get:()=>Pe[gt],enumerable:!(nt=Ua(Pe,gt))||nt.enumerable});return de},oi=(de,Pe,Ge)=>(Ge=de!=null?na(On(de)):{},hi(Pe||!de||!de.__esModule?ta(Ge,"default",{value:de,enumerable:!0}):Ge,de)),aa=D((de,Pe)=>{"use strict";Pe.exports=nt;function Ge(dt){return dt instanceof Buffer?Buffer.from(dt):new dt.constructor(dt.buffer.slice(),dt.byteOffset,dt.length)}function nt(dt){if(dt=dt||{},dt.circles)return gt(dt);let Jt=new Map;if(Jt.set(Date,te=>new Date(te)),Jt.set(Map,(te,ye)=>new Map(br(Array.from(te),ye))),Jt.set(Set,(te,ye)=>new Set(br(Array.from(te),ye))),dt.constructorHandlers)for(let te of dt.constructorHandlers)Jt.set(te[0],te[1]);let Vt=null;return dt.proto?Wi:Ai;function br(te,ye){let Se=Object.keys(te),Re=new Array(Se.length);for(let $e=0;$e<Se.length;$e++){let tt=Se[$e],Ct=te[tt];typeof Ct!="object"||Ct===null?Re[tt]=Ct:Ct.constructor!==Object&&(Vt=Jt.get(Ct.constructor))?Re[tt]=Vt(Ct,ye):ArrayBuffer.isView(Ct)?Re[tt]=Ge(Ct):Re[tt]=ye(Ct)}return Re}function Ai(te){if(typeof te!="object"||te===null)return te;if(Array.isArray(te))return br(te,Ai);if(te.constructor!==Object&&(Vt=Jt.get(te.constructor)))return Vt(te,Ai);let ye={};for(let Se in te){if(Object.hasOwnProperty.call(te,Se)===!1)continue;let Re=te[Se];typeof Re!="object"||Re===null?ye[Se]=Re:Re.constructor!==Object&&(Vt=Jt.get(Re.constructor))?ye[Se]=Vt(Re,Ai):ArrayBuffer.isView(Re)?ye[Se]=Ge(Re):ye[Se]=Ai(Re)}return ye}function Wi(te){if(typeof te!="object"||te===null)return te;if(Array.isArray(te))return br(te,Wi);if(te.constructor!==Object&&(Vt=Jt.get(te.constructor)))return Vt(te,Wi);let ye={};for(let Se in te){let Re=te[Se];typeof Re!="object"||Re===null?ye[Se]=Re:Re.constructor!==Object&&(Vt=Jt.get(Re.constructor))?ye[Se]=Vt(Re,Wi):ArrayBuffer.isView(Re)?ye[Se]=Ge(Re):ye[Se]=Wi(Re)}return ye}}function gt(dt){let Jt=[],Vt=[],br=new Map;if(br.set(Date,Se=>new Date(Se)),br.set(Map,(Se,Re)=>new Map(Wi(Array.from(Se),Re))),br.set(Set,(Se,Re)=>new Set(Wi(Array.from(Se),Re))),dt.constructorHandlers)for(let Se of dt.constructorHandlers)br.set(Se[0],Se[1]);let Ai=null;return dt.proto?ye:te;function Wi(Se,Re){let $e=Object.keys(Se),tt=new Array($e.length);for(let Ct=0;Ct<$e.length;Ct++){let ge=$e[Ct],De=Se[ge];if(typeof De!="object"||De===null)tt[ge]=De;else if(De.constructor!==Object&&(Ai=br.get(De.constructor)))tt[ge]=Ai(De,Re);else if(ArrayBuffer.isView(De))tt[ge]=Ge(De);else{let Ve=Jt.indexOf(De);Ve!==-1?tt[ge]=Vt[Ve]:tt[ge]=Re(De)}}return tt}function te(Se){if(typeof Se!="object"||Se===null)return Se;if(Array.isArray(Se))return Wi(Se,te);if(Se.constructor!==Object&&(Ai=br.get(Se.constructor)))return Ai(Se,te);let Re={};Jt.push(Se),Vt.push(Re);for(let $e in Se){if(Object.hasOwnProperty.call(Se,$e)===!1)continue;let tt=Se[$e];if(typeof tt!="object"||tt===null)Re[$e]=tt;else if(tt.constructor!==Object&&(Ai=br.get(tt.constructor)))Re[$e]=Ai(tt,te);else if(ArrayBuffer.isView(tt))Re[$e]=Ge(tt);else{let Ct=Jt.indexOf(tt);Ct!==-1?Re[$e]=Vt[Ct]:Re[$e]=te(tt)}}return Jt.pop(),Vt.pop(),Re}function ye(Se){if(typeof Se!="object"||Se===null)return Se;if(Array.isArray(Se))return Wi(Se,ye);if(Se.constructor!==Object&&(Ai=br.get(Se.constructor)))return Ai(Se,ye);let Re={};Jt.push(Se),Vt.push(Re);for(let $e in Se){let tt=Se[$e];if(typeof tt!="object"||tt===null)Re[$e]=tt;else if(tt.constructor!==Object&&(Ai=br.get(tt.constructor)))Re[$e]=Ai(tt,ye);else if(ArrayBuffer.isView(tt))Re[$e]=Ge(tt);else{let Ct=Jt.indexOf(tt);Ct!==-1?Re[$e]=Vt[Ct]:Re[$e]=ye(tt)}}return Jt.pop(),Vt.pop(),Re}}}),Sn=D(()=>{}),Ke=Object.hasOwnProperty,Ca=oi(aa(),1),ba=(0,Ca.default)();function Kr(de){for(;de.firstChild;)de.removeChild(de.firstChild)}function Ot(de,...Pe){Vi(de,["mouseenter",()=>de.classList.add(...Pe)],["mouseleave",()=>de.classList.remove(...Pe)])}function Vi(de,...Pe){de&&Pe.forEach(([Ge,nt])=>{let gt=dt=>nt(dt);de.addEventListener(Ge,gt),window.addCleanup(()=>de.removeEventListener(Ge,gt))})}var Li;function jr(de){return typeof de<"u"?de:!0}function Ir(de){let Pe=Array(de);for(let Ge=0;Ge<de;Ge++)Pe[Ge]=gr();return Pe}function gr(){return Object.create(null)}function Zr(de,Pe){return Pe.length-de.length}function vr(de){return typeof de=="string"}function Vr(de){return typeof de=="object"}function Ht(de){return typeof de=="function"}function xi(de,Pe){var Ge=or;if(de&&(Pe&&(de=Zt(de,Pe)),this.H&&(de=Zt(de,this.H)),this.J&&1<de.length&&(de=Zt(de,this.J)),Ge||Ge==="")){if(Pe=de.split(Ge),this.filter){de=this.filter,Ge=Pe.length;let nt=[];for(let gt=0,dt=0;gt<Ge;gt++){let Jt=Pe[gt];Jt&&!de[Jt]&&(nt[dt++]=Jt)}de=nt}else de=Pe;return de}return de}var or=/[\p{Z}\p{S}\p{P}\p{C}]+/u,Wr=/[\u0300-\u036f]/g;function xr(de,Pe){let Ge=Object.keys(de),nt=Ge.length,gt=[],dt="",Jt=0;for(let Vt=0,br,Ai;Vt<nt;Vt++)br=Ge[Vt],(Ai=de[br])?(gt[Jt++]=dr(Pe?"(?!\\b)"+br+"(\\b|_)":br),gt[Jt++]=Ai):dt+=(dt?"|":"")+br;return dt&&(gt[Jt++]=dr(Pe?"(?!\\b)("+dt+")(\\b|_)":"("+dt+")"),gt[Jt]=""),gt}function Zt(de,Pe){for(let Ge=0,nt=Pe.length;Ge<nt&&(de=de.replace(Pe[Ge],Pe[Ge+1]),de);Ge+=2);return de}function dr(de){return new RegExp(de,"g")}function nr(de){let Pe="",Ge="";for(let nt=0,gt=de.length,dt;nt<gt;nt++)(dt=de[nt])!==Ge&&(Pe+=Ge=dt);return Pe}var qt={encode:Yr,F:!1,G:""};function Yr(de){return xi.call(this,(""+de).toLowerCase(),!1)}var ii={},ki={};function zn(de){sa(de,"add"),sa(de,"append"),sa(de,"search"),sa(de,"update"),sa(de,"remove")}function sa(de,Pe){de[Pe+"Async"]=function(){let Ge=this,nt=arguments;var gt=nt[nt.length-1];let dt;return Ht(gt)&&(dt=gt,delete nt[nt.length-1]),gt=new Promise(function(Jt){setTimeout(function(){Ge.async=!0;let Vt=Ge[Pe].apply(Ge,nt);Ge.async=!1,Jt(Vt)})}),dt?(gt.then(dt),this):gt}}function un(de,Pe,Ge,nt){let gt=de.length,dt=[],Jt,Vt,br=0;nt&&(nt=[]);for(let Ai=gt-1;0<=Ai;Ai--){let Wi=de[Ai],te=Wi.length,ye=gr(),Se=!Jt;for(let Re=0;Re<te;Re++){let $e=Wi[Re],tt=$e.length;if(tt)for(let Ct=0,ge,De;Ct<tt;Ct++)if(De=$e[Ct],Jt){if(Jt[De]){if(!Ai){if(Ge)Ge--;else if(dt[br++]=De,br===Pe)return dt}(Ai||nt)&&(ye[De]=1),Se=!0}if(nt&&(ge=(Vt[De]||0)+1,Vt[De]=ge,ge<gt)){let Ve=nt[ge-2]||(nt[ge-2]=[]);Ve[Ve.length]=De}}else ye[De]=1}if(nt)Jt||(Vt=ye);else if(!Se)return[];Jt=ye}if(nt)for(let Ai=nt.length-1,Wi,te;0<=Ai;Ai--){Wi=nt[Ai],te=Wi.length;for(let ye=0,Se;ye<te;ye++)if(Se=Wi[ye],!Jt[Se]){if(Ge)Ge--;else if(dt[br++]=Se,br===Pe)return dt;Jt[Se]=1}}return dt}function ja(de,Pe){let Ge=gr(),nt=gr(),gt=[];for(let dt=0;dt<de.length;dt++)Ge[de[dt]]=1;for(let dt=0,Jt;dt<Pe.length;dt++){Jt=Pe[dt];for(let Vt=0,br;Vt<Jt.length;Vt++)br=Jt[Vt],Ge[br]&&!nt[br]&&(nt[br]=1,gt[gt.length]=br)}return gt}function fs(de){this.l=de!==!0&&de,this.cache=gr(),this.h=[]}function Vn(de,Pe,Ge){Vr(de)&&(de=de.query);let nt=this.cache.get(de);return nt||(nt=this.search(de,Pe,Ge),this.cache.set(de,nt)),nt}fs.prototype.set=function(de,Pe){if(!this.cache[de]){var Ge=this.h.length;for(Ge===this.l?delete this.cache[this.h[Ge-1]]:Ge++,--Ge;0<Ge;Ge--)this.h[Ge]=this.h[Ge-1];this.h[0]=de}this.cache[de]=Pe},fs.prototype.get=function(de){let Pe=this.cache[de];if(this.l&&Pe&&(de=this.h.indexOf(de))){let Ge=this.h[de-1];this.h[de-1]=this.h[de],this.h[de]=Ge}return Pe};var Wt={memory:{charset:"latin:extra",D:3,B:4,m:!1},performance:{D:3,B:3,s:!1,context:{depth:2,D:1}},match:{charset:"latin:extra",G:"reverse"},score:{charset:"latin:advanced",D:20,B:3,context:{depth:3,D:9}},default:{}};function ir(de,Pe,Ge,nt,gt,dt,Jt,Vt){setTimeout(function(){let br=de(Ge?Ge+"."+nt:nt,JSON.stringify(Jt));br&&br.then?br.then(function(){Pe.export(de,Pe,Ge,gt,dt+1,Vt)}):Pe.export(de,Pe,Ge,gt,dt+1,Vt)})}function Rr(de,Pe){if(!(this instanceof Rr))return new Rr(de);var Ge;if(de){vr(de)?de=Wt[de]:(Ge=de.preset)&&(de=Object.assign({},Ge[Ge],de)),Ge=de.charset;var nt=de.lang;vr(Ge)&&(Ge.indexOf(":")===-1&&(Ge+=":default"),Ge=ki[Ge]),vr(nt)&&(nt=ii[nt])}else de={};let gt,dt,Jt=de.context||{};if(this.encode=de.encode||Ge&&Ge.encode||Yr,this.register=Pe||gr(),this.D=gt=de.resolution||9,this.G=Pe=Ge&&Ge.G||de.tokenize||"strict",this.depth=Pe==="strict"&&Jt.depth,this.l=jr(Jt.bidirectional),this.s=dt=jr(de.optimize),this.m=jr(de.fastupdate),this.B=de.minlength||1,this.C=de.boost,this.map=dt?Ir(gt):gr(),this.A=gt=Jt.resolution||1,this.h=dt?Ir(gt):gr(),this.F=Ge&&Ge.F||de.rtl,this.H=(Pe=de.matcher||nt&&nt.H)&&xr(Pe,!1),this.J=(Pe=de.stemmer||nt&&nt.J)&&xr(Pe,!0),Ge=Pe=de.filter||nt&&nt.filter){Ge=Pe,nt=gr();for(let Vt=0,br=Ge.length;Vt<br;Vt++)nt[Ge[Vt]]=1;Ge=nt}this.filter=Ge,this.cache=(Pe=de.cache)&&new fs(Pe)}Li=Rr.prototype,Li.append=function(de,Pe){return this.add(de,Pe,!0)},Li.add=function(de,Pe,Ge,nt){if(Pe&&(de||de===0)){if(!nt&&!Ge&&this.register[de])return this.update(de,Pe);if(Pe=this.encode(Pe),nt=Pe.length){let Ai=gr(),Wi=gr(),te=this.depth,ye=this.D;for(let Se=0;Se<nt;Se++){let Re=Pe[this.F?nt-1-Se:Se];var gt=Re.length;if(Re&&gt>=this.B&&(te||!Wi[Re])){var dt=Ii(ye,nt,Se),Jt="";switch(this.G){case"full":if(2<gt){for(dt=0;dt<gt;dt++)for(var Vt=gt;Vt>dt;Vt--)if(Vt-dt>=this.B){var br=Ii(ye,nt,Se,gt,dt);Jt=Re.substring(dt,Vt),Ni(this,Wi,Jt,br,de,Ge)}break}case"reverse":if(1<gt){for(Vt=gt-1;0<Vt;Vt--)Jt=Re[Vt]+Jt,Jt.length>=this.B&&Ni(this,Wi,Jt,Ii(ye,nt,Se,gt,Vt),de,Ge);Jt=""}case"forward":if(1<gt){for(Vt=0;Vt<gt;Vt++)Jt+=Re[Vt],Jt.length>=this.B&&Ni(this,Wi,Jt,dt,de,Ge);break}default:if(this.C&&(dt=Math.min(dt/this.C(Pe,Re,Se)|0,ye-1)),Ni(this,Wi,Re,dt,de,Ge),te&&1<nt&&Se<nt-1){for(gt=gr(),Jt=this.A,dt=Re,Vt=Math.min(te+1,nt-Se),gt[dt]=1,br=1;br<Vt;br++)if((Re=Pe[this.F?nt-1-Se-br:Se+br])&&Re.length>=this.B&&!gt[Re]){gt[Re]=1;let $e=this.l&&Re>dt;Ni(this,Ai,$e?dt:Re,Ii(Jt+(nt/2>Jt?0:1),nt,Se,Vt-1,br-1),de,Ge,$e?Re:dt)}}}}}this.m||(this.register[de]=1)}}return this};function Ii(de,Pe,Ge,nt,gt){return Ge&&1<de?Pe+(nt||0)<=de?Ge+(gt||0):(de-1)/(Pe+(nt||0))*(Ge+(gt||0))+1|0:0}function Ni(de,Pe,Ge,nt,gt,dt,Jt){let Vt=Jt?de.h:de.map;(!Pe[Ge]||Jt&&!Pe[Ge][Jt])&&(de.s&&(Vt=Vt[nt]),Jt?(Pe=Pe[Ge]||(Pe[Ge]=gr()),Pe[Jt]=1,Vt=Vt[Jt]||(Vt[Jt]=gr())):Pe[Ge]=1,Vt=Vt[Ge]||(Vt[Ge]=[]),de.s||(Vt=Vt[nt]||(Vt[nt]=[])),dt&&Vt.includes(gt)||(Vt[Vt.length]=gt,de.m&&(de=de.register[gt]||(de.register[gt]=[]),de[de.length]=Vt)))}Li.search=function(de,Pe,Ge){Ge||(!Pe&&Vr(de)?(Ge=de,de=Ge.query):Vr(Pe)&&(Ge=Pe));let nt=[],gt,dt,Jt=0;if(Ge){de=Ge.query||de,Pe=Ge.limit,Jt=Ge.offset||0;var Vt=Ge.context;dt=Ge.suggest}if(de&&(de=this.encode(""+de),gt=de.length,1<gt)){Ge=gr();var br=[];for(let Wi=0,te=0,ye;Wi<gt;Wi++)if((ye=de[Wi])&&ye.length>=this.B&&!Ge[ye])if(this.s||dt||this.map[ye])br[te++]=ye,Ge[ye]=1;else return nt;de=br,gt=de.length}if(!gt)return nt;Pe||(Pe=100),Vt=this.depth&&1<gt&&Vt!==!1,Ge=0;let Ai;Vt?(Ai=de[0],Ge=1):1<gt&&de.sort(Zr);for(let Wi,te;Ge<gt;Ge++){if(te=de[Ge],Vt?(Wi=mi(this,nt,dt,Pe,Jt,gt===2,te,Ai),dt&&Wi===!1&&nt.length||(Ai=te)):Wi=mi(this,nt,dt,Pe,Jt,gt===1,te),Wi)return Wi;if(dt&&Ge===gt-1){if(br=nt.length,!br){if(Vt){Vt=0,Ge=-1;continue}return nt}if(br===1)return Qi(nt[0],Pe,Jt)}}return un(nt,Pe,Jt,dt)};function mi(de,Pe,Ge,nt,gt,dt,Jt,Vt){let br=[],Ai=Vt?de.h:de.map;if(de.s||(Ai=Gn(Ai,Jt,Vt,de.l)),Ai){let Wi=0,te=Math.min(Ai.length,Vt?de.A:de.D);for(let ye=0,Se=0,Re,$e;ye<te&&!((Re=Ai[ye])&&(de.s&&(Re=Gn(Re,Jt,Vt,de.l)),gt&&Re&&dt&&($e=Re.length,$e<=gt?(gt-=$e,Re=null):(Re=Re.slice(gt),gt=0)),Re&&(br[Wi++]=Re,dt&&(Se+=Re.length,Se>=nt))));ye++);if(Wi){if(dt)return Qi(br,nt,0);Pe[Pe.length]=br;return}}return!Ge&&br}function Qi(de,Pe,Ge){return de=de.length===1?de[0]:[].concat.apply([],de),Ge||de.length>Pe?de.slice(Ge,Ge+Pe):de}function Gn(de,Pe,Ge,nt){return Ge?(nt=nt&&Pe>Ge,de=(de=de[nt?Pe:Ge])&&de[nt?Ge:Pe]):de=de[Pe],de}Li.contain=function(de){return!!this.register[de]},Li.update=function(de,Pe){return this.remove(de).add(de,Pe)},Li.remove=function(de,Pe){let Ge=this.register[de];if(Ge){if(this.m)for(let nt=0,gt;nt<Ge.length;nt++)gt=Ge[nt],gt.splice(gt.indexOf(de),1);else Kn(this.map,de,this.D,this.s),this.depth&&Kn(this.h,de,this.A,this.s);if(Pe||delete this.register[de],this.cache){Pe=this.cache;for(let nt=0,gt,dt;nt<Pe.h.length;nt++)dt=Pe.h[nt],gt=Pe.cache[dt],gt.includes(de)&&(Pe.h.splice(nt--,1),delete Pe.cache[dt])}}return this};function Kn(de,Pe,Ge,nt,gt){let dt=0;if(de.constructor===Array)if(gt)Pe=de.indexOf(Pe),Pe!==-1?1<de.length&&(de.splice(Pe,1),dt++):dt++;else{gt=Math.min(de.length,Ge);for(let Jt=0,Vt;Jt<gt;Jt++)(Vt=de[Jt])&&(dt=Kn(Vt,Pe,Ge,nt,gt),nt||dt||delete de[Jt])}else for(let Jt in de)(dt=Kn(de[Jt],Pe,Ge,nt,gt))||delete de[Jt];return dt}Li.searchCache=Vn,Li.export=function(de,Pe,Ge,nt,gt,dt){let Jt=!0;typeof dt>"u"&&(Jt=new Promise(Ai=>{dt=Ai}));let Vt,br;switch(gt||(gt=0)){case 0:if(Vt="reg",this.m){br=gr();for(let Ai in this.register)br[Ai]=1}else br=this.register;break;case 1:Vt="cfg",br={doc:0,opt:this.s?1:0};break;case 2:Vt="map",br=this.map;break;case 3:Vt="ctx",br=this.h;break;default:typeof Ge>"u"&&dt&&dt();return}return ir(de,Pe||this,Ge,Vt,nt,gt,br,dt),Jt},Li.import=function(de,Pe){if(Pe)switch(vr(Pe)&&(Pe=JSON.parse(Pe)),de){case"cfg":this.s=!!Pe.opt;break;case"reg":this.m=!1,this.register=Pe;break;case"map":this.map=Pe;break;case"ctx":this.h=Pe}},zn(Rr.prototype);function Zi(de){de=de.data;var Pe=self._index;let Ge=de.args;var nt=de.task;switch(nt){case"init":nt=de.options||{},de=de.factory,Pe=nt.encode,nt.cache=!1,Pe&&Pe.indexOf("function")===0&&(nt.encode=Function("return "+Pe)()),de?(Function("return "+de)()(self),self._index=new self.FlexSearch.Index(nt),delete self.FlexSearch):self._index=new Rr(nt);break;default:de=de.id,Pe=Pe[nt].apply(Pe,Ge),postMessage(nt==="search"?{id:de,msg:Pe}:{id:de})}}var oa=0;function li(de){if(!(this instanceof li))return new li(de);var Pe;de?Ht(Pe=de.encode)&&(de.encode=Pe.toString()):de={},(Pe=(self||window)._factory)&&(Pe=Pe.toString());let Ge=typeof window>"u"&&self.exports,nt=this;this.o=Pi(Pe,Ge,de.worker),this.h=gr(),this.o&&(Ge?this.o.on("message",function(gt){nt.h[gt.id](gt.msg),delete nt.h[gt.id]}):this.o.onmessage=function(gt){gt=gt.data,nt.h[gt.id](gt.msg),delete nt.h[gt.id]},this.o.postMessage({task:"init",factory:Pe,options:de}))}nn("add"),nn("append"),nn("search"),nn("update"),nn("remove");function nn(de){li.prototype[de]=li.prototype[de+"Async"]=function(){let Pe=this,Ge=[].slice.call(arguments);var nt=Ge[Ge.length-1];let gt;return Ht(nt)&&(gt=nt,Ge.splice(Ge.length-1,1)),nt=new Promise(function(dt){setTimeout(function(){Pe.h[++oa]=dt,Pe.o.postMessage({task:de,id:oa,args:Ge})})}),gt?(nt.then(gt),this):nt}}function Pi(de,Pe,Ge){let nt;try{nt=Pe?new(Sn()).Worker(__dirname+"/node/node.js"):de?new Worker(URL.createObjectURL(new Blob(["onmessage="+Zi.toString()],{type:"text/javascript"}))):new Worker(vr(Ge)?Ge:"worker/worker.js",{type:"module"})}catch{}return nt}function _i(de){if(!(this instanceof _i))return new _i(de);var Pe=de.document||de.doc||de,Ge;this.K=[],this.h=[],this.A=[],this.register=gr(),this.key=(Ge=Pe.key||Pe.id)&&Nn(Ge,this.A)||"id",this.m=jr(de.fastupdate),this.C=(Ge=Pe.store)&&Ge!==!0&&[],this.store=Ge&&gr(),this.I=(Ge=Pe.tag)&&Nn(Ge,this.A),this.l=Ge&&gr(),this.cache=(Ge=de.cache)&&new fs(Ge),de.cache=!1,this.o=de.worker,this.async=!1,Ge=gr();let nt=Pe.index||Pe.field||Pe;vr(nt)&&(nt=[nt]);for(let gt=0,dt,Jt;gt<nt.length;gt++)dt=nt[gt],vr(dt)||(Jt=dt,dt=dt.field),Jt=Vr(Jt)?Object.assign({},de,Jt):de,this.o&&(Ge[dt]=new li(Jt),Ge[dt].o||(this.o=!1)),this.o||(Ge[dt]=new Rr(Jt,this.register)),this.K[gt]=Nn(dt,this.A),this.h[gt]=dt;if(this.C)for(de=Pe.store,vr(de)&&(de=[de]),Pe=0;Pe<de.length;Pe++)this.C[Pe]=Nn(de[Pe],this.A);this.index=Ge}function Nn(de,Pe){let Ge=de.split(":"),nt=0;for(let gt=0;gt<Ge.length;gt++)de=Ge[gt],0<=de.indexOf("[]")&&(de=de.substring(0,de.length-2))&&(Pe[nt]=!0),de&&(Ge[nt++]=de);return nt<Ge.length&&(Ge.length=nt),1<nt?Ge:Ge[0]}function an(de,Pe){if(vr(Pe))de=de[Pe];else for(let Ge=0;de&&Ge<Pe.length;Ge++)de=de[Pe[Ge]];return de}function ma(de,Pe,Ge,nt,gt){if(de=de[gt],nt===Ge.length-1)Pe[gt]=de;else if(de)if(de.constructor===Array)for(Pe=Pe[gt]=Array(de.length),gt=0;gt<de.length;gt++)ma(de,Pe,Ge,nt,gt);else Pe=Pe[gt]||(Pe[gt]=gr()),gt=Ge[++nt],ma(de,Pe,Ge,nt,gt)}function Ls(de,Pe,Ge,nt,gt,dt,Jt,Vt){if(de=de[Jt])if(nt===Pe.length-1){if(de.constructor===Array){if(Ge[nt]){for(Pe=0;Pe<de.length;Pe++)gt.add(dt,de[Pe],!0,!0);return}de=de.join(" ")}gt.add(dt,de,Vt,!0)}else if(de.constructor===Array)for(Jt=0;Jt<de.length;Jt++)Ls(de,Pe,Ge,nt,gt,dt,Jt,Vt);else Jt=Pe[++nt],Ls(de,Pe,Ge,nt,gt,dt,Jt,Vt)}Li=_i.prototype,Li.add=function(de,Pe,Ge){if(Vr(de)&&(Pe=de,de=an(Pe,this.key)),Pe&&(de||de===0)){if(!Ge&&this.register[de])return this.update(de,Pe);for(let nt=0,gt,dt;nt<this.h.length;nt++)dt=this.h[nt],gt=this.K[nt],vr(gt)&&(gt=[gt]),Ls(Pe,gt,this.A,0,this.index[dt],de,gt[0],Ge);if(this.I){let nt=an(Pe,this.I),gt=gr();vr(nt)&&(nt=[nt]);for(let dt=0,Jt,Vt;dt<nt.length;dt++)if(Jt=nt[dt],!gt[Jt]&&(gt[Jt]=1,Vt=this.l[Jt]||(this.l[Jt]=[]),!Ge||!Vt.includes(de))&&(Vt[Vt.length]=de,this.m)){let br=this.register[de]||(this.register[de]=[]);br[br.length]=Vt}}if(this.store&&(!Ge||!this.store[de])){let nt;if(this.C){nt=gr();for(let gt=0,dt;gt<this.C.length;gt++)dt=this.C[gt],vr(dt)?nt[dt]=Pe[dt]:ma(Pe,nt,dt,0,dt[0])}this.store[de]=nt||Pe}}return this},Li.append=function(de,Pe){return this.add(de,Pe,!0)},Li.update=function(de,Pe){return this.remove(de).add(de,Pe)},Li.remove=function(de){if(Vr(de)&&(de=an(de,this.key)),this.register[de]){for(var Pe=0;Pe<this.h.length&&(this.index[this.h[Pe]].remove(de,!this.o),!this.m);Pe++);if(this.I&&!this.m)for(let Ge in this.l){Pe=this.l[Ge];let nt=Pe.indexOf(de);nt!==-1&&(1<Pe.length?Pe.splice(nt,1):delete this.l[Ge])}this.store&&delete this.store[de],delete this.register[de]}return this},Li.search=function(de,Pe,Ge,nt){Ge||(!Pe&&Vr(de)?(Ge=de,de=""):Vr(Pe)&&(Ge=Pe,Pe=0));let gt=[],dt=[],Jt,Vt,br,Ai,Wi,te,ye=0;if(Ge)if(Ge.constructor===Array)br=Ge,Ge=null;else{if(de=Ge.query||de,br=(Jt=Ge.pluck)||Ge.index||Ge.field,Ai=Ge.tag,Vt=this.store&&Ge.enrich,Wi=Ge.bool==="and",Pe=Ge.limit||Pe||100,te=Ge.offset||0,Ai&&(vr(Ai)&&(Ai=[Ai]),!de)){for(let Re=0,$e;Re<Ai.length;Re++)($e=Mn.call(this,Ai[Re],Pe,te,Vt))&&(gt[gt.length]=$e,ye++);return ye?gt:[]}vr(br)&&(br=[br])}br||(br=this.h),Wi=Wi&&(1<br.length||Ai&&1<Ai.length);let Se=!nt&&(this.o||this.async)&&[];for(let Re=0,$e,tt,Ct;Re<br.length;Re++){let ge;if(tt=br[Re],vr(tt)||(ge=tt,tt=ge.field,de=ge.query||de,Pe=ge.limit||Pe,Vt=ge.enrich||Vt),Se)Se[Re]=this.index[tt].searchAsync(de,Pe,ge||Ge);else{if(nt?$e=nt[Re]:$e=this.index[tt].search(de,Pe,ge||Ge),Ct=$e&&$e.length,Ai&&Ct){let De=[],Ve=0;Wi&&(De[0]=[$e]);for(let lt=0,ht,vt;lt<Ai.length;lt++)ht=Ai[lt],(Ct=(vt=this.l[ht])&&vt.length)&&(Ve++,De[De.length]=Wi?[vt]:vt);Ve&&($e=Wi?un(De,Pe||100,te||0):ja($e,De),Ct=$e.length)}if(Ct)dt[ye]=tt,gt[ye++]=$e;else if(Wi)return[]}}if(Se){let Re=this;return new Promise(function($e){Promise.all(Se).then(function(tt){$e(Re.search(de,Pe,Ge,tt))})})}if(!ye)return[];if(Jt&&(!Vt||!this.store))return gt[0];for(let Re=0,$e;Re<dt.length;Re++){if($e=gt[Re],$e.length&&Vt&&($e=oo.call(this,$e)),Jt)return $e;gt[Re]={field:dt[Re],result:$e}}return gt};function Mn(de,Pe,Ge,nt){let gt=this.l[de],dt=gt&&gt.length-Ge;if(dt&&0<dt)return(dt>Pe||Ge)&&(gt=gt.slice(Ge,Ge+Pe)),nt&&(gt=oo.call(this,gt)),{tag:de,result:gt}}function oo(de){let Pe=Array(de.length);for(let Ge=0,nt;Ge<de.length;Ge++)nt=de[Ge],Pe[Ge]={id:nt,doc:this.store[nt]};return Pe}Li.contain=function(de){return!!this.register[de]},Li.get=function(de){return this.store[de]},Li.set=function(de,Pe){return this.store[de]=Pe,this},Li.searchCache=Vn,Li.export=function(de,Pe,Ge,nt,gt,dt){let Jt;if(typeof dt>"u"&&(Jt=new Promise(Vt=>{dt=Vt})),gt||(gt=0),nt||(nt=0),nt<this.h.length){let Vt=this.h[nt],br=this.index[Vt];Pe=this,setTimeout(function(){br.export(de,Pe,gt?Vt:"",nt,gt++,dt)||(nt++,gt=1,Pe.export(de,Pe,Vt,nt,gt,dt))})}else{let Vt,br;switch(gt){case 1:Vt="tag",br=this.l,Ge=null;break;case 2:Vt="store",br=this.store,Ge=null;break;default:dt();return}ir(de,this,Ge,Vt,nt,gt,br,dt)}return Jt},Li.import=function(de,Pe){if(Pe)switch(vr(Pe)&&(Pe=JSON.parse(Pe)),de){case"tag":this.l=Pe;break;case"reg":this.m=!1,this.register=Pe;for(let nt=0,gt;nt<this.h.length;nt++)gt=this.index[this.h[nt]],gt.register=Pe,gt.m=!1;break;case"store":this.store=Pe;break;default:de=de.split(".");let Ge=de[0];de=de[1],Ge&&de&&this.index[Ge].import(de,Pe)}},zn(_i.prototype);var Gs={encode:Ao,F:!1,G:""},ji=[dr("[\xE0\xE1\xE2\xE3\xE4\xE5]"),"a",dr("[\xE8\xE9\xEA\xEB]"),"e",dr("[\xEC\xED\xEE\xEF]"),"i",dr("[\xF2\xF3\xF4\xF5\xF6\u0151]"),"o",dr("[\xF9\xFA\xFB\xFC\u0171]"),"u",dr("[\xFD\u0177\xFF]"),"y",dr("\xF1"),"n",dr("[\xE7c]"),"k",dr("\xDF"),"s",dr(" & ")," and "];function Ao(de){var Pe=de=""+de;return Pe.normalize&&(Pe=Pe.normalize("NFD").replace(Wr,"")),xi.call(this,Pe.toLowerCase(),!de.normalize&&ji)}var dl={encode:Rs,F:!1,G:"strict"},Un=/[^a-z0-9]+/,Qa={b:"p",v:"f",w:"f",z:"s",x:"s",\u00DF:"s",d:"t",n:"m",c:"k",g:"k",j:"k",q:"k",i:"e",y:"e",u:"o"};function Rs(de){de=Ao.call(this,de).join(" ");let Pe=[];if(de){let Ge=de.split(Un),nt=Ge.length;for(let gt=0,dt,Jt=0;gt<nt;gt++)if((de=Ge[gt])&&(!this.filter||!this.filter[de])){dt=de[0];let Vt=Qa[dt]||dt,br=Vt;for(let Ai=1;Ai<de.length;Ai++){dt=de[Ai];let Wi=Qa[dt]||dt;Wi&&Wi!==br&&(Vt+=Wi,br=Wi)}Pe[Jt++]=Vt}}return Pe}var Ma={encode:hs,F:!1,G:""},Pl=[dr("ae"),"a",dr("oe"),"o",dr("sh"),"s",dr("th"),"t",dr("ph"),"f",dr("pf"),"f",dr("(?![aeo])h(?![aeo])"),"",dr("(?!^[aeo])h(?!^[aeo])"),""];function hs(de,Pe){return de&&(de=Rs.call(this,de).join(" "),2<de.length&&(de=Zt(de,Pl)),Pe||(1<de.length&&(de=nr(de)),de&&(de=de.split(" ")))),de||[]}var Wn={encode:Cr,F:!1,G:""},el=dr("(?!\\b)[aeo]");function Cr(de){return de&&(de=hs.call(this,de,!0),1<de.length&&(de=de.replace(el,"")),1<de.length&&(de=nr(de)),de&&(de=de.split(" "))),de||[]}ki["latin:default"]=qt,ki["latin:simple"]=Gs,ki["latin:balance"]=dl,ki["latin:advanced"]=Ma,ki["latin:extra"]=Wn;var kh={Index:Rr,Document:_i,Worker:li,registerCharset:function(de,Pe){ki[de]=Pe},registerLanguage:function(de,Pe){ii[de]=Pe}},Sa=class{seed;m=2147483648;a=1103515245;c=42069;constructor(de){this.seed=de}next(){return this.seed=(this.a*this.seed+this.c)%this.m,this.seed/this.m}nextInt(de,Pe){return Math.floor(this.next()*(Pe-de)+de)}choice(de){return de[this.nextInt(0,de.length)]}shuffle(de){let Pe=[...de];for(let Ge=Pe.length-1;Ge>0;Ge--){let nt=this.nextInt(0,Ge+1);[Pe[Ge],Pe[nt]]=[Pe[nt],Pe[Ge]]}return Pe}},Fi="https://curius.app",Th=`${Fi}/aaron-pham`,mu={method:"POST",headers:{"Content-Type":"application/json"}},pt={id:0,link:"",title:"",favorite:!1,snippet:"",toRead:!1,createdBy:0,metadata:{full_text:"",author:"",page_type:""},createdDate:"",modifiedDate:"",lastCrawled:null,trails:[],comments:[],mentions:[],topics:[],highlights:[],userIds:[]};function Ts(de){let Pe=new Date,Ge=de instanceof Date?de:new Date(de),nt=Math.floor((Pe.getTime()-Ge.getTime())/1e3),gt=Math.floor(nt/(3600*24)),dt=Math.floor(nt%(3600*24)/3600),Jt=Math.floor(nt%3600/60);return gt>1?`${gt} days ago`:gt===1?"1 day ago":dt>1?`${dt} hours ago`:dt===1?"1 hour ago":Jt>1?`${Jt} minutes ago`:Jt===1?"1 minute ago":"just now"}async function yu(){try{let de=await fetch("https://cdn.aarnphm.xyz/api/curius?query=following",mu);if(!de.ok)throw new Error("Failed to get followings from curius");let Pe=await de.json();if(Pe===void 0||Pe.following===void 0)throw new Error("No following data");return Pe.following}catch(de){console.error(de)}}var vu=new kh.Document({charset:"latin:advanced",document:{id:"id",index:[...Object.keys(pt).map(de=>({field:de,tokenize:"forward"}))]}}),vo=new Date,Es=vo.getFullYear()*1e4+(vo.getMonth()+1)*100+vo.getDate(),ui=new Sa(Es);document.addEventListener("nav",async()=>{let de=document.getElementById("friends-list"),Pe=document.getElementById("see-more-friends");if(!de)return;let Ge=await yu();if(!Ge)return;Kr(de),Ge.map((gt,dt)=>{let{user:Jt,link:Vt}=gt,br=document.createElement("li");br.classList.add("friend-li");let Ai=$e=>{$e.target instanceof HTMLAnchorElement||window.open(Vt.link,"_blank")};br.addEventListener("click",Ai),window.addCleanup(()=>br.removeEventListener("click",Ai)),Ot(br,"focus"),dt<4?br.classList.add("active"):br.id="inactive";let Wi=document.createElement("div");Wi.classList.add("friend-title");let te=document.createElement("a");te.classList.add("friend-name"),te.innerHTML=`${Jt.firstName} ${Jt.lastName}`,te.style.fontWeight="bold",te.href=`https://curius.app/${Jt.userLink}`,te.target="_blank";let ye=document.createElement("span");ye.id=`curius-span-${gt.link.id}`;let Se=new Date(Vt.modifiedDate);ye.innerHTML=`<time datetime=${Vt.modifiedDate} title="${Se.toUTCString()}">${Ts(Vt.createdDate)}</time>`,Wi.append(te,ye);let Re=document.createElement("div");Re.classList.add("friend-shortcut"),Re.innerHTML=`in <span style="color: var(--gray) !important">${Vt.title}</span>`,br.append(Wi,Re),de.appendChild(br)});let nt=()=>{let gt=document.getElementById("friends-list"),dt=Pe?.querySelectorAll("svg")[0],Jt=Pe?.querySelectorAll("span")[0],Vt=Array.from(gt?.children).filter(br=>br.id==="inactive");Pe?.classList.contains("expand")?(Pe.classList.remove("expand"),Vt.map(br=>br.classList.remove("active")),dt&&(dt.classList.remove("fold"),dt.viewBox.baseVal.y=-10),Jt&&(Jt.textContent="de plus")):(Pe?.classList.add("expand"),Vt.map(br=>br.classList.add("active")),dt&&(dt.classList.add("fold"),dt.viewBox.baseVal.y=10),Jt&&(Jt.textContent="moins"))};Pe?.addEventListener("click",nt),window.addCleanup(()=>Pe?.removeEventListener("click",nt))})}(),function(){document.addEventListener("nav",()=>{if(document.body.dataset.slug==="404"){let na=document.querySelector(".home-tooltip"),ta=Fa=>{let On=Fa.clientX,dn=Fa.clientY;na.style.left=`${On}px`,na.style.top=`${dn+30}px`},Ua=Fa=>{Fa.preventDefault(),window.spaNavigate(new URL("/",window.location.toString()))};document.body.addEventListener("click",Ua),document.body.addEventListener("mousemove",ta),document.body.addEventListener("mouseenter",()=>{na.classList.add("visible")}),document.body.addEventListener("mouseleave",()=>{na.classList.remove("visible")}),window.addCleanup(()=>{document.body.removeEventListener("click",Ua),document.body.removeEventListener("mousemove",ta)})}})}(),function(){var na=Object.create,ta=Object.defineProperty,Ua=Object.getOwnPropertyDescriptor,Fa=Object.getOwnPropertyNames,On=Object.getPrototypeOf,dn=Object.prototype.hasOwnProperty,D=(ge,De)=>()=>(De||ge((De={exports:{}}).exports,De),De.exports),hi=(ge,De,Ve,lt)=>{if(De&&typeof De=="object"||typeof De=="function")for(let ht of Fa(De))!dn.call(ge,ht)&&ht!==Ve&&ta(ge,ht,{get:()=>De[ht],enumerable:!(lt=Ua(De,ht))||lt.enumerable});return ge},oi=(ge,De,Ve)=>(Ve=ge!=null?na(On(ge)):{},hi(De||!ge||!ge.__esModule?ta(Ve,"default",{value:ge,enumerable:!0}):Ve,ge)),aa=D((ge,De)=>{"use strict";De.exports=lt;function Ve(vt){return vt instanceof Buffer?Buffer.from(vt):new vt.constructor(vt.buffer.slice(),vt.byteOffset,vt.length)}function lt(vt){if(vt=vt||{},vt.circles)return ht(vt);let ut=new Map;if(ut.set(Date,pr=>new Date(pr)),ut.set(Map,(pr,Er)=>new Map(jt(Array.from(pr),Er))),ut.set(Set,(pr,Er)=>new Set(jt(Array.from(pr),Er))),vt.constructorHandlers)for(let pr of vt.constructorHandlers)ut.set(pr[0],pr[1]);let xt=null;return vt.proto?ei:ur;function jt(pr,Er){let Gt=Object.keys(pr),Dr=new Array(Gt.length);for(let $i=0;$i<Gt.length;$i++){let Ar=Gt[$i],pn=pr[Ar];typeof pn!="object"||pn===null?Dr[Ar]=pn:pn.constructor!==Object&&(xt=ut.get(pn.constructor))?Dr[Ar]=xt(pn,Er):ArrayBuffer.isView(pn)?Dr[Ar]=Ve(pn):Dr[Ar]=Er(pn)}return Dr}function ur(pr){if(typeof pr!="object"||pr===null)return pr;if(Array.isArray(pr))return jt(pr,ur);if(pr.constructor!==Object&&(xt=ut.get(pr.constructor)))return xt(pr,ur);let Er={};for(let Gt in pr){if(Object.hasOwnProperty.call(pr,Gt)===!1)continue;let Dr=pr[Gt];typeof Dr!="object"||Dr===null?Er[Gt]=Dr:Dr.constructor!==Object&&(xt=ut.get(Dr.constructor))?Er[Gt]=xt(Dr,ur):ArrayBuffer.isView(Dr)?Er[Gt]=Ve(Dr):Er[Gt]=ur(Dr)}return Er}function ei(pr){if(typeof pr!="object"||pr===null)return pr;if(Array.isArray(pr))return jt(pr,ei);if(pr.constructor!==Object&&(xt=ut.get(pr.constructor)))return xt(pr,ei);let Er={};for(let Gt in pr){let Dr=pr[Gt];typeof Dr!="object"||Dr===null?Er[Gt]=Dr:Dr.constructor!==Object&&(xt=ut.get(Dr.constructor))?Er[Gt]=xt(Dr,ei):ArrayBuffer.isView(Dr)?Er[Gt]=Ve(Dr):Er[Gt]=ei(Dr)}return Er}}function ht(vt){let ut=[],xt=[],jt=new Map;if(jt.set(Date,Gt=>new Date(Gt)),jt.set(Map,(Gt,Dr)=>new Map(ei(Array.from(Gt),Dr))),jt.set(Set,(Gt,Dr)=>new Set(ei(Array.from(Gt),Dr))),vt.constructorHandlers)for(let Gt of vt.constructorHandlers)jt.set(Gt[0],Gt[1]);let ur=null;return vt.proto?Er:pr;function ei(Gt,Dr){let $i=Object.keys(Gt),Ar=new Array($i.length);for(let pn=0;pn<$i.length;pn++){let ra=$i[pn],Qr=Gt[ra];if(typeof Qr!="object"||Qr===null)Ar[ra]=Qr;else if(Qr.constructor!==Object&&(ur=jt.get(Qr.constructor)))Ar[ra]=ur(Qr,Dr);else if(ArrayBuffer.isView(Qr))Ar[ra]=Ve(Qr);else{let Hi=ut.indexOf(Qr);Hi!==-1?Ar[ra]=xt[Hi]:Ar[ra]=Dr(Qr)}}return Ar}function pr(Gt){if(typeof Gt!="object"||Gt===null)return Gt;if(Array.isArray(Gt))return ei(Gt,pr);if(Gt.constructor!==Object&&(ur=jt.get(Gt.constructor)))return ur(Gt,pr);let Dr={};ut.push(Gt),xt.push(Dr);for(let $i in Gt){if(Object.hasOwnProperty.call(Gt,$i)===!1)continue;let Ar=Gt[$i];if(typeof Ar!="object"||Ar===null)Dr[$i]=Ar;else if(Ar.constructor!==Object&&(ur=jt.get(Ar.constructor)))Dr[$i]=ur(Ar,pr);else if(ArrayBuffer.isView(Ar))Dr[$i]=Ve(Ar);else{let pn=ut.indexOf(Ar);pn!==-1?Dr[$i]=xt[pn]:Dr[$i]=pr(Ar)}}return ut.pop(),xt.pop(),Dr}function Er(Gt){if(typeof Gt!="object"||Gt===null)return Gt;if(Array.isArray(Gt))return ei(Gt,Er);if(Gt.constructor!==Object&&(ur=jt.get(Gt.constructor)))return ur(Gt,Er);let Dr={};ut.push(Gt),xt.push(Dr);for(let $i in Gt){let Ar=Gt[$i];if(typeof Ar!="object"||Ar===null)Dr[$i]=Ar;else if(Ar.constructor!==Object&&(ur=jt.get(Ar.constructor)))Dr[$i]=ur(Ar,Er);else if(ArrayBuffer.isView(Ar))Dr[$i]=Ve(Ar);else{let pn=ut.indexOf(Ar);pn!==-1?Dr[$i]=xt[pn]:Dr[$i]=Er(Ar)}}return ut.pop(),xt.pop(),Dr}}}),Sn=Math.min,Ke=Math.max,Ca=Math.round,ba=ge=>({x:ge,y:ge}),Kr={left:"right",right:"left",bottom:"top",top:"bottom"},Ot={start:"end",end:"start"};function Vi(ge,De,Ve){return Ke(ge,Sn(De,Ve))}function Li(ge,De){return typeof ge=="function"?ge(De):ge}function jr(ge){return ge.split("-")[0]}function Ir(ge){return ge.split("-")[1]}function gr(ge){return ge==="x"?"y":"x"}function Zr(ge){return ge==="y"?"height":"width"}function vr(ge){return["top","bottom"].includes(jr(ge))?"y":"x"}function Vr(ge){return gr(vr(ge))}function Ht(ge,De,Ve){Ve===void 0&&(Ve=!1);let lt=Ir(ge),ht=Vr(ge),vt=Zr(ht),ut=ht==="x"?lt===(Ve?"end":"start")?"right":"left":lt==="start"?"bottom":"top";return De.reference[vt]>De.floating[vt]&&(ut=Zt(ut)),[ut,Zt(ut)]}function xi(ge){let De=Zt(ge);return[or(ge),De,or(De)]}function or(ge){return ge.replace(/start|end/g,De=>Ot[De])}function Wr(ge,De,Ve){let lt=["left","right"],ht=["right","left"],vt=["top","bottom"],ut=["bottom","top"];switch(ge){case"top":case"bottom":return Ve?De?ht:lt:De?lt:ht;case"left":case"right":return De?vt:ut;default:return[]}}function xr(ge,De,Ve,lt){let ht=Ir(ge),vt=Wr(jr(ge),Ve==="start",lt);return ht&&(vt=vt.map(ut=>ut+"-"+ht),De&&(vt=vt.concat(vt.map(or)))),vt}function Zt(ge){return ge.replace(/left|right|bottom|top/g,De=>Kr[De])}function dr(ge){return{top:0,right:0,bottom:0,left:0,...ge}}function nr(ge){return typeof ge!="number"?dr(ge):{top:ge,right:ge,bottom:ge,left:ge}}function qt(ge){let{x:De,y:Ve,width:lt,height:ht}=ge;return{width:lt,height:ht,top:Ve,left:De,right:De+lt,bottom:Ve+ht,x:De,y:Ve}}function Yr(ge,De,Ve){let{reference:lt,floating:ht}=ge,vt=vr(De),ut=Vr(De),xt=Zr(ut),jt=jr(De),ur=vt==="y",ei=lt.x+lt.width/2-ht.width/2,pr=lt.y+lt.height/2-ht.height/2,Er=lt[xt]/2-ht[xt]/2,Gt;switch(jt){case"top":Gt={x:ei,y:lt.y-ht.height};break;case"bottom":Gt={x:ei,y:lt.y+lt.height};break;case"right":Gt={x:lt.x+lt.width,y:pr};break;case"left":Gt={x:lt.x-ht.width,y:pr};break;default:Gt={x:lt.x,y:lt.y}}switch(Ir(De)){case"start":Gt[ut]-=Er*(Ve&&ur?-1:1);break;case"end":Gt[ut]+=Er*(Ve&&ur?-1:1);break}return Gt}var ii=async(ge,De,Ve)=>{let{placement:lt="bottom",strategy:ht="absolute",middleware:vt=[],platform:ut}=Ve,xt=vt.filter(Boolean),jt=await(ut.isRTL==null?void 0:ut.isRTL(De)),ur=await ut.getElementRects({reference:ge,floating:De,strategy:ht}),{x:ei,y:pr}=Yr(ur,lt,jt),Er=lt,Gt={},Dr=0;for(let $i=0;$i<xt.length;$i++){let{name:Ar,fn:pn}=xt[$i],{x:ra,y:Qr,data:Hi,reset:Ln}=await pn({x:ei,y:pr,initialPlacement:lt,placement:Er,strategy:ht,middlewareData:Gt,rects:ur,platform:ut,elements:{reference:ge,floating:De}});ei=ra??ei,pr=Qr??pr,Gt={...Gt,[Ar]:{...Gt[Ar],...Hi}},Ln&&Dr<=50&&(Dr++,typeof Ln=="object"&&(Ln.placement&&(Er=Ln.placement),Ln.rects&&(ur=Ln.rects===!0?await ut.getElementRects({reference:ge,floating:De,strategy:ht}):Ln.rects),{x:ei,y:pr}=Yr(ur,Er,jt)),$i=-1)}return{x:ei,y:pr,placement:Er,strategy:ht,middlewareData:Gt}};async function ki(ge,De){var Ve;De===void 0&&(De={});let{x:lt,y:ht,platform:vt,rects:ut,elements:xt,strategy:jt}=ge,{boundary:ur="clippingAncestors",rootBoundary:ei="viewport",elementContext:pr="floating",altBoundary:Er=!1,padding:Gt=0}=Li(De,ge),Dr=nr(Gt),$i=xt[Er?pr==="floating"?"reference":"floating":pr],Ar=qt(await vt.getClippingRect({element:(Ve=await(vt.isElement==null?void 0:vt.isElement($i)))==null||Ve?$i:$i.contextElement||await(vt.getDocumentElement==null?void 0:vt.getDocumentElement(xt.floating)),boundary:ur,rootBoundary:ei,strategy:jt})),pn=pr==="floating"?{x:lt,y:ht,width:ut.floating.width,height:ut.floating.height}:ut.reference,ra=await(vt.getOffsetParent==null?void 0:vt.getOffsetParent(xt.floating)),Qr=await(vt.isElement==null?void 0:vt.isElement(ra))?await(vt.getScale==null?void 0:vt.getScale(ra))||{x:1,y:1}:{x:1,y:1},Hi=qt(vt.convertOffsetParentRelativeRectToViewportRelativeRect?await vt.convertOffsetParentRelativeRectToViewportRelativeRect({elements:xt,rect:pn,offsetParent:ra,strategy:jt}):pn);return{top:(Ar.top-Hi.top+Dr.top)/Qr.y,bottom:(Hi.bottom-Ar.bottom+Dr.bottom)/Qr.y,left:(Ar.left-Hi.left+Dr.left)/Qr.x,right:(Hi.right-Ar.right+Dr.right)/Qr.x}}var zn=function(ge){return ge===void 0&&(ge={}),{name:"flip",options:ge,async fn(De){var Ve,lt;let{placement:ht,middlewareData:vt,rects:ut,initialPlacement:xt,platform:jt,elements:ur}=De,{mainAxis:ei=!0,crossAxis:pr=!0,fallbackPlacements:Er,fallbackStrategy:Gt="bestFit",fallbackAxisSideDirection:Dr="none",flipAlignment:$i=!0,...Ar}=Li(ge,De);if((Ve=vt.arrow)!=null&&Ve.alignmentOffset)return{};let pn=jr(ht),ra=vr(xt),Qr=jr(xt)===xt,Hi=await(jt.isRTL==null?void 0:jt.isRTL(ur.floating)),Ln=Er||(Qr||!$i?[Zt(xt)]:xi(xt)),ss=Dr!=="none";!Er&&ss&&Ln.push(...xr(xt,$i,Dr,Hi));let _a=[xt,...Ln],la=await ki(De,Ar),Us=[],Y=((lt=vt.flip)==null?void 0:lt.overflows)||[];if(ei&&Us.push(la[pn]),pr){let je=Ht(ht,ut,Hi);Us.push(la[je[0]],la[je[1]])}if(Y=[...Y,{placement:ht,overflows:Us}],!Us.every(je=>je<=0)){var _e,Fe;let je=(((_e=vt.flip)==null?void 0:_e.index)||0)+1,mt=_a[je];if(mt)return{data:{index:je,overflows:Y},reset:{placement:mt}};let Nt=(Fe=Y.filter(It=>It.overflows[0]<=0).sort((It,rr)=>It.overflows[1]-rr.overflows[1])[0])==null?void 0:Fe.placement;if(!Nt)switch(Gt){case"bestFit":{var Ue;let It=(Ue=Y.filter(rr=>{if(ss){let wr=vr(rr.placement);return wr===ra||wr==="y"}return!0}).map(rr=>[rr.placement,rr.overflows.filter(wr=>wr>0).reduce((wr,ni)=>wr+ni,0)]).sort((rr,wr)=>rr[1]-wr[1])[0])==null?void 0:Ue[0];It&&(Nt=It);break}case"initialPlacement":Nt=xt;break}if(ht!==Nt)return{reset:{placement:Nt}}}return{}}}};function sa(ge){let De=Sn(...ge.map(vt=>vt.left)),Ve=Sn(...ge.map(vt=>vt.top)),lt=Ke(...ge.map(vt=>vt.right)),ht=Ke(...ge.map(vt=>vt.bottom));return{x:De,y:Ve,width:lt-De,height:ht-Ve}}function un(ge){let De=ge.slice().sort((ht,vt)=>ht.y-vt.y),Ve=[],lt=null;for(let ht=0;ht<De.length;ht++){let vt=De[ht];!lt||vt.y-lt.y>lt.height/2?Ve.push([vt]):Ve[Ve.length-1].push(vt),lt=vt}return Ve.map(ht=>qt(sa(ht)))}var ja=function(ge){return ge===void 0&&(ge={}),{name:"inline",options:ge,async fn(De){let{placement:Ve,elements:lt,rects:ht,platform:vt,strategy:ut}=De,{padding:xt=2,x:jt,y:ur}=Li(ge,De),ei=Array.from(await(vt.getClientRects==null?void 0:vt.getClientRects(lt.reference))||[]),pr=un(ei),Er=qt(sa(ei)),Gt=nr(xt);function Dr(){if(pr.length===2&&pr[0].left>pr[1].right&&jt!=null&&ur!=null)return pr.find(Ar=>jt>Ar.left-Gt.left&&jt<Ar.right+Gt.right&&ur>Ar.top-Gt.top&&ur<Ar.bottom+Gt.bottom)||Er;if(pr.length>=2){if(vr(Ve)==="y"){let Y=pr[0],_e=pr[pr.length-1],Fe=jr(Ve)==="top",Ue=Y.top,je=_e.bottom,mt=Fe?Y.left:_e.left,Nt=Fe?Y.right:_e.right,It=Nt-mt,rr=je-Ue;return{top:Ue,bottom:je,left:mt,right:Nt,width:It,height:rr,x:mt,y:Ue}}let Ar=jr(Ve)==="left",pn=Ke(...pr.map(Y=>Y.right)),ra=Sn(...pr.map(Y=>Y.left)),Qr=pr.filter(Y=>Ar?Y.left===ra:Y.right===pn),Hi=Qr[0].top,Ln=Qr[Qr.length-1].bottom,ss=ra,_a=pn,la=_a-ss,Us=Ln-Hi;return{top:Hi,bottom:Ln,left:ss,right:_a,width:la,height:Us,x:ss,y:Hi}}return Er}let $i=await vt.getElementRects({reference:{getBoundingClientRect:Dr},floating:lt.floating,strategy:ut});return ht.reference.x!==$i.reference.x||ht.reference.y!==$i.reference.y||ht.reference.width!==$i.reference.width||ht.reference.height!==$i.reference.height?{reset:{rects:$i}}:{}}}},fs=function(ge){return ge===void 0&&(ge={}),{name:"shift",options:ge,async fn(De){let{x:Ve,y:lt,placement:ht}=De,{mainAxis:vt=!0,crossAxis:ut=!1,limiter:xt={fn:Ar=>{let{x:pn,y:ra}=Ar;return{x:pn,y:ra}}},...jt}=Li(ge,De),ur={x:Ve,y:lt},ei=await ki(De,jt),pr=vr(jr(ht)),Er=gr(pr),Gt=ur[Er],Dr=ur[pr];if(vt){let Ar=Er==="y"?"top":"left",pn=Er==="y"?"bottom":"right",ra=Gt+ei[Ar],Qr=Gt-ei[pn];Gt=Vi(ra,Gt,Qr)}if(ut){let Ar=pr==="y"?"top":"left",pn=pr==="y"?"bottom":"right",ra=Dr+ei[Ar],Qr=Dr-ei[pn];Dr=Vi(ra,Dr,Qr)}let $i=xt.fn({...De,[Er]:Gt,[pr]:Dr});return{...$i,data:{x:$i.x-Ve,y:$i.y-lt,enabled:{[Er]:vt,[pr]:ut}}}}}};function Vn(){return typeof window<"u"}function Wt(ge){return Ii(ge)?(ge.nodeName||"").toLowerCase():"#document"}function ir(ge){var De;return(ge==null||(De=ge.ownerDocument)==null?void 0:De.defaultView)||window}function Rr(ge){var De;return(De=(Ii(ge)?ge.ownerDocument:ge.document)||window.document)==null?void 0:De.documentElement}function Ii(ge){return Vn()?ge instanceof Node||ge instanceof ir(ge).Node:!1}function Ni(ge){return Vn()?ge instanceof Element||ge instanceof ir(ge).Element:!1}function mi(ge){return Vn()?ge instanceof HTMLElement||ge instanceof ir(ge).HTMLElement:!1}function Qi(ge){return!Vn()||typeof ShadowRoot>"u"?!1:ge instanceof ShadowRoot||ge instanceof ir(ge).ShadowRoot}function Gn(ge){let{overflow:De,overflowX:Ve,overflowY:lt,display:ht}=_i(ge);return/auto|scroll|overlay|hidden|clip/.test(De+lt+Ve)&&!["inline","contents"].includes(ht)}function Kn(ge){return["table","td","th"].includes(Wt(ge))}function Zi(ge){return[":popover-open",":modal"].some(De=>{try{return ge.matches(De)}catch{return!1}})}function oa(ge){let De=nn(),Ve=Ni(ge)?_i(ge):ge;return Ve.transform!=="none"||Ve.perspective!=="none"||(Ve.containerType?Ve.containerType!=="normal":!1)||!De&&(Ve.backdropFilter?Ve.backdropFilter!=="none":!1)||!De&&(Ve.filter?Ve.filter!=="none":!1)||["transform","perspective","filter"].some(lt=>(Ve.willChange||"").includes(lt))||["paint","layout","strict","content"].some(lt=>(Ve.contain||"").includes(lt))}function li(ge){let De=an(ge);for(;mi(De)&&!Pi(De);){if(oa(De))return De;if(Zi(De))return null;De=an(De)}return null}function nn(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Pi(ge){return["html","body","#document"].includes(Wt(ge))}function _i(ge){return ir(ge).getComputedStyle(ge)}function Nn(ge){return Ni(ge)?{scrollLeft:ge.scrollLeft,scrollTop:ge.scrollTop}:{scrollLeft:ge.scrollX,scrollTop:ge.scrollY}}function an(ge){if(Wt(ge)==="html")return ge;let De=ge.assignedSlot||ge.parentNode||Qi(ge)&&ge.host||Rr(ge);return Qi(De)?De.host:De}function ma(ge){let De=an(ge);return Pi(De)?ge.ownerDocument?ge.ownerDocument.body:ge.body:mi(De)&&Gn(De)?De:ma(De)}function Ls(ge,De,Ve){var lt;De===void 0&&(De=[]),Ve===void 0&&(Ve=!0);let ht=ma(ge),vt=ht===((lt=ge.ownerDocument)==null?void 0:lt.body),ut=ir(ht);if(vt){let xt=Mn(ut);return De.concat(ut,ut.visualViewport||[],Gn(ht)?ht:[],xt&&Ve?Ls(xt):[])}return De.concat(ht,Ls(ht,[],Ve))}function Mn(ge){return ge.parent&&Object.getPrototypeOf(ge.parent)?ge.frameElement:null}function oo(ge){let De=_i(ge),Ve=parseFloat(De.width)||0,lt=parseFloat(De.height)||0,ht=mi(ge),vt=ht?ge.offsetWidth:Ve,ut=ht?ge.offsetHeight:lt,xt=Ca(Ve)!==vt||Ca(lt)!==ut;return xt&&(Ve=vt,lt=ut),{width:Ve,height:lt,$:xt}}function Gs(ge){return Ni(ge)?ge:ge.contextElement}function ji(ge){let De=Gs(ge);if(!mi(De))return ba(1);let Ve=De.getBoundingClientRect(),{width:lt,height:ht,$:vt}=oo(De),ut=(vt?Ca(Ve.width):Ve.width)/lt,xt=(vt?Ca(Ve.height):Ve.height)/ht;return(!ut||!Number.isFinite(ut))&&(ut=1),(!xt||!Number.isFinite(xt))&&(xt=1),{x:ut,y:xt}}var Ao=ba(0);function dl(ge){let De=ir(ge);return!nn()||!De.visualViewport?Ao:{x:De.visualViewport.offsetLeft,y:De.visualViewport.offsetTop}}function Un(ge,De,Ve){return De===void 0&&(De=!1),!Ve||De&&Ve!==ir(ge)?!1:De}function Qa(ge,De,Ve,lt){De===void 0&&(De=!1),Ve===void 0&&(Ve=!1);let ht=ge.getBoundingClientRect(),vt=Gs(ge),ut=ba(1);De&&(lt?Ni(lt)&&(ut=ji(lt)):ut=ji(ge));let xt=Un(vt,Ve,lt)?dl(vt):ba(0),jt=(ht.left+xt.x)/ut.x,ur=(ht.top+xt.y)/ut.y,ei=ht.width/ut.x,pr=ht.height/ut.y;if(vt){let Er=ir(vt),Gt=lt&&Ni(lt)?ir(lt):lt,Dr=Er,$i=Mn(Dr);for(;$i&&lt&&Gt!==Dr;){let Ar=ji($i),pn=$i.getBoundingClientRect(),ra=_i($i),Qr=pn.left+($i.clientLeft+parseFloat(ra.paddingLeft))*Ar.x,Hi=pn.top+($i.clientTop+parseFloat(ra.paddingTop))*Ar.y;jt*=Ar.x,ur*=Ar.y,ei*=Ar.x,pr*=Ar.y,jt+=Qr,ur+=Hi,Dr=ir($i),$i=Mn(Dr)}}return qt({width:ei,height:pr,x:jt,y:ur})}function Rs(ge,De){let Ve=Nn(ge).scrollLeft;return De?De.left+Ve:Qa(Rr(ge)).left+Ve}function Ma(ge,De,Ve){Ve===void 0&&(Ve=!1);let lt=ge.getBoundingClientRect(),ht=lt.left+De.scrollLeft-(Ve?0:Rs(ge,lt)),vt=lt.top+De.scrollTop;return{x:ht,y:vt}}function Pl(ge){let{elements:De,rect:Ve,offsetParent:lt,strategy:ht}=ge,vt=ht==="fixed",ut=Rr(lt),xt=De?Zi(De.floating):!1;if(lt===ut||xt&&vt)return Ve;let jt={scrollLeft:0,scrollTop:0},ur=ba(1),ei=ba(0),pr=mi(lt);if((pr||!pr&&!vt)&&((Wt(lt)!=="body"||Gn(ut))&&(jt=Nn(lt)),mi(lt))){let Gt=Qa(lt);ur=ji(lt),ei.x=Gt.x+lt.clientLeft,ei.y=Gt.y+lt.clientTop}let Er=ut&&!pr&&!vt?Ma(ut,jt,!0):ba(0);return{width:Ve.width*ur.x,height:Ve.height*ur.y,x:Ve.x*ur.x-jt.scrollLeft*ur.x+ei.x+Er.x,y:Ve.y*ur.y-jt.scrollTop*ur.y+ei.y+Er.y}}function hs(ge){return Array.from(ge.getClientRects())}function Wn(ge){let De=Rr(ge),Ve=Nn(ge),lt=ge.ownerDocument.body,ht=Ke(De.scrollWidth,De.clientWidth,lt.scrollWidth,lt.clientWidth),vt=Ke(De.scrollHeight,De.clientHeight,lt.scrollHeight,lt.clientHeight),ut=-Ve.scrollLeft+Rs(ge),xt=-Ve.scrollTop;return _i(lt).direction==="rtl"&&(ut+=Ke(De.clientWidth,lt.clientWidth)-ht),{width:ht,height:vt,x:ut,y:xt}}function el(ge,De){let Ve=ir(ge),lt=Rr(ge),ht=Ve.visualViewport,vt=lt.clientWidth,ut=lt.clientHeight,xt=0,jt=0;if(ht){vt=ht.width,ut=ht.height;let ur=nn();(!ur||ur&&De==="fixed")&&(xt=ht.offsetLeft,jt=ht.offsetTop)}return{width:vt,height:ut,x:xt,y:jt}}function Cr(ge,De){let Ve=Qa(ge,!0,De==="fixed"),lt=Ve.top+ge.clientTop,ht=Ve.left+ge.clientLeft,vt=mi(ge)?ji(ge):ba(1),ut=ge.clientWidth*vt.x,xt=ge.clientHeight*vt.y,jt=ht*vt.x,ur=lt*vt.y;return{width:ut,height:xt,x:jt,y:ur}}function kh(ge,De,Ve){let lt;if(De==="viewport")lt=el(ge,Ve);else if(De==="document")lt=Wn(Rr(ge));else if(Ni(De))lt=Cr(De,Ve);else{let ht=dl(ge);lt={x:De.x-ht.x,y:De.y-ht.y,width:De.width,height:De.height}}return qt(lt)}function Sa(ge,De){let Ve=an(ge);return Ve===De||!Ni(Ve)||Pi(Ve)?!1:_i(Ve).position==="fixed"||Sa(Ve,De)}function Fi(ge,De){let Ve=De.get(ge);if(Ve)return Ve;let lt=Ls(ge,[],!1).filter(xt=>Ni(xt)&&Wt(xt)!=="body"),ht=null,vt=_i(ge).position==="fixed",ut=vt?an(ge):ge;for(;Ni(ut)&&!Pi(ut);){let xt=_i(ut),jt=oa(ut);!jt&&xt.position==="fixed"&&(ht=null),(vt?!jt&&!ht:!jt&&xt.position==="static"&&ht&&["absolute","fixed"].includes(ht.position)||Gn(ut)&&!jt&&Sa(ge,ut))?lt=lt.filter(ur=>ur!==ut):ht=xt,ut=an(ut)}return De.set(ge,lt),lt}function Th(ge){let{element:De,boundary:Ve,rootBoundary:lt,strategy:ht}=ge,vt=[...Ve==="clippingAncestors"?Zi(De)?[]:Fi(De,this._c):[].concat(Ve),lt],ut=vt[0],xt=vt.reduce((jt,ur)=>{let ei=kh(De,ur,ht);return jt.top=Ke(ei.top,jt.top),jt.right=Sn(ei.right,jt.right),jt.bottom=Sn(ei.bottom,jt.bottom),jt.left=Ke(ei.left,jt.left),jt},kh(De,ut,ht));return{width:xt.right-xt.left,height:xt.bottom-xt.top,x:xt.left,y:xt.top}}function mu(ge){let{width:De,height:Ve}=oo(ge);return{width:De,height:Ve}}function pt(ge,De,Ve){let lt=mi(De),ht=Rr(De),vt=Ve==="fixed",ut=Qa(ge,!0,vt,De),xt={scrollLeft:0,scrollTop:0},jt=ba(0);if(lt||!lt&&!vt)if((Wt(De)!=="body"||Gn(ht))&&(xt=Nn(De)),lt){let Er=Qa(De,!0,vt,De);jt.x=Er.x+De.clientLeft,jt.y=Er.y+De.clientTop}else ht&&(jt.x=Rs(ht));let ur=ht&&!lt&&!vt?Ma(ht,xt):ba(0),ei=ut.left+xt.scrollLeft-jt.x-ur.x,pr=ut.top+xt.scrollTop-jt.y-ur.y;return{x:ei,y:pr,width:ut.width,height:ut.height}}function Ts(ge){return _i(ge).position==="static"}function yu(ge,De){if(!mi(ge)||_i(ge).position==="fixed")return null;if(De)return De(ge);let Ve=ge.offsetParent;return Rr(ge)===Ve&&(Ve=Ve.ownerDocument.body),Ve}function vu(ge,De){let Ve=ir(ge);if(Zi(ge))return Ve;if(!mi(ge)){let ht=an(ge);for(;ht&&!Pi(ht);){if(Ni(ht)&&!Ts(ht))return ht;ht=an(ht)}return Ve}let lt=yu(ge,De);for(;lt&&Kn(lt)&&Ts(lt);)lt=yu(lt,De);return lt&&Pi(lt)&&Ts(lt)&&!oa(lt)?Ve:lt||li(ge)||Ve}var vo=async function(ge){let De=this.getOffsetParent||vu,Ve=this.getDimensions,lt=await Ve(ge.floating);return{reference:pt(ge.reference,await De(ge.floating),ge.strategy),floating:{x:0,y:0,width:lt.width,height:lt.height}}};function Es(ge){return _i(ge).direction==="rtl"}var ui={convertOffsetParentRelativeRectToViewportRelativeRect:Pl,getDocumentElement:Rr,getClippingRect:Th,getOffsetParent:vu,getElementRects:vo,getClientRects:hs,getDimensions:mu,getScale:ji,isElement:Ni,isRTL:Es},de=fs,Pe=zn,Ge=ja,nt=(ge,De,Ve)=>{let lt=new Map,ht={platform:ui,...Ve},vt={...ht.platform,_c:lt};return ii(ge,De,{...ht,platform:vt})},gt=Object.hasOwnProperty,dt=oi(aa(),1),Jt=(0,dt.default)(),Vt=(ge,De,Ve)=>{let lt=new URL(ge.getAttribute(De),Ve);ge.setAttribute(De,lt.pathname+lt.hash)};function br(ge,De){ge.querySelectorAll('[href^="./"], [href^="../"]').forEach(Ve=>Vt(Ve,"href",De)),ge.querySelectorAll('[src^="./"], [src^="../"]').forEach(Ve=>Vt(Ve,"src",De))}var Ai={".js":["application/javascript","javascript"],".jsx":["application/javascript","javascriptreact"],".mjs":["application/javascript","javascript"],".cjs":["application/javascript","coffeescript"],".ts":["application/typescript","typescript"],".tsx":["application/typescript","typescript"],".css":["text/css","css"],".scss":["text/x-scss","sass"],".sass":["text/x-sass","sass"],".m":["text/x-matlab","matlab"],".c":["text/x-c","c"],".h":["text/x-c","c"],".cpp":["text/x-c++src","cpp"],".cxx":["text/x-c++src","cpp"],".cc":["text/x-c++src","cpp"],".hpp":["text/x-c++hdr","cpp"],".hxx":["text/x-c++hdr","cpp"],".hh":["text/x-c++hdr","cpp"],".rs":["text/rust","rust"],".go":["text/x-go","go"],".zig":["text/x-zig","zig"],".cu":["text/x-cuda","cuda"],".cuh":["text/x-cuda","cuda"],".py":["text/x-python","python"],".lua":["text/x-lua","lua"],".json":["application/json","json"],".java":["text/x-java","java"],".sql":["text/x-sql","sql"],".txt":["text/plain","plaintext"]},Wi=new Set(Object.keys(Ai));function te(ge){let De=ge.pathname.toLowerCase().split(".").at(-1);return Ai[`.${De}`]?Ai[`.${De}`][0]:"text/plain"}var ye=new Map;function Se(ge,De=5*60*1e3){let Ve=URL.createObjectURL(ge);ye.has(Ve)&&clearTimeout(ye.get(Ve));let lt=setTimeout(()=>{URL.revokeObjectURL(Ve),ye.delete(Ve)},De);return ye.set(Ve,lt),Ve}function Re(ge,De){ye.has(ge)&&(clearTimeout(De),URL.revokeObjectURL(ge),ye.delete(ge))}var $e=30*60*1e3,tt=new DOMParser;async function Ct({clientX:ge,clientY:De}){let Ve=this;if(Ve.dataset.noPopover==="true")return;async function lt(Dr){let{x:$i,y:Ar}=await nt(Ve,Dr,{middleware:[Ge({x:ge,y:De}),de(),Pe()]});Object.assign(Dr.style,{left:`${$i}px`,top:`${Ar}px`})}let ht=()=>[...Ve.children].some(Dr=>Dr.classList.contains("popover"));if(ht())return lt(Ve.lastChild);let vt=new URL(document.location.href);vt.hash="",vt.search="";let ut=new URL(Ve.href),xt=decodeURIComponent(ut.hash);if(ut.hash="",ut.search="",vt.toString()===ut.toString())return;let jt;if(Ve.dataset.arxivId){let Dr=new URL(`https://cdn.aarnphm.xyz/api/arxiv?identifier=${Ve.dataset.arxivId}`);jt=await fetch(Dr).catch(console.error)}else jt=await fetch(`${ut}`).catch(console.error);if(ht()||!jt)return;let ur=jt.headers.get("Content-Type")?jt.headers.get("Content-Type").split(";")[0]:te(ut),[ei,pr]=ur.split("/"),Er=document.createElement("div");Er.classList.add("popover");let Gt=document.createElement("div");switch(Gt.classList.add("popover-inner"),Er.appendChild(Gt),Gt.dataset.contentType=ur??void 0,ei){case"image":let Dr=document.createElement("img");Dr.src=ut.toString(),Dr.alt=ut.pathname,Gt.appendChild(Dr);break;case"application":switch(pr){case"pdf":let ra=document.createElement("iframe");if(Ve.dataset.arxivId){let Qr=await jt.blob(),Hi=Se(Qr,$e);ra.src=Hi}else ra.src=ut.toString();Gt.appendChild(ra);break;default:break}break;default:let $i=await jt.text(),Ar=tt.parseFromString($i,"text/html");br(Ar,ut);let pn=[...Ar.getElementsByClassName("popover-hint")];if(pn.length===0)return;Gt.append(...pn)}if(lt(Er),Ve.appendChild(Er),xt!==""){let Dr=Gt.querySelector(xt);Dr&&Gt.scroll({top:Dr.offsetTop-12,behavior:"instant"})}}document.addEventListener("nav",()=>{let ge=[...document.getElementsByClassName("internal")];for(let De of ge)De.addEventListener("mouseenter",Ct),window.addCleanup(()=>{De.removeEventListener("mouseenter",Ct);for(let[Ve,lt]of ye.entries())Re(Ve,lt);ye.clear()})})}(),function(){const na=document.createElement("script");na.src="https://plausible.io/js/script.manual.js",na.setAttribute("data-domain",location.hostname),na.defer=!0,document.head.appendChild(na),window.plausible=window.plausible||function(){(window.plausible.q=window.plausible.q||[]).push(arguments)},document.addEventListener("nav",()=>{plausible("pageview")})}(),function(){var na=Object.create,ta=Object.defineProperty,Ua=Object.getOwnPropertyDescriptor,Fa=Object.getOwnPropertyNames,On=Object.getPrototypeOf,dn=Object.prototype.hasOwnProperty,D=(Wt,ir)=>()=>(ir||Wt((ir={exports:{}}).exports,ir),ir.exports),hi=(Wt,ir,Rr,Ii)=>{if(ir&&typeof ir=="object"||typeof ir=="function")for(let Ni of Fa(ir))!dn.call(Wt,Ni)&&Ni!==Rr&&ta(Wt,Ni,{get:()=>ir[Ni],enumerable:!(Ii=Ua(ir,Ni))||Ii.enumerable});return Wt},oi=(Wt,ir,Rr)=>(Rr=Wt!=null?na(On(Wt)):{},hi(ir||!Wt||!Wt.__esModule?ta(Rr,"default",{value:Wt,enumerable:!0}):Rr,Wt)),aa=D((Wt,ir)=>{"use strict";ir.exports=Ii;function Rr(mi){return mi instanceof Buffer?Buffer.from(mi):new mi.constructor(mi.buffer.slice(),mi.byteOffset,mi.length)}function Ii(mi){if(mi=mi||{},mi.circles)return Ni(mi);let Qi=new Map;if(Qi.set(Date,li=>new Date(li)),Qi.set(Map,(li,nn)=>new Map(Kn(Array.from(li),nn))),Qi.set(Set,(li,nn)=>new Set(Kn(Array.from(li),nn))),mi.constructorHandlers)for(let li of mi.constructorHandlers)Qi.set(li[0],li[1]);let Gn=null;return mi.proto?oa:Zi;function Kn(li,nn){let Pi=Object.keys(li),_i=new Array(Pi.length);for(let Nn=0;Nn<Pi.length;Nn++){let an=Pi[Nn],ma=li[an];typeof ma!="object"||ma===null?_i[an]=ma:ma.constructor!==Object&&(Gn=Qi.get(ma.constructor))?_i[an]=Gn(ma,nn):ArrayBuffer.isView(ma)?_i[an]=Rr(ma):_i[an]=nn(ma)}return _i}function Zi(li){if(typeof li!="object"||li===null)return li;if(Array.isArray(li))return Kn(li,Zi);if(li.constructor!==Object&&(Gn=Qi.get(li.constructor)))return Gn(li,Zi);let nn={};for(let Pi in li){if(Object.hasOwnProperty.call(li,Pi)===!1)continue;let _i=li[Pi];typeof _i!="object"||_i===null?nn[Pi]=_i:_i.constructor!==Object&&(Gn=Qi.get(_i.constructor))?nn[Pi]=Gn(_i,Zi):ArrayBuffer.isView(_i)?nn[Pi]=Rr(_i):nn[Pi]=Zi(_i)}return nn}function oa(li){if(typeof li!="object"||li===null)return li;if(Array.isArray(li))return Kn(li,oa);if(li.constructor!==Object&&(Gn=Qi.get(li.constructor)))return Gn(li,oa);let nn={};for(let Pi in li){let _i=li[Pi];typeof _i!="object"||_i===null?nn[Pi]=_i:_i.constructor!==Object&&(Gn=Qi.get(_i.constructor))?nn[Pi]=Gn(_i,oa):ArrayBuffer.isView(_i)?nn[Pi]=Rr(_i):nn[Pi]=oa(_i)}return nn}}function Ni(mi){let Qi=[],Gn=[],Kn=new Map;if(Kn.set(Date,Pi=>new Date(Pi)),Kn.set(Map,(Pi,_i)=>new Map(oa(Array.from(Pi),_i))),Kn.set(Set,(Pi,_i)=>new Set(oa(Array.from(Pi),_i))),mi.constructorHandlers)for(let Pi of mi.constructorHandlers)Kn.set(Pi[0],Pi[1]);let Zi=null;return mi.proto?nn:li;function oa(Pi,_i){let Nn=Object.keys(Pi),an=new Array(Nn.length);for(let ma=0;ma<Nn.length;ma++){let Ls=Nn[ma],Mn=Pi[Ls];if(typeof Mn!="object"||Mn===null)an[Ls]=Mn;else if(Mn.constructor!==Object&&(Zi=Kn.get(Mn.constructor)))an[Ls]=Zi(Mn,_i);else if(ArrayBuffer.isView(Mn))an[Ls]=Rr(Mn);else{let oo=Qi.indexOf(Mn);oo!==-1?an[Ls]=Gn[oo]:an[Ls]=_i(Mn)}}return an}function li(Pi){if(typeof Pi!="object"||Pi===null)return Pi;if(Array.isArray(Pi))return oa(Pi,li);if(Pi.constructor!==Object&&(Zi=Kn.get(Pi.constructor)))return Zi(Pi,li);let _i={};Qi.push(Pi),Gn.push(_i);for(let Nn in Pi){if(Object.hasOwnProperty.call(Pi,Nn)===!1)continue;let an=Pi[Nn];if(typeof an!="object"||an===null)_i[Nn]=an;else if(an.constructor!==Object&&(Zi=Kn.get(an.constructor)))_i[Nn]=Zi(an,li);else if(ArrayBuffer.isView(an))_i[Nn]=Rr(an);else{let ma=Qi.indexOf(an);ma!==-1?_i[Nn]=Gn[ma]:_i[Nn]=li(an)}}return Qi.pop(),Gn.pop(),_i}function nn(Pi){if(typeof Pi!="object"||Pi===null)return Pi;if(Array.isArray(Pi))return oa(Pi,nn);if(Pi.constructor!==Object&&(Zi=Kn.get(Pi.constructor)))return Zi(Pi,nn);let _i={};Qi.push(Pi),Gn.push(_i);for(let Nn in Pi){let an=Pi[Nn];if(typeof an!="object"||an===null)_i[Nn]=an;else if(an.constructor!==Object&&(Zi=Kn.get(an.constructor)))_i[Nn]=Zi(an,nn);else if(ArrayBuffer.isView(an))_i[Nn]=Rr(an);else{let ma=Qi.indexOf(an);ma!==-1?_i[Nn]=Gn[ma]:_i[Nn]=nn(an)}}return Qi.pop(),Gn.pop(),_i}}}),Sn=Wt=>(ir,Rr)=>ir[`node${Wt}`]===Rr[`node${Wt}`],Ke=Sn("Name"),Ca=Sn("Type"),ba=Sn("Value");function Kr(Wt,ir){if(Wt.attributes.length===0&&ir.attributes.length===0)return[];let Rr=[],Ii=new Map,Ni=new Map;for(let mi of Wt.attributes)Ii.set(mi.name,mi.value);for(let mi of ir.attributes){let Qi=Ii.get(mi.name);mi.value===Qi?Ii.delete(mi.name):(typeof Qi<"u"&&Ii.delete(mi.name),Ni.set(mi.name,mi.value))}for(let mi of Ii.keys())Rr.push({type:5,name:mi});for(let[mi,Qi]of Ni.entries())Rr.push({type:4,name:mi,value:Qi});return Rr}function Ot(Wt,ir=!0){let Rr=`${Wt.localName}`;for(let{name:Ii,value:Ni}of Wt.attributes)ir&&Ii.startsWith("data-")||(Rr+=`[${Ii}=${Ni}]`);return Rr+=Wt.innerHTML,Rr}function Vi(Wt){switch(Wt.tagName){case"BASE":case"TITLE":return Wt.localName;case"META":{if(Wt.hasAttribute("name"))return`meta[name="${Wt.getAttribute("name")}"]`;if(Wt.hasAttribute("property"))return`meta[name="${Wt.getAttribute("property")}"]`;break}case"LINK":{if(Wt.hasAttribute("rel")&&Wt.hasAttribute("href"))return`link[rel="${Wt.getAttribute("rel")}"][href="${Wt.getAttribute("href")}"]`;if(Wt.hasAttribute("href"))return`link[href="${Wt.getAttribute("href")}"]`;break}}return Ot(Wt)}function Li(Wt){let[ir,Rr=""]=Wt.split("?");return`${ir}?t=${Date.now()}&${Rr.replace(/t=\d+/g,"")}`}function jr(Wt){if(Wt.nodeType===1&&Wt.hasAttribute("data-persist"))return Wt;if(Wt.nodeType===1&&Wt.localName==="script"){let ir=document.createElement("script");for(let{name:Rr,value:Ii}of Wt.attributes)Rr==="src"&&(Ii=Li(Ii)),ir.setAttribute(Rr,Ii);return ir.innerHTML=Wt.innerHTML,ir}return Wt.cloneNode(!0)}function Ir(Wt,ir){if(Wt.children.length===0&&ir.children.length===0)return[];let Rr=[],Ii=new Map,Ni=new Map,mi=new Map;for(let Qi of Wt.children)Ii.set(Vi(Qi),Qi);for(let Qi of ir.children){let Gn=Vi(Qi),Kn=Ii.get(Gn);Kn?Ot(Qi,!1)!==Ot(Kn,!1)&&Ni.set(Gn,jr(Qi)):mi.set(Gn,jr(Qi)),Ii.delete(Gn)}for(let Qi of Wt.childNodes){if(Qi.nodeType===1){let Gn=Vi(Qi);if(Ii.has(Gn)){Rr.push({type:1});continue}else if(Ni.has(Gn)){let Kn=Ni.get(Gn);Rr.push({type:3,attributes:Kr(Qi,Kn),children:gr(Qi,Kn)});continue}}Rr.push(void 0)}for(let Qi of mi.values())Rr.push({type:0,node:jr(Qi)});return Rr}function gr(Wt,ir){let Rr=[],Ii=Math.max(Wt.childNodes.length,ir.childNodes.length);for(let Ni=0;Ni<Ii;Ni++){let mi=Wt.childNodes.item(Ni),Qi=ir.childNodes.item(Ni);Rr[Ni]=Zr(mi,Qi)}return Rr}function Zr(Wt,ir){if(!Wt)return{type:0,node:jr(ir)};if(!ir)return{type:1};if(Ca(Wt,ir)){if(Wt.nodeType===3){let Rr=Wt.nodeValue,Ii=ir.nodeValue;if(Rr.trim().length===0&&Ii.trim().length===0)return}if(Wt.nodeType===1){if(Ke(Wt,ir)){let Rr=Wt.tagName==="HEAD"?Ir:gr;return{type:3,attributes:Kr(Wt,ir),children:Rr(Wt,ir)}}return{type:2,node:jr(ir)}}else return Wt.nodeType===9?Zr(Wt.documentElement,ir.documentElement):ba(Wt,ir)?void 0:{type:2,value:ir.nodeValue}}return{type:2,node:jr(ir)}}function vr(Wt,ir){if(ir.length!==0)for(let{type:Rr,name:Ii,value:Ni}of ir)Rr===5?Wt.removeAttribute(Ii):Rr===4&&Wt.setAttribute(Ii,Ni)}async function Vr(Wt,ir,Rr){if(!ir)return;let Ii;switch(Wt.nodeType===9?(Wt=Wt.documentElement,Ii=Wt):Rr?Ii=Rr:Ii=Wt,ir.type){case 0:{let{node:Ni}=ir;Wt.appendChild(Ni);return}case 1:{if(!Ii)return;Wt.removeChild(Ii);return}case 2:{if(!Ii)return;let{node:Ni,value:mi}=ir;if(typeof mi=="string"){Ii.nodeValue=mi;return}Ii.replaceWith(Ni);return}case 3:{if(!Ii)return;let{attributes:Ni,children:mi}=ir;vr(Ii,Ni);let Qi=Array.from(Ii.childNodes);await Promise.all(mi.map((Gn,Kn)=>Vr(Ii,Gn,Qi[Kn])));return}}}function Ht(Wt,ir){let Rr=Zr(Wt,ir);return Vr(Wt,Rr)}var xi=Object.hasOwnProperty,or=oi(aa(),1),Wr=(0,or.default)();function xr(Wt){return Wt.document.body.dataset.slug}var Zt=(Wt,ir,Rr)=>{let Ii=new URL(Wt.getAttribute(ir),Rr);Wt.setAttribute(ir,Ii.pathname+Ii.hash)};function dr(Wt,ir){Wt.querySelectorAll('[href^="./"], [href^="../"]').forEach(Rr=>Zt(Rr,"href",ir)),Wt.querySelectorAll('[src^="./"], [src^="../"]').forEach(Rr=>Zt(Rr,"src",ir))}var nr=1,qt=document.createElement("route-announcer"),Yr=Wt=>Wt?.nodeType===nr,ii=Wt=>{try{let ir=new URL(Wt);if(window.location.origin===ir.origin)return!0}catch{}return!1},ki=Wt=>{let ir=Wt.origin===window.location.origin,Rr=Wt.pathname===window.location.pathname;return ir&&Rr},zn=({target:Wt})=>{if(!Yr(Wt)||Wt.attributes.getNamedItem("target")?.value==="_blank")return;let ir=Wt.closest("a");if(!ir||"routerIgnore"in ir.dataset)return;let{href:Rr}=ir;if(ii(Rr))return{url:new URL(Rr),scroll:"routerNoscroll"in ir.dataset?!1:void 0}};function sa(Wt){let ir=new CustomEvent("nav",{detail:{url:Wt}});document.dispatchEvent(ir)}var un=new Set;window.addCleanup=Wt=>un.add(Wt);var ja;async function fs(Wt,ir=!1){ja=ja||new DOMParser;let Rr=await fetch(`${Wt}`).then(mi=>{if(mi.headers.get("content-type")?.startsWith("text/html"))return mi.text();window.location.assign(Wt)}).catch(()=>{window.location.assign(Wt)});if(!Rr)return;un.forEach(mi=>mi()),un.clear();let Ii=ja.parseFromString(Rr,"text/html");dr(Ii,Wt);let Ni=Ii.querySelector("title")?.textContent;if(Ni)document.title=Ni;else{let mi=document.querySelector("h1");Ni=mi?.innerText??mi?.textContent??Wt.pathname}qt.textContent!==Ni&&(qt.textContent=Ni),qt.dataset.persist="",Ii.body.appendChild(qt),Ht(document.body,Ii.body),ir||(Wt.hash?document.getElementById(decodeURIComponent(Wt.hash.substring(1)))?.scrollIntoView():window.scrollTo({top:0})),document.head.querySelectorAll(":not([spa-preserve])").forEach(mi=>mi.remove()),Ii.head.querySelectorAll(":not([spa-preserve])").forEach(mi=>document.head.appendChild(mi)),ir||history.pushState({},"",Wt),sa(xr(window)),delete qt.dataset.persist}window.spaNavigate=fs;function Vn(){return typeof window<"u"&&(window.addEventListener("click",async Wt=>{let{url:ir}=zn(Wt)??{};if(!(!ir||Wt.ctrlKey||Wt.metaKey)){if(Wt.preventDefault(),ki(ir)&&ir.hash){document.getElementById(decodeURIComponent(ir.hash.substring(1)))?.scrollIntoView(),history.pushState({},"",ir);return}try{fs(ir,!1)}catch{window.location.assign(ir)}}}),window.addEventListener("popstate",Wt=>{let{url:ir}=zn(Wt)??{};if(!(window.location.hash&&window.location.pathname===ir?.pathname))try{fs(new URL(window.location.toString()),!0)}catch{window.location.reload()}})),new class{go(Wt){let ir=new URL(Wt,window.location.toString());return fs(ir,!1)}back(){return window.history.back()}forward(){return window.history.forward()}}}if(Vn(),sa(xr(window)),!customElements.get("route-announcer")){let Wt={"aria-live":"assertive","aria-atomic":"true",style:"position: absolute; left: 0; top: 0; clip: rect(0 0 0 0); clip-path: inset(50%); overflow: hidden; white-space: nowrap; width: 1px; height: 1px"};customElements.define("route-announcer",class extends HTMLElement{constructor(){super()}connectedCallback(){for(let[ir,Rr]of Object.entries(Wt))this.setAttribute(ir,Rr)}})}}();
